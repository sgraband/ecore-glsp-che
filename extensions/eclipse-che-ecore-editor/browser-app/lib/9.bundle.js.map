{"version":3,"sources":["webpack:///../node_modules/@babel/runtime/helpers/arrayWithHoles.js","webpack:///../node_modules/@babel/runtime/helpers/iterableToArrayLimit.js","webpack:///../node_modules/@babel/runtime/helpers/nonIterableRest.js","webpack:///../node_modules/@babel/runtime/helpers/slicedToArray.js","webpack:///../node_modules/@babel/runtime/node_modules/regenerator-runtime/runtime.js","webpack:///../node_modules/@babel/runtime/regenerator/index.js","webpack:///../node_modules/@theia/languages/src/browser/language-client-contribution.ts","webpack:///../node_modules/@theia/languages/src/browser/language-client-factory.ts","webpack:///../node_modules/@theia/languages/src/browser/language-client-provider-impl.ts","webpack:///../node_modules/@theia/languages/src/browser/language-client-provider.ts","webpack:///../node_modules/@theia/languages/src/browser/language-client-services.ts","webpack:///../node_modules/@theia/languages/src/browser/language-resource-context-key.ts","webpack:///../node_modules/@theia/languages/src/browser/languages-frontend-contribution.ts","webpack:///../node_modules/@theia/languages/src/browser/languages-frontend-module.ts","webpack:///../node_modules/@theia/languages/src/browser/typehierarchy/typehierarchy-feature.ts","webpack:///../node_modules/@theia/languages/src/browser/typehierarchy/typehierarchy-protocol.ts","webpack:///../node_modules/@theia/languages/src/browser/window-impl.ts","webpack:///../node_modules/@theia/languages/src/browser/workspace-symbols.ts","webpack:///../node_modules/@theia/languages/src/common/index.ts","webpack:///../node_modules/@theia/languages/src/common/language-contribution.ts","webpack:///../node_modules/@theia/workspace/src/browser/index.ts","webpack:///../node_modules/glob-to-regexp/index.js","webpack:///../node_modules/monaco-languageclient/src/connection.ts","webpack:///../node_modules/monaco-languageclient/src/console-window.ts","webpack:///../node_modules/monaco-languageclient/src/disposable.ts","webpack:///../node_modules/monaco-languageclient/src/index.ts","webpack:///../node_modules/monaco-languageclient/src/monaco-commands.ts","webpack:///../node_modules/monaco-languageclient/src/monaco-converter.ts","webpack:///../node_modules/monaco-languageclient/src/monaco-diagnostic-collection.ts","webpack:///../node_modules/monaco-languageclient/src/monaco-language-client.ts","webpack:///../node_modules/monaco-languageclient/src/monaco-languages.ts","webpack:///../node_modules/monaco-languageclient/src/monaco-services.ts","webpack:///../node_modules/monaco-languageclient/src/monaco-workspace.ts","webpack:///../node_modules/monaco-languageclient/src/services.ts","webpack:///../node_modules/monaco-languageclient/src/vscode-api.ts","webpack:///../node_modules/monaco-languageclient/src/vscode-compatibility.ts","webpack:///../node_modules/uuid/index.js","webpack:///../node_modules/uuid/lib/bytesToUuid.js","webpack:///../node_modules/uuid/lib/rng-browser.js","webpack:///../node_modules/uuid/v1.js","webpack:///../node_modules/uuid/v4.js","webpack:///../node_modules/vscode-languageclient/lib/client.js","webpack:///../node_modules/vscode-languageclient/lib/codeConverter.js","webpack:///../node_modules/vscode-languageclient/lib/colorProvider.js","webpack:///../node_modules/vscode-languageclient/lib/configuration.js","webpack:///../node_modules/vscode-languageclient/lib/declaration.js","webpack:///../node_modules/vscode-languageclient/lib/foldingRange.js","webpack:///../node_modules/vscode-languageclient/lib/implementation.js","webpack:///../node_modules/vscode-languageclient/lib/progressPart.js","webpack:///../node_modules/vscode-languageclient/lib/protocolCodeLens.js","webpack:///../node_modules/vscode-languageclient/lib/protocolCompletionItem.js","webpack:///../node_modules/vscode-languageclient/lib/protocolConverter.js","webpack:///../node_modules/vscode-languageclient/lib/protocolDocumentLink.js","webpack:///../node_modules/vscode-languageclient/lib/typeDefinition.js","webpack:///../node_modules/vscode-languageclient/lib/utils/async.js","webpack:///../node_modules/vscode-languageclient/lib/utils/is.js","webpack:///../node_modules/vscode-languageclient/lib/utils/uuid.js","webpack:///../node_modules/vscode-languageclient/lib/workspaceFolders.js","webpack:///../node_modules/vscode-languageserver-protocol/lib/main.js","webpack:///../node_modules/vscode-languageserver-protocol/lib/messages.js","webpack:///../node_modules/vscode-languageserver-protocol/lib/protocol.callHierarchy.proposed.js","webpack:///../node_modules/vscode-languageserver-protocol/lib/protocol.colorProvider.js","webpack:///../node_modules/vscode-languageserver-protocol/lib/protocol.configuration.js","webpack:///../node_modules/vscode-languageserver-protocol/lib/protocol.declaration.js","webpack:///../node_modules/vscode-languageserver-protocol/lib/protocol.foldingRange.js","webpack:///../node_modules/vscode-languageserver-protocol/lib/protocol.implementation.js","webpack:///../node_modules/vscode-languageserver-protocol/lib/protocol.js","webpack:///../node_modules/vscode-languageserver-protocol/lib/protocol.progress.js","webpack:///../node_modules/vscode-languageserver-protocol/lib/protocol.selectionRange.js","webpack:///../node_modules/vscode-languageserver-protocol/lib/protocol.sematicTokens.proposed.js","webpack:///../node_modules/vscode-languageserver-protocol/lib/protocol.typeDefinition.js","webpack:///../node_modules/vscode-languageserver-protocol/lib/protocol.workspaceFolders.js","webpack:///../node_modules/vscode-languageserver-protocol/lib/utils/is.js","webpack:///../node_modules/vscode-languageserver-protocol/node_modules/vscode-jsonrpc/lib/cancellation.js","webpack:///../node_modules/vscode-languageserver-protocol/node_modules/vscode-jsonrpc/lib/events.js","webpack:///../node_modules/vscode-languageserver-protocol/node_modules/vscode-jsonrpc/lib/is.js","webpack:///../node_modules/vscode-languageserver-protocol/node_modules/vscode-jsonrpc/lib/linkedMap.js","webpack:///../node_modules/vscode-languageserver-protocol/node_modules/vscode-jsonrpc/lib/main.js","webpack:///../node_modules/vscode-languageserver-protocol/node_modules/vscode-jsonrpc/lib/messageReader.js","webpack:///../node_modules/vscode-languageserver-protocol/node_modules/vscode-jsonrpc/lib/messageWriter.js","webpack:///../node_modules/vscode-languageserver-protocol/node_modules/vscode-jsonrpc/lib/messages.js","webpack:///../node_modules/vscode-languageserver-protocol/node_modules/vscode-jsonrpc/lib/pipeSupport.js","webpack:///../node_modules/vscode-languageserver-protocol/node_modules/vscode-jsonrpc/lib/socketSupport.js"],"names":["__export","m","p","exports","hasOwnProperty","Object","defineProperty","value","vscode_1","require","vscode_languageserver_protocol_1","c2p","p2c","Is","async_1","UUID","progressPart_1","ConsoleLogger","message","console","error","warn","info","log","createConnection","input","output","errorHandler","closeHandler","logger","connection","createProtocolConnection","onError","data","onClose","result","listen","sendRequest","type","params","string","method","onRequest","handler","sendNotification","onNotification","onProgress","sendProgress","trace","tracer","sendNotificationOrTraceOptions","defaultTraceOptions","traceFormat","TraceFormat","Text","initialize","InitializeRequest","shutdown","ShutdownRequest","undefined","exit","ExitNotification","onLogMessage","LogMessageNotification","onShowMessage","ShowMessageNotification","onTelemetry","TelemetryEventNotification","didChangeConfiguration","DidChangeConfigurationNotification","didChangeWatchedFiles","DidChangeWatchedFilesNotification","didOpenTextDocument","DidOpenTextDocumentNotification","didChangeTextDocument","DidChangeTextDocumentNotification","didCloseTextDocument","DidCloseTextDocumentNotification","didSaveTextDocument","DidSaveTextDocumentNotification","onDiagnostics","PublishDiagnosticsNotification","dispose","ErrorAction","CloseAction","DefaultErrorHandler","name","restarts","_error","_message","count","Continue","Shutdown","push","Date","now","length","Restart","diff","window","showErrorMessage","DoNotRestart","shift","RevealOutputChannelOn","State","ClientState","SupportedSymbolKinds","SymbolKind","File","Module","Namespace","Package","Class","Method","Property","Field","Constructor","Enum","Interface","Function","Variable","Constant","String","Number","Boolean","Array","Key","Null","EnumMember","Struct","Event","Operator","TypeParameter","SupportedCompletionItemKinds","CompletionItemKind","Unit","Value","Keyword","Snippet","Color","Reference","Folder","ensure","target","key","DynamicFeature","is","candidate","func","register","unregister","messages","DocumentNotifiactions","_client","_event","_type","_middleware","_createParams","_selectorFilter","_selectors","Map","registerOptions","documentSelector","_listener","callback","set","id","values","notificationSent","_data","size","clear","selectors","textDocument","selector","languages","match","DidOpenTextDocumentFeature","client","_syncedDocuments","workspace","onDidOpenTextDocument","clientOptions","middleware","didOpen","code2ProtocolConverter","asOpenTextDocumentParams","textDocumentFilter","capabilities","dynamicRegistration","textDocumentSyncOptions","resolvedTextDocumentSync","openClose","generateUuid","textDocuments","forEach","uri","toString","has","DidCloseTextDocumentFeature","onDidCloseTextDocument","didClose","asCloseTextDocumentParams","get","DidChangeTextDocumentFeature","_changeData","_forcingDelivery","change","TextDocumentSyncKind","None","assign","syncKind","onDidChangeTextDocument","event","contentChanges","changeData","document","Incremental","asChangeTextDocumentParams","didChange","Full","_changeDelayer","forceDelivery","delayer","trigger","Delayer","WillSaveFeature","onWillSaveTextDocument","WillSaveTextDocumentNotification","willSave","willSaveEvent","asWillSaveTextDocumentParams","WillSaveWaitUntilFeature","willSaveWaitUntil","WillSaveTextDocumentWaitUntilRequest","then","edits","vEdits","protocol2CodeConverter","asTextEdits","waitUntil","DidSaveTextDocumentFeature","onDidSaveTextDocument","didSave","asSaveTextDocumentParams","_includeText","save","includeText","FileSystemWatcherFeature","_notifyFileEvent","_watchers","_capabilities","_documentSelector","_method","isArray","watchers","disposeables","watcher","globPattern","watchCreate","watchChange","watchDelete","kind","WatchKind","Create","Change","Delete","fileSystemWatcher","createFileSystemWatcher","hookListeners","fileSystemWatchers","listeners","onDidCreate","resource","asUri","FileChangeType","Created","onDidChange","Changed","onDidDelete","Deleted","disposable","TextDocumentFeature","_providers","Error","provider","registerLanguageProvider","capability","TextDocumentRegistrationOptions","StaticRegistrationOptions","hasId","WorkDoneProgressOptions","options","WorkspaceFeature","CompletionItemFeature","CompletionRequest","capabilites","completion","contextSupport","completionItem","snippetSupport","commitCharactersSupport","documentationFormat","MarkupKind","Markdown","PlainText","deprecatedSupport","preselectSupport","completionItemKind","valueSet","getRegistrationOptions","completionProvider","triggerCharacters","provideCompletionItems","position","context","token","asCompletionParams","asCompletionResult","logFailedRequest","Promise","resolve","resolveCompletionItem","item","CompletionResolveRequest","asCompletionItem","registerCompletionItemProvider","provideCompletionItem","resolveProvider","HoverFeature","HoverRequest","hoverCapability","contentFormat","hoverProvider","provideHover","asTextDocumentPositionParams","asHover","registerHoverProvider","SignatureHelpFeature","SignatureHelpRequest","config","signatureInformation","parameterInformation","labelOffsetSupport","signatureHelpProvider","providerSignatureHelp","asSignatureHelp","registerSignatureHelpProvider","provideSignatureHelp","DefinitionFeature","DefinitionRequest","definitionSupport","linkSupport","definitionProvider","provideDefinition","asDefinitionResult","registerDefinitionProvider","ReferencesFeature","ReferencesRequest","referencesProvider","providerReferences","asReferenceParams","asReferences","registerReferenceProvider","provideReferences","DocumentHighlightFeature","DocumentHighlightRequest","documentHighlightProvider","provideDocumentHighlights","asDocumentHighlights","registerDocumentHighlightProvider","DocumentSymbolFeature","DocumentSymbolRequest","symbolCapabilities","symbolKind","hierarchicalDocumentSymbolSupport","documentSymbolProvider","provideDocumentSymbols","asDocumentSymbolParams","element","DocumentSymbol","asDocumentSymbols","asSymbolInformations","registerDocumentSymbolProvider","WorkspaceSymbolFeature","WorkspaceSymbolRequest","workspaceSymbolProvider","workDoneProgress","_options","provideWorkspaceSymbols","query","registerWorkspaceSymbolProvider","CodeActionFeature","CodeActionRequest","cap","codeActionLiteralSupport","codeActionKind","CodeActionKind","Empty","QuickFix","Refactor","RefactorExtract","RefactorInline","RefactorRewrite","Source","SourceOrganizeImports","codeActionProvider","provideCodeActions","range","asTextDocumentIdentifier","asRange","asCodeActionContext","Command","asCommand","asCodeAction","registerCodeActionsProvider","codeActionKinds","providedCodeActionKinds","asCodeActionKinds","CodeLensFeature","CodeLensRequest","codeLensProvider","provideCodeLenses","asCodeLensParams","asCodeLenses","resolveCodeLens","codeLens","CodeLensResolveRequest","asCodeLens","registerCodeLensProvider","DocumentFormattingFeature","DocumentFormattingRequest","documentFormattingProvider","provideDocumentFormattingEdits","asFormattingOptions","registerDocumentFormattingEditProvider","DocumentRangeFormattingFeature","DocumentRangeFormattingRequest","documentRangeFormattingProvider","provideDocumentRangeFormattingEdits","registerDocumentRangeFormattingEditProvider","DocumentOnTypeFormattingFeature","DocumentOnTypeFormattingRequest","documentOnTypeFormattingProvider","moreTriggerCharacter","provideOnTypeFormattingEdits","ch","asPosition","registerOnTypeFormattingEditProvider","firstTriggerCharacter","RenameFeature","RenameRequest","rename","prepareSupport","renameProvider","prepareProvider","provideRenameEdits","newName","asWorkspaceEdit","reject","prepareRename","PrepareRenameRequest","Range","placeholder","registerRenameProvider","DocumentLinkFeature","DocumentLinkRequest","documentLinkProvider","provideDocumentLinks","asDocumentLinkParams","asDocumentLinks","resolveDocumentLink","link","DocumentLinkResolveRequest","asDocumentLink","registerDocumentLinkProvider","ConfigurationFeature","_listeners","section","synchronize","configurationSection","onDidChangeConfiguration","sections","affected","some","affectsConfiguration","settings","extractSettingsInformation","getMiddleware","keys","ensurePath","path","current","i","obj","create","workspaceFolder","index","indexOf","getConfiguration","substr","split","ExecuteCommandFeature","_commands","executeCommandProvider","commands","command","registerCommand","args","arguments","ExecuteCommandRequest","MessageTransports","MessageReader","reader","MessageWriter","writer","OnReady","_resolve","_reject","_used","BaseLanguageClient","_traceFormat","_features","_method2Message","_dynamicFeatures","_id","_name","_clientOptions","diagnosticCollectionName","outputChannelName","revealOutputChannelOn","stdioEncoding","initializationOptions","initializationFailedHandler","progressOnInitialization","uriConverters","state","Initial","_connectionPromise","_resolvedConnection","_initializeResult","outputChannel","_outputChannel","_disposeOutputChannel","_traceOutputChannel","traceOutputChannel","_diagnostics","_fileEvents","_fileEventDelayer","_onReady","_onReadyCallbacks","_onStop","_telemetryEmitter","Emitter","_stateChangeEmitter","_tracer","messageOrDataObject","logTrace","logObjectTrace","_c2p","createConverter","code2Protocol","_p2c","protocol2Code","registerBuiltinFeatures","Running","Starting","Stopped","isConnectionActive","forceDocumentSync","ResponseError","responseError","code","stack","appendLine","toLocaleTimeString","data2String","Info","showNotificationMessage","Warn","showInformationMessage","show","isLSPMessage","append","JSON","stringify","Stopping","isUsed","createDiagnosticCollection","resolveConnection","MessageType","Warning","showWarningMessage","ShowMessageRequest","messageFunc","actions","fire","StartFailed","Disposable","needsStop","stop","refreshTrace","initOption","rootPath","fsPath","_clientGetRootPath","initParams","processId","process","pid","rootUri","Uri","file","computeClientCapabilities","Trace","_trace","workspaceFolders","fillInitializeParams","part","ProgressPart","workDoneToken","doInitialize","done","cancel","number","textDocumentSync","handleDiagnostics","RegistrationRequest","handleRegistrationRequest","UnregistrationRequest","handleUnregistrationRequest","ApplyWorkspaceEditRequest","handleApplyWorkspaceEdit","InitializedNotification","hookFileEvents","hookConfigurationChanged","initializeFeatures","retry","title","folders","folder","scheme","cleanUp","cleanUpChannel","channel","diagnostics","listener","onReady","changes","asDiagnostics","setDiagnostics","handleConnectionError","handleConnectionClosed","createMessageTransports","transports","action","closed","start","Off","traceConfig","fromString","_connection","fileEvents","array","registerRaw","features","feature","registerFeature","notifyFileEvent","applyEdit","workspaceEdit","documentChanges","resourceOperations","ResourceOperationKind","Rename","failureHandling","FailureHandlingKind","TextOnlyTransactional","relatedInformation","tagSupport","fillClientCapabilities","registrations","registration","unregisterations","unregistration","edit","openTextDocuments","versionMismatch","TextDocumentEdit","version","applied","ErrorCodes","RequestCancelled","_state","oldState","getPublicState","newState","createOutputChannel","proto","protocolCompletionItem_1","protocolCodeLens_1","protocolDocumentLink_1","uriConverter","nullConverter","_uriConverter","asVersionedTextDocumentIdentifier","languageId","text","getText","isTextDocumentChangeEvent","isTextDocument","arg","map","line","character","end","rangeLength","includeContent","asTextDocumentSaveReason","reason","TextDocumentSaveReason","Manual","AfterDelay","FocusOut","asWorkerPosition","asTriggerKind","triggerKind","CompletionTriggerKind","TriggerCharacter","TriggerForIncompleteCompletions","Invoked","triggerCharacter","asPositions","elem","asDiagnosticSeverity","DiagnosticSeverity","Information","Hint","asDiagnosticTags","tags","tag","converted","asDiagnosticTag","DiagnosticTag","Unnecessary","Deprecated","asDiagnostic","Diagnostic","severity","source","items","asDocumentation","format","documentation","asCompletionItemKind","original","label","protocolItem","detail","filterText","fillPrimaryInsertText","originalItemKind","sortText","additionalTextEdits","commitCharacters","slice","preselect","deprecated","InsertTextFormat","textEdit","newText","insertText","SnippetString","insertTextFormat","fromEdit","asTextEdit","includeDeclaration","only","CodeActionContext","CodeLens","tabSize","insertSpaces","DocumentLink","client_1","ColorProviderFeature","DocumentColorRequest","getRegistration","colorProvider","provideColorPresentations","color","requestParams","ColorPresentationRequest","asColorPresentations","bind","provideDocumentColors","asColorInformations","registerColorProvider","red","green","blue","alpha","colorInformation","ci","ColorInformation","asColor","colorPresentations","cp","presentation","ColorPresentation","configuration","ConfigurationRequest","scopeUri","lastIndexOf","DeclarationFeature","DeclarationRequest","declarationSupport","declarationProvider","provideDeclaration","asDeclarationResult","registerDeclarationProvider","FoldingRangeFeature","FoldingRangeRequest","rangeLimit","lineFoldingOnly","foldingRangeProvider","provideFoldingRanges","_","asFoldingRanges","registerFoldingRangeProvider","FoldingRangeKind","Comment","Imports","Region","foldingRanges","r","FoldingRange","startLine","endLine","asFoldingRangeKind","ImplementationFeature","ImplementationRequest","implementationSupport","implementationProvider","provideImplementation","registerImplementationProvider","__awaiter","thisArg","_arguments","P","generator","fulfilled","step","next","e","rejected","apply","_token","_reported","_disposable","Proposed","WorkDoneProgress","begin","report","location","cancellable","ProgressLocation","Notification","Window","withProgress","progress","cancellationToken","_progress","_infinite","percentage","_cancellationToken","onCancellationRequested","WorkDoneProgressCancelNotification","Math","max","min","delta","increment","ProtocolCodeLens","ProtocolCompletionItem","CompletionItem","ls","CodeBlock","language","parse","diagnostic","asRelatedInformation","asDiagnosticRelatedInformation","information","DiagnosticRelatedInformation","asLocation","Position","asHoverContent","MarkdownString","appendCodeblock","appendMarkdown","appendText","hover","Hover","contents","list","CompletionList","isIncomplete","asCompletionInsertText","itemKind","stringArray","TextEdit","SignatureHelp","activeSignature","activeParameter","signatures","asSignatureInformations","asSignatureInformation","SignatureInformation","parameters","asParameterInformations","asParameterInformation","ParameterInformation","Location","asLocationResult","asLocationLink","targetUri","targetRange","targetSelectionRange","originSelectionRange","LocationLink","links","locations","asDocumentHighlight","DocumentHighlight","asDocumentHighlightKind","DocumentHighlightKind","Read","Write","asSymbolInformation","asSymbolKind","SymbolInformation","containerName","asDocumentSymbol","selectionRange","children","child","asCommands","kindMapping","asCodeActionKind","parts","CodeAction","WorkspaceEdit","CreateFile","createFile","RenameFile","renameFile","oldUri","newUri","DeleteFile","deleteFile","asColorInformation","asColorPresentation","asFoldingRange","asSelectionRange","SelectionRange","parent","asSelectionRanges","selectionRanges","ProtocolDocumentLink","TypeDefinitionFeature","TypeDefinitionRequest","typeDefinitionSupport","typeDefinitionProvider","provideTypeDefinition","registerTypeDefinitionProvider","defaultDelay","timeout","completionPromise","onSuccess","task","delay","cancelTimeout","setTimeout","clearTimeout","boolean","every","typedArray","check","thenable","ValueUUID","_value","other","asHex","V4UUID","_randomHex","_oneOf","_timeHighBits","join","floor","random","_chars","empty","v4","_UUIDPattern","isUUID","test","access","WorkspaceFoldersFeature","asProtocol","WorkspaceFoldersRequest","onDidChangeWorkspaceFolders","didChangeWorkspaceFolders","added","removed","DidChangeWorkspaceFoldersNotification","vscode_jsonrpc_1","CancellationToken","CancellationTokenSource","SetTraceNotification","LogTraceNotification","RequestType","RequestType0","NotificationType","NotificationType0","ConnectionStrategy","StreamMessageReader","StreamMessageWriter","IPCMessageReader","IPCMessageWriter","createClientPipeTransport","createServerPipeTransport","generateRandomPipeName","createClientSocketTransport","createServerSocketTransport","ProgressType","callHierarchy","st","CallHierarchyPrepareRequest","CallHierarchyIncomingCallsRequest","CallHierarchyOutgoingCallsRequest","SemanticTokenTypes","SemanticTokenModifiers","SemanticTokens","SemanticTokensRequest","SemanticTokensEditsRequest","SemanticTokensRangeRequest","strategy","createMessageConnection","ProtocolRequestType0","ProtocolRequestType","ProtocolNotificationType","ProtocolNotificationType0","messages_1","resultType","__noDynamicImport","protocol_implementation_1","protocol_typeDefinition_1","protocol_workspaceFolders_1","protocol_configuration_1","protocol_colorProvider_1","protocol_foldingRange_1","protocol_declaration_1","protocol_selectionRange_1","SelectionRangeRequest","protocol_progress_1","WorkDoneProgressCreateRequest","DocumentFilter","pattern","DocumentSelector","Abort","Transactional","Undo","objectLiteral","hasWorkDoneProgress","InitializeError","unknownProtocolVersion","Log","SignatureHelpTriggerKind","ContentChange","resultId","events_1","freeze","isCancellationRequested","Cancelled","shortcutEvent","handle","MutableToken","_isCancelled","_emitter","CallbackList","bucket","_callbacks","_contexts","remove","foundCallbackWithDifferentContext","len","splice","ret","callbacks","contexts","invoke","call","thisArgs","disposables","onFirstListenerAdd","isEmpty","add","_noop","onLastListenerRemove","Touch","First","Last","LinkedMap","_map","_head","_tail","_size","touch","previous","addItemLast","addItemFirst","removeItem","callbackfn","RequestType1","RequestType2","RequestType3","RequestType4","RequestType5","RequestType6","RequestType7","RequestType8","RequestType9","NotificationType1","NotificationType2","NotificationType3","NotificationType4","NotificationType5","NotificationType6","NotificationType7","NotificationType8","NotificationType9","messageReader_1","SocketMessageReader","messageWriter_1","SocketMessageWriter","cancellation_1","linkedMap_1","CancelNotification","ProgressNotification","NullLogger","toLowerCase","Messages","Verbose","ConnectionErrors","ConnectionError","setPrototypeOf","prototype","cancelUndispatched","ConnectionState","_createMessageConnection","messageReader","messageWriter","sequenceNumber","notificationSquenceNumber","unknownResponseSquenceNumber","starRequestHandler","requestHandlers","starNotificationHandler","notificationHandlers","progressHandlers","timer","messageQueue","responsePromises","requestTokens","New","errorEmitter","closeEmitter","unhandledNotificationEmitter","unhandledProgressEmitter","disposeEmitter","createRequestQueueKey","createResponseQueueKey","createNotificationQueueKey","addMessageToQueue","queue","isRequestMessage","isResponseMessage","isListening","Listening","isClosed","Closed","isDisposed","Disposed","readErrorHandler","writeErrorHandler","triggerMessageQueue","setImmediate","processMessageQueue","handleRequest","isNotificationMessage","handleNotification","handleResponse","handleInvalidMessage","toCancel","response","traceSendingResponse","write","requestMessage","reply","resultOrError","startTime","jsonrpc","toJson","replyError","replySuccess","traceReceivedRequest","requestHandler","cancellationSource","tokenKey","handlerResult","numberOfParams","promise","InternalError","MethodNotFound","responseMessage","responsePromise","traceReceivedResponse","notificationHandler","traceReceivedNotification","responseHandler","traceSendingRequest","logLSPMessage","traceSendingNotification","timerStart","lspMessage","timestamp","throwIfClosedOrDisposed","throwIfListening","AlreadyListening","throwIfNotListening","undefinedToNull","param","computeMessageParams","messageParams","notificationMessage","onUnhandledProgress","last","MessageWriteError","_sendNotification","onUnhandledNotification","onDispose","inspect","verbose","isMessageReader","read","isMessageWriter","DefaultSize","CR","Buffer","from","LF","CRLF","MessageBuffer","encoding","buffer","allocUnsafe","chunk","toAppend","str","bufferLen","byteLength","copy","newSize","ceil","concat","headers","header","trim","nextStart","onPartialMessage","AbstractMessageReader","partialMessageEmitter","asError","readable","_partialMessageTimeout","nextMessageLength","messageToken","partialMessageTimer","on","onData","fireError","fireClose","tryReadHeaders","contentLength","parseInt","isNaN","msg","tryReadContent","setPartialMessageTimer","clearPartialMessageTimer","json","firePartialMessage","waitingTime","eventEmitter","socket","ContentLength","AbstractMessageWriter","writable","errorCount","sending","doWriteMessage","send","destroy","handleError","ParseError","InvalidRequest","InvalidParams","serverErrorStart","serverErrorEnd","ServerNotInitialized","UnknownErrorCode","ContentModified","MessageReadError","AbstractMessageType","_numberOfParams","path_1","os_1","crypto_1","net_1","randomSuffix","randomBytes","platform","tmpdir","pipeName","connectResolve","connected","server","createServer","close","removeListener","onConnected","port"],"mappings":";;;;;;;;;AAAA;AACA;AACA;;AAEA,iC;;;;;;;;;;;ACJA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,6CAA6C,+BAA+B;AAC5E;;AAEA;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;;AAEA,uC;;;;;;;;;;;AC3BA;AACA;AACA;;AAEA,kC;;;;;;;;;;;ACJA,qBAAqB,mBAAO,CAAC,kFAAkB;;AAE/C,2BAA2B,mBAAO,CAAC,8FAAwB;;AAE3D,iCAAiC,mBAAO,CAAC,0GAA8B;;AAEvE,sBAAsB,mBAAO,CAAC,oFAAmB;;AAEjD;AACA;AACA;;AAEA,gC;;;;;;;;;;;ACZA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc;AACd,KAAK;AACL,cAAc;AACd;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,yDAAyD;AACzD;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;;AAEA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA,WAAW;AACX;;AAEA;AACA;AACA,wCAAwC,WAAW;AACnD;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,SAAS;AACT;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,2BAA2B;AAC3B;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,SAAS;AACT;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,SAAS;AACT;AACA;AACA;AACA;;AAEA;;AAEA,SAAS;AACT;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,oCAAoC,cAAc;AAClD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,iCAAiC,kBAAkB;AACnD;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,iBAAiB;;AAEjB;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,wBAAwB,iBAAiB;AACzC;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,YAAY;AACZ;AACA;;AAEA;AACA,YAAY;AACZ;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,KAAK;;AAEL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,8CAA8C,QAAQ;AACtD;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,aAAa;AACb;AACA;;AAEA,WAAW;AACX;AACA;AACA;;AAEA,WAAW;AACX;AACA;AACA;;AAEA,WAAW;AACX;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA,8CAA8C,QAAQ;AACtD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,KAAK;;AAEL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,OAAO;AACP;AACA;;AAEA;AACA,KAAK;;AAEL;AACA,8CAA8C,QAAQ;AACtD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA,8CAA8C,QAAQ;AACtD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,CAAC;AACD;AACA;AACA;AACA;AACA,EAAE,KAA0B,oBAAoB,SAAE;AAClD;;AAEA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACxtBA,iBAAiB,mBAAO,CAAC,uGAAqB;;;;;;;;;;;;;;ACA9C;;;;;;;;;;;;;;kFAckF;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAElF,uDAAuD;AAEvD,qGAA+C;AAC/C,uGAA4E;AAC5E,oHAA0E;AAC1E,uHAA2F;AAC3F,mKAIoC;AAEpC,gKAAkE;AAClE,iIAAgE;AAEhE,8IAA+D;AAElD,kCAA0B,GAAG,MAAM,CAAC,4BAA4B,CAAC,CAAC;AAW/E;IAgBI,wCAC0C,SAAoB,EACpB,SAAoB,EACR,qBAA4C;QAFxD,cAAS,GAAT,SAAS,CAAW;QACpB,cAAS,GAAT,SAAS,CAAW;QACR,0BAAqB,GAArB,qBAAqB,CAAuB;QAqCxF,uBAAkB,GAAG,IAAI,uBAAQ,EAAqB,CAAC;QAE9C,iBAAY,GAAG,IAAI,6BAAoB,EAAE,CAAC;QAmBnD,SAAI,GAAG,OAAO,CAAC,OAAO,EAAE,CAAC;QAxD/B,IAAI,CAAC,YAAY,EAAE,CAAC;IACxB,CAAC;IAED,sBAAI,0DAAc;aAAlB;YACI,OAAO,IAAI,CAAC,eAAe,CAAC,CAAC,CAAC,OAAO,CAAC,OAAO,CAAC,IAAI,CAAC,eAAe,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC;QACrF,CAAC;;;OAAA;IAED,8DAA8D;IAC9D,0DAAiB,GAAjB,UAAkB,GAAwB;QAA1C,iBAyBC;QAxBG,8DAA8D;QAC9D,IAAM,kBAAkB,GAAmB,EAAE,CAAC;QAC9C,IAAM,iBAAiB,GAAG,IAAI,CAAC,iBAAiB,CAAC;QACjD,IAAI,iBAAiB,CAAC,MAAM,KAAK,CAAC,EAAE;YAChC,kBAAkB,CAAC,IAAI,CAAC,IAAI,CAAC,sBAAsB,EAAE,CAAC,CAAC;SAC1D;QACD,IAAM,gBAAgB,GAAG,IAAI,CAAC,gBAAgB,CAAC;QAC/C,IAAI,gBAAgB,EAAE;YAClB,kBAAkB,CAAC,IAAI,CAAC,IAAI,CAAC,uBAAuB,CAAC,gBAAgB,CAAC,CAAC,CAAC;SAC3E;QACD,IAAI,kBAAkB,CAAC,MAAM,KAAK,CAAC,EAAE;YACjC,OAAO,OAAO,CAAC,GAAG,CAAC;gBACf,IAAI,CAAC,SAAS,CAAC,KAAK;gBACpB,OAAO,CAAC,IAAI,CAAC,kBAAkB,CAAC,GAAG,CAAC,WAAC,IAAI,WAAI,OAAO,CAAC,UAAM,OAAO;;;;;;gCAE1D,qBAAM,CAAC;;gCAAP,SAAO,CAAC;gCACR,OAAO,EAAE,CAAC;;;;gCAEV,OAAO,CAAC,KAAK,CAAC,GAAC,CAAC,CAAC;;;;;qBAExB,CAAC,EAPuC,CAOvC,CAAC,CAAC;aACP,CAAC,CAAC;SACN;QACD,OAAO,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC;IAChC,CAAC;IAKD,iDAAQ,GAAR;QAAA,iBAaC;QAZG,IAAI,IAAI,CAAC,YAAY,CAAC,QAAQ,EAAE;YAC5B,IAAI,CAAC,IAAI,CAAC,eAAe,EAAE;gBACvB,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC,oBAAoB,CAAC,cAAM,YAAI,CAAC,kBAAkB,CAAC,OAAO,EAA/B,CAA+B,CAAC,CAAC;gBACxF,IAAI,CAAC,eAAe,CAAC,gBAAgB,CAAC,UAAC,EAAY;wBAAV,sBAAQ;oBAC7C,KAAI,CAAC,KAAK,GAAG,QAAQ,CAAC;gBAC1B,CAAC,CAAC,CAAC;aACN;YACD,IAAM,MAAM,GAAG,IAAI,6BAAoB,CAAC,mBAAU,CAAC,MAAM,CAAC,cAAQ,CAAC,CAAC,CAAC,CAAC,CAAC,uBAAuB;YAC9F,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;YAC/B,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,CAAC;SAC3B;QACD,OAAO,IAAI,CAAC,YAAY,CAAC;IAC7B,CAAC;IACD,mDAAU,GAAV;QACI,IAAI,CAAC,YAAY,CAAC,OAAO,EAAE,CAAC;IAChC,CAAC;IAGe,mDAAU,GAA1B,UAA2B,MAA4B;;;;;;;;wBAE/C,kGAAkG;wBAClG,qBAAM,IAAI,CAAC,IAAI;;wBADf,kGAAkG;wBAClG,SAAe,CAAC;wBAChB,IAAI,MAAM,CAAC,QAAQ,EAAE;4BACjB,sBAAO;yBACV;wBACuB,qBAAM,IAAI,CAAC,kBAAkB,EAAE;;wBAAjD,eAAe,GAAG,SAA+B;wBACvD,IAAI,MAAM,CAAC,QAAQ,EAAE;4BACjB,sBAAO;yBACV;wBACiB,qBAAM,IAAI,CAAC,2BAA2B,CAAC,MAAM,CAAC,IAAI,CAAC,EAAE,EAAE,eAAe,CAAC;;wBAAnF,cAAY,SAAuE;wBACzF,IAAI,MAAM,CAAC,QAAQ,EAAE;4BACjB,IAAI,CAAC,2BAA2B,CAAC,OAAO,CAAC,WAAS,CAAC,CAAC;4BACpD,sBAAO;yBACV;wBACD,MAAM,CAAC,IAAI,CAAC,mBAAU,CAAC,MAAM,CAAC,cAAM,YAAI,CAAC,2BAA2B,CAAC,OAAO,CAAC,WAAS,CAAC,EAAnD,CAAmD,CAAC,CAAC,CAAC;wBAC1F,IAAI,CAAC,kBAAkB,CAAC,MAAM,CAAC;4BAC3B,IAAI,EAAE,+CAAoB,CAAC,OAAO,CAAC,IAAI,EAAE,WAAS,CAAC;4BACnD,YAAY,EAAE,2BAAiB;gCAC3B,KAAI,CAAC,kBAAkB,CAAC,OAAO,CAAC,iBAAiB,CAAC,CAAC;gCACnD,iBAAiB,CAAC,SAAS,CAAC,cAAM,YAAI,CAAC,kBAAkB,GAAG,IAAI,uBAAQ,EAAqB,EAA3D,CAA2D,CAAC,CAAC;gCAC/F,IAAI,MAAM,CAAC,QAAQ,EAAE;oCACjB,iBAAiB,CAAC,OAAO,EAAE,CAAC;oCAC5B,OAAO;iCACV;gCACD,MAAM,CAAC,IAAI,CAAC,mBAAU,CAAC,MAAM,CAAC,cAAM,YAAI,CAAC,IAAI,GAAG,CAAC;;;;;;gDAEzC,qCAAqC;gDACrC,qBAAM,IAAI,CAAC,eAAgB,CAAC,OAAO,EAAE;;gDADrC,qCAAqC;gDACrC,SAAqC,CAAC;gDACtC,uBAAuB;gDACvB,qBAAM,IAAI,CAAC,eAAgB,CAAC,IAAI,EAAE;;gDADlC,uBAAuB;gDACvB,SAAkC,CAAC;;;;gDAEnC,IAAI;oDACA,iEAAiE;oDACjE,iBAAiB,CAAC,OAAO,EAAE,CAAC;iDAC/B;gDAAC,QAAQ,WAAW,IAAb,EAAE,WAAW,EAAE;;;;;qCAE9B,CAAC,EAAE,EAZgC,CAYhC,CAAC,CAAC,CAAC;gCACP,MAAM,CAAC,IAAI,CAAC,iBAAiB,CAAC,OAAO,CAAC,cAAM,YAAI,CAAC,YAAY,EAAE,EAAnB,CAAmB,CAAC,CAAC,CAAC;gCAClE,KAAI,CAAC,eAAgB,CAAC,KAAK,EAAE,CAAC;gCAC9B,8EAA8E;gCAC9E,KAAI,CAAC,WAAW,CAAC,KAAI,CAAC,eAAgB,EAAE,MAAM,CAAC,CAAC;4BACpD,CAAC;yBACJ,EAAE,EAAE,YAAY,EAAE,KAAK,EAAE,CAAC,CAAC;;;;wBAE5B,OAAO,CAAC,KAAK,CAAC,GAAC,CAAC,CAAC;wBACjB,IAAI,CAAC,MAAM,CAAC,QAAQ,EAAE;4BAClB,IAAI,CAAC,YAAY,EAAE,CAAC;yBACvB;;;;;;KAER;IAGD,sBAAI,mDAAO;aAAX;YACI,OAAO,CAAC,IAAI,CAAC,YAAY,CAAC,QAAQ,IAAI,IAAI,CAAC,KAAK,KAAK,gCAAK,CAAC,OAAO,CAAC;QACvE,CAAC;;;OAAA;IAED,gDAAO,GAAP;QACI,IAAI,CAAC,IAAI,CAAC,OAAO,EAAE;YACf,OAAO;SACV;QACD,IAAI,CAAC,YAAY,EAAE,CAAC;IACxB,CAAC;IAES,qDAAY,GAAtB;QACI,IAAI,CAAC,UAAU,EAAE,CAAC;QAClB,IAAI,CAAC,QAAQ,EAAE,CAAC;IACpB,CAAC;IAES,oDAAW,GAArB,UAAsB,cAA+B,EAAE,MAA6B;QAApF,iBAEC;QADG,cAAc,CAAC,OAAO,EAAE,CAAC,IAAI,CAAC,cAAM,YAAI,CAAC,OAAO,CAAC,cAAc,EAAE,MAAM,CAAC,EAApC,CAAoC,CAAC,CAAC;IAC9E,CAAC;IAES,gDAAO,GAAjB,UAAkB,cAA+B,EAAE,MAA6B;QAC5E,IAAI,CAAC,eAAe,GAAG,cAAc,CAAC;QACtC,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,eAAe,CAAC,CAAC;QACxC,IAAI,CAAC,YAAY,EAAE,CAAC;IACxB,CAAC;IAES,qDAAY,GAAtB;QAAA,iBAIC;QAHG,IAAI,CAAC,KAAK,GAAG,IAAI,OAAO,CAAkB,iBAAO;YAC7C,YAAI,CAAC,YAAY,GAAG,OAAO;QAA3B,CAA2B,CAC9B,CAAC;IACN,CAAC;IAES,6DAAoB,GAA9B,UAA+B,UAAuE;QAClG,IAAM,aAAa,GAAG,IAAI,CAAC,aAAa,EAAE,CAAC;QAC3C,OAAO,IAAI,CAAC,qBAAqB,CAAC,GAAG,CAAC,IAAI,EAAE,aAAa,EAAE,UAAU,CAAC,CAAC;IAC3E,CAAC;IAES,sDAAa,GAAvB;QAAA,iBASC;QARS,aAAwF,EAAtF,UAAE,EAAE,sCAAgB,EAAE,0BAAU,EAAE,8CAAoB,EAAE,gDAA8B,CAAC;QAC/F,OAAO;YACH,gBAAgB;YAChB,WAAW,EAAE,EAAE,UAAU,cAAE,oBAAoB,wBAAE;YACjD,2BAA2B,EAAE,aAAG,IAAI,YAAI,CAAC,0BAA0B,CAAC,GAAG,CAAC,EAApC,CAAoC;YACxE,wBAAwB,EAAE,EAAE;YAC5B,qBAAqB;SACxB,CAAC;IACN,CAAC;IACS,mEAA0B,GAApC,UAAqC,GAAkD;QAAvF,iBASC;QARG,IAAI,CAAC,UAAU,EAAE,CAAC;QAClB,IAAM,MAAM,GAAG,GAAG,YAAY,KAAK,CAAC,CAAC,CAAC,OAAK,GAAG,CAAC,OAAS,CAAC,CAAC,CAAC,GAAG,CAAC;QAC/D,IAAI,CAAC,cAAc,CAAC,KAAK,CAAC,qBAAmB,IAAI,CAAC,IAAI,wBAAmB,MAAQ,EAAE,OAAO,CAAC,CAAC,IAAI,CAAC,gBAAM;YACnG,IAAI,MAAM,EAAE;gBACR,KAAI,CAAC,QAAQ,EAAE,CAAC;aACnB;QACL,CAAC,CAAC,CAAC;QACH,OAAO,KAAK,CAAC;IACjB,CAAC;IAES,2DAAkB,GAA5B;QACI,OAAO,SAAS,CAAC;IACrB,CAAC;IAGD,sBAAc,iEAAqB;QADnC,8DAA8D;aAC9D;YACI,OAAO,SAAS,CAAC;QACrB,CAAC;;;OAAA;IAED,sBAAc,gEAAoB;aAAlC;YACI,OAAO,SAAS,CAAC;QACrB,CAAC;;;OAAA;IAED,sBAAc,6DAAiB;aAA/B;YACI,OAAO,EAAE,CAAC;QACd,CAAC;;;OAAA;IAED,sBAAc,4DAAgB;aAA9B;YACI,OAAO,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;QACrB,CAAC;;;OAAA;IAGD,sBAAc,sDAAU;aAAxB;YACI,OAAO,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,WAAW,IAAI,IAAI,CAAC,gBAAgB,EAAE,CAAC;QAC1E,CAAC;;;OAAA;IACS,yDAAgB,GAA1B;;QACI,IAAM,QAAQ,GAAG,EAAE,CAAC;QACpB,IAAI,IAAI,CAAC,SAAS,CAAC,uBAAuB,EAAE;;gBACxC,KAA0B,sBAAI,CAAC,YAAY,6CAAE;oBAAxC,IAAM,WAAW;oBAClB,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,uBAAuB,CAAC,WAAW,CAAC,CAAC,CAAC;iBACtE;;;;;;;;;SACJ;QACD,OAAO,QAAQ,CAAC;IACpB,CAAC;IAED,sBAAc,wDAAY;aAA1B;YACI,OAAO,EAAE,CAAC;QACd,CAAC;;;OAAA;IAED;;OAEG;IACH,8DAA8D;IAC9C,+DAAsB,GAAtC;;;;;4BACwB,qBAAM,IAAI,CAAC,gBAAgB,CAAC,YAAY,CAAC,IAAI,CAAC,iBAAiB,CAAC;;wBAA9E,WAAW,GAAG,SAAgE;wBACpF,IAAI,CAAC,WAAW,EAAE;4BACd,sBAAO,IAAI,OAAO,CAAC,iBAAO,IAAM,CAAC,CAAC,EAAC;yBACtC;wBACD,sBAAO,WAAW,EAAC;;;;KACtB;IAED,iCAAiC;IACvB,gEAAuB,GAAjC,UAAkC,QAA0B;QAA5D,iBAeC;QAdG,IAAM,QAAQ,GAAG,IAAI,CAAC,SAAS,CAAC,aAAa,CAAC,MAAM,CAAC,aAAG;YACpD,YAAI,CAAC,SAAS,CAAC,KAAK,CAAC,QAAQ,EAAE,GAAG,CAAC;QAAnC,CAAmC,CACtC,CAAC,CAAC,CAAC,CAAC;QACL,IAAI,QAAQ,KAAK,SAAS,EAAE;YACxB,OAAO,OAAO,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAC;SACpC;QACD,OAAO,IAAI,OAAO,CAAe,iBAAO;YACpC,IAAM,UAAU,GAAG,KAAI,CAAC,SAAS,CAAC,qBAAqB,CAAC,aAAG;gBACvD,IAAI,KAAI,CAAC,SAAS,CAAC,KAAK,CAAC,QAAQ,EAAE,GAAG,CAAC,EAAE;oBACrC,UAAU,CAAC,OAAO,EAAE,CAAC;oBACrB,OAAO,CAAC,GAAG,CAAC,CAAC;iBAChB;YACL,CAAC,CAAC,CAAC;QACP,CAAC,CAAC,CAAC;IACP,CAAC;IAvPuB;QAAvB,kBAAM,CAAC,qBAAc,CAAC;kCAAoC,qBAAc;0EAAC;IACjD;QAAxB,kBAAM,CAAC,sBAAe,CAAC;kCAA8B,sBAAe;oEAAC;IAC5C;QAAzB,kBAAM,CAAC,0BAAgB,CAAC;kCAAsC,0BAAgB;4EAAC;IAC1C;QAArC,kBAAM,CAAC,+CAAoB,CAAC,OAAO,CAAC;;uFAA8E;IAC9E;QAApC,kBAAM,CAAC,qCAA2B,CAAC;kCAAwC,qCAA2B;8EAAC;IAdtF,8BAA8B;QADnD,sBAAU,EAAE;QAkBJ,6BAAM,CAAC,oCAAS,CAAC;QACjB,6BAAM,CAAC,oCAAS,CAAC;QACjB,6BAAM,CAAC,+CAAqB,CAAC;yDAA2C,+CAAqB;OAnBhF,8BAA8B,CAmQnD;IAAD,qCAAC;CAAA;AAnQqB,wEAA8B;;;;;;;;;;;;;;AC5CpD;;;;;;;;;;;;;;kFAckF;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAElF,qGAA+C;AAE/C,oHAAmF;AACnF,qIAAwF;AACxF,mKAIoC;AACpC,sLAA6E;AAG7E;IAII,+BAC0C,SAAoB,EACpB,SAAoB,EACvB,MAAc;QAFX,cAAS,GAAT,SAAS,CAAW;QACpB,cAAS,GAAT,SAAS,CAAW;QACvB,WAAM,GAAN,MAAM,CAAQ;QAEjD,mCAAQ,CAAC,OAAO,CAAC;YACb,SAAS;YACT,SAAS;YACT,MAAM;YACN,QAAQ,EAAE;gBACN,eAAe,EAAE,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,IAAI,CAAC;aACnD;SACJ,CAAC,CAAC;IACP,CAAC;IAED,8DAA8D;IACpD,+CAAe,GAAzB,UAA0B,EAAU,EAAE,QAAiC,EAAE,OAAa;QAClF,IAAM,OAAO,GAAG,QAAQ,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;QACvC,OAAO,IAAI,CAAC,QAAQ,CAAC,eAAe,CAAC,EAAE,EAAE,MAAE,EAAE,EAAE,OAAO,WAAE,CAAC,CAAC;IAC9D,CAAC;IAED,mCAAG,GAAH,UAAI,YAAkC,EAAE,aAAoC,EACxE,kBAA+E;QADnF,iBA2BC;QAzBG,IAAI,aAAa,CAAC,qBAAqB,KAAK,SAAS,EAAE;YACnD,aAAa,CAAC,qBAAqB,GAAG,6CAAqB,CAAC,KAAK,CAAC;SACrE;QACD,IAAI,CAAC,aAAa,CAAC,YAAY,EAAE;YAC7B,aAAa,CAAC,YAAY,GAAG;gBACzB,2BAA2B;gBAC3B,KAAK,EAAE,cAAM,0CAAW,CAAC,QAAQ,EAApB,CAAoB;gBACjC,MAAM,EAAE,cAAM,0CAAW,CAAC,YAAY,EAAxB,CAAwB;aACzC,CAAC;SACL;QACD,IAAM,2BAA2B,GAAG,aAAa,CAAC,2BAA2B,CAAC;QAC9E,aAAa,CAAC,2BAA2B,GAAG,WAAC,IAAI,QAAC,CAAC,2BAA2B,IAAI,2BAA2B,CAAC,CAAC,CAAC,EAA/D,CAA+D,CAAC;QACjH,IAAM,MAAM,GAAG,IAAI,+CAAoB,CAAC;YACpC,EAAE,EAAE,YAAY,CAAC,EAAE;YACnB,IAAI,EAAE,YAAY,CAAC,IAAI;YACvB,aAAa;YACb,kBAAkB,EAAE;gBAChB,GAAG,EAAE,UAAO,YAAY,EAAE,YAAY;;;;;qCACf,QAAO,kBAAkB,KAAK,UAAU,GAAxC,wBAAwC;gCAAG,qBAAM,kBAAkB,EAAE;;gCAA1B,cAA0B;;;gCAAG,uBAAkB;;;gCAAvG,UAAU,KAA6F;gCAC7G,sBAAO,2CAAgB,CAAC,UAAU,EAAE,YAAY,EAAE,YAAY,CAAC,EAAC;;;qBACnE;aACJ;SACJ,CAAC,CAAC;QACH,MAAM,CAAC,eAAe,CAAC,IAAI,4CAAoB,CAAC,MAAM,CAAC,CAAC,CAAC;QACzD,OAAO,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,CAAC;IAClC,CAAC;IAED;;;OAGG;IACO,yCAAS,GAAnB,UAAoB,MAA4B;;QAC5C,IAAM,QAAQ,GAAG,MAAM,CAAC,kBAAkB,CAGxC,CAAC;gCACQ,OAAO;YACd,IAAI,OAAO,CAAC,OAAO,EAAE;gBACjB,IAAM,SAAO,GAAG,OAAO,CAAC,OAAO,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;gBAC9C,OAAO,CAAC,OAAO,GAAG;oBACd,SAAO,EAAE,CAAC;oBACV,IAAI,OAAO,CAAC,SAAS,EAAE;wBACnB,OAAO,CAAC,SAAS,GAAG,SAAS,CAAC;qBACjC;gBACL,CAAC,CAAC;aACL;;;YATL,KAAsB,0BAAQ,CAAC,MAAM,EAAE;gBAAlC,IAAM,OAAO;wBAAP,OAAO;aAUjB;;;;;;;;;QACD,OAAO,MAAM,CAAC;IAClB,CAAC;IAzEwB;QAAxB,kBAAM,CAAC,wBAAe,CAAC;kCAA8B,wBAAe;2DAAC;IAF7D,qBAAqB;QADjC,sBAAU,EAAE;QAMJ,6BAAM,CAAC,oCAAS,CAAC;QACjB,6BAAM,CAAC,oCAAS,CAAC;QACjB,6BAAM,CAAC,iCAAM,CAAC;;OAPV,qBAAqB,CA6EjC;IAAD,4BAAC;CAAA;AA7EY,sDAAqB;;;;;;;;;;;;;;AC5BlC;;;;;;;;;;;;;;kFAckF;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAElF,qGAAsD;AACtD,oHAA8D;AAC9D,+KAA4E;AAK5E;IAAA;IAuBA,CAAC;IAlBS,sDAAiB,GAAvB,UAAwB,UAAkB;;;;gBAChC,YAAY,GAAG,IAAI,CAAC,uBAAuB,CAAC,UAAU,CAAC,CAAC;gBAC9D,IAAI,YAAY,EAAE;oBACd,sBAAO,YAAY,CAAC,cAAc,EAAC;iBACtC;;;;KACJ;IAES,4DAAuB,GAAjC,UAAkC,UAAkB;;QAChD,IAAM,aAAa,GAAG,IAAI,CAAC,aAAa,CAAC,gBAAgB,EAAE,CAAC;QAC5D,IAAI,aAAa,EAAE;;gBACf,KAA2B,4CAAa,oHAAE;oBAArC,IAAM,YAAY;oBACnB,IAAI,YAAY,CAAC,EAAE,KAAK,UAAU,EAAE;wBAChC,OAAO,YAAY,CAAC;qBACvB;iBACJ;;;;;;;;;SACJ;QACD,OAAO,SAAS,CAAC;IACrB,CAAC;IAnBD;QADC,kBAAM,CAAC,6BAAoB,CAAC,EAAE,iBAAK,CAAC,yDAA0B,CAAC;;qEACiB;IAHxE,0BAA0B;QADtC,sBAAU,EAAE;OACA,0BAA0B,CAuBtC;IAAD,iCAAC;CAAA;AAvBY,gEAA0B;;;;;;;;;;;;;;ACvBvC;;;;;;;;;;;;;;kFAckF;;AAIrE,8BAAsB,GAAG,MAAM,CAAC,wBAAwB,CAAC,CAAC;;;;;;;;;;;;;;AClBvE;;;;;;;;;;;;;;kFAckF;;;;;AAKlF,iHAAsC;AACtC,uGAA0B;AAab,iBAAS,GAAG,MAAM,CAAC,WAAW,CAAC,CAAC;AAOhC,iBAAS,GAAG,MAAM,CAAC,WAAW,CAAC,CAAC;AAKhC,gBAAQ,GAAG,MAAM,CAAC,UAAU,CAAC,CAAC;AAG9B,cAAM,GAAG,MAAM,CAAC,QAAQ,CAAC,CAAC;AAG1B,2BAAmB,GAAG,MAAM,CAAC,qBAAqB,CAAC,CAAC;AAGpD,uBAAe,GAAG,MAAM,CAAC,iBAAiB,CAAC,CAAC;;;;;;;;;;;;;;ACtDzD;;;;;;;;;;;;;;kFAckF;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAElF,qGAA+C;AAE/C,wKAAkF;AAClF,mKAAuD;AAGvD;IAAgD,8CAAkB;IAAlE;;IAiBA,CAAC;IAZa,kDAAa,GAAvB,UAAwB,GAAoB;;QAChC,wCAAS,CAAoB;QACrC,IAAI,GAAG,IAAI,SAAS,EAAE;;gBAClB,KAAuB,oCAAS,gGAAE;oBAA7B,IAAM,QAAQ;oBACf,IAAI,QAAQ,CAAC,UAAU,CAAC,GAAG,CAAC,GAAG,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE;wBACvC,OAAO,QAAQ,CAAC,EAAE,CAAC;qBACtB;iBACJ;;;;;;;;;SACJ;QACD,OAAO,SAAS,CAAC;IACrB,CAAC;IAZD;QADC,kBAAM,CAAC,oCAAS,CAAC;;iEACsB;IAH/B,0BAA0B;QADtC,sBAAU,EAAE;OACA,0BAA0B,CAiBtC;IAAD,iCAAC;CAAA,CAjB+C,yCAAkB,GAiBjE;AAjBY,gEAA0B;;;;;;;;;;;;;;ACtBvC;;;;;;;;;;;;;;kFAckF;;;;;;;;;;;;;;;;;;;;;AAElF,qGAAsD;AACtD,oHAAoG;AACpG,uHAA2I;AAC3I,+KAA4E;AAG5E;IAAA;IA+DA,CAAC;IApDG,+CAAO,GAAP,UAAQ,GAAwB;;QAC5B,IAAM,MAAM,GAAqB;YAC7B,IAAI,EAAE,QAAQ;YACd,UAAU,EAAE,EAAE;SACjB,CAAC;gCACS,YAAY;YACnB,YAAY,CAAC,iBAAiB,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC;gBACrC,mBAAY,CAAC,QAAQ,CAAC,GAAG,CAAC;YAA1B,CAA0B,CAC7B,CAAC;YACF,MAAM,CAAC,UAAU,CAAI,YAAY,CAAC,EAAE,kBAAe,CAAC,GAAG;gBACnD,IAAI,EAAE,QAAQ;gBACd,IAAI,EAAE;oBACF,KAAK;oBACL,UAAU;oBACV,SAAS;iBACZ;gBACD,OAAO,EAAE,KAAK;gBACd,WAAW,EAAE,oDAAkD,YAAY,CAAC,IAAI,qBAAkB;aACrG,CAAC;;;YAbN,KAA2B,sBAAI,CAAC,aAAa,CAAC,gBAAgB,EAAE;gBAA3D,IAAM,YAAY;wBAAZ,YAAY;aActB;;;;;;;;;QACD,IAAI,CAAC,gBAAgB,CAAC,SAAS,CAAC,MAAM,CAAC,CAAC;IAC5C,CAAC;IAED,wDAAgB,GAAhB,UAAiB,QAAyB;;QAA1C,iBA2BC;gCA1Bc,YAAY;YACnB,QAAQ,CAAC,eAAe,CAAC;gBACrB,EAAE,EAAK,YAAY,CAAC,EAAE,kBAAe;gBACrC,KAAK,EAAK,YAAY,CAAC,IAAI,4BAAyB;aACvD,EAAE;gBACC,OAAO,EAAE,cAAM,mBAAY,CAAC,QAAQ,CAAC,KAAI,CAAC,GAAG,CAAC,EAA/B,CAA+B;gBAC9C,SAAS,EAAE,cAAM,QAAC,YAAY,CAAC,OAAO,EAArB,CAAqB;gBACtC,SAAS,EAAE,cAAM,QAAC,YAAY,CAAC,OAAO,EAArB,CAAqB;aACzC,CAAC,CAAC;YACH,QAAQ,CAAC,eAAe,CAAC;gBACrB,EAAE,EAAK,YAAY,CAAC,EAAE,iBAAc;gBACpC,KAAK,EAAK,YAAY,CAAC,IAAI,2BAAwB;aACtD,EAAE;gBACC,OAAO,EAAE,cAAM,mBAAY,CAAC,UAAU,EAAE,EAAzB,CAAyB;gBACxC,SAAS,EAAE,cAAM,mBAAY,CAAC,OAAO,EAApB,CAAoB;gBACrC,SAAS,EAAE,cAAM,mBAAY,CAAC,OAAO,EAApB,CAAoB;aACxC,CAAC,CAAC;YACH,QAAQ,CAAC,eAAe,CAAC;gBACrB,EAAE,EAAK,YAAY,CAAC,EAAE,oBAAiB;gBACvC,KAAK,EAAK,YAAY,CAAC,IAAI,8BAA2B;aACzD,EAAE;gBACC,OAAO,EAAE,cAAM,mBAAY,CAAC,OAAO,EAAE,EAAtB,CAAsB;gBACrC,SAAS,EAAE,cAAM,mBAAY,CAAC,OAAO,EAApB,CAAoB;gBACrC,SAAS,EAAE,cAAM,mBAAY,CAAC,OAAO,EAApB,CAAoB;aACxC,CAAC,CAAC;;;YAxBP,KAA2B,sBAAI,CAAC,aAAa,CAAC,gBAAgB,EAAE;gBAA3D,IAAM,YAAY;wBAAZ,YAAY;aAyBtB;;;;;;;;;IACL,CAAC;IA1DD;QADC,kBAAM,CAAC,6BAAmB,CAAC;kCACJ,6BAAmB;8DAAC;IAG5C;QADC,kBAAM,CAAC,kCAAwB,CAAC;kCACL,kCAAwB;2EAAC;IAGrD;QADC,kBAAM,CAAC,6BAAoB,CAAC,EAAE,iBAAK,CAAC,yDAA0B,CAAC;;wEACmB;IAT1E,6BAA6B;QADzC,sBAAU,EAAE;OACA,6BAA6B,CA+DzC;IAAD,oCAAC;CAAA;AA/DY,sEAA6B;;;;;;;;;;;;;;ACtB1C;;;;;;;;;;;;;;kFAckF;;;;;;;;;;;;AAElF,qGAA4C;AAC5C,oHAAuF;AACvF,wKAAkF;AAClF,uHAAsJ;AACtJ,mKAAoD;AACpD,4HAA2C;AAC3C,gKAAkE;AAClE,wLAAkF;AAClF,+KAA4E;AAC5E,8IAA6D;AAC7D,mKAAoE;AACpE,kLAA6E;AAC7E,4GAAiD;AACjD,kLAA6E;AAE7E,kBAAe,IAAI,2BAAe,CAAC,UAAC,IAAI,EAAE,MAAM,EAAE,OAAO,EAAE,MAAM;;IAC7D,IAAI,CAAC,iCAAM,CAAC,CAAC,EAAE,CAAC,wBAAU,CAAC,CAAC,gBAAgB,EAAE,CAAC;IAE/C,IAAI,CAAC,+CAAqB,CAAC,CAAC,MAAM,EAAE,CAAC,gBAAgB,EAAE,CAAC;IACxD,IAAI,CAAC,6BAAoB,CAAC,OAAO,CAAC,CAAC,cAAc,CAAC,UAAC,EAAa;YAAX,wBAAS;QAC1D,4CAA2B,CAAC,WAAW,CAAC,SAAS,EAAE,6BAAoB,CAAC,WAAW,CAAC;IAApF,CAAoF,CACvF,CAAC,gBAAgB,EAAE,CAAC;IAErB,iCAAwB,CAAC,IAAI,EAAE,yDAA0B,CAAC,CAAC;IAC3D,IAAI,CAAC,+DAA6B,CAAC,CAAC,MAAM,EAAE,CAAC,gBAAgB,EAAE,CAAC;IAChE,IAAI,CAAC,yCAA+B,CAAC,CAAC,SAAS,CAAC,+DAA6B,CAAC,CAAC;IAC/E,IAAI,CAAC,4BAAmB,CAAC,CAAC,SAAS,CAAC,+DAA6B,CAAC,CAAC;IAEnE,IAAI,CAAC,0CAAsB,CAAC,CAAC,MAAM,EAAE,CAAC,gBAAgB,EAAE,CAAC;;QACzD,KAAyB,mBAAC,4BAAmB,EAAE,gCAAsB,EAAE,+BAAqB,CAAC,6CAAE;YAA1F,IAAM,UAAU;YACjB,IAAI,CAAC,UAAU,CAAC,CAAC,SAAS,CAAC,0CAAsB,CAAC,CAAC;SACtD;;;;;;;;;IAED,IAAI,CAAC,0DAA0B,CAAC,CAAC,MAAM,EAAE,CAAC,gBAAgB,EAAE,CAAC;IAC7D,IAAI,CAAC,iDAAsB,CAAC,CAAC,SAAS,CAAC,0DAA0B,CAAC,CAAC;IAEnE,IAAI,CAAC,0DAA0B,CAAC,CAAC,MAAM,EAAE,CAAC,gBAAgB,EAAE,CAAC;IAC7D,MAAM,CAAC,yCAAkB,CAAC,CAAC,EAAE,CAAC,0DAA0B,CAAC,CAAC,gBAAgB,EAAE,CAAC;AACjF,CAAC,CAAC,CAAC;;;;;;;;;;;;;;ACtDH;;;;;;;;;;;;;;kFAckF;;;;;;;;;;;;;;;AAElF,8EAA0B;AAC1B,oKAQqC;AACrC,2KAAgE;AAEhE,2HAA2H;AAC3H,mEAAmE;AACnE,yFAAyF;AAEzF;;GAEG;AACH;IAA0C,wCAAwD;IAE9F,8BAAqB,MAAuB;QAA5C,YACI,kBAAM,MAAM,EAAE,6CAAoB,CAAC,IAAI,CAAC,SAC3C;QAFoB,YAAM,GAAN,MAAM,CAAiB;;IAE5C,CAAC;IAED,qDAAsB,GAAtB,UAAuB,YAAgC;QACnD,IAAI,CAAC,YAAY,CAAC,YAAY,EAAE;YAC5B,YAAY,CAAC,YAAY,GAAG,EAAE,CAAC;SAClC;QACD,8DAA8D;QAC7D,YAAY,CAAC,YAAoB,CAAC,aAAa,GAAG;YAC/C,mBAAmB,EAAE,IAAI;SAC5B,CAAC;IACN,CAAC;IAED,yCAAU,GAAV,UAAW,YAAgC,EAAE,gBAAkC;QAC3E,IAAI,CAAC,gBAAgB,EAAE;YACnB,OAAO;SACV;QACD,IAAM,eAAe,GAA6D,YAAY,CAAC;QAC/F,IAAI,eAAe,CAAC,qBAAqB,EAAE;YACvC,IAAM,EAAE,GAAG,SAAE,EAAE,CAAC;YAChB,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,QAAQ,EAAE;gBACzB,EAAE;gBACF,eAAe,EAAE,MAAM,CAAC,MAAM,CAAC,EAAE,EAAE,EAAE,gBAAgB,EAAE,gBAAgB,EAAE,EAAE,eAAe,CAAC,qBAAqB,CAAC;aACpH,CAAC,CAAC;SACN;IACL,CAAC;IAES,uDAAwB,GAAlC;QACI,OAAO,qCAAU,CAAC,MAAM,CAAC,cAAmB,CAAC,CAAC,CAAC;IACnD,CAAC;IAEL,2BAAC;AAAD,CAAC,CAlCyC,8CAAmB,GAkC5D;AAlCY,oDAAoB;;;;;;;;;;;;;;ACnCjC;;;;;;;;;;;;;;kFAckF;;AAElF,oKAA0D;AAkE1D,IAAiB,sBAAsB,CAiBtC;AAjBD,WAAiB,sBAAsB;IAEnC;;OAEG;IACU,+BAAQ,GAAG,CAAC,CAAC;IAE1B;;OAEG;IACU,8BAAO,GAAG,CAAC,CAAC;IAEzB;;OAEG;IACU,2BAAI,GAAG,CAAC,CAAC;AAE1B,CAAC,EAjBgB,sBAAsB,GAAtB,8BAAsB,KAAtB,8BAAsB,QAiBtC;AAGD;;;;GAIG;AACH,IAAiB,oBAAoB,CAEpC;AAFD,WAAiB,oBAAoB;IACpB,yBAAI,GAAG,IAAI,sCAAW,CAA4D,4BAA4B,CAAC,CAAC;AACjI,CAAC,EAFgB,oBAAoB,GAApB,4BAAoB,KAApB,4BAAoB,QAEpC;AAuBD;;;GAGG;AACH,IAAiB,2BAA2B,CAE3C;AAFD,WAAiB,2BAA2B;IAC3B,gCAAI,GAAG,IAAI,sCAAW,CAAuE,uBAAuB,CAAC,CAAC;AACvI,CAAC,EAFgB,2BAA2B,GAA3B,mCAA2B,KAA3B,mCAA2B,QAE3C;;;;;;;;;;;;;;AC1ID;;;;;;;;;;;;;;kFAckF;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAElF,qGAA+C;AAC/C,oHAAwD;AACxD,wIAA2G;AAC3G,wJAA+E;AAC/E,yKAAmF;AAGnF;IAAA;IAiDA,CAAC;IA3CG,gCAAW,GAAX,UAAyC,IAAiB,EAAE,OAAe;;QAAE,iBAAe;aAAf,UAAe,EAAf,qBAAe,EAAf,IAAe;YAAf,gCAAe;;QACxF,IAAM,eAAe,GAAG,IAAI,GAAG,CAAC,CAAC,OAAO,IAAI,EAAE,CAAC,CAAC,GAAG,CAAC,gBAAM,IAAI,QAAC,MAAM,CAAC,KAAK,EAAE,MAAM,CAAgB,EAArC,CAAqC,CAAC,CAAC,CAAC;QACtG,IAAM,YAAY,GAAG,CAAC,OAAO,IAAI,EAAE,CAAC,CAAC,GAAG,CAAC,gBAAM,IAAI,aAAM,CAAC,KAAK,EAAZ,CAAY,CAAC,CAAC;QACjE,IAAM,aAAa,GAAoD,gBAAM;YACzE,IAAI,CAAC,CAAC,MAAM,EAAE;gBACV,OAAO,eAAe,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC;aACtC;YACD,OAAO,SAAS,CAAC;QACrB,CAAC,CAAC;QACF,IAAI,IAAI,KAAK,sBAAW,CAAC,KAAK,EAAE;YAC5B,OAAO,UAAI,CAAC,cAAc,EAAC,KAAK,qBAAC,OAAO,GAAK,YAAY,GAAE,IAAI,CAAC,aAAa,CAAC,CAAC;SAClF;QACD,IAAI,IAAI,KAAK,sBAAW,CAAC,OAAO,EAAE;YAC9B,OAAO,UAAI,CAAC,cAAc,EAAC,IAAI,qBAAC,OAAO,GAAK,YAAY,GAAE,IAAI,CAAC,aAAa,CAAC,CAAC;SACjF;QACD,IAAI,IAAI,KAAK,sBAAW,CAAC,IAAI,EAAE;YAC3B,OAAO,UAAI,CAAC,cAAc,EAAC,IAAI,qBAAC,OAAO,GAAK,YAAY,GAAE,IAAI,CAAC,aAAa,CAAC,CAAC;SACjF;QACD,IAAI,IAAI,KAAK,sBAAW,CAAC,GAAG,EAAE;YAC1B,OAAO,UAAI,CAAC,cAAc,EAAC,GAAG,qBAAC,OAAO,GAAK,YAAY,GAAE,IAAI,CAAC,aAAa,CAAC,CAAC;SAChF;QACD,OAAO,OAAO,CAAC,OAAO,CAAC,SAAS,CAAC,CAAC;IACtC,CAAC;IAED,wCAAmB,GAAnB,UAAoB,IAAY;QAAhC,iBAkBC;QAjBG,IAAM,aAAa,GAAG,IAAI,CAAC,oBAAoB,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC;QACjE,OAAO;YACH,MAAM,EAAE,aAAa,CAAC,MAAM,CAAC,IAAI,CAAC,aAAa,CAAC;YAChD,UAAU,EAAE,aAAa,CAAC,UAAU,CAAC,IAAI,CAAC,aAAa,CAAC;YACxD,IAAI,EAAE,UAAO,aAAuB;;;;;4BAC1B,OAAO,GAAG,MAAM,CAAC,MAAM,CAAC;gCAC1B,aAAa,EAAE,KAAK;6BACvB,EAAE,EAAE,aAAa,iBAAE,CAAC,CAAC;4BAChB,QAAQ,GAAG,CAAC,OAAO,CAAC,aAAa,CAAC;4BAClC,MAAM,GAAG,OAAO,CAAC,aAAa,CAAC;4BACrC,qBAAM,IAAI,CAAC,kBAAkB,CAAC,QAAQ,CAAC,EAAE,QAAQ,YAAE,MAAM,UAAE,CAAC;;4BAA5D,SAA4D,CAAC;4BAC7D,aAAa,CAAC,aAAa,CAAC,IAAI,CAAC,CAAC;;;;iBACrC;YACD,OAAO,EAAE;gBACL,KAAI,CAAC,oBAAoB,CAAC,aAAa,CAAC,aAAa,CAAC,IAAI,CAAC,CAAC;YAChE,CAAC;SACJ,CAAC;IACN,CAAC;IA9CuB;QAAvB,kBAAM,CAAC,uBAAc,CAAC;kCAAoC,uBAAc;sDAAC;IAC5C;QAA7B,kBAAM,CAAC,qCAAoB,CAAC;kCAA0C,qCAAoB;4DAAC;IAChE;QAA3B,kBAAM,CAAC,wCAAkB,CAAC;kCAAwC,wCAAkB;0DAAC;IAJ7E,UAAU;QADtB,sBAAU,EAAE;OACA,UAAU,CAiDtB;IAAD,iBAAC;CAAA;AAjDY,gCAAU;;;;;;;;;;;;;;ACvBvB;;;;;;;;;;;;;;kFAckF;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAElF,qGAA+C;AAC/C,2JAAyE;AACzE,uHAGiC;AACjC,mKAA6I;AAC7I,uGAAkH;AAClH,mHAA6C;AAE7C,0JAA8D;AAG9D;IAUI,gCAAyC,SAAoB,EACf,aAA4B,EAC5B,gBAAwC,EAC9C,gBAAkC;QAHjC,cAAS,GAAT,SAAS,CAAW;QACf,kBAAa,GAAb,aAAa,CAAe;QAC5B,qBAAgB,GAAhB,gBAAgB,CAAwB;QAC9C,qBAAgB,GAAhB,gBAAgB,CAAkB;QAXjE,WAAM,GAAG,GAAG,CAAC;QACb,gBAAW,GAAG,2BAA2B,CAAC;QAE3C,YAAO,GAAY;YACvB,EAAE,EAAE,4BAA4B;YAChC,KAAK,EAAE,0BAA0B;SACpC,CAAC;QAgDM,uBAAkB,GAAG,IAAI,8BAAuB,EAAE,CAAC;IA3CmB,CAAC;IAE/E,0CAAS,GAAT;QACI,OAAO,IAAI,CAAC,SAAS,CAAC,wBAAwB,KAAK,SAAS,CAAC;IACjE,CAAC;IAED,wCAAO,GAAP;QACI,IAAI,CAAC,gBAAgB,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;IAC5C,CAAC;IAED,yCAAQ,GAAR;QACI,OAAO,IAAI,CAAC;IAChB,CAAC;IAED,2CAAU,GAAV;QAAA,iBAQC;QAPG,OAAO;YACH,eAAe,EAAE,IAAI;YACrB,yBAAyB,EAAE,IAAI;YAC/B,OAAO,EAAE;gBACL,KAAI,CAAC,kBAAkB,CAAC,MAAM,EAAE,CAAC;YACrC,CAAC;SACJ,CAAC;IACN,CAAC;IAED,iDAAgB,GAAhB,UAAiB,QAAyB;QACtC,QAAQ,CAAC,eAAe,CAAC,IAAI,CAAC,OAAO,EAAE,IAAI,CAAC,CAAC;IACjD,CAAC;IAEO,2CAAU,GAAlB;QACI,OAAO,yBAAW,CAAC,QAAQ,CAAC,EAAE,EAAE,CAAC;IACrC,CAAC;IAED,oDAAmB,GAAnB,UAAoB,WAA+B;QAC/C,WAAW,CAAC,kBAAkB,CAAC;YAC3B,OAAO,EAAE,IAAI,CAAC,OAAO,CAAC,EAAE;YACxB,UAAU,EAAE,IAAI,CAAC,UAAU,EAAE,CAAC,CAAC,CAAC,WAAW,CAAC,CAAC,CAAC,WAAW;SAC5D,CAAC,CAAC;IACP,CAAC;IAED,0DAAyB,GAAzB,UAA0B,QAAkC;QACxD,QAAQ,CAAC,eAAe,CAAC,IAAI,CAAC,CAAC;IACnC,CAAC;IAIK,uCAAM,GAAZ,UAAa,OAAe,EAAE,QAA0C;;;;;;gBACpE,IAAI,IAAI,CAAC,SAAS,CAAC,wBAAwB,EAAE;oBACzC,IAAI,CAAC,kBAAkB,CAAC,MAAM,EAAE,CAAC;oBAC3B,0BAAwB,IAAI,8BAAuB,EAAE,CAAC;oBAC5D,IAAI,CAAC,kBAAkB,GAAG,uBAAqB,CAAC;oBAE1C,UAA+B;wBACjC,KAAK,EAAE,OAAO;qBACjB,CAAC;oBAEI,UAAyB,EAAE,CAAC;oBAE5B,yBAAyB,GAAG,EAAE,CAAC;wCAC1B,QAAQ;wBACf,yBAAyB,CAAC,IAAI,CAAC,CAAC;;;;;4CACZ,qBAAM,QAAQ,CAAC,uBAAuB,CAAC,OAAK,EAAE,uBAAqB,CAAC,KAAK,CAAC;;wCAApF,OAAO,GAAG,SAA0E;wCAC1F,IAAI,OAAO,IAAI,CAAC,uBAAqB,CAAC,KAAK,CAAC,uBAAuB,EAAE;;gDACjE,KAAqB,4BAAO,sFAAE;oDAAnB,MAAM;oDACb,OAAK,CAAC,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC,MAAM,EAAE,QAAQ,EAAE,uBAAqB,CAAC,KAAK,CAAC,CAAC,CAAC;iDAC9E;;;;;;;;;4CACD,QAAQ,CAAC,OAAK,CAAC,CAAC;yCACnB;wCACD,sBAAO,OAAO,EAAC;;;6BAClB,CAAC,EAAE,CAAC,CAAC;;;wBAVV,KAAuB,kBAAI,CAAC,SAAS,CAAC,wBAAwB;4BAAnD,QAAQ;oCAAR,QAAQ;yBAWlB;;;;;;;;;oBACD,OAAO,CAAC,GAAG,CAAC,yBAAyB,CAAC,GAAG,CAAC,WAAC,IAAI,QAAC,CAAC,IAAI,CAAC,aAAG,IAAI,UAAG,EAAH,CAAG,EAAE,WAAC,IAAI,gBAAS,EAAT,CAAS,CAAC,EAAlC,CAAkC,CAAC,CAAC,CAAC,IAAI,CAAC,iBAAO;wBAC5F,IAAM,eAAe,GAAG,OAAO,CAAC,MAAM,CAAC,YAAE,IAAI,SAAE,IAAI,EAAE,CAAC,MAAM,KAAK,CAAC,EAArB,CAAqB,CAAC,CAAC;wBACpE,IAAI,eAAe,CAAC,MAAM,KAAK,CAAC,EAAE;4BAC9B,OAAK,CAAC,IAAI,CAAC,IAAI,uBAAa,CAAC;gCACzB,KAAK,EAAE,OAAO,CAAC,MAAM,KAAK,CAAC,CAAC,CAAC,CAAC,4BAA4B,CAAC,CAAC,CAAC,qBAAqB;gCAClF,GAAG,EAAE,cAAM,YAAK,EAAL,CAAK;6BACnB,CAAC,CAAC,CAAC;4BACJ,QAAQ,CAAC,OAAK,CAAC,CAAC;yBACnB;oBACL,CAAC,CAAC,CAAC,KAAK,EAAE,CAAC;iBACd;;;;KACJ;IAES,2CAAU,GAApB,UAAqB,GAAsB,EAAE,QAAiC,EAAE,KAAwB;QAAxG,iBAyBC;QAxBG,IAAM,GAAG,GAAG,IAAI,aAAG,CAAC,GAAG,CAAC,QAAQ,CAAC,GAAG,CAAC,CAAC;QACtC,IAAM,IAAI,GAAG,UAAU,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC;QAClC,IAAM,IAAI,GAAG,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,UAAU,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC,WAAW,EAAE,CAAC,CAAC,CAAC,SAAS,CAAC;QACrE,IAAI,MAAM,GAAG,GAAG,CAAC,aAAa,CAAC;QAC/B,IAAI,MAAM,EAAE;YACR,MAAM,IAAI,KAAK,CAAC;SACnB;QACD,MAAM,GAAG,CAAC,MAAM,IAAI,EAAE,CAAC,GAAG,GAAG,CAAC,WAAW,CAAC;QAC1C,OAAO,IAAI,cAAc,CAAC,GAAG,CAAC,IAAI,EAAE,IAAI,EAAE,MAAM,EAAE,GAAG,CAAC,QAAQ,EAAE,EAAE;YAE9D,IAAI,QAAQ,CAAC,sBAAsB,EAAE;gBACjC,QAAQ,CAAC,sBAAsB,CAAC,GAAG,EAAE,KAAK,CAAC,CAAC,IAAI,CAAC,wBAAc;oBAC3D,IAAI,cAAc,EAAE;wBAChB,KAAI,CAAC,OAAO,CAAC,GAAG,EAAE,cAAc,CAAC,QAAQ,CAAC,KAAK,CAAC,KAAK,EAAE,cAAc,CAAC,QAAQ,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;qBAC7F;yBAAM;wBACH,gDAAgD;wBAChD,KAAI,CAAC,OAAO,CAAC,GAAG,EAAE,GAAG,CAAC,QAAQ,CAAC,KAAK,CAAC,KAAK,EAAE,GAAG,CAAC,QAAQ,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;qBACvE;gBACL,CAAC,CAAC,CAAC;aACN;iBAAM;gBACH,0CAA0C;gBAC1C,KAAI,CAAC,OAAO,CAAC,GAAG,EAAE,GAAG,CAAC,QAAQ,CAAC,KAAK,CAAC,KAAK,EAAE,GAAG,CAAC,QAAQ,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;aACvE;QACL,CAAC,CAAC,CAAC;IACP,CAAC;IAEO,wCAAO,GAAf,UAAgB,GAAQ,EAAE,KAAe,EAAE,GAAa;QACpD,IAAI,CAAC,aAAa,CAAC,SAAS,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,gBAAM,IAAI,aAAM,CAAC,IAAI,CAAC,GAAG,EAAE;YAC9D,SAAS,EAAE,mCAAK,CAAC,MAAM,CAAC,KAAK,EAAE,GAAG,CAAC;SACtC,CAAC,EAF+C,CAE/C,CAAC,CAAC;IACR,CAAC;IA/HQ,sBAAsB;QADlC,sBAAU,EAAE;QAWI,6BAAM,CAAC,oCAAS,CAAC;QACzB,6BAAM,CAAC,uBAAa,CAAC;QACrB,6BAAM,CAAC,gCAAsB,CAAC;QAC9B,6BAAM,CAAC,uBAAgB,CAAC;yDADmC,gCAAsB;YAC5B,uBAAgB;OAbjE,sBAAsB,CAgIlC;IAAD,6BAAC;CAAA;AAhIY,wDAAsB;AAkInC;IAA6B,kCAAa;IAEtC,wBACuB,KAAa,EACb,IAAY,EACZ,MAAc,EACd,OAAe,EACf,MAAkB,EAClB,QAAqB;QAN5C,YAQI,iBAAO,SACV;QARsB,WAAK,GAAL,KAAK,CAAQ;QACb,UAAI,GAAJ,IAAI,CAAQ;QACZ,YAAM,GAAN,MAAM,CAAQ;QACd,aAAO,GAAP,OAAO,CAAQ;QACf,YAAM,GAAN,MAAM,CAAY;QAClB,cAAQ,GAAR,QAAQ,CAAa;;IAG5C,CAAC;IAED,iCAAQ,GAAR;QACI,OAAO,IAAI,CAAC,KAAK,CAAC;IACtB,CAAC;IAED,iCAAQ,GAAR;QACI,OAAO,KAAK,CAAC;IACjB,CAAC;IAED,mCAAU,GAAV;QACI,OAAO,IAAI,CAAC,OAAO,CAAC;IACxB,CAAC;IAED,uCAAc,GAAd;QACI,OAAO,IAAI,CAAC,MAAM,CAAC;IACvB,CAAC;IAED,qCAAY,GAAZ;QACI,OAAO,IAAI,CAAC,IAAI,CAAC;IACrB,CAAC;IAED,4BAAG,GAAH,UAAI,IAAmB;QACnB,IAAI,IAAI,KAAK,uBAAa,CAAC,IAAI,EAAE;YAC7B,IAAI,CAAC,IAAI,CAAC,QAAQ,EAAE;gBAChB,OAAO,KAAK,CAAC;aAChB;YACD,IAAI,CAAC,QAAQ,EAAE,CAAC;YAChB,OAAO,IAAI,CAAC;SACf;QACD,IAAI,CAAC,MAAM,EAAE,CAAC;QACd,OAAO,IAAI,CAAC;IAChB,CAAC;IACL,qBAAC;AAAD,CAAC,CA5C4B,uBAAa,GA4CzC;AAED,IAAK,UA2BJ;AA3BD,WAAK,UAAU;IACX,2CAAQ;IACR,+CAAU;IACV,qDAAa;IACb,iDAAW;IACX,6CAAS;IACT,+CAAU;IACV,mDAAY;IACZ,6CAAS;IACT,yDAAe;IACf,4CAAS;IACT,sDAAc;IACd,oDAAa;IACb,oDAAa;IACb,oDAAa;IACb,gDAAW;IACX,gDAAW;IACX,kDAAY;IACZ,8CAAU;IACV,gDAAW;IACX,0CAAQ;IACR,4CAAS;IACT,wDAAe;IACf,gDAAW;IACX,8CAAU;IACV,oDAAa;IACb,8DAAkB;AACtB,CAAC,EA3BI,UAAU,KAAV,UAAU,QA2Bd;;;;;;;;;;;;;;ACxOD;;;;;;;;;;;;;;kFAckF;;;;;AAElF,qIAAwC;;;;;;;;;;;;;;AChBxC;;;;;;;;;;;;;;kFAckF;;AAOlF,IAAiB,oBAAoB,CAWpC;AAXD,WAAiB,oBAAoB;IACpB,gCAAW,GAAG,qBAAqB,CAAC;IACjD,SAAgB,OAAO,CAAC,YAAkC,EAAE,SAAyB;QAAzB,6CAAyB;QACjF,OAAO,gCAAW,GAAG,GAAG,GAAG,YAAY,CAAC,EAAE,GAAG,GAAG,GAAG,SAAS,CAAC;IACjE,CAAC;IAFe,4BAAO,UAEtB;IACY,4BAAO,GAAG,MAAM,CAAC,6BAA6B,CAAC,CAAC;AAMjE,CAAC,EAXgB,oBAAoB,GAApB,4BAAoB,KAApB,4BAAoB,QAWpC;;;;;;;;;;;;;;AChCD;;;;;;;;;;;;;;kFAckF;;;;;AAElF,gIAAqC;AACrC,8HAAoC;AACpC,0JAAkD;AAClD,8IAA4C;AAC5C,sIAAwC;;;;;;;;;;;;ACpBxC;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,kBAAkB,YAAY;AAC9B;;AAEA;AACA;;AAEA;AACA,mCAAmC,SAAS;AAC5C;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA,WAAW;AACX;AACA;AACA;AACA;AACA;;AAEA,WAAW;AACX;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,cAAc;AACd,SAAS;AACT;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;;;;;;;;;;;;AClIA;;;;AAIa;;;;;;AAUb;;AAeA;;AA6DA,SAAgB,gBAAhB,CAAiC,UAAjC,EAAgE,YAAhE,EAAsG,YAAtG,EAA0I;AACtI,YAAU,CAAC,OAAX,CAAmB,UAAC,IAAD,EAAS;AAAG,gBAAY,CAAC,IAAI,CAAC,CAAD,CAAL,EAAU,IAAI,CAAC,CAAD,CAAd,EAAmB,IAAI,CAAC,CAAD,CAAvB,CAAZ;AAAyC,GAAxE;AACA,YAAU,CAAC,OAAX,CAAmB,YAAnB;AACA,SAAO;AAEH,UAAM,EAAE;AAAA,aAAY,UAAU,CAAC,MAAX,EAAZ;AAAA,KAFL;AAIH,eAAW,EAAE,qBAAI,IAAJ;AAAA,wCAAsC,MAAtC;AAAsC,cAAtC;AAAA;;AAAA,aAAqE,UAAU,CAAC,WAAX,iBAAU,GAAa,EAAE,CAAC,MAAH,CAAU,IAAV,IAAkB,IAAlB,GAAyB,IAAI,CAAC,MAA3C,SAAsD,MAAtD,EAA/E;AAAA,KAJV;AAKH,aAAS,EAAE,mBAAO,IAAP,EAAsC,OAAtC;AAAA,aAAqF,UAAU,CAAC,SAAX,CAAqB,EAAE,CAAC,MAAH,CAAU,IAAV,IAAkB,IAAlB,GAAyB,IAAI,CAAC,MAAnD,EAA2D,OAA3D,CAArF;AAAA,KALR;AAOH,oBAAgB,EAAE,0BAAC,IAAD,EAAgC,MAAhC;AAAA,aAAuD,UAAU,CAAC,gBAAX,CAA4B,EAAE,CAAC,MAAH,CAAU,IAAV,IAAkB,IAAlB,GAAyB,IAAI,CAAC,MAA1D,EAAkE,MAAlE,CAAvD;AAAA,KAPf;AAQH,kBAAc,EAAE,wBAAC,IAAD,EAAgC,OAAhC;AAAA,aAA8E,UAAU,CAAC,cAAX,CAA0B,EAAE,CAAC,MAAH,CAAU,IAAV,IAAkB,IAAlB,GAAyB,IAAI,CAAC,MAAxD,EAAgE,OAAhE,CAA9E;AAAA,KARb;AAUH,SAAK,EAAE,eAAC,KAAD,EAAe,MAAf;AAAA,UAA+B,gBAA/B,uEAA2D,KAA3D;AAAA,aAA2E,UAAU,CAAC,KAAX,CAAiB,KAAjB,EAAwB,MAAxB,EAAgC,gBAAhC,CAA3E;AAAA,KAVJ;AAYH,cAAU,EAAE,oBAAC,MAAD;AAAA,aAA8B,UAAU,CAAC,WAAX,CAAuB,yBAAkB,IAAzC,EAA+C,MAA/C,CAA9B;AAAA,KAZT;AAaH,YAAQ,EAAE;AAAA,aAAM,UAAU,CAAC,WAAX,CAAuB,uBAAgB,IAAvC,EAA6C,SAA7C,CAAN;AAAA,KAbP;AAcH,QAAI,EAAE;AAAA,aAAM,UAAU,CAAC,gBAAX,CAA4B,wBAAiB,IAA7C,CAAN;AAAA,KAdH;AAgBH,gBAAY,EAAE,sBAAC,OAAD;AAAA,aAAoD,UAAU,CAAC,cAAX,CAA0B,8BAAuB,IAAjD,EAAuD,OAAvD,CAApD;AAAA,KAhBX;AAiBH,iBAAa,EAAE,uBAAC,OAAD;AAAA,aAAqD,UAAU,CAAC,cAAX,CAA0B,+BAAwB,IAAlD,EAAwD,OAAxD,CAArD;AAAA,KAjBZ;AAkBH,eAAW,EAAE,qBAAC,OAAD;AAAA,aAAuC,UAAU,CAAC,cAAX,CAA0B,kCAA2B,IAArD,EAA2D,OAA3D,CAAvC;AAAA,KAlBV;AAoBH,0BAAsB,EAAE,gCAAC,MAAD;AAAA,aAA0C,UAAU,CAAC,gBAAX,CAA4B,0CAAmC,IAA/D,EAAqE,MAArE,CAA1C;AAAA,KApBrB;AAqBH,yBAAqB,EAAE,+BAAC,MAAD;AAAA,aAAyC,UAAU,CAAC,gBAAX,CAA4B,yCAAkC,IAA9D,EAAoE,MAApE,CAAzC;AAAA,KArBpB;AAuBH,uBAAmB,EAAE,6BAAC,MAAD;AAAA,aAAuC,UAAU,CAAC,gBAAX,CAA4B,uCAAgC,IAA5D,EAAkE,MAAlE,CAAvC;AAAA,KAvBlB;AAwBH,yBAAqB,EAAE,+BAAC,MAAD;AAAA,aAAyC,UAAU,CAAC,gBAAX,CAA4B,yCAAkC,IAA9D,EAAoE,MAApE,CAAzC;AAAA,KAxBpB;AAyBH,wBAAoB,EAAE,8BAAC,MAAD;AAAA,aAAwC,UAAU,CAAC,gBAAX,CAA4B,wCAAiC,IAA7D,EAAmE,MAAnE,CAAxC;AAAA,KAzBnB;AA0BH,uBAAmB,EAAE,6BAAC,MAAD;AAAA,aAAuC,UAAU,CAAC,gBAAX,CAA4B,uCAAgC,IAA5D,EAAkE,MAAlE,CAAvC;AAAA,KA1BlB;AA4BH,iBAAa,EAAE,uBAAC,OAAD;AAAA,aAA4D,UAAU,CAAC,cAAX,CAA0B,sCAA+B,IAAzD,EAA+D,OAA/D,CAA5D;AAAA,KA5BZ;AA8BH,WAAO,EAAE;AAAA,aAAM,UAAU,CAAC,OAAX,EAAN;AAAA;AA9BN,GAAP;AAgCH;;AAnCD,4C;;;;;;;;;;;;;;;;;;;;;AC1FA;;;;;AAIA;;IAEa,a;AAAb;AAAA;;AACuB,oBAAW,IAAI,GAAJ,EAAX;AAsCtB;;;;gCArC4C,I,EAAmB,O,EAAgC;AACxF,UAAI,IAAI,KAAK,uBAAY,KAAzB,EAAgC;AAC5B,eAAO,CAAC,KAAR,CAAc,OAAd;AACH;;AACD,UAAI,IAAI,KAAK,uBAAY,OAAzB,EAAkC;AAC9B,eAAO,CAAC,IAAR,CAAa,OAAb;AACH;;AACD,UAAI,IAAI,KAAK,uBAAY,IAAzB,EAA+B;AAC3B,eAAO,CAAC,IAAR,CAAa,OAAb;AACH;;AACD,UAAI,IAAI,KAAK,uBAAY,GAAzB,EAA8B;AAC1B,eAAO,CAAC,GAAR,CAAY,OAAZ;AACH;;AACD,aAAO,OAAO,CAAC,OAAR,CAAgB,SAAhB,CAAP;AACH;;;wCACmB,I,EAAY;AAC5B,UAAM,QAAQ,GAAG,KAAK,QAAL,CAAc,GAAd,CAAkB,IAAlB,CAAjB;;AACA,UAAI,QAAJ,EAAc;AACV,eAAO,QAAP;AACH;;AACD,UAAM,OAAO,GAAkB;AAC3B,cAD2B,kBACpB,KADoB,EACP;AAChB,iBAAO,CAAC,GAAR,CAAY,IAAI,GAAG,IAAP,GAAc,KAA1B;AACH,SAH0B;AAI3B,kBAJ2B,sBAIhB,IAJgB,EAIJ;AACnB,iBAAO,CAAC,GAAR,CAAY,IAAI,GAAG,IAAP,GAAc,IAA1B;AACH,SAN0B;AAO3B,YAP2B,kBAOvB,CACA;AACH,SAT0B;AAU3B,eAV2B,qBAUpB,CACH;AACH;AAZ0B,OAA/B;AAcA,WAAK,QAAL,CAAc,GAAd,CAAkB,IAAlB,EAAwB,OAAxB;AACA,aAAO,OAAP;AACH;;;;;;AAtCL,sC;;;;;;;;;;;;;;;;;;;;;ACNA;;;;;AAIA;;AAGI,qBAHK,qBAGL;;IAGS,oB;AAAb;AAAA;;AACuB,uBAA4B,EAA5B;AAqBtB;;;;8BAnBU;AACH,aAAO,KAAK,WAAL,CAAiB,MAAjB,KAA4B,CAAnC,EAAsC;AAClC,aAAK,WAAL,CAAiB,GAAjB,GAAwB,OAAxB;AACH;AACJ;;;yBAEI,U,EAAsB;AACvB,UAAM,WAAW,GAAG,KAAK,WAAzB;AACA,iBAAW,CAAC,IAAZ,CAAiB,UAAjB;AACA,aAAO;AACH,eADG,qBACI;AACH,cAAM,KAAK,GAAG,WAAW,CAAC,OAAZ,CAAoB,UAApB,CAAd;;AACA,cAAI,KAAK,KAAK,CAAC,CAAf,EAAkB;AACd,uBAAW,CAAC,MAAZ,CAAmB,KAAnB,EAA0B,CAA1B;AACH;AACJ;AANE,OAAP;AAQH;;;;;;AApBL,oD;;;;;;;;;;;;;;;;;;;;;;;ACVA;;;;;AAIA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA,yH;;;;;;;;;;;;;;;;;;;;;;ICPa,c;AAET,0BAAsC,MAAtC,EAAiF;AAAA;;AAA3C;AAAgD;;;;oCAE/D,O,EAAiB,Q,EAAmC,O,EAAa;AACpF,aAAO,KAAK,MAAL,CAAY,eAAZ,CAA4B,UAA5B,CAAuC;AAC1C,UAAE,EAAE,OADsC;AAE1C,eAAO,EAAE,iBAAC,SAAD;AAAA,4CAAoB,IAApB;AAAoB,gBAApB;AAAA;;AAAA,iBAAoC,QAAQ,MAAR,SAAY,IAAZ,CAApC;AAAA;AAFiC,OAAvC,CAAP;AAIH;;;;;;AATL,wC;;;;;;;;;;;;;;;;;;;;;;;;;ACNA;;;;;AAIA;;AACA;;AACA;;AAwBA,IAAiB,oBAAjB;;AAAA,WAAiB,oBAAjB,EAAqC;AACjC,WAAgB,EAAhB,CAAmB,IAAnB,EAA4B;AACxB,WAAO,CAAC,CAAC,IAAF,IAAU,UAAU,IAA3B;AACH;;AAFe,4BAAE,EAAF;AAGnB,CAJD,EAAiB,oBAAoB,GAApB,gEAAoB,EAApB,CAAjB;;AASA,IAAiB,gBAAjB;;AAAA,WAAiB,gBAAjB,EAAiC;AAC7B,WAAgB,EAAhB,CAAmB,IAAnB,EAA4B;AACxB,WAAO,CAAC,CAAC,IAAF,IAAU,UAAU,IAA3B;AACH;;AAFe,wBAAE,EAAF;AAGnB,CAJD,EAAiB,gBAAgB,GAAhB,wDAAgB,EAAhB,CAAjB;;AAaA,IAAiB,sBAAjB;;AAAA,WAAiB,sBAAjB,EAAuC;AACnC,WAAgB,EAAhB,CAAmB,IAAnB,EAA4B;AACxB,WAAO,CAAC,CAAC,IAAF,IAAU,UAAU,IAA3B;AACH;;AAFe,8BAAE,EAAF;AAGnB,CAJD,EAAiB,sBAAsB,GAAtB,oEAAsB,EAAtB,CAAjB;;IAMa,yB;;;;;;;+BAME,U,EAAuC,M,EAAiC;AAC/E,UAAM,IAAI,GAAG,UAAU,KAAK,SAAf,IAA4B,UAAU,KAAK,IAA3C,GAAkD,SAAlD,GAA8D,UAAU,GAAG,CAAxF;AACA,UAAM,SAAS,GAAG,MAAM,KAAK,SAAX,IAAwB,MAAM,KAAK,IAAnC,GAA0C,SAA1C,GAAsD,MAAM,GAAG,CAAjF;AACA,aAAO;AACH,YAAI,EAAJ,IADG;AACG,iBAAS,EAAT;AADH,OAAP;AAGH;;;4BAUO,K,EAAgD;AACpD,UAAI,KAAK,KAAK,SAAd,EAAyB;AACrB,eAAO,SAAP;AACH;;AACD,UAAI,KAAK,KAAK,IAAd,EAAoB;AAChB,eAAO,IAAP;AACH;;AACD,UAAM,KAAK,GAAG,KAAK,UAAL,CAAgB,KAAK,CAAC,eAAtB,EAAuC,KAAK,CAAC,WAA7C,CAAd;AACA,UAAM,GAAG,GAAG,KAAK,UAAL,CAAgB,KAAK,CAAC,aAAtB,EAAqC,KAAK,CAAC,SAA3C,CAAZ;AACA,aAAO;AACH,aAAK,EAAL,KADG;AACI,WAAG,EAAH;AADJ,OAAP;AAGH;;;6CAEwB,K,EAAqB;AAC1C,aAAO;AACH,WAAG,EAAE,KAAK,CAAC,GAAN,CAAU,QAAV;AADF,OAAP;AAGH;;;iDAE4B,K,EAAuB,Q,EAAyB;AACzE,aAAO;AACH,oBAAY,EAAE,KAAK,wBAAL,CAA8B,KAA9B,CADX;AAEH,gBAAQ,EAAE,KAAK,UAAL,CAAgB,QAAQ,CAAC,UAAzB,EAAqC,QAAQ,CAAC,MAA9C;AAFP,OAAP;AAIH;;;uCAEkB,K,EAAuB,Q,EAA2B,O,EAA2C;AAC5G,aAAO,MAAM,CAAC,MAAP,CAAc,KAAK,4BAAL,CAAkC,KAAlC,EAAyC,QAAzC,CAAd,EAAkE;AACrE,eAAO,EAAE,KAAK,mBAAL,CAAyB,OAAzB;AAD4D,OAAlE,CAAP;AAGH;;;wCAEmB,O,EAA2C;AAC3D,aAAO;AACH,mBAAW,EAAE,KAAK,aAAL,CAAmB,OAAO,CAAC,WAA3B,CADV;AAEH,wBAAgB,EAAE,OAAO,CAAC;AAFvB,OAAP;AAIH;;;kCAEa,W,EAAmD;AAC7D,cAAQ,WAAR;AACI,aAAK,MAAM,CAAC,SAAP,CAAiB,qBAAjB,CAAuC,gBAA5C;AACI,iBAAO,iCAAsB,gBAA7B;;AACJ,aAAK,MAAM,CAAC,SAAP,CAAiB,qBAAjB,CAAuC,+BAA5C;AACI,iBAAO,iCAAsB,+BAA7B;;AACJ;AACI,iBAAO,iCAAsB,OAA7B;AANR;AAQH;;;qCAEgB,I,EAAqC;AAClD,UAAM,MAAM,GAAmB;AAAE,aAAK,EAAE,IAAI,CAAC;AAAd,OAA/B;AACA,UAAM,YAAY,GAAG,sBAAsB,CAAC,EAAvB,CAA0B,IAA1B,IAAkC,IAAlC,GAAyC,SAA9D;;AACA,UAAI,IAAI,CAAC,MAAT,EAAiB;AAAE,cAAM,CAAC,MAAP,GAAgB,IAAI,CAAC,MAArB;AAA8B,OAHC,CAIlD;AACA;;;AACA,UAAI,IAAI,CAAC,aAAT,EAAwB;AACpB,YAAI,CAAC,YAAD,IAAiB,CAAC,YAAY,CAAC,mBAAnC,EAAwD;AACpD,gBAAM,CAAC,aAAP,GAAuB,IAAI,CAAC,aAA5B;AACH,SAFD,MAEO;AACH,gBAAM,CAAC,aAAP,GAAuB,KAAK,eAAL,CAAqB,YAAY,CAAC,mBAAlC,EAAuD,IAAI,CAAC,aAA5D,CAAvB;AACH;AACJ;;AACD,UAAI,IAAI,CAAC,UAAT,EAAqB;AAAE,cAAM,CAAC,UAAP,GAAoB,IAAI,CAAC,UAAzB;AAAsC;;AAC7D,WAAK,qBAAL,CAA2B,MAA3B,EAAmC,IAAnC;;AACA,UAAI,EAAE,CAAC,MAAH,CAAU,IAAI,CAAC,IAAf,CAAJ,EAA0B;AACtB,cAAM,CAAC,IAAP,GAAc,KAAK,oBAAL,CAA0B,IAAI,CAAC,IAA/B,EAAqC,YAAY,IAAI,YAAY,CAAC,gBAAlE,CAAd;AACH;;AACD,UAAI,IAAI,CAAC,QAAT,EAAmB;AAAE,cAAM,CAAC,QAAP,GAAkB,IAAI,CAAC,QAAvB;AAAkC;;AACvD,UAAI,IAAI,CAAC,mBAAT,EAA8B;AAAE,cAAM,CAAC,mBAAP,GAA6B,KAAK,WAAL,CAAiB,IAAI,CAAC,mBAAtB,CAA7B;AAA0E;;AAC1G,UAAI,IAAI,CAAC,OAAT,EAAkB;AAAE,cAAM,CAAC,OAAP,GAAiB,KAAK,SAAL,CAAe,IAAI,CAAC,OAApB,CAAjB;AAAgD;;AACpE,UAAI,IAAI,CAAC,gBAAT,EAA2B;AAAE,cAAM,CAAC,gBAAP,GAA0B,IAAI,CAAC,gBAAL,CAAsB,KAAtB,EAA1B;AAA0D;;AACvF,UAAI,IAAI,CAAC,OAAT,EAAkB;AAAE,cAAM,CAAC,OAAP,GAAiB,KAAK,SAAL,CAAe,IAAI,CAAC,OAApB,CAAjB;AAAgD,OAtBlB,CAuBlD;;;AACA,UAAI,YAAJ,EAAkB;AACd,YAAI,YAAY,CAAC,IAAb,KAAsB,SAA1B,EAAqC;AACjC,gBAAM,CAAC,IAAP,GAAc,YAAY,CAAC,IAA3B;AACH;;AACD,YAAI,YAAY,CAAC,UAAb,KAA4B,IAA5B,IAAoC,YAAY,CAAC,UAAb,KAA4B,KAApE,EAA2E;AACvE,gBAAM,CAAC,UAAP,GAAoB,YAAY,CAAC,UAAjC;AACH;AACJ;;AACD,aAAO,MAAP;AACH;;;yCAE8B,K,EAA4C,Q,EAAwC;AAC/G,UAAI,QAAQ,KAAK,SAAjB,EAA4B;AACxB,eAAO,QAAP;AACH;;AACD,cAAQ,KAAR;AACI,aAAK,MAAM,CAAC,SAAP,CAAiB,kBAAjB,CAAoC,MAAzC;AAAiD,iBAAO,8BAAmB,MAA1B;;AACjD,aAAK,MAAM,CAAC,SAAP,CAAiB,kBAAjB,CAAoC,QAAzC;AAAmD,iBAAO,8BAAmB,QAA1B;;AACnD,aAAK,MAAM,CAAC,SAAP,CAAiB,kBAAjB,CAAoC,WAAzC;AAAsD,iBAAO,8BAAmB,WAA1B;;AACtD,aAAK,MAAM,CAAC,SAAP,CAAiB,kBAAjB,CAAoC,KAAzC;AAAgD,iBAAO,8BAAmB,KAA1B;;AAChD,aAAK,MAAM,CAAC,SAAP,CAAiB,kBAAjB,CAAoC,QAAzC;AAAmD,iBAAO,8BAAmB,QAA1B;;AACnD,aAAK,MAAM,CAAC,SAAP,CAAiB,kBAAjB,CAAoC,KAAzC;AAAgD,iBAAO,8BAAmB,KAA1B;;AAChD,aAAK,MAAM,CAAC,SAAP,CAAiB,kBAAjB,CAAoC,MAAzC;AAAiD,iBAAO,8BAAmB,MAA1B;;AACjD,aAAK,MAAM,CAAC,SAAP,CAAiB,kBAAjB,CAAoC,SAAzC;AAAoD,iBAAO,8BAAmB,SAA1B;;AACpD,aAAK,MAAM,CAAC,SAAP,CAAiB,kBAAjB,CAAoC,MAAzC;AAAiD,iBAAO,8BAAmB,MAA1B;;AACjD,aAAK,MAAM,CAAC,SAAP,CAAiB,kBAAjB,CAAoC,QAAzC;AAAmD,iBAAO,8BAAmB,QAA1B;;AACnD,aAAK,MAAM,CAAC,SAAP,CAAiB,kBAAjB,CAAoC,KAAzC;AAAgD,iBAAO,8BAAmB,KAA1B;;AAChD,aAAK,MAAM,CAAC,SAAP,CAAiB,kBAAjB,CAAoC,QAAzC;AAAmD,iBAAO,8BAAmB,QAA1B;;AACnD,aAAK,MAAM,CAAC,SAAP,CAAiB,kBAAjB,CAAoC,IAAzC;AAA+C,iBAAO,8BAAmB,IAA1B;;AAC/C,aAAK,MAAM,CAAC,SAAP,CAAiB,kBAAjB,CAAoC,KAAzC;AAAgD,iBAAO,8BAAmB,KAA1B;;AAChD,aAAK,MAAM,CAAC,SAAP,CAAiB,kBAAjB,CAAoC,QAAzC;AAAmD,iBAAO,8BAAmB,QAA1B;;AACnD,aAAK,MAAM,CAAC,SAAP,CAAiB,kBAAjB,CAAoC,IAAzC;AAA+C,iBAAO,8BAAmB,IAA1B;;AAC/C,aAAK,MAAM,CAAC,SAAP,CAAiB,kBAAjB,CAAoC,UAAzC;AAAqD,iBAAO,8BAAmB,UAA1B;;AACrD,aAAK,MAAM,CAAC,SAAP,CAAiB,kBAAjB,CAAoC,OAAzC;AAAkD,iBAAO,8BAAmB,OAA1B;;AAClD,aAAK,MAAM,CAAC,SAAP,CAAiB,kBAAjB,CAAoC,IAAzC;AAA+C,iBAAO,8BAAmB,IAA1B;;AAC/C,aAAK,MAAM,CAAC,SAAP,CAAiB,kBAAjB,CAAoC,KAAzC;AAAgD,iBAAO,8BAAmB,KAA1B;;AAChD,aAAK,MAAM,CAAC,SAAP,CAAiB,kBAAjB,CAAoC,IAAzC;AAA+C,iBAAO,8BAAmB,IAA1B;;AAC/C,aAAK,MAAM,CAAC,SAAP,CAAiB,kBAAjB,CAAoC,SAAzC;AAAoD,iBAAO,8BAAmB,SAA1B;;AACpD,aAAK,MAAM,CAAC,SAAP,CAAiB,kBAAjB,CAAoC,WAAzC;AAAsD,iBAAO,8BAAmB,KAA1B;;AACtD,aAAK,MAAM,CAAC,SAAP,CAAiB,kBAAjB,CAAoC,MAAzC;AAAiD,iBAAO,8BAAmB,MAA1B;;AACjD,aAAK,MAAM,CAAC,SAAP,CAAiB,kBAAjB,CAAoC,aAAzC;AAAwD,iBAAO,8BAAmB,aAA1B;;AACxD,aAAK,MAAM,CAAC,SAAP,CAAiB,kBAAjB,CAAoC,OAAzC;AAAkD,iBAAO,8BAAmB,OAA1B;;AAClD;AAAS,iBAAO,KAAK,GAAG,CAAf;AA3Bb;AA6BH;;;oCAEyB,M,EAAgB,a,EAA8C;AACpF,cAAQ,MAAR;AACI,aAAK,sBAAW,SAAhB;AACI,iBAAO;AAAE,gBAAI,EAAE,MAAR;AAAgB,iBAAK,EAAE;AAAvB,WAAP;;AACJ,aAAK,sBAAW,QAAhB;AACI,iBAAO;AAAE,gBAAI,EAAE,MAAR;AAAgB,iBAAK,EAAG,aAAwC,CAAC;AAAjE,WAAP;;AACJ;AACI,yEAAwD,MAAxD;AANR;AAQH;;;0CAE+B,M,EAAwB,M,EAA8B;AAClF,UAAI,MAAM,GAAqB,4BAAiB,SAAhD;AACA,UAAI,IAAJ;AACA,UAAI,KAAJ;;AACA,UAAI,MAAM,CAAC,eAAP,KAA2B,SAA3B,IAAwC,CAAC,MAAM,CAAC,eAAP,GAAyB,MAAM,CAAC,SAAP,CAAiB,4BAAjB,CAA8C,eAAxE,MAA6F,CAAzI,EAA4I;AACxI,cAAM,GAAG,4BAAiB,OAA1B;AACA,YAAI,GAAG,MAAM,CAAC,UAAd;AACH;;AACD,YAAM,CAAC,gBAAP,GAA0B,MAA1B;AAEA,UAAI,GAAG,MAAM,CAAC,UAAd;;AACA,UAAI,MAAM,CAAC,KAAX,EAAkB;AACd,aAAK,GAAG,KAAK,OAAL,CAAa,MAAM,CAAC,KAApB,CAAR;AACH;;AAED,YAAM,CAAC,gBAAP,GAA0B,MAA1B;;AACA,UAAI,MAAM,CAAC,QAAP,IAAmB,IAAnB,IAA2B,KAA/B,EAAsC;AAClC,cAAM,CAAC,QAAP,GAAkB;AAAE,iBAAO,EAAE,IAAX;AAAiB,eAAK,EAAE;AAAxB,SAAlB;AACH,OAFD,MAEO;AACH,cAAM,CAAC,UAAP,GAAoB,IAApB;AACH;AACJ;;;+BAEU,I,EAAwC;AAC/C,UAAM,KAAK,GAAG,KAAK,OAAL,CAAa,IAAI,CAAC,KAAlB,CAAd;AACA,aAAO;AACH,aAAK,EAAL,KADG;AAEH,eAAO,EAAE,IAAI,CAAC,IAAL,IAAa;AAFnB,OAAP;AAIH;;;gCAKW,K,EAA8D;AAAA;;AACtE,UAAI,CAAC,KAAL,EAAY;AACR,eAAO,SAAP;AACH;;AACD,aAAO,KAAK,CAAC,GAAN,CAAU,cAAI;AAAA,eAAI,KAAI,CAAC,UAAL,CAAgB,IAAhB,CAAJ;AAAA,OAAd,CAAP;AACH;;;sCAEiB,K,EAAuB,Q,EAA2B,O,EAAyC;AACzG,aAAO;AACH,oBAAY,EAAE,KAAK,wBAAL,CAA8B,KAA9B,CADX;AAEH,gBAAQ,EAAE,KAAK,UAAL,CAAgB,QAAQ,CAAC,UAAzB,EAAqC,QAAQ,CAAC,MAA9C,CAFP;AAGH,eAAO,EAAE;AAAE,4BAAkB,EAAE,OAAO,CAAC;AAA9B;AAHN,OAAP;AAKH;;;2CAEsB,K,EAAqB;AACxC,aAAO;AACH,oBAAY,EAAE,KAAK,wBAAL,CAA8B,KAA9B;AADX,OAAP;AAGH;;;qCAEgB,K,EAAqB;AAClC,aAAO;AACH,oBAAY,EAAE,KAAK,wBAAL,CAA8B,KAA9B;AADX,OAAP;AAGH;;;yCAEoB,K,EAA4B;AAC7C,cAAQ,KAAR;AACI,aAAK,MAAM,CAAC,cAAP,CAAsB,KAA3B;AACI,iBAAO,8BAAmB,KAA1B;;AACJ,aAAK,MAAM,CAAC,cAAP,CAAsB,OAA3B;AACI,iBAAO,8BAAmB,OAA1B;;AACJ,aAAK,MAAM,CAAC,cAAP,CAAsB,IAA3B;AACI,iBAAO,8BAAmB,WAA1B;;AACJ,aAAK,MAAM,CAAC,cAAP,CAAsB,IAA3B;AACI,iBAAO,8BAAmB,IAA1B;AARR;;AAUA,aAAO,SAAP;AACH;;;iCAEY,M,EAAiC;AAC1C,UAAM,KAAK,GAAG,KAAK,OAAL,CAAa,IAAI,MAAM,CAAC,KAAX,CAAiB,MAAM,CAAC,eAAxB,EAAyC,MAAM,CAAC,WAAhD,EAA6D,MAAM,CAAC,aAApE,EAAmF,MAAM,CAAC,SAA1F,CAAb,CAAd;AACA,UAAM,QAAQ,GAAG,KAAK,oBAAL,CAA0B,MAAM,CAAC,QAAjC,CAAjB;AACA,aAAO,sBAAW,MAAX,CAAkB,KAAlB,EAAyB,MAAM,CAAC,OAAhC,EAAyC,QAAzC,EAAmD,MAAM,CAAC,IAA1D,EAAgE,MAAM,CAAC,MAAvE,CAAP;AACH;;;kCAEa,O,EAAoC;AAAA;;AAC9C,UAAI,OAAO,KAAK,KAAK,CAAjB,IAAsB,OAAO,KAAK,IAAtC,EAA4C;AACxC,eAAO,OAAP;AACH;;AACD,aAAO,OAAO,CAAC,GAAR,CAAY,gBAAM;AAAA,eAAI,MAAI,CAAC,YAAL,CAAkB,MAAlB,CAAJ;AAAA,OAAlB,CAAP;AACH;;;wCAEmB,O,EAA2C;AAC3D,UAAI,OAAO,KAAK,KAAK,CAAjB,IAAsB,OAAO,KAAK,IAAtC,EAA4C;AACxC,eAAO,OAAP;AACH;;AACD,UAAM,WAAW,GAAG,KAAK,aAAL,CAAmB,OAAO,CAAC,OAA3B,CAApB;AACA,aAAO,6BAAkB,MAAlB,CAAyB,WAAzB,EAAsC,EAAE,CAAC,MAAH,CAAU,OAAO,CAAC,IAAlB,IAA0B,CAAC,OAAO,CAAC,IAAT,CAA1B,GAA2C,SAAjF,CAAP;AACH;;;uCAEkB,K,EAAuB,K,EAAqB,O,EAA2C;AACtG,aAAO;AACH,oBAAY,EAAE,KAAK,wBAAL,CAA8B,KAA9B,CADX;AAEH,aAAK,EAAE,KAAK,OAAL,CAAa,KAAb,CAFJ;AAGH,eAAO,EAAE,KAAK,mBAAL,CAAyB,OAAzB;AAHN,OAAP;AAKH;;;8BAES,I,EAAiD;AACvD,UAAI,IAAJ,EAAU;AAAA;;AACN,YAAI,IAAI,GAAG,IAAI,CAAC,SAAL,IAAkB,EAA7B;AACA,eAAO,2CAAQ,MAAR,6BAAe,IAAI,CAAC,KAApB,EAA2B,IAAI,CAAC,EAAhC,4BAAuC,IAAvC,GAAP;AACH;;AACD,aAAO,SAAP;AACH;;;+BAEU,I,EAAsC;AAC7C,UAAI,MAAM,GAAG,oBAAS,MAAT,CAAgB,KAAK,OAAL,CAAa,IAAI,CAAC,KAAlB,CAAhB,CAAb;;AACA,UAAI,IAAI,CAAC,OAAT,EAAkB;AAAE,cAAM,CAAC,OAAP,GAAiB,KAAK,SAAL,CAAe,IAAI,CAAC,OAApB,CAAjB;AAAgD;;AACpE,UAAI,gBAAgB,CAAC,EAAjB,CAAoB,IAApB,CAAJ,EAA+B;AAC3B,YAAI,IAAI,CAAC,IAAT,EAAe;AAAE,gBAAM,CAAC,IAAP,GAAc,IAAI,CAAC,IAAnB;AAAyB;;AAAA;AAC7C;;AACD,aAAO,MAAP;AACH;;;wCAEmB,O,EAA2C;AAC3D,aAAO;AAAE,eAAO,EAAE,OAAO,CAAC,OAAnB;AAA4B,oBAAY,EAAE,OAAO,CAAC;AAAlD,OAAP;AACH;;;+CAE0B,K,EAAuB,O,EAA2C;AACzF,aAAO;AACH,oBAAY,EAAE,KAAK,wBAAL,CAA8B,KAA9B,CADX;AAEH,eAAO,EAAE,KAAK,mBAAL,CAAyB,OAAzB;AAFN,OAAP;AAIH;;;oDAE+B,K,EAAuB,K,EAAqB,O,EAA2C;AACnH,aAAO;AACH,oBAAY,EAAE,KAAK,wBAAL,CAA8B,KAA9B,CADX;AAEH,aAAK,EAAE,KAAK,OAAL,CAAa,KAAb,CAFJ;AAGH,eAAO,EAAE,KAAK,mBAAL,CAAyB,OAAzB;AAHN,OAAP;AAKH;;;qDAEgC,K,EAAuB,Q,EAA4B,E,EAAY,O,EAA2C;AACvI,aAAO;AACH,oBAAY,EAAE,KAAK,wBAAL,CAA8B,KAA9B,CADX;AAEH,gBAAQ,EAAE,KAAK,UAAL,CAAgB,QAAQ,CAAC,UAAzB,EAAqC,QAAQ,CAAC,MAA9C,CAFP;AAGH,UAAE,EAAF,EAHG;AAIH,eAAO,EAAE,KAAK,mBAAL,CAAyB,OAAzB;AAJN,OAAP;AAMH;;;mCAEc,K,EAAuB,Q,EAA4B,O,EAAe;AAC7E,aAAO;AACH,oBAAY,EAAE,KAAK,wBAAL,CAA8B,KAA9B,CADX;AAEH,gBAAQ,EAAE,KAAK,UAAL,CAAgB,QAAQ,CAAC,UAAzB,EAAqC,QAAQ,CAAC,MAA9C,CAFP;AAGH,eAAO,EAAP;AAHG,OAAP;AAKH;;;yCAEoB,K,EAAqB;AACtC,aAAO;AACH,oBAAY,EAAE,KAAK,wBAAL,CAA8B,KAA9B;AADX,OAAP;AAGH;;;mCAEc,I,EAA4B;AACvC,UAAI,MAAM,GAAG,wBAAa,MAAb,CAAoB,KAAK,OAAL,CAAa,IAAI,CAAC,KAAlB,CAApB,CAAb;;AACA,UAAI,IAAI,CAAC,GAAT,EAAc;AAAE,cAAM,CAAC,MAAP,GAAgB,OAAO,IAAI,CAAC,GAAZ,KAAoB,QAApB,GAA+B,IAAI,CAAC,GAApC,GAA0C,IAAI,CAAC,GAAL,CAAS,QAAT,EAA1D;AAAgF;;AAChG,UAAI,oBAAoB,CAAC,EAArB,CAAwB,IAAxB,KAAiC,IAAI,CAAC,IAA1C,EAAgD;AAC5C,cAAM,CAAC,IAAP,GAAc,IAAI,CAAC,IAAnB;AACH;;AACD,aAAO,MAAP;AACH;;;;;;AApUL;;IAuUa,yB;;;;;;;oCAEO,Q,EAAsB,K,EAAmB,c,EAAuB;AAC5E,aAAO;AACH,gBAAQ,EAAE,QADP;AAEH,aAAK,EAAE,KAAK,WAAL,CAAiB,KAAjB,CAFJ;AAGH,sBAAc,EAAd;AAHG,OAAP;AAKH;;;oCAKe,I,EAAsC;AAAA;;AAClD,UAAI,CAAC,IAAL,EAAW;AACP,eAAO,SAAP;AACH;;AACD,UAAM,KAAK,GAA8E,EAAzF;;AACA,UAAI,IAAI,CAAC,eAAT,EAA0B;AACtB,YAAI,CAAC,eAAL,CAAqB,OAArB,CAA6B,gBAAM,EAAG;AAClC,cAAI,EAAE,CAAC,UAAH,CAAc,EAAd,CAAiB,MAAjB,CAAJ,EAA8B;AAC1B,iBAAK,CAAC,IAAN,CAA8C;AAC1C,oBAAM,EAAE,MAAM,CAAC,GAAP,CAAW,KAAX,CAAiB,MAAM,CAAC,GAAxB,CADkC;AAE1C,qBAAO,EAAE,MAAM,CAAC;AAF0B,aAA9C;AAIH,WALD,MAKO,IAAI,EAAE,CAAC,UAAH,CAAc,EAAd,CAAiB,MAAjB,CAAJ,EAA8B;AACjC,iBAAK,CAAC,IAAN,CAA8C;AAC1C,oBAAM,EAAE,MAAM,CAAC,GAAP,CAAW,KAAX,CAAiB,MAAM,CAAC,MAAxB,CADkC;AAE1C,oBAAM,EAAE,MAAM,CAAC,GAAP,CAAW,KAAX,CAAiB,MAAM,CAAC,MAAxB,CAFkC;AAG1C,qBAAO,EAAE,MAAM,CAAC;AAH0B,aAA9C;AAKH,WANM,MAMA,IAAI,EAAE,CAAC,UAAH,CAAc,EAAd,CAAiB,MAAjB,CAAJ,EAA8B;AACjC,iBAAK,CAAC,IAAN,CAA8C;AAC1C,oBAAM,EAAE,MAAM,CAAC,GAAP,CAAW,KAAX,CAAiB,MAAM,CAAC,GAAxB,CADkC;AAE1C,qBAAO,EAAE,MAAM,CAAC;AAF0B,aAA9C;AAIH,WALM,MAKA,IAAI,EAAE,CAAC,gBAAH,CAAoB,EAApB,CAAuB,MAAvB,CAAJ,EAAoC;AACvC,gBAAM,QAAQ,GAAG,MAAM,CAAC,GAAP,CAAW,KAAX,CAAiB,MAAM,CAAC,YAAP,CAAoB,GAArC,CAAjB;AACA,gBAAM,OAAO,GAAG,OAAO,MAAM,CAAC,YAAP,CAAoB,OAA3B,KAAuC,QAAvC,GAAkD,MAAM,CAAC,YAAP,CAAoB,OAAtE,GAAgF,SAAhG;AACA,iBAAK,CAAC,IAAN,CAAW,MAAI,CAAC,eAAL,CAAqB,QAArB,EAA+B,MAAM,CAAC,KAAtC,EAA6C,OAA7C,CAAX;AACH,WAJM,MAIA;AACH,mBAAO,CAAC,KAAR,oDAA0D,IAAI,CAAC,SAAL,CAAe,MAAf,EAAuB,SAAvB,EAAkC,CAAlC,CAA1D;AACH;AACJ,SAxBD;AAyBH,OA1BD,MA0BO,IAAI,IAAI,CAAC,OAAT,EAAkB;AACrB,wCAAkB,MAAM,CAAC,IAAP,CAAY,IAAI,CAAC,OAAjB,CAAlB,kCAA6C;AAAxC,cAAM,GAAG,mBAAT;AACD,cAAM,QAAQ,GAAG,MAAM,CAAC,GAAP,CAAW,KAAX,CAAiB,GAAjB,CAAjB;AACA,eAAK,CAAC,IAAN,CAAW,KAAK,eAAL,CAAqB,QAArB,EAA+B,IAAI,CAAC,OAAL,CAAa,GAAb,CAA/B,CAAX;AACH;AACJ;;AACD,aAAO;AACH,aAAK,EAAL;AADG,OAAP;AAGH;;;+BAKU,I,EAAiC;AACxC,UAAI,CAAC,IAAL,EAAW;AACP,eAAO,SAAP;AACH;;AACD,UAAM,KAAK,GAAG,KAAK,OAAL,CAAa,IAAI,CAAC,KAAlB,CAAd;AACA,aAAO;AACH,aAAK,EAAL,KADG;AAEH,YAAI,EAAE,IAAI,CAAC;AAFR,OAAP;AAIH;;;gCAKW,K,EAAoC;AAAA;;AAC5C,UAAI,CAAC,KAAL,EAAY;AACR,eAAO,SAAP;AACH;;AACD,aAAO,KAAK,CAAC,GAAN,CAAU,cAAI;AAAA,eAAI,MAAI,CAAC,UAAL,CAAgB,IAAhB,CAAJ;AAAA,OAAd,CAAP;AACH;;;+BAKU,I,EAAiC;AACxC,UAAI,CAAC,IAAL,EAAW;AACP,eAAO,SAAP;AACH;;AACD,UAAM,KAAK,GAAG,KAAK,OAAL,CAAa,IAAI,CAAC,KAAlB,CAAd;AACA,UAAI,MAAM,GAAqB;AAAE,aAAK,EAAL;AAAF,OAA/B;;AACA,UAAI,IAAI,CAAC,OAAT,EAAkB;AAAE,cAAM,CAAC,OAAP,GAAiB,KAAK,SAAL,CAAe,IAAI,CAAC,OAApB,CAAjB;AAAgD;;AACpE,UAAI,IAAI,CAAC,IAAL,KAAc,KAAK,CAAnB,IAAwB,IAAI,CAAC,IAAL,KAAc,IAA1C,EAAgD;AAAE,cAAM,CAAC,IAAP,GAAc,IAAI,CAAC,IAAnB;AAA0B;;AAC5E,aAAO,MAAP;AACH;;;iCAKY,K,EAAoC;AAAA;;AAC7C,UAAI,CAAC,KAAL,EAAY;AACR,eAAO,SAAP;AACH;;AACD,aAAO,KAAK,CAAC,GAAN,CAAU,UAAC,QAAD;AAAA,eAAc,MAAI,CAAC,UAAL,CAAgB,QAAhB,CAAd;AAAA,OAAV,CAAP;AACH;;;kCAEa,O,EAAiC;AAAA;;AAC3C,aAAO,OAAO,CAAC,GAAR,CAAY,gBAAM;AAAA,eAAI,MAAI,CAAC,YAAL,CAAkB,MAAlB,CAAJ;AAAA,OAAlB,CAAP;AACH;;;iCAEY,I,EAA0B;AACnC,UAAI,sBAAW,EAAX,CAAc,IAAd,CAAJ,EAAyB;AACrB,eAAO;AACH,eAAK,EAAE,IAAI,CAAC,KADT;AAEH,iBAAO,EAAE,KAAK,SAAL,CAAe,IAAI,CAAC,OAApB,CAFN;AAGH,cAAI,EAAE,KAAK,eAAL,CAAqB,IAAI,CAAC,IAA1B,CAHH;AAIH,qBAAW,EAAE,KAAK,aAAL,CAAmB,IAAI,CAAC,WAAxB,CAJV;AAKH,cAAI,EAAE,IAAI,CAAC;AALR,SAAP;AAOH;;AACD,aAAO;AACH,eAAO,EAAE;AACL,YAAE,EAAE,IAAI,CAAC,OADJ;AAEL,eAAK,EAAE,IAAI,CAAC,KAFP;AAGL,mBAAS,EAAE,IAAI,CAAC;AAHX,SADN;AAMH,aAAK,EAAE,IAAI,CAAC;AANT,OAAP;AAQH;;;8BAKS,O,EAA4B;AAClC,UAAI,CAAC,OAAL,EAAc;AACV,eAAO,SAAP;AACH;;AACD,aAAO;AACH,UAAE,EAAE,OAAO,CAAC,OADT;AAEH,aAAK,EAAE,OAAO,CAAC,KAFZ;AAGH,iBAAS,EAAE,OAAO,CAAC;AAHhB,OAAP;AAKH;;;qCAEgB,K,EAAqB;AAAA;;AAClC,UAAM,QAAQ,GAAG,KAAK,CAAC,QAAN,IAAkB,KAAK,CAAC,QAAN,CAAe,GAAf,CAAmB,WAAC;AAAA,eAAI,MAAI,CAAC,gBAAL,CAAsB,CAAtB,CAAJ;AAAA,OAApB,CAAnC;AACA,aAAO;AACH,YAAI,EAAE,KAAK,CAAC,IADT;AAEH,cAAM,EAAE,KAAK,CAAC,MAAN,IAAgB,EAFrB;AAGH,YAAI,EAAE,KAAK,YAAL,CAAkB,KAAK,CAAC,IAAxB,CAHH;AAIH,aAAK,EAAE,KAAK,OAAL,CAAa,KAAK,CAAC,KAAnB,CAJJ;AAKH,sBAAc,EAAE,KAAK,OAAL,CAAa,KAAK,CAAC,cAAnB,CALb;AAMH,gBAAQ,EAAR;AANG,OAAP;AAQH;;;sCAEiB,M,EAA8C;AAAA;;AAC5D,UAAI,0BAAe,EAAf,CAAkB,MAAM,CAAC,CAAD,CAAxB,CAAJ,EAAkC;AAC9B,eAAQ,MAA2B,CAAC,GAA5B,CAAgC,WAAC;AAAA,iBAAI,MAAI,CAAC,gBAAL,CAAsB,CAAtB,CAAJ;AAAA,SAAjC,CAAR;AACH;;AACD,aAAO,KAAK,oBAAL,CAA0B,MAA1B,CAAP;AACH;;;yCAKoB,M,EAAgD,G,EAAgB;AAAA;;AACjF,UAAI,CAAC,MAAL,EAAa;AACT,eAAO,SAAP;AACH;;AACD,aAAO,MAAM,CAAC,GAAP,CAAW,qBAAW;AAAA,eAAI,MAAI,CAAC,mBAAL,CAAyB,WAAzB,EAAsC,GAAtC,CAAJ;AAAA,OAAtB,CAAP;AACH;;;wCAEmB,I,EAAyB,G,EAAgB;AACzD,UAAM,QAAQ,GAAG,KAAK,UAAL,CAAgB,GAAG,GAAE,kBAAM,IAAI,CAAC,QAAX,EAAmB;AAAE,WAAG,EAAE,GAAG,CAAC,QAAJ;AAAP,OAAnB,CAAF,GAA+C,IAAI,CAAC,QAAvE,CAAjB;AACA,aAAO;AACH,YAAI,EAAE,IAAI,CAAC,IADR;AAEH,cAAM,EAAE,EAFL;AAGH,qBAAa,EAAE,IAAI,CAAC,aAHjB;AAIH,YAAI,EAAE,KAAK,YAAL,CAAkB,IAAI,CAAC,IAAvB,CAJH;AAKH,aAAK,EAAE,QAAQ,CAAC,KALb;AAMH,sBAAc,EAAE,QAAQ,CAAC;AANtB,OAAP;AAQH;;;iCAEY,I,EAAgB;AACzB,UAAI,IAAI,IAAI,sBAAW,aAAvB,EAAsC;AAClC;AACA,eAAO,IAAI,GAAG,CAAd;AACH;;AACD,aAAO,MAAM,CAAC,SAAP,CAAiB,UAAjB,CAA4B,QAAnC;AACH;;;yCAKoB,M,EAA8C;AAAA;;AAC/D,UAAI,CAAC,MAAL,EAAa;AACT,eAAO,SAAP;AACH;;AACD,aAAO,MAAM,CAAC,GAAP,CAAW,cAAI;AAAA,eAAI,OAAI,CAAC,mBAAL,CAAyB,IAAzB,CAAJ;AAAA,OAAf,CAAP;AACH;;;wCAEmB,I,EAAuB;AACvC,UAAM,KAAK,GAAG,KAAK,OAAL,CAAa,IAAI,CAAC,KAAlB,CAAd;AACA,UAAM,IAAI,GAAG,EAAE,CAAC,MAAH,CAAU,IAAI,CAAC,IAAf,IAAuB,KAAK,uBAAL,CAA6B,IAAI,CAAC,IAAlC,CAAvB,GAAiE,SAA9E;AACA,aAAO;AAAE,aAAK,EAAL,KAAF;AAAS,YAAI,EAAJ;AAAT,OAAP;AACH;;;4CAEuB,I,EAAY;AAChC,cAAQ,IAAR;AACI,aAAK,iCAAsB,IAA3B;AACI,iBAAO,MAAM,CAAC,SAAP,CAAiB,qBAAjB,CAAuC,IAA9C;;AACJ,aAAK,iCAAsB,IAA3B;AACI,iBAAO,MAAM,CAAC,SAAP,CAAiB,qBAAjB,CAAuC,IAA9C;;AACJ,aAAK,iCAAsB,KAA3B;AACI,iBAAO,MAAM,CAAC,SAAP,CAAiB,qBAAjB,CAAuC,KAA9C;AANR;;AAQA,aAAO,MAAM,CAAC,SAAP,CAAiB,qBAAjB,CAAuC,IAA9C;AACH;;;iCAKY,M,EAAqC;AAAA;;AAC9C,UAAI,CAAC,MAAL,EAAa;AACT,eAAO,SAAP;AACH;;AACD,aAAO,MAAM,CAAC,GAAP,CAAW,kBAAQ;AAAA,eAAI,OAAI,CAAC,UAAL,CAAgB,QAAhB,CAAJ;AAAA,OAAnB,CAAP;AACH;;;uCAKkB,I,EAAmC;AAAA;;AAClD,UAAI,CAAC,IAAL,EAAW;AACP,eAAO,SAAP;AACH;;AACD,UAAI,EAAE,CAAC,KAAH,CAAS,IAAT,CAAJ,EAAoB;AAChB,eAAO,IAAI,CAAC,GAAL,CAAS,UAAC,QAAD;AAAA,iBAAc,OAAI,CAAC,UAAL,CAAgB,QAAhB,CAAd;AAAA,SAAT,CAAP;AACH,OAFD,MAEO;AACH,eAAO,KAAK,UAAL,CAAgB,IAAhB,CAAP;AACH;AACJ;;;+BAKU,I,EAAiC;AACxC,UAAI,CAAC,IAAL,EAAW;AACP,eAAO,SAAP;AACH;;AACD,UAAM,GAAG,GAAG,MAAM,CAAC,GAAP,CAAW,KAAX,CAAiB,IAAI,CAAC,GAAtB,CAAZ;AACA,UAAM,KAAK,GAAG,KAAK,OAAL,CAAa,IAAI,CAAC,KAAlB,CAAd;AACA,aAAO;AACH,WAAG,EAAH,GADG;AACE,aAAK,EAAL;AADF,OAAP;AAGH;;;oCAKe,I,EAAsC;AAClD,UAAI,CAAC,IAAL,EAAW;AACP,eAAO,SAAP;AACH;;AACD,UAAI,MAAM,GAAmC,EAA7C;;AACA,UAAI,EAAE,CAAC,MAAH,CAAU,IAAI,CAAC,eAAf,CAAJ,EAAqC;AACjC,cAAM,CAAC,eAAP,GAAyB,IAAI,CAAC,eAA9B;AACH,OAFD,MAEO;AACH;AACA,cAAM,CAAC,eAAP,GAAyB,CAAzB;AACH;;AACD,UAAI,EAAE,CAAC,MAAH,CAAU,IAAI,CAAC,eAAf,CAAJ,EAAqC;AACjC,cAAM,CAAC,eAAP,GAAyB,IAAI,CAAC,eAA9B;AACH,OAFD,MAEO;AACH;AACA,cAAM,CAAC,eAAP,GAAyB,CAAzB;AACH;;AACD,UAAI,IAAI,CAAC,UAAT,EAAqB;AACjB,cAAM,CAAC,UAAP,GAAoB,KAAK,uBAAL,CAA6B,IAAI,CAAC,UAAlC,CAApB;AACH,OAFD,MAEO;AACH,cAAM,CAAC,UAAP,GAAoB,EAApB;AACH;;AACD,aAAO,MAAP;AACH;;;4CAEuB,K,EAA6B;AAAA;;AACjD,aAAO,KAAK,CAAC,GAAN,CAAU,cAAI;AAAA,eAAI,OAAI,CAAC,sBAAL,CAA4B,IAA5B,CAAJ;AAAA,OAAd,CAAP;AACH;;;2CAEsB,I,EAA0B;AAC7C,UAAI,MAAM,GAA0C;AAAE,aAAK,EAAE,IAAI,CAAC;AAAd,OAApD;;AACA,UAAI,IAAI,CAAC,aAAT,EAAwB;AAAE,cAAM,CAAC,aAAP,GAAuB,KAAK,eAAL,CAAqB,IAAI,CAAC,aAA1B,CAAvB;AAAkE;;AAC5F,UAAI,IAAI,CAAC,UAAT,EAAqB;AACjB,cAAM,CAAC,UAAP,GAAoB,KAAK,uBAAL,CAA6B,IAAI,CAAC,UAAlC,CAApB;AACH,OAFD,MAEO;AACH,cAAM,CAAC,UAAP,GAAoB,EAApB;AACH;;AACD,aAAO,MAAP;AACH;;;4CAEuB,I,EAA4B;AAAA;;AAChD,aAAO,IAAI,CAAC,GAAL,CAAS,cAAI;AAAA,eAAI,OAAI,CAAC,sBAAL,CAA4B,IAA5B,CAAJ;AAAA,OAAb,CAAP;AACH;;;2CAEsB,I,EAA0B;AAC7C,UAAI,MAAM,GAA0C;AAAE,aAAK,EAAE,IAAI,CAAC;AAAd,OAApD;;AACA,UAAI,IAAI,CAAC,aAAT,EAAwB;AAAE,cAAM,CAAC,aAAP,GAAuB,KAAK,eAAL,CAAqB,IAAI,CAAC,aAA1B,CAAvB;AAAiE;;AAAA;AAC3F,aAAO,MAAP;AACH;;;4BAKO,K,EAA+B;AACnC,UAAI,CAAC,KAAL,EAAY;AACR,eAAO,SAAP;AACH;;AACD,aAAO;AACH,gBAAQ,EAAE,KAAK,cAAL,CAAoB,KAAK,CAAC,QAA1B,CADP;AAEH,aAAK,EAAE,KAAK,OAAL,CAAa,KAAK,CAAC,KAAnB;AAFJ,OAAP;AAIH;;;mCAEc,Q,EAAuD;AAAA;;AAClE,UAAI,KAAK,CAAC,OAAN,CAAc,QAAd,CAAJ,EAA6B;AACzB,eAAO,QAAQ,CAAC,GAAT,CAAa,iBAAO;AAAA,iBAAI,OAAI,CAAC,gBAAL,CAAsB,OAAtB,CAAJ;AAAA,SAApB,CAAP;AACH;;AACD,aAAO,CAAC,KAAK,gBAAL,CAAsB,QAAtB,CAAD,CAAP;AACH;;;oCAEe,K,EAA6B;AACzC,UAAI,EAAE,CAAC,MAAH,CAAU,KAAV,CAAJ,EAAsB;AAClB,eAAO,KAAP;AACH;;AACD,UAAI,KAAK,CAAC,IAAN,KAAe,sBAAW,SAA9B,EAAyC;AACrC,eAAO,KAAK,CAAC,KAAb;AACH;;AACD,aAAO,KAAK,gBAAL,CAAsB,KAAtB,CAAP;AACH;;;qCAEgB,O,EAAqC;AAClD,UAAI,yBAAc,EAAd,CAAiB,OAAjB,CAAJ,EAA+B;AAC3B,eAAO;AACH,eAAK,EAAE,OAAO,CAAC;AADZ,SAAP;AAGH;;AACD,UAAI,EAAE,CAAC,MAAH,CAAU,OAAV,CAAJ,EAAwB;AACpB,eAAO;AAAE,eAAK,EAAE;AAAT,SAAP;AACH;;AARiD,UAS1C,QAT0C,GAStB,OATsB,CAS1C,QAT0C;AAAA,UAShC,KATgC,GAStB,OATsB,CAShC,KATgC;AAUlD,aAAO;AACH,aAAK,EAAE,QAAQ,QAAR,GAAmB,IAAnB,GAA0B,KAA1B,GAAkC;AADtC,OAAP;AAGH;;;+BAEU,Q,EAAiB;AACxB,UAAI,QAAQ,KAAK,CAAjB,EAAoB;AAChB,eAAO,MAAM,CAAC,cAAP,CAAsB,KAA7B;AACH;;AACD,UAAI,QAAQ,KAAK,CAAjB,EAAoB;AAChB,eAAO,MAAM,CAAC,cAAP,CAAsB,OAA7B;AACH;;AACD,UAAI,QAAQ,KAAK,CAAjB,EAAoB;AAChB,eAAO,MAAM,CAAC,cAAP,CAAsB,IAA7B;AACH;;AACD,aAAO,MAAM,CAAC,cAAP,CAAsB,IAA7B;AACH;;;kCAKa,W,EAAqC;AAAA;;AAC/C,UAAI,CAAC,WAAL,EAAkB;AACd,eAAO,SAAP;AACH;;AACD,aAAO,WAAW,CAAC,GAAZ,CAAgB,oBAAU;AAAA,eAAI,OAAI,CAAC,YAAL,CAAkB,UAAlB,CAAJ;AAAA,OAA1B,CAAP;AACH;;;iCAEY,U,EAAsB;AAC/B,aAAO;AACH,YAAI,EAAE,OAAO,UAAU,CAAC,IAAlB,KAA2B,QAA3B,GAAsC,UAAU,CAAC,IAAX,CAAgB,QAAhB,EAAtC,GAAmE,UAAU,CAAC,IADjF;AAEH,gBAAQ,EAAE,KAAK,UAAL,CAAgB,UAAU,CAAC,QAA3B,CAFP;AAGH,eAAO,EAAE,UAAU,CAAC,OAHjB;AAIH,cAAM,EAAE,UAAU,CAAC,MAJhB;AAKH,uBAAe,EAAE,UAAU,CAAC,KAAX,CAAiB,KAAjB,CAAuB,IAAvB,GAA8B,CAL5C;AAMH,mBAAW,EAAE,UAAU,CAAC,KAAX,CAAiB,KAAjB,CAAuB,SAAvB,GAAmC,CAN7C;AAOH,qBAAa,EAAE,UAAU,CAAC,KAAX,CAAiB,GAAjB,CAAqB,IAArB,GAA4B,CAPxC;AAQH,iBAAS,EAAE,UAAU,CAAC,KAAX,CAAiB,GAAjB,CAAqB,SAArB,GAAiC,CARzC;AASH,0BAAkB,EAAE,KAAK,qBAAL,CAA2B,UAAU,CAAC,kBAAtC;AATjB,OAAP;AAWH;;;0CAEqB,kB,EAAmD;AAAA;;AACrE,UAAI,CAAC,kBAAL,EAAyB;AACrB,eAAO,SAAP;AACH;;AACD,aAAO,kBAAkB,CAAC,GAAnB,CAAuB,cAAI;AAAA,eAAI,OAAI,CAAC,oBAAL,CAA0B,IAA1B,CAAJ;AAAA,OAA3B,CAAP;AACH;;;yCAEoB,kB,EAAgD;AACjE,aAAO;AACH,gBAAQ,EAAE,MAAM,CAAC,GAAP,CAAW,KAAX,CAAiB,kBAAkB,CAAC,QAAnB,CAA4B,GAA7C,CADP;AAEH,uBAAe,EAAE,kBAAkB,CAAC,QAAnB,CAA4B,KAA5B,CAAkC,KAAlC,CAAwC,IAAxC,GAA+C,CAF7D;AAGH,mBAAW,EAAE,kBAAkB,CAAC,QAAnB,CAA4B,KAA5B,CAAkC,KAAlC,CAAwC,SAAxC,GAAoD,CAH9D;AAIH,qBAAa,EAAE,kBAAkB,CAAC,QAAnB,CAA4B,KAA5B,CAAkC,GAAlC,CAAsC,IAAtC,GAA6C,CAJzD;AAKH,iBAAS,EAAE,kBAAkB,CAAC,QAAnB,CAA4B,KAA5B,CAAkC,GAAlC,CAAsC,SAAtC,GAAkD,CAL1D;AAMH,eAAO,EAAE,kBAAkB,CAAC;AANzB,OAAP;AAQH;;;uCAEkB,M,EAA8D,Y,EAA2B;AAAA;;AACxG,UAAI,CAAC,MAAL,EAAa;AACT,eAAO;AACH,oBAAU,EAAE,KADT;AAEH,qBAAW,EAAE;AAFV,SAAP;AAIH;;AACD,UAAI,KAAK,CAAC,OAAN,CAAc,MAAd,CAAJ,EAA2B;AACvB,YAAM,WAAW,GAAG,MAAM,CAAC,GAAP,CAAW,cAAI;AAAA,iBAAI,OAAI,CAAC,gBAAL,CAAsB,IAAtB,EAA4B,YAA5B,CAAJ;AAAA,SAAf,CAApB;AACA,eAAO;AACH,oBAAU,EAAE,KADT;AAEH,qBAAW,EAAX;AAFG,SAAP;AAIH;;AACD,aAAO;AACH,kBAAU,EAAE,MAAM,CAAC,YADhB;AAEH,mBAAW,EAAE,MAAM,CAAC,KAAP,CAAa,GAAb,CAAiB,cAAI;AAAA,iBAAI,OAAI,CAAC,gBAAL,CAAsB,IAAtB,EAA4B,YAA5B,CAAJ;AAAA,SAArB;AAFV,OAAP;AAIH;;;qCAEgB,I,EAAsB,Y,EAA2B;AAC9D,UAAM,MAAM,GAA2B;AAAE,aAAK,EAAE,IAAI,CAAC;AAAd,OAAvC;;AACA,UAAI,IAAI,CAAC,MAAT,EAAiB;AAAE,cAAM,CAAC,MAAP,GAAgB,IAAI,CAAC,MAArB;AAA8B;;AACjD,UAAI,IAAI,CAAC,aAAT,EAAwB;AACpB,cAAM,CAAC,aAAP,GAAuB,KAAK,eAAL,CAAqB,IAAI,CAAC,aAA1B,CAAvB;AACA,cAAM,CAAC,mBAAP,GAA6B,EAAE,CAAC,MAAH,CAAU,IAAI,CAAC,aAAf,IAAgC,SAAhC,GAA4C,IAAI,CAAC,aAAL,CAAmB,IAA5F;AACH;;AAAA;;AACD,UAAI,IAAI,CAAC,UAAT,EAAqB;AAAE,cAAM,CAAC,UAAP,GAAoB,IAAI,CAAC,UAAzB;AAAsC;;AAC7D,UAAM,UAAU,GAAG,KAAK,sBAAL,CAA4B,IAA5B,EAAkC,YAAlC,CAAnB;AACA,YAAM,CAAC,UAAP,GAAoB,UAAU,CAAC,UAA/B;AACA,YAAM,CAAC,KAAP,GAAe,UAAU,CAAC,KAA1B;AACA,YAAM,CAAC,QAAP,GAAkB,UAAU,CAAC,QAA7B;;AACA,UAAI,UAAU,CAAC,SAAf,EAA0B;AACtB,cAAM,CAAC,eAAP,GAAyB,MAAM,CAAC,SAAP,CAAiB,4BAAjB,CAA8C,eAAvE;AACH;;AACD,UAAI,EAAE,CAAC,MAAH,CAAU,IAAI,CAAC,IAAf,CAAJ,EAA0B;AAAA,oCACK,KAAK,oBAAL,CAA0B,IAAI,CAAC,IAA/B,CADL;AAAA;AAAA,YACjB,QADiB;AAAA,YACP,QADO;;AAEtB,cAAM,CAAC,IAAP,GAAc,QAAd;;AACA,YAAI,QAAJ,EAAc;AACV,gBAAM,CAAC,gBAAP,GAA0B,QAA1B;AACH;AACJ;;AACD,UAAI,IAAI,CAAC,QAAT,EAAmB;AAAE,cAAM,CAAC,QAAP,GAAkB,IAAI,CAAC,QAAvB;AAAkC;;AACvD,UAAI,IAAI,CAAC,mBAAT,EAA8B;AAAE,cAAM,CAAC,mBAAP,GAA6B,KAAK,WAAL,CAAiB,IAAI,CAAC,mBAAtB,CAA7B;AAA0E;;AAC1G,UAAI,EAAE,CAAC,WAAH,CAAe,IAAI,CAAC,gBAApB,CAAJ,EAA2C;AAAE,cAAM,CAAC,gBAAP,GAA0B,IAAI,CAAC,gBAAL,CAAsB,KAAtB,EAA1B;AAA0D;;AACvG,UAAI,IAAI,CAAC,OAAT,EAAkB;AAAE,cAAM,CAAC,OAAP,GAAiB,KAAK,SAAL,CAAe,IAAI,CAAC,OAApB,CAAjB;AAAgD;;AACpE,UAAI,IAAI,CAAC,UAAL,KAAoB,IAApB,IAA4B,IAAI,CAAC,UAAL,KAAoB,KAApD,EAA2D;AAAE,cAAM,CAAC,UAAP,GAAoB,IAAI,CAAC,UAAzB;AAAsC;;AACnG,UAAI,IAAI,CAAC,SAAL,KAAmB,IAAnB,IAA2B,IAAI,CAAC,SAAL,KAAmB,KAAlD,EAAyD;AAAE,cAAM,CAAC,SAAP,GAAmB,IAAI,CAAC,SAAxB;AAAoC;;AAC/F,UAAI,IAAI,CAAC,IAAL,KAAc,SAAlB,EAA6B;AAAE,cAAM,CAAC,IAAP,GAAc,IAAI,CAAC,IAAnB;AAA0B;;AACzD,UAAI,IAAI,CAAC,UAAL,KAAoB,IAApB,IAA4B,IAAI,CAAC,UAAL,KAAoB,KAApD,EAA2D;AACvD,cAAM,CAAC,UAAP,GAAoB,IAAI,CAAC,UAAzB;AACH;;AACD,aAAO,MAAP;AACH;;;yCAEoB,K,EAAyB;AAC1C,UAAI,8BAAmB,IAAnB,IAA2B,KAA3B,IAAoC,KAAK,IAAI,8BAAmB,aAApE,EAAmF;AAC/E,gBAAQ,KAAR;AACI,eAAK,8BAAmB,IAAxB;AAA8B,mBAAO,CAAC,MAAM,CAAC,SAAP,CAAiB,kBAAjB,CAAoC,IAArC,EAA2C,SAA3C,CAAP;;AAC9B,eAAK,8BAAmB,MAAxB;AAAgC,mBAAO,CAAC,MAAM,CAAC,SAAP,CAAiB,kBAAjB,CAAoC,MAArC,EAA6C,SAA7C,CAAP;;AAChC,eAAK,8BAAmB,QAAxB;AAAkC,mBAAO,CAAC,MAAM,CAAC,SAAP,CAAiB,kBAAjB,CAAoC,QAArC,EAA+C,SAA/C,CAAP;;AAClC,eAAK,8BAAmB,WAAxB;AAAqC,mBAAO,CAAC,MAAM,CAAC,SAAP,CAAiB,kBAAjB,CAAoC,WAArC,EAAkD,SAAlD,CAAP;;AACrC,eAAK,8BAAmB,KAAxB;AAA+B,mBAAO,CAAC,MAAM,CAAC,SAAP,CAAiB,kBAAjB,CAAoC,KAArC,EAA4C,SAA5C,CAAP;;AAC/B,eAAK,8BAAmB,QAAxB;AAAkC,mBAAO,CAAC,MAAM,CAAC,SAAP,CAAiB,kBAAjB,CAAoC,QAArC,EAA+C,SAA/C,CAAP;;AAClC,eAAK,8BAAmB,KAAxB;AAA+B,mBAAO,CAAC,MAAM,CAAC,SAAP,CAAiB,kBAAjB,CAAoC,KAArC,EAA4C,SAA5C,CAAP;;AAC/B,eAAK,8BAAmB,SAAxB;AAAmC,mBAAO,CAAC,MAAM,CAAC,SAAP,CAAiB,kBAAjB,CAAoC,SAArC,EAAgD,SAAhD,CAAP;;AACnC,eAAK,8BAAmB,MAAxB;AAAgC,mBAAO,CAAC,MAAM,CAAC,SAAP,CAAiB,kBAAjB,CAAoC,MAArC,EAA6C,SAA7C,CAAP;;AAChC,eAAK,8BAAmB,QAAxB;AAAkC,mBAAO,CAAC,MAAM,CAAC,SAAP,CAAiB,kBAAjB,CAAoC,QAArC,EAA+C,SAA/C,CAAP;;AAClC,eAAK,8BAAmB,IAAxB;AAA8B,mBAAO,CAAC,MAAM,CAAC,SAAP,CAAiB,kBAAjB,CAAoC,IAArC,EAA2C,SAA3C,CAAP;;AAC9B,eAAK,8BAAmB,KAAxB;AAA+B,mBAAO,CAAC,MAAM,CAAC,SAAP,CAAiB,kBAAjB,CAAoC,KAArC,EAA4C,SAA5C,CAAP;;AAC/B,eAAK,8BAAmB,IAAxB;AAA8B,mBAAO,CAAC,MAAM,CAAC,SAAP,CAAiB,kBAAjB,CAAoC,IAArC,EAA2C,SAA3C,CAAP;;AAC9B,eAAK,8BAAmB,OAAxB;AAAiC,mBAAO,CAAC,MAAM,CAAC,SAAP,CAAiB,kBAAjB,CAAoC,OAArC,EAA8C,SAA9C,CAAP;;AACjC,eAAK,8BAAmB,OAAxB;AAAiC,mBAAO,CAAC,MAAM,CAAC,SAAP,CAAiB,kBAAjB,CAAoC,OAArC,EAA8C,SAA9C,CAAP;;AACjC,eAAK,8BAAmB,KAAxB;AAA+B,mBAAO,CAAC,MAAM,CAAC,SAAP,CAAiB,kBAAjB,CAAoC,KAArC,EAA4C,SAA5C,CAAP;;AAC/B,eAAK,8BAAmB,IAAxB;AAA8B,mBAAO,CAAC,MAAM,CAAC,SAAP,CAAiB,kBAAjB,CAAoC,IAArC,EAA2C,SAA3C,CAAP;;AAC9B,eAAK,8BAAmB,SAAxB;AAAmC,mBAAO,CAAC,MAAM,CAAC,SAAP,CAAiB,kBAAjB,CAAoC,SAArC,EAAgD,SAAhD,CAAP;;AACnC,eAAK,8BAAmB,MAAxB;AAAgC,mBAAO,CAAC,MAAM,CAAC,SAAP,CAAiB,kBAAjB,CAAoC,MAArC,EAA6C,SAA7C,CAAP;;AAChC,eAAK,8BAAmB,UAAxB;AAAoC,mBAAO,CAAC,MAAM,CAAC,SAAP,CAAiB,kBAAjB,CAAoC,UAArC,EAAiD,SAAjD,CAAP;;AACpC,eAAK,8BAAmB,QAAxB;AAAkC,mBAAO,CAAC,MAAM,CAAC,SAAP,CAAiB,kBAAjB,CAAoC,QAArC,EAA+C,SAA/C,CAAP;;AAClC,eAAK,8BAAmB,MAAxB;AAAgC,mBAAO,CAAC,MAAM,CAAC,SAAP,CAAiB,kBAAjB,CAAoC,MAArC,EAA6C,SAA7C,CAAP;;AAChC,eAAK,8BAAmB,KAAxB;AAA+B,mBAAO,CAAC,MAAM,CAAC,SAAP,CAAiB,kBAAjB,CAAoC,KAArC,EAA4C,SAA5C,CAAP;;AAC/B,eAAK,8BAAmB,QAAxB;AAAkC,mBAAO,CAAC,MAAM,CAAC,SAAP,CAAiB,kBAAjB,CAAoC,QAArC,EAA+C,SAA/C,CAAP;;AAClC,eAAK,8BAAmB,aAAxB;AAAuC,mBAAO,CAAC,MAAM,CAAC,SAAP,CAAiB,kBAAjB,CAAoC,aAArC,EAAoD,SAApD,CAAP;;AACvC;AAAS,mBAAO,CAAC,KAAK,GAAG,CAAT,EAAY,SAAZ,CAAP;AA1Bb;AA6BH;;AAAA;AACD,aAAO,CAAC,8BAAmB,IAApB,EAA0B,KAA1B,CAAP;AACH;;;2CAEsB,I,EAAsB,Y,EAA2B;AACpE,UAAM,SAAS,GAAG,IAAI,CAAC,gBAAL,KAA0B,4BAAiB,OAA7D;;AACA,UAAI,IAAI,CAAC,QAAT,EAAmB;AACf,YAAM,KAAK,GAAG,KAAK,OAAL,CAAa,IAAI,CAAC,QAAL,CAAc,KAA3B,CAAd;AACA,YAAM,KAAK,GAAG,IAAI,CAAC,QAAL,CAAc,OAA5B;AACA,eAAO;AAAE,mBAAS,EAAT,SAAF;AAAa,oBAAU,EAAE,KAAzB;AAAgC,eAAK,EAAL,KAAhC;AAAuC,kBAAQ,EAAE;AAAjD,SAAP;AACH;;AACD,UAAI,IAAI,CAAC,UAAT,EAAqB;AACjB,eAAO;AAAE,mBAAS,EAAT,SAAF;AAAa,oBAAU,EAAE,IAAI,CAAC,UAA9B;AAA0C,kBAAQ,EAAE,KAApD;AAA2D,eAAK,EAAE;AAAlE,SAAP;AACH;;AACD,aAAO;AAAE,kBAAU,EAAE,IAAI,CAAC,KAAnB;AAA0B,aAAK,EAAE,YAAjC;AAA+C,gBAAQ,EAAE,KAAzD;AAAgE,iBAAS,EAAE;AAA3E,OAAP;AACH;;;oCAEe,a,EAA6B;AAAA;;AACzC,UAAM,KAAK,GAAG,aAAa,CAAC,GAAd,CAAkB,cAAI;AAAA,eAAI,OAAI,CAAC,cAAL,CAAoB,IAApB,CAAJ;AAAA,OAAtB,CAAd;AACA,aAAO;AAAE,aAAK,EAAL;AAAF,OAAP;AACH;;;mCAEc,Y,EAA0B;AACrC,aAAO;AACH,aAAK,EAAE,KAAK,OAAL,CAAa,YAAY,CAAC,KAA1B,CADJ;AAEH,WAAG,EAAE,YAAY,CAAC,MAFf;AAGH,YAAI,EAAE,YAAY,CAAC;AAHhB,OAAP;AAKH;;;4BAUO,K,EAAiD;AACrD,UAAI,KAAK,KAAK,SAAd,EAAyB;AACrB,eAAO,SAAP;AACH;;AACD,UAAI,KAAK,KAAK,IAAd,EAAoB;AAChB,eAAO,IAAP;AACH;;AACD,UAAM,KAAK,GAAG,KAAK,UAAL,CAAgB,KAAK,CAAC,KAAtB,CAAd;AACA,UAAM,GAAG,GAAG,KAAK,UAAL,CAAgB,KAAK,CAAC,GAAtB,CAAZ;;AACA,UAAI,KAAK,YAAY,MAAM,CAAC,QAAxB,IAAoC,GAAG,YAAY,MAAM,CAAC,QAA9D,EAAwE;AACpE,eAAO,IAAI,MAAM,CAAC,KAAX,CAAiB,KAAK,CAAC,UAAvB,EAAmC,KAAK,CAAC,MAAzC,EAAiD,GAAG,CAAC,UAArD,EAAiE,GAAG,CAAC,MAArE,CAAP;AACH;;AACD,UAAM,eAAe,GAAG,CAAC,KAAD,IAAU,KAAK,CAAC,UAAN,KAAqB,SAA/B,GAA2C,SAA3C,GAAuD,KAAK,CAAC,UAArF;AACA,UAAM,WAAW,GAAG,CAAC,KAAD,IAAU,KAAK,CAAC,MAAN,KAAiB,SAA3B,GAAuC,SAAvC,GAAmD,KAAK,CAAC,MAA7E;AACA,UAAM,aAAa,GAAG,CAAC,GAAD,IAAQ,GAAG,CAAC,UAAJ,KAAmB,SAA3B,GAAuC,SAAvC,GAAmD,GAAG,CAAC,UAA7E;AACA,UAAM,SAAS,GAAG,CAAC,GAAD,IAAQ,GAAG,CAAC,MAAJ,KAAe,SAAvB,GAAmC,SAAnC,GAA+C,GAAG,CAAC,MAArE;AACA,aAAO;AAAE,uBAAe,EAAf,eAAF;AAAmB,mBAAW,EAAX,WAAnB;AAAgC,qBAAa,EAAb,aAAhC;AAA+C,iBAAS,EAAT;AAA/C,OAAP;AACH;;;+BAUU,Q,EAA8C;AACrD,UAAI,QAAQ,KAAK,SAAjB,EAA4B;AACxB,eAAO,SAAP;AACH;;AACD,UAAI,QAAQ,KAAK,IAAjB,EAAuB;AACnB,eAAO,IAAP;AACH;;AANoD,UAO7C,IAP6C,GAOzB,QAPyB,CAO7C,IAP6C;AAAA,UAOvC,SAPuC,GAOzB,QAPyB,CAOvC,SAPuC;AAQrD,UAAM,UAAU,GAAG,IAAI,KAAK,SAAT,GAAqB,SAArB,GAAiC,IAAI,GAAG,CAA3D;AACA,UAAM,MAAM,GAAG,SAAS,KAAK,SAAd,GAA0B,SAA1B,GAAsC,SAAS,GAAG,CAAjE;;AACA,UAAI,UAAU,KAAK,SAAf,IAA4B,MAAM,KAAK,SAA3C,EAAsD;AAClD,eAAO,IAAI,MAAM,CAAC,QAAX,CAAoB,UAApB,EAAgC,MAAhC,CAAP;AACH;;AACD,aAAO;AAAE,kBAAU,EAAV,UAAF;AAAc,cAAM,EAAN;AAAd,OAAP;AACH;;;wCAEmB,K,EAAyB;AAAA;;AACzC,aAAO,KAAK,CAAC,GAAN,CAAU,cAAI;AAAA,eAAI,OAAI,CAAC,kBAAL,CAAwB,IAAxB,CAAJ;AAAA,OAAd,CAAP;AACH;;;uCAEkB,I,EAAsB;AACrC,aAAO;AACH,aAAK,EAAE,KAAK,OAAL,CAAa,IAAI,CAAC,KAAlB,CADJ;AAEH,aAAK,EAAE,IAAI,CAAC;AAFT,OAAP;AAIH;;;yCAEoB,K,EAA0B;AAAA;;AAC3C,aAAO,KAAK,CAAC,GAAN,CAAU,cAAI;AAAA,eAAI,OAAI,CAAC,mBAAL,CAAyB,IAAzB,CAAJ;AAAA,OAAd,CAAP;AACH;;;wCAEmB,I,EAAuB;AACvC,aAAO;AACH,aAAK,EAAE,IAAI,CAAC,KADT;AAEH,gBAAQ,EAAE,KAAK,UAAL,CAAgB,IAAI,CAAC,QAArB,CAFP;AAGH,2BAAmB,EAAE,KAAK,WAAL,CAAiB,IAAI,CAAC,mBAAtB;AAHlB,OAAP;AAKH;;;oCAIe,K,EAAwC;AAAA;;AACpD,UAAI,CAAC,KAAL,EAAY;AACR,eAAO,KAAP;AACH;;AACD,aAAO,KAAK,CAAC,GAAN,CAAU,cAAI;AAAA,eAAI,OAAI,CAAC,cAAL,CAAoB,IAApB,CAAJ;AAAA,OAAd,CAAP;AACH;;;mCAEc,I,EAAkB;AAC7B,aAAO;AACH,aAAK,EAAE,IAAI,CAAC,SAAL,GAAiB,CADrB;AAEH,WAAG,EAAE,IAAI,CAAC,OAAL,GAAe,CAFjB;AAGH,YAAI,EAAE,KAAK,kBAAL,CAAwB,IAAI,CAAC,IAA7B;AAHH,OAAP;AAKH;;;uCAEkB,I,EAAa;AAC5B,UAAI,IAAJ,EAAU;AACN,gBAAQ,IAAR;AACI,eAAK,4BAAiB,OAAtB;AACI,mBAAO,MAAM,CAAC,SAAP,CAAiB,gBAAjB,CAAkC,OAAzC;;AACJ,eAAK,4BAAiB,OAAtB;AACI,mBAAO,MAAM,CAAC,SAAP,CAAiB,gBAAjB,CAAkC,OAAzC;;AACJ,eAAK,4BAAiB,MAAtB;AACI,mBAAO,MAAM,CAAC,SAAP,CAAiB,gBAAjB,CAAkC,MAAzC;AANR;;AAOC;AACJ;;AACD,aAAO,SAAP;AACH;;;;;;AApnBL,8D;;;;;;;;;;;;;;;;;;;;;;AC5XA;;IAKa,0B;AAKT,sCACuB,IADvB,EAEuB,GAFvB,EAEqD;AAAA;;AAD9B;AACA;AALJ,uBAAc,IAAI,GAAJ,EAAd;AACA,qBAAY,IAAI,iCAAJ,EAAZ;AAKlB;;;;8BAEM;AACH,WAAK,SAAL,CAAe,OAAf;AACH;;;wBAEG,G,EAAW;AACX,UAAM,WAAW,GAAG,KAAK,WAAL,CAAiB,GAAjB,CAAqB,GAArB,CAApB;AACA,aAAO,CAAC,CAAC,WAAF,GAAgB,WAAW,CAAC,WAA5B,GAA0C,EAAjD;AACH;;;wBAEG,G,EAAa,W,EAAyB;AAAA;;AACtC,UAAM,QAAQ,GAAG,KAAK,WAAL,CAAiB,GAAjB,CAAqB,GAArB,CAAjB;;AACA,UAAI,QAAJ,EAAc;AACV,gBAAQ,CAAC,WAAT,GAAuB,WAAvB;AACH,OAFD,MAEO;AACH,YAAM,gBAAgB,GAAG,IAAI,sBAAJ,CAA2B,GAA3B,EAAgC,WAAhC,EAA6C,KAAK,IAAlD,EAAwD,KAAK,GAA7D,CAAzB;AACA,aAAK,WAAL,CAAiB,GAAjB,CAAqB,GAArB,EAA0B,gBAA1B;AACA,aAAK,SAAL,CAAe,IAAf,CAAoB,wBAAW,MAAX,CAAkB,YAAK;AACvC,eAAI,CAAC,WAAL,WAAwB,GAAxB;;AACA,0BAAgB,CAAC,OAAjB;AACH,SAHmB,CAApB;AAIH;AACJ;;;;;;AA/BL;;IAmCa,sB;AAIT,kCACI,GADJ,EAEI,WAFJ,EAGa,KAHb,EAIuB,GAJvB,EAIqD;AAAA;;AAAA;;AADxC;AACU;AANb,oBAA0B,EAA1B;AACA,wBAA6B,EAA7B;AAON,SAAK,GAAL,GAAW,MAAM,CAAC,GAAP,CAAW,KAAX,CAAiB,GAAjB,CAAX;AACA,SAAK,WAAL,GAAmB,WAAnB;AACA,UAAM,CAAC,MAAP,CAAc,gBAAd,CAA+B,eAAK;AAAA,aAAI,MAAI,CAAC,oBAAL,CAA0B,KAA1B,CAAJ;AAAA,KAApC;AACH;;;;8BAgBM;AACH,WAAK,QAAL,GAAgB,EAAhB;AACA,WAAK,kBAAL;AACH;;;yCAEiB;AACd,UAAM,KAAK,GAAG,MAAM,CAAC,MAAP,CAAc,QAAd,CAAuB,KAAK,GAA5B,CAAd;AACA,WAAK,oBAAL,CAA0B,KAAK,GAAG,KAAH,GAAW,SAA1C;AACH;;;yCAE8B,K,EAAyB;AACpD,UAAI,KAAK,IAAI,KAAK,GAAL,CAAS,QAAT,OAAwB,KAAK,CAAC,GAAN,CAAU,QAAV,EAArC,EAA2D;AACvD,cAAM,CAAC,MAAP,CAAc,eAAd,CAA8B,KAA9B,EAAqC,KAAK,KAA1C,EAAiD,KAAK,QAAtD;AACH;AACJ;;;sBA5Be,W,EAAyB;AACrC,WAAK,YAAL,GAAoB,WAApB;AACA,WAAK,QAAL,GAAgB,KAAK,GAAL,CAAS,aAAT,CAAuB,WAAvB,CAAhB;AACA,WAAK,kBAAL;AACH,K;wBAEc;AACX,aAAO,KAAK,YAAZ;AACH;;;wBAEU;AACP,aAAO,KAAK,QAAZ;AACH;;;;;;AA3BL,wD;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC7CA;;;;;AAIA;;AAIA;;AACA;;AACA;;AACA;;AACA;;AACA;;AAIA;;AAEA;;IAEa,oB;;;;;AAMT,sCAAyF;AAAA;;AAAA,QAA3E,EAA2E,QAA3E,EAA2E;AAAA,QAAvE,IAAuE,QAAvE,IAAuE;AAAA,QAAjE,aAAiE,QAAjE,aAAiE;AAAA,QAAlD,kBAAkD,QAAlD,kBAAkD;;AAAA;;AACrF,8BAAM,EAAE,IAAI,IAAI,CAAC,WAAL,EAAZ,EAAgC,IAAhC,EAAsC,aAAtC;AACA,UAAK,kBAAL,GAA0B,kBAA1B;AACC,UAAa,gBAAb,GAAgC,MAAK,kBAAL,CAAwB,IAAxB,+BAAhC,CAHoF,CAKrF;;AACA,QAAM,IAAI,gCAAV;;AAIA,QAAI,CAAC,IAAL,GAAY,IAAI,KAAJ,CAAU,IAAI,CAAC,IAAf,EAAqB;AAC7B,SAAG,EAAE,aAAC,MAAD,EAAc,IAAd,EAA8B;AAC/B,YAAI,IAAI,KAAK,OAAb,EAAsB;AAClB,iBAAO,MAAM,CAAC,IAAD,CAAb;AACH;;AACD,eAAO,oBAAoB,CAAC,gBAA5B;AACH;AAN4B,KAArB,CAAZ;AAQA,QAAI,CAAC,IAAL,GAAY,IAAI,KAAJ,CAAU,IAAI,CAAC,IAAf,EAAqB;AAC7B,SAAG,EAAE,aAAC,MAAD,EAAwB,IAAxB,EAAwC;AACzC,YAAI,IAAI,KAAK,OAAb,EAAsB;AAClB,iBAAO,MAAM,CAAC,IAAD,CAAb;AACH;;AACD,YAAI,IAAI,KAAK,oBAAb,EAAmC;AAC/B,iBAAO,UAAC,YAAD,EAAoB,QAApB,EAAmC,OAAnC,EAAqE;AACxE,mBAAO;AACH,0BAAY,EAAE,MAAM,CAAC,wBAAP,CAAgC,YAAhC,CADX;AAEH,sBAAQ,EAAR,QAFG;AAGH,qBAAO,EAAP;AAHG,aAAP;AAKH,WAND;AAOH;;AACD,YAAI,IAAI,KAAK,8BAAb,EAA6C;AACzC,iBAAO,UAAC,KAAD,EAA2C;AAC9C,mBAAO;AACH,0BAAY,EAAE,MAAM,CAAC,wBAAP,CAAgC,KAAK,CAAC,QAAtC,CADX;AAEH,oBAAM,EAAE,KAAK,CAAC;AAFX,aAAP;AAIH,WALD;AAMH;;AACD,YAAI,IAAI,CAAC,QAAL,CAAc,QAAd,CAAJ,EAA6B;AACzB,iBAAQ,MAAc,CAAC,IAAD,CAAtB;AACH;;AACD,eAAO,oBAAoB,CAAC,gBAA5B;AACH;AA1B4B,KAArB,CAAZ;AAlBqF;AA8CxF;;;;yCAE2B;AACxB,UAAM,YAAY,GAAI,KAAa,qBAAb,CAAmC,IAAnC,CAAwC,IAAxC,CAAtB;AACA,UAAM,YAAY,GAAG,KAAK,sBAAL,CAA4B,IAA5B,CAAiC,IAAjC,CAArB;AACA,aAAO,KAAK,kBAAL,CAAwB,GAAxB,CAA4B,YAA5B,EAA0C,YAA1C,EAAwD,KAAK,aAA7D,CAAP;AACH;;;4CAEiC,Q,EAAgB;AAC9C,YAAM,IAAI,KAAJ,CAAU,aAAV,CAAN;AACH;;;8CAEgC;AAC7B;;AACA,WAAK,eAAL,CAAqB,IAAI,oCAAJ,CAA6B,IAA7B,CAArB;AACA,WAAK,eAAL,CAAqB,IAAI,sCAAJ,CAA0B,IAA1B,CAArB;AACA,WAAK,eAAL,CAAqB,IAAI,sCAAJ,CAA0B,IAA1B,CAArB;AACA,WAAK,eAAL,CAAqB,IAAI,oCAAJ,CAAyB,IAAzB,CAArB;AACA,WAAK,eAAL,CAAqB,IAAI,0CAAJ,CAA4B,IAA5B,CAArB;AACA,UAAM,mBAAmB,GAAG,IAAI,kCAAJ,CAAwB,IAAxB,CAA5B;AACA,yBAAmB,CAAC,iBAAD,CAAnB,GAAyC,oBAAoB,CAAC,gBAA9D;AACA,WAAK,eAAL,CAAqB,mBAArB;AACA,WAAK,eAAL,CAAqB,IAAI,gCAAJ,CAAuB,IAAvB,CAArB;AAEA,UAAM,QAAQ,GAAG,KAAK,WAAL,CAAjB;;AAZ6B,iDAaP,QAbO;AAAA;;AAAA;AAa7B,4DAAgC;AAAA,cAArB,OAAqB;;AAC5B,cAAI,OAAO,YAAY,oCAAvB,EAA6C;AACzC,mBAAO,CAAC,SAAD,CAAP,GAAqB,oBAAoB,CAAC,gBAA1C;AACA,mBAAO,CAAC,qBAAD,CAAP,GAAiC,oBAAoB,CAAC,gBAAtD;AACA,mBAAO,CAAC,sBAAD,CAAP,GAAkC,oBAAoB,CAAC,gBAAvD;AACH;AACJ;AAnB4B;AAAA;AAAA;AAAA;AAAA;AAoBhC;;;;EApFqC,2B;;AAE/B,wCAAmB,UAAC,MAAD;AAAA,SAAiB,MAAM,IAAI,SAA3B;AAAA,CAAnB;;AAFX,oD;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACrBA;;;;;AAIA;;AACA;;AAQA;;AAEA;;AAOA,IAAiB,qBAAjB;;AAAA,WAAiB,qBAAjB,EAAsC;AAClC,WAAgB,YAAhB,CAA6B,QAA7B,EAAyD;AACrD,WAAO;AACH,SAAG,EAAE,MAAM,CAAC,GAAP,CAAW,KAAX,CAAiB,QAAQ,CAAC,GAA1B,CADF;AAEH,gBAAU,EAAE,QAAQ,CAAC;AAFlB,KAAP;AAIH;;AALe,uCAAY,YAAZ;;AAMhB,WAAgB,SAAhB,CAA0B,KAA1B,EAA6D;AACzD,WAAO;AACH,SAAG,EAAE,KAAK,CAAC,GADR;AAEH,gBAAU,EAAE,KAAK,CAAC,SAAN;AAFT,KAAP;AAIH;;AALe,oCAAS,SAAT;AAMnB,CAbD,EAAiB,qBAAqB,GAArB,kEAAqB,EAArB,CAAjB;;AAeA,SAAgB,QAAhB,CAAyB,OAAzB,EAA0C,KAA1C,EAAuD;AACnD,MAAM,MAAM,GAAG,YAAY,CAAC,OAAD,EAAU;AACjC,YAAQ,EAAE,IADuB;AAEjC,YAAQ,EAAE;AAFuB,GAAV,CAA3B;AAIA,SAAO,MAAM,CAAC,IAAP,CAAY,KAAZ,CAAP;AACH;;AAND;;IAQa,e;AAET,2BACuB,GADvB,EAEuB,GAFvB,EAEqD;AAAA;;AAD9B;AACA;AAClB;;;;0BAEC,Q,EAA4B,Q,EAA4B;AAC1D,aAAO,KAAK,UAAL,CAAgB,QAAhB,EAA0B,qBAAqB,CAAC,YAAtB,CAAmC,QAAnC,CAA1B,CAAP;AACH;;;+CAE0B,I,EAAa;AACpC,aAAO,IAAI,yDAAJ,CAA+B,IAAI,IAAI,SAAvC,EAAkD,KAAK,GAAvD,CAAP;AACH;;;mDAE8B,Q,EAA4B,Q,EAAgE;AAAA,wCAA3B,iBAA2B;AAA3B,yBAA2B;AAAA;;AACvH,UAAM,kBAAkB,GAAG,KAAK,wBAAL,cAA8B,QAA9B,EAAwC,QAAxC,SAAqD,iBAArD,EAA3B;AACA,UAAM,SAAS,GAAG,IAAI,iCAAJ,EAAlB;;AAFuH,iDAGhG,KAAK,aAAL,CAAmB,QAAnB,CAHgG;AAAA;;AAAA;AAGvH,4DAAqD;AAAA,cAA1C,QAA0C;AACjD,mBAAS,CAAC,IAAV,CAAe,MAAM,CAAC,SAAP,CAAiB,8BAAjB,CAAgD,QAAhD,EAA0D,kBAA1D,CAAf;AACH;AALsH;AAAA;AAAA;AAAA;AAAA;;AAKtH;AACD,aAAO,SAAP;AACH;;;6CAEkC,Q,EAA4B,Q,EAAgE;AAAA;;AAAA,yCAA3B,iBAA2B;AAA3B,yBAA2B;AAAA;;AAC3H,aAAO;AACH,yBAAiB,EAAjB,iBADG;AAEH,8BAAsB,EAAE,gCAAO,KAAP,EAAc,QAAd,EAAwB,OAAxB,EAAiC,KAAjC;AAAA,iBAA0C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBACzD,KAAK,UAAL,CAAgB,QAAhB,EAA0B,qBAAqB,CAAC,SAAtB,CAAgC,KAAhC,CAA1B,CADyD;AAAA;AAAA;AAAA;;AAAA,qDAEnD,SAFmD;;AAAA;AAIxD,6BAJwD,GAI5C,KAAK,CAAC,oBAAN,CAA2B,QAA3B,CAJ4C;AAKxD,gCALwD,GAKzC,IAAI,MAAM,CAAC,KAAX,CAAiB,QAAQ,CAAC,UAA1B,EAAsC,SAAS,CAAC,WAAhD,EAA6D,QAAQ,CAAC,UAAtE,EAAkF,SAAS,CAAC,SAA5F,CALyC;AAMxD,0BANwD,GAM/C,KAAK,GAAL,CAAS,kBAAT,CAA4B,KAA5B,EAAmC,QAAnC,EAA6C,OAA7C,CAN+C;AAAA;AAO/C,2BAAM,QAAQ,CAAC,sBAAT,CAAgC,MAAhC,EAAwC,KAAxC,CAAN;;AAP+C;AAOxD,0BAPwD;AAAA,qDAQvD,MAAM,IAAI,KAAK,GAAL,CAAS,kBAAT,CAA4B,MAA5B,EAAoC,YAApC,CAR6C;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aAA1C;AAAA,SAFrB;AAYH,6BAAqB,EAAE,QAAQ,CAAC,qBAAT,GAAiC,UAAO,KAAP,EAAc,QAAd,EAAwB,IAAxB,EAA8B,KAA9B;AAAA,iBAAuC;AAAA;AAAA;AAAA;AAAA;AAAA;AACrF,gCADqF,GACtE,KAAK,GAAL,CAAS,gBAAT,CAA0B,IAA1B,CADsE;AAAA;AAEtE,2BAAM,QAAQ,CAAC,qBAAT,CAAgC,YAAhC,EAA8C,KAA9C,CAAN;;AAFsE;AAErF,gCAFqF;;AAG3F,wBAAI,YAAJ,EAAkB;AACR,4CADQ,GACiB,KAAK,GAAL,CAAS,gBAAT,CAA0B,YAA1B,EAAwC,IAAI,CAAC,KAA7C,CADjB;AAEd,4BAAM,CAAC,MAAP,CAAc,IAAd,EAAoB,sBAApB;AACH;;AAN0F,sDAOpF,IAPoF;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aAAvC;AAAA,SAAjC,GAQnB;AApBD,OAAP;AAsBH;;;0CAEqB,Q,EAA4B,Q,EAAuB;AACrE,UAAM,aAAa,GAAG,KAAK,mBAAL,CAAyB,QAAzB,EAAmC,QAAnC,CAAtB;AACA,UAAM,SAAS,GAAG,IAAI,iCAAJ,EAAlB;;AAFqE,kDAG9C,KAAK,aAAL,CAAmB,QAAnB,CAH8C;AAAA;;AAAA;AAGrE,+DAAqD;AAAA,cAA1C,QAA0C;AACjD,mBAAS,CAAC,IAAV,CAAe,MAAM,CAAC,SAAP,CAAiB,qBAAjB,CAAuC,QAAvC,EAAiD,aAAjD,CAAf;AACH;AALoE;AAAA;AAAA;AAAA;AAAA;;AAMrE,aAAO,SAAP;AACH;;;wCAE6B,Q,EAA4B,Q,EAAuB;AAAA;;AAC7E,aAAO;AACH,oBAAY,EAAE,sBAAO,KAAP,EAAc,QAAd,EAAwB,KAAxB;AAAA,iBAAiC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBACtC,KAAK,UAAL,CAAgB,QAAhB,EAA0B,qBAAqB,CAAC,SAAtB,CAAgC,KAAhC,CAA1B,CADsC;AAAA;AAAA;AAAA;;AAAA,sDAEhC,SAFgC;;AAAA;AAIrC,0BAJqC,GAI5B,KAAK,GAAL,CAAS,4BAAT,CAAsC,KAAtC,EAA6C,QAA7C,CAJ4B;AAAA;AAK7B,2BAAM,QAAQ,CAAC,YAAT,CAAsB,MAAtB,EAA8B,KAA9B,CAAN;;AAL6B;AAKrC,yBALqC;AAAA,sDAMpC,KAAK,IAAI,KAAK,GAAL,CAAS,OAAT,CAAiB,KAAjB,CAN2B;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aAAjC;AAAA;AADX,OAAP;AAUH;;;kDAE6B,Q,EAA4B,Q,EAA+D;AAAA,yCAA3B,iBAA2B;AAA3B,yBAA2B;AAAA;;AACrH,UAAM,qBAAqB,GAAG,KAAK,2BAAL,cAAiC,QAAjC,EAA2C,QAA3C,SAAwD,iBAAxD,EAA9B;AACA,UAAM,SAAS,GAAG,IAAI,iCAAJ,EAAlB;;AAFqH,kDAG9F,KAAK,aAAL,CAAmB,QAAnB,CAH8F;AAAA;;AAAA;AAGrH,+DAAqD;AAAA,cAA1C,QAA0C;AACjD,mBAAS,CAAC,IAAV,CAAe,MAAM,CAAC,SAAP,CAAiB,6BAAjB,CAA+C,QAA/C,EAAyD,qBAAzD,CAAf;AACH;AALoH;AAAA;AAAA;AAAA;AAAA;;AAMrH,aAAO,SAAP;AACH;;;gDAEqC,Q,EAA4B,Q,EAA+D;AAAA;;AAAA,yCAA3B,iBAA2B;AAA3B,yBAA2B;AAAA;;AAC7H,UAAM,8BAA8B,sBAAQ,QAAQ,CAAC,iBAAT,IAA8B,iBAA9B,IAAmD,EAA3D,CAApC,CAD6H,CAE7H;;;AACA,aAAO;AACH,sCAA8B,EAA9B,8BADG;AAEH,4BAAoB,EAAE,8BAAO,KAAP,EAAc,QAAd,EAAwB,KAAxB;AAAA,iBAAiC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBAC9C,KAAK,UAAL,CAAgB,QAAhB,EAA0B,qBAAqB,CAAC,SAAtB,CAAgC,KAAhC,CAA1B,CAD8C;AAAA;AAAA;AAAA;;AAAA,sDAExC,SAFwC;;AAAA;AAI7C,0BAJ6C,GAIpC,KAAK,GAAL,CAAS,4BAAT,CAAsC,KAAtC,EAA6C,QAA7C,CAJoC;AAAA;AAK7B,2BAAM,QAAQ,CAAC,oBAAT,CAA8B,MAA9B,EAAsC,KAAtC,EAA6C;AACrE;AACA,iCAAW,EAAE,CAFwD;AAGrE,iCAAW,EAAE;AAHwD,qBAA7C,CAAN;;AAL6B;AAK7C,iCAL6C;AAAA,sDAU5C,aAAa,IAAI,KAAK,GAAL,CAAS,eAAT,CAAyB,aAAzB,CAV2B;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aAAjC;AAAA;AAFnB,OAAP;AAeH;;;+CAE0B,Q,EAA4B,Q,EAA4B;AAC/E,UAAM,kBAAkB,GAAG,KAAK,wBAAL,CAA8B,QAA9B,EAAwC,QAAxC,CAA3B;AACA,UAAM,SAAS,GAAG,IAAI,iCAAJ,EAAlB;;AAF+E,kDAGxD,KAAK,aAAL,CAAmB,QAAnB,CAHwD;AAAA;;AAAA;AAG/E,+DAAqD;AAAA,cAA1C,QAA0C;AACjD,mBAAS,CAAC,IAAV,CAAe,MAAM,CAAC,SAAP,CAAiB,0BAAjB,CAA4C,QAA5C,EAAsD,kBAAtD,CAAf;AACH;AAL8E;AAAA;AAAA;AAAA;AAAA;;AAM/E,aAAO,SAAP;AACH;;;6CAEkC,Q,EAA4B,Q,EAA4B;AAAA;;AACvF,aAAO;AACH,yBAAiB,EAAE,2BAAO,KAAP,EAAc,QAAd,EAAwB,KAAxB;AAAA,iBAAiC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBAC3C,KAAK,UAAL,CAAgB,QAAhB,EAA0B,qBAAqB,CAAC,SAAtB,CAAgC,KAAhC,CAA1B,CAD2C;AAAA;AAAA;AAAA;;AAAA,sDAErC,SAFqC;;AAAA;AAI1C,0BAJ0C,GAIjC,KAAK,GAAL,CAAS,4BAAT,CAAsC,KAAtC,EAA6C,QAA7C,CAJiC;AAAA;AAKjC,2BAAM,QAAQ,CAAC,iBAAT,CAA2B,MAA3B,EAAmC,KAAnC,CAAN;;AALiC;AAK1C,0BAL0C;AAAA,sDAMzC,MAAM,IAAI,KAAK,GAAL,CAAS,kBAAT,CAA4B,MAA5B,CAN+B;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aAAjC;AAAA;AADhB,OAAP;AAUH;;;8CAEyB,Q,EAA4B,Q,EAA2B;AAC7E,UAAM,iBAAiB,GAAG,KAAK,uBAAL,CAA6B,QAA7B,EAAuC,QAAvC,CAA1B;AACA,UAAM,SAAS,GAAG,IAAI,iCAAJ,EAAlB;;AAF6E,kDAGtD,KAAK,aAAL,CAAmB,QAAnB,CAHsD;AAAA;;AAAA;AAG7E,+DAAqD;AAAA,cAA1C,QAA0C;AACjD,mBAAS,CAAC,IAAV,CAAe,MAAM,CAAC,SAAP,CAAiB,yBAAjB,CAA2C,QAA3C,EAAqD,iBAArD,CAAf;AACH;AAL4E;AAAA;AAAA;AAAA;AAAA;;AAM7E,aAAO,SAAP;AACH;;;4CAEiC,Q,EAA4B,Q,EAA2B;AAAA;;AACrF,aAAO;AACH,yBAAiB,EAAE,2BAAO,KAAP,EAAc,QAAd,EAAwB,OAAxB,EAAiC,KAAjC;AAAA,iBAA0C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBACpD,KAAK,UAAL,CAAgB,QAAhB,EAA0B,qBAAqB,CAAC,SAAtB,CAAgC,KAAhC,CAA1B,CADoD;AAAA;AAAA;AAAA;;AAAA,sDAE9C,SAF8C;;AAAA;AAInD,0BAJmD,GAI1C,KAAK,GAAL,CAAS,iBAAT,CAA2B,KAA3B,EAAkC,QAAlC,EAA4C,OAA5C,CAJ0C;AAAA;AAK1C,2BAAM,QAAQ,CAAC,iBAAT,CAA2B,MAA3B,EAAmC,KAAnC,CAAN;;AAL0C;AAKnD,0BALmD;AAAA,sDAMlD,MAAM,IAAI,KAAK,GAAL,CAAS,YAAT,CAAsB,MAAtB,CANwC;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aAA1C;AAAA;AADhB,OAAP;AAUH;;;sDAEiC,Q,EAA4B,Q,EAAmC;AAC7F,UAAM,yBAAyB,GAAG,KAAK,+BAAL,CAAqC,QAArC,EAA+C,QAA/C,CAAlC;AACA,UAAM,SAAS,GAAG,IAAI,iCAAJ,EAAlB;;AAF6F,kDAGtE,KAAK,aAAL,CAAmB,QAAnB,CAHsE;AAAA;;AAAA;AAG7F,+DAAqD;AAAA,cAA1C,QAA0C;AACjD,mBAAS,CAAC,IAAV,CAAe,MAAM,CAAC,SAAP,CAAiB,iCAAjB,CAAmD,QAAnD,EAA6D,yBAA7D,CAAf;AACH;AAL4F;AAAA;AAAA;AAAA;AAAA;;AAM7F,aAAO,SAAP;AACH;;;oDAEyC,Q,EAA4B,Q,EAAmC;AAAA;;AACrG,aAAO;AACH,iCAAyB,EAAE,mCAAO,KAAP,EAAc,QAAd,EAAwB,KAAxB;AAAA,iBAAiC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBACnD,KAAK,UAAL,CAAgB,QAAhB,EAA0B,qBAAqB,CAAC,SAAtB,CAAgC,KAAhC,CAA1B,CADmD;AAAA;AAAA;AAAA;;AAAA,sDAE7C,SAF6C;;AAAA;AAIlD,0BAJkD,GAIzC,KAAK,GAAL,CAAS,4BAAT,CAAsC,KAAtC,EAA6C,QAA7C,CAJyC;AAAA;AAKzC,2BAAM,QAAQ,CAAC,yBAAT,CAAmC,MAAnC,EAA2C,KAA3C,CAAN;;AALyC;AAKlD,0BALkD;AAAA,sDAMjD,MAAM,IAAI,KAAK,GAAL,CAAS,oBAAT,CAA8B,MAA9B,CANuC;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aAAjC;AAAA;AADxB,OAAP;AAUH;;;mDAE8B,Q,EAA4B,Q,EAAgC;AACvF,UAAM,sBAAsB,GAAG,KAAK,4BAAL,CAAkC,QAAlC,EAA4C,QAA5C,CAA/B;AACA,UAAM,SAAS,GAAG,IAAI,iCAAJ,EAAlB;;AAFuF,kDAGhE,KAAK,aAAL,CAAmB,QAAnB,CAHgE;AAAA;;AAAA;AAGvF,+DAAqD;AAAA,cAA1C,QAA0C;AACjD,mBAAS,CAAC,IAAV,CAAe,MAAM,CAAC,SAAP,CAAiB,8BAAjB,CAAgD,QAAhD,EAA0D,sBAA1D,CAAf;AACH;AALsF;AAAA;AAAA;AAAA;AAAA;;AAMvF,aAAO,SAAP;AACH;;;iDAEsC,Q,EAA4B,Q,EAAgC;AAAA;;AAC/F,aAAO;AACH,8BAAsB,EAAE,gCAAO,KAAP,EAAc,KAAd;AAAA,iBAAuB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBACtC,KAAK,UAAL,CAAgB,QAAhB,EAA0B,qBAAqB,CAAC,SAAtB,CAAgC,KAAhC,CAA1B,CADsC;AAAA;AAAA;AAAA;;AAAA,sDAEhC,SAFgC;;AAAA;AAIrC,0BAJqC,GAI5B,KAAK,GAAL,CAAS,sBAAT,CAAgC,KAAhC,CAJ4B;AAAA;AAK5B,2BAAM,QAAQ,CAAC,sBAAT,CAAgC,MAAhC,EAAwC,KAAxC,CAAN;;AAL4B;AAKrC,0BALqC;AAAA,sDAMpC,MAAM,IAAI,KAAK,GAAL,CAAS,iBAAT,CAA2B,MAA3B,CAN0B;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aAAvB;AAAA;AADrB,OAAP;AAUH;;;gDAE2B,Q,EAA4B,Q,EAA4B;AAChF,UAAM,kBAAkB,GAAG,KAAK,wBAAL,CAA8B,QAA9B,EAAwC,QAAxC,CAA3B;AACA,UAAM,SAAS,GAAG,IAAI,iCAAJ,EAAlB;;AAFgF,kDAGzD,KAAK,aAAL,CAAmB,QAAnB,CAHyD;AAAA;;AAAA;AAGhF,+DAAqD;AAAA,cAA1C,QAA0C;AACjD,mBAAS,CAAC,IAAV,CAAe,MAAM,CAAC,SAAP,CAAiB,0BAAjB,CAA4C,QAA5C,EAAsD,kBAAtD,CAAf;AACH;AAL+E;AAAA;AAAA;AAAA;AAAA;;AAMhF,aAAO,SAAP;AACH;;;6CAEkC,Q,EAA4B,Q,EAA4B;AAAA;;AACvF,aAAO;AACH,0BAAkB,EAAE,4BAAO,KAAP,EAAc,KAAd,EAAqB,OAArB,EAA8B,KAA9B;AAAA,iBAAuC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBAClD,KAAK,UAAL,CAAgB,QAAhB,EAA0B,qBAAqB,CAAC,SAAtB,CAAgC,KAAhC,CAA1B,CADkD;AAAA;AAAA;AAAA;;AAAA,sDAG5C,SAH4C;;AAAA;AAKjD,0BALiD,GAKxC,KAAK,GAAL,CAAS,kBAAT,CAA4B,KAA5B,EAAmC,KAAnC,EAA0C,OAA1C,CALwC;AAAA;AAMxC,2BAAM,QAAQ,CAAC,kBAAT,CAA4B,MAA5B,EAAoC,KAApC,CAAN;;AANwC;AAMjD,0BANiD;AAAA,sDAQhD,MAAM,IAAI,KAAK,GAAL,CAAS,aAAT,CAAuB,MAAvB,CAAV,IAA4C,SARI;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aAAvC;AAAA;AADjB,OAAP;AAYH;;;6CAEwB,Q,EAA4B,Q,EAA0B;AAC3E,UAAM,gBAAgB,GAAG,KAAK,sBAAL,CAA4B,QAA5B,EAAsC,QAAtC,CAAzB;AACA,UAAM,SAAS,GAAG,IAAI,iCAAJ,EAAlB;;AAF2E,kDAGpD,KAAK,aAAL,CAAmB,QAAnB,CAHoD;AAAA;;AAAA;AAG3E,+DAAqD;AAAA,cAA1C,QAA0C;AACjD,mBAAS,CAAC,IAAV,CAAe,MAAM,CAAC,SAAP,CAAiB,wBAAjB,CAA0C,QAA1C,EAAoD,gBAApD,CAAf;AACH;AAL0E;AAAA;AAAA;AAAA;AAAA;;AAM3E,aAAO,SAAP;AACH;;;2CAEgC,Q,EAA4B,Q,EAA0B;AAAA;;AACnF,aAAO;AACH,yBAAiB,EAAE,2BAAO,KAAP,EAAc,KAAd;AAAA,iBAAuB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBACjC,KAAK,UAAL,CAAgB,QAAhB,EAA0B,qBAAqB,CAAC,SAAtB,CAAgC,KAAhC,CAA1B,CADiC;AAAA;AAAA;AAAA;;AAAA,uDAE3B,SAF2B;;AAAA;AAIhC,0BAJgC,GAIvB,KAAK,GAAL,CAAS,gBAAT,CAA0B,KAA1B,CAJuB;AAAA;AAKvB,2BAAM,QAAQ,CAAC,iBAAT,CAA2B,MAA3B,EAAmC,KAAnC,CAAN;;AALuB;AAKhC,0BALgC;AAAA,uDAM/B,MAAM,IAAI,KAAK,GAAL,CAAS,YAAT,CAAsB,MAAtB,CANqB;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aAAvB;AAAA,SADhB;AASH,uBAAe,EAAE,QAAQ,CAAC,eAAT,GAA2B,UAAO,KAAP,EAAc,QAAd,EAAwB,KAAxB;AAAA,iBAAiC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBACpE,KAAK,UAAL,CAAgB,QAAhB,EAA0B,qBAAqB,CAAC,SAAtB,CAAgC,KAAhC,CAA1B,CADoE;AAAA;AAAA;AAAA;;AAAA,uDAE9D,QAF8D;;AAAA;AAInE,oCAJmE,GAIhD,KAAK,GAAL,CAAS,UAAT,CAAoB,QAApB,CAJgD;AAAA;AAK1D,2BAAM,QAAQ,CAAC,eAAT,CAA0B,gBAA1B,EAA4C,KAA5C,CAAN;;AAL0D;AAKnE,0BALmE;;AAMzE,wBAAI,MAAJ,EAAY;AACF,sCADE,GACiB,KAAK,GAAL,CAAS,UAAT,CAAoB,MAApB,CADjB;AAER,4BAAM,CAAC,MAAP,CAAc,QAAd,EAAwB,gBAAxB;AACH;;AATwE,uDAUlE,QAVkE;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aAAjC;AAAA,SAA3B,GAWZ,UAAC,CAAD,EAAI,QAAJ;AAAA,iBAAiB,QAAjB;AAAA;AApBF,OAAP;AAsBH;;;2DAEsC,Q,EAA4B,Q,EAAwC;AACvG,UAAM,8BAA8B,GAAG,KAAK,oCAAL,CAA0C,QAA1C,EAAoD,QAApD,CAAvC;AACA,UAAM,SAAS,GAAG,IAAI,iCAAJ,EAAlB;;AAFuG,mDAGhF,KAAK,aAAL,CAAmB,QAAnB,CAHgF;AAAA;;AAAA;AAGvG,kEAAqD;AAAA,cAA1C,QAA0C;AACjD,mBAAS,CAAC,IAAV,CAAe,MAAM,CAAC,SAAP,CAAiB,sCAAjB,CAAwD,QAAxD,EAAkE,8BAAlE,CAAf;AACH;AALsG;AAAA;AAAA;AAAA;AAAA;;AAMvG,aAAO,SAAP;AACH;;;yDAE8C,Q,EAA4B,Q,EAAwC;AAAA;;AAC/G,aAAO;AACH,sCAA8B,EAAE,wCAAO,KAAP,EAAc,OAAd,EAAuB,KAAvB;AAAA,iBAAgC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBACvD,KAAK,UAAL,CAAgB,QAAhB,EAA0B,qBAAqB,CAAC,SAAtB,CAAgC,KAAhC,CAA1B,CADuD;AAAA;AAAA;AAAA;;AAAA,uDAEjD,SAFiD;;AAAA;AAItD,0BAJsD,GAI7C,KAAK,GAAL,CAAS,0BAAT,CAAoC,KAApC,EAA2C,OAA3C,CAJ6C;AAAA;AAK7C,2BAAM,QAAQ,CAAC,8BAAT,CAAwC,MAAxC,EAAgD,KAAhD,CAAN;;AAL6C;AAKtD,0BALsD;AAAA,uDAMrD,MAAM,IAAI,KAAK,GAAL,CAAS,WAAT,CAAqB,MAArB,CAN2C;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aAAhC;AAAA;AAD7B,OAAP;AAUH;;;gEAE2C,Q,EAA4B,Q,EAA6C;AACjH,UAAM,mCAAmC,GAAG,KAAK,yCAAL,CAA+C,QAA/C,EAAyD,QAAzD,CAA5C;AACA,UAAM,SAAS,GAAG,IAAI,iCAAJ,EAAlB;;AAFiH,mDAG1F,KAAK,aAAL,CAAmB,QAAnB,CAH0F;AAAA;;AAAA;AAGjH,kEAAqD;AAAA,cAA1C,QAA0C;AACjD,mBAAS,CAAC,IAAV,CAAe,MAAM,CAAC,SAAP,CAAiB,2CAAjB,CAA6D,QAA7D,EAAuE,mCAAvE,CAAf;AACH;AALgH;AAAA;AAAA;AAAA;AAAA;;AAMjH,aAAO,SAAP;AACH;;;8DAEyC,Q,EAA4B,Q,EAA6C;AAAA;;AAC/G,aAAO;AACH,2CAAmC,EAAE,6CAAO,KAAP,EAAc,KAAd,EAAqB,OAArB,EAA8B,KAA9B;AAAA,iBAAuC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBACnE,KAAK,UAAL,CAAgB,QAAhB,EAA0B,qBAAqB,CAAC,SAAtB,CAAgC,KAAhC,CAA1B,CADmE;AAAA;AAAA;AAAA;;AAAA,uDAE7D,SAF6D;;AAAA;AAIlE,0BAJkE,GAIzD,KAAK,GAAL,CAAS,+BAAT,CAAyC,KAAzC,EAAgD,KAAhD,EAAuD,OAAvD,CAJyD;AAAA;AAKzD,2BAAM,QAAQ,CAAC,mCAAT,CAA6C,MAA7C,EAAqD,KAArD,CAAN;;AALyD;AAKlE,0BALkE;AAAA,uDAMjE,MAAM,IAAI,KAAK,GAAL,CAAS,WAAT,CAAqB,MAArB,CANuD;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aAAvC;AAAA;AADlC,OAAP;AAUH;;;yDAEoC,Q,EAA4B,Q,EAAwC,qB,EAAgE;AAAA,yCAA9B,oBAA8B;AAA9B,4BAA8B;AAAA;;AACrK,UAAM,4BAA4B,GAAG,KAAK,kCAAL,cAAwC,QAAxC,EAAkD,QAAlD,EAA4D,qBAA5D,SAAsF,oBAAtF,EAArC;AACA,UAAM,SAAS,GAAG,IAAI,iCAAJ,EAAlB;;AAFqK,mDAG9I,KAAK,aAAL,CAAmB,QAAnB,CAH8I;AAAA;;AAAA;AAGrK,kEAAqD;AAAA,cAA1C,QAA0C;AACjD,mBAAS,CAAC,IAAV,CAAe,MAAM,CAAC,SAAP,CAAiB,oCAAjB,CAAsD,QAAtD,EAAgE,4BAAhE,CAAf;AACH;AALoK;AAAA;AAAA;AAAA;AAAA;;AAMrK,aAAO,SAAP;AACH;;;uDAE4C,Q,EAA4B,Q,EAAwC,qB,EAAgE;AAAA;;AAAA,yCAA9B,oBAA8B;AAA9B,4BAA8B;AAAA;;AAC7K,UAAM,2BAA2B,GAAG,CAAC,qBAAD,EAAwB,MAAxB,CAA+B,oBAA/B,CAApC;AACA,aAAO;AACH,mCAA2B,EAA3B,2BADG;AAEH,oCAA4B,EAAE,sCAAO,KAAP,EAAc,QAAd,EAAwB,EAAxB,EAA4B,OAA5B,EAAqC,KAArC;AAAA,iBAA8C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBACnE,KAAK,UAAL,CAAgB,QAAhB,EAA0B,qBAAqB,CAAC,SAAtB,CAAgC,KAAhC,CAA1B,CADmE;AAAA;AAAA;AAAA;;AAAA,uDAE7D,SAF6D;;AAAA;AAIlE,0BAJkE,GAIzD,KAAK,GAAL,CAAS,gCAAT,CAA0C,KAA1C,EAAiD,QAAjD,EAA2D,EAA3D,EAA+D,OAA/D,CAJyD;AAAA;AAKzD,2BAAM,QAAQ,CAAC,4BAAT,CAAsC,MAAtC,EAA8C,KAA9C,CAAN;;AALyD;AAKlE,0BALkE;AAAA,uDAMjE,MAAM,IAAI,KAAK,GAAL,CAAS,WAAT,CAAqB,MAArB,CANuD;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aAA9C;AAAA;AAF3B,OAAP;AAWH;;;2CAEsB,Q,EAA4B,Q,EAAwB;AACvE,UAAM,cAAc,GAAG,KAAK,oBAAL,CAA0B,QAA1B,EAAoC,QAApC,CAAvB;AACA,UAAM,SAAS,GAAG,IAAI,iCAAJ,EAAlB;;AAFuE,mDAGhD,KAAK,aAAL,CAAmB,QAAnB,CAHgD;AAAA;;AAAA;AAGvE,kEAAqD;AAAA,cAA1C,QAA0C;AACjD,mBAAS,CAAC,IAAV,CAAe,MAAM,CAAC,SAAP,CAAiB,sBAAjB,CAAwC,QAAxC,EAAkD,cAAlD,CAAf;AACH;AALsE;AAAA;AAAA;AAAA;AAAA;;AAMvE,aAAO,SAAP;AACH;;;yCAE8B,Q,EAA4B,Q,EAAwB;AAAA;;AAC/E,aAAO;AACH,0BAAkB,EAAE,4BAAO,KAAP,EAAc,QAAd,EAAwB,OAAxB,EAAiC,KAAjC;AAAA,iBAA0C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBACrD,KAAK,UAAL,CAAgB,QAAhB,EAA0B,qBAAqB,CAAC,SAAtB,CAAgC,KAAhC,CAA1B,CADqD;AAAA;AAAA;AAAA;;AAAA,uDAE/C,SAF+C;;AAAA;AAIpD,0BAJoD,GAI3C,KAAK,GAAL,CAAS,cAAT,CAAwB,KAAxB,EAA+B,QAA/B,EAAyC,OAAzC,CAJ2C;AAAA;AAK3C,2BAAM,QAAQ,CAAC,kBAAT,CAA4B,MAA5B,EAAoC,KAApC,CAAN;;AAL2C;AAKpD,0BALoD;AAAA,uDAMnD,MAAM,IAAI,KAAK,GAAL,CAAS,eAAT,CAAyB,MAAzB,CANyC;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aAA1C;AAAA;AADjB,OAAP;AAUH;;;iDAE4B,Q,EAA4B,Q,EAA8B;AACnF,UAAM,YAAY,GAAG,KAAK,0BAAL,CAAgC,QAAhC,EAA0C,QAA1C,CAArB;AACA,UAAM,SAAS,GAAG,IAAI,iCAAJ,EAAlB;;AAFmF,mDAG5D,KAAK,aAAL,CAAmB,QAAnB,CAH4D;AAAA;;AAAA;AAGnF,kEAAqD;AAAA,cAA1C,QAA0C;AACjD,mBAAS,CAAC,IAAV,CAAe,MAAM,CAAC,SAAP,CAAiB,oBAAjB,CAAsC,QAAtC,EAAgD,YAAhD,CAAf;AACH;AALkF;AAAA;AAAA;AAAA;AAAA;;AAMnF,aAAO,SAAP;AACH;;;+CAEoC,Q,EAA4B,Q,EAA8B;AAAA;;AAC3F,aAAO;AACH,oBAAY,EAAE,sBAAO,KAAP,EAAc,KAAd;AAAA,iBAAuB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBAC5B,KAAK,UAAL,CAAgB,QAAhB,EAA0B,qBAAqB,CAAC,SAAtB,CAAgC,KAAhC,CAA1B,CAD4B;AAAA;AAAA;AAAA;;AAAA,uDAEtB,SAFsB;;AAAA;AAI3B,0BAJ2B,GAIlB,KAAK,GAAL,CAAS,oBAAT,CAA8B,KAA9B,CAJkB;AAAA;AAKlB,2BAAM,QAAQ,CAAC,oBAAT,CAA8B,MAA9B,EAAsC,KAAtC,CAAN;;AALkB;AAK3B,0BAL2B;AAAA,uDAM1B,MAAM,IAAI,KAAK,GAAL,CAAS,eAAT,CAAyB,MAAzB,CANgB;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aAAvB;AAAA,SADX;AASH,mBAAW,EAAE,qBAAO,IAAP,EAAqC,KAArC;AAAA,iBAA8C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0BAGnD,QAAQ,CAAC,mBAAT,KAAiC,IAAI,CAAC,GAAL,KAAa,IAAb,IAAqB,IAAI,CAAC,GAAL,KAAa,SAAnE,CAHmD;AAAA;AAAA;AAAA;;AAI7C,gCAJ6C,GAI9B,KAAK,GAAL,CAAS,cAAT,CAAwB,IAAxB,CAJ8B;AAAA;AAKpC,2BAAM,QAAQ,CAAC,mBAAT,CAA6B,YAA7B,EAA2C,KAA3C,CAAN;;AALoC;AAK7C,0BAL6C;;AAMnD,wBAAI,MAAJ,EAAY;AACF,kCADE,GACa,KAAK,GAAL,CAAS,cAAT,CAAwB,MAAxB,CADb;AAER,4BAAM,CAAC,MAAP,CAAc,IAAd,EAAoB,YAApB;AACH;;AATkD;AAAA,uDAWhD,IAXgD;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aAA9C;AAAA;AATV,OAAP;AAuBH;;;mDAE8B,Q,EAA4B,Q,EAAgC;AACvF,UAAM,sBAAsB,GAAG,KAAK,4BAAL,CAAkC,QAAlC,EAA4C,QAA5C,CAA/B;AACA,UAAM,SAAS,GAAG,IAAI,iCAAJ,EAAlB;;AAFuF,mDAGhE,KAAK,aAAL,CAAmB,QAAnB,CAHgE;AAAA;;AAAA;AAGvF,kEAAqD;AAAA,cAA1C,QAA0C;AACjD,mBAAS,CAAC,IAAV,CAAe,MAAM,CAAC,SAAP,CAAiB,8BAAjB,CAAgD,QAAhD,EAA0D,sBAA1D,CAAf;AACH;AALsF;AAAA;AAAA;AAAA;AAAA;;AAMvF,aAAO,SAAP;AACH;;;iDAEsC,Q,EAA4B,Q,EAAgC;AAAA;;AAC/F,aAAO;AACH,6BAAqB,EAAE,+BAAO,KAAP,EAAc,QAAd,EAAwB,KAAxB;AAAA,iBAAiC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBAC/C,KAAK,UAAL,CAAgB,QAAhB,EAA0B,qBAAqB,CAAC,SAAtB,CAAgC,KAAhC,CAA1B,CAD+C;AAAA;AAAA;AAAA;;AAAA,uDAEzC,SAFyC;;AAAA;AAI9C,0BAJ8C,GAIrC,KAAK,GAAL,CAAS,4BAAT,CAAsC,KAAtC,EAA6C,QAA7C,CAJqC;AAAA;AAKrC,2BAAM,QAAQ,CAAC,qBAAT,CAA+B,MAA/B,EAAuC,KAAvC,CAAN;;AALqC;AAK9C,0BAL8C;AAAA,uDAM7C,MAAM,IAAI,KAAK,GAAL,CAAS,kBAAT,CAA4B,MAA5B,CANmC;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aAAjC;AAAA;AADpB,OAAP;AAUH;;;mDAE8B,Q,EAA4B,Q,EAAgC;AACvF,UAAM,sBAAsB,GAAG,KAAK,4BAAL,CAAkC,QAAlC,EAA4C,QAA5C,CAA/B;AACA,UAAM,SAAS,GAAG,IAAI,iCAAJ,EAAlB;;AAFuF,mDAGhE,KAAK,aAAL,CAAmB,QAAnB,CAHgE;AAAA;;AAAA;AAGvF,kEAAqD;AAAA,cAA1C,QAA0C;AACjD,mBAAS,CAAC,IAAV,CAAe,MAAM,CAAC,SAAP,CAAiB,8BAAjB,CAAgD,QAAhD,EAA0D,sBAA1D,CAAf;AACH;AALsF;AAAA;AAAA;AAAA;AAAA;;AAMvF,aAAO,SAAP;AACH;;;iDAEsC,Q,EAA4B,Q,EAAgC;AAAA;;AAC/F,aAAO;AACH,6BAAqB,EAAE,+BAAO,KAAP,EAAc,QAAd,EAAwB,KAAxB;AAAA,iBAAiC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBAC/C,KAAK,UAAL,CAAgB,QAAhB,EAA0B,qBAAqB,CAAC,SAAtB,CAAgC,KAAhC,CAA1B,CAD+C;AAAA;AAAA;AAAA;;AAAA,uDAEzC,SAFyC;;AAAA;AAI9C,0BAJ8C,GAIrC,KAAK,GAAL,CAAS,4BAAT,CAAsC,KAAtC,EAA6C,QAA7C,CAJqC;AAAA;AAKrC,2BAAM,QAAQ,CAAC,qBAAT,CAA+B,MAA/B,EAAuC,KAAvC,CAAN;;AALqC;AAK9C,0BAL8C;AAAA,uDAM7C,MAAM,IAAI,KAAK,GAAL,CAAS,kBAAT,CAA4B,MAA5B,CANmC;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aAAjC;AAAA;AADpB,OAAP;AAUH;;;0CAEqB,Q,EAA4B,Q,EAA+B;AAC7E,UAAM,qBAAqB,GAAG,KAAK,2BAAL,CAAiC,QAAjC,EAA2C,QAA3C,CAA9B;AACA,UAAM,SAAS,GAAG,IAAI,iCAAJ,EAAlB;;AAF6E,mDAGtD,KAAK,aAAL,CAAmB,QAAnB,CAHsD;AAAA;;AAAA;AAG7E,kEAAqD;AAAA,cAA1C,QAA0C;AACjD,mBAAS,CAAC,IAAV,CAAe,MAAM,CAAC,SAAP,CAAiB,qBAAjB,CAAuC,QAAvC,EAAiD,qBAAjD,CAAf;AACH;AAL4E;AAAA;AAAA;AAAA;AAAA;;AAM7E,aAAO,SAAP;AACH;;;gDAEqC,Q,EAA4B,Q,EAA+B;AAAA;;AAC7F,aAAO;AACH,6BAAqB,EAAE,+BAAO,KAAP,EAAc,KAAd;AAAA,iBAAuB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBACrC,KAAK,UAAL,CAAgB,QAAhB,EAA0B,qBAAqB,CAAC,SAAtB,CAAgC,KAAhC,CAA1B,CADqC;AAAA;AAAA;AAAA;;AAAA,uDAE/B,SAF+B;;AAAA;AAIpC,gCAJoC,GAIrB,KAAK,GAAL,CAAS,wBAAT,CAAkC,KAAlC,CAJqB;AAAA;AAK3B,2BAAM,QAAQ,CAAC,qBAAT,CAA+B;AAAE,kCAAY,EAAZ;AAAF,qBAA/B,EAAiD,KAAjD,CAAN;;AAL2B;AAKpC,0BALoC;AAAA,uDAMnC,MAAM,IAAI,KAAK,GAAL,CAAS,mBAAT,CAA6B,MAA7B,CANyB;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aAAvB;AAAA,SADpB;AASH,iCAAyB,EAAE,mCAAO,KAAP,EAAc,IAAd,EAAoB,KAApB;AAAA,iBAA6B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBAC/C,KAAK,UAAL,CAAgB,QAAhB,EAA0B,qBAAqB,CAAC,SAAtB,CAAgC,KAAhC,CAA1B,CAD+C;AAAA;AAAA;AAAA;;AAAA,uDAEzC,SAFyC;;AAAA;AAI9C,gCAJ8C,GAI/B,KAAK,GAAL,CAAS,wBAAT,CAAkC,KAAlC,CAJ+B;AAK9C,yBAL8C,GAKtC,KAAK,GAAL,CAAS,OAAT,CAAiB,IAAI,CAAC,KAAtB,CALsC;AAAA;AAMrC,2BAAM,QAAQ,CAAC,yBAAT,CAAmC;AACpD,kCAAY,EAAZ,YADoD;AAEpD,2BAAK,EAAE,IAAI,CAAC,KAFwC;AAGpD,2BAAK,EAAL;AAHoD,qBAAnC,EAIlB,KAJkB,CAAN;;AANqC;AAM9C,0BAN8C;AAAA,uDAW7C,MAAM,IAAI,KAAK,GAAL,CAAS,oBAAT,CAA8B,MAA9B,CAXmC;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aAA7B;AAAA;AATxB,OAAP;AAuBH;;;iDAE4B,Q,EAA4B,Q,EAA8B;AACnF,UAAM,oBAAoB,GAAG,KAAK,0BAAL,CAAgC,QAAhC,EAA0C,QAA1C,CAA7B;AACA,UAAM,SAAS,GAAG,IAAI,iCAAJ,EAAlB;;AAFmF,mDAG5D,KAAK,aAAL,CAAmB,QAAnB,CAH4D;AAAA;;AAAA;AAGnF,kEAAqD;AAAA,cAA1C,QAA0C;AACjD,mBAAS,CAAC,IAAV,CAAe,MAAM,CAAC,SAAP,CAAiB,4BAAjB,CAA8C,QAA9C,EAAwD,oBAAxD,CAAf;AACH;AALkF;AAAA;AAAA;AAAA;AAAA;;AAMnF,aAAO,SAAP;AACH;;;+CAEoC,Q,EAA4B,Q,EAA8B;AAAA;;AAC3F,aAAO;AACH,4BAAoB,EAAE,8BAAO,KAAP,EAAc,OAAd,EAAuB,KAAvB;AAAA,iBAAgC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBAC7C,KAAK,UAAL,CAAgB,QAAhB,EAA0B,qBAAqB,CAAC,SAAtB,CAAgC,KAAhC,CAA1B,CAD6C;AAAA;AAAA;AAAA;;AAAA,uDAEvC,SAFuC;;AAAA;AAI5C,gCAJ4C,GAI7B,KAAK,GAAL,CAAS,wBAAT,CAAkC,KAAlC,CAJ6B;AAAA;AAKnC,2BAAM,QAAQ,CAAC,oBAAT,CAA8B;AAC/C,kCAAY,EAAZ;AAD+C,qBAA9B,EAElB,KAFkB,CAAN;;AALmC;AAK5C,0BAL4C;AAAA,uDAQ3C,MAAM,IAAI,KAAK,GAAL,CAAS,eAAT,CAAyB,MAAzB,CARiC;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aAAhC;AAAA;AADnB,OAAP;AAYH;;;+BAEoB,Q,EAAsD,K,EAA4B;AAAA;;AACnG,UAAI,KAAK,CAAC,OAAN,CAAc,QAAd,CAAJ,EAA6B;AACzB,eAAO,QAAQ,CAAC,IAAT,CAAc,gBAAM;AAAA,iBAAI,OAAI,CAAC,UAAL,CAAgB,MAAhB,EAAwB,KAAxB,CAAJ;AAAA,SAApB,CAAP;AACH;;AACD,UAAI,0BAAe,EAAf,CAAkB,QAAlB,CAAJ,EAAiC;AAC7B,YAAI,CAAC,CAAC,QAAQ,CAAC,QAAX,IAAuB,QAAQ,CAAC,QAAT,KAAsB,KAAK,CAAC,UAAvD,EAAmE;AAC/D,iBAAO,KAAP;AACH;;AACD,YAAI,CAAC,CAAC,QAAQ,CAAC,MAAX,IAAqB,QAAQ,CAAC,MAAT,KAAoB,KAAK,CAAC,GAAN,CAAU,MAAvD,EAA+D;AAC3D,iBAAO,KAAP;AACH;;AACD,YAAI,CAAC,CAAC,QAAQ,CAAC,OAAX,IAAsB,CAAC,QAAQ,CAAC,QAAQ,CAAC,OAAV,EAAmB,KAAK,CAAC,GAAN,CAAU,IAA7B,CAAnC,EAAuE;AACnE,iBAAO,KAAP;AACH;;AACD,eAAO,IAAP;AACH;;AACD,aAAO,QAAQ,KAAK,KAAK,CAAC,UAA1B;AACH;;;kCAEuB,Q,EAAoD;AACxE,UAAM,SAAS,GAAG,IAAI,GAAJ,EAAlB;;AACA,UAAI,KAAK,CAAC,OAAN,CAAc,QAAd,CAAJ,EAA6B;AAAA,qDACJ,QADI;AAAA;;AAAA;AACzB,oEAA+B;AAAA,gBAApB,MAAoB;AAC3B,qBAAS,CAAC,GAAV,CAAc,KAAK,qBAAL,CAA2B,MAA3B,CAAd;AACH;AAHwB;AAAA;AAAA;AAAA;AAAA;AAI5B,OAJD,MAIO;AACH,iBAAS,CAAC,GAAV,CAAc,KAAK,qBAAL,CAA2B,QAA3B,CAAd;AACH;;AACD,aAAO,SAAP;AACH;;;0CAE+B,Q,EAAiC;AAC7D,UAAI,0BAAe,EAAf,CAAkB,QAAlB,CAAJ,EAAiC;AAC7B,YAAI,CAAC,QAAQ,CAAC,QAAd,EAAwB;AACpB,iBAAO,GAAP;AACH;;AACD,eAAO,QAAQ,CAAC,QAAhB;AACH;;AACD,aAAO,QAAP;AACH;;;;;;AAjgBL,0C;;;;;;;;;;;;;;;;;AC7CA;;;;;AAIA;;AACA;;AACA;;AACA;;AACA;;AACA;;AAQA,IAAiB,cAAjB;;AAAA,WAAiB,cAAjB,EAA+B;AAK3B,WAAgB,MAAhB,CAAuB,MAAvB,EAAyF;AAAA,QAArB,OAAqB,uEAAF,EAAE;AACrF,QAAM,GAAG,GAAG,IAAI,4CAAJ,EAAZ;AACA,QAAM,GAAG,GAAG,IAAI,4CAAJ,EAAZ;AACA,WAAO;AACH,cAAQ,EAAE,IAAI,gCAAJ,CAAmB,MAAnB,CADP;AAEH,eAAS,EAAE,IAAI,kCAAJ,CAAoB,GAApB,EAAyB,GAAzB,CAFR;AAGH,eAAS,EAAE,IAAI,kCAAJ,CAAoB,GAApB,EAAyB,GAAzB,EAA8B,OAAO,CAAC,OAAtC,CAHR;AAIH,YAAM,EAAE,IAAI,8BAAJ;AAJL,KAAP;AAMH;;AATe,0BAAM,MAAN;;AAUhB,WAAgB,OAAhB,CAAwB,MAAxB,EAA0F;AAAA,QAArB,OAAqB,uEAAF,EAAE;AACtF,QAAM,QAAQ,GAAG,MAAM,CAAC,MAAD,EAAS,OAAT,CAAvB;AACA,wBAAS,OAAT,CAAiB,QAAjB;AACA,WAAO,QAAP;AACH;;AAJe,2BAAO,OAAP;;AAKhB,WAAgB,GAAhB,GAAmB;AACf,WAAO,oBAAS,GAAT,EAAP;AACH;;AAFe,uBAAG,GAAH;AAGnB,CAvBD,EAAiB,cAAc,GAAd,oDAAc,EAAd,CAAjB,E;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACZA;;IAIa,e;AAOT,2BACuB,GADvB,EAEuB,GAFvB,EAG4C;AAAA;;AAAA,QAA9B,QAA8B,uEAAJ,IAAI;;AAAA;;AAFrB;AACA;AACT;AARK,qBAAY,IAAI,GAAJ,EAAZ;AACA,wCAA+B,IAAI,kBAAJ,EAA/B;AACA,yCAAgC,IAAI,kBAAJ,EAAhC;AACA,0CAAiC,IAAI,kBAAJ,EAAjC;;AAKyB,+CACpB,MAAM,CAAC,MAAP,CAAc,SAAd,EADoB;AAAA;;AAAA;AACxC,0DAA+C;AAAA,YAApC,KAAoC;AAC3C,aAAK,QAAL,CAAc,KAAd;AACH;AAHuC;AAAA;AAAA;AAAA;AAAA;;AAIxC,UAAM,CAAC,MAAP,CAAc,gBAAd,CAA+B,eAAK;AAAA,aAAI,KAAI,CAAC,QAAL,CAAc,KAAd,CAAJ;AAAA,KAApC;AACA,UAAM,CAAC,MAAP,CAAc,kBAAd,CAAiC,eAAK;AAAA,aAAI,KAAI,CAAC,WAAL,CAAiB,KAAjB,CAAJ;AAAA,KAAtC;AACH;;;;gCAMqB,K,EAAa;AAC/B,UAAM,GAAG,GAAG,KAAK,CAAC,GAAN,CAAU,QAAV,EAAZ;AACA,UAAM,QAAQ,GAAG,KAAK,SAAL,CAAe,GAAf,CAAmB,GAAnB,CAAjB;;AACA,UAAI,QAAJ,EAAc;AACV,aAAK,SAAL,WAAsB,GAAtB;AACA,aAAK,6BAAL,CAAmC,IAAnC,CAAwC,QAAxC;AACH;AACJ;;;6BAEkB,K,EAAa;AAAA;;AAC5B,UAAM,GAAG,GAAG,KAAK,CAAC,GAAN,CAAU,QAAV,EAAZ;AACA,UAAM,QAAQ,GAAG,KAAK,QAAL,CAAc,GAAd,EAAmB,KAAnB,CAAjB;AACA,WAAK,4BAAL,CAAkC,IAAlC,CAAuC,QAAvC;AACA,WAAK,CAAC,kBAAN,CAAyB,eAAK;AAAA,eAC1B,MAAI,CAAC,kBAAL,CAAwB,GAAxB,EAA6B,KAA7B,EAAoC,KAApC,CAD0B;AAAA,OAA9B;AAGH;;;uCAE4B,G,EAAa,K,EAAe,K,EAA8C;AACnG,UAAM,YAAY,GAAG,KAAK,QAAL,CAAc,GAAd,EAAmB,KAAnB,CAArB;AACA,UAAM,cAAc,GAAG,EAAvB;;AAFmG,kDAG9E,KAAK,CAAC,OAHwE;AAAA;;AAAA;AAGnG,+DAAoC;AAAA,cAAzB,MAAyB;AAChC,cAAM,KAAK,GAAG,KAAK,GAAL,CAAS,OAAT,CAAiB,MAAM,CAAC,KAAxB,CAAd;AACA,cAAM,WAAW,GAAG,MAAM,CAAC,WAA3B;AACA,cAAM,IAAI,GAAG,MAAM,CAAC,IAApB;AACA,wBAAc,CAAC,IAAf,CAAoB;AAAE,iBAAK,EAAL,KAAF;AAAS,uBAAW,EAAX,WAAT;AAAsB,gBAAI,EAAJ;AAAtB,WAApB;AACH;AARkG;AAAA;AAAA;AAAA;AAAA;;AASnG,WAAK,8BAAL,CAAoC,IAApC,CAAyC;AACrC,oBAAY,EAAZ,YADqC;AAErC,sBAAc,EAAd;AAFqC,OAAzC;AAIH;;;6BAEkB,G,EAAa,K,EAAa;AACzC,UAAM,QAAQ,GAAG,wBAAa,MAAb,CAAoB,GAApB,EAAyB,KAAK,CAAC,SAAN,EAAzB,EAA4C,KAAK,CAAC,YAAN,EAA5C,EAAkE,KAAK,CAAC,QAAN,EAAlE,CAAjB;AACA,WAAK,SAAL,CAAe,GAAf,CAAmB,GAAnB,EAAwB,QAAxB;AACA,aAAO,QAAP;AACH;;;8BAkBgB,a,EAA4B;AACzC,UAAM,IAAI,GAAmC,KAAK,GAAL,CAAS,eAAT,CAAyB,aAAzB,CAA7C,CADyC,CAGzC;;AACA,UAAM,MAAM,GAA4C,IAAI,CAAC,KAAL,GAAa,IAAI,CAAC,KAAL,CAAW,MAAX,CACjE,UAAC,GAAD,EAA+C,WAA/C,EAA8D;AAC1D,YAAM,QAAQ,GAAG,WAAjB;AACA,WAAG,CAAC,QAAQ,CAAC,QAAT,CAAkB,QAAlB,EAAD,CAAH,GAAoC,MAAM,CAAC,MAAP,CAAc,QAAd,CAAuB,QAAQ,CAAC,QAAhC,CAApC;AACA,eAAO,GAAP;AACH,OALgE,EAK9D,EAL8D,CAAb,GAMpD,EANJ,CAJyC,CAYzC;;AACA,UAAI,CAAC,MAAM,CAAC,IAAP,CAAY,MAAZ,EAAoB,GAApB,CAAwB,aAAG;AAAA,eAAI,MAAM,CAAC,GAAD,CAAV;AAAA,OAA3B,EAA4C,KAA5C,CAAkD,eAAK;AAAA,eAAI,CAAC,CAAC,KAAN;AAAA,OAAvD,CAAL,EAA0E;AACtE,eAAO,OAAO,CAAC,OAAR,CAAgB,KAAhB,CAAP;AACH,OAfwC,CAiBzC;;;AACA,UAAM,eAAe,GAAwD,IAAI,CAAC,KAAL,GAAa,IAAI,CAAC,KAAL,CAAW,MAAX,CACtF,UAAC,GAAD,EAA2D,WAA3D,EAA0E;AAAA;;AACtE,YAAM,QAAQ,GAAG,WAAjB;AACA,YAAM,GAAG,GAAG,QAAQ,CAAC,QAAT,CAAkB,QAAlB,EAAZ;;AACA,YAAI,EAAE,GAAG,IAAI,GAAT,CAAJ,EAAmB;AACf,aAAG,CAAC,GAAD,CAAH,GAAW,EAAX;AACH;;AACD,YAAM,UAAU,GAAG,QAAQ,CAAC,KAAT,CAAe,GAAf,CAAmB,cAAI,EAAG;AACzC,iBAAO;AACH,iBAAK,EAAE,MAAM,CAAC,KAAP,CAAa,IAAb,CAAkB,IAAI,CAAC,KAAvB,CADJ;AAEH,gBAAI,EAAE,IAAI,CAAC;AAFR,WAAP;AAIH,SALkB,CAAnB;;AAMA,uBAAG,CAAC,GAAD,CAAH,EAAS,IAAT,oCAAiB,UAAjB;;AACA,eAAO,GAAP;AACH,OAfqF,EAenF,EAfmF,CAAb,GAgBzE,EAhBJ,CAlByC,CAoCzC;;AACA,YAAM,CAAC,IAAP,CAAY,eAAZ,EAA6B,OAA7B,CAAqC,aAAG,EAAG;AACvC,cAAM,CAAC,GAAD,CAAN,CAAY,kBAAZ,CACI,EADJ,EACS;AACL,uBAAe,CAAC,GAAD,CAAf,CAAqB,GAArB,CAAyB,sBAAY,EAAG;AACpC,iBAAO;AACH,sBAAU,EAAE;AAAE,mBAAK,EAAE,CAAT;AAAY,mBAAK,EAAE;AAAnB,aADT;AAEH,iBAAK,EAAE,YAAY,CAAC,KAFjB;AAGH,gBAAI,EAAE,YAAY,CAAC,IAHhB;AAIH,4BAAgB,EAAE;AAJf,WAAP;AAMH,SAPD,CAFJ,EAUI;AAAA,iBAAM,EAAN;AAAA,SAVJ;AAYH,OAbD;AAcA,aAAO,OAAO,CAAC,OAAR,CAAgB,IAAhB,CAAP;AACH;;;wBA/GU;AACP,aAAO,KAAK,QAAZ;AACH;;;wBAyCgB;AACb,aAAO,KAAK,CAAC,IAAN,CAAW,KAAK,SAAL,CAAe,MAAf,EAAX,CAAP;AACH;;;wBAEwB;AACrB,aAAO,KAAK,4BAAL,CAAkC,KAAzC;AACH;;;wBAEyB;AACtB,aAAO,KAAK,6BAAL,CAAmC,KAA1C;AACH;;;wBAE0B;AACvB,aAAO,KAAK,8BAAL,CAAoC,KAA3C;AACH;;;;;;AA3EL,0C;;;;;;;;;;;;ACTA;;;;AAIa;;;;;;;;;;;;AAEb;;AAcA;;AAOI,qBANA,2BAMA;AAAY,4BANA,kCAMA;AAAmB,gBANA,sBAMA;AAAO,kBANA,wBAMA;;AAE1C;;AAQA,IAAiB,QAAjB;;AAAA,WAAiB,QAAjB,EAAyB;AACrB,MAAM,MAAM,GAAG,MAAf;AACA,MAAM,MAAM,GAAG,MAAM,CAAC,UAAD,CAArB;;AAEa,iBAAgB,YAAK;AAC9B,QAAM,QAAQ,GAAG,MAAM,CAAC,MAAD,CAAvB;;AACA,QAAI,CAAC,QAAL,EAAe;AACX,YAAM,IAAI,KAAJ,CAAU,iDAAV,CAAN;AACH;;AACD,WAAO,QAAP;AACH,GANY;;AAOb,WAAgB,OAAhB,CAAwB,QAAxB,EAA0C;AACtC,QAAI,MAAM,CAAC,MAAD,CAAV,EAAoB;AAChB,aAAO,CAAC,KAAR,CAAc,IAAI,KAAJ,CAAU,8CAAV,CAAd;AACH;;AACD,UAAM,CAAC,MAAD,CAAN,GAAiB,QAAjB;AAEA,WAAO,4BAAW,MAAX,CAAkB;AAAA,aAAM,MAAM,CAAC,MAAD,CAAN,GAAiB,SAAvB;AAAA,KAAlB,CAAP;AACH;;AAPe,qBAAO,OAAP;AAQnB,CAnBD,EAAiB,QAAQ,GAAR,wCAAQ,EAAR,CAAjB;;AAqBA,SAAgB,kBAAhB,CAAmC,QAAnC,EAAgD;AAC5C,MAAI,CAAC,QAAD,IAAa,CAAC,KAAK,CAAC,OAAN,CAAc,QAAd,CAAlB,EAA2C;AACvC,WAAO,KAAP;AACH;;AACD,SAAO,QAAQ,CAAC,KAAT,CAAe,eAAK;AAAA,WAAI,OAAO,KAAP,KAAiB,QAAjB,IAA6B,gDAAe,EAAf,CAAkB,KAAlB,CAAjC;AAAA,GAApB,CAAP;AACH;;AALD;AAsBA,IAAY,wBAAZ;;AAAA,WAAY,wBAAZ,EAAoC;AAChC;AACA;AACA;AACH,CAJD,EAAY,wBAAwB,GAAxB,wEAAwB,EAAxB,CAAZ;;AAyEA,IAAiB,kBAAjB;;AAAA,WAAiB,kBAAjB,EAAmC;AAC/B,WAAgB,EAAhB,CAAmB,GAAnB,EAA2B;AACvB,WAAO,CAAC,CAAC,GAAF,IAAU,SAAS,GAAnB,IAA4B,gBAAgB,GAAnD;AACH;;AAFe,0BAAE,EAAF;AAGnB,CAJD,EAAiB,kBAAkB,GAAlB,4DAAkB,EAAlB,CAAjB;;AAoEA,IAAY,mBAAZ;;AAAA,WAAY,mBAAZ,EAA+B;AAC3B;AACA;AACA;AACH,CAJD,EAAY,mBAAmB,GAAnB,8DAAmB,EAAnB,CAAZ,E;;;;;;;;;;;;;AC7NA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAKA;;AACA;;AACA;;AACA;;AAKA,SAAgB,eAAhB,CAAgC,gBAAhC,EAAmE;AAAA;;AAC/D,MAAM,WAAW,GAAG,SAAd,WAAc,GAAK;AAAG,UAAM,IAAI,KAAJ,CAAU,aAAV,CAAN;AAAgC,GAA5D;;AACA,MAAM,GAAG,GAAsB,uBAA/B;;AAF+D,MAGzD,cAHyD,GAI3D,wBAAmB,KAAnB,EAAyC,IAAzC,EAAyE;AAAA;;AAAtD;AAAsB;AAAqC,GAJnB;;AAAA,MAMzD,QANyD;AAO3D,sBACW,KADX,EAEW,OAFX,EAEmC;AAAA;;AADxB;AACA;AACN;;AAVsD;AAAA;AAAA,0BAY7C;AACV,eAAO,CAAC,CAAC,KAAK,OAAd;AACH;AAd0D;;AAAA;AAAA;;AAAA,MAgBzD,YAhByD,GAiB3D,sBAAmB,KAAnB,EAA+C,MAA/C,EAAkE;AAAA;;AAA/C;AAA4B;AAAwB,GAjBZ;;AAAA,MAmBzD,cAnByD;AA+B3D,4BAA6B,KAA7B,EAA0C;AAAA;;AAAb;AAI7B,sBAAW,WAAX;AACA,wBAAa,WAAb;AAL+C;;AA/BY;AAAA;AAAA,6BAgC7C,KAhC6C,EAgChC;AACvB,eAAO,IAAI,cAAJ,CAAmB,KAAK,KAAL,GAAa,KAAK,KAAL,GAAa,cAAc,CAAC,GAA5B,GAAkC,KAA/C,GAAuD,KAA1E,CAAP;AACH;AAlC0D;;AAAA;AAAA;;AAoBnC,uBAAM,GAAN;AAEjB,yBAAQ,IAAI,cAAJ,CAAmB,EAAnB,CAAR;AACA,4BAAW,IAAI,cAAJ,CAAmB,UAAnB,CAAX;AACA,4BAAW,IAAI,cAAJ,CAAmB,UAAnB,CAAX;AACA,mCAAkB,cAAc,CAAC,QAAf,CAAwB,MAAxB,CAA+B,SAA/B,CAAlB;AACA,kCAAiB,cAAc,CAAC,QAAf,CAAwB,MAAxB,CAA+B,QAA/B,CAAjB;AACA,mCAAkB,cAAc,CAAC,QAAf,CAAwB,MAAxB,CAA+B,SAA/B,CAAlB;AACA,0BAAS,IAAI,cAAJ,CAAmB,QAAnB,CAAT;AACA,yCAAwB,cAAc,CAAC,MAAf,CAAsB,MAAtB,CAA6B,iBAA7B,CAAxB;AACA,gCAAe,cAAc,CAAC,MAAf,CAAsB,MAAtB,CAA6B,QAA7B,CAAf;AAQX,MAAM,SAAS,GAA4B;AACvC,2BADuC,mCACf,WADe,EACF,kBADE,EACkB,kBADlB,EACsC,kBADtC,EACwD;AAC3F,UAAM,QAAQ,GAAG,gBAAgB,EAAjC;;AACA,UAAI,OAAO,WAAP,KAAuB,QAA3B,EAAqC;AACjC,cAAM,IAAI,KAAJ,CAAU,aAAV,CAAN;AACH;;AACD,UAAI,QAAQ,CAAC,SAAT,CAAmB,uBAAvB,EAAgD;AAC5C,YAAM,OAAO,GAAG,QAAQ,CAAC,SAAT,CAAmB,uBAAnB,CAA2C,WAA3C,EAAwD,kBAAxD,EAA4E,kBAA5E,EAAgG,kBAAhG,CAAhB;AACA,eAAO,MAAM,CAAC,MAAP,CAAc,OAAd,EAAuB;AAC1B,4BAAkB,EAAE,CAAC,CAAC,kBADI;AAE1B,4BAAkB,EAAE,CAAC,CAAC,kBAFI;AAG1B,4BAAkB,EAAE,CAAC,CAAC;AAHI,SAAvB,CAAP;AAKH;;AACD,aAAO;AACH,0BAAkB,EAAE,CAAC,CAAC,kBADnB;AAEH,0BAAkB,EAAE,CAAC,CAAC,kBAFnB;AAGH,0BAAkB,EAAE,CAAC,CAAC,kBAHnB;AAIH,mBAAW,EAAE,iBAAM,IAJhB;AAKH,mBAAW,EAAE,iBAAM,IALhB;AAMH,mBAAW,EAAE,iBAAM,IANhB;AAOH,eAAO,EAAE,mBAAK,CAAI;AAPf,OAAP;AASH,KAvBsC;AAwBvC,aAAS,EAAE,mBAAO,IAAP;AAAA,aAAe;AAAA;AAAA;AAAA;AAAA;AAAA;AAChB,wBADgB,GACL,gBAAgB,EADX;;AAAA,qBAElB,yBAAc,EAAd,CAAiB,IAAjB,CAFkB;AAAA;AAAA;AAAA;;AAAA,iDAGX,QAAQ,CAAC,SAAT,CAAmB,SAAnB,CAA6B,IAA7B,CAHW;;AAAA;AAAA,sBAKhB,IAAI,KAAJ,CAAU,aAAV,CALgB;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAf;AAAA,KAxB4B;AA+BvC,oBA/BuC,4BA+BtB,OA/BsB,EA+Bb,QA/Ba,EA+BL;AAAA,8BACR,gBAAgB,EADR;AAAA,UACtB,SADsB,qBACtB,SADsB;;AAE9B,UAAM,aAAa,GAAG,SAAS,CAAC,cAAV,GAClB,SAAS,CAAC,cAAV,CAAyB,gBAAzB,CAA0C,OAA1C,EAAmD,QAAQ,GAAG,QAAQ,CAAC,QAAT,EAAH,GAAyB,SAApF,CADkB,GAElB,SAFJ;AAGA,UAAM,MAAM,GAAkC;AAC1C,WAAG,EAAE,aAAC,OAAD,EAAkB,YAAlB,EAAwC;AACzC,iBAAO,aAAa,GAAG,aAAa,CAAC,GAAd,CAAkB,OAAlB,EAA2B,YAA3B,CAAH,GAA8C,YAAlE;AACH,SAHyC;AAI1C,WAAG,EAAE,aAAC,OAAD,EAAoB;AACrB,iBAAO,aAAa,GAAG,aAAa,CAAC,GAAd,CAAkB,OAAlB,CAAH,GAAgC,KAApD;AACH,SANyC;AAO1C,eAAO,EAAE,WAPiC;AAQ1C,cAAM,EAAE;AARkC,OAA9C;AAUA,aAAO,MAAM,CAAC,MAAP,CAAc,MAAd,EAAsB;AACzB,cAAM,EAAE;AAAA,iBAAM,aAAa,GAAG,aAAa,CAAC,MAAd,EAAH,GAA4B,SAA/C;AAAA;AADiB,OAAtB,CAAP;AAGH,KAjDsC;;AAkDvC,QAAI,wBAAJ,GAA4B;AACxB,UAAM,QAAQ,GAAG,gBAAgB,EAAjC;;AACA,UAAI,QAAQ,CAAC,SAAT,CAAmB,cAAvB,EAAuC;AACnC,eAAO,QAAQ,CAAC,SAAT,CAAmB,cAAnB,CAAkC,wBAAzC;AACH;;AACD,aAAO,iBAAM,IAAb;AACH,KAxDsC;;AAyDvC,QAAI,gBAAJ,GAAoB;AAChB,UAAM,QAAQ,GAAG,gBAAgB,EAAjC;;AACA,UAAI,sBAAsB,QAAQ,CAAC,SAAnC,EAA8C;AAC1C,eAAO,QAAQ,CAAC,SAAT,CAAmB,gBAA1B;AACH;;AACD,UAAM,OAAO,GAAG,QAAQ,CAAC,SAAT,CAAmB,OAAnC;;AACA,UAAI,CAAC,OAAL,EAAc;AACV,eAAO,SAAP;AACH;;AACD,UAAM,GAAG,GAAG,GAAG,CAAC,KAAJ,CAAU,OAAV,CAAZ;AACA,aAAO,CAAC;AACJ,WAAG,EAAH,GADI;AAEJ,aAAK,EAAE,CAFH;AAGJ,YAAI,EAAE,GAAG,CAAC,QAAJ;AAHF,OAAD,CAAP;AAKH,KAxEsC;;AAyEvC,QAAI,2BAAJ,GAA+B;AAC3B,UAAM,QAAQ,GAAG,gBAAgB,EAAjC;AACA,aAAO,QAAQ,CAAC,SAAT,CAAmB,2BAAnB,IAAkD,iBAAM,IAA/D;AACH,KA5EsC;;AA6EvC,QAAI,aAAJ,GAAiB;AACb,UAAM,QAAQ,GAAG,gBAAgB,EAAjC;AACA,aAAO,QAAQ,CAAC,SAAT,CAAmB,aAA1B;AACH,KAhFsC;;AAiFvC,QAAI,qBAAJ,GAAyB;AACrB,UAAM,QAAQ,GAAG,gBAAgB,EAAjC;AACA,aAAO,QAAQ,CAAC,SAAT,CAAmB,qBAA1B;AACH,KApFsC;;AAqFvC,QAAI,sBAAJ,GAA0B;AACtB,UAAM,QAAQ,GAAG,gBAAgB,EAAjC;AACA,aAAO,QAAQ,CAAC,SAAT,CAAmB,sBAA1B;AACH,KAxFsC;;AAyFvC,QAAI,uBAAJ,GAA2B;AACvB,UAAM,QAAQ,GAAG,gBAAgB,EAAjC;AACA,aAAO,UAAC,QAAD,EAAuD,QAAvD,EAAuE,WAAvE,EAAiH;AACpH,eAAO,QAAQ,CAAC,SAAT,CAAmB,uBAAnB,CAA2C,gBAAqC;AAAA,cAAlC,YAAkC,QAAlC,YAAkC;AAAA,cAApB,cAAoB,QAApB,cAAoB;AACnF,cAAM,CAAC,GAA+C,QAAQ,CAAC,IAAT,CAAc,QAAd,CAAtD;AACA,WAAC,CAAC;AACE,oBAAQ,EAAO,YADjB;AAEE,0BAAc,EAAO;AAFvB,WAAD,CAAD;AAIH,SANM,EAMJ,SANI,EAMO,WANP,CAAP;AAOH,OARD;AASH,KApGsC;;AAqGvC,QAAI,sBAAJ,GAA0B;AACtB,UAAM,QAAQ,GAAG,gBAAgB,EAAjC;AACA,UAAM,sBAAsB,GAAG,QAAQ,CAAC,SAAT,CAAmB,sBAAlD;;AACA,UAAI,CAAC,sBAAL,EAA6B;AACzB,eAAO,iBAAM,IAAb;AACH;;AACD,aAAO,UAAC,QAAD,EAAyD,QAAzD,EAAyE,WAAzE,EAAmH;AACtH,eAAO,sBAAsB,CAAC,iBAAwC;AAAA,cAArC,YAAqC,SAArC,YAAqC;AAAA,cAAvB,MAAuB,SAAvB,MAAuB;AAAA,cAAf,UAAe,SAAf,SAAe;AAClE,cAAM,CAAC,GAAiD,QAAQ,CAAC,IAAT,CAAc,QAAd,CAAxD;AACA,WAAC,CAAC;AACE,oBAAQ,EAAO,YADjB;AAEE,kBAAM,EAAE,MAFV;AAGE,qBAAS,EAAE,mBAAC,KAAD,EAA0C;AACjD,kBAAI,UAAJ,EAAe;AACX,0BAAS,CAAC,KAAD,CAAT;AACH;AACJ;AAPH,WAAD,CAAD;AASH,SAX4B,EAW1B,SAX0B,EAWf,WAXe,CAA7B;AAYH,OAbD;AAcH,KAzHsC;;AA0HvC,QAAI,qBAAJ,GAAyB;AACrB,UAAM,QAAQ,GAAG,gBAAgB,EAAjC;AACA,aAAQ,QAAQ,CAAC,SAAT,CAAmB,qBAAnB,IAAoD,iBAAM,IAAlE;AACH,KA7HsC;;AA8HvC,sBAAkB,EAAE,WA9HmB;AA+HvC,kBAAc,EAAE,WA/HuB;AAgIvC,0BAAsB,EAAE,WAhIe;AAiIvC,aAAS,EAAE,WAjI4B;AAkIvC,WAAO,EAAE,WAlI8B;AAmIvC,oBAAgB,EAAE,WAnIqB;AAoIvC,uCAAmC,EAAE,WApIE;AAqIvC,wBAAoB,EAAE,WArIiB;AAsIvC,8BAA0B,EAAE,WAtIW;AAuIvC,YAAQ,EAAE,SAvI6B;AAwIvC,QAAI,EAAE;AAxIiC,GAA3C;AA0IA,MAAM,SAAS,GAA4B;AACvC,SADuC,iBACjC,QADiC,EACvB,QADuB,EACf;AACpB,UAAI,CAAC,8BAAmB,QAAnB,CAAL,EAAmC;AAC/B,cAAM,IAAI,KAAJ,CAAU,0BAA0B,IAAI,CAAC,SAAL,CAAe,QAAf,CAApC,CAAN;AACH;;AACD,UAAI,CAAC,8BAAmB,EAAnB,CAAsB,QAAtB,CAAL,EAAsC;AAClC,cAAM,IAAI,KAAJ,CAAU,0BAA0B,IAAI,CAAC,SAAL,CAAe,QAAf,CAApC,CAAN;AACH;;AACD,UAAM,QAAQ,GAAG,gBAAgB,EAAjC;AACA,UAAM,MAAM,GAAG,QAAQ,CAAC,SAAT,CAAmB,KAAnB,CAAyB,QAAzB,EAAmC,QAAnC,CAAf;AACA,aAAO,MAAM,GAAG,CAAH,GAAO,CAApB;AACH,KAXsC;AAYvC,8BAZuC,sCAYZ,IAZY,EAYC;AACpC,UAAM,QAAQ,GAAG,gBAAgB,EAAjC;AACA,UAAM,UAAU,GAAG,QAAQ,CAAC,SAAT,CAAmB,0BAAnB,GACf,QAAQ,CAAC,SAAT,CAAmB,0BAAnB,CAA8C,IAA9C,CADe,GACuC,SAD1D;AAEA,aAAO;AACH,YAAI,EAAE,IAAI,IAAI,SADX;AAEH,WAFG,eAEC,IAFD,EAEqE,IAFrE,EAE2G;AAC1G,cAAI,UAAJ,EAAgB;AACZ,gBAAI,IAAJ,EAAU;AACN,wBAAU,CAAC,GAAX,CAAe,IAAI,CAAC,QAAL,EAAf,EAAgC,IAAhC;AACH,aAFD,MAEO;AACH,wBAAU,CAAC,GAAX,CAAe,IAAI,CAAC,QAAL,EAAf,EAAgC,EAAhC;AACH;AACJ;AACJ,SAVE;AAWH,eAXG,qBAWI;AACH,cAAI,UAAJ,EAAgB;AACZ,sBAAU,CAAC,OAAX;AACH;AACJ,SAfE;AAgBH,kBAAQ,WAhBL;AAiBH,aAAK,EAAE,WAjBJ;AAkBH,eAAO,EAAE,WAlBN;AAmBH,WAAG,EAAE,WAnBF;AAoBH,WAAG,EAAE;AApBF,OAAP;AAsBH,KAtCsC;AAuCvC,kCAvCuC,0CAuCR,QAvCQ,EAuCE,QAvCF,EAuCgC;AACnE,UAAI,CAAC,8BAAmB,QAAnB,CAAL,EAAmC;AAC/B,cAAM,IAAI,KAAJ,CAAU,0BAA0B,IAAI,CAAC,SAAL,CAAe,QAAf,CAApC,CAAN;AACH;;AAHkE,+BAI7C,gBAAgB,EAJ6B;AAAA,UAI3D,SAJ2D,sBAI3D,SAJ2D;;AAKnE,UAAI,CAAC,SAAS,CAAC,8BAAf,EAA+C;AAC3C,eAAO,wBAAW,MAAX,CAAkB,YAAK,CAAI,CAA3B,CAAP;AACH;;AACD,UAAM,qBAAqB,GAAG,QAAQ,CAAC,qBAAvC;;AARmE,wCAAjB,iBAAiB;AAAjB,yBAAiB;AAAA;;AASnE,aAAO,SAAS,CAAC,8BAAV,gBAAS,GAAgC,QAAhC,EAA0C;AACtD,8BADsD,yCACM,KADN,EACW;AAAA,cAAxC,YAAwC,SAAxC,YAAwC;AAAA,cAA1B,QAA0B,SAA1B,QAA0B;AAAA,cAAhB,OAAgB,SAAhB,OAAgB;AAC7D,iBAAO,QAAQ,CAAC,sBAAT,CAAqC,YAArC,EAAwD,QAAxD,EAAkE,KAAlE,EAAyE,OAAO,IAAI;AACvF,uBAAW,EAAE,iCAAsB;AADoD,WAApF,CAAP;AAGH,SALqD;AAMtD,6BAAqB,EAAE,qBAAqB,GAAG,UAAC,IAAD,EAAO,KAAP,EAAgB;AAC3D,iBAAO,qBAAqB,CAAC,IAAD,EAAc,KAAd,CAA5B;AACH,SAF2C,GAExC;AARkD,OAA1C,SASV,iBATU,EAAhB;AAUH,KA1DsC;AA2DvC,+BA3DuC,uCA2DX,QA3DW,EA2DD,QA3DC,EA2DO;AAC1C,UAAI,CAAC,8BAAmB,QAAnB,CAAL,EAAmC;AAC/B,cAAM,IAAI,KAAJ,CAAU,0BAA0B,IAAI,CAAC,SAAL,CAAe,QAAf,CAApC,CAAN;AACH;;AAHyC,+BAIpB,gBAAgB,EAJI;AAAA,UAIlC,SAJkC,sBAIlC,SAJkC;;AAK1C,UAAI,CAAC,SAAS,CAAC,2BAAf,EAA4C;AACxC,eAAO,wBAAW,MAAX,CAAkB,YAAK,CAAI,CAA3B,CAAP;AACH;;AACD,aAAO,SAAS,CAAC,2BAAV,CAAsC,QAAtC,EAAgD;AACnD,0BADmD,qCACE,KADF,EACO;AAAA,cAArC,YAAqC,SAArC,YAAqC;AAAA,cAAvB,KAAuB,SAAvB,KAAuB;AAAA,cAAhB,OAAgB,SAAhB,OAAgB;AACtD,iBAAO,QAAQ,CAAC,kBAAT,CAAiC,YAAjC,EAAoD,KAApD,EAAgE,OAAhE,EAAyE,KAAzE,CAAP;AACH;AAHkD,OAAhD,CAAP;AAKH,KAxEsC;AAyEvC,4BAzEuC,oCAyEd,QAzEc,EAyEJ,QAzEI,EAyEI;AACvC,UAAI,CAAC,8BAAmB,QAAnB,CAAL,EAAmC;AAC/B,cAAM,IAAI,KAAJ,CAAU,0BAA0B,IAAI,CAAC,SAAL,CAAe,QAAf,CAApC,CAAN;AACH;;AAHsC,+BAIjB,gBAAgB,EAJC;AAAA,UAI/B,SAJ+B,sBAI/B,SAJ+B;;AAKvC,UAAI,CAAC,SAAS,CAAC,wBAAf,EAAyC;AACrC,eAAO,wBAAW,MAAX,CAAkB,YAAK,CAAI,CAA3B,CAAP;AACH;;AACD,UAAM,eAAe,GAAG,QAAQ,CAAC,eAAjC;AACA,aAAO,SAAS,CAAC,wBAAV,CAAmC,QAAnC,EAA6C;AAChD,yBADgD,oCACZ,KADY,EACP;AAAA,cAArB,YAAqB,SAArB,YAAqB;AACrC,iBAAO,QAAQ,CAAC,iBAAT,CAAgC,YAAhC,EAA8C,KAA9C,CAAP;AACH,SAH+C;AAIhD,uBAAe,EAAE,eAAe,GAAG,UAAC,QAAD,EAAW,KAAX,EAAoB;AACnD,iBAAO,eAAe,CAAM,QAAN,EAAgB,KAAhB,CAAtB;AACH,SAF+B,GAE5B;AAN4C,OAA7C,CAAP;AAQH,KA1FsC;AA2FvC,8BA3FuC,sCA2FZ,QA3FY,EA2FF,QA3FE,EA2FM;AACzC,UAAI,CAAC,8BAAmB,QAAnB,CAAL,EAAmC;AAC/B,cAAM,IAAI,KAAJ,CAAU,0BAA0B,IAAI,CAAC,SAAL,CAAe,QAAf,CAApC,CAAN;AACH;;AAHwC,+BAInB,gBAAgB,EAJG;AAAA,UAIjC,SAJiC,sBAIjC,SAJiC;;AAKzC,UAAI,CAAC,SAAS,CAAC,0BAAf,EAA2C;AACvC,eAAO,wBAAW,MAAX,CAAkB,YAAK,CAAI,CAA3B,CAAP;AACH;;AACD,aAAO,SAAS,CAAC,0BAAV,CAAqC,QAArC,EAA+C;AAClD,yBADkD,oCACJ,KADI,EACC;AAAA,cAA/B,YAA+B,SAA/B,YAA+B;AAAA,cAAjB,QAAiB,SAAjB,QAAiB;AAC/C,iBAAO,QAAQ,CAAC,iBAAT,CAAgC,YAAhC,EAAmD,QAAnD,EAA6D,KAA7D,CAAP;AACH;AAHiD,OAA/C,CAAP;AAKH,KAxGsC;AAyGvC,kCAzGuC,0CAyGR,QAzGQ,EAyGE,QAzGF,EAyGU;AAC7C,UAAI,CAAC,8BAAmB,QAAnB,CAAL,EAAmC;AAC/B,cAAM,IAAI,KAAJ,CAAU,0BAA0B,IAAI,CAAC,SAAL,CAAe,QAAf,CAApC,CAAN;AACH;;AAH4C,+BAIvB,gBAAgB,EAJO;AAAA,UAIrC,SAJqC,sBAIrC,SAJqC;;AAK7C,UAAI,CAAC,SAAS,CAAC,8BAAf,EAA+C;AAC3C,eAAO,wBAAW,MAAX,CAAkB,YAAK,CAAI,CAA3B,CAAP;AACH;;AACD,aAAO,SAAS,CAAC,8BAAV,CAAyC,QAAzC,EAAmD;AACtD,6BADsD,wCACJ,KADI,EACC;AAAA,cAA/B,YAA+B,SAA/B,YAA+B;AAAA,cAAjB,QAAiB,SAAjB,QAAiB;AACnD,iBAAO,QAAQ,CAAC,qBAAT,CAAoC,YAApC,EAAuD,QAAvD,EAAiE,KAAjE,CAAP;AACH;AAHqD,OAAnD,CAAP;AAKH,KAtHsC;AAuHvC,kCAvHuC,0CAuHR,QAvHQ,EAuHE,QAvHF,EAuHU;AAC7C,UAAI,CAAC,8BAAmB,QAAnB,CAAL,EAAmC;AAC/B,cAAM,IAAI,KAAJ,CAAU,0BAA0B,IAAI,CAAC,SAAL,CAAe,QAAf,CAApC,CAAN;AACH;;AAH4C,+BAIvB,gBAAgB,EAJO;AAAA,UAIrC,SAJqC,sBAIrC,SAJqC;;AAK7C,UAAI,CAAC,SAAS,CAAC,8BAAf,EAA+C;AAC3C,eAAO,wBAAW,MAAX,CAAkB,YAAK,CAAI,CAA3B,CAAP;AACH;;AACD,aAAO,SAAS,CAAC,8BAAV,CAAyC,QAAzC,EAAmD;AACtD,6BADsD,wCACJ,KADI,EACC;AAAA,cAA/B,YAA+B,SAA/B,YAA+B;AAAA,cAAjB,QAAiB,SAAjB,QAAiB;AACnD,iBAAO,QAAQ,CAAC,qBAAT,CAAoC,YAApC,EAAuD,QAAvD,EAAiE,KAAjE,CAAP;AACH;AAHqD,OAAnD,CAAP;AAKH,KApIsC;AAqIvC,+BArIuC,uCAqIX,QArIW,EAqID,QArIC,EAqIO;AAC1C,UAAI,CAAC,8BAAmB,QAAnB,CAAL,EAAmC;AAC/B,cAAM,IAAI,KAAJ,CAAU,0BAA0B,IAAI,CAAC,SAAL,CAAe,QAAf,CAApC,CAAN;AACH;;AAHyC,+BAIpB,gBAAgB,EAJI;AAAA,UAIlC,SAJkC,sBAIlC,SAJkC;;AAK1C,UAAI,CAAC,SAAS,CAAC,2BAAf,EAA4C;AACxC,eAAO,wBAAW,MAAX,CAAkB,YAAK,CAAI,CAA3B,CAAP;AACH;;AACD,aAAO,SAAS,CAAC,2BAAV,CAAsC,QAAtC,EAAgD;AACnD,0BADmD,qCACJ,KADI,EACC;AAAA,cAA/B,YAA+B,SAA/B,YAA+B;AAAA,cAAjB,QAAiB,SAAjB,QAAiB;AAChD,iBAAO,QAAQ,CAAC,kBAAT,CAAiC,YAAjC,EAAoD,QAApD,EAA8D,KAA9D,CAAP;AACH;AAHkD,OAAhD,CAAP;AAKH,KAlJsC;AAmJvC,yBAnJuC,iCAmJjB,QAnJiB,EAmJP,QAnJO,EAmJC;AACpC,UAAI,CAAC,8BAAmB,QAAnB,CAAL,EAAmC;AAC/B,cAAM,IAAI,KAAJ,CAAU,0BAA0B,IAAI,CAAC,SAAL,CAAe,QAAf,CAApC,CAAN;AACH;;AAHmC,+BAId,gBAAgB,EAJF;AAAA,UAI5B,SAJ4B,sBAI5B,SAJ4B;;AAKpC,UAAI,SAAS,CAAC,qBAAd,EAAqC;AACjC,eAAO,SAAS,CAAC,qBAAV,CAAgC,QAAhC,EAA0C;AAC7C,sBAD6C,gCACJ,KADI,EACC;AAAA,gBAA/B,YAA+B,UAA/B,YAA+B;AAAA,gBAAjB,QAAiB,UAAjB,QAAiB;AAC1C,mBAAO,QAAQ,CAAC,YAAT,CAA2B,YAA3B,EAA8C,QAA9C,EAAwD,KAAxD,CAAP;AACH;AAH4C,SAA1C,CAAP;AAKH;;AACD,aAAO,wBAAW,MAAX,CAAkB,YAAK,CAAI,CAA3B,CAAP;AACH,KAhKsC;AAiKvC,qCAjKuC,6CAiKL,QAjKK,EAiKK,QAjKL,EAiKa;AAChD,UAAI,CAAC,8BAAmB,QAAnB,CAAL,EAAmC;AAC/B,cAAM,IAAI,KAAJ,CAAU,0BAA0B,IAAI,CAAC,SAAL,CAAe,QAAf,CAApC,CAAN;AACH;;AAH+C,gCAI1B,gBAAgB,EAJU;AAAA,UAIxC,SAJwC,uBAIxC,SAJwC;;AAKhD,UAAI,CAAC,SAAS,CAAC,iCAAf,EAAkD;AAC9C,eAAO,wBAAW,MAAX,CAAkB,YAAK,CAAI,CAA3B,CAAP;AACH;;AACD,aAAO,SAAS,CAAC,iCAAV,CAA4C,QAA5C,EAAsD;AACzD,iCADyD,6CACH,KADG,EACE;AAAA,cAA/B,YAA+B,UAA/B,YAA+B;AAAA,cAAjB,QAAiB,UAAjB,QAAiB;AACvD,iBAAO,QAAQ,CAAC,yBAAT,CAAwC,YAAxC,EAA2D,QAA3D,EAAqE,KAArE,CAAP;AACH;AAHwD,OAAtD,CAAP;AAKH,KA9KsC;AA+KvC,kCA/KuC,0CA+KR,QA/KQ,EA+KE,QA/KF,EA+KU;AAC7C,UAAI,CAAC,8BAAmB,QAAnB,CAAL,EAAmC;AAC/B,cAAM,IAAI,KAAJ,CAAU,0BAA0B,IAAI,CAAC,SAAL,CAAe,QAAf,CAApC,CAAN;AACH;;AAH4C,gCAIvB,gBAAgB,EAJO;AAAA,UAIrC,SAJqC,uBAIrC,SAJqC;;AAK7C,UAAI,CAAC,SAAS,CAAC,8BAAf,EAA+C;AAC3C,eAAO,wBAAW,MAAX,CAAkB,YAAK,CAAI,CAA3B,CAAP;AACH;;AACD,aAAO,SAAS,CAAC,8BAAV,CAAyC,QAAzC,EAAmD;AACtD,8BADsD,0CACb,KADa,EACR;AAAA,cAArB,YAAqB,UAArB,YAAqB;AAC1C,iBAAO,QAAQ,CAAC,sBAAT,CAAqC,YAArC,EAAmD,KAAnD,CAAP;AACH;AAHqD,OAAnD,CAAP;AAKH,KA5LsC;AA6LvC,mCA7LuC,2CA6LP,QA7LO,EA6LC;AAAA,gCACd,gBAAgB,EADF;AAAA,UAC5B,SAD4B,uBAC5B,SAD4B;;AAEpC,UAAI,CAAC,SAAS,CAAC,+BAAf,EAAgD;AAC5C,eAAO,wBAAW,MAAX,CAAkB,YAAK,CAAI,CAA3B,CAAP;AACH;;AACD,aAAO,SAAS,CAAC,+BAAV,CAA0C;AAC7C,+BAD6C,2CACV,KADU,EACL;AAAA,cAAd,KAAc,UAAd,KAAc;AACpC,iBAAO,QAAQ,CAAC,uBAAT,CAAiC,KAAjC,EAAwC,KAAxC,CAAP;AACH;AAH4C,OAA1C,CAAP;AAKH,KAvMsC;AAwMvC,6BAxMuC,qCAwMb,QAxMa,EAwMH,QAxMG,EAwMK;AACxC,UAAI,CAAC,8BAAmB,QAAnB,CAAL,EAAmC;AAC/B,cAAM,IAAI,KAAJ,CAAU,0BAA0B,IAAI,CAAC,SAAL,CAAe,QAAf,CAApC,CAAN;AACH;;AAHuC,gCAIlB,gBAAgB,EAJE;AAAA,UAIhC,SAJgC,uBAIhC,SAJgC;;AAKxC,UAAI,CAAC,SAAS,CAAC,yBAAf,EAA0C;AACtC,eAAO,wBAAW,MAAX,CAAkB,YAAK,CAAI,CAA3B,CAAP;AACH;;AACD,aAAO,SAAS,CAAC,yBAAV,CAAoC,QAApC,EAA8C;AACjD,yBADiD,qCACM,KADN,EACW;AAAA,cAAxC,YAAwC,UAAxC,YAAwC;AAAA,cAA1B,QAA0B,UAA1B,QAA0B;AAAA,cAAhB,OAAgB,UAAhB,OAAgB;AACxD,iBAAO,QAAQ,CAAC,iBAAT,CAAgC,YAAhC,EAAmD,QAAnD,EAA6D,OAA7D,EAAsE,KAAtE,CAAP;AACH;AAHgD,OAA9C,CAAP;AAKH,KArNsC;AAsNvC,0BAtNuC,kCAsNhB,QAtNgB,EAsNN,QAtNM,EAsNE;AACrC,UAAI,CAAC,8BAAmB,QAAnB,CAAL,EAAmC;AAC/B,cAAM,IAAI,KAAJ,CAAU,0BAA0B,IAAI,CAAC,SAAL,CAAe,QAAf,CAApC,CAAN;AACH;;AAHoC,gCAIf,gBAAgB,EAJD;AAAA,UAI7B,SAJ6B,uBAI7B,SAJ6B;;AAKrC,UAAI,CAAC,SAAS,CAAC,sBAAf,EAAuC;AACnC,eAAO,wBAAW,MAAX,CAAkB,YAAK,CAAI,CAA3B,CAAP;AACH;;AACD,aAAO,SAAS,CAAC,sBAAV,CAAiC,QAAjC,EAA2C;AAC9C,0BAD8C,sCACU,KADV,EACe;AAAA,cAAxC,YAAwC,UAAxC,YAAwC;AAAA,cAA1B,QAA0B,UAA1B,QAA0B;AAAA,cAAhB,OAAgB,UAAhB,OAAgB;AACzD,iBAAO,QAAQ,CAAC,kBAAT,CAAiC,YAAjC,EAAoD,QAApD,EAA8D,OAA9D,EAAuE,KAAvE,CAAP;AACH;AAH6C,OAA3C,CAAP;AAKH,KAnOsC;AAoOvC,0CApOuC,kDAoOA,QApOA,EAoOU,QApOV,EAoOkB;AACrD,UAAI,CAAC,8BAAmB,QAAnB,CAAL,EAAmC;AAC/B,cAAM,IAAI,KAAJ,CAAU,0BAA0B,IAAI,CAAC,SAAL,CAAe,QAAf,CAApC,CAAN;AACH;;AAHoD,gCAI/B,gBAAgB,EAJe;AAAA,UAI7C,SAJ6C,uBAI7C,SAJ6C;;AAKrD,UAAI,CAAC,SAAS,CAAC,sCAAf,EAAuD;AACnD,eAAO,wBAAW,MAAX,CAAkB,YAAK,CAAI,CAA3B,CAAP;AACH;;AACD,aAAO,SAAS,CAAC,sCAAV,CAAiD,QAAjD,EAA2D;AAC9D,sCAD8D,kDACJ,KADI,EACC;AAAA,cAA9B,YAA8B,UAA9B,YAA8B;AAAA,cAAhB,OAAgB,UAAhB,OAAgB;AAC3D,iBAAO,QAAQ,CAAC,8BAAT,CAA6C,YAA7C,EAAgE,OAAhE,EAAyE,KAAzE,CAAP;AACH;AAH6D,OAA3D,CAAP;AAKH,KAjPsC;AAkPvC,+CAlPuC,uDAkPK,QAlPL,EAkPe,QAlPf,EAkPuB;AAC1D,UAAI,CAAC,8BAAmB,QAAnB,CAAL,EAAmC;AAC/B,cAAM,IAAI,KAAJ,CAAU,0BAA0B,IAAI,CAAC,SAAL,CAAe,QAAf,CAApC,CAAN;AACH;;AAHyD,gCAIpC,gBAAgB,EAJoB;AAAA,UAIlD,SAJkD,uBAIlD,SAJkD;;AAK1D,UAAI,CAAC,SAAS,CAAC,2CAAf,EAA4D;AACxD,eAAO,wBAAW,MAAX,CAAkB,YAAK,CAAI,CAA3B,CAAP;AACH;;AACD,aAAO,SAAS,CAAC,2CAAV,CAAsD,QAAtD,EAAgE;AACnE,2CADmE,uDACG,KADH,EACQ;AAAA,cAArC,YAAqC,UAArC,YAAqC;AAAA,cAAvB,KAAuB,UAAvB,KAAuB;AAAA,cAAhB,OAAgB,UAAhB,OAAgB;AACvE,iBAAO,QAAQ,CAAC,mCAAT,CAAkD,YAAlD,EAAqE,KAArE,EAAiF,OAAjF,EAA0F,KAA1F,CAAP;AACH;AAHkE,OAAhE,CAAP;AAKH,KA/PsC;AAgQvC,wCAhQuC,gDAgQF,QAhQE,EAgQQ,QAhQR,EAgQkB,qBAhQlB,EAgQgE;AACnG,UAAI,CAAC,8BAAmB,QAAnB,CAAL,EAAmC;AAC/B,cAAM,IAAI,KAAJ,CAAU,0BAA0B,IAAI,CAAC,SAAL,CAAe,QAAf,CAApC,CAAN;AACH;;AAHkG,gCAI7E,gBAAgB,EAJ6D;AAAA,UAI3F,SAJ2F,uBAI3F,SAJ2F;;AAKnG,UAAI,CAAC,SAAS,CAAC,oCAAf,EAAqD;AACjD,eAAO,wBAAW,MAAX,CAAkB,YAAK,CAAI,CAA3B,CAAP;AACH;;AAPkG,yCAApB,oBAAoB;AAApB,4BAAoB;AAAA;;AAQnG,aAAO,SAAS,CAAC,oCAAV,gBAAS,GAAsC,QAAtC,EAAgD;AAC5D,oCAD4D,gDACU,KADV,EACe;AAAA,cAA5C,YAA4C,UAA5C,YAA4C;AAAA,cAA9B,QAA8B,UAA9B,QAA8B;AAAA,cAApB,EAAoB,UAApB,EAAoB;AAAA,cAAhB,OAAgB,UAAhB,OAAgB;AACvE,iBAAO,QAAQ,CAAC,4BAAT,CAA2C,YAA3C,EAA8D,QAA9D,EAAwE,EAAxE,EAAiF,OAAjF,EAA0F,KAA1F,CAAP;AACH;AAH2D,OAAhD,EAIb,qBAJa,SAIa,oBAJb,EAAhB;AAKH,KA7QsC;AA8QvC,iCA9QuC,yCA8QT,QA9QS,EA8Q0B,QA9Q1B,EA8QkE,SA9QlE,EA8QmJ;AACtL,UAAI,CAAC,8BAAmB,QAAnB,CAAL,EAAmC;AAC/B,cAAM,IAAI,KAAJ,CAAU,0BAA0B,IAAI,CAAC,SAAL,CAAe,QAAf,CAApC,CAAN;AACH;;AAHqL,gCAIhK,gBAAgB,EAJgJ;AAAA,UAI9K,SAJ8K,uBAI9K,SAJ8K;;AAKtL,UAAI,CAAC,SAAS,CAAC,6BAAf,EAA8C;AAC1C,eAAO,wBAAW,MAAX,CAAkB,YAAK,CAAI,CAA3B,CAAP;AACH;;AACD,UAAI,iBAAJ;AACA,UAAI,mBAAJ;;AACA,UAAI,OAAO,SAAP,KAAqB,QAAzB,EAAmC;AAAA,2CAVgI,SAUhI;AAVgI,mBAUhI;AAAA;;AAC/B,yBAAiB,IAAI,SAAJ,SAAkB,SAAlB,CAAjB;AACH,OAFD,MAEO,IAAI,SAAJ,EAAe;AAClB,yBAAiB,GAAG,SAAS,CAAC,iBAA9B;AACA,2BAAmB,GAAG,SAAS,CAAC,mBAAhC;AACH;;AACD,aAAO,SAAS,CAAC,6BAAV,CAAwC,QAAxC,EAAkD;AACrD,yBAAiB,EAAjB,iBADqD;AAErD,2BAAmB,EAAnB,mBAFqD;AAGrD,4BAHqD,wCAGJ,KAHI,EAGG,OAHH,EAGU;AAAA,cAAxC,YAAwC,UAAxC,YAAwC;AAAA,cAA1B,QAA0B,UAA1B,QAA0B;AAC3D,iBAAO,QAAQ,CAAC,oBAAT,CAAmC,YAAnC,EAAsD,QAAtD,EAAgE,KAAhE,EAA4E,OAA5E,CAAP;AACH;AALoD,OAAlD,CAAP;AAOH,KArSsC;AAsSvC,gCAtSuC,wCAsSV,QAtSU,EAsSA,QAtSA,EAsSQ;AAC3C,UAAI,CAAC,8BAAmB,QAAnB,CAAL,EAAmC;AAC/B,cAAM,IAAI,KAAJ,CAAU,0BAA0B,IAAI,CAAC,SAAL,CAAe,QAAf,CAApC,CAAN;AACH;;AAH0C,gCAIrB,gBAAgB,EAJK;AAAA,UAInC,SAJmC,uBAInC,SAJmC;;AAK3C,UAAI,CAAC,SAAS,CAAC,4BAAf,EAA6C;AACzC,eAAO,wBAAW,MAAX,CAAkB,YAAK,CAAI,CAA3B,CAAP;AACH;;AACD,UAAM,mBAAmB,GAAG,QAAQ,CAAC,mBAArC;AACA,aAAO,SAAS,CAAC,4BAAV,CAAuC,QAAvC,EAAiD;AACpD,4BADoD,wCACb,KADa,EACR;AAAA,cAArB,YAAqB,UAArB,YAAqB;AACxC,iBAAO,QAAQ,CAAC,oBAAT,CAAmC,YAAnC,EAAiD,KAAjD,CAAP;AACH,SAHmD;AAIpD,2BAAmB,EAAE,mBAAmB,GAAG,UAAC,IAAD,EAAO,KAAP,EAAgB;AACvD,iBAAO,mBAAmB,CAAM,IAAN,EAAY,KAAZ,CAA1B;AACH,SAFuC,GAEpC;AANgD,OAAjD,CAAP;AAQH,KAvTsC;AAwTvC,yBAxTuC,iCAwTjB,QAxTiB,EAwTP,QAxTO,EAwTC;AACpC,UAAI,CAAC,8BAAmB,QAAnB,CAAL,EAAmC;AAC/B,cAAM,IAAI,KAAJ,CAAU,0BAA0B,IAAI,CAAC,SAAL,CAAe,QAAf,CAApC,CAAN;AACH;;AAHmC,gCAId,gBAAgB,EAJF;AAAA,UAI5B,SAJ4B,uBAI5B,SAJ4B;;AAKpC,UAAI,CAAC,SAAS,CAAC,qBAAf,EAAsC;AAClC,eAAO,wBAAW,MAAX,CAAkB,YAAK,CAAI,CAA3B,CAAP;AACH;;AACD,aAAO,SAAS,CAAC,qBAAV,CAAgC,QAAhC,EAA0C;AAC7C,6BAD6C,yCACL,KADK,EACA;AAAA,cAArB,YAAqB,UAArB,YAAqB;AACzC,iBAAO,QAAQ,CAAC,qBAAT,CAAoC,YAApC,EAAkD,KAAlD,CAAP;AACH,SAH4C;AAI7C,iCAJ6C,6CAIa,KAJb,EAIkB;AAAA,cAAnC,YAAmC,UAAnC,YAAmC;AAAA,cAArB,KAAqB,UAArB,KAAqB;AAAA,cAAd,KAAc,UAAd,KAAc;AAC3D,iBAAO,QAAQ,CAAC,yBAAT,CAAmC,KAAnC,EAA0C;AAC7C,oBAAQ,EAAO,YAD8B;AAE7C,iBAAK,EAAO;AAFiC,WAA1C,EAGJ,KAHI,CAAP;AAIH;AAT4C,OAA1C,CAAP;AAWH,KA3UsC;AA4UvC,gCA5UuC,wCA4UV,QA5UU,EA4UA,QA5UA,EA4UQ;AAC3C,UAAI,CAAC,8BAAmB,QAAnB,CAAL,EAAmC;AAC/B,cAAM,IAAI,KAAJ,CAAU,0BAA0B,IAAI,CAAC,SAAL,CAAe,QAAf,CAApC,CAAN;AACH;;AAH0C,gCAIrB,gBAAgB,EAJK;AAAA,UAInC,SAJmC,uBAInC,SAJmC;;AAK3C,UAAI,CAAC,SAAS,CAAC,4BAAf,EAA6C;AACzC,eAAO,wBAAW,MAAX,CAAkB,YAAK,CAAI,CAA3B,CAAP;AACH;;AACD,aAAO,SAAS,CAAC,4BAAV,CAAuC,QAAvC,EAAiD;AACpD,4BADoD,wCACb,KADa,EACR;AAAA,cAArB,YAAqB,UAArB,YAAqB;AACxC,iBAAO,QAAQ,CAAC,oBAAT,CAAmC,YAAnC,EAAiD,EAAjD,EAAqD,KAArD,CAAP;AACH;AAHmD,OAAjD,CAAP;AAKH,KAzVsC;AA0VvC,kCA1VuC,0CA0VR,QA1VQ,EA0VE,QA1VF,EA0VU;AAC7C,UAAI,CAAC,8BAAmB,QAAnB,CAAL,EAAmC;AAC/B,cAAM,IAAI,KAAJ,CAAU,0BAA0B,IAAI,CAAC,SAAL,CAAe,QAAf,CAApC,CAAN;AACH;;AAH4C,gCAIvB,gBAAgB,EAJO;AAAA,UAIrC,SAJqC,uBAIrC,SAJqC;;AAK7C,UAAI,CAAC,SAAS,CAAC,8BAAf,EAA+C;AAC3C,eAAO,wBAAW,MAAX,CAAkB,YAAK,CAAI,CAA3B,CAAP;AACH;;AACD,aAAO,SAAS,CAAC,8BAAV,CAAyC,QAAzC,EAAmD;AACtD,8BADsD,0CACF,KADE,EACG;AAAA,cAAhC,YAAgC,UAAhC,YAAgC;AAAA,cAAlB,SAAkB,UAAlB,SAAkB;AACrD,iBAAO,QAAQ,CAAC,sBAAT,CAAqC,YAArC,EAAwD,SAAxD,EAAmE,KAAnE,CAAP;AACH;AAHqD,OAAnD,CAAP;AAKH,KAvWsC;AAwWvC,gBAAY,EAAE,WAxWyB;AAyWvC,2BAAuB,EAAE,WAzWc;AA0WvC,kBAAc,EAAE,WA1WuB;AA2WvC,4BAAwB,EAAE,WA3Wa;AA4WvC,0BAAsB,EAAE;AA5We,GAA3C;;AA8WA,WAAS,WAAT,CAAqB,IAArB,EAAwC,IAAxC,EAAiE;AAC7D,QAAI,OAAO,IAAP,KAAgB,QAApB,EAA8B;AAC1B,YAAM,IAAI,KAAJ,CAAU,yBAAyB,IAAI,CAAC,SAAL,CAAe,IAAf,CAAnC,CAAN;AACH;;AACD,QAAM,OAAO,GAAW,IAAxB;;AAJ6D,uCAAX,IAAW;AAAX,UAAW;AAAA;;AAK7D,QAAI,IAAI,KAAK,SAAT,IAAsB,CAAC,KAAK,CAAC,OAAN,CAAc,IAAd,CAA3B,EAAgD;AAC5C,YAAM,IAAI,KAAJ,CAAU,yBAAyB,IAAI,CAAC,SAAL,CAAe,IAAf,CAAnC,CAAN;AACH;;AACD,QAAM,OAAO,GAAyB,IAAI,IAAI,EAA9C;;AAR6D,8BAS1C,gBAAgB,EAT0B;AAAA,QASrD,MATqD,uBASrD,MATqD;;AAU7D,QAAI,CAAC,MAAL,EAAa;AACT,aAAO,OAAO,CAAC,OAAR,CAAgB,SAAhB,CAAP;AACH;;AACD,WAAO,MAAM,CAAC,WAAP,aAAM,GAAa,IAAb,EAAmB,OAAnB,SAA+B,OAA/B,EAAb;AACH;;AACD,MAAM,MAAM,GAAyB;AACjC,0BAAsB,EAAE,WAAW,CAAC,IAAZ,CAAiB,SAAjB,EAA4B,uBAAY,IAAxC,CADS;AAEjC,sBAAkB,EAAE,WAAW,CAAC,IAAZ,CAAiB,SAAjB,EAA4B,uBAAY,OAAxC,CAFa;AAGjC,oBAAgB,EAAE,WAAW,CAAC,IAAZ,CAAiB,SAAjB,EAA4B,uBAAY,KAAxC,CAHe;AAIjC,uBAJiC,+BAIb,IAJa,EAID;AAAA,gCACT,gBAAgB,EADP;AAAA,UACpB,MADoB,uBACpB,MADoB;;AAE5B,UAAM,mBAAmB,GAAG,MAAM,GAAG,MAAM,CAAC,mBAAV,GAAgC,SAAlE;AACA,UAAM,OAAO,GAA8B,mBAAmB,GAAG,mBAAmB,CAAC,IAApB,CAAyB,MAAzB,EAAiC,IAAjC,CAAH,GAA4C,SAA1G;AACA,aAAO;AACH,YAAI,EAAJ,IADG;AAEH,cAAM,EAAE,OAAO,GAAG,OAAO,CAAC,MAAR,CAAe,IAAf,CAAoB,OAApB,CAAH,GAAkC,YAAK,CAAI,CAFvD;AAGH,kBAAU,EAAE,OAAO,GAAG,OAAO,CAAC,UAAR,CAAmB,IAAnB,CAAwB,OAAxB,CAAH,GAAsC,YAAK,CAAI,CAH/D;AAIH,aAAK,EAAE,WAJJ;AAKH,YAAI,EAAE,cAAC,GAAD,EAAa;AACf,cAAI,GAAG,KAAK,SAAR,IAAqB,OAAO,GAAP,KAAe,SAAxC,EAAmD;AAC/C,kBAAM,IAAI,KAAJ,CAAU,wCAAwC,IAAI,CAAC,SAAL,CAAe,GAAf,EAAoB,SAApB,EAA+B,CAA/B,CAAlD,CAAN;AACH;;AACD,iBAAO,OAAO,GAAG,OAAO,CAAC,IAAR,CAAa,GAAb,CAAH,GAAuB,YAAK,CAAI,CAA9C;AACH,SAVE;AAWH,YAAI,EAAE,WAXH;AAYH,eAAO,EAAE,OAAO,GAAG,OAAO,CAAC,OAAR,CAAgB,IAAhB,CAAqB,OAArB,CAAH,GAAmC,YAAK,CAAI;AAZzD,OAAP;AAcH,KAtBgC;AAuBjC,gBAAY,EAAE,sBAAC,OAAD,EAAU,IAAV,EAAkB;AAAA,gCACT,gBAAgB,EADP;AAAA,UACpB,MADoB,uBACpB,MADoB;;AAE5B,UAAI,MAAM,IAAI,MAAM,CAAC,YAArB,EAAmC;AAC/B,eAAO,MAAM,CAAC,YAAP,CAAoB,OAApB,EAA6B,IAA7B,CAAP;AACH;;AACD,aAAO,IAAI,CAAC;AAAE,cAAM,EAAE,kBAAK,CAAI;AAAnB,OAAD,EAAwB,IAAI,MAAM,CAAC,uBAAX,GAAqC,KAA7D,CAAX;AACH,KA7BgC;AA8BjC,oBAAgB,EAAE,WA9Be;AA+BjC,kCAA8B,EAAE,WA/BC;AAgCjC,iBAAa,EAAE,WAhCkB;AAiCjC,2BAAuB,EAAE,WAjCQ;AAkCjC,kBAAc,EAAE,WAlCiB;AAmCjC,kBAAc,EAAE,WAnCiB;AAoCjC,gBAAY,EAAE,WApCmB;AAqCjC,sBAAkB,EAAE,WArCa;AAsCjC,uBAAmB,EAAE,WAtCY;AAuCjC,mBAAe,EAAE,WAvCgB;AAwCjC,uBAAmB,EAAE,WAxCY;AAyCjC,kBAAc,EAAE,WAzCiB;AA0CjC,4BAAwB,EAAE,WA1CO;AA2CjC,kBAAc,EAAE,WA3CiB;AA4CjC,kCAA8B,EAAE,WA5CC;;AA6CjC,QAAI,gBAAJ,GAAoB;AAChB,aAAO,WAAW,EAAlB;AACH,KA/CgC;;AAgDjC,QAAI,kBAAJ,GAAsB;AAClB,aAAO,WAAW,EAAlB;AACH,KAlDgC;;AAmDjC,+BAA2B,EAAE,WAnDI;AAoDjC,iCAA6B,EAAE,WApDE;AAqDjC,kCAA8B,EAAE,WArDC;AAsDjC,sCAAkC,EAAE,WAtDH;AAuDjC,gCAA4B,EAAE,WAvDG;AAwDjC,mCAA+B,EAAE,WAxDA;;AAyDjC,QAAI,SAAJ,GAAa;AACT,aAAO,WAAW,EAAlB;AACH,KA3DgC;;AA4DjC,QAAI,cAAJ,GAAkB;AACd,aAAO,WAAW,EAAlB;AACH,KA9DgC;;AA+DjC,6BAAyB,EAAE,WA/DM;AAgEjC,qBAAiB,EAAE,WAhEc;AAiEjC,sBAAkB,EAAE,WAjEa;;AAkEjC,QAAI,KAAJ,GAAS;AACL,aAAO,WAAW,EAAlB;AACH,KApEgC;;AAqEjC,0BAAsB,EAAE,WArES;AAsEjC,mBAAe,EAAE,WAtEgB;AAuEjC,kBAAc,EAAE,WAvEiB;AAwEjC,sBAAkB,EAAE;AAxEa,GAArC;AA0EA,MAAM,QAAQ,GAA2B;AACrC,mBADqC,2BACrB,OADqB,EACZ,QADY,EACF,OADE,EACK;AAAA,gCACjB,gBAAgB,EADC;AAAA,UAC9B,QAD8B,uBAC9B,QAD8B;;AAEtC,UAAI,CAAC,QAAL,EAAe;AACX,eAAO,wBAAW,MAAX,CAAkB,YAAK,CAAI,CAA3B,CAAP;AACH;;AACD,aAAO,QAAQ,CAAC,eAAT,CAAyB,OAAzB,EAAkC,QAAlC,EAA4C,OAA5C,CAAP;AACH,KAPoC;AAQrC,6BAAyB,EAAE,WARU;AASrC,kBAAc,EAAE,WATqB;AAUrC,eAAW,EAAE;AAVwB,GAAzC;;AAvnB+D,MAmoBzD,cAnoByD;AAooB3D,4BAAmB,aAAnB,EAA0C;AAAA;;AAAvB;AAA4B;;AApoBY;AAAA;AAAA,gCAqoBpD;AACH,aAAK,aAAL;AACH;AAvoB0D;;AAAA;AAAA;;AAyoB/D,SAAO;AACH,aAAS,EAAT,SADG;AAEH,aAAS,EAAT,SAFG;AAGH,UAAM,EAAN,MAHG;AAIH,YAAQ,EAAR,QAJG;AAKH,OAAG,EAAH,GALG;AAMH,kBAAc,EAAd,cANG;AAOH,YAAQ,EAAR,QAPG;AAQH,gBAAY,EAAZ,YARG;AASH,kBAAc,EAAd,cATG;AAUH,cAAU,EAAE;AAVT,GAAP;AAYH;;AArpBD,0C;;;;;;;;;;;;;ACbA;;;;;AAIA;;AACA;;AAEA,iBAAS,6BAAgB,oBAAS,GAAzB,CAAT,C;;;;;;;;;;;ACPA,SAAS,mBAAO,CAAC,wCAAM;AACvB,SAAS,mBAAO,CAAC,wCAAM;;AAEvB;AACA;AACA;;AAEA;;;;;;;;;;;;ACPA;AACA;AACA;AACA;AACA;AACA,eAAe,SAAS;AACxB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;;;;;;ACzBA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,iCAAiC;;AAEjC;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;;AAEA;AACA,sBAAsB,QAAQ;AAC9B;AACA;AACA;;AAEA;AACA;AACA;;;;;;;;;;;;ACjCA,UAAU,mBAAO,CAAC,0DAAW;AAC7B,kBAAkB,mBAAO,CAAC,kEAAmB;;AAE7C;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,mCAAmC;AACnC;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA,iBAAiB,OAAO;AACxB;AACA;;AAEA;AACA;;AAEA;;;;;;;;;;;;AC5GA,UAAU,mBAAO,CAAC,0DAAW;AAC7B,kBAAkB,mBAAO,CAAC,kEAAmB;;AAE7C;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,oBAAoB,SAAS;AAC7B;AACA;AACA;;AAEA;AACA;;AAEA;;;;;;;;;;;;;AC5BA;;;;AAIa;;;;;;;;;;;;;;;;;;;;;;;;;;AACb,SAASA,QAAT,CAAkBC,CAAlB,EAAqB;AACjB,OAAK,IAAIC,CAAT,IAAcD,CAAd;AAAiB,QAAI,CAACE,OAAO,CAACC,cAAR,CAAuBF,CAAvB,CAAL,EAAgCC,OAAO,CAACD,CAAD,CAAP,GAAaD,CAAC,CAACC,CAAD,CAAd;AAAjD;AACH;;AACDG,MAAM,CAACC,cAAP,CAAsBH,OAAtB,EAA+B,YAA/B,EAA6C;AAAEI,OAAK,EAAE;AAAT,CAA7C;;AACA,IAAMC,QAAQ,GAAGC,mBAAO,CAAC,iFAAD,CAAxB;;AACA,IAAMC,gCAAgC,GAAGD,mBAAO,CAAC,kGAAD,CAAhD;;AACA,IAAME,GAAG,GAAGF,mBAAO,CAAC,mFAAD,CAAnB;;AACA,IAAMG,GAAG,GAAGH,mBAAO,CAAC,2FAAD,CAAnB;;AACA,IAAMI,EAAE,GAAGJ,mBAAO,CAAC,yEAAD,CAAlB;;AACA,IAAMK,OAAO,GAAGL,mBAAO,CAAC,+EAAD,CAAvB;;AACA,IAAMM,IAAI,GAAGN,mBAAO,CAAC,6EAAD,CAApB;;AACA,IAAMO,cAAc,GAAGP,mBAAO,CAAC,iFAAD,CAA9B;;AACAT,QAAQ,CAACS,mBAAO,CAAC,kGAAD,CAAR,CAAR;;IACMQ,a;;;;;;;0BACIC,O,EAAS;AACXC,aAAO,CAACC,KAAR,CAAcF,OAAd;AACH;;;yBACIA,O,EAAS;AACVC,aAAO,CAACE,IAAR,CAAaH,OAAb;AACH;;;yBACIA,O,EAAS;AACVC,aAAO,CAACG,IAAR,CAAaJ,OAAb;AACH;;;wBACGA,O,EAAS;AACTC,aAAO,CAACI,GAAR,CAAYL,OAAZ;AACH;;;;;;AAEL,SAASM,iBAAT,CAA0BC,KAA1B,EAAiCC,MAAjC,EAAyCC,YAAzC,EAAuDC,YAAvD,EAAqE;AACjE,MAAIC,MAAM,GAAG,IAAIZ,aAAJ,EAAb;AACA,MAAIa,UAAU,GAAGpB,gCAAgC,CAACqB,wBAAjC,CAA0DN,KAA1D,EAAiEC,MAAjE,EAAyEG,MAAzE,CAAjB;AACAC,YAAU,CAACE,OAAX,CAAmB,UAACC,IAAD,EAAU;AAAEN,gBAAY,CAACM,IAAI,CAAC,CAAD,CAAL,EAAUA,IAAI,CAAC,CAAD,CAAd,EAAmBA,IAAI,CAAC,CAAD,CAAvB,CAAZ;AAA0C,GAAzE;AACAH,YAAU,CAACI,OAAX,CAAmBN,YAAnB;AACA,MAAIO,MAAM,GAAG;AACTC,UAAM,EAAE;AAAA,aAAMN,UAAU,CAACM,MAAX,EAAN;AAAA,KADC;AAETC,eAAW,EAAE,qBAACC,IAAD;AAAA,wCAAUC,MAAV;AAAUA,cAAV;AAAA;;AAAA,aAAqBT,UAAU,CAACO,WAAX,OAAAP,UAAU,GAAajB,EAAE,CAAC2B,MAAH,CAAUF,IAAV,IAAkBA,IAAlB,GAAyBA,IAAI,CAACG,MAA3C,SAAsDF,MAAtD,EAA/B;AAAA,KAFJ;AAGTG,aAAS,EAAE,mBAACJ,IAAD,EAAOK,OAAP;AAAA,aAAmBb,UAAU,CAACY,SAAX,CAAqB7B,EAAE,CAAC2B,MAAH,CAAUF,IAAV,IAAkBA,IAAlB,GAAyBA,IAAI,CAACG,MAAnD,EAA2DE,OAA3D,CAAnB;AAAA,KAHF;AAITC,oBAAgB,EAAE,0BAACN,IAAD,EAAOC,MAAP;AAAA,aAAkBT,UAAU,CAACc,gBAAX,CAA4B/B,EAAE,CAAC2B,MAAH,CAAUF,IAAV,IAAkBA,IAAlB,GAAyBA,IAAI,CAACG,MAA1D,EAAkEF,MAAlE,CAAlB;AAAA,KAJT;AAKTM,kBAAc,EAAE,wBAACP,IAAD,EAAOK,OAAP;AAAA,aAAmBb,UAAU,CAACe,cAAX,CAA0BhC,EAAE,CAAC2B,MAAH,CAAUF,IAAV,IAAkBA,IAAlB,GAAyBA,IAAI,CAACG,MAAxD,EAAgEE,OAAhE,CAAnB;AAAA,KALP;AAMTG,cAAU,EAAEhB,UAAU,CAACgB,UANd;AAOTC,gBAAY,EAAEjB,UAAU,CAACiB,YAPhB;AAQTC,SAAK,EAAE,eAACzC,KAAD,EAAQ0C,MAAR,EAAgBC,8BAAhB,EAAmD;AACtD,UAAMC,mBAAmB,GAAG;AACxBP,wBAAgB,EAAE,KADM;AAExBQ,mBAAW,EAAE1C,gCAAgC,CAAC2C,WAAjC,CAA6CC;AAFlC,OAA5B;;AAIA,UAAIJ,8BAA8B,KAAK,KAAK,CAA5C,EAA+C;AAC3CpB,kBAAU,CAACkB,KAAX,CAAiBzC,KAAjB,EAAwB0C,MAAxB,EAAgCE,mBAAhC;AACH,OAFD,MAGK,IAAItC,EAAE,WAAF,CAAWqC,8BAAX,CAAJ,EAAgD;AACjDpB,kBAAU,CAACkB,KAAX,CAAiBzC,KAAjB,EAAwB0C,MAAxB,EAAgCC,8BAAhC;AACH,OAFI,MAGA;AACDpB,kBAAU,CAACkB,KAAX,CAAiBzC,KAAjB,EAAwB0C,MAAxB,EAAgCC,8BAAhC;AACH;AACJ,KAtBQ;AAuBTK,cAAU,EAAE,oBAAChB,MAAD;AAAA,aAAYT,UAAU,CAACO,WAAX,CAAuB3B,gCAAgC,CAAC8C,iBAAjC,CAAmDlB,IAA1E,EAAgFC,MAAhF,CAAZ;AAAA,KAvBH;AAwBTkB,YAAQ,EAAE;AAAA,aAAM3B,UAAU,CAACO,WAAX,CAAuB3B,gCAAgC,CAACgD,eAAjC,CAAiDpB,IAAxE,EAA8EqB,SAA9E,CAAN;AAAA,KAxBD;AAyBTC,QAAI,EAAE;AAAA,aAAM9B,UAAU,CAACc,gBAAX,CAA4BlC,gCAAgC,CAACmD,gBAAjC,CAAkDvB,IAA9E,CAAN;AAAA,KAzBG;AA0BTwB,gBAAY,EAAE,sBAACnB,OAAD;AAAA,aAAab,UAAU,CAACe,cAAX,CAA0BnC,gCAAgC,CAACqD,sBAAjC,CAAwDzB,IAAlF,EAAwFK,OAAxF,CAAb;AAAA,KA1BL;AA2BTqB,iBAAa,EAAE,uBAACrB,OAAD;AAAA,aAAab,UAAU,CAACe,cAAX,CAA0BnC,gCAAgC,CAACuD,uBAAjC,CAAyD3B,IAAnF,EAAyFK,OAAzF,CAAb;AAAA,KA3BN;AA4BTuB,eAAW,EAAE,qBAACvB,OAAD;AAAA,aAAab,UAAU,CAACe,cAAX,CAA0BnC,gCAAgC,CAACyD,0BAAjC,CAA4D7B,IAAtF,EAA4FK,OAA5F,CAAb;AAAA,KA5BJ;AA6BTyB,0BAAsB,EAAE,gCAAC7B,MAAD;AAAA,aAAYT,UAAU,CAACc,gBAAX,CAA4BlC,gCAAgC,CAAC2D,kCAAjC,CAAoE/B,IAAhG,EAAsGC,MAAtG,CAAZ;AAAA,KA7Bf;AA8BT+B,yBAAqB,EAAE,+BAAC/B,MAAD;AAAA,aAAYT,UAAU,CAACc,gBAAX,CAA4BlC,gCAAgC,CAAC6D,iCAAjC,CAAmEjC,IAA/F,EAAqGC,MAArG,CAAZ;AAAA,KA9Bd;AA+BTiC,uBAAmB,EAAE,6BAACjC,MAAD;AAAA,aAAYT,UAAU,CAACc,gBAAX,CAA4BlC,gCAAgC,CAAC+D,+BAAjC,CAAiEnC,IAA7F,EAAmGC,MAAnG,CAAZ;AAAA,KA/BZ;AAgCTmC,yBAAqB,EAAE,+BAACnC,MAAD;AAAA,aAAYT,UAAU,CAACc,gBAAX,CAA4BlC,gCAAgC,CAACiE,iCAAjC,CAAmErC,IAA/F,EAAqGC,MAArG,CAAZ;AAAA,KAhCd;AAiCTqC,wBAAoB,EAAE,8BAACrC,MAAD;AAAA,aAAYT,UAAU,CAACc,gBAAX,CAA4BlC,gCAAgC,CAACmE,gCAAjC,CAAkEvC,IAA9F,EAAoGC,MAApG,CAAZ;AAAA,KAjCb;AAkCTuC,uBAAmB,EAAE,6BAACvC,MAAD;AAAA,aAAYT,UAAU,CAACc,gBAAX,CAA4BlC,gCAAgC,CAACqE,+BAAjC,CAAiEzC,IAA7F,EAAmGC,MAAnG,CAAZ;AAAA,KAlCZ;AAmCTyC,iBAAa,EAAE,uBAACrC,OAAD;AAAA,aAAab,UAAU,CAACe,cAAX,CAA0BnC,gCAAgC,CAACuE,8BAAjC,CAAgE3C,IAA1F,EAAgGK,OAAhG,CAAb;AAAA,KAnCN;AAoCTuC,WAAO,EAAE;AAAA,aAAMpD,UAAU,CAACoD,OAAX,EAAN;AAAA;AApCA,GAAb;AAsCA,SAAO/C,MAAP;AACH;AACD;;;;;AAGA,IAAIgD,WAAJ;;AACA,CAAC,UAAUA,WAAV,EAAuB;AACpB;;;AAGAA,aAAW,CAACA,WAAW,CAAC,UAAD,CAAX,GAA0B,CAA3B,CAAX,GAA2C,UAA3C;AACA;;;;AAGAA,aAAW,CAACA,WAAW,CAAC,UAAD,CAAX,GAA0B,CAA3B,CAAX,GAA2C,UAA3C;AACH,CATD,EASGA,WAAW,GAAGhF,OAAO,CAACgF,WAAR,KAAwBhF,OAAO,CAACgF,WAAR,GAAsB,EAA9C,CATjB;AAUA;;;;;AAGA,IAAIC,WAAJ;;AACA,CAAC,UAAUA,WAAV,EAAuB;AACpB;;;AAGAA,aAAW,CAACA,WAAW,CAAC,cAAD,CAAX,GAA8B,CAA/B,CAAX,GAA+C,cAA/C;AACA;;;;AAGAA,aAAW,CAACA,WAAW,CAAC,SAAD,CAAX,GAAyB,CAA1B,CAAX,GAA0C,SAA1C;AACH,CATD,EASGA,WAAW,GAAGjF,OAAO,CAACiF,WAAR,KAAwBjF,OAAO,CAACiF,WAAR,GAAsB,EAA9C,CATjB;;IAUMC,mB;AACF,+BAAYC,IAAZ,EAAkB;AAAA;;AACd,SAAKA,IAAL,GAAYA,IAAZ;AACA,SAAKC,QAAL,GAAgB,EAAhB;AACH;;;;0BACKC,M,EAAQC,Q,EAAUC,K,EAAO;AAC3B,UAAIA,KAAK,IAAIA,KAAK,IAAI,CAAtB,EAAyB;AACrB,eAAOP,WAAW,CAACQ,QAAnB;AACH;;AACD,aAAOR,WAAW,CAACS,QAAnB;AACH;;;6BACQ;AACL,WAAKL,QAAL,CAAcM,IAAd,CAAmBC,IAAI,CAACC,GAAL,EAAnB;;AACA,UAAI,KAAKR,QAAL,CAAcS,MAAd,GAAuB,CAA3B,EAA8B;AAC1B,eAAOZ,WAAW,CAACa,OAAnB;AACH,OAFD,MAGK;AACD,YAAIC,IAAI,GAAG,KAAKX,QAAL,CAAc,KAAKA,QAAL,CAAcS,MAAd,GAAuB,CAArC,IAA0C,KAAKT,QAAL,CAAc,CAAd,CAArD;;AACA,YAAIW,IAAI,IAAI,IAAI,EAAJ,GAAS,IAArB,EAA2B;AACvB1F,kBAAQ,CAAC2F,MAAT,CAAgBC,gBAAhB,eAAwC,KAAKd,IAA7C;AACA,iBAAOF,WAAW,CAACiB,YAAnB;AACH,SAHD,MAIK;AACD,eAAKd,QAAL,CAAce,KAAd;AACA,iBAAOlB,WAAW,CAACa,OAAnB;AACH;AACJ;AACJ;;;;;;AAEL,IAAIM,qBAAJ;;AACA,CAAC,UAAUA,qBAAV,EAAiC;AAC9BA,uBAAqB,CAACA,qBAAqB,CAAC,MAAD,CAArB,GAAgC,CAAjC,CAArB,GAA2D,MAA3D;AACAA,uBAAqB,CAACA,qBAAqB,CAAC,MAAD,CAArB,GAAgC,CAAjC,CAArB,GAA2D,MAA3D;AACAA,uBAAqB,CAACA,qBAAqB,CAAC,OAAD,CAArB,GAAiC,CAAlC,CAArB,GAA4D,OAA5D;AACAA,uBAAqB,CAACA,qBAAqB,CAAC,OAAD,CAArB,GAAiC,CAAlC,CAArB,GAA4D,OAA5D;AACH,CALD,EAKGA,qBAAqB,GAAGpG,OAAO,CAACoG,qBAAR,KAAkCpG,OAAO,CAACoG,qBAAR,GAAgC,EAAlE,CAL3B;;AAMA,IAAIC,KAAJ;;AACA,CAAC,UAAUA,KAAV,EAAiB;AACdA,OAAK,CAACA,KAAK,CAAC,SAAD,CAAL,GAAmB,CAApB,CAAL,GAA8B,SAA9B;AACAA,OAAK,CAACA,KAAK,CAAC,UAAD,CAAL,GAAoB,CAArB,CAAL,GAA+B,UAA/B;AACAA,OAAK,CAACA,KAAK,CAAC,SAAD,CAAL,GAAmB,CAApB,CAAL,GAA8B,SAA9B;AACH,CAJD,EAIGA,KAAK,GAAGrG,OAAO,CAACqG,KAAR,KAAkBrG,OAAO,CAACqG,KAAR,GAAgB,EAAlC,CAJX;;AAKA,IAAIC,WAAJ;;AACA,CAAC,UAAUA,WAAV,EAAuB;AACpBA,aAAW,CAACA,WAAW,CAAC,SAAD,CAAX,GAAyB,CAA1B,CAAX,GAA0C,SAA1C;AACAA,aAAW,CAACA,WAAW,CAAC,UAAD,CAAX,GAA0B,CAA3B,CAAX,GAA2C,UAA3C;AACAA,aAAW,CAACA,WAAW,CAAC,aAAD,CAAX,GAA6B,CAA9B,CAAX,GAA8C,aAA9C;AACAA,aAAW,CAACA,WAAW,CAAC,SAAD,CAAX,GAAyB,CAA1B,CAAX,GAA0C,SAA1C;AACAA,aAAW,CAACA,WAAW,CAAC,UAAD,CAAX,GAA0B,CAA3B,CAAX,GAA2C,UAA3C;AACAA,aAAW,CAACA,WAAW,CAAC,SAAD,CAAX,GAAyB,CAA1B,CAAX,GAA0C,SAA1C;AACH,CAPD,EAOGA,WAAW,KAAKA,WAAW,GAAG,EAAnB,CAPd;;AAQA,IAAMC,oBAAoB,GAAG,CACzBhG,gCAAgC,CAACiG,UAAjC,CAA4CC,IADnB,EAEzBlG,gCAAgC,CAACiG,UAAjC,CAA4CE,MAFnB,EAGzBnG,gCAAgC,CAACiG,UAAjC,CAA4CG,SAHnB,EAIzBpG,gCAAgC,CAACiG,UAAjC,CAA4CI,OAJnB,EAKzBrG,gCAAgC,CAACiG,UAAjC,CAA4CK,KALnB,EAMzBtG,gCAAgC,CAACiG,UAAjC,CAA4CM,MANnB,EAOzBvG,gCAAgC,CAACiG,UAAjC,CAA4CO,QAPnB,EAQzBxG,gCAAgC,CAACiG,UAAjC,CAA4CQ,KARnB,EASzBzG,gCAAgC,CAACiG,UAAjC,CAA4CS,WATnB,EAUzB1G,gCAAgC,CAACiG,UAAjC,CAA4CU,IAVnB,EAWzB3G,gCAAgC,CAACiG,UAAjC,CAA4CW,SAXnB,EAYzB5G,gCAAgC,CAACiG,UAAjC,CAA4CY,QAZnB,EAazB7G,gCAAgC,CAACiG,UAAjC,CAA4Ca,QAbnB,EAczB9G,gCAAgC,CAACiG,UAAjC,CAA4Cc,QAdnB,EAezB/G,gCAAgC,CAACiG,UAAjC,CAA4Ce,MAfnB,EAgBzBhH,gCAAgC,CAACiG,UAAjC,CAA4CgB,MAhBnB,EAiBzBjH,gCAAgC,CAACiG,UAAjC,CAA4CiB,OAjBnB,EAkBzBlH,gCAAgC,CAACiG,UAAjC,CAA4CkB,KAlBnB,EAmBzBnH,gCAAgC,CAACiG,UAAjC,CAA4CtG,MAnBnB,EAoBzBK,gCAAgC,CAACiG,UAAjC,CAA4CmB,GApBnB,EAqBzBpH,gCAAgC,CAACiG,UAAjC,CAA4CoB,IArBnB,EAsBzBrH,gCAAgC,CAACiG,UAAjC,CAA4CqB,UAtBnB,EAuBzBtH,gCAAgC,CAACiG,UAAjC,CAA4CsB,MAvBnB,EAwBzBvH,gCAAgC,CAACiG,UAAjC,CAA4CuB,KAxBnB,EAyBzBxH,gCAAgC,CAACiG,UAAjC,CAA4CwB,QAzBnB,EA0BzBzH,gCAAgC,CAACiG,UAAjC,CAA4CyB,aA1BnB,CAA7B;AA4BA,IAAMC,4BAA4B,GAAG,CACjC3H,gCAAgC,CAAC4H,kBAAjC,CAAoDhF,IADnB,EAEjC5C,gCAAgC,CAAC4H,kBAAjC,CAAoDrB,MAFnB,EAGjCvG,gCAAgC,CAAC4H,kBAAjC,CAAoDf,QAHnB,EAIjC7G,gCAAgC,CAAC4H,kBAAjC,CAAoDlB,WAJnB,EAKjC1G,gCAAgC,CAAC4H,kBAAjC,CAAoDnB,KALnB,EAMjCzG,gCAAgC,CAAC4H,kBAAjC,CAAoDd,QANnB,EAOjC9G,gCAAgC,CAAC4H,kBAAjC,CAAoDtB,KAPnB,EAQjCtG,gCAAgC,CAAC4H,kBAAjC,CAAoDhB,SARnB,EASjC5G,gCAAgC,CAAC4H,kBAAjC,CAAoDzB,MATnB,EAUjCnG,gCAAgC,CAAC4H,kBAAjC,CAAoDpB,QAVnB,EAWjCxG,gCAAgC,CAAC4H,kBAAjC,CAAoDC,IAXnB,EAYjC7H,gCAAgC,CAAC4H,kBAAjC,CAAoDE,KAZnB,EAajC9H,gCAAgC,CAAC4H,kBAAjC,CAAoDjB,IAbnB,EAcjC3G,gCAAgC,CAAC4H,kBAAjC,CAAoDG,OAdnB,EAejC/H,gCAAgC,CAAC4H,kBAAjC,CAAoDI,OAfnB,EAgBjChI,gCAAgC,CAAC4H,kBAAjC,CAAoDK,KAhBnB,EAiBjCjI,gCAAgC,CAAC4H,kBAAjC,CAAoD1B,IAjBnB,EAkBjClG,gCAAgC,CAAC4H,kBAAjC,CAAoDM,SAlBnB,EAmBjClI,gCAAgC,CAAC4H,kBAAjC,CAAoDO,MAnBnB,EAoBjCnI,gCAAgC,CAAC4H,kBAAjC,CAAoDN,UApBnB,EAqBjCtH,gCAAgC,CAAC4H,kBAAjC,CAAoDb,QArBnB,EAsBjC/G,gCAAgC,CAAC4H,kBAAjC,CAAoDL,MAtBnB,EAuBjCvH,gCAAgC,CAAC4H,kBAAjC,CAAoDJ,KAvBnB,EAwBjCxH,gCAAgC,CAAC4H,kBAAjC,CAAoDH,QAxBnB,EAyBjCzH,gCAAgC,CAAC4H,kBAAjC,CAAoDF,aAzBnB,CAArC;;AA2BA,SAASU,MAAT,CAAgBC,MAAhB,EAAwBC,GAAxB,EAA6B;AACzB,MAAID,MAAM,CAACC,GAAD,CAAN,KAAgB,KAAK,CAAzB,EAA4B;AACxBD,UAAM,CAACC,GAAD,CAAN,GAAc,EAAd;AACH;;AACD,SAAOD,MAAM,CAACC,GAAD,CAAb;AACH;;AACD,IAAIC,cAAJ;;AACA,CAAC,UAAUA,cAAV,EAA0B;AACvB,WAASC,EAAT,CAAY3I,KAAZ,EAAmB;AACf,QAAI4I,SAAS,GAAG5I,KAAhB;AACA,WAAO4I,SAAS,IAAItI,EAAE,CAACuI,IAAH,CAAQD,SAAS,CAACE,QAAlB,CAAb,IAA4CxI,EAAE,CAACuI,IAAH,CAAQD,SAAS,CAACG,UAAlB,CAA5C,IAA6EzI,EAAE,CAACuI,IAAH,CAAQD,SAAS,CAACjE,OAAlB,CAA7E,IAA2GiE,SAAS,CAACI,QAAV,KAAuB,KAAK,CAA9I;AACH;;AACDN,gBAAc,CAACC,EAAf,GAAoBA,EAApB;AACH,CAND,EAMGD,cAAc,KAAKA,cAAc,GAAG,EAAtB,CANjB;;IAOMO,qB;AACF,iCAAYC,OAAZ,EAAqBC,MAArB,EAA6BC,KAA7B,EAAoCC,WAApC,EAAiDC,aAAjD,EAAgEC,eAAhE,EAAiF;AAAA;;AAC7E,SAAKL,OAAL,GAAeA,OAAf;AACA,SAAKC,MAAL,GAAcA,MAAd;AACA,SAAKC,KAAL,GAAaA,KAAb;AACA,SAAKC,WAAL,GAAmBA,WAAnB;AACA,SAAKC,aAAL,GAAqBA,aAArB;AACA,SAAKC,eAAL,GAAuBA,eAAvB;AACA,SAAKC,UAAL,GAAkB,IAAIC,GAAJ,EAAlB;AACH;;;;6BASQvE,Q,EAAUxD,I,EAAM;AACrB,UAAI,CAACA,IAAI,CAACgI,eAAL,CAAqBC,gBAA1B,EAA4C;AACxC;AACH;;AACD,UAAI,CAAC,KAAKC,SAAV,EAAqB;AACjB,aAAKA,SAAL,GAAiB,KAAKT,MAAL,CAAY,KAAKU,QAAjB,EAA2B,IAA3B,CAAjB;AACH;;AACD,WAAKL,UAAL,CAAgBM,GAAhB,CAAoBpI,IAAI,CAACqI,EAAzB,EAA6BrI,IAAI,CAACgI,eAAL,CAAqBC,gBAAlD;AACH;;;6BACQjI,I,EAAM;AAAA;;AACX,UAAI,CAAC,KAAK6H,eAAN,IAAyB,KAAKA,eAAL,CAAqB,KAAKC,UAAL,CAAgBQ,MAAhB,EAArB,EAA+CtI,IAA/C,CAA7B,EAAmF;AAC/E,YAAI,KAAK2H,WAAT,EAAsB;AAClB,eAAKA,WAAL,CAAiB3H,IAAjB,EAAuB,UAACA,IAAD;AAAA,mBAAU,KAAI,CAACwH,OAAL,CAAa7G,gBAAb,CAA8B,KAAI,CAAC+G,KAAnC,EAA0C,KAAI,CAACE,aAAL,CAAmB5H,IAAnB,CAA1C,CAAV;AAAA,WAAvB;AACH,SAFD,MAGK;AACD,eAAKwH,OAAL,CAAa7G,gBAAb,CAA8B,KAAK+G,KAAnC,EAA0C,KAAKE,aAAL,CAAmB5H,IAAnB,CAA1C;AACH;;AACD,aAAKuI,gBAAL,CAAsBvI,IAAtB;AACH;AACJ;;;qCACgBwI,K,EAAO,CACvB;;;+BACUH,E,EAAI;AACX,WAAKP,UAAL,WAAuBO,EAAvB;;AACA,UAAI,KAAKP,UAAL,CAAgBW,IAAhB,KAAyB,CAAzB,IAA8B,KAAKP,SAAvC,EAAkD;AAC9C,aAAKA,SAAL,CAAejF,OAAf;;AACA,aAAKiF,SAAL,GAAiBxG,SAAjB;AACH;AACJ;;;8BACS;AACN,WAAKoG,UAAL,CAAgBY,KAAhB;;AACA,UAAI,KAAKR,SAAT,EAAoB;AAChB,aAAKA,SAAL,CAAejF,OAAf;;AACA,aAAKiF,SAAL,GAAiBxG,SAAjB;AACH;AACJ;;;uCA3CyBiH,S,EAAWC,Y,EAAc;AAAA,iDACxBD,SADwB;AAAA;;AAAA;AAC/C,4DAAkC;AAAA,cAAvBE,QAAuB;;AAC9B,cAAItK,QAAQ,CAACuK,SAAT,CAAmBC,KAAnB,CAAyBF,QAAzB,EAAmCD,YAAnC,CAAJ,EAAsD;AAClD,mBAAO,IAAP;AACH;AACJ;AAL8C;AAAA;AAAA;AAAA;AAAA;;AAM/C,aAAO,KAAP;AACH;;;;;;IAsCCI,0B;;;;;AACF,sCAAYC,MAAZ,EAAoBC,gBAApB,EAAsC;AAAA;;AAAA;;AAClC,+BAAMD,MAAN,EAAc1K,QAAQ,CAAC4K,SAAT,CAAmBC,qBAAjC,EAAwD3K,gCAAgC,CAAC+D,+BAAjC,CAAiEnC,IAAzH,EAA+H4I,MAAM,CAACI,aAAP,CAAqBC,UAArB,CAAgCC,OAA/J,EAAwK,UAACX,YAAD;AAAA,aAAkBK,MAAM,CAACO,sBAAP,CAA8BC,wBAA9B,CAAuDb,YAAvD,CAAlB;AAAA,KAAxK,EAAgQrB,qBAAqB,CAACmC,kBAAtR;AACA,WAAKR,gBAAL,GAAwBA,gBAAxB;AAFkC;AAGrC;;;;2CAIsBS,Y,EAAc;AACjC9C,YAAM,CAACA,MAAM,CAAC8C,YAAD,EAAe,cAAf,CAAP,EAAuC,iBAAvC,CAAN,CAAgEC,mBAAhE,GAAsF,IAAtF;AACH;;;+BACUD,Y,EAAc1B,gB,EAAkB;AACvC,UAAI4B,uBAAuB,GAAGF,YAAY,CAACG,wBAA3C;;AACA,UAAI7B,gBAAgB,IAAI4B,uBAApB,IAA+CA,uBAAuB,CAACE,SAA3E,EAAsF;AAClF,aAAK3C,QAAL,CAAc,KAAKE,QAAnB,EAA6B;AAAEe,YAAE,EAAEvJ,IAAI,CAACkL,YAAL,EAAN;AAA2BhC,yBAAe,EAAE;AAAEC,4BAAgB,EAAEA;AAApB;AAA5C,SAA7B;AACH;AACJ;;;6BACQhJ,O,EAASe,I,EAAM;AAAA;;AACpB,+FAAef,OAAf,EAAwBe,IAAxB;;AACA,UAAI,CAACA,IAAI,CAACgI,eAAL,CAAqBC,gBAA1B,EAA4C;AACxC;AACH;;AACD,UAAIA,gBAAgB,GAAGjI,IAAI,CAACgI,eAAL,CAAqBC,gBAA5C;AACA1J,cAAQ,CAAC4K,SAAT,CAAmBc,aAAnB,CAAiCC,OAAjC,CAAyC,UAACtB,YAAD,EAAkB;AACvD,YAAIuB,GAAG,GAAGvB,YAAY,CAACuB,GAAb,CAAiBC,QAAjB,EAAV;;AACA,YAAI,MAAI,CAAClB,gBAAL,CAAsBmB,GAAtB,CAA0BF,GAA1B,CAAJ,EAAoC;AAChC;AACH;;AACD,YAAI5L,QAAQ,CAACuK,SAAT,CAAmBC,KAAnB,CAAyBd,gBAAzB,EAA2CW,YAA3C,CAAJ,EAA8D;AAC1D,cAAIU,UAAU,GAAG,MAAI,CAAC9B,OAAL,CAAa6B,aAAb,CAA2BC,UAA5C;;AACA,cAAIC,OAAO,GAAG,SAAVA,OAAU,CAACX,YAAD,EAAkB;AAC5B,kBAAI,CAACpB,OAAL,CAAa7G,gBAAb,CAA8B,MAAI,CAAC+G,KAAnC,EAA0C,MAAI,CAACE,aAAL,CAAmBgB,YAAnB,CAA1C;AACH,WAFD;;AAGA,cAAIU,UAAU,CAACC,OAAf,EAAwB;AACpBD,sBAAU,CAACC,OAAX,CAAmBX,YAAnB,EAAiCW,OAAjC;AACH,WAFD,MAGK;AACDA,mBAAO,CAACX,YAAD,CAAP;AACH;;AACD,gBAAI,CAACM,gBAAL,CAAsBd,GAAtB,CAA0B+B,GAA1B,EAA+BvB,YAA/B;AACH;AACJ,OAlBD;AAmBH;;;qCACgBA,Y,EAAc;AAC3B,uGAAuBA,YAAvB;;AACA,WAAKM,gBAAL,CAAsBd,GAAtB,CAA0BQ,YAAY,CAACuB,GAAb,CAAiBC,QAAjB,EAA1B,EAAuDxB,YAAvD;AACH;;;wBAzCc;AACX,aAAOnK,gCAAgC,CAAC+D,+BAAjC,CAAiEnC,IAAxE;AACH;;;;EAPoCkH,qB;;IAgDnC+C,2B;;;;;AACF,uCAAYrB,MAAZ,EAAoBC,gBAApB,EAAsC;AAAA;;AAAA;;AAClC,gCAAMD,MAAN,EAAc1K,QAAQ,CAAC4K,SAAT,CAAmBoB,sBAAjC,EAAyD9L,gCAAgC,CAACmE,gCAAjC,CAAkEvC,IAA3H,EAAiI4I,MAAM,CAACI,aAAP,CAAqBC,UAArB,CAAgCkB,QAAjK,EAA2K,UAAC5B,YAAD;AAAA,aAAkBK,MAAM,CAACO,sBAAP,CAA8BiB,yBAA9B,CAAwD7B,YAAxD,CAAlB;AAAA,KAA3K,EAAoQrB,qBAAqB,CAACmC,kBAA1R;AACA,WAAKR,gBAAL,GAAwBA,gBAAxB;AAFkC;AAGrC;;;;2CAIsBS,Y,EAAc;AACjC9C,YAAM,CAACA,MAAM,CAAC8C,YAAD,EAAe,cAAf,CAAP,EAAuC,iBAAvC,CAAN,CAAgEC,mBAAhE,GAAsF,IAAtF;AACH;;;+BACUD,Y,EAAc1B,gB,EAAkB;AACvC,UAAI4B,uBAAuB,GAAGF,YAAY,CAACG,wBAA3C;;AACA,UAAI7B,gBAAgB,IAAI4B,uBAApB,IAA+CA,uBAAuB,CAACE,SAA3E,EAAsF;AAClF,aAAK3C,QAAL,CAAc,KAAKE,QAAnB,EAA6B;AAAEe,YAAE,EAAEvJ,IAAI,CAACkL,YAAL,EAAN;AAA2BhC,yBAAe,EAAE;AAAEC,4BAAgB,EAAEA;AAApB;AAA5C,SAA7B;AACH;AACJ;;;qCACgBW,Y,EAAc;AAC3B,wGAAuBA,YAAvB;;AACA,WAAKM,gBAAL,WAA6BN,YAAY,CAACuB,GAAb,CAAiBC,QAAjB,EAA7B;AACH;;;+BACU/B,E,EAAI;AAAA;;AACX,UAAIQ,QAAQ,GAAG,KAAKf,UAAL,CAAgB4C,GAAhB,CAAoBrC,EAApB,CAAf,CADW,CAEX;AACA;;;AACA,kGAAiBA,EAAjB;;AACA,UAAIM,SAAS,GAAG,KAAKb,UAAL,CAAgBQ,MAAhB,EAAhB;;AACA,WAAKY,gBAAL,CAAsBgB,OAAtB,CAA8B,UAACtB,YAAD,EAAkB;AAC5C,YAAIrK,QAAQ,CAACuK,SAAT,CAAmBC,KAAnB,CAAyBF,QAAzB,EAAmCD,YAAnC,KAAoD,CAAC,MAAI,CAACf,eAAL,CAAqBc,SAArB,EAAgCC,YAAhC,CAAzD,EAAwG;AACpG,cAAIU,UAAU,GAAG,MAAI,CAAC9B,OAAL,CAAa6B,aAAb,CAA2BC,UAA5C;;AACA,cAAIkB,QAAQ,GAAG,SAAXA,QAAW,CAAC5B,YAAD,EAAkB;AAC7B,kBAAI,CAACpB,OAAL,CAAa7G,gBAAb,CAA8B,MAAI,CAAC+G,KAAnC,EAA0C,MAAI,CAACE,aAAL,CAAmBgB,YAAnB,CAA1C;AACH,WAFD;;AAGA,gBAAI,CAACM,gBAAL,WAA6BN,YAAY,CAACuB,GAAb,CAAiBC,QAAjB,EAA7B;;AACA,cAAId,UAAU,CAACkB,QAAf,EAAyB;AACrBlB,sBAAU,CAACkB,QAAX,CAAoB5B,YAApB,EAAkC4B,QAAlC;AACH,WAFD,MAGK;AACDA,oBAAQ,CAAC5B,YAAD,CAAR;AACH;AACJ;AACJ,OAdD;AAeH;;;wBArCc;AACX,aAAOnK,gCAAgC,CAACmE,gCAAjC,CAAkEvC,IAAzE;AACH;;;;EAPqCkH,qB;;IA4CpCoD,4B;AACF,wCAAYnD,OAAZ,EAAqB;AAAA;;AACjB,SAAKA,OAAL,GAAeA,OAAf;AACA,SAAKoD,WAAL,GAAmB,IAAI7C,GAAJ,EAAnB;AACA,SAAK8C,gBAAL,GAAwB,KAAxB;AACH;;;;2CAIsBlB,Y,EAAc;AACjC9C,YAAM,CAACA,MAAM,CAAC8C,YAAD,EAAe,cAAf,CAAP,EAAuC,iBAAvC,CAAN,CAAgEC,mBAAhE,GAAsF,IAAtF;AACH;;;+BACUD,Y,EAAc1B,gB,EAAkB;AACvC,UAAI4B,uBAAuB,GAAGF,YAAY,CAACG,wBAA3C;;AACA,UAAI7B,gBAAgB,IAAI4B,uBAApB,IAA+CA,uBAAuB,CAACiB,MAAxB,KAAmC,KAAK,CAAvF,IAA4FjB,uBAAuB,CAACiB,MAAxB,KAAmCrM,gCAAgC,CAACsM,oBAAjC,CAAsDC,IAAzL,EAA+L;AAC3L,aAAK5D,QAAL,CAAc,KAAKE,QAAnB,EAA6B;AACzBe,YAAE,EAAEvJ,IAAI,CAACkL,YAAL,EADqB;AAEzBhC,yBAAe,EAAE5J,MAAM,CAAC6M,MAAP,CAAc,EAAd,EAAkB;AAAEhD,4BAAgB,EAAEA;AAApB,WAAlB,EAA0D;AAAEiD,oBAAQ,EAAErB,uBAAuB,CAACiB;AAApC,WAA1D;AAFQ,SAA7B;AAIH;AACJ;;;6BACQtH,Q,EAAUxD,I,EAAM;AACrB,UAAI,CAACA,IAAI,CAACgI,eAAL,CAAqBC,gBAA1B,EAA4C;AACxC;AACH;;AACD,UAAI,CAAC,KAAKC,SAAV,EAAqB;AACjB,aAAKA,SAAL,GAAiB3J,QAAQ,CAAC4K,SAAT,CAAmBgC,uBAAnB,CAA2C,KAAKhD,QAAhD,EAA0D,IAA1D,CAAjB;AACH;;AACD,WAAKyC,WAAL,CAAiBxC,GAAjB,CAAqBpI,IAAI,CAACqI,EAA1B,EAA8B;AAC1BJ,wBAAgB,EAAEjI,IAAI,CAACgI,eAAL,CAAqBC,gBADb;AAE1BiD,gBAAQ,EAAElL,IAAI,CAACgI,eAAL,CAAqBkD;AAFL,OAA9B;AAIH;;;6BACQE,K,EAAO;AAAA;;AACZ;AACA;AACA;AACA,UAAIA,KAAK,CAACC,cAAN,CAAqBtH,MAArB,KAAgC,CAApC,EAAuC;AACnC;AACH;;AANW,kDAOa,KAAK6G,WAAL,CAAiBtC,MAAjB,EAPb;AAAA;;AAAA;AAOZ,+DAAoD;AAAA,cAAzCgD,UAAyC;;AAChD,cAAI/M,QAAQ,CAACuK,SAAT,CAAmBC,KAAnB,CAAyBuC,UAAU,CAACrD,gBAApC,EAAsDmD,KAAK,CAACG,QAA5D,CAAJ,EAA2E;AACvE,gBAAIjC,UAAU,GAAG,KAAK9B,OAAL,CAAa6B,aAAb,CAA2BC,UAA5C;;AACA,gBAAIgC,UAAU,CAACJ,QAAX,KAAwBzM,gCAAgC,CAACsM,oBAAjC,CAAsDS,WAAlF,EAA+F;AAAA;AAC3F,oBAAIlL,MAAM,GAAG,MAAI,CAACkH,OAAL,CAAagC,sBAAb,CAAoCiC,0BAApC,CAA+DL,KAA/D,CAAb;;AACA,oBAAI9B,UAAU,CAACoC,SAAf,EAA0B;AACtBpC,4BAAU,CAACoC,SAAX,CAAqBN,KAArB,EAA4B;AAAA,2BAAM,MAAI,CAAC5D,OAAL,CAAa7G,gBAAb,CAA8BlC,gCAAgC,CAACiE,iCAAjC,CAAmErC,IAAjG,EAAuGC,MAAvG,CAAN;AAAA,mBAA5B;AACH,iBAFD,MAGK;AACD,wBAAI,CAACkH,OAAL,CAAa7G,gBAAb,CAA8BlC,gCAAgC,CAACiE,iCAAjC,CAAmErC,IAAjG,EAAuGC,MAAvG;AACH;AAP0F;AAQ9F,aARD,MASK,IAAIgL,UAAU,CAACJ,QAAX,KAAwBzM,gCAAgC,CAACsM,oBAAjC,CAAsDY,IAAlF,EAAwF;AACzF,kBAAID,SAAS,GAAG,SAAZA,SAAY,CAACN,KAAD,EAAW;AACvB,oBAAI,MAAI,CAACQ,cAAT,EAAyB;AACrB,sBAAI,MAAI,CAACA,cAAL,CAAoBzB,GAApB,KAA4BiB,KAAK,CAACG,QAAN,CAAepB,GAAf,CAAmBC,QAAnB,EAAhC,EAA+D;AAC3D;AACA,0BAAI,CAACyB,aAAL;;AACA,0BAAI,CAACD,cAAL,CAAoBzB,GAApB,GAA0BiB,KAAK,CAACG,QAAN,CAAepB,GAAf,CAAmBC,QAAnB,EAA1B;AACH;;AACD,wBAAI,CAACwB,cAAL,CAAoBE,OAApB,CAA4BC,OAA5B,CAAoC,YAAM;AACtC,0BAAI,CAACvE,OAAL,CAAa7G,gBAAb,CAA8BlC,gCAAgC,CAACiE,iCAAjC,CAAmErC,IAAjG,EAAuG,MAAI,CAACmH,OAAL,CAAagC,sBAAb,CAAoCiC,0BAApC,CAA+DL,KAAK,CAACG,QAArE,CAAvG;AACH,mBAFD;AAGH,iBATD,MAUK;AACD,wBAAI,CAACK,cAAL,GAAsB;AAClBzB,uBAAG,EAAEiB,KAAK,CAACG,QAAN,CAAepB,GAAf,CAAmBC,QAAnB,EADa;AAElB0B,2BAAO,EAAE,IAAIjN,OAAO,CAACmN,OAAZ,CAAoB,GAApB;AAFS,mBAAtB;;AAIA,wBAAI,CAACJ,cAAL,CAAoBE,OAApB,CAA4BC,OAA5B,CAAoC,YAAM;AACtC,0BAAI,CAACvE,OAAL,CAAa7G,gBAAb,CAA8BlC,gCAAgC,CAACiE,iCAAjC,CAAmErC,IAAjG,EAAuG,MAAI,CAACmH,OAAL,CAAagC,sBAAb,CAAoCiC,0BAApC,CAA+DL,KAAK,CAACG,QAArE,CAAvG;AACH,mBAFD,EAEG,CAAC,CAFJ;AAGH;AACJ,eApBD;;AAqBA,kBAAIjC,UAAU,CAACoC,SAAf,EAA0B;AACtBpC,0BAAU,CAACoC,SAAX,CAAqBN,KAArB,EAA4BM,SAA5B;AACH,eAFD,MAGK;AACDA,yBAAS,CAACN,KAAD,CAAT;AACH;AACJ;AACJ;AACJ;AAjDW;AAAA;AAAA;AAAA;AAAA;AAkDf;;;+BACU/C,E,EAAI;AACX,WAAKuC,WAAL,WAAwBvC,EAAxB;;AACA,UAAI,KAAKuC,WAAL,CAAiBnC,IAAjB,KAA0B,CAA1B,IAA+B,KAAKP,SAAxC,EAAmD;AAC/C,aAAKA,SAAL,CAAejF,OAAf;;AACA,aAAKiF,SAAL,GAAiBxG,SAAjB;AACH;AACJ;;;8BACS;AACN,WAAKkK,cAAL,GAAsBlK,SAAtB;AACA,WAAKmJ,gBAAL,GAAwB,KAAxB;;AACA,WAAKD,WAAL,CAAiBlC,KAAjB;;AACA,UAAI,KAAKR,SAAT,EAAoB;AAChB,aAAKA,SAAL,CAAejF,OAAf;;AACA,aAAKiF,SAAL,GAAiBxG,SAAjB;AACH;AACJ;;;oCACe;AACZ,UAAI,KAAKmJ,gBAAL,IAAyB,CAAC,KAAKe,cAAnC,EAAmD;AAC/C;AACH;;AACD,UAAI;AACA,aAAKf,gBAAL,GAAwB,IAAxB;;AACA,aAAKe,cAAL,CAAoBE,OAApB,CAA4BD,aAA5B;AACH,OAHD,SAIQ;AACJ,aAAKhB,gBAAL,GAAwB,KAAxB;AACH;AACJ;;;wBAzGc;AACX,aAAOpM,gCAAgC,CAACiE,iCAAjC,CAAmErC,IAA1E;AACH;;;;;;IAyGC4L,e;;;;;AACF,2BAAYhD,MAAZ,EAAoB;AAAA;;AAAA,8BACVA,MADU,EACF1K,QAAQ,CAAC4K,SAAT,CAAmB+C,sBADjB,EACyCzN,gCAAgC,CAAC0N,gCAAjC,CAAkE9L,IAD3G,EACiH4I,MAAM,CAACI,aAAP,CAAqBC,UAArB,CAAgC8C,QADjJ,EAC2J,UAACC,aAAD;AAAA,aAAmBpD,MAAM,CAACO,sBAAP,CAA8B8C,4BAA9B,CAA2DD,aAA3D,CAAnB;AAAA,KAD3J,EACyP,UAAC1D,SAAD,EAAY0D,aAAZ;AAAA,aAA8B9E,qBAAqB,CAACmC,kBAAtB,CAAyCf,SAAzC,EAAoD0D,aAAa,CAACd,QAAlE,CAA9B;AAAA,KADzP;AAEnB;;;;2CAIsB5B,Y,EAAc;AACjC,UAAIrL,KAAK,GAAGuI,MAAM,CAACA,MAAM,CAAC8C,YAAD,EAAe,cAAf,CAAP,EAAuC,iBAAvC,CAAlB;AACArL,WAAK,CAAC8N,QAAN,GAAiB,IAAjB;AACH;;;+BACUzC,Y,EAAc1B,gB,EAAkB;AACvC,UAAI4B,uBAAuB,GAAGF,YAAY,CAACG,wBAA3C;;AACA,UAAI7B,gBAAgB,IAAI4B,uBAApB,IAA+CA,uBAAuB,CAACuC,QAA3E,EAAqF;AACjF,aAAKhF,QAAL,CAAc,KAAKE,QAAnB,EAA6B;AACzBe,YAAE,EAAEvJ,IAAI,CAACkL,YAAL,EADqB;AAEzBhC,yBAAe,EAAE;AAAEC,4BAAgB,EAAEA;AAApB;AAFQ,SAA7B;AAIH;AACJ;;;wBAfc;AACX,aAAOxJ,gCAAgC,CAAC0N,gCAAjC,CAAkE9L,IAAzE;AACH;;;;EANyBkH,qB;;IAqBxBgF,wB;AACF,oCAAY/E,OAAZ,EAAqB;AAAA;;AACjB,SAAKA,OAAL,GAAeA,OAAf;AACA,SAAKM,UAAL,GAAkB,IAAIC,GAAJ,EAAlB;AACH;;;;2CAIsB4B,Y,EAAc;AACjC,UAAIrL,KAAK,GAAGuI,MAAM,CAACA,MAAM,CAAC8C,YAAD,EAAe,cAAf,CAAP,EAAuC,iBAAvC,CAAlB;AACArL,WAAK,CAACkO,iBAAN,GAA0B,IAA1B;AACH;;;+BACU7C,Y,EAAc1B,gB,EAAkB;AACvC,UAAI4B,uBAAuB,GAAGF,YAAY,CAACG,wBAA3C;;AACA,UAAI7B,gBAAgB,IAAI4B,uBAApB,IAA+CA,uBAAuB,CAAC2C,iBAA3E,EAA8F;AAC1F,aAAKpF,QAAL,CAAc,KAAKE,QAAnB,EAA6B;AACzBe,YAAE,EAAEvJ,IAAI,CAACkL,YAAL,EADqB;AAEzBhC,yBAAe,EAAE;AAAEC,4BAAgB,EAAEA;AAApB;AAFQ,SAA7B;AAIH;AACJ;;;6BACQzE,Q,EAAUxD,I,EAAM;AACrB,UAAI,CAACA,IAAI,CAACgI,eAAL,CAAqBC,gBAA1B,EAA4C;AACxC;AACH;;AACD,UAAI,CAAC,KAAKC,SAAV,EAAqB;AACjB,aAAKA,SAAL,GAAiB3J,QAAQ,CAAC4K,SAAT,CAAmB+C,sBAAnB,CAA0C,KAAK/D,QAA/C,EAAyD,IAAzD,CAAjB;AACH;;AACD,WAAKL,UAAL,CAAgBM,GAAhB,CAAoBpI,IAAI,CAACqI,EAAzB,EAA6BrI,IAAI,CAACgI,eAAL,CAAqBC,gBAAlD;AACH;;;6BACQmD,K,EAAO;AAAA;;AACZ,UAAI7D,qBAAqB,CAACmC,kBAAtB,CAAyC,KAAK5B,UAAL,CAAgBQ,MAAhB,EAAzC,EAAmE8C,KAAK,CAACG,QAAzE,CAAJ,EAAwF;AACpF,YAAIjC,UAAU,GAAG,KAAK9B,OAAL,CAAa6B,aAAb,CAA2BC,UAA5C;;AACA,YAAIkD,iBAAiB,GAAG,SAApBA,iBAAoB,CAACpB,KAAD,EAAW;AAC/B,iBAAO,MAAI,CAAC5D,OAAL,CAAapH,WAAb,CAAyB3B,gCAAgC,CAACgO,oCAAjC,CAAsEpM,IAA/F,EAAqG,MAAI,CAACmH,OAAL,CAAagC,sBAAb,CAAoC8C,4BAApC,CAAiElB,KAAjE,CAArG,EAA8KsB,IAA9K,CAAmL,UAACC,KAAD,EAAW;AACjM,gBAAIC,MAAM,GAAG,MAAI,CAACpF,OAAL,CAAaqF,sBAAb,CAAoCC,WAApC,CAAgDH,KAAhD,CAAb;;AACA,mBAAOC,MAAM,KAAK,KAAK,CAAhB,GAAoB,EAApB,GAAyBA,MAAhC;AACH,WAHM,CAAP;AAIH,SALD;;AAMAxB,aAAK,CAAC2B,SAAN,CAAgBzD,UAAU,CAACkD,iBAAX,GACVlD,UAAU,CAACkD,iBAAX,CAA6BpB,KAA7B,EAAoCoB,iBAApC,CADU,GAEVA,iBAAiB,CAACpB,KAAD,CAFvB;AAGH;AACJ;;;+BACU/C,E,EAAI;AACX,WAAKP,UAAL,WAAuBO,EAAvB;;AACA,UAAI,KAAKP,UAAL,CAAgBW,IAAhB,KAAyB,CAAzB,IAA8B,KAAKP,SAAvC,EAAkD;AAC9C,aAAKA,SAAL,CAAejF,OAAf;;AACA,aAAKiF,SAAL,GAAiBxG,SAAjB;AACH;AACJ;;;8BACS;AACN,WAAKoG,UAAL,CAAgBY,KAAhB;;AACA,UAAI,KAAKR,SAAT,EAAoB;AAChB,aAAKA,SAAL,CAAejF,OAAf;;AACA,aAAKiF,SAAL,GAAiBxG,SAAjB;AACH;AACJ;;;wBApDc;AACX,aAAOjD,gCAAgC,CAACgO,oCAAjC,CAAsEpM,IAA7E;AACH;;;;;;IAoDC2M,0B;;;;;AACF,sCAAY/D,MAAZ,EAAoB;AAAA;;AAAA;;AAAA,uCACVA,MADU,EACF1K,QAAQ,CAAC4K,SAAT,CAAmB8D,qBADjB,EACwCxO,gCAAgC,CAACqE,+BAAjC,CAAiEzC,IADzG,EAC+G4I,MAAM,CAACI,aAAP,CAAqBC,UAArB,CAAgC4D,OAD/I,EACwJ,UAACtE,YAAD;AAAA,aAAkBK,MAAM,CAACO,sBAAP,CAA8B2D,wBAA9B,CAAuDvE,YAAvD,EAAqE,OAAKwE,YAA1E,CAAlB;AAAA,KADxJ,EACmQ7F,qBAAqB,CAACmC,kBADzR;AAEnB;;;;2CAIsBC,Y,EAAc;AACjC9C,YAAM,CAACA,MAAM,CAAC8C,YAAD,EAAe,cAAf,CAAP,EAAuC,iBAAvC,CAAN,CAAgEuD,OAAhE,GAA0E,IAA1E;AACH;;;+BACUvD,Y,EAAc1B,gB,EAAkB;AACvC,UAAI4B,uBAAuB,GAAGF,YAAY,CAACG,wBAA3C;;AACA,UAAI7B,gBAAgB,IAAI4B,uBAApB,IAA+CA,uBAAuB,CAACwD,IAA3E,EAAiF;AAC7E,aAAKjG,QAAL,CAAc,KAAKE,QAAnB,EAA6B;AACzBe,YAAE,EAAEvJ,IAAI,CAACkL,YAAL,EADqB;AAEzBhC,yBAAe,EAAE5J,MAAM,CAAC6M,MAAP,CAAc,EAAd,EAAkB;AAAEhD,4BAAgB,EAAEA;AAApB,WAAlB,EAA0D;AAAEqF,uBAAW,EAAE,CAAC,CAACzD,uBAAuB,CAACwD,IAAxB,CAA6BC;AAA9C,WAA1D;AAFQ,SAA7B;AAIH;AACJ;;;6BACQ9M,M,EAAQR,I,EAAM;AACnB,WAAKoN,YAAL,GAAoB,CAAC,CAACpN,IAAI,CAACgI,eAAL,CAAqBsF,WAA3C;;AACA,+FAAe9M,MAAf,EAAuBR,IAAvB;AACH;;;wBAlBc;AACX,aAAOvB,gCAAgC,CAACqE,+BAAjC,CAAiEzC,IAAxE;AACH;;;;EANoCkH,qB;;IAwBnCgG,wB;AACF,oCAAY/F,OAAZ,EAAqBgG,gBAArB,EAAuC;AAAA;;AACnC,SAAKhG,OAAL,GAAeA,OAAf;AACA,SAAKgG,gBAAL,GAAwBA,gBAAxB;AACA,SAAKC,SAAL,GAAiB,IAAI1F,GAAJ,EAAjB;AACH;;;;2CAIsB4B,Y,EAAc;AACjC9C,YAAM,CAACA,MAAM,CAAC8C,YAAD,EAAe,WAAf,CAAP,EAAoC,uBAApC,CAAN,CAAmEC,mBAAnE,GAAyF,IAAzF;AACH;;;+BACU8D,a,EAAeC,iB,EAAmB,CAC5C;;;6BACQC,O,EAAS5N,I,EAAM;AACpB,UAAI,CAAC4F,KAAK,CAACiI,OAAN,CAAc7N,IAAI,CAACgI,eAAL,CAAqB8F,QAAnC,CAAL,EAAmD;AAC/C;AACH;;AACD,UAAIC,YAAY,GAAG,EAAnB;;AAJoB,kDAKA/N,IAAI,CAACgI,eAAL,CAAqB8F,QALrB;AAAA;;AAAA;AAKpB,+DAAmD;AAAA,cAA1CE,OAA0C;;AAC/C,cAAI,CAACpP,EAAE,CAAC2B,MAAH,CAAUyN,OAAO,CAACC,WAAlB,CAAL,EAAqC;AACjC;AACH;;AACD,cAAIC,WAAW,GAAG,IAAlB;AAAA,cAAwBC,WAAW,GAAG,IAAtC;AAAA,cAA4CC,WAAW,GAAG,IAA1D;;AACA,cAAIJ,OAAO,CAACK,IAAR,KAAiB,KAAK,CAAtB,IAA2BL,OAAO,CAACK,IAAR,KAAiB,IAAhD,EAAsD;AAClDH,uBAAW,GAAG,CAACF,OAAO,CAACK,IAAR,GAAe5P,gCAAgC,CAAC6P,SAAjC,CAA2CC,MAA3D,MAAuE,CAArF;AACAJ,uBAAW,GAAG,CAACH,OAAO,CAACK,IAAR,GAAe5P,gCAAgC,CAAC6P,SAAjC,CAA2CE,MAA3D,KAAsE,CAApF;AACAJ,uBAAW,GAAG,CAACJ,OAAO,CAACK,IAAR,GAAe5P,gCAAgC,CAAC6P,SAAjC,CAA2CG,MAA3D,KAAsE,CAApF;AACH;;AACD,cAAIC,iBAAiB,GAAGnQ,QAAQ,CAAC4K,SAAT,CAAmBwF,uBAAnB,CAA2CX,OAAO,CAACC,WAAnD,EAAgE,CAACC,WAAjE,EAA8E,CAACC,WAA/E,EAA4F,CAACC,WAA7F,CAAxB;AACA,eAAKQ,aAAL,CAAmBF,iBAAnB,EAAsCR,WAAtC,EAAmDC,WAAnD,EAAgEC,WAAhE;AACAL,sBAAY,CAACnK,IAAb,CAAkB8K,iBAAlB;AACH;AAlBmB;AAAA;AAAA;AAAA;AAAA;;AAmBpB,WAAKjB,SAAL,CAAerF,GAAf,CAAmBpI,IAAI,CAACqI,EAAxB,EAA4B0F,YAA5B;AACH;;;gCACW1F,E,EAAIwG,kB,EAAoB;AAChC,UAAId,YAAY,GAAG,EAAnB;;AADgC,kDAEFc,kBAFE;AAAA;;AAAA;AAEhC,+DAAkD;AAAA,cAAzCH,iBAAyC;AAC9C,eAAKE,aAAL,CAAmBF,iBAAnB,EAAsC,IAAtC,EAA4C,IAA5C,EAAkD,IAAlD,EAAwDX,YAAxD;AACH;AAJ+B;AAAA;AAAA;AAAA;AAAA;;AAKhC,WAAKN,SAAL,CAAerF,GAAf,CAAmBC,EAAnB,EAAuB0F,YAAvB;AACH;;;kCACaW,iB,EAAmBR,W,EAAaC,W,EAAaC,W,EAAaU,S,EAAW;AAAA;;AAC/E,UAAIZ,WAAJ,EAAiB;AACbQ,yBAAiB,CAACK,WAAlB,CAA8B,UAACC,QAAD;AAAA,iBAAc,MAAI,CAACxB,gBAAL,CAAsB;AAC9DrD,eAAG,EAAE,MAAI,CAAC3C,OAAL,CAAagC,sBAAb,CAAoCyF,KAApC,CAA0CD,QAA1C,CADyD;AAE9D3O,gBAAI,EAAE5B,gCAAgC,CAACyQ,cAAjC,CAAgDC;AAFQ,WAAtB,CAAd;AAAA,SAA9B,EAGI,IAHJ,EAGUL,SAHV;AAIH;;AACD,UAAIX,WAAJ,EAAiB;AACbO,yBAAiB,CAACU,WAAlB,CAA8B,UAACJ,QAAD;AAAA,iBAAc,MAAI,CAACxB,gBAAL,CAAsB;AAC9DrD,eAAG,EAAE,MAAI,CAAC3C,OAAL,CAAagC,sBAAb,CAAoCyF,KAApC,CAA0CD,QAA1C,CADyD;AAE9D3O,gBAAI,EAAE5B,gCAAgC,CAACyQ,cAAjC,CAAgDG;AAFQ,WAAtB,CAAd;AAAA,SAA9B,EAGI,IAHJ,EAGUP,SAHV;AAIH;;AACD,UAAIV,WAAJ,EAAiB;AACbM,yBAAiB,CAACY,WAAlB,CAA8B,UAACN,QAAD;AAAA,iBAAc,MAAI,CAACxB,gBAAL,CAAsB;AAC9DrD,eAAG,EAAE,MAAI,CAAC3C,OAAL,CAAagC,sBAAb,CAAoCyF,KAApC,CAA0CD,QAA1C,CADyD;AAE9D3O,gBAAI,EAAE5B,gCAAgC,CAACyQ,cAAjC,CAAgDK;AAFQ,WAAtB,CAAd;AAAA,SAA9B,EAGI,IAHJ,EAGUT,SAHV;AAIH;AACJ;;;+BACUzG,E,EAAI;AACX,UAAI0F,YAAY,GAAG,KAAKN,SAAL,CAAe/C,GAAf,CAAmBrC,EAAnB,CAAnB;;AACA,UAAI0F,YAAJ,EAAkB;AAAA,oDACSA,YADT;AAAA;;AAAA;AACd,iEAAqC;AAAA,gBAA5ByB,UAA4B;AACjCA,sBAAU,CAACvM,OAAX;AACH;AAHa;AAAA;AAAA;AAAA;AAAA;AAIjB;AACJ;;;8BACS;AACN,WAAKwK,SAAL,CAAevD,OAAf,CAAuB,UAAC6D,YAAD,EAAkB;AAAA,oDACdA,YADc;AAAA;;AAAA;AACrC,iEAAqC;AAAA,gBAA5ByB,UAA4B;AACjCA,sBAAU,CAACvM,OAAX;AACH;AAHoC;AAAA;AAAA;AAAA;AAAA;AAIxC,OAJD;;AAKA,WAAKwK,SAAL,CAAe/E,KAAf;AACH;;;wBAvEc;AACX,aAAOjK,gCAAgC,CAAC6D,iCAAjC,CAAmEjC,IAA1E;AACH;;;;;;IAuECoP,mB;AACF,+BAAYjI,OAAZ,EAAqBhE,QAArB,EAA+B;AAAA;;AAC3B,SAAKgE,OAAL,GAAeA,OAAf;AACA,SAAKhE,QAAL,GAAgBA,QAAhB;AACA,SAAKkM,UAAL,GAAkB,IAAI3H,GAAJ,EAAlB;AACH;;;;6BAIQ9I,O,EAASe,I,EAAM;AACpB,UAAIf,OAAO,CAACuB,MAAR,KAAmB,KAAK8G,QAAL,CAAc9G,MAArC,EAA6C;AACzC,cAAM,IAAImP,KAAJ,uDAAyD1Q,OAAO,CAACuB,MAAjE,kCAA+F,KAAK8G,QAAL,CAAc9G,MAA7G,EAAN;AACH;;AACD,UAAI,CAACR,IAAI,CAACgI,eAAL,CAAqBC,gBAA1B,EAA4C;AACxC;AACH;;AACD,UAAI2H,QAAQ,GAAG,KAAKC,wBAAL,CAA8B7P,IAAI,CAACgI,eAAnC,CAAf;;AACA,UAAI4H,QAAJ,EAAc;AACV,aAAKF,UAAL,CAAgBtH,GAAhB,CAAoBpI,IAAI,CAACqI,EAAzB,EAA6BuH,QAA7B;AACH;AACJ;;;+BACUvH,E,EAAI;AACX,UAAIuH,QAAQ,GAAG,KAAKF,UAAL,CAAgBhF,GAAhB,CAAoBrC,EAApB,CAAf;;AACA,UAAIuH,QAAJ,EAAc;AACVA,gBAAQ,CAAC3M,OAAT;AACH;AACJ;;;8BACS;AACN,WAAKyM,UAAL,CAAgBxF,OAAhB,CAAwB,UAAC5L,KAAD,EAAW;AAC/BA,aAAK,CAAC2E,OAAN;AACH,OAFD;;AAGA,WAAKyM,UAAL,CAAgBhH,KAAhB;AACH;;;oCACeT,gB,EAAkB6H,U,EAAY;AAC1C,UAAI,CAACA,UAAL,EAAiB;AACb,eAAO,CAACpO,SAAD,EAAYA,SAAZ,CAAP;AACH,OAFD,MAGK,IAAIjD,gCAAgC,CAACsR,+BAAjC,CAAiE9I,EAAjE,CAAoE6I,UAApE,CAAJ,EAAqF;AACtF,YAAMzH,EAAE,GAAG5J,gCAAgC,CAACuR,yBAAjC,CAA2DC,KAA3D,CAAiEH,UAAjE,IAA+EA,UAAU,CAACzH,EAA1F,GAA+FvJ,IAAI,CAACkL,YAAL,EAA1G;AACA,YAAMnB,QAAQ,GAAGiH,UAAU,CAAC7H,gBAAX,IAA+BA,gBAAhD;;AACA,YAAIY,QAAJ,EAAc;AACV,iBAAO,CAACR,EAAD,EAAKjK,MAAM,CAAC6M,MAAP,CAAc,EAAd,EAAkB6E,UAAlB,EAA8B;AAAE7H,4BAAgB,EAAEY;AAApB,WAA9B,CAAL,CAAP;AACH;AACJ,OANI,MAOA,IAAIjK,EAAE,WAAF,CAAWkR,UAAX,KAA0BA,UAAU,KAAK,IAAzC,IAAiDrR,gCAAgC,CAACyR,uBAAjC,CAAyDjJ,EAAzD,CAA4D6I,UAA5D,CAArD,EAA8H;AAC/H,YAAI,CAAC7H,gBAAL,EAAuB;AACnB,iBAAO,CAACvG,SAAD,EAAYA,SAAZ,CAAP;AACH;;AACD,YAAIyO,OAAO,GAAIvR,EAAE,WAAF,CAAWkR,UAAX,KAA0BA,UAAU,KAAK,IAAzC,GAAgD;AAAE7H,0BAAgB,EAAhBA;AAAF,SAAhD,GAAuE7J,MAAM,CAAC6M,MAAP,CAAc,EAAd,EAAkB6E,UAAlB,EAA8B;AAAE7H,0BAAgB,EAAhBA;AAAF,SAA9B,CAAtF;AACA,eAAO,CAACnJ,IAAI,CAACkL,YAAL,EAAD,EAAsBmG,OAAtB,CAAP;AACH;;AACD,aAAO,CAACzO,SAAD,EAAYA,SAAZ,CAAP;AACH;;;2CACsBuG,gB,EAAkB6H,U,EAAY;AACjD,UAAI,CAAC7H,gBAAD,IAAqB,CAAC6H,UAA1B,EAAsC;AAClC,eAAOpO,SAAP;AACH;;AACD,aAAQ9C,EAAE,WAAF,CAAWkR,UAAX,KAA0BA,UAAU,KAAK,IAAzC,GAAgD;AAAE7H,wBAAgB,EAAhBA;AAAF,OAAhD,GAAuE7J,MAAM,CAAC6M,MAAP,CAAc,EAAd,EAAkB6E,UAAlB,EAA8B;AAAE7H,wBAAgB,EAAhBA;AAAF,OAA9B,CAA/E;AACH;;;wBApDc;AACX,aAAO,KAAKzE,QAAZ;AACH;;;;;;AAoDLtF,OAAO,CAACuR,mBAAR,GAA8BA,mBAA9B;;IACMW,gB;AACF,4BAAY5I,OAAZ,EAAqBhE,QAArB,EAA+B;AAAA;;AAC3B,SAAKgE,OAAL,GAAeA,OAAf;AACA,SAAKhE,QAAL,GAAgBA,QAAhB;AACA,SAAKkM,UAAL,GAAkB,IAAI3H,GAAJ,EAAlB;AACH;;;;6BAIQ9I,O,EAASe,I,EAAM;AACpB,UAAIf,OAAO,CAACuB,MAAR,KAAmB,KAAK8G,QAAL,CAAc9G,MAArC,EAA6C;AACzC,cAAM,IAAImP,KAAJ,sDAAwD1Q,OAAO,CAACuB,MAAhE,kCAA8F,KAAK8G,QAAL,CAAc9G,MAA5G,EAAN;AACH;;AACD,UAAIoP,QAAQ,GAAG,KAAKC,wBAAL,CAA8B7P,IAAI,CAACgI,eAAnC,CAAf;;AACA,UAAI4H,QAAJ,EAAc;AACV,aAAKF,UAAL,CAAgBtH,GAAhB,CAAoBpI,IAAI,CAACqI,EAAzB,EAA6BuH,QAA7B;AACH;AACJ;;;+BACUvH,E,EAAI;AACX,UAAIuH,QAAQ,GAAG,KAAKF,UAAL,CAAgBhF,GAAhB,CAAoBrC,EAApB,CAAf;;AACA,UAAIuH,QAAJ,EAAc;AACVA,gBAAQ,CAAC3M,OAAT;AACH;AACJ;;;8BACS;AACN,WAAKyM,UAAL,CAAgBxF,OAAhB,CAAwB,UAAC5L,KAAD,EAAW;AAC/BA,aAAK,CAAC2E,OAAN;AACH,OAFD;;AAGA,WAAKyM,UAAL,CAAgBhH,KAAhB;AACH;;;wBAvBc;AACX,aAAO,KAAKlF,QAAZ;AACH;;;;;;IAuBC6M,qB;;;;;AACF,iCAAYpH,MAAZ,EAAoB;AAAA;;AAAA,8BACVA,MADU,EACFxK,gCAAgC,CAAC6R,iBAAjC,CAAmDjQ,IADjD;AAEnB;;;;2CACsBkQ,W,EAAa;AAChC,UAAIC,UAAU,GAAG3J,MAAM,CAACA,MAAM,CAAC0J,WAAD,EAAc,cAAd,CAAP,EAAsC,YAAtC,CAAvB;AACAC,gBAAU,CAAC5G,mBAAX,GAAiC,IAAjC;AACA4G,gBAAU,CAACC,cAAX,GAA4B,IAA5B;AACAD,gBAAU,CAACE,cAAX,GAA4B;AACxBC,sBAAc,EAAE,IADQ;AAExBC,+BAAuB,EAAE,IAFD;AAGxBC,2BAAmB,EAAE,CAACpS,gCAAgC,CAACqS,UAAjC,CAA4CC,QAA7C,EAAuDtS,gCAAgC,CAACqS,UAAjC,CAA4CE,SAAnG,CAHG;AAIxBC,yBAAiB,EAAE,IAJK;AAKxBC,wBAAgB,EAAE;AALM,OAA5B;AAOAV,gBAAU,CAACW,kBAAX,GAAgC;AAAEC,gBAAQ,EAAEhL;AAAZ,OAAhC;AACH;;;+BACUuD,Y,EAAc1B,gB,EAAkB;AACvC,UAAMkI,OAAO,GAAG,KAAKkB,sBAAL,CAA4BpJ,gBAA5B,EAA8C0B,YAAY,CAAC2H,kBAA3D,CAAhB;;AACA,UAAI,CAACnB,OAAL,EAAc;AACV;AACH;;AACD,WAAK/I,QAAL,CAAc,KAAKE,QAAnB,EAA6B;AACzBe,UAAE,EAAEvJ,IAAI,CAACkL,YAAL,EADqB;AAEzBhC,uBAAe,EAAEmI;AAFQ,OAA7B;AAIH;;;6CACwBA,O,EAAS;AAAA;;AAC9B,UAAIoB,iBAAiB,GAAGpB,OAAO,CAACoB,iBAAR,IAA6B,EAArD;AACA,UAAItI,MAAM,GAAG,KAAKzB,OAAlB;;AACA,UAAIgK,uBAAsB,GAAG,SAAzBA,sBAAyB,CAACjG,QAAD,EAAWkG,QAAX,EAAqBC,OAArB,EAA8BC,KAA9B,EAAwC;AACjE,eAAO1I,MAAM,CAAC7I,WAAP,CAAmB3B,gCAAgC,CAAC6R,iBAAjC,CAAmDjQ,IAAtE,EAA4E4I,MAAM,CAACO,sBAAP,CAA8BoI,kBAA9B,CAAiDrG,QAAjD,EAA2DkG,QAA3D,EAAqEC,OAArE,CAA5E,EAA2JC,KAA3J,EAAkKjF,IAAlK,CAAuKzD,MAAM,CAAC4D,sBAAP,CAA8BgF,kBAArM,EAAyN,UAAC1S,KAAD,EAAW;AACvO8J,gBAAM,CAAC6I,gBAAP,CAAwBrT,gCAAgC,CAAC6R,iBAAjC,CAAmDjQ,IAA3E,EAAiFlB,KAAjF;AACA,iBAAO4S,OAAO,CAACC,OAAR,CAAgB,EAAhB,CAAP;AACH,SAHM,CAAP;AAIH,OALD;;AAMA,UAAIC,qBAAqB,GAAG,SAAxBA,qBAAwB,CAACC,IAAD,EAAOP,KAAP,EAAiB;AACzC,eAAO1I,MAAM,CAAC7I,WAAP,CAAmB3B,gCAAgC,CAAC0T,wBAAjC,CAA0D9R,IAA7E,EAAmF4I,MAAM,CAACO,sBAAP,CAA8B4I,gBAA9B,CAA+CF,IAA/C,CAAnF,EAAyIP,KAAzI,EAAgJjF,IAAhJ,CAAqJzD,MAAM,CAAC4D,sBAAP,CAA8BuF,gBAAnL,EAAqM,UAACjT,KAAD,EAAW;AACnN8J,gBAAM,CAAC6I,gBAAP,CAAwBrT,gCAAgC,CAAC0T,wBAAjC,CAA0D9R,IAAlF,EAAwFlB,KAAxF;AACA,iBAAO4S,OAAO,CAACC,OAAR,CAAgBE,IAAhB,CAAP;AACH,SAHM,CAAP;AAIH,OALD;;AAMA,UAAI5I,UAAU,GAAG,KAAK9B,OAAL,CAAa6B,aAAb,CAA2BC,UAA5C;AACA,aAAO,uBAAA/K,QAAQ,CAACuK,SAAT,EAAmBuJ,8BAAnB,6BAAkDlC,OAAO,CAAClI,gBAA1D,EAA4E;AAC/EuJ,8BAAsB,EAAE,gCAACjG,QAAD,EAAWkG,QAAX,EAAqBE,KAArB,EAA4BD,OAA5B,EAAwC;AAC5D,iBAAOpI,UAAU,CAACgJ,qBAAX,GACDhJ,UAAU,CAACgJ,qBAAX,CAAiC/G,QAAjC,EAA2CkG,QAA3C,EAAqDC,OAArD,EAA8DC,KAA9D,EAAqEH,uBAArE,CADC,GAEDA,uBAAsB,CAACjG,QAAD,EAAWkG,QAAX,EAAqBC,OAArB,EAA8BC,KAA9B,CAF5B;AAGH,SAL8E;AAM/EM,6BAAqB,EAAE9B,OAAO,CAACoC,eAAR,GACjB,UAACL,IAAD,EAAOP,KAAP,EAAiB;AACf,iBAAOrI,UAAU,CAAC2I,qBAAX,GACD3I,UAAU,CAAC2I,qBAAX,CAAiCC,IAAjC,EAAuCP,KAAvC,EAA8CM,qBAA9C,CADC,GAEDA,qBAAqB,CAACC,IAAD,EAAOP,KAAP,CAF3B;AAGH,SALkB,GAMjBjQ;AAZyE,OAA5E,4BAaD6P,iBAbC,GAAP;AAcH;;;;EAzD+B9B,mB;;IA2D9B+C,Y;;;;;AACF,wBAAYvJ,MAAZ,EAAoB;AAAA;;AAAA,8BACVA,MADU,EACFxK,gCAAgC,CAACgU,YAAjC,CAA8CpS,IAD5C;AAEnB;;;;2CACsBkQ,W,EAAa;AAChC,UAAMmC,eAAe,GAAI7L,MAAM,CAACA,MAAM,CAAC0J,WAAD,EAAc,cAAd,CAAP,EAAsC,OAAtC,CAA/B;AACAmC,qBAAe,CAAC9I,mBAAhB,GAAsC,IAAtC;AACA8I,qBAAe,CAACC,aAAhB,GAAgC,CAAClU,gCAAgC,CAACqS,UAAjC,CAA4CC,QAA7C,EAAuDtS,gCAAgC,CAACqS,UAAjC,CAA4CE,SAAnG,CAAhC;AACH;;;+BACUrH,Y,EAAc1B,gB,EAAkB;AACvC,UAAMkI,OAAO,GAAG,KAAKkB,sBAAL,CAA4BpJ,gBAA5B,EAA8C0B,YAAY,CAACiJ,aAA3D,CAAhB;;AACA,UAAI,CAACzC,OAAL,EAAc;AACV;AACH;;AACD,WAAK/I,QAAL,CAAc,KAAKE,QAAnB,EAA6B;AACzBe,UAAE,EAAEvJ,IAAI,CAACkL,YAAL,EADqB;AAEzBhC,uBAAe,EAAEmI;AAFQ,OAA7B;AAIH;;;6CACwBA,O,EAAS;AAC9B,UAAIlH,MAAM,GAAG,KAAKzB,OAAlB;;AACA,UAAIqL,aAAY,GAAG,SAAfA,YAAe,CAACtH,QAAD,EAAWkG,QAAX,EAAqBE,KAArB,EAA+B;AAC9C,eAAO1I,MAAM,CAAC7I,WAAP,CAAmB3B,gCAAgC,CAACgU,YAAjC,CAA8CpS,IAAjE,EAAuE4I,MAAM,CAACO,sBAAP,CAA8BsJ,4BAA9B,CAA2DvH,QAA3D,EAAqEkG,QAArE,CAAvE,EAAuJE,KAAvJ,EAA8JjF,IAA9J,CAAmKzD,MAAM,CAAC4D,sBAAP,CAA8BkG,OAAjM,EAA0M,UAAC5T,KAAD,EAAW;AACxN8J,gBAAM,CAAC6I,gBAAP,CAAwBrT,gCAAgC,CAACgU,YAAjC,CAA8CpS,IAAtE,EAA4ElB,KAA5E;AACA,iBAAO4S,OAAO,CAACC,OAAR,CAAgB,IAAhB,CAAP;AACH,SAHM,CAAP;AAIH,OALD;;AAMA,UAAI1I,UAAU,GAAGL,MAAM,CAACI,aAAP,CAAqBC,UAAtC;AACA,aAAO/K,QAAQ,CAACuK,SAAT,CAAmBkK,qBAAnB,CAAyC7C,OAAO,CAAClI,gBAAjD,EAAmE;AACtE4K,oBAAY,EAAE,sBAACtH,QAAD,EAAWkG,QAAX,EAAqBE,KAArB,EAA+B;AACzC,iBAAOrI,UAAU,CAACuJ,YAAX,GACDvJ,UAAU,CAACuJ,YAAX,CAAwBtH,QAAxB,EAAkCkG,QAAlC,EAA4CE,KAA5C,EAAmDkB,aAAnD,CADC,GAEDA,aAAY,CAACtH,QAAD,EAAWkG,QAAX,EAAqBE,KAArB,CAFlB;AAGH;AALqE,OAAnE,CAAP;AAOH;;;;EAnCsBlC,mB;;IAqCrBwD,oB;;;;;AACF,gCAAYhK,MAAZ,EAAoB;AAAA;;AAAA,8BACVA,MADU,EACFxK,gCAAgC,CAACyU,oBAAjC,CAAsD7S,IADpD;AAEnB;;;;2CACsBkQ,W,EAAa;AAChC,UAAI4C,MAAM,GAAGtM,MAAM,CAACA,MAAM,CAAC0J,WAAD,EAAc,cAAd,CAAP,EAAsC,eAAtC,CAAnB;AACA4C,YAAM,CAACvJ,mBAAP,GAA6B,IAA7B;AACAuJ,YAAM,CAACC,oBAAP,GAA8B;AAAEvC,2BAAmB,EAAE,CAACpS,gCAAgC,CAACqS,UAAjC,CAA4CC,QAA7C,EAAuDtS,gCAAgC,CAACqS,UAAjC,CAA4CE,SAAnG;AAAvB,OAA9B;AACAmC,YAAM,CAACC,oBAAP,CAA4BC,oBAA5B,GAAmD;AAAEC,0BAAkB,EAAE;AAAtB,OAAnD;AACH;;;+BACU3J,Y,EAAc1B,gB,EAAkB;AACvC,UAAMkI,OAAO,GAAG,KAAKkB,sBAAL,CAA4BpJ,gBAA5B,EAA8C0B,YAAY,CAAC4J,qBAA3D,CAAhB;;AACA,UAAI,CAACpD,OAAL,EAAc;AACV;AACH;;AACD,WAAK/I,QAAL,CAAc,KAAKE,QAAnB,EAA6B;AACzBe,UAAE,EAAEvJ,IAAI,CAACkL,YAAL,EADqB;AAEzBhC,uBAAe,EAAEmI;AAFQ,OAA7B;AAIH;;;6CACwBA,O,EAAS;AAAA;;AAC9B,UAAIlH,MAAM,GAAG,KAAKzB,OAAlB;;AACA,UAAIgM,qBAAqB,GAAG,SAAxBA,qBAAwB,CAACjI,QAAD,EAAWkG,QAAX,EAAqBE,KAArB,EAA+B;AACvD,eAAO1I,MAAM,CAAC7I,WAAP,CAAmB3B,gCAAgC,CAACyU,oBAAjC,CAAsD7S,IAAzE,EAA+E4I,MAAM,CAACO,sBAAP,CAA8BsJ,4BAA9B,CAA2DvH,QAA3D,EAAqEkG,QAArE,CAA/E,EAA+JE,KAA/J,EAAsKjF,IAAtK,CAA2KzD,MAAM,CAAC4D,sBAAP,CAA8B4G,eAAzM,EAA0N,UAACtU,KAAD,EAAW;AACxO8J,gBAAM,CAAC6I,gBAAP,CAAwBrT,gCAAgC,CAACyU,oBAAjC,CAAsD7S,IAA9E,EAAoFlB,KAApF;AACA,iBAAO4S,OAAO,CAACC,OAAR,CAAgB,IAAhB,CAAP;AACH,SAHM,CAAP;AAIH,OALD;;AAMA,UAAI1I,UAAU,GAAGL,MAAM,CAACI,aAAP,CAAqBC,UAAtC;AACA,UAAIiI,iBAAiB,GAAGpB,OAAO,CAACoB,iBAAR,IAA6B,EAArD;AACA,aAAO,wBAAAhT,QAAQ,CAACuK,SAAT,EAAmB4K,6BAAnB,8BAAiDvD,OAAO,CAAClI,gBAAzD,EAA2E;AAC9E0L,4BAAoB,EAAE,8BAACpI,QAAD,EAAWkG,QAAX,EAAqBE,KAArB,EAA+B;AACjD,iBAAOrI,UAAU,CAACqK,oBAAX,GACDrK,UAAU,CAACqK,oBAAX,CAAgCpI,QAAhC,EAA0CkG,QAA1C,EAAoDE,KAApD,EAA2D6B,qBAA3D,CADC,GAEDA,qBAAqB,CAACjI,QAAD,EAAWkG,QAAX,EAAqBE,KAArB,CAF3B;AAGH;AAL6E,OAA3E,4BAMDJ,iBANC,GAAP;AAOH;;;;EArC8B9B,mB;;IAuC7BmE,iB;;;;;AACF,6BAAY3K,MAAZ,EAAoB;AAAA;;AAAA,8BACVA,MADU,EACFxK,gCAAgC,CAACoV,iBAAjC,CAAmDxT,IADjD;AAEnB;;;;2CACsBkQ,W,EAAa;AAChC,UAAIuD,iBAAiB,GAAGjN,MAAM,CAACA,MAAM,CAAC0J,WAAD,EAAc,cAAd,CAAP,EAAsC,YAAtC,CAA9B;AACAuD,uBAAiB,CAAClK,mBAAlB,GAAwC,IAAxC;AACAkK,uBAAiB,CAACC,WAAlB,GAAgC,IAAhC;AACH;;;+BACUpK,Y,EAAc1B,gB,EAAkB;AACvC,UAAMkI,OAAO,GAAG,KAAKkB,sBAAL,CAA4BpJ,gBAA5B,EAA8C0B,YAAY,CAACqK,kBAA3D,CAAhB;;AACA,UAAI,CAAC7D,OAAL,EAAc;AACV;AACH;;AACD,WAAK/I,QAAL,CAAc,KAAKE,QAAnB,EAA6B;AAAEe,UAAE,EAAEvJ,IAAI,CAACkL,YAAL,EAAN;AAA2BhC,uBAAe,EAAEmI;AAA5C,OAA7B;AACH;;;6CACwBA,O,EAAS;AAC9B,UAAIlH,MAAM,GAAG,KAAKzB,OAAlB;;AACA,UAAIyM,kBAAiB,GAAG,SAApBA,iBAAoB,CAAC1I,QAAD,EAAWkG,QAAX,EAAqBE,KAArB,EAA+B;AACnD,eAAO1I,MAAM,CAAC7I,WAAP,CAAmB3B,gCAAgC,CAACoV,iBAAjC,CAAmDxT,IAAtE,EAA4E4I,MAAM,CAACO,sBAAP,CAA8BsJ,4BAA9B,CAA2DvH,QAA3D,EAAqEkG,QAArE,CAA5E,EAA4JE,KAA5J,EAAmKjF,IAAnK,CAAwKzD,MAAM,CAAC4D,sBAAP,CAA8BqH,kBAAtM,EAA0N,UAAC/U,KAAD,EAAW;AACxO8J,gBAAM,CAAC6I,gBAAP,CAAwBrT,gCAAgC,CAACoV,iBAAjC,CAAmDxT,IAA3E,EAAiFlB,KAAjF;AACA,iBAAO4S,OAAO,CAACC,OAAR,CAAgB,IAAhB,CAAP;AACH,SAHM,CAAP;AAIH,OALD;;AAMA,UAAI1I,UAAU,GAAGL,MAAM,CAACI,aAAP,CAAqBC,UAAtC;AACA,aAAO/K,QAAQ,CAACuK,SAAT,CAAmBqL,0BAAnB,CAA8ChE,OAAO,CAAClI,gBAAtD,EAAwE;AAC3EgM,yBAAiB,EAAE,2BAAC1I,QAAD,EAAWkG,QAAX,EAAqBE,KAArB,EAA+B;AAC9C,iBAAOrI,UAAU,CAAC2K,iBAAX,GACD3K,UAAU,CAAC2K,iBAAX,CAA6B1I,QAA7B,EAAuCkG,QAAvC,EAAiDE,KAAjD,EAAwDsC,kBAAxD,CADC,GAEDA,kBAAiB,CAAC1I,QAAD,EAAWkG,QAAX,EAAqBE,KAArB,CAFvB;AAGH;AAL0E,OAAxE,CAAP;AAOH;;;;EAhC2BlC,mB;;IAkC1B2E,iB;;;;;AACF,6BAAYnL,MAAZ,EAAoB;AAAA;;AAAA,8BACVA,MADU,EACFxK,gCAAgC,CAAC4V,iBAAjC,CAAmDhU,IADjD;AAEnB;;;;2CACsBkQ,W,EAAa;AAChC1J,YAAM,CAACA,MAAM,CAAC0J,WAAD,EAAc,cAAd,CAAP,EAAsC,YAAtC,CAAN,CAA0D3G,mBAA1D,GAAgF,IAAhF;AACH;;;+BACUD,Y,EAAc1B,gB,EAAkB;AACvC,UAAMkI,OAAO,GAAG,KAAKkB,sBAAL,CAA4BpJ,gBAA5B,EAA8C0B,YAAY,CAAC2K,kBAA3D,CAAhB;;AACA,UAAI,CAACnE,OAAL,EAAc;AACV;AACH;;AACD,WAAK/I,QAAL,CAAc,KAAKE,QAAnB,EAA6B;AAAEe,UAAE,EAAEvJ,IAAI,CAACkL,YAAL,EAAN;AAA2BhC,uBAAe,EAAEmI;AAA5C,OAA7B;AACH;;;6CACwBA,O,EAAS;AAC9B,UAAIlH,MAAM,GAAG,KAAKzB,OAAlB;;AACA,UAAI+M,kBAAkB,GAAG,SAArBA,kBAAqB,CAAChJ,QAAD,EAAWkG,QAAX,EAAqBtB,OAArB,EAA8BwB,KAA9B,EAAwC;AAC7D,eAAO1I,MAAM,CAAC7I,WAAP,CAAmB3B,gCAAgC,CAAC4V,iBAAjC,CAAmDhU,IAAtE,EAA4E4I,MAAM,CAACO,sBAAP,CAA8BgL,iBAA9B,CAAgDjJ,QAAhD,EAA0DkG,QAA1D,EAAoEtB,OAApE,CAA5E,EAA0JwB,KAA1J,EAAiKjF,IAAjK,CAAsKzD,MAAM,CAAC4D,sBAAP,CAA8B4H,YAApM,EAAkN,UAACtV,KAAD,EAAW;AAChO8J,gBAAM,CAAC6I,gBAAP,CAAwBrT,gCAAgC,CAAC4V,iBAAjC,CAAmDhU,IAA3E,EAAiFlB,KAAjF;AACA,iBAAO4S,OAAO,CAACC,OAAR,CAAgB,EAAhB,CAAP;AACH,SAHM,CAAP;AAIH,OALD;;AAMA,UAAI1I,UAAU,GAAGL,MAAM,CAACI,aAAP,CAAqBC,UAAtC;AACA,aAAO/K,QAAQ,CAACuK,SAAT,CAAmB4L,yBAAnB,CAA6CvE,OAAO,CAAClI,gBAArD,EAAuE;AAC1E0M,yBAAiB,EAAE,2BAACpJ,QAAD,EAAWkG,QAAX,EAAqBtB,OAArB,EAA8BwB,KAA9B,EAAwC;AACvD,iBAAOrI,UAAU,CAACqL,iBAAX,GACDrL,UAAU,CAACqL,iBAAX,CAA6BpJ,QAA7B,EAAuCkG,QAAvC,EAAiDtB,OAAjD,EAA0DwB,KAA1D,EAAiE4C,kBAAjE,CADC,GAEDA,kBAAkB,CAAChJ,QAAD,EAAWkG,QAAX,EAAqBtB,OAArB,EAA8BwB,KAA9B,CAFxB;AAGH;AALyE,OAAvE,CAAP;AAOH;;;;EA9B2BlC,mB;;IAgC1BmF,wB;;;;;AACF,oCAAY3L,MAAZ,EAAoB;AAAA;;AAAA,+BACVA,MADU,EACFxK,gCAAgC,CAACoW,wBAAjC,CAA0DxU,IADxD;AAEnB;;;;2CACsBkQ,W,EAAa;AAChC1J,YAAM,CAACA,MAAM,CAAC0J,WAAD,EAAc,cAAd,CAAP,EAAsC,mBAAtC,CAAN,CAAiE3G,mBAAjE,GAAuF,IAAvF;AACH;;;+BACUD,Y,EAAc1B,gB,EAAkB;AACvC,UAAMkI,OAAO,GAAG,KAAKkB,sBAAL,CAA4BpJ,gBAA5B,EAA8C0B,YAAY,CAACmL,yBAA3D,CAAhB;;AACA,UAAI,CAAC3E,OAAL,EAAc;AACV;AACH;;AACD,WAAK/I,QAAL,CAAc,KAAKE,QAAnB,EAA6B;AAAEe,UAAE,EAAEvJ,IAAI,CAACkL,YAAL,EAAN;AAA2BhC,uBAAe,EAAEmI;AAA5C,OAA7B;AACH;;;6CACwBA,O,EAAS;AAC9B,UAAIlH,MAAM,GAAG,KAAKzB,OAAlB;;AACA,UAAIuN,0BAAyB,GAAG,SAA5BA,yBAA4B,CAACxJ,QAAD,EAAWkG,QAAX,EAAqBE,KAArB,EAA+B;AAC3D,eAAO1I,MAAM,CAAC7I,WAAP,CAAmB3B,gCAAgC,CAACoW,wBAAjC,CAA0DxU,IAA7E,EAAmF4I,MAAM,CAACO,sBAAP,CAA8BsJ,4BAA9B,CAA2DvH,QAA3D,EAAqEkG,QAArE,CAAnF,EAAmKE,KAAnK,EAA0KjF,IAA1K,CAA+KzD,MAAM,CAAC4D,sBAAP,CAA8BmI,oBAA7M,EAAmO,UAAC7V,KAAD,EAAW;AACjP8J,gBAAM,CAAC6I,gBAAP,CAAwBrT,gCAAgC,CAACoW,wBAAjC,CAA0DxU,IAAlF,EAAwFlB,KAAxF;AACA,iBAAO4S,OAAO,CAACC,OAAR,CAAgB,EAAhB,CAAP;AACH,SAHM,CAAP;AAIH,OALD;;AAMA,UAAI1I,UAAU,GAAGL,MAAM,CAACI,aAAP,CAAqBC,UAAtC;AACA,aAAO/K,QAAQ,CAACuK,SAAT,CAAmBmM,iCAAnB,CAAqD9E,OAAO,CAAClI,gBAA7D,EAA+E;AAClF8M,iCAAyB,EAAE,mCAACxJ,QAAD,EAAWkG,QAAX,EAAqBE,KAArB,EAA+B;AACtD,iBAAOrI,UAAU,CAACyL,yBAAX,GACDzL,UAAU,CAACyL,yBAAX,CAAqCxJ,QAArC,EAA+CkG,QAA/C,EAAyDE,KAAzD,EAAgEoD,0BAAhE,CADC,GAEDA,0BAAyB,CAACxJ,QAAD,EAAWkG,QAAX,EAAqBE,KAArB,CAF/B;AAGH;AALiF,OAA/E,CAAP;AAOH;;;;EA9BkClC,mB;;IAgCjCyF,qB;;;;;AACF,iCAAYjM,MAAZ,EAAoB;AAAA;;AAAA,+BACVA,MADU,EACFxK,gCAAgC,CAAC0W,qBAAjC,CAAuD9U,IADrD;AAEnB;;;;2CACsBkQ,W,EAAa;AAChC,UAAI6E,kBAAkB,GAAGvO,MAAM,CAACA,MAAM,CAAC0J,WAAD,EAAc,cAAd,CAAP,EAAsC,gBAAtC,CAA/B;AACA6E,wBAAkB,CAACxL,mBAAnB,GAAyC,IAAzC;AACAwL,wBAAkB,CAACC,UAAnB,GAAgC;AAC5BjE,gBAAQ,EAAE3M;AADkB,OAAhC;AAGA2Q,wBAAkB,CAACE,iCAAnB,GAAuD,IAAvD;AACH;;;+BACU3L,Y,EAAc1B,gB,EAAkB;AACvC,UAAMkI,OAAO,GAAG,KAAKkB,sBAAL,CAA4BpJ,gBAA5B,EAA8C0B,YAAY,CAAC4L,sBAA3D,CAAhB;;AACA,UAAI,CAACpF,OAAL,EAAc;AACV;AACH;;AACD,WAAK/I,QAAL,CAAc,KAAKE,QAAnB,EAA6B;AAAEe,UAAE,EAAEvJ,IAAI,CAACkL,YAAL,EAAN;AAA2BhC,uBAAe,EAAEmI;AAA5C,OAA7B;AACH;;;6CACwBA,O,EAAS;AAC9B,UAAIlH,MAAM,GAAG,KAAKzB,OAAlB;;AACA,UAAIgO,uBAAsB,GAAG,SAAzBA,sBAAyB,CAACjK,QAAD,EAAWoG,KAAX,EAAqB;AAC9C,eAAO1I,MAAM,CAAC7I,WAAP,CAAmB3B,gCAAgC,CAAC0W,qBAAjC,CAAuD9U,IAA1E,EAAgF4I,MAAM,CAACO,sBAAP,CAA8BiM,sBAA9B,CAAqDlK,QAArD,CAAhF,EAAgJoG,KAAhJ,EAAuJjF,IAAvJ,CAA4J,UAAC1M,IAAD,EAAU;AACzK,cAAIA,IAAI,KAAK,IAAb,EAAmB;AACf,mBAAO0B,SAAP;AACH;;AACD,cAAI1B,IAAI,CAAC+D,MAAL,KAAgB,CAApB,EAAuB;AACnB,mBAAO,EAAP;AACH,WAFD,MAGK;AACD,gBAAI2R,OAAO,GAAG1V,IAAI,CAAC,CAAD,CAAlB;;AACA,gBAAIvB,gCAAgC,CAACkX,cAAjC,CAAgD1O,EAAhD,CAAmDyO,OAAnD,CAAJ,EAAiE;AAC7D,qBAAOzM,MAAM,CAAC4D,sBAAP,CAA8B+I,iBAA9B,CAAgD5V,IAAhD,CAAP;AACH,aAFD,MAGK;AACD,qBAAOiJ,MAAM,CAAC4D,sBAAP,CAA8BgJ,oBAA9B,CAAmD7V,IAAnD,CAAP;AACH;AACJ;AACJ,SAhBM,EAgBJ,UAACb,KAAD,EAAW;AACV8J,gBAAM,CAAC6I,gBAAP,CAAwBrT,gCAAgC,CAAC0W,qBAAjC,CAAuD9U,IAA/E,EAAqFlB,KAArF;AACA,iBAAO4S,OAAO,CAACC,OAAR,CAAgB,EAAhB,CAAP;AACH,SAnBM,CAAP;AAoBH,OArBD;;AAsBA,UAAI1I,UAAU,GAAGL,MAAM,CAACI,aAAP,CAAqBC,UAAtC;AACA,aAAO/K,QAAQ,CAACuK,SAAT,CAAmBgN,8BAAnB,CAAkD3F,OAAO,CAAClI,gBAA1D,EAA4E;AAC/EuN,8BAAsB,EAAE,gCAACjK,QAAD,EAAWoG,KAAX,EAAqB;AACzC,iBAAOrI,UAAU,CAACkM,sBAAX,GACDlM,UAAU,CAACkM,sBAAX,CAAkCjK,QAAlC,EAA4CoG,KAA5C,EAAmD6D,uBAAnD,CADC,GAEDA,uBAAsB,CAACjK,QAAD,EAAWoG,KAAX,CAF5B;AAGH;AAL8E,OAA5E,CAAP;AAOH;;;;EAnD+BlC,mB;;IAqD9BsG,sB;;;;;AACF,kCAAY9M,MAAZ,EAAoB;AAAA;;AAAA,+BACVA,MADU,EACFxK,gCAAgC,CAACuX,sBAAjC,CAAwD3V,IADtD;AAEnB;;;;2CACsBkQ,W,EAAa;AAChC,UAAI6E,kBAAkB,GAAGvO,MAAM,CAACA,MAAM,CAAC0J,WAAD,EAAc,WAAd,CAAP,EAAmC,QAAnC,CAA/B;AACA6E,wBAAkB,CAACxL,mBAAnB,GAAyC,IAAzC;AACAwL,wBAAkB,CAACC,UAAnB,GAAgC;AAC5BjE,gBAAQ,EAAE3M;AADkB,OAAhC;AAGH;;;+BACUkF,Y,EAAc;AACrB,UAAI,CAACA,YAAY,CAACsM,uBAAlB,EAA2C;AACvC;AACH;;AACD,WAAK7O,QAAL,CAAc,KAAKE,QAAnB,EAA6B;AACzBe,UAAE,EAAEvJ,IAAI,CAACkL,YAAL,EADqB;AAEzBhC,uBAAe,EAAE2B,YAAY,CAACsM,uBAAb,KAAyC,IAAzC,GAAgD;AAAEC,0BAAgB,EAAE;AAApB,SAAhD,GAA8EvM,YAAY,CAACsM;AAFnF,OAA7B;AAIH;;;6CACwBE,Q,EAAU;AAC/B,UAAIlN,MAAM,GAAG,KAAKzB,OAAlB;;AACA,UAAI4O,wBAAuB,GAAG,SAA1BA,uBAA0B,CAACC,KAAD,EAAQ1E,KAAR,EAAkB;AAC5C,eAAO1I,MAAM,CAAC7I,WAAP,CAAmB3B,gCAAgC,CAACuX,sBAAjC,CAAwD3V,IAA3E,EAAiF;AAAEgW,eAAK,EAALA;AAAF,SAAjF,EAA4F1E,KAA5F,EAAmGjF,IAAnG,CAAwGzD,MAAM,CAAC4D,sBAAP,CAA8BgJ,oBAAtI,EAA4J,UAAC1W,KAAD,EAAW;AAC1K8J,gBAAM,CAAC6I,gBAAP,CAAwBrT,gCAAgC,CAACuX,sBAAjC,CAAwD3V,IAAhF,EAAsFlB,KAAtF;AACA,iBAAO4S,OAAO,CAACC,OAAR,CAAgB,EAAhB,CAAP;AACH,SAHM,CAAP;AAIH,OALD;;AAMA,UAAI1I,UAAU,GAAGL,MAAM,CAACI,aAAP,CAAqBC,UAAtC;AACA,aAAO/K,QAAQ,CAACuK,SAAT,CAAmBwN,+BAAnB,CAAmD;AACtDF,+BAAuB,EAAE,iCAACC,KAAD,EAAQ1E,KAAR,EAAkB;AACvC,iBAAOrI,UAAU,CAAC8M,uBAAX,GACD9M,UAAU,CAAC8M,uBAAX,CAAmCC,KAAnC,EAA0C1E,KAA1C,EAAiDyE,wBAAjD,CADC,GAEDA,wBAAuB,CAACC,KAAD,EAAQ1E,KAAR,CAF7B;AAGH;AALqD,OAAnD,CAAP;AAOH;;;;EApCgCvB,gB;;IAsC/BmG,iB;;;;;AACF,6BAAYtN,MAAZ,EAAoB;AAAA;;AAAA,+BACVA,MADU,EACFxK,gCAAgC,CAAC+X,iBAAjC,CAAmDnW,IADjD;AAEnB;;;;2CACsBkQ,W,EAAa;AAChC,UAAMkG,GAAG,GAAG5P,MAAM,CAACA,MAAM,CAAC0J,WAAD,EAAc,cAAd,CAAP,EAAsC,YAAtC,CAAlB;AACAkG,SAAG,CAAC7M,mBAAJ,GAA0B,IAA1B;AACA6M,SAAG,CAACC,wBAAJ,GAA+B;AAC3BC,sBAAc,EAAE;AACZvF,kBAAQ,EAAE,CACN3S,gCAAgC,CAACmY,cAAjC,CAAgDC,KAD1C,EAENpY,gCAAgC,CAACmY,cAAjC,CAAgDE,QAF1C,EAGNrY,gCAAgC,CAACmY,cAAjC,CAAgDG,QAH1C,EAINtY,gCAAgC,CAACmY,cAAjC,CAAgDI,eAJ1C,EAKNvY,gCAAgC,CAACmY,cAAjC,CAAgDK,cAL1C,EAMNxY,gCAAgC,CAACmY,cAAjC,CAAgDM,eAN1C,EAONzY,gCAAgC,CAACmY,cAAjC,CAAgDO,MAP1C,EAQN1Y,gCAAgC,CAACmY,cAAjC,CAAgDQ,qBAR1C;AADE;AADW,OAA/B;AAcH;;;+BACUzN,Y,EAAc1B,gB,EAAkB;AACvC,UAAMkI,OAAO,GAAG,KAAKkB,sBAAL,CAA4BpJ,gBAA5B,EAA8C0B,YAAY,CAAC0N,kBAA3D,CAAhB;;AACA,UAAI,CAAClH,OAAL,EAAc;AACV;AACH;;AACD,WAAK/I,QAAL,CAAc,KAAKE,QAAnB,EAA6B;AAAEe,UAAE,EAAEvJ,IAAI,CAACkL,YAAL,EAAN;AAA2BhC,uBAAe,EAAEmI;AAA5C,OAA7B;AACH;;;6CACwBA,O,EAAS;AAC9B,UAAIlH,MAAM,GAAG,KAAKzB,OAAlB;;AACA,UAAI8P,mBAAkB,GAAG,SAArBA,kBAAqB,CAAC/L,QAAD,EAAWgM,KAAX,EAAkB7F,OAAlB,EAA2BC,KAA3B,EAAqC;AAC1D,YAAIrR,MAAM,GAAG;AACTsI,sBAAY,EAAEK,MAAM,CAACO,sBAAP,CAA8BgO,wBAA9B,CAAuDjM,QAAvD,CADL;AAETgM,eAAK,EAAEtO,MAAM,CAACO,sBAAP,CAA8BiO,OAA9B,CAAsCF,KAAtC,CAFE;AAGT7F,iBAAO,EAAEzI,MAAM,CAACO,sBAAP,CAA8BkO,mBAA9B,CAAkDhG,OAAlD;AAHA,SAAb;AAKA,eAAOzI,MAAM,CAAC7I,WAAP,CAAmB3B,gCAAgC,CAAC+X,iBAAjC,CAAmDnW,IAAtE,EAA4EC,MAA5E,EAAoFqR,KAApF,EAA2FjF,IAA3F,CAAgG,UAACpE,MAAD,EAAY;AAC/G,cAAIA,MAAM,KAAK,IAAf,EAAqB;AACjB,mBAAO5G,SAAP;AACH;;AACD,cAAIxB,MAAM,GAAG,EAAb;;AAJ+G,sDAK9FoI,MAL8F;AAAA;;AAAA;AAK/G,mEAAyB;AAAA,kBAAhB4J,IAAgB;;AACrB,kBAAIzT,gCAAgC,CAACkZ,OAAjC,CAAyC1Q,EAAzC,CAA4CiL,IAA5C,CAAJ,EAAuD;AACnDhS,sBAAM,CAAC0D,IAAP,CAAYqF,MAAM,CAAC4D,sBAAP,CAA8B+K,SAA9B,CAAwC1F,IAAxC,CAAZ;AACH,eAFD,MAGK;AACDhS,sBAAM,CAAC0D,IAAP,CAAYqF,MAAM,CAAC4D,sBAAP,CAA8BgL,YAA9B,CAA2C3F,IAA3C,CAAZ;AACH;;AACD;AACH;AAb8G;AAAA;AAAA;AAAA;AAAA;;AAc/G,iBAAOhS,MAAP;AACH,SAfM,EAeJ,UAACf,KAAD,EAAW;AACV8J,gBAAM,CAAC6I,gBAAP,CAAwBrT,gCAAgC,CAAC+X,iBAAjC,CAAmDnW,IAA3E,EAAiFlB,KAAjF;AACA,iBAAO4S,OAAO,CAACC,OAAR,CAAgB,EAAhB,CAAP;AACH,SAlBM,CAAP;AAmBH,OAzBD;;AA0BA,UAAI1I,UAAU,GAAGL,MAAM,CAACI,aAAP,CAAqBC,UAAtC;AACA,aAAO/K,QAAQ,CAACuK,SAAT,CAAmBgP,2BAAnB,CAA+C3H,OAAO,CAAClI,gBAAvD,EAAyE;AAC5EqP,0BAAkB,EAAE,4BAAC/L,QAAD,EAAWgM,KAAX,EAAkB7F,OAAlB,EAA2BC,KAA3B,EAAqC;AACrD,iBAAOrI,UAAU,CAACgO,kBAAX,GACDhO,UAAU,CAACgO,kBAAX,CAA8B/L,QAA9B,EAAwCgM,KAAxC,EAA+C7F,OAA/C,EAAwDC,KAAxD,EAA+D2F,mBAA/D,CADC,GAEDA,mBAAkB,CAAC/L,QAAD,EAAWgM,KAAX,EAAkB7F,OAAlB,EAA2BC,KAA3B,CAFxB;AAGH;AAL2E,OAAzE,EAMJxB,OAAO,CAAC4H,eAAR,GACG;AAAEC,+BAAuB,EAAE/O,MAAM,CAAC4D,sBAAP,CAA8BoL,iBAA9B,CAAgD9H,OAAO,CAAC4H,eAAxD;AAA3B,OADH,GAEGrW,SARC,CAAP;AASH;;;;EAnE2B+N,mB;;IAqE1ByI,e;;;;;AACF,2BAAYjP,MAAZ,EAAoB;AAAA;;AAAA,+BACVA,MADU,EACFxK,gCAAgC,CAAC0Z,eAAjC,CAAiD9X,IAD/C;AAEnB;;;;2CACsBkQ,W,EAAa;AAChC1J,YAAM,CAACA,MAAM,CAAC0J,WAAD,EAAc,cAAd,CAAP,EAAsC,UAAtC,CAAN,CAAwD3G,mBAAxD,GAA8E,IAA9E;AACH;;;+BACUD,Y,EAAc1B,gB,EAAkB;AACvC,UAAMkI,OAAO,GAAG,KAAKkB,sBAAL,CAA4BpJ,gBAA5B,EAA8C0B,YAAY,CAACyO,gBAA3D,CAAhB;;AACA,UAAI,CAACjI,OAAL,EAAc;AACV;AACH;;AACD,WAAK/I,QAAL,CAAc,KAAKE,QAAnB,EAA6B;AAAEe,UAAE,EAAEvJ,IAAI,CAACkL,YAAL,EAAN;AAA2BhC,uBAAe,EAAEmI;AAA5C,OAA7B;AACH;;;6CACwBA,O,EAAS;AAC9B,UAAIlH,MAAM,GAAG,KAAKzB,OAAlB;;AACA,UAAI6Q,kBAAiB,GAAG,SAApBA,iBAAoB,CAAC9M,QAAD,EAAWoG,KAAX,EAAqB;AACzC,eAAO1I,MAAM,CAAC7I,WAAP,CAAmB3B,gCAAgC,CAAC0Z,eAAjC,CAAiD9X,IAApE,EAA0E4I,MAAM,CAACO,sBAAP,CAA8B8O,gBAA9B,CAA+C/M,QAA/C,CAA1E,EAAoIoG,KAApI,EAA2IjF,IAA3I,CAAgJzD,MAAM,CAAC4D,sBAAP,CAA8B0L,YAA9K,EAA4L,UAACpZ,KAAD,EAAW;AAC1M8J,gBAAM,CAAC6I,gBAAP,CAAwBrT,gCAAgC,CAAC0Z,eAAjC,CAAiD9X,IAAzE,EAA+ElB,KAA/E;AACA,iBAAO4S,OAAO,CAACC,OAAR,CAAgB,EAAhB,CAAP;AACH,SAHM,CAAP;AAIH,OALD;;AAMA,UAAIwG,eAAe,GAAG,SAAlBA,eAAkB,CAACC,QAAD,EAAW9G,KAAX,EAAqB;AACvC,eAAO1I,MAAM,CAAC7I,WAAP,CAAmB3B,gCAAgC,CAACia,sBAAjC,CAAwDrY,IAA3E,EAAiF4I,MAAM,CAACO,sBAAP,CAA8BmP,UAA9B,CAAyCF,QAAzC,CAAjF,EAAqI9G,KAArI,EAA4IjF,IAA5I,CAAiJzD,MAAM,CAAC4D,sBAAP,CAA8B8L,UAA/K,EAA2L,UAACxZ,KAAD,EAAW;AACzM8J,gBAAM,CAAC6I,gBAAP,CAAwBrT,gCAAgC,CAACia,sBAAjC,CAAwDrY,IAAhF,EAAsFlB,KAAtF;AACA,iBAAOsZ,QAAP;AACH,SAHM,CAAP;AAIH,OALD;;AAMA,UAAInP,UAAU,GAAGL,MAAM,CAACI,aAAP,CAAqBC,UAAtC;AACA,aAAO/K,QAAQ,CAACuK,SAAT,CAAmB8P,wBAAnB,CAA4CzI,OAAO,CAAClI,gBAApD,EAAsE;AACzEoQ,yBAAiB,EAAE,2BAAC9M,QAAD,EAAWoG,KAAX,EAAqB;AACpC,iBAAOrI,UAAU,CAAC+O,iBAAX,GACD/O,UAAU,CAAC+O,iBAAX,CAA6B9M,QAA7B,EAAuCoG,KAAvC,EAA8C0G,kBAA9C,CADC,GAEDA,kBAAiB,CAAC9M,QAAD,EAAWoG,KAAX,CAFvB;AAGH,SALwE;AAMzE6G,uBAAe,EAAGrI,OAAO,CAACoC,eAAT,GACX,UAACkG,QAAD,EAAW9G,KAAX,EAAqB;AACnB,iBAAOrI,UAAU,CAACkP,eAAX,GACDlP,UAAU,CAACkP,eAAX,CAA2BC,QAA3B,EAAqC9G,KAArC,EAA4C6G,eAA5C,CADC,GAEDA,eAAe,CAACC,QAAD,EAAW9G,KAAX,CAFrB;AAGH,SALY,GAMXjQ;AAZmE,OAAtE,CAAP;AAcH;;;;EA3CyB+N,mB;;IA6CxBoJ,yB;;;;;AACF,qCAAY5P,MAAZ,EAAoB;AAAA;;AAAA,+BACVA,MADU,EACFxK,gCAAgC,CAACqa,yBAAjC,CAA2DzY,IADzD;AAEnB;;;;2CACsBkQ,W,EAAa;AAChC1J,YAAM,CAACA,MAAM,CAAC0J,WAAD,EAAc,cAAd,CAAP,EAAsC,YAAtC,CAAN,CAA0D3G,mBAA1D,GAAgF,IAAhF;AACH;;;+BACUD,Y,EAAc1B,gB,EAAkB;AACvC,UAAMkI,OAAO,GAAG,KAAKkB,sBAAL,CAA4BpJ,gBAA5B,EAA8C0B,YAAY,CAACoP,0BAA3D,CAAhB;;AACA,UAAI,CAAC5I,OAAL,EAAc;AACV;AACH;;AACD,WAAK/I,QAAL,CAAc,KAAKE,QAAnB,EAA6B;AAAEe,UAAE,EAAEvJ,IAAI,CAACkL,YAAL,EAAN;AAA2BhC,uBAAe,EAAEmI;AAA5C,OAA7B;AACH;;;6CACwBA,O,EAAS;AAC9B,UAAIlH,MAAM,GAAG,KAAKzB,OAAlB;;AACA,UAAIwR,+BAA8B,GAAG,SAAjCA,8BAAiC,CAACzN,QAAD,EAAW4E,OAAX,EAAoBwB,KAApB,EAA8B;AAC/D,YAAIrR,MAAM,GAAG;AACTsI,sBAAY,EAAEK,MAAM,CAACO,sBAAP,CAA8BgO,wBAA9B,CAAuDjM,QAAvD,CADL;AAET4E,iBAAO,EAAElH,MAAM,CAACO,sBAAP,CAA8ByP,mBAA9B,CAAkD9I,OAAlD;AAFA,SAAb;AAIA,eAAOlH,MAAM,CAAC7I,WAAP,CAAmB3B,gCAAgC,CAACqa,yBAAjC,CAA2DzY,IAA9E,EAAoFC,MAApF,EAA4FqR,KAA5F,EAAmGjF,IAAnG,CAAwGzD,MAAM,CAAC4D,sBAAP,CAA8BC,WAAtI,EAAmJ,UAAC3N,KAAD,EAAW;AACjK8J,gBAAM,CAAC6I,gBAAP,CAAwBrT,gCAAgC,CAACqa,yBAAjC,CAA2DzY,IAAnF,EAAyFlB,KAAzF;AACA,iBAAO4S,OAAO,CAACC,OAAR,CAAgB,EAAhB,CAAP;AACH,SAHM,CAAP;AAIH,OATD;;AAUA,UAAI1I,UAAU,GAAGL,MAAM,CAACI,aAAP,CAAqBC,UAAtC;AACA,aAAO/K,QAAQ,CAACuK,SAAT,CAAmBoQ,sCAAnB,CAA0D/I,OAAO,CAAClI,gBAAlE,EAAoF;AACvF+Q,sCAA8B,EAAE,wCAACzN,QAAD,EAAW4E,OAAX,EAAoBwB,KAApB,EAA8B;AAC1D,iBAAOrI,UAAU,CAAC0P,8BAAX,GACD1P,UAAU,CAAC0P,8BAAX,CAA0CzN,QAA1C,EAAoD4E,OAApD,EAA6DwB,KAA7D,EAAoEqH,+BAApE,CADC,GAEDA,+BAA8B,CAACzN,QAAD,EAAW4E,OAAX,EAAoBwB,KAApB,CAFpC;AAGH;AALsF,OAApF,CAAP;AAOH;;;;EAlCmClC,mB;;IAoClC0J,8B;;;;;AACF,0CAAYlQ,MAAZ,EAAoB;AAAA;;AAAA,+BACVA,MADU,EACFxK,gCAAgC,CAAC2a,8BAAjC,CAAgE/Y,IAD9D;AAEnB;;;;2CACsBkQ,W,EAAa;AAChC1J,YAAM,CAACA,MAAM,CAAC0J,WAAD,EAAc,cAAd,CAAP,EAAsC,iBAAtC,CAAN,CAA+D3G,mBAA/D,GAAqF,IAArF;AACH;;;+BACUD,Y,EAAc1B,gB,EAAkB;AACvC,UAAMkI,OAAO,GAAG,KAAKkB,sBAAL,CAA4BpJ,gBAA5B,EAA8C0B,YAAY,CAAC0P,+BAA3D,CAAhB;;AACA,UAAI,CAAClJ,OAAL,EAAc;AACV;AACH;;AACD,WAAK/I,QAAL,CAAc,KAAKE,QAAnB,EAA6B;AAAEe,UAAE,EAAEvJ,IAAI,CAACkL,YAAL,EAAN;AAA2BhC,uBAAe,EAAEmI;AAA5C,OAA7B;AACH;;;6CACwBA,O,EAAS;AAC9B,UAAIlH,MAAM,GAAG,KAAKzB,OAAlB;;AACA,UAAI8R,oCAAmC,GAAG,SAAtCA,mCAAsC,CAAC/N,QAAD,EAAWgM,KAAX,EAAkBpH,OAAlB,EAA2BwB,KAA3B,EAAqC;AAC3E,YAAIrR,MAAM,GAAG;AACTsI,sBAAY,EAAEK,MAAM,CAACO,sBAAP,CAA8BgO,wBAA9B,CAAuDjM,QAAvD,CADL;AAETgM,eAAK,EAAEtO,MAAM,CAACO,sBAAP,CAA8BiO,OAA9B,CAAsCF,KAAtC,CAFE;AAGTpH,iBAAO,EAAElH,MAAM,CAACO,sBAAP,CAA8ByP,mBAA9B,CAAkD9I,OAAlD;AAHA,SAAb;AAKA,eAAOlH,MAAM,CAAC7I,WAAP,CAAmB3B,gCAAgC,CAAC2a,8BAAjC,CAAgE/Y,IAAnF,EAAyFC,MAAzF,EAAiGqR,KAAjG,EAAwGjF,IAAxG,CAA6GzD,MAAM,CAAC4D,sBAAP,CAA8BC,WAA3I,EAAwJ,UAAC3N,KAAD,EAAW;AACtK8J,gBAAM,CAAC6I,gBAAP,CAAwBrT,gCAAgC,CAAC2a,8BAAjC,CAAgE/Y,IAAxF,EAA8FlB,KAA9F;AACA,iBAAO4S,OAAO,CAACC,OAAR,CAAgB,EAAhB,CAAP;AACH,SAHM,CAAP;AAIH,OAVD;;AAWA,UAAI1I,UAAU,GAAGL,MAAM,CAACI,aAAP,CAAqBC,UAAtC;AACA,aAAO/K,QAAQ,CAACuK,SAAT,CAAmByQ,2CAAnB,CAA+DpJ,OAAO,CAAClI,gBAAvE,EAAyF;AAC5FqR,2CAAmC,EAAE,6CAAC/N,QAAD,EAAWgM,KAAX,EAAkBpH,OAAlB,EAA2BwB,KAA3B,EAAqC;AACtE,iBAAOrI,UAAU,CAACgQ,mCAAX,GACDhQ,UAAU,CAACgQ,mCAAX,CAA+C/N,QAA/C,EAAyDgM,KAAzD,EAAgEpH,OAAhE,EAAyEwB,KAAzE,EAAgF2H,oCAAhF,CADC,GAEDA,oCAAmC,CAAC/N,QAAD,EAAWgM,KAAX,EAAkBpH,OAAlB,EAA2BwB,KAA3B,CAFzC;AAGH;AAL2F,OAAzF,CAAP;AAOH;;;;EAnCwClC,mB;;IAqCvC+J,+B;;;;;AACF,2CAAYvQ,MAAZ,EAAoB;AAAA;;AAAA,+BACVA,MADU,EACFxK,gCAAgC,CAACgb,+BAAjC,CAAiEpZ,IAD/D;AAEnB;;;;2CACsBkQ,W,EAAa;AAChC1J,YAAM,CAACA,MAAM,CAAC0J,WAAD,EAAc,cAAd,CAAP,EAAsC,kBAAtC,CAAN,CAAgE3G,mBAAhE,GAAsF,IAAtF;AACH;;;+BACUD,Y,EAAc1B,gB,EAAkB;AACvC,UAAMkI,OAAO,GAAG,KAAKkB,sBAAL,CAA4BpJ,gBAA5B,EAA8C0B,YAAY,CAAC+P,gCAA3D,CAAhB;;AACA,UAAI,CAACvJ,OAAL,EAAc;AACV;AACH;;AACD,WAAK/I,QAAL,CAAc,KAAKE,QAAnB,EAA6B;AAAEe,UAAE,EAAEvJ,IAAI,CAACkL,YAAL,EAAN;AAA2BhC,uBAAe,EAAEmI;AAA5C,OAA7B;AACH;;;6CACwBA,O,EAAS;AAAA;;AAC9B,UAAIlH,MAAM,GAAG,KAAKzB,OAAlB;AACA,UAAImS,oBAAoB,GAAGxJ,OAAO,CAACwJ,oBAAR,IAAgC,EAA3D;;AACA,UAAIC,6BAA4B,GAAG,SAA/BA,4BAA+B,CAACrO,QAAD,EAAWkG,QAAX,EAAqBoI,EAArB,EAAyB1J,OAAzB,EAAkCwB,KAAlC,EAA4C;AAC3E,YAAIrR,MAAM,GAAG;AACTsI,sBAAY,EAAEK,MAAM,CAACO,sBAAP,CAA8BgO,wBAA9B,CAAuDjM,QAAvD,CADL;AAETkG,kBAAQ,EAAExI,MAAM,CAACO,sBAAP,CAA8BsQ,UAA9B,CAAyCrI,QAAzC,CAFD;AAGToI,YAAE,EAAEA,EAHK;AAIT1J,iBAAO,EAAElH,MAAM,CAACO,sBAAP,CAA8ByP,mBAA9B,CAAkD9I,OAAlD;AAJA,SAAb;AAMA,eAAOlH,MAAM,CAAC7I,WAAP,CAAmB3B,gCAAgC,CAACgb,+BAAjC,CAAiEpZ,IAApF,EAA0FC,MAA1F,EAAkGqR,KAAlG,EAAyGjF,IAAzG,CAA8GzD,MAAM,CAAC4D,sBAAP,CAA8BC,WAA5I,EAAyJ,UAAC3N,KAAD,EAAW;AACvK8J,gBAAM,CAAC6I,gBAAP,CAAwBrT,gCAAgC,CAACgb,+BAAjC,CAAiEpZ,IAAzF,EAA+FlB,KAA/F;AACA,iBAAO4S,OAAO,CAACC,OAAR,CAAgB,EAAhB,CAAP;AACH,SAHM,CAAP;AAIH,OAXD;;AAYA,UAAI1I,UAAU,GAAGL,MAAM,CAACI,aAAP,CAAqBC,UAAtC;AACA,aAAO,wBAAA/K,QAAQ,CAACuK,SAAT,EAAmBiR,oCAAnB,8BAAwD5J,OAAO,CAAClI,gBAAhE,EAAkF;AACrF2R,oCAA4B,EAAE,sCAACrO,QAAD,EAAWkG,QAAX,EAAqBoI,EAArB,EAAyB1J,OAAzB,EAAkCwB,KAAlC,EAA4C;AACtE,iBAAOrI,UAAU,CAACsQ,4BAAX,GACDtQ,UAAU,CAACsQ,4BAAX,CAAwCrO,QAAxC,EAAkDkG,QAAlD,EAA4DoI,EAA5D,EAAgE1J,OAAhE,EAAyEwB,KAAzE,EAAgFiI,6BAAhF,CADC,GAEDA,6BAA4B,CAACrO,QAAD,EAAWkG,QAAX,EAAqBoI,EAArB,EAAyB1J,OAAzB,EAAkCwB,KAAlC,CAFlC;AAGH;AALoF,OAAlF,EAMJxB,OAAO,CAAC6J,qBANJ,4BAM8BL,oBAN9B,GAAP;AAOH;;;;EArCyClK,mB;;IAuCxCwK,a;;;;;AACF,yBAAYhR,MAAZ,EAAoB;AAAA;;AAAA,+BACVA,MADU,EACFxK,gCAAgC,CAACyb,aAAjC,CAA+C7Z,IAD7C;AAEnB;;;;2CACsBkQ,W,EAAa;AAChC,UAAI4J,MAAM,GAAGtT,MAAM,CAACA,MAAM,CAAC0J,WAAD,EAAc,cAAd,CAAP,EAAsC,QAAtC,CAAnB;AACA4J,YAAM,CAACvQ,mBAAP,GAA6B,IAA7B;AACAuQ,YAAM,CAACC,cAAP,GAAwB,IAAxB;AACH;;;+BACUzQ,Y,EAAc1B,gB,EAAkB;AACvC,UAAMkI,OAAO,GAAG,KAAKkB,sBAAL,CAA4BpJ,gBAA5B,EAA8C0B,YAAY,CAAC0Q,cAA3D,CAAhB;;AACA,UAAI,CAAClK,OAAL,EAAc;AACV;AACH;;AACD,UAAIvR,EAAE,WAAF,CAAW+K,YAAY,CAAC0Q,cAAxB,CAAJ,EAA6C;AACzClK,eAAO,CAACmK,eAAR,GAA0B,KAA1B;AACH;;AACD,WAAKlT,QAAL,CAAc,KAAKE,QAAnB,EAA6B;AAAEe,UAAE,EAAEvJ,IAAI,CAACkL,YAAL,EAAN;AAA2BhC,uBAAe,EAAEmI;AAA5C,OAA7B;AACH;;;6CACwBA,O,EAAS;AAC9B,UAAIlH,MAAM,GAAG,KAAKzB,OAAlB;;AACA,UAAI+S,mBAAkB,GAAG,SAArBA,kBAAqB,CAAChP,QAAD,EAAWkG,QAAX,EAAqB+I,OAArB,EAA8B7I,KAA9B,EAAwC;AAC7D,YAAIrR,MAAM,GAAG;AACTsI,sBAAY,EAAEK,MAAM,CAACO,sBAAP,CAA8BgO,wBAA9B,CAAuDjM,QAAvD,CADL;AAETkG,kBAAQ,EAAExI,MAAM,CAACO,sBAAP,CAA8BsQ,UAA9B,CAAyCrI,QAAzC,CAFD;AAGT+I,iBAAO,EAAEA;AAHA,SAAb;AAKA,eAAOvR,MAAM,CAAC7I,WAAP,CAAmB3B,gCAAgC,CAACyb,aAAjC,CAA+C7Z,IAAlE,EAAwEC,MAAxE,EAAgFqR,KAAhF,EAAuFjF,IAAvF,CAA4FzD,MAAM,CAAC4D,sBAAP,CAA8B4N,eAA1H,EAA2I,UAACtb,KAAD,EAAW;AACzJ8J,gBAAM,CAAC6I,gBAAP,CAAwBrT,gCAAgC,CAACyb,aAAjC,CAA+C7Z,IAAvE,EAA6ElB,KAA7E;AACA,iBAAO4S,OAAO,CAAC2I,MAAR,CAAe,IAAI/K,KAAJ,CAAUxQ,KAAK,CAACF,OAAhB,CAAf,CAAP;AACH,SAHM,CAAP;AAIH,OAVD;;AAWA,UAAI0b,aAAa,GAAG,SAAhBA,aAAgB,CAACpP,QAAD,EAAWkG,QAAX,EAAqBE,KAArB,EAA+B;AAC/C,YAAIrR,MAAM,GAAG;AACTsI,sBAAY,EAAEK,MAAM,CAACO,sBAAP,CAA8BgO,wBAA9B,CAAuDjM,QAAvD,CADL;AAETkG,kBAAQ,EAAExI,MAAM,CAACO,sBAAP,CAA8BsQ,UAA9B,CAAyCrI,QAAzC;AAFD,SAAb;AAIA,eAAOxI,MAAM,CAAC7I,WAAP,CAAmB3B,gCAAgC,CAACmc,oBAAjC,CAAsDva,IAAzE,EAA+EC,MAA/E,EAAuFqR,KAAvF,EAA8FjF,IAA9F,CAAmG,UAACxM,MAAD,EAAY;AAClH,cAAIzB,gCAAgC,CAACoc,KAAjC,CAAuC5T,EAAvC,CAA0C/G,MAA1C,CAAJ,EAAuD;AACnD,mBAAO+I,MAAM,CAAC4D,sBAAP,CAA8B4K,OAA9B,CAAsCvX,MAAtC,CAAP;AACH,WAFD,MAGK,IAAIA,MAAM,IAAIzB,gCAAgC,CAACoc,KAAjC,CAAuC5T,EAAvC,CAA0C/G,MAAM,CAACqX,KAAjD,CAAd,EAAuE;AACxE,mBAAO;AACHA,mBAAK,EAAEtO,MAAM,CAAC4D,sBAAP,CAA8B4K,OAA9B,CAAsCvX,MAAM,CAACqX,KAA7C,CADJ;AAEHuD,yBAAW,EAAE5a,MAAM,CAAC4a;AAFjB,aAAP;AAIH,WATiH,CAUlH;;;AACA,iBAAO/I,OAAO,CAAC2I,MAAR,CAAe,IAAI/K,KAAJ,iCAAf,CAAP;AACH,SAZM,EAYJ,UAACxQ,KAAD,EAAW;AACV8J,gBAAM,CAAC6I,gBAAP,CAAwBrT,gCAAgC,CAACmc,oBAAjC,CAAsDva,IAA9E,EAAoFlB,KAApF;AACA,iBAAO4S,OAAO,CAAC2I,MAAR,CAAe,IAAI/K,KAAJ,CAAUxQ,KAAK,CAACF,OAAhB,CAAf,CAAP;AACH,SAfM,CAAP;AAgBH,OArBD;;AAsBA,UAAIqK,UAAU,GAAGL,MAAM,CAACI,aAAP,CAAqBC,UAAtC;AACA,aAAO/K,QAAQ,CAACuK,SAAT,CAAmBiS,sBAAnB,CAA0C5K,OAAO,CAAClI,gBAAlD,EAAoE;AACvEsS,0BAAkB,EAAE,4BAAChP,QAAD,EAAWkG,QAAX,EAAqB+I,OAArB,EAA8B7I,KAA9B,EAAwC;AACxD,iBAAOrI,UAAU,CAACiR,kBAAX,GACDjR,UAAU,CAACiR,kBAAX,CAA8BhP,QAA9B,EAAwCkG,QAAxC,EAAkD+I,OAAlD,EAA2D7I,KAA3D,EAAkE4I,mBAAlE,CADC,GAEDA,mBAAkB,CAAChP,QAAD,EAAWkG,QAAX,EAAqB+I,OAArB,EAA8B7I,KAA9B,CAFxB;AAGH,SALsE;AAMvEgJ,qBAAa,EAAExK,OAAO,CAACmK,eAAR,GACT,UAAC/O,QAAD,EAAWkG,QAAX,EAAqBE,KAArB,EAA+B;AAC7B,iBAAOrI,UAAU,CAACqR,aAAX,GACDrR,UAAU,CAACqR,aAAX,CAAyBpP,QAAzB,EAAmCkG,QAAnC,EAA6CE,KAA7C,EAAoDgJ,aAApD,CADC,GAEDA,aAAa,CAACpP,QAAD,EAAWkG,QAAX,EAAqBE,KAArB,CAFnB;AAGH,SALU,GAMTjQ;AAZiE,OAApE,CAAP;AAcH;;;;EArEuB+N,mB;;IAuEtBuL,mB;;;;;AACF,+BAAY/R,MAAZ,EAAoB;AAAA;;AAAA,+BACVA,MADU,EACFxK,gCAAgC,CAACwc,mBAAjC,CAAqD5a,IADnD;AAEnB;;;;2CACsBkQ,W,EAAa;AAChC1J,YAAM,CAACA,MAAM,CAAC0J,WAAD,EAAc,cAAd,CAAP,EAAsC,cAAtC,CAAN,CAA4D3G,mBAA5D,GAAkF,IAAlF;AACH;;;+BACUD,Y,EAAc1B,gB,EAAkB;AACvC,UAAMkI,OAAO,GAAG,KAAKkB,sBAAL,CAA4BpJ,gBAA5B,EAA8C0B,YAAY,CAACuR,oBAA3D,CAAhB;;AACA,UAAI,CAAC/K,OAAL,EAAc;AACV;AACH;;AACD,WAAK/I,QAAL,CAAc,KAAKE,QAAnB,EAA6B;AAAEe,UAAE,EAAEvJ,IAAI,CAACkL,YAAL,EAAN;AAA2BhC,uBAAe,EAAEmI;AAA5C,OAA7B;AACH;;;6CACwBA,O,EAAS;AAC9B,UAAIlH,MAAM,GAAG,KAAKzB,OAAlB;;AACA,UAAI2T,qBAAoB,GAAG,SAAvBA,oBAAuB,CAAC5P,QAAD,EAAWoG,KAAX,EAAqB;AAC5C,eAAO1I,MAAM,CAAC7I,WAAP,CAAmB3B,gCAAgC,CAACwc,mBAAjC,CAAqD5a,IAAxE,EAA8E4I,MAAM,CAACO,sBAAP,CAA8B4R,oBAA9B,CAAmD7P,QAAnD,CAA9E,EAA4IoG,KAA5I,EAAmJjF,IAAnJ,CAAwJzD,MAAM,CAAC4D,sBAAP,CAA8BwO,eAAtL,EAAuM,UAAClc,KAAD,EAAW;AACrN8J,gBAAM,CAAC6I,gBAAP,CAAwBrT,gCAAgC,CAACwc,mBAAjC,CAAqD5a,IAA7E,EAAmFlB,KAAnF;AACA4S,iBAAO,CAACC,OAAR,CAAgB,IAAIrC,KAAJ,CAAUxQ,KAAK,CAACF,OAAhB,CAAhB;AACH,SAHM,CAAP;AAIH,OALD;;AAMA,UAAIqc,mBAAmB,GAAG,SAAtBA,mBAAsB,CAACC,IAAD,EAAO5J,KAAP,EAAiB;AACvC,eAAO1I,MAAM,CAAC7I,WAAP,CAAmB3B,gCAAgC,CAAC+c,0BAAjC,CAA4Dnb,IAA/E,EAAqF4I,MAAM,CAACO,sBAAP,CAA8BiS,cAA9B,CAA6CF,IAA7C,CAArF,EAAyI5J,KAAzI,EAAgJjF,IAAhJ,CAAqJzD,MAAM,CAAC4D,sBAAP,CAA8B4O,cAAnL,EAAmM,UAACtc,KAAD,EAAW;AACjN8J,gBAAM,CAAC6I,gBAAP,CAAwBrT,gCAAgC,CAAC+c,0BAAjC,CAA4Dnb,IAApF,EAA0FlB,KAA1F;AACA4S,iBAAO,CAACC,OAAR,CAAgB,IAAIrC,KAAJ,CAAUxQ,KAAK,CAACF,OAAhB,CAAhB;AACH,SAHM,CAAP;AAIH,OALD;;AAMA,UAAIqK,UAAU,GAAGL,MAAM,CAACI,aAAP,CAAqBC,UAAtC;AACA,aAAO/K,QAAQ,CAACuK,SAAT,CAAmB4S,4BAAnB,CAAgDvL,OAAO,CAAClI,gBAAxD,EAA0E;AAC7EkT,4BAAoB,EAAE,8BAAC5P,QAAD,EAAWoG,KAAX,EAAqB;AACvC,iBAAOrI,UAAU,CAAC6R,oBAAX,GACD7R,UAAU,CAAC6R,oBAAX,CAAgC5P,QAAhC,EAA0CoG,KAA1C,EAAiDwJ,qBAAjD,CADC,GAEDA,qBAAoB,CAAC5P,QAAD,EAAWoG,KAAX,CAF1B;AAGH,SAL4E;AAM7E2J,2BAAmB,EAAEnL,OAAO,CAACoC,eAAR,GACf,UAACgJ,IAAD,EAAO5J,KAAP,EAAiB;AACf,iBAAOrI,UAAU,CAACgS,mBAAX,GACDhS,UAAU,CAACgS,mBAAX,CAA+BC,IAA/B,EAAqC5J,KAArC,EAA4C2J,mBAA5C,CADC,GAEDA,mBAAmB,CAACC,IAAD,EAAO5J,KAAP,CAFzB;AAGH,SALgB,GAMfjQ;AAZuE,OAA1E,CAAP;AAcH;;;;EA3C6B+N,mB;;IA6C5BkM,oB;AACF,gCAAYnU,OAAZ,EAAqB;AAAA;;AACjB,SAAKA,OAAL,GAAeA,OAAf;AACA,SAAKoU,UAAL,GAAkB,IAAI7T,GAAJ,EAAlB;AACH;;;;2CAIsB4B,Y,EAAc;AACjC9C,YAAM,CAACA,MAAM,CAAC8C,YAAD,EAAe,WAAf,CAAP,EAAoC,wBAApC,CAAN,CAAoEC,mBAApE,GAA0F,IAA1F;AACH;;;iCACY;AACT,UAAIiS,OAAO,GAAG,KAAKrU,OAAL,CAAa6B,aAAb,CAA2ByS,WAA3B,CAAuCC,oBAArD;;AACA,UAAIF,OAAO,KAAK,KAAK,CAArB,EAAwB;AACpB,aAAKzU,QAAL,CAAc,KAAKE,QAAnB,EAA6B;AACzBe,YAAE,EAAEvJ,IAAI,CAACkL,YAAL,EADqB;AAEzBhC,yBAAe,EAAE;AACb6T,mBAAO,EAAEA;AADI;AAFQ,SAA7B;AAMH;AACJ;;;6BACQrY,Q,EAAUxD,I,EAAM;AAAA;;AACrB,UAAIwP,UAAU,GAAGjR,QAAQ,CAAC4K,SAAT,CAAmB6S,wBAAnB,CAA4C,UAAC5Q,KAAD,EAAW;AACpE,eAAI,CAAC4Q,wBAAL,CAA8Bhc,IAAI,CAACgI,eAAL,CAAqB6T,OAAnD,EAA4DzQ,KAA5D;AACH,OAFgB,CAAjB;;AAGA,WAAKwQ,UAAL,CAAgBxT,GAAhB,CAAoBpI,IAAI,CAACqI,EAAzB,EAA6BmH,UAA7B;;AACA,UAAIxP,IAAI,CAACgI,eAAL,CAAqB6T,OAArB,KAAiC,KAAK,CAA1C,EAA6C;AACzC,aAAKG,wBAAL,CAA8Bhc,IAAI,CAACgI,eAAL,CAAqB6T,OAAnD,EAA4Dna,SAA5D;AACH;AACJ;;;+BACU2G,E,EAAI;AACX,UAAImH,UAAU,GAAG,KAAKoM,UAAL,CAAgBlR,GAAhB,CAAoBrC,EAApB,CAAjB;;AACA,UAAImH,UAAJ,EAAgB;AACZ,aAAKoM,UAAL,WAAuBvT,EAAvB;;AACAmH,kBAAU,CAACvM,OAAX;AACH;AACJ;;;8BACS;AAAA,kDACiB,KAAK2Y,UAAL,CAAgBtT,MAAhB,EADjB;AAAA;;AAAA;AACN,+DAAiD;AAAA,cAAxCkH,UAAwC;AAC7CA,oBAAU,CAACvM,OAAX;AACH;AAHK;AAAA;AAAA;AAAA;AAAA;;AAIN,WAAK2Y,UAAL,CAAgBlT,KAAhB;AACH;;;6CACwBqT,oB,EAAsB3Q,K,EAAO;AAAA;;AAClD,UAAI6Q,QAAJ;;AACA,UAAIrd,EAAE,CAAC2B,MAAH,CAAUwb,oBAAV,CAAJ,EAAqC;AACjCE,gBAAQ,GAAG,CAACF,oBAAD,CAAX;AACH,OAFD,MAGK;AACDE,gBAAQ,GAAGF,oBAAX;AACH;;AACD,UAAIE,QAAQ,KAAK,KAAK,CAAlB,IAAuB7Q,KAAK,KAAK,KAAK,CAA1C,EAA6C;AACzC,YAAI8Q,QAAQ,GAAGD,QAAQ,CAACE,IAAT,CAAc,UAACN,OAAD;AAAA,iBAAazQ,KAAK,CAACgR,oBAAN,CAA2BP,OAA3B,CAAb;AAAA,SAAd,CAAf;;AACA,YAAI,CAACK,QAAL,EAAe;AACX;AACH;AACJ;;AACD,UAAI/Z,sBAAsB,GAAG,SAAzBA,sBAAyB,CAAC8Z,QAAD,EAAc;AACvC,YAAIA,QAAQ,KAAK,KAAK,CAAtB,EAAyB;AACrB,iBAAI,CAACzU,OAAL,CAAa7G,gBAAb,CAA8BlC,gCAAgC,CAAC2D,kCAAjC,CAAoE/B,IAAlG,EAAwG;AAAEgc,oBAAQ,EAAE;AAAZ,WAAxG;;AACA;AACH;;AACD,eAAI,CAAC7U,OAAL,CAAa7G,gBAAb,CAA8BlC,gCAAgC,CAAC2D,kCAAjC,CAAoE/B,IAAlG,EAAwG;AAAEgc,kBAAQ,EAAE,OAAI,CAACC,0BAAL,CAAgCL,QAAhC;AAAZ,SAAxG;AACH,OAND;;AAOA,UAAI3S,UAAU,GAAG,KAAKiT,aAAL,EAAjB;AACAjT,gBAAU,GACJA,UAAU,CAAC2S,QAAD,EAAW9Z,sBAAX,CADN,GAEJA,sBAAsB,CAAC8Z,QAAD,CAF5B;AAGH;;;+CAC0BO,I,EAAM;AAC7B,eAASC,UAAT,CAAoBtJ,MAApB,EAA4BuJ,IAA5B,EAAkC;AAC9B,YAAIC,OAAO,GAAGxJ,MAAd;;AACA,aAAK,IAAIyJ,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGF,IAAI,CAAC3Y,MAAL,GAAc,CAAlC,EAAqC6Y,CAAC,EAAtC,EAA0C;AACtC,cAAIC,GAAG,GAAGF,OAAO,CAACD,IAAI,CAACE,CAAD,CAAL,CAAjB;;AACA,cAAI,CAACC,GAAL,EAAU;AACNA,eAAG,GAAGze,MAAM,CAAC0e,MAAP,CAAc,IAAd,CAAN;AACAH,mBAAO,CAACD,IAAI,CAACE,CAAD,CAAL,CAAP,GAAmBC,GAAnB;AACH;;AACDF,iBAAO,GAAGE,GAAV;AACH;;AACD,eAAOF,OAAP;AACH;;AACD,UAAI3N,QAAQ,GAAG,KAAKxH,OAAL,CAAa6B,aAAb,CAA2B0T,eAA3B,GACT,KAAKvV,OAAL,CAAa6B,aAAb,CAA2B0T,eAA3B,CAA2C5S,GADlC,GAETzI,SAFN;AAGA,UAAIxB,MAAM,GAAG9B,MAAM,CAAC0e,MAAP,CAAc,IAAd,CAAb;;AACA,WAAK,IAAIF,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGJ,IAAI,CAACzY,MAAzB,EAAiC6Y,CAAC,EAAlC,EAAsC;AAClC,YAAI7V,GAAG,GAAGyV,IAAI,CAACI,CAAD,CAAd;AACA,YAAII,KAAK,GAAGjW,GAAG,CAACkW,OAAJ,CAAY,GAAZ,CAAZ;AACA,YAAI9J,MAAM,GAAG,IAAb;;AACA,YAAI6J,KAAK,IAAI,CAAb,EAAgB;AACZ7J,gBAAM,GAAG5U,QAAQ,CAAC4K,SAAT,CAAmB+T,gBAAnB,CAAoCnW,GAAG,CAACoW,MAAJ,CAAW,CAAX,EAAcH,KAAd,CAApC,EAA0DhO,QAA1D,EAAoEtE,GAApE,CAAwE3D,GAAG,CAACoW,MAAJ,CAAWH,KAAK,GAAG,CAAnB,CAAxE,CAAT;AACH,SAFD,MAGK;AACD7J,gBAAM,GAAG5U,QAAQ,CAAC4K,SAAT,CAAmB+T,gBAAnB,CAAoCnW,GAApC,EAAyCiI,QAAzC,CAAT;AACH;;AACD,YAAImE,MAAJ,EAAY;AACR,cAAIuJ,IAAI,GAAGF,IAAI,CAACI,CAAD,CAAJ,CAAQQ,KAAR,CAAc,GAAd,CAAX;AACAX,oBAAU,CAACvc,MAAD,EAASwc,IAAT,CAAV,CAAyBA,IAAI,CAACA,IAAI,CAAC3Y,MAAL,GAAc,CAAf,CAA7B,IAAkDoP,MAAlD;AACH;AACJ;;AACD,aAAOjT,MAAP;AACH;;;oCACe;AACZ,UAAIoJ,UAAU,GAAG,KAAK9B,OAAL,CAAa6B,aAAb,CAA2BC,UAA5C;;AACA,UAAIA,UAAU,CAACH,SAAX,IAAwBG,UAAU,CAACH,SAAX,CAAqBhH,sBAAjD,EAAyE;AACrE,eAAOmH,UAAU,CAACH,SAAX,CAAqBhH,sBAA5B;AACH,OAFD,MAGK;AACD,eAAOT,SAAP;AACH;AACJ;;;wBA3Gc;AACX,aAAOjD,gCAAgC,CAAC2D,kCAAjC,CAAoE/B,IAA3E;AACH;;;;;;IA2GCgd,qB;AACF,iCAAY7V,OAAZ,EAAqB;AAAA;;AACjB,SAAKA,OAAL,GAAeA,OAAf;AACA,SAAK8V,SAAL,GAAiB,IAAIvV,GAAJ,EAAjB;AACH;;;;2CAIsB4B,Y,EAAc;AACjC9C,YAAM,CAACA,MAAM,CAAC8C,YAAD,EAAe,WAAf,CAAP,EAAoC,gBAApC,CAAN,CAA4DC,mBAA5D,GAAkF,IAAlF;AACH;;;+BACUD,Y,EAAc;AACrB,UAAI,CAACA,YAAY,CAAC4T,sBAAlB,EAA0C;AACtC;AACH;;AACD,WAAKnW,QAAL,CAAc,KAAKE,QAAnB,EAA6B;AACzBe,UAAE,EAAEvJ,IAAI,CAACkL,YAAL,EADqB;AAEzBhC,uBAAe,EAAE5J,MAAM,CAAC6M,MAAP,CAAc,EAAd,EAAkBtB,YAAY,CAAC4T,sBAA/B;AAFQ,OAA7B;AAIH;;;6BACQ/Z,Q,EAAUxD,I,EAAM;AACrB,UAAIiJ,MAAM,GAAG,KAAKzB,OAAlB;;AACA,UAAIxH,IAAI,CAACgI,eAAL,CAAqBwV,QAAzB,EAAmC;AAC/B,YAAIzP,YAAY,GAAG,EAAnB;;AAD+B,oDAET/N,IAAI,CAACgI,eAAL,CAAqBwV,QAFZ;AAAA;;AAAA;AAAA;AAAA,gBAEpBC,OAFoB;AAG3B1P,wBAAY,CAACnK,IAAb,CAAkBrF,QAAQ,CAACif,QAAT,CAAkBE,eAAlB,CAAkCD,OAAlC,EAA2C,YAAa;AAAA,iDAATE,IAAS;AAATA,oBAAS;AAAA;;AACtE,kBAAIrd,MAAM,GAAG;AACTmd,uBAAO,EAAPA,OADS;AAETG,yBAAS,EAAED;AAFF,eAAb;AAIA,qBAAO1U,MAAM,CAAC7I,WAAP,CAAmB3B,gCAAgC,CAACof,qBAAjC,CAAuDxd,IAA1E,EAAgFC,MAAhF,EAAwFoM,IAAxF,CAA6FhL,SAA7F,EAAwG,UAACvC,KAAD,EAAW;AACtH8J,sBAAM,CAAC6I,gBAAP,CAAwBrT,gCAAgC,CAACof,qBAAjC,CAAuDxd,IAA/E,EAAqFlB,KAArF;AACH,eAFM,CAAP;AAGH,aARiB,CAAlB;AAH2B;;AAE/B,iEAAqD;AAAA;AAUpD;AAZ8B;AAAA;AAAA;AAAA;AAAA;;AAa/B,aAAKme,SAAL,CAAelV,GAAf,CAAmBpI,IAAI,CAACqI,EAAxB,EAA4B0F,YAA5B;AACH;AACJ;;;+BACU1F,E,EAAI;AACX,UAAI0F,YAAY,GAAG,KAAKuP,SAAL,CAAe5S,GAAf,CAAmBrC,EAAnB,CAAnB;;AACA,UAAI0F,YAAJ,EAAkB;AACdA,oBAAY,CAAC7D,OAAb,CAAqB,UAAAsF,UAAU;AAAA,iBAAIA,UAAU,CAACvM,OAAX,EAAJ;AAAA,SAA/B;AACH;AACJ;;;8BACS;AACN,WAAKqa,SAAL,CAAepT,OAAf,CAAuB,UAAC5L,KAAD,EAAW;AAC9BA,aAAK,CAAC4L,OAAN,CAAc,UAAAsF,UAAU;AAAA,iBAAIA,UAAU,CAACvM,OAAX,EAAJ;AAAA,SAAxB;AACH,OAFD;;AAGA,WAAKqa,SAAL,CAAe5U,KAAf;AACH;;;wBA5Cc;AACX,aAAOjK,gCAAgC,CAACof,qBAAjC,CAAuDxd,IAA9D;AACH;;;;;;AA4CL,IAAIyd,iBAAJ;;AACA,CAAC,UAAUA,iBAAV,EAA6B;AAC1B,WAAS7W,EAAT,CAAY3I,KAAZ,EAAmB;AACf,QAAI4I,SAAS,GAAG5I,KAAhB;AACA,WAAO4I,SAAS,IAAIzI,gCAAgC,CAACsf,aAAjC,CAA+C9W,EAA/C,CAAkD3I,KAAK,CAAC0f,MAAxD,CAAb,IAAgFvf,gCAAgC,CAACwf,aAAjC,CAA+ChX,EAA/C,CAAkD3I,KAAK,CAAC4f,MAAxD,CAAvF;AACH;;AACDJ,mBAAiB,CAAC7W,EAAlB,GAAuBA,EAAvB;AACH,CAND,EAMG6W,iBAAiB,GAAG5f,OAAO,CAAC4f,iBAAR,KAA8B5f,OAAO,CAAC4f,iBAAR,GAA4B,EAA1D,CANvB;;IAOMK,O;AACF,mBAAYC,QAAZ,EAAsBC,OAAtB,EAA+B;AAAA;;AAC3B,SAAKD,QAAL,GAAgBA,QAAhB;AACA,SAAKC,OAAL,GAAeA,OAAf;AACA,SAAKC,KAAL,GAAa,KAAb;AACH;;;;8BAIS;AACN,WAAKA,KAAL,GAAa,IAAb;;AACA,WAAKF,QAAL;AACH;;;2BACMjf,K,EAAO;AACV,WAAKmf,KAAL,GAAa,IAAb;;AACA,WAAKD,OAAL,CAAalf,KAAb;AACH;;;wBAVY;AACT,aAAO,KAAKmf,KAAZ;AACH;;;;;;IAUCC,kB;AACF,8BAAYlW,EAAZ,EAAgBhF,IAAhB,EAAsBgG,aAAtB,EAAqC;AAAA;;AAAA;;AACjC,SAAKmV,YAAL,GAAoB/f,gCAAgC,CAAC2C,WAAjC,CAA6CC,IAAjE;AACA,SAAKod,SAAL,GAAiB,EAAjB;AACA,SAAKC,eAAL,GAAuB,IAAI3W,GAAJ,EAAvB;AACA,SAAK4W,gBAAL,GAAwB,IAAI5W,GAAJ,EAAxB;AACA,SAAK6W,GAAL,GAAWvW,EAAX;AACA,SAAKwW,KAAL,GAAaxb,IAAb;AACAgG,iBAAa,GAAGA,aAAa,IAAI,EAAjC;AACA,SAAKyV,cAAL,GAAsB;AAClB7W,sBAAgB,EAAEoB,aAAa,CAACpB,gBAAd,IAAkC,EADlC;AAElB6T,iBAAW,EAAEzS,aAAa,CAACyS,WAAd,IAA6B,EAFxB;AAGlBiD,8BAAwB,EAAE1V,aAAa,CAAC0V,wBAHtB;AAIlBC,uBAAiB,EAAE3V,aAAa,CAAC2V,iBAAd,IAAmC,KAAKH,KAJzC;AAKlBI,2BAAqB,EAAE5V,aAAa,CAAC4V,qBAAd,IAAuC3a,qBAAqB,CAACqL,KALlE;AAMlBuP,mBAAa,EAAE7V,aAAa,CAAC6V,aAAd,IAA+B,MAN5B;AAOlBC,2BAAqB,EAAE9V,aAAa,CAAC8V,qBAPnB;AAQlBC,iCAA2B,EAAE/V,aAAa,CAAC+V,2BARzB;AASlBC,8BAAwB,EAAE,CAAC,CAAChW,aAAa,CAACgW,wBATxB;AAUlB3f,kBAAY,EAAE2J,aAAa,CAAC3J,YAAd,IAA8B,IAAI0D,mBAAJ,CAAwB,KAAKyb,KAA7B,CAV1B;AAWlBvV,gBAAU,EAAED,aAAa,CAACC,UAAd,IAA4B,EAXtB;AAYlBgW,mBAAa,EAAEjW,aAAa,CAACiW,aAZX;AAalBvC,qBAAe,EAAE1T,aAAa,CAAC0T;AAbb,KAAtB;AAeA,SAAK+B,cAAL,CAAoBhD,WAApB,GAAkC,KAAKgD,cAAL,CAAoBhD,WAApB,IAAmC,EAArE;AACA,SAAKyD,KAAL,GAAa/a,WAAW,CAACgb,OAAzB;AACA,SAAKC,kBAAL,GAA0B/d,SAA1B;AACA,SAAKge,mBAAL,GAA2Bhe,SAA3B;AACA,SAAKie,iBAAL,GAAyBje,SAAzB;;AACA,QAAI2H,aAAa,CAACuW,aAAlB,EAAiC;AAC7B,WAAKC,cAAL,GAAsBxW,aAAa,CAACuW,aAApC;AACA,WAAKE,qBAAL,GAA6B,KAA7B;AACH,KAHD,MAIK;AACD,WAAKD,cAAL,GAAsBne,SAAtB;AACA,WAAKoe,qBAAL,GAA6B,IAA7B;AACH;;AACD,SAAKC,mBAAL,GAA2B1W,aAAa,CAAC2W,kBAAzC;AACA,SAAKpE,UAAL,GAAkBla,SAAlB;AACA,SAAKgO,UAAL,GAAkBhO,SAAlB;AACA,SAAKue,YAAL,GAAoBve,SAApB;AACA,SAAKwe,WAAL,GAAmB,EAAnB;AACA,SAAKC,iBAAL,GAAyB,IAAIthB,OAAO,CAACmN,OAAZ,CAAoB,GAApB,CAAzB;AACA,SAAKoU,QAAL,GAAgB,IAAIrO,OAAJ,CAAY,UAACC,OAAD,EAAU0I,MAAV,EAAqB;AAC7C,aAAI,CAAC2F,iBAAL,GAAyB,IAAIlC,OAAJ,CAAYnM,OAAZ,EAAqB0I,MAArB,CAAzB;AACH,KAFe,CAAhB;AAGA,SAAK4F,OAAL,GAAe5e,SAAf;AACA,SAAK6e,iBAAL,GAAyB,IAAI9hB,gCAAgC,CAAC+hB,OAArC,EAAzB;AACA,SAAKC,mBAAL,GAA2B,IAAIhiB,gCAAgC,CAAC+hB,OAArC,EAA3B;AACA,SAAKE,OAAL,GAAe;AACXphB,SAAG,EAAE,aAACqhB,mBAAD,EAAsB3gB,IAAtB,EAA+B;AAChC,YAAIpB,EAAE,CAAC2B,MAAH,CAAUogB,mBAAV,CAAJ,EAAoC;AAChC,iBAAI,CAACC,QAAL,CAAcD,mBAAd,EAAmC3gB,IAAnC;AACH,SAFD,MAGK;AACD,iBAAI,CAAC6gB,cAAL,CAAoBF,mBAApB;AACH;AACJ;AARU,KAAf;AAUA,SAAKG,IAAL,GAAYpiB,GAAG,CAACqiB,eAAJ,CAAoB1X,aAAa,CAACiW,aAAd,GAA8BjW,aAAa,CAACiW,aAAd,CAA4B0B,aAA1D,GAA0Etf,SAA9F,CAAZ;AACA,SAAKuf,IAAL,GAAYtiB,GAAG,CAACoiB,eAAJ,CAAoB1X,aAAa,CAACiW,aAAd,GAA8BjW,aAAa,CAACiW,aAAd,CAA4B4B,aAA1D,GAA0Exf,SAA9F,CAAZ;AACA,SAAKwH,gBAAL,GAAwB,IAAInB,GAAJ,EAAxB;AACA,SAAKoZ,uBAAL;AACH;;;;qCAYgB;AACb,UAAI,KAAK5B,KAAL,KAAe/a,WAAW,CAAC4c,OAA/B,EAAwC;AACpC,eAAO7c,KAAK,CAAC6c,OAAb;AACH,OAFD,MAGK,IAAI,KAAK7B,KAAL,KAAe/a,WAAW,CAAC6c,QAA/B,EAAyC;AAC1C,eAAO9c,KAAK,CAAC8c,QAAb;AACH,OAFI,MAGA;AACD,eAAO9c,KAAK,CAAC+c,OAAb;AACH;AACJ;;;gCAIWjhB,I,EAAiB;AACzB,UAAI,CAAC,KAAKkhB,kBAAL,EAAL,EAAgC;AAC5B,cAAM,IAAI5R,KAAJ,CAAU,kCAAV,CAAN;AACH;;AACD,WAAK6R,iBAAL;;AACA,UAAI;AAAA;;AAAA,2CALalhB,MAKb;AALaA,gBAKb;AAAA;;AACA,eAAO,8BAAKof,mBAAL,EAAyBtf,WAAzB,+BAAqCC,IAArC,SAA8CC,MAA9C,EAAP;AACH,OAFD,CAGA,OAAOnB,KAAP,EAAc;AACV,aAAKA,KAAL,2BAA8BP,EAAE,CAAC2B,MAAH,CAAUF,IAAV,IAAkBA,IAAlB,GAAyBA,IAAI,CAACG,MAA5D,eAA8ErB,KAA9E;AACA,cAAMA,KAAN;AACH;AACJ;;;8BACSkB,I,EAAMK,O,EAAS;AACrB,UAAI,CAAC,KAAK6gB,kBAAL,EAAL,EAAgC;AAC5B,cAAM,IAAI5R,KAAJ,CAAU,kCAAV,CAAN;AACH;;AACD,UAAI;AACA,aAAK+P,mBAAL,CAAyBjf,SAAzB,CAAmCJ,IAAnC,EAAyCK,OAAzC;AACH,OAFD,CAGA,OAAOvB,KAAP,EAAc;AACV,aAAKA,KAAL,uCAA0CP,EAAE,CAAC2B,MAAH,CAAUF,IAAV,IAAkBA,IAAlB,GAAyBA,IAAI,CAACG,MAAxE,eAA0FrB,KAA1F;AACA,cAAMA,KAAN;AACH;AACJ;;;qCACgBkB,I,EAAMC,M,EAAQ;AAC3B,UAAI,CAAC,KAAKihB,kBAAL,EAAL,EAAgC;AAC5B,cAAM,IAAI5R,KAAJ,CAAU,kCAAV,CAAN;AACH;;AACD,WAAK6R,iBAAL;;AACA,UAAI;AACA,aAAK9B,mBAAL,CAAyB/e,gBAAzB,CAA0CN,IAA1C,EAAgDC,MAAhD;AACH,OAFD,CAGA,OAAOnB,KAAP,EAAc;AACV,aAAKA,KAAL,gCAAmCP,EAAE,CAAC2B,MAAH,CAAUF,IAAV,IAAkBA,IAAlB,GAAyBA,IAAI,CAACG,MAAjE,eAAmFrB,KAAnF;AACA,cAAMA,KAAN;AACH;AACJ;;;mCACckB,I,EAAMK,O,EAAS;AAC1B,UAAI,CAAC,KAAK6gB,kBAAL,EAAL,EAAgC;AAC5B,cAAM,IAAI5R,KAAJ,CAAU,kCAAV,CAAN;AACH;;AACD,UAAI;AACA,aAAK+P,mBAAL,CAAyB9e,cAAzB,CAAwCP,IAAxC,EAA8CK,OAA9C;AACH,OAFD,CAGA,OAAOvB,KAAP,EAAc;AACV,aAAKA,KAAL,4CAA+CP,EAAE,CAAC2B,MAAH,CAAUF,IAAV,IAAkBA,IAAlB,GAAyBA,IAAI,CAACG,MAA7E,eAA+FrB,KAA/F;AACA,cAAMA,KAAN;AACH;AACJ;;;+BACUkB,I,EAAMsR,K,EAAOjR,O,EAAS;AAC7B,UAAI,CAAC,KAAK6gB,kBAAL,EAAL,EAAgC;AAC5B,cAAM,IAAI5R,KAAJ,CAAU,kCAAV,CAAN;AACH;;AACD,UAAI;AACA,eAAO,KAAK+P,mBAAL,CAAyB7e,UAAzB,CAAoCR,IAApC,EAA0CsR,KAA1C,EAAiDjR,OAAjD,CAAP;AACH,OAFD,CAGA,OAAOvB,KAAP,EAAc;AACV,aAAKA,KAAL,kDAAqDwS,KAArD,eAAsExS,KAAtE;AACA,cAAMA,KAAN;AACH;AACJ;;;iCACYkB,I,EAAMsR,K,EAAOrT,K,EAAO;AAC7B,UAAI,CAAC,KAAKijB,kBAAL,EAAL,EAAgC;AAC5B,cAAM,IAAI5R,KAAJ,CAAU,kCAAV,CAAN;AACH;;AACD,WAAK6R,iBAAL;;AACA,UAAI;AACA,aAAK9B,mBAAL,CAAyB5e,YAAzB,CAAsCT,IAAtC,EAA4CsR,KAA5C,EAAmDrT,KAAnD;AACH,OAFD,CAGA,OAAOa,KAAP,EAAc;AACV,aAAKA,KAAL,sCAAyCwS,KAAzC,eAA0DxS,KAA1D;AACA,cAAMA,KAAN;AACH;AACJ;;;gDA+B2B;AACxB,aAAO,IAAIiE,mBAAJ,CAAwB,KAAKyb,KAA7B,CAAP;AACH;;;gCAaW7e,I,EAAM;AACd,UAAIA,IAAI,YAAYvB,gCAAgC,CAACgjB,aAArD,EAAoE;AAChE,YAAMC,aAAa,GAAG1hB,IAAtB;AACA,oCAAqB0hB,aAAa,CAACziB,OAAnC,uBAAuDyiB,aAAa,CAACC,IAArE,cAA6ED,aAAa,CAAC1hB,IAAd,GAAqB,OAAO0hB,aAAa,CAAC1hB,IAAd,CAAmBoK,QAAnB,EAA5B,GAA4D,EAAzI;AACH;;AACD,UAAIpK,IAAI,YAAY2P,KAApB,EAA2B;AACvB,YAAI/Q,EAAE,CAAC2B,MAAH,CAAUP,IAAI,CAAC4hB,KAAf,CAAJ,EAA2B;AACvB,iBAAO5hB,IAAI,CAAC4hB,KAAZ;AACH;;AACD,eAAO5hB,IAAI,CAACf,OAAZ;AACH;;AACD,UAAIL,EAAE,CAAC2B,MAAH,CAAUP,IAAV,CAAJ,EAAqB;AACjB,eAAOA,IAAP;AACH;;AACD,aAAOA,IAAI,CAACoK,QAAL,EAAP;AACH;;;yBACInL,O,EAASe,I,EAAM;AAChB,WAAK4f,aAAL,CAAmBiC,UAAnB,oBAA2C,IAAIhe,IAAJ,GAAWie,kBAAX,EAA3C,eAAgF7iB,OAAhF;;AACA,UAAIe,IAAJ,EAAU;AACN,aAAK4f,aAAL,CAAmBiC,UAAnB,CAA8B,KAAKE,WAAL,CAAiB/hB,IAAjB,CAA9B;AACH;;AACD,UAAI,KAAK8e,cAAL,CAAoBG,qBAApB,IAA6C3a,qBAAqB,CAAC0d,IAAvE,EAA6E;AACzE,aAAKC,uBAAL;AACH;AACJ;;;yBACIhjB,O,EAASe,I,EAAM;AAChB,WAAK4f,aAAL,CAAmBiC,UAAnB,oBAA2C,IAAIhe,IAAJ,GAAWie,kBAAX,EAA3C,eAAgF7iB,OAAhF;;AACA,UAAIe,IAAJ,EAAU;AACN,aAAK4f,aAAL,CAAmBiC,UAAnB,CAA8B,KAAKE,WAAL,CAAiB/hB,IAAjB,CAA9B;AACH;;AACD,UAAI,KAAK8e,cAAL,CAAoBG,qBAApB,IAA6C3a,qBAAqB,CAAC4d,IAAvE,EAA6E;AACzE,aAAKD,uBAAL;AACH;AACJ;;;0BACKhjB,O,EAASe,I,EAAM;AACjB,WAAK4f,aAAL,CAAmBiC,UAAnB,oBAA2C,IAAIhe,IAAJ,GAAWie,kBAAX,EAA3C,eAAgF7iB,OAAhF;;AACA,UAAIe,IAAJ,EAAU;AACN,aAAK4f,aAAL,CAAmBiC,UAAnB,CAA8B,KAAKE,WAAL,CAAiB/hB,IAAjB,CAA9B;AACH;;AACD,UAAI,KAAK8e,cAAL,CAAoBG,qBAApB,IAA6C3a,qBAAqB,CAACqL,KAAvE,EAA8E;AAC1E,aAAKsS,uBAAL;AACH;AACJ;;;8CACyB;AAAA;;AACtB1jB,cAAQ,CAAC2F,MAAT,CAAgBie,sBAAhB,CAAuC,4DAAvC,EAAqG,cAArG,EAAqHzV,IAArH,CAA0H,YAAM;AAC5H,eAAI,CAACkT,aAAL,CAAmBwC,IAAnB,CAAwB,IAAxB;AACH,OAFD;AAGH;;;6BACQnjB,O,EAASe,I,EAAM;AACpB,WAAKggB,kBAAL,CAAwB6B,UAAxB,oBAAgD,IAAIhe,IAAJ,GAAWie,kBAAX,EAAhD,eAAqF7iB,OAArF;;AACA,UAAIe,IAAJ,EAAU;AACN,aAAKggB,kBAAL,CAAwB6B,UAAxB,CAAmC,KAAKE,WAAL,CAAiB/hB,IAAjB,CAAnC;AACH;AACJ;;;mCACcA,I,EAAM;AACjB,UAAIA,IAAI,CAACqiB,YAAL,IAAqBriB,IAAI,CAACK,IAA9B,EAAoC;AAChC,aAAK2f,kBAAL,CAAwBsC,MAAxB,oBAA4C,IAAIze,IAAJ,GAAWie,kBAAX,EAA5C;AACH,OAFD,MAGK;AACD,aAAK9B,kBAAL,CAAwBsC,MAAxB,oBAA4C,IAAIze,IAAJ,GAAWie,kBAAX,EAA5C;AACH;;AACD,UAAI9hB,IAAJ,EAAU;AACN,aAAKggB,kBAAL,CAAwB6B,UAAxB,WAAsCU,IAAI,CAACC,SAAL,CAAexiB,IAAf,CAAtC;AACH;AACJ;;;iCACY;AACT,aAAO,KAAKuf,KAAL,KAAe/a,WAAW,CAACgb,OAA3B,IAAsC,KAAKD,KAAL,KAAe/a,WAAW,CAACie,QAAjE,IAA6E,KAAKlD,KAAL,KAAe/a,WAAW,CAAC8c,OAA/G;AACH;;;gCACW;AACR,aAAO,KAAK/B,KAAL,KAAe/a,WAAW,CAAC6c,QAA3B,IAAuC,KAAK9B,KAAL,KAAe/a,WAAW,CAAC4c,OAAzE;AACH;;;8BACS;AACN,aAAO,KAAKhB,QAAZ;AACH;;;yCACoB;AACjB,aAAO,KAAKb,KAAL,KAAe/a,WAAW,CAAC4c,OAA3B,IAAsC,CAAC,CAAC,KAAK1B,mBAApD;AACH;;;4BACO;AAAA;;AACJ,UAAI,KAAKW,iBAAL,CAAuBqC,MAA3B,EAAmC;AAC/B,aAAKtC,QAAL,GAAgB,IAAIrO,OAAJ,CAAY,UAACC,OAAD,EAAU0I,MAAV,EAAqB;AAC7C,iBAAI,CAAC2F,iBAAL,GAAyB,IAAIlC,OAAJ,CAAYnM,OAAZ,EAAqB0I,MAArB,CAAzB;AACH,SAFe,CAAhB;AAGH;;AACD,WAAKkB,UAAL,GAAkB,EAAlB;AACA,WAAKlM,UAAL,GAAkB,EAAlB,CAPI,CAQJ;;AACA,UAAI,CAAC,KAAKuQ,YAAV,EAAwB;AACpB,aAAKA,YAAL,GAAoB,KAAKnB,cAAL,CAAoBC,wBAApB,GACdxgB,QAAQ,CAACuK,SAAT,CAAmB6Z,0BAAnB,CAA8C,KAAK7D,cAAL,CAAoBC,wBAAlE,CADc,GAEdxgB,QAAQ,CAACuK,SAAT,CAAmB6Z,0BAAnB,EAFN;AAGH;;AACD,WAAKpD,KAAL,GAAa/a,WAAW,CAAC6c,QAAzB;AACA,WAAKuB,iBAAL,GAAyBlW,IAAzB,CAA8B,UAAC7M,UAAD,EAAgB;AAC1CA,kBAAU,CAACgC,YAAX,CAAwB,UAAC5C,OAAD,EAAa;AACjC,kBAAQA,OAAO,CAACoB,IAAhB;AACI,iBAAK5B,gCAAgC,CAACokB,WAAjC,CAA6ClT,KAAlD;AACI,qBAAI,CAACxQ,KAAL,CAAWF,OAAO,CAACA,OAAnB;;AACA;;AACJ,iBAAKR,gCAAgC,CAACokB,WAAjC,CAA6CC,OAAlD;AACI,qBAAI,CAAC1jB,IAAL,CAAUH,OAAO,CAACA,OAAlB;;AACA;;AACJ,iBAAKR,gCAAgC,CAACokB,WAAjC,CAA6Cb,IAAlD;AACI,qBAAI,CAAC3iB,IAAL,CAAUJ,OAAO,CAACA,OAAlB;;AACA;;AACJ;AACI,qBAAI,CAAC2gB,aAAL,CAAmBiC,UAAnB,CAA8B5iB,OAAO,CAACA,OAAtC;;AAXR;AAaH,SAdD;AAeAY,kBAAU,CAACkC,aAAX,CAAyB,UAAC9C,OAAD,EAAa;AAClC,kBAAQA,OAAO,CAACoB,IAAhB;AACI,iBAAK5B,gCAAgC,CAACokB,WAAjC,CAA6ClT,KAAlD;AACIpR,sBAAQ,CAAC2F,MAAT,CAAgBC,gBAAhB,CAAiClF,OAAO,CAACA,OAAzC;AACA;;AACJ,iBAAKR,gCAAgC,CAACokB,WAAjC,CAA6CC,OAAlD;AACIvkB,sBAAQ,CAAC2F,MAAT,CAAgB6e,kBAAhB,CAAmC9jB,OAAO,CAACA,OAA3C;AACA;;AACJ,iBAAKR,gCAAgC,CAACokB,WAAjC,CAA6Cb,IAAlD;AACIzjB,sBAAQ,CAAC2F,MAAT,CAAgBie,sBAAhB,CAAuCljB,OAAO,CAACA,OAA/C;AACA;;AACJ;AACIV,sBAAQ,CAAC2F,MAAT,CAAgBie,sBAAhB,CAAuCljB,OAAO,CAACA,OAA/C;AAXR;AAaH,SAdD;AAeAY,kBAAU,CAACY,SAAX,CAAqBhC,gCAAgC,CAACukB,kBAAjC,CAAoD3iB,IAAzE,EAA+E,UAACC,MAAD,EAAY;AACvF,cAAI2iB,WAAJ;;AACA,kBAAQ3iB,MAAM,CAACD,IAAf;AACI,iBAAK5B,gCAAgC,CAACokB,WAAjC,CAA6ClT,KAAlD;AACIsT,yBAAW,GAAG1kB,QAAQ,CAAC2F,MAAT,CAAgBC,gBAA9B;AACA;;AACJ,iBAAK1F,gCAAgC,CAACokB,WAAjC,CAA6CC,OAAlD;AACIG,yBAAW,GAAG1kB,QAAQ,CAAC2F,MAAT,CAAgB6e,kBAA9B;AACA;;AACJ,iBAAKtkB,gCAAgC,CAACokB,WAAjC,CAA6Cb,IAAlD;AACIiB,yBAAW,GAAG1kB,QAAQ,CAAC2F,MAAT,CAAgBie,sBAA9B;AACA;;AACJ;AACIc,yBAAW,GAAG1kB,QAAQ,CAAC2F,MAAT,CAAgBie,sBAA9B;AAXR;;AAaA,cAAIe,OAAO,GAAG5iB,MAAM,CAAC4iB,OAAP,IAAkB,EAAhC;AACA,iBAAOD,WAAW,MAAX,UAAY3iB,MAAM,CAACrB,OAAnB,4BAA+BikB,OAA/B,GAAP;AACH,SAjBD;AAkBArjB,kBAAU,CAACoC,WAAX,CAAuB,UAACjC,IAAD,EAAU;AAC7B,iBAAI,CAACugB,iBAAL,CAAuB4C,IAAvB,CAA4BnjB,IAA5B;AACH,SAFD;AAGAH,kBAAU,CAACM,MAAX,GApD0C,CAqD1C;;AACA,eAAO,OAAI,CAACmB,UAAL,CAAgBzB,UAAhB,CAAP;AACH,OAvDD,EAuDG6M,IAvDH,CAuDQhL,SAvDR,EAuDmB,UAACvC,KAAD,EAAW;AAC1B,eAAI,CAACogB,KAAL,GAAa/a,WAAW,CAAC4e,WAAzB;;AACA,eAAI,CAAC/C,iBAAL,CAAuB3F,MAAvB,CAA8Bvb,KAA9B;;AACA,eAAI,CAACA,KAAL,CAAW,wBAAX,EAAqCA,KAArC;;AACAZ,gBAAQ,CAAC2F,MAAT,CAAgBC,gBAAhB,iCAA0D,OAAI,CAAC0a,KAA/D;AACH,OA5DD;AA6DA,aAAO,IAAItgB,QAAQ,CAAC8kB,UAAb,CAAwB,YAAM;AACjC,YAAI,OAAI,CAACC,SAAL,EAAJ,EAAsB;AAClB,iBAAI,CAACC,IAAL;AACH;AACJ,OAJM,CAAP;AAKH;;;wCACmB;AAChB,UAAI,CAAC,KAAK9D,kBAAV,EAA8B;AAC1B,aAAKA,kBAAL,GAA0B,KAAKlgB,gBAAL,EAA1B;AACH;;AACD,aAAO,KAAKkgB,kBAAZ;AACH;;;+BACU5f,U,EAAY;AACnB,WAAK2jB,YAAL,CAAkB3jB,UAAlB,EAA8B,KAA9B;AACA,UAAI4jB,UAAU,GAAG,KAAK3E,cAAL,CAAoBK,qBAArC;AACA,UAAIuE,QAAQ,GAAG,KAAK5E,cAAL,CAAoB/B,eAApB,GACT,KAAK+B,cAAL,CAAoB/B,eAApB,CAAoC5S,GAApC,CAAwCwZ,MAD/B,GAET,KAAKC,kBAAL,EAFN;AAGA,UAAIC,UAAU,GAAG;AACbC,iBAAS,EAAEC,OAAO,CAACC,GADN;AAEbN,gBAAQ,EAAEA,QAAQ,GAAGA,QAAH,GAAc,IAFnB;AAGbO,eAAO,EAAEP,QAAQ,GAAG,KAAK5C,IAAL,CAAU7R,KAAV,CAAgB1Q,QAAQ,CAAC2lB,GAAT,CAAaC,IAAb,CAAkBT,QAAlB,CAAhB,CAAH,GAAkD,IAHtD;AAIb/Z,oBAAY,EAAE,KAAKya,yBAAL,EAJD;AAKbjF,6BAAqB,EAAEvgB,EAAE,CAACuI,IAAH,CAAQsc,UAAR,IAAsBA,UAAU,EAAhC,GAAqCA,UAL/C;AAMb1iB,aAAK,EAAEtC,gCAAgC,CAAC4lB,KAAjC,CAAuCja,QAAvC,CAAgD,KAAKka,MAArD,CANM;AAObC,wBAAgB,EAAE;AAPL,OAAjB;AASA,WAAKC,oBAAL,CAA0BX,UAA1B;;AACA,UAAI,KAAK/E,cAAL,CAAoBO,wBAAxB,EAAkD;AAC9C,YAAM1N,KAAK,GAAG7S,IAAI,CAACkL,YAAL,EAAd;AACA,YAAMya,IAAI,GAAG,IAAI1lB,cAAc,CAAC2lB,YAAnB,CAAgC7kB,UAAhC,EAA4C8R,KAA5C,CAAb;AACAkS,kBAAU,CAACc,aAAX,GAA2BhT,KAA3B;AACA,eAAO,KAAKiT,YAAL,CAAkB/kB,UAAlB,EAA8BgkB,UAA9B,EAA0CnX,IAA1C,CAA+C,UAACxM,MAAD,EAAY;AAC9DukB,cAAI,CAACI,IAAL;AACA,iBAAO3kB,MAAP;AACH,SAHM,EAGJ,UAACf,KAAD,EAAW;AACVslB,cAAI,CAACK,MAAL;AACA,gBAAM3lB,KAAN;AACH,SANM,CAAP;AAOH,OAXD,MAYK;AACD,eAAO,KAAKylB,YAAL,CAAkB/kB,UAAlB,EAA8BgkB,UAA9B,CAAP;AACH;AACJ;;;iCACYhkB,U,EAAYgkB,U,EAAY;AAAA;;AACjC,aAAOhkB,UAAU,CAACyB,UAAX,CAAsBuiB,UAAtB,EAAkCnX,IAAlC,CAAuC,UAACxM,MAAD,EAAY;AACtD,eAAI,CAACwf,mBAAL,GAA2B7f,UAA3B;AACA,eAAI,CAAC8f,iBAAL,GAAyBzf,MAAzB;AACA,eAAI,CAACqf,KAAL,GAAa/a,WAAW,CAAC4c,OAAzB;AACA,YAAIvX,uBAAuB,GAAGnI,SAA9B;;AACA,YAAI9C,EAAE,CAACmmB,MAAH,CAAU7kB,MAAM,CAACyJ,YAAP,CAAoBqb,gBAA9B,CAAJ,EAAqD;AACjD,cAAI9kB,MAAM,CAACyJ,YAAP,CAAoBqb,gBAApB,KAAyCvmB,gCAAgC,CAACsM,oBAAjC,CAAsDC,IAAnG,EAAyG;AACrGnB,mCAAuB,GAAG;AACtBE,uBAAS,EAAE,KADW;AAEtBe,oBAAM,EAAErM,gCAAgC,CAACsM,oBAAjC,CAAsDC,IAFxC;AAGtBqC,kBAAI,EAAE3L;AAHgB,aAA1B;AAKH,WAND,MAOK;AACDmI,mCAAuB,GAAG;AACtBE,uBAAS,EAAE,IADW;AAEtBe,oBAAM,EAAE5K,MAAM,CAACyJ,YAAP,CAAoBqb,gBAFN;AAGtB3X,kBAAI,EAAE;AACFC,2BAAW,EAAE;AADX;AAHgB,aAA1B;AAOH;AACJ,SAjBD,MAkBK,IAAIpN,MAAM,CAACyJ,YAAP,CAAoBqb,gBAApB,KAAyC,KAAK,CAA9C,IAAmD9kB,MAAM,CAACyJ,YAAP,CAAoBqb,gBAApB,KAAyC,IAAhG,EAAsG;AACvGnb,iCAAuB,GAAG3J,MAAM,CAACyJ,YAAP,CAAoBqb,gBAA9C;AACH;;AACD,eAAI,CAACtX,aAAL,GAAqBtP,MAAM,CAAC6M,MAAP,CAAc,EAAd,EAAkB/K,MAAM,CAACyJ,YAAzB,EAAuC;AAAEG,kCAAwB,EAAED;AAA5B,SAAvC,CAArB;AACAhK,kBAAU,CAACkD,aAAX,CAAyB,UAAAzC,MAAM;AAAA,iBAAI,OAAI,CAAC2kB,iBAAL,CAAuB3kB,MAAvB,CAAJ;AAAA,SAA/B;AACAT,kBAAU,CAACY,SAAX,CAAqBhC,gCAAgC,CAACymB,mBAAjC,CAAqD7kB,IAA1E,EAAgF,UAAAC,MAAM;AAAA,iBAAI,OAAI,CAAC6kB,yBAAL,CAA+B7kB,MAA/B,CAAJ;AAAA,SAAtF,EA5BsD,CA6BtD;;AACAT,kBAAU,CAACY,SAAX,CAAqB,wBAArB,EAA+C,UAAAH,MAAM;AAAA,iBAAI,OAAI,CAAC6kB,yBAAL,CAA+B7kB,MAA/B,CAAJ;AAAA,SAArD;AACAT,kBAAU,CAACY,SAAX,CAAqBhC,gCAAgC,CAAC2mB,qBAAjC,CAAuD/kB,IAA5E,EAAkF,UAAAC,MAAM;AAAA,iBAAI,OAAI,CAAC+kB,2BAAL,CAAiC/kB,MAAjC,CAAJ;AAAA,SAAxF,EA/BsD,CAgCtD;;AACAT,kBAAU,CAACY,SAAX,CAAqB,0BAArB,EAAiD,UAAAH,MAAM;AAAA,iBAAI,OAAI,CAAC+kB,2BAAL,CAAiC/kB,MAAjC,CAAJ;AAAA,SAAvD;AACAT,kBAAU,CAACY,SAAX,CAAqBhC,gCAAgC,CAAC6mB,yBAAjC,CAA2DjlB,IAAhF,EAAsF,UAAAC,MAAM;AAAA,iBAAI,OAAI,CAACilB,wBAAL,CAA8BjlB,MAA9B,CAAJ;AAAA,SAA5F;AACAT,kBAAU,CAACc,gBAAX,CAA4BlC,gCAAgC,CAAC+mB,uBAAjC,CAAyDnlB,IAArF,EAA2F,EAA3F;;AACA,eAAI,CAAColB,cAAL,CAAoB5lB,UAApB;;AACA,eAAI,CAAC6lB,wBAAL,CAA8B7lB,UAA9B;;AACA,eAAI,CAAC8lB,kBAAL,CAAwB9lB,UAAxB;;AACA,eAAI,CAACwgB,iBAAL,CAAuBrO,OAAvB;;AACA,eAAO9R,MAAP;AACH,OAzCM,EAyCJwM,IAzCI,CAyCChL,SAzCD,EAyCY,UAACvC,KAAD,EAAW;AAC1B,YAAI,OAAI,CAAC2f,cAAL,CAAoBM,2BAAxB,EAAqD;AACjD,cAAI,OAAI,CAACN,cAAL,CAAoBM,2BAApB,CAAgDjgB,KAAhD,CAAJ,EAA4D;AACxD,mBAAI,CAACmC,UAAL,CAAgBzB,UAAhB;AACH,WAFD,MAGK;AACD,mBAAI,CAAC0jB,IAAL;;AACA,mBAAI,CAAClD,iBAAL,CAAuB3F,MAAvB,CAA8Bvb,KAA9B;AACH;AACJ,SARD,MASK,IAAIA,KAAK,YAAYV,gCAAgC,CAACgjB,aAAlD,IAAmEtiB,KAAK,CAACa,IAAzE,IAAiFb,KAAK,CAACa,IAAN,CAAW4lB,KAAhG,EAAuG;AACxGrnB,kBAAQ,CAAC2F,MAAT,CAAgBC,gBAAhB,CAAiChF,KAAK,CAACF,OAAvC,EAAgD;AAAE4mB,iBAAK,EAAE,OAAT;AAAkBxd,cAAE,EAAE;AAAtB,WAAhD,EAAiFqE,IAAjF,CAAsF,UAAAwF,IAAI,EAAI;AAC1F,gBAAIA,IAAI,IAAIA,IAAI,CAAC7J,EAAL,KAAY,OAAxB,EAAiC;AAC7B,qBAAI,CAAC/G,UAAL,CAAgBzB,UAAhB;AACH,aAFD,MAGK;AACD,qBAAI,CAAC0jB,IAAL;;AACA,qBAAI,CAAClD,iBAAL,CAAuB3F,MAAvB,CAA8Bvb,KAA9B;AACH;AACJ,WARD;AASH,SAVI,MAWA;AACD,cAAIA,KAAK,IAAIA,KAAK,CAACF,OAAnB,EAA4B;AACxBV,oBAAQ,CAAC2F,MAAT,CAAgBC,gBAAhB,CAAiChF,KAAK,CAACF,OAAvC;AACH;;AACD,iBAAI,CAACE,KAAL,CAAW,+BAAX,EAA4CA,KAA5C;;AACA,iBAAI,CAACokB,IAAL;;AACA,iBAAI,CAAClD,iBAAL,CAAuB3F,MAAvB,CAA8Bvb,KAA9B;AACH;AACJ,OAtEM,CAAP;AAuEH;;;yCACoB;AACjB,UAAI2mB,OAAO,GAAGvnB,QAAQ,CAAC4K,SAAT,CAAmBob,gBAAjC;;AACA,UAAI,CAACuB,OAAD,IAAYA,OAAO,CAAC/hB,MAAR,KAAmB,CAAnC,EAAsC;AAClC,eAAOrC,SAAP;AACH;;AACD,UAAIqkB,MAAM,GAAGD,OAAO,CAAC,CAAD,CAApB;;AACA,UAAIC,MAAM,CAAC5b,GAAP,CAAW6b,MAAX,KAAsB,MAA1B,EAAkC;AAC9B,eAAOD,MAAM,CAAC5b,GAAP,CAAWwZ,MAAlB;AACH;;AACD,aAAOjiB,SAAP;AACH;;;2BACM;AAAA;;AACH,WAAKie,iBAAL,GAAyBje,SAAzB;;AACA,UAAI,CAAC,KAAK+d,kBAAV,EAA8B;AAC1B,aAAKF,KAAL,GAAa/a,WAAW,CAAC8c,OAAzB;AACA,eAAOvP,OAAO,CAACC,OAAR,EAAP;AACH;;AACD,UAAI,KAAKuN,KAAL,KAAe/a,WAAW,CAACie,QAA3B,IAAuC,KAAKnC,OAAhD,EAAyD;AACrD,eAAO,KAAKA,OAAZ;AACH;;AACD,WAAKf,KAAL,GAAa/a,WAAW,CAACie,QAAzB;AACA,WAAKwD,OAAL,CAAa,KAAb,EAVG,CAWH;;AACA,aAAO,KAAK3F,OAAL,GAAe,KAAKsC,iBAAL,GAAyBlW,IAAzB,CAA8B,UAAA7M,UAAU,EAAI;AAC9D,eAAOA,UAAU,CAAC2B,QAAX,GAAsBkL,IAAtB,CAA2B,YAAM;AACpC7M,oBAAU,CAAC8B,IAAX;AACA9B,oBAAU,CAACoD,OAAX;AACA,iBAAI,CAACsc,KAAL,GAAa/a,WAAW,CAAC8c,OAAzB;;AACA,iBAAI,CAAC4E,cAAL;;AACA,iBAAI,CAAC5F,OAAL,GAAe5e,SAAf;AACA,iBAAI,CAAC+d,kBAAL,GAA0B/d,SAA1B;AACA,iBAAI,CAACge,mBAAL,GAA2Bhe,SAA3B;AACH,SARM,CAAP;AASH,OAVqB,CAAtB;AAWH;;;8BAC2C;AAAA,UAApCykB,OAAoC,uEAA1B,IAA0B;AAAA,UAApBC,WAAoB,uEAAN,IAAM;;AACxC,UAAI,KAAKxK,UAAT,EAAqB;AACjB,aAAKA,UAAL,CAAgB1R,OAAhB,CAAwB,UAAAmc,QAAQ;AAAA,iBAAIA,QAAQ,CAACpjB,OAAT,EAAJ;AAAA,SAAhC;;AACA,aAAK2Y,UAAL,GAAkBla,SAAlB;AACH;;AACD,UAAI,KAAKgO,UAAT,EAAqB;AACjB,aAAKA,UAAL,CAAgBxF,OAAhB,CAAwB,UAAA0F,QAAQ;AAAA,iBAAIA,QAAQ,CAAC3M,OAAT,EAAJ;AAAA,SAAhC;;AACA,aAAKyM,UAAL,GAAkBhO,SAAlB;AACH;;AACD,UAAI,KAAKwH,gBAAT,EAA2B;AACvB,aAAKA,gBAAL,CAAsBR,KAAtB;AACH;;AAXuC,mDAYpB,KAAKiW,gBAAL,CAAsBrW,MAAtB,EAZoB;AAAA;;AAAA;AAYxC,kEAAoD;AAAA,cAA3C5H,OAA2C;AAChDA,iBAAO,CAACuC,OAAR;AACH;AAduC;AAAA;AAAA;AAAA;AAAA;;AAexC,UAAIkjB,OAAJ,EAAa;AACT,aAAKD,cAAL;AACH;;AACD,UAAIE,WAAW,IAAI,KAAKnG,YAAxB,EAAsC;AAClC,aAAKA,YAAL,CAAkBhd,OAAlB;;AACA,aAAKgd,YAAL,GAAoBve,SAApB;AACH;AACJ;;;qCACgB;AACb,UAAI,KAAKme,cAAL,IAAuB,KAAKC,qBAAhC,EAAuD;AACnD,aAAKD,cAAL,CAAoB5c,OAApB;;AACA,aAAK4c,cAAL,GAAsBne,SAAtB;AACH;AACJ;;;oCACe0J,K,EAAO;AAAA;;AACnB,WAAK8U,WAAL,CAAiBtc,IAAjB,CAAsBwH,KAAtB;;AACA,WAAK+U,iBAAL,CAAuBpU,OAAvB,CAA+B,YAAM;AACjC,eAAI,CAACua,OAAL,GAAe5Z,IAAf,CAAoB,YAAM;AACtB,iBAAI,CAACkW,iBAAL,GAAyBlW,IAAzB,CAA8B,UAAA7M,UAAU,EAAI;AACxC,gBAAI,OAAI,CAAC0hB,kBAAL,EAAJ,EAA+B;AAC3B,qBAAI,CAACC,iBAAL;;AACA3hB,wBAAU,CAACwC,qBAAX,CAAiC;AAAEkkB,uBAAO,EAAE,OAAI,CAACrG;AAAhB,eAAjC;AACH;;AACD,mBAAI,CAACA,WAAL,GAAmB,EAAnB;AACH,WAND;AAOH,SARD,EAQG,UAAC/gB,KAAD,EAAW;AACV,iBAAI,CAACA,KAAL,+BAAyCA,KAAzC;AACH,SAVD;AAWH,OAZD;AAaH;;;wCACmB;AAChB,WAAKwf,gBAAL,CAAsBjU,GAAtB,CAA0BjM,gCAAgC,CAACiE,iCAAjC,CAAmErC,IAAnE,CAAwEG,MAAlG,EAA0GqL,aAA1G;AACH;;;sCACiBvL,M,EAAQ;AAAA;;AACtB,UAAI,CAAC,KAAK2f,YAAV,EAAwB;AACpB;AACH;;AACD,UAAI9V,GAAG,GAAG,KAAK8W,IAAL,CAAUhS,KAAV,CAAgB3O,MAAM,CAAC6J,GAAvB,CAAV;;AACA,UAAIic,WAAW,GAAG,KAAKnF,IAAL,CAAUuF,aAAV,CAAwBlmB,MAAM,CAAC8lB,WAA/B,CAAlB;;AACA,UAAI9c,UAAU,GAAG,KAAKD,aAAL,CAAmBC,UAAnB,CAA8B2b,iBAA/C;;AACA,UAAI3b,UAAJ,EAAgB;AACZA,kBAAU,CAACa,GAAD,EAAMic,WAAN,EAAmB,UAACjc,GAAD,EAAMic,WAAN;AAAA,iBAAsB,OAAI,CAACK,cAAL,CAAoBtc,GAApB,EAAyBic,WAAzB,CAAtB;AAAA,SAAnB,CAAV;AACH,OAFD,MAGK;AACD,aAAKK,cAAL,CAAoBtc,GAApB,EAAyBic,WAAzB;AACH;AACJ;;;mCACcjc,G,EAAKic,W,EAAa;AAC7B,UAAI,CAAC,KAAKnG,YAAV,EAAwB;AACpB;AACH;;AACD,WAAKA,YAAL,CAAkB7X,GAAlB,CAAsB+B,GAAtB,EAA2Bic,WAA3B;AACH;;;uCACkB;AAAA;;AACf,UAAI1mB,YAAY,GAAG,SAAfA,YAAe,CAACP,KAAD,EAAQF,OAAR,EAAiBwE,KAAjB,EAA2B;AAC1C,eAAI,CAACijB,qBAAL,CAA2BvnB,KAA3B,EAAkCF,OAAlC,EAA2CwE,KAA3C;AACH,OAFD;;AAGA,UAAI9D,YAAY,GAAG,SAAfA,YAAe,GAAM;AACrB,eAAI,CAACgnB,sBAAL;AACH,OAFD;;AAGA,aAAO,KAAKC,uBAAL,CAA6B,KAAK9H,cAAL,CAAoBI,aAApB,IAAqC,MAAlE,EAA0ExS,IAA1E,CAA+E,UAACma,UAAD,EAAgB;AAClG,eAAOtnB,iBAAgB,CAACsnB,UAAU,CAAC7I,MAAZ,EAAoB6I,UAAU,CAAC3I,MAA/B,EAAuCxe,YAAvC,EAAqDC,YAArD,CAAvB;AACH,OAFM,CAAP;AAGH;;;6CACwB;AACrB;AACA,UAAI,KAAK4f,KAAL,KAAe/a,WAAW,CAACie,QAA3B,IAAuC,KAAKlD,KAAL,KAAe/a,WAAW,CAAC8c,OAAtE,EAA+E;AAC3E;AACH;;AACD,UAAI;AACA,YAAI,KAAK5B,mBAAT,EAA8B;AAC1B,eAAKA,mBAAL,CAAyBzc,OAAzB;AACH;AACJ,OAJD,CAKA,OAAO9D,KAAP,EAAc,CACV;AACH;;AACD,UAAI2nB,MAAM,GAAG3jB,WAAW,CAACiB,YAAzB;;AACA,UAAI;AACA0iB,cAAM,GAAG,KAAKhI,cAAL,CAAoBpf,YAApB,CAAiCqnB,MAAjC,EAAT;AACH,OAFD,CAGA,OAAO5nB,KAAP,EAAc,CACV;AACH;;AACD,WAAKsgB,kBAAL,GAA0B/d,SAA1B;AACA,WAAKge,mBAAL,GAA2Bhe,SAA3B;;AACA,UAAIolB,MAAM,KAAK3jB,WAAW,CAACiB,YAA3B,EAAyC;AACrC,aAAKjF,KAAL,CAAW,gEAAX;AACA,aAAKogB,KAAL,GAAa/a,WAAW,CAAC8c,OAAzB;AACA,aAAK2E,OAAL,CAAa,KAAb,EAAoB,IAApB;AACH,OAJD,MAKK,IAAIa,MAAM,KAAK3jB,WAAW,CAACa,OAA3B,EAAoC;AACrC,aAAK3E,IAAL,CAAU,uDAAV;AACA,aAAK4mB,OAAL,CAAa,KAAb,EAAoB,KAApB;AACA,aAAK1G,KAAL,GAAa/a,WAAW,CAACgb,OAAzB;AACA,aAAKwH,KAAL;AACH;AACJ;;;0CACqB7nB,K,EAAOF,O,EAASwE,K,EAAO;AACzC,UAAIqjB,MAAM,GAAG,KAAKhI,cAAL,CAAoBpf,YAApB,CAAiCP,KAAjC,CAAuCA,KAAvC,EAA8CF,OAA9C,EAAuDwE,KAAvD,CAAb;;AACA,UAAIqjB,MAAM,KAAK5jB,WAAW,CAACS,QAA3B,EAAqC;AACjC,aAAKxE,KAAL,CAAW,yDAAX;AACA,aAAKokB,IAAL;AACH;AACJ;;;6CACwB1jB,U,EAAY;AAAA;;AACjCtB,cAAQ,CAAC4K,SAAT,CAAmB6S,wBAAnB,CAA4C,YAAM;AAC9C,eAAI,CAACwH,YAAL,CAAkB3jB,UAAlB,EAA8B,IAA9B;AACH,OAFD;AAGH;;;iCACYA,U,EAAsC;AAAA,UAA1Bc,gBAA0B,uEAAP,KAAO;AAC/C,UAAIwS,MAAM,GAAG5U,QAAQ,CAAC4K,SAAT,CAAmB+T,gBAAnB,CAAoC,KAAK0B,GAAzC,CAAb;AACA,UAAI7d,KAAK,GAAGtC,gCAAgC,CAAC4lB,KAAjC,CAAuC4C,GAAnD;AACA,UAAI9lB,WAAW,GAAG1C,gCAAgC,CAAC2C,WAAjC,CAA6CC,IAA/D;;AACA,UAAI8R,MAAJ,EAAY;AACR,YAAM+T,WAAW,GAAG/T,MAAM,CAACzI,GAAP,CAAW,cAAX,EAA2B,KAA3B,CAApB;;AACA,YAAI,OAAOwc,WAAP,KAAuB,QAA3B,EAAqC;AACjCnmB,eAAK,GAAGtC,gCAAgC,CAAC4lB,KAAjC,CAAuC8C,UAAvC,CAAkDD,WAAlD,CAAR;AACH,SAFD,MAGK;AACDnmB,eAAK,GAAGtC,gCAAgC,CAAC4lB,KAAjC,CAAuC8C,UAAvC,CAAkDhU,MAAM,CAACzI,GAAP,CAAW,wBAAX,EAAqC,KAArC,CAAlD,CAAR;AACAvJ,qBAAW,GAAG1C,gCAAgC,CAAC2C,WAAjC,CAA6C+lB,UAA7C,CAAwDhU,MAAM,CAACzI,GAAP,CAAW,qBAAX,EAAkC,MAAlC,CAAxD,CAAd;AACH;AACJ;;AACD,WAAK4Z,MAAL,GAAcvjB,KAAd;AACA,WAAKyd,YAAL,GAAoBrd,WAApB;AACAtB,gBAAU,CAACkB,KAAX,CAAiB,KAAKujB,MAAtB,EAA8B,KAAK5D,OAAnC,EAA4C;AACxC/f,wBAAgB,EAAhBA,gBADwC;AAExCQ,mBAAW,EAAE,KAAKqd;AAFsB,OAA5C;AAIH;;;mCACc4I,W,EAAa;AACxB,UAAIC,UAAU,GAAG,KAAKvI,cAAL,CAAoBhD,WAApB,CAAgCuL,UAAjD;;AACA,UAAI,CAACA,UAAL,EAAiB;AACb;AACH;;AACD,UAAIvZ,QAAJ;;AACA,UAAIlP,EAAE,CAAC0oB,KAAH,CAASD,UAAT,CAAJ,EAA0B;AACtBvZ,gBAAQ,GAAGuZ,UAAX;AACH,OAFD,MAGK;AACDvZ,gBAAQ,GAAG,CAACuZ,UAAD,CAAX;AACH;;AACD,UAAI,CAACvZ,QAAL,EAAe;AACX;AACH;;AACD,WAAK6Q,gBAAL,CAAsBjU,GAAtB,CAA0BjM,gCAAgC,CAAC6D,iCAAjC,CAAmEjC,IAAnE,CAAwEG,MAAlG,EAA0G+mB,WAA1G,CAAsHzoB,IAAI,CAACkL,YAAL,EAAtH,EAA2I8D,QAA3I;AACH;;;qCACgB0Z,Q,EAAU;AAAA,mDACHA,QADG;AAAA;;AAAA;AACvB,kEAA8B;AAAA,cAArBC,OAAqB;AAC1B,eAAKC,eAAL,CAAqBD,OAArB;AACH;AAHsB;AAAA;AAAA;AAAA;AAAA;AAI1B;;;oCACeA,O,EAAS;AACrB,WAAKhJ,SAAL,CAAe7a,IAAf,CAAoB6jB,OAApB;;AACA,UAAIzgB,cAAc,CAACC,EAAf,CAAkBwgB,OAAlB,CAAJ,EAAgC;AAC5B,YAAIngB,QAAQ,GAAGmgB,OAAO,CAACngB,QAAvB;;AACA,YAAI1B,KAAK,CAACiI,OAAN,CAAcvG,QAAd,CAAJ,EAA6B;AAAA,uDACLA,QADK;AAAA;;AAAA;AACzB,sEAA8B;AAAA,kBAArBrI,OAAqB;;AAC1B,mBAAKyf,eAAL,CAAqBtW,GAArB,CAAyBnJ,OAAO,CAACuB,MAAjC,EAAyCvB,OAAzC;;AACA,mBAAK0f,gBAAL,CAAsBvW,GAAtB,CAA0BnJ,OAAO,CAACuB,MAAlC,EAA0CinB,OAA1C;AACH;AAJwB;AAAA;AAAA;AAAA;AAAA;AAK5B,SALD,MAMK;AACD,eAAK/I,eAAL,CAAqBtW,GAArB,CAAyBd,QAAQ,CAAC9G,MAAlC,EAA0C8G,QAA1C;;AACA,eAAKqX,gBAAL,CAAsBvW,GAAtB,CAA0Bd,QAAQ,CAAC9G,MAAnC,EAA2CinB,OAA3C;AACH;AACJ;AACJ;;;8CACyB;AAAA;;AACtB,WAAKC,eAAL,CAAqB,IAAI/L,oBAAJ,CAAyB,IAAzB,CAArB;AACA,WAAK+L,eAAL,CAAqB,IAAI1e,0BAAJ,CAA+B,IAA/B,EAAqC,KAAKE,gBAA1C,CAArB;AACA,WAAKwe,eAAL,CAAqB,IAAI/c,4BAAJ,CAAiC,IAAjC,CAArB;AACA,WAAK+c,eAAL,CAAqB,IAAIzb,eAAJ,CAAoB,IAApB,CAArB;AACA,WAAKyb,eAAL,CAAqB,IAAInb,wBAAJ,CAA6B,IAA7B,CAArB;AACA,WAAKmb,eAAL,CAAqB,IAAI1a,0BAAJ,CAA+B,IAA/B,CAArB;AACA,WAAK0a,eAAL,CAAqB,IAAIpd,2BAAJ,CAAgC,IAAhC,EAAsC,KAAKpB,gBAA3C,CAArB;AACA,WAAKwe,eAAL,CAAqB,IAAIna,wBAAJ,CAA6B,IAA7B,EAAmC,UAACnC,KAAD;AAAA,eAAW,OAAI,CAACuc,eAAL,CAAqBvc,KAArB,CAAX;AAAA,OAAnC,CAArB;AACA,WAAKsc,eAAL,CAAqB,IAAIrX,qBAAJ,CAA0B,IAA1B,CAArB;AACA,WAAKqX,eAAL,CAAqB,IAAIlV,YAAJ,CAAiB,IAAjB,CAArB;AACA,WAAKkV,eAAL,CAAqB,IAAIzU,oBAAJ,CAAyB,IAAzB,CAArB;AACA,WAAKyU,eAAL,CAAqB,IAAI9T,iBAAJ,CAAsB,IAAtB,CAArB;AACA,WAAK8T,eAAL,CAAqB,IAAItT,iBAAJ,CAAsB,IAAtB,CAArB;AACA,WAAKsT,eAAL,CAAqB,IAAI9S,wBAAJ,CAA6B,IAA7B,CAArB;AACA,WAAK8S,eAAL,CAAqB,IAAIxS,qBAAJ,CAA0B,IAA1B,CAArB;AACA,WAAKwS,eAAL,CAAqB,IAAI3R,sBAAJ,CAA2B,IAA3B,CAArB;AACA,WAAK2R,eAAL,CAAqB,IAAInR,iBAAJ,CAAsB,IAAtB,CAArB;AACA,WAAKmR,eAAL,CAAqB,IAAIxP,eAAJ,CAAoB,IAApB,CAArB;AACA,WAAKwP,eAAL,CAAqB,IAAI7O,yBAAJ,CAA8B,IAA9B,CAArB;AACA,WAAK6O,eAAL,CAAqB,IAAIvO,8BAAJ,CAAmC,IAAnC,CAArB;AACA,WAAKuO,eAAL,CAAqB,IAAIlO,+BAAJ,CAAoC,IAApC,CAArB;AACA,WAAKkO,eAAL,CAAqB,IAAIzN,aAAJ,CAAkB,IAAlB,CAArB;AACA,WAAKyN,eAAL,CAAqB,IAAI1M,mBAAJ,CAAwB,IAAxB,CAArB;AACA,WAAK0M,eAAL,CAAqB,IAAIrK,qBAAJ,CAA0B,IAA1B,CAArB;AACH;;;yCACoB/c,M,EAAQ;AAAA,mDACL,KAAKme,SADA;AAAA;;AAAA;AACzB,kEAAoC;AAAA,cAA3BgJ,OAA2B;;AAChC,cAAI7oB,EAAE,CAACuI,IAAH,CAAQsgB,OAAO,CAACjD,oBAAhB,CAAJ,EAA2C;AACvCiD,mBAAO,CAACjD,oBAAR,CAA6BlkB,MAA7B;AACH;AACJ;AALwB;AAAA;AAAA;AAAA;AAAA;AAM5B;;;gDAC2B;AACxB,UAAIJ,MAAM,GAAG,EAAb;AACA2G,YAAM,CAAC3G,MAAD,EAAS,WAAT,CAAN,CAA4B0nB,SAA5B,GAAwC,IAAxC;AACA,UAAIC,aAAa,GAAGhhB,MAAM,CAACA,MAAM,CAAC3G,MAAD,EAAS,WAAT,CAAP,EAA8B,eAA9B,CAA1B;AACA2nB,mBAAa,CAACC,eAAd,GAAgC,IAAhC;AACAD,mBAAa,CAACE,kBAAd,GAAmC,CAACtpB,gCAAgC,CAACupB,qBAAjC,CAAuDzZ,MAAxD,EAAgE9P,gCAAgC,CAACupB,qBAAjC,CAAuDC,MAAvH,EAA+HxpB,gCAAgC,CAACupB,qBAAjC,CAAuDvZ,MAAtL,CAAnC;AACAoZ,mBAAa,CAACK,eAAd,GAAgCzpB,gCAAgC,CAAC0pB,mBAAjC,CAAqDC,qBAArF;AACA,UAAIhC,WAAW,GAAGvf,MAAM,CAACA,MAAM,CAAC3G,MAAD,EAAS,cAAT,CAAP,EAAiC,oBAAjC,CAAxB;AACAkmB,iBAAW,CAACiC,kBAAZ,GAAiC,IAAjC;AACAjC,iBAAW,CAACkC,UAAZ,GAAyB,IAAzB;;AATwB,mDAUJ,KAAK7J,SAVD;AAAA;;AAAA;AAUxB,kEAAoC;AAAA,cAA3BgJ,OAA2B;AAChCA,iBAAO,CAACc,sBAAR,CAA+BroB,MAA/B;AACH;AAZuB;AAAA;AAAA;AAAA;AAAA;;AAaxB,aAAOA,MAAP;AACH;;;uCACkBknB,W,EAAa;AAC5B,UAAInf,gBAAgB,GAAG,KAAK6W,cAAL,CAAoB7W,gBAA3C;;AAD4B,mDAER,KAAKwW,SAFG;AAAA;;AAAA;AAE5B,kEAAoC;AAAA,cAA3BgJ,OAA2B;AAChCA,iBAAO,CAACnmB,UAAR,CAAmB,KAAKoM,aAAxB,EAAuCzF,gBAAvC;AACH;AAJ2B;AAAA;AAAA;AAAA;AAAA;AAK/B;;;8CACyB3H,M,EAAQ;AAAA;;AAC9B,aAAO,IAAIyR,OAAJ,CAAY,UAACC,OAAD,EAAU0I,MAAV,EAAqB;AAAA,qDACXpa,MAAM,CAACkoB,aADI;AAAA;;AAAA;AACpC,oEAA+C;AAAA,gBAAtCC,YAAsC;;AAC3C,gBAAMhB,OAAO,GAAG,OAAI,CAAC9I,gBAAL,CAAsBjU,GAAtB,CAA0B+d,YAAY,CAACjoB,MAAvC,CAAhB;;AACA,gBAAI,CAACinB,OAAL,EAAc;AACV/M,oBAAM,CAAC,IAAI/K,KAAJ,yCAA2C8Y,YAAY,CAACjoB,MAAxD,kCAAD,CAAN;AACA;AACH;;AACD,gBAAM2P,OAAO,GAAGsY,YAAY,CAACzgB,eAAb,IAAgC,EAAhD;AACAmI,mBAAO,CAAClI,gBAAR,GAA2BkI,OAAO,CAAClI,gBAAR,IAA4B,OAAI,CAAC6W,cAAL,CAAoB7W,gBAA3E;AACA,gBAAMjI,IAAI,GAAG;AACTqI,gBAAE,EAAEogB,YAAY,CAACpgB,EADR;AAETL,6BAAe,EAAEmI;AAFR,aAAb;AAIAsX,mBAAO,CAACrgB,QAAR,CAAiB,OAAI,CAACsX,eAAL,CAAqBhU,GAArB,CAAyB+d,YAAY,CAACjoB,MAAtC,CAAjB,EAAgER,IAAhE;AACH;AAdmC;AAAA;AAAA;AAAA;AAAA;;AAepCgS,eAAO;AACV,OAhBM,CAAP;AAiBH;;;gDAC2B1R,M,EAAQ;AAAA;;AAChC,aAAO,IAAIyR,OAAJ,CAAY,UAACC,OAAD,EAAU0I,MAAV,EAAqB;AAAA,qDACTpa,MAAM,CAACooB,gBADE;AAAA;;AAAA;AACpC,oEAAoD;AAAA,gBAA3CC,cAA2C;;AAChD,gBAAMlB,OAAO,GAAG,OAAI,CAAC9I,gBAAL,CAAsBjU,GAAtB,CAA0Bie,cAAc,CAACnoB,MAAzC,CAAhB;;AACA,gBAAI,CAACinB,OAAL,EAAc;AACV/M,oBAAM,CAAC,IAAI/K,KAAJ,yCAA2CgZ,cAAc,CAACnoB,MAA1D,oCAAD,CAAN;AACA;AACH;;AACDinB,mBAAO,CAACpgB,UAAR,CAAmBshB,cAAc,CAACtgB,EAAlC;AACH;AARmC;AAAA;AAAA;AAAA;AAAA;;AASpC;AACA2J,eAAO;AACV,OAXM,CAAP;AAYH;;;6CACwB1R,M,EAAQ;AAC7B;AACA;AACA,UAAIunB,aAAa,GAAGvnB,MAAM,CAACsoB,IAA3B;AACA,UAAIC,iBAAiB,GAAG,IAAI9gB,GAAJ,EAAxB;AACAxJ,cAAQ,CAAC4K,SAAT,CAAmBc,aAAnB,CAAiCC,OAAjC,CAAyC,UAACqB,QAAD;AAAA,eAAcsd,iBAAiB,CAACzgB,GAAlB,CAAsBmD,QAAQ,CAACpB,GAAT,CAAaC,QAAb,EAAtB,EAA+CmB,QAA/C,CAAd;AAAA,OAAzC;AACA,UAAIud,eAAe,GAAG,KAAtB;;AACA,UAAIjB,aAAa,CAACC,eAAlB,EAAmC;AAAA,qDACVD,aAAa,CAACC,eADJ;AAAA;;AAAA;AAC/B,oEAAoD;AAAA,gBAAzChd,MAAyC;;AAChD,gBAAIrM,gCAAgC,CAACsqB,gBAAjC,CAAkD9hB,EAAlD,CAAqD6D,MAArD,KAAgEA,MAAM,CAAClC,YAAP,CAAoBogB,OAApF,IAA+Fle,MAAM,CAAClC,YAAP,CAAoBogB,OAApB,IAA+B,CAAlI,EAAqI;AACjI,kBAAIpgB,YAAY,GAAGigB,iBAAiB,CAACne,GAAlB,CAAsBI,MAAM,CAAClC,YAAP,CAAoBuB,GAA1C,CAAnB;;AACA,kBAAIvB,YAAY,IAAIA,YAAY,CAACogB,OAAb,KAAyBle,MAAM,CAAClC,YAAP,CAAoBogB,OAAjE,EAA0E;AACtEF,+BAAe,GAAG,IAAlB;AACA;AACH;AACJ;AACJ;AAT8B;AAAA;AAAA;AAAA;AAAA;AAUlC;;AACD,UAAIA,eAAJ,EAAqB;AACjB,eAAO/W,OAAO,CAACC,OAAR,CAAgB;AAAEiX,iBAAO,EAAE;AAAX,SAAhB,CAAP;AACH;;AACD,aAAO1qB,QAAQ,CAAC4K,SAAT,CAAmBye,SAAnB,CAA6B,KAAK3G,IAAL,CAAUxG,eAAV,CAA0Bna,MAAM,CAACsoB,IAAjC,CAA7B,EAAqElc,IAArE,CAA0E,UAACpO,KAAD,EAAW;AAAE,eAAO;AAAE2qB,iBAAO,EAAE3qB;AAAX,SAAP;AAA4B,OAAnH,CAAP;AACH;;;qCAEgB+B,I,EAAMlB,K,EAAO;AAC1B;AACA,UAAIA,KAAK,YAAYV,gCAAgC,CAACgjB,aAAlD,IAAmEtiB,KAAK,CAACwiB,IAAN,KAAeljB,gCAAgC,CAACyqB,UAAjC,CAA4CC,gBAAlI,EAAoJ;AAChJ;AACH;;AACD,WAAKhqB,KAAL,mBAAsBkB,IAAI,CAACG,MAA3B,eAA6CrB,KAA7C;AACH;;;wBA/uBW;AACR,aAAO,KAAKiqB,MAAZ;AACH,K;sBACS9qB,K,EAAO;AACb,UAAI+qB,QAAQ,GAAG,KAAKC,cAAL,EAAf;AACA,WAAKF,MAAL,GAAc9qB,KAAd;AACA,UAAIirB,QAAQ,GAAG,KAAKD,cAAL,EAAf;;AACA,UAAIC,QAAQ,KAAKF,QAAjB,EAA2B;AACvB,aAAK5I,mBAAL,CAAyB0C,IAAzB,CAA8B;AAAEkG,kBAAQ,EAARA,QAAF;AAAYE,kBAAQ,EAARA;AAAZ,SAA9B;AACH;AACJ;;;wBAYsB;AACnB,aAAO,KAAK5J,iBAAZ;AACH;;;wBA4EmB;AAChB,aAAO,KAAKb,cAAZ;AACH;;;wBAC4B;AACzB,aAAO,KAAKmC,IAAZ;AACH;;;wBAC4B;AACzB,aAAO,KAAKH,IAAZ;AACH;;;wBACiB;AACd,aAAO,KAAKP,iBAAL,CAAuBnV,KAA9B;AACH;;;wBACsB;AACnB,aAAO,KAAKqV,mBAAL,CAAyBrV,KAAhC;AACH;;;wBACmB;AAChB,UAAI,CAAC,KAAKyU,cAAV,EAA0B;AACtB,aAAKA,cAAL,GAAsBthB,QAAQ,CAAC2F,MAAT,CAAgBslB,mBAAhB,CAAoC,KAAK1K,cAAL,CAAoBE,iBAApB,GAAwC,KAAKF,cAAL,CAAoBE,iBAA5D,GAAgF,KAAKH,KAAzH,CAAtB;AACH;;AACD,aAAO,KAAKgB,cAAZ;AACH;;;wBACwB;AACrB,UAAI,KAAKE,mBAAT,EAA8B;AAC1B,eAAO,KAAKA,mBAAZ;AACH;;AACD,aAAO,KAAKH,aAAZ;AACH;;;wBACiB;AACd,aAAO,KAAKK,YAAZ;AACH;;;sBAIS3hB,K,EAAO;AAAA;;AACb,WAAKgmB,MAAL,GAAchmB,KAAd;AACA,WAAKgoB,OAAL,GAAe5Z,IAAf,CAAoB,YAAM;AACtB,eAAI,CAACkW,iBAAL,GAAyBlW,IAAzB,CAA8B,UAAC7M,UAAD,EAAgB;AAC1CA,oBAAU,CAACkB,KAAX,CAAiB,OAAI,CAACujB,MAAtB,EAA8B,OAAI,CAAC5D,OAAnC,EAA4C;AACxC/f,4BAAgB,EAAE,KADsB;AAExCQ,uBAAW,EAAE,OAAI,CAACqd;AAFsB,WAA5C;AAIH,SALD;AAMH,OAPD,EAOG,YAAM,CACR,CARD;AASH;;;;;;AAimBLtgB,OAAO,CAACqgB,kBAAR,GAA6BA,kBAA7B,C;;;;;;;;;;;;;ACl4EA;;;;AAIa;;;;;;;;AACbngB,MAAM,CAACC,cAAP,CAAsBH,OAAtB,EAA+B,YAA/B,EAA6C;AAAEI,OAAK,EAAE;AAAT,CAA7C;;AACA,IAAMqjB,IAAI,GAAGnjB,mBAAO,CAAC,iFAAD,CAApB;;AACA,IAAMirB,KAAK,GAAGjrB,mBAAO,CAAC,kGAAD,CAArB;;AACA,IAAMI,EAAE,GAAGJ,mBAAO,CAAC,yEAAD,CAAlB;;AACA,IAAMkrB,wBAAwB,GAAGlrB,mBAAO,CAAC,qGAAD,CAAxC;;AACA,IAAMmrB,kBAAkB,GAAGnrB,mBAAO,CAAC,yFAAD,CAAlC;;AACA,IAAMorB,sBAAsB,GAAGprB,mBAAO,CAAC,iGAAD,CAAtC;;AACA,SAASuiB,eAAT,CAAyB8I,YAAzB,EAAuC;AACnC,MAAMC,aAAa,GAAG,SAAhBA,aAAgB,CAACxrB,KAAD;AAAA,WAAWA,KAAK,CAAC8L,QAAN,EAAX;AAAA,GAAtB;;AACA,MAAM2f,aAAa,GAAGF,YAAY,IAAIC,aAAtC;;AACA,WAAS7a,KAAT,CAAe3Q,KAAf,EAAsB;AAClB,WAAOyrB,aAAa,CAACzrB,KAAD,CAApB;AACH;;AACD,WAASkZ,wBAAT,CAAkC5O,YAAlC,EAAgD;AAC5C,WAAO;AACHuB,SAAG,EAAE4f,aAAa,CAACnhB,YAAY,CAACuB,GAAd;AADf,KAAP;AAGH;;AACD,WAAS6f,iCAAT,CAA2CphB,YAA3C,EAAyD;AACrD,WAAO;AACHuB,SAAG,EAAE4f,aAAa,CAACnhB,YAAY,CAACuB,GAAd,CADf;AAEH6e,aAAO,EAAEpgB,YAAY,CAACogB;AAFnB,KAAP;AAIH;;AACD,WAASvf,wBAAT,CAAkCb,YAAlC,EAAgD;AAC5C,WAAO;AACHA,kBAAY,EAAE;AACVuB,WAAG,EAAE4f,aAAa,CAACnhB,YAAY,CAACuB,GAAd,CADR;AAEV8f,kBAAU,EAAErhB,YAAY,CAACqhB,UAFf;AAGVjB,eAAO,EAAEpgB,YAAY,CAACogB,OAHZ;AAIVkB,YAAI,EAAEthB,YAAY,CAACuhB,OAAb;AAJI;AADX,KAAP;AAQH;;AACD,WAASC,yBAAT,CAAmC9rB,KAAnC,EAA0C;AACtC,QAAI4I,SAAS,GAAG5I,KAAhB;AACA,WAAO,CAAC,CAAC4I,SAAS,CAACqE,QAAZ,IAAwB,CAAC,CAACrE,SAAS,CAACmE,cAA3C;AACH;;AACD,WAASgf,cAAT,CAAwB/rB,KAAxB,EAA+B;AAC3B,QAAI4I,SAAS,GAAG5I,KAAhB;AACA,WAAO,CAAC,CAAC4I,SAAS,CAACiD,GAAZ,IAAmB,CAAC,CAACjD,SAAS,CAAC8hB,OAAtC;AACH;;AACD,WAASvd,0BAAT,CAAoC6e,GAApC,EAAyC;AACrC,QAAID,cAAc,CAACC,GAAD,CAAlB,EAAyB;AACrB,UAAIpqB,MAAM,GAAG;AACT0I,oBAAY,EAAE;AACVuB,aAAG,EAAE4f,aAAa,CAACO,GAAG,CAACngB,GAAL,CADR;AAEV6e,iBAAO,EAAEsB,GAAG,CAACtB;AAFH,SADL;AAKT3d,sBAAc,EAAE,CAAC;AAAE6e,cAAI,EAAEI,GAAG,CAACH,OAAJ;AAAR,SAAD;AALP,OAAb;AAOA,aAAOjqB,MAAP;AACH,KATD,MAUK,IAAIkqB,yBAAyB,CAACE,GAAD,CAA7B,EAAoC;AACrC,UAAI/e,QAAQ,GAAG+e,GAAG,CAAC/e,QAAnB;AACA,UAAIrL,OAAM,GAAG;AACT0I,oBAAY,EAAE;AACVuB,aAAG,EAAE4f,aAAa,CAACxe,QAAQ,CAACpB,GAAV,CADR;AAEV6e,iBAAO,EAAEzd,QAAQ,CAACyd;AAFR,SADL;AAKT3d,sBAAc,EAAEif,GAAG,CAACjf,cAAJ,CAAmBkf,GAAnB,CAAuB,UAACzf,MAAD,EAAY;AAC/C,cAAIyM,KAAK,GAAGzM,MAAM,CAACyM,KAAnB;AACA,iBAAO;AACHA,iBAAK,EAAE;AACHyP,mBAAK,EAAE;AAAEwD,oBAAI,EAAEjT,KAAK,CAACyP,KAAN,CAAYwD,IAApB;AAA0BC,yBAAS,EAAElT,KAAK,CAACyP,KAAN,CAAYyD;AAAjD,eADJ;AAEHC,iBAAG,EAAE;AAAEF,oBAAI,EAAEjT,KAAK,CAACmT,GAAN,CAAUF,IAAlB;AAAwBC,yBAAS,EAAElT,KAAK,CAACmT,GAAN,CAAUD;AAA7C;AAFF,aADJ;AAKHE,uBAAW,EAAE7f,MAAM,CAAC6f,WALjB;AAMHT,gBAAI,EAAEpf,MAAM,CAACof;AANV,WAAP;AAQH,SAVe;AALP,OAAb;AAiBA,aAAOhqB,OAAP;AACH,KApBI,MAqBA;AACD,YAAMyP,KAAK,CAAC,4CAAD,CAAX;AACH;AACJ;;AACD,WAASlF,yBAAT,CAAmC7B,YAAnC,EAAiD;AAC7C,WAAO;AACHA,kBAAY,EAAE4O,wBAAwB,CAAC5O,YAAD;AADnC,KAAP;AAGH;;AACD,WAASuE,wBAAT,CAAkCvE,YAAlC,EAAwE;AAAA,QAAxBgiB,cAAwB,uEAAP,KAAO;AACpE,QAAI1qB,MAAM,GAAG;AACT0I,kBAAY,EAAEohB,iCAAiC,CAACphB,YAAD;AADtC,KAAb;;AAGA,QAAIgiB,cAAJ,EAAoB;AAChB1qB,YAAM,CAACgqB,IAAP,GAActhB,YAAY,CAACuhB,OAAb,EAAd;AACH;;AACD,WAAOjqB,MAAP;AACH;;AACD,WAAS2qB,wBAAT,CAAkCC,MAAlC,EAA0C;AACtC,YAAQA,MAAR;AACI,WAAKnJ,IAAI,CAACoJ,sBAAL,CAA4BC,MAAjC;AACI,eAAOvB,KAAK,CAACsB,sBAAN,CAA6BC,MAApC;;AACJ,WAAKrJ,IAAI,CAACoJ,sBAAL,CAA4BE,UAAjC;AACI,eAAOxB,KAAK,CAACsB,sBAAN,CAA6BE,UAApC;;AACJ,WAAKtJ,IAAI,CAACoJ,sBAAL,CAA4BG,QAAjC;AACI,eAAOzB,KAAK,CAACsB,sBAAN,CAA6BG,QAApC;AANR;;AAQA,WAAOzB,KAAK,CAACsB,sBAAN,CAA6BC,MAApC;AACH;;AACD,WAAS1e,4BAAT,CAAsClB,KAAtC,EAA6C;AACzC,WAAO;AACHxC,kBAAY,EAAE4O,wBAAwB,CAACpM,KAAK,CAACG,QAAP,CADnC;AAEHuf,YAAM,EAAED,wBAAwB,CAACzf,KAAK,CAAC0f,MAAP;AAF7B,KAAP;AAIH;;AACD,WAAShY,4BAAT,CAAsClK,YAAtC,EAAoD6I,QAApD,EAA8D;AAC1D,WAAO;AACH7I,kBAAY,EAAE4O,wBAAwB,CAAC5O,YAAD,CADnC;AAEH6I,cAAQ,EAAE0Z,gBAAgB,CAAC1Z,QAAD;AAFvB,KAAP;AAIH;;AACD,WAAS2Z,aAAT,CAAuBC,WAAvB,EAAoC;AAChC,YAAQA,WAAR;AACI,WAAK1J,IAAI,CAAC2J,qBAAL,CAA2BC,gBAAhC;AACI,eAAO9B,KAAK,CAAC6B,qBAAN,CAA4BC,gBAAnC;;AACJ,WAAK5J,IAAI,CAAC2J,qBAAL,CAA2BE,+BAAhC;AACI,eAAO/B,KAAK,CAAC6B,qBAAN,CAA4BE,+BAAnC;;AACJ;AACI,eAAO/B,KAAK,CAAC6B,qBAAN,CAA4BG,OAAnC;AANR;AAQH;;AACD,WAAS7Z,kBAAT,CAA4BhJ,YAA5B,EAA0C6I,QAA1C,EAAoDC,OAApD,EAA6D;AACzD,WAAO;AACH9I,kBAAY,EAAE4O,wBAAwB,CAAC5O,YAAD,CADnC;AAEH6I,cAAQ,EAAE0Z,gBAAgB,CAAC1Z,QAAD,CAFvB;AAGHC,aAAO,EAAE;AACL2Z,mBAAW,EAAED,aAAa,CAAC1Z,OAAO,CAAC2Z,WAAT,CADrB;AAELK,wBAAgB,EAAEha,OAAO,CAACga;AAFrB;AAHN,KAAP;AAQH;;AACD,WAASP,gBAAT,CAA0B1Z,QAA1B,EAAoC;AAChC,WAAO;AAAE+Y,UAAI,EAAE/Y,QAAQ,CAAC+Y,IAAjB;AAAuBC,eAAS,EAAEhZ,QAAQ,CAACgZ;AAA3C,KAAP;AACH;;AACD,WAAS3Q,UAAT,CAAoBxb,KAApB,EAA2B;AACvB,QAAIA,KAAK,KAAK,KAAK,CAAnB,EAAsB;AAClB,aAAOoD,SAAP;AACH,KAFD,MAGK,IAAIpD,KAAK,KAAK,IAAd,EAAoB;AACrB,aAAO,IAAP;AACH;;AACD,WAAO;AAAEksB,UAAI,EAAElsB,KAAK,CAACksB,IAAd;AAAoBC,eAAS,EAAEnsB,KAAK,CAACmsB;AAArC,KAAP;AACH;;AACD,WAASkB,WAAT,CAAqBrtB,KAArB,EAA4B;AACxB,QAAI4B,MAAM,GAAG,EAAb;;AADwB,+CAEP5B,KAFO;AAAA;;AAAA;AAExB,0DAAwB;AAAA,YAAfstB,IAAe;AACpB1rB,cAAM,CAAC0D,IAAP,CAAYkW,UAAU,CAAC8R,IAAD,CAAtB;AACH;AAJuB;AAAA;AAAA;AAAA;AAAA;;AAKxB,WAAO1rB,MAAP;AACH;;AACD,WAASuX,OAAT,CAAiBnZ,KAAjB,EAAwB;AACpB,QAAIA,KAAK,KAAK,KAAK,CAAf,IAAoBA,KAAK,KAAK,IAAlC,EAAwC;AACpC,aAAOA,KAAP;AACH;;AACD,WAAO;AAAE0oB,WAAK,EAAElN,UAAU,CAACxb,KAAK,CAAC0oB,KAAP,CAAnB;AAAkC0D,SAAG,EAAE5Q,UAAU,CAACxb,KAAK,CAACosB,GAAP;AAAjD,KAAP;AACH;;AACD,WAASmB,oBAAT,CAA8BvtB,KAA9B,EAAqC;AACjC,YAAQA,KAAR;AACI,WAAKqjB,IAAI,CAACmK,kBAAL,CAAwBnc,KAA7B;AACI,eAAO8Z,KAAK,CAACqC,kBAAN,CAAyBnc,KAAhC;;AACJ,WAAKgS,IAAI,CAACmK,kBAAL,CAAwBhJ,OAA7B;AACI,eAAO2G,KAAK,CAACqC,kBAAN,CAAyBhJ,OAAhC;;AACJ,WAAKnB,IAAI,CAACmK,kBAAL,CAAwBC,WAA7B;AACI,eAAOtC,KAAK,CAACqC,kBAAN,CAAyBC,WAAhC;;AACJ,WAAKpK,IAAI,CAACmK,kBAAL,CAAwBE,IAA7B;AACI,eAAOvC,KAAK,CAACqC,kBAAN,CAAyBE,IAAhC;AARR;AAUH;;AACD,WAASC,gBAAT,CAA0BC,IAA1B,EAAgC;AAC5B,QAAI,CAACA,IAAL,EAAW;AACP,aAAOxqB,SAAP;AACH;;AACD,QAAIxB,MAAM,GAAG,EAAb;;AAJ4B,gDAKZgsB,IALY;AAAA;;AAAA;AAK5B,6DAAsB;AAAA,YAAbC,GAAa;AAClB,YAAIC,SAAS,GAAGC,eAAe,CAACF,GAAD,CAA/B;;AACA,YAAIC,SAAS,KAAK1qB,SAAlB,EAA6B;AACzBxB,gBAAM,CAAC0D,IAAP,CAAYwoB,SAAZ;AACH;AACJ;AAV2B;AAAA;AAAA;AAAA;AAAA;;AAW5B,WAAOlsB,MAAM,CAAC6D,MAAP,GAAgB,CAAhB,GAAoB7D,MAApB,GAA6BwB,SAApC;AACH;;AACD,WAAS2qB,eAAT,CAAyBF,GAAzB,EAA8B;AAC1B,YAAQA,GAAR;AACI,WAAKxK,IAAI,CAAC2K,aAAL,CAAmBC,WAAxB;AACI,eAAO9C,KAAK,CAAC6C,aAAN,CAAoBC,WAA3B;;AACJ,WAAK5K,IAAI,CAAC2K,aAAL,CAAmBE,UAAxB;AACI,eAAO/C,KAAK,CAAC6C,aAAN,CAAoBE,UAA3B;;AACJ;AACI,eAAO9qB,SAAP;AANR;AAQH;;AACD,WAAS+qB,YAAT,CAAsBva,IAAtB,EAA4B;AACxB,QAAIhS,MAAM,GAAGupB,KAAK,CAACiD,UAAN,CAAiB5P,MAAjB,CAAwBrF,OAAO,CAACvF,IAAI,CAACqF,KAAN,CAA/B,EAA6CrF,IAAI,CAACjT,OAAlD,CAAb;;AACA,QAAIL,EAAE,CAACmmB,MAAH,CAAU7S,IAAI,CAACya,QAAf,CAAJ,EAA8B;AAC1BzsB,YAAM,CAACysB,QAAP,GAAkBd,oBAAoB,CAAC3Z,IAAI,CAACya,QAAN,CAAtC;AACH;;AACD,QAAI/tB,EAAE,CAACmmB,MAAH,CAAU7S,IAAI,CAACyP,IAAf,KAAwB/iB,EAAE,CAAC2B,MAAH,CAAU2R,IAAI,CAACyP,IAAf,CAA5B,EAAkD;AAC9CzhB,YAAM,CAACyhB,IAAP,GAAczP,IAAI,CAACyP,IAAnB;AACH;;AACD,QAAI/b,KAAK,CAACiI,OAAN,CAAcqE,IAAI,CAACga,IAAnB,CAAJ,EAA8B;AAC1BhsB,YAAM,CAACgsB,IAAP,GAAcD,gBAAgB,CAAC/Z,IAAI,CAACga,IAAN,CAA9B;AACH;;AACD;;AACA,QAAIha,IAAI,CAAC0a,MAAT,EAAiB;AACb1sB,YAAM,CAAC0sB,MAAP,GAAgB1a,IAAI,CAAC0a,MAArB;AACH;;AACD,WAAO1sB,MAAP;AACH;;AACD,WAASsmB,aAAT,CAAuBqG,KAAvB,EAA8B;AAC1B,QAAIA,KAAK,KAAK,KAAK,CAAf,IAAoBA,KAAK,KAAK,IAAlC,EAAwC;AACpC,aAAOA,KAAP;AACH;;AACD,WAAOA,KAAK,CAACtC,GAAN,CAAUkC,YAAV,CAAP;AACH;;AACD,WAASK,eAAT,CAAyBC,MAAzB,EAAiCC,aAAjC,EAAgD;AAC5C,YAAQD,MAAR;AACI,WAAK,SAAL;AACI,eAAOC,aAAP;;AACJ,WAAKvD,KAAK,CAAC3Y,UAAN,CAAiBE,SAAtB;AACI,eAAO;AAAE3C,cAAI,EAAE0e,MAAR;AAAgBzuB,eAAK,EAAE0uB;AAAvB,SAAP;;AACJ,WAAKvD,KAAK,CAAC3Y,UAAN,CAAiBC,QAAtB;AACI,eAAO;AAAE1C,cAAI,EAAE0e,MAAR;AAAgBzuB,eAAK,EAAE0uB,aAAa,CAAC1uB;AAArC,SAAP;;AACJ;AACI,uEAAwDyuB,MAAxD;AARR;AAUH;;AACD,WAASE,oBAAT,CAA8B3uB,KAA9B,EAAqC4uB,QAArC,EAA+C;AAC3C,QAAIA,QAAQ,KAAK,KAAK,CAAtB,EAAyB;AACrB,aAAOA,QAAP;AACH;;AACD,WAAO5uB,KAAK,GAAG,CAAf;AACH;;AACD,WAAS8T,gBAAT,CAA0BF,IAA1B,EAAgC;AAC5B,QAAIhS,MAAM,GAAG;AAAEitB,WAAK,EAAEjb,IAAI,CAACib;AAAd,KAAb;AACA,QAAIC,YAAY,GAAGlb,IAAI,YAAYwX,wBAAwB,WAAxC,GAAmDxX,IAAnD,GAA0DxQ,SAA7E;;AACA,QAAIwQ,IAAI,CAACmb,MAAT,EAAiB;AACbntB,YAAM,CAACmtB,MAAP,GAAgBnb,IAAI,CAACmb,MAArB;AACH,KAL2B,CAM5B;AACA;;;AACA,QAAInb,IAAI,CAAC8a,aAAT,EAAwB;AACpB,UAAI,CAACI,YAAD,IAAiBA,YAAY,CAACvc,mBAAb,KAAqC,SAA1D,EAAqE;AACjE3Q,cAAM,CAAC8sB,aAAP,GAAuB9a,IAAI,CAAC8a,aAA5B;AACH,OAFD,MAGK;AACD9sB,cAAM,CAAC8sB,aAAP,GAAuBF,eAAe,CAACM,YAAY,CAACvc,mBAAd,EAAmCqB,IAAI,CAAC8a,aAAxC,CAAtC;AACH;AACJ;;AACD,QAAI9a,IAAI,CAACob,UAAT,EAAqB;AACjBptB,YAAM,CAACotB,UAAP,GAAoBpb,IAAI,CAACob,UAAzB;AACH;;AACDC,yBAAqB,CAACrtB,MAAD,EAASgS,IAAT,CAArB;;AACA,QAAItT,EAAE,CAACmmB,MAAH,CAAU7S,IAAI,CAAC7D,IAAf,CAAJ,EAA0B;AACtBnO,YAAM,CAACmO,IAAP,GAAc4e,oBAAoB,CAAC/a,IAAI,CAAC7D,IAAN,EAAY+e,YAAY,IAAIA,YAAY,CAACI,gBAAzC,CAAlC;AACH;;AACD,QAAItb,IAAI,CAACub,QAAT,EAAmB;AACfvtB,YAAM,CAACutB,QAAP,GAAkBvb,IAAI,CAACub,QAAvB;AACH;;AACD,QAAIvb,IAAI,CAACwb,mBAAT,EAA8B;AAC1BxtB,YAAM,CAACwtB,mBAAP,GAA6B5gB,WAAW,CAACoF,IAAI,CAACwb,mBAAN,CAAxC;AACH;;AACD,QAAIxb,IAAI,CAACyb,gBAAT,EAA2B;AACvBztB,YAAM,CAACytB,gBAAP,GAA0Bzb,IAAI,CAACyb,gBAAL,CAAsBC,KAAtB,EAA1B;AACH;;AACD,QAAI1b,IAAI,CAACuL,OAAT,EAAkB;AACdvd,YAAM,CAACud,OAAP,GAAiB7F,SAAS,CAAC1F,IAAI,CAACuL,OAAN,CAA1B;AACH;;AACD,QAAIvL,IAAI,CAAC2b,SAAL,KAAmB,IAAnB,IAA2B3b,IAAI,CAAC2b,SAAL,KAAmB,KAAlD,EAAyD;AACrD3tB,YAAM,CAAC2tB,SAAP,GAAmB3b,IAAI,CAAC2b,SAAxB;AACH;;AACD,QAAIT,YAAJ,EAAkB;AACd,UAAIA,YAAY,CAACptB,IAAb,KAAsB,KAAK,CAA/B,EAAkC;AAC9BE,cAAM,CAACF,IAAP,GAAcotB,YAAY,CAACptB,IAA3B;AACH;;AACD,UAAIotB,YAAY,CAACU,UAAb,KAA4B,IAA5B,IAAoCV,YAAY,CAACU,UAAb,KAA4B,KAApE,EAA2E;AACvE5tB,cAAM,CAAC4tB,UAAP,GAAoBV,YAAY,CAACU,UAAjC;AACH;AACJ;;AACD,WAAO5tB,MAAP;AACH;;AACD,WAASqtB,qBAAT,CAA+BzmB,MAA/B,EAAuC8lB,MAAvC,EAA+C;AAC3C,QAAIG,MAAM,GAAGtD,KAAK,CAACsE,gBAAN,CAAuB/c,SAApC;AACA,QAAIkZ,IAAJ;AACA,QAAI3S,KAAK,GAAG7V,SAAZ;;AACA,QAAIkrB,MAAM,CAACoB,QAAX,EAAqB;AACjB9D,UAAI,GAAG0C,MAAM,CAACoB,QAAP,CAAgBC,OAAvB;AACA1W,WAAK,GAAGE,OAAO,CAACmV,MAAM,CAACoB,QAAP,CAAgBzW,KAAjB,CAAf;AACH,KAHD,MAIK,IAAIqV,MAAM,CAACsB,UAAP,YAA6BvM,IAAI,CAACwM,aAAtC,EAAqD;AACtDpB,YAAM,GAAGtD,KAAK,CAACsE,gBAAN,CAAuBtnB,OAAhC;AACAyjB,UAAI,GAAG0C,MAAM,CAACsB,UAAP,CAAkB5vB,KAAzB;AACH,KAHI,MAIA;AACD4rB,UAAI,GAAG0C,MAAM,CAACsB,UAAd;AACH;;AACD,QAAItB,MAAM,CAACrV,KAAX,EAAkB;AACdA,WAAK,GAAGE,OAAO,CAACmV,MAAM,CAACrV,KAAR,CAAf;AACH;;AACDzQ,UAAM,CAACsnB,gBAAP,GAA0BrB,MAA1B;;AACA,QAAIH,MAAM,CAACyB,QAAP,IAAmBnE,IAAnB,IAA2B3S,KAA/B,EAAsC;AAClCzQ,YAAM,CAACknB,QAAP,GAAkB;AAAEC,eAAO,EAAE/D,IAAX;AAAiB3S,aAAK,EAAEA;AAAxB,OAAlB;AACH,KAFD,MAGK;AACDzQ,YAAM,CAAConB,UAAP,GAAoBhE,IAApB;AACH;AACJ;;AACD,WAASoE,UAAT,CAAoB1F,IAApB,EAA0B;AACtB,WAAO;AAAErR,WAAK,EAAEE,OAAO,CAACmR,IAAI,CAACrR,KAAN,CAAhB;AAA8B0W,aAAO,EAAErF,IAAI,CAACqF;AAA5C,KAAP;AACH;;AACD,WAASnhB,WAAT,CAAqBH,KAArB,EAA4B;AACxB,QAAIA,KAAK,KAAK,KAAK,CAAf,IAAoBA,KAAK,KAAK,IAAlC,EAAwC;AACpC,aAAOA,KAAP;AACH;;AACD,WAAOA,KAAK,CAAC4d,GAAN,CAAU+D,UAAV,CAAP;AACH;;AACD,WAAS9Z,iBAAT,CAA2B5L,YAA3B,EAAyC6I,QAAzC,EAAmDtB,OAAnD,EAA4D;AACxD,WAAO;AACHvH,kBAAY,EAAE4O,wBAAwB,CAAC5O,YAAD,CADnC;AAEH6I,cAAQ,EAAE0Z,gBAAgB,CAAC1Z,QAAD,CAFvB;AAGHC,aAAO,EAAE;AAAE6c,0BAAkB,EAAEpe,OAAO,CAACoe;AAA9B;AAHN,KAAP;AAKH;;AACD,WAAS7W,mBAAT,CAA6BhG,OAA7B,EAAsC;AAClC,QAAIA,OAAO,KAAK,KAAK,CAAjB,IAAsBA,OAAO,KAAK,IAAtC,EAA4C;AACxC,aAAOA,OAAP;AACH;;AACD,QAAI8c,IAAJ;;AACA,QAAI9c,OAAO,CAAC8c,IAAR,IAAgB5vB,EAAE,CAAC2B,MAAH,CAAUmR,OAAO,CAAC8c,IAAR,CAAalwB,KAAvB,CAApB,EAAmD;AAC/CkwB,UAAI,GAAG,CAAC9c,OAAO,CAAC8c,IAAR,CAAalwB,KAAd,CAAP;AACH;;AACD,WAAOmrB,KAAK,CAACgF,iBAAN,CAAwB3R,MAAxB,CAA+B0J,aAAa,CAAC9U,OAAO,CAAC0U,WAAT,CAA5C,EAAmEoI,IAAnE,CAAP;AACH;;AACD,WAAS5W,SAAT,CAAmB1F,IAAnB,EAAyB;AACrB,QAAIhS,MAAM,GAAGupB,KAAK,CAAC9R,OAAN,CAAcmF,MAAd,CAAqB5K,IAAI,CAAC2T,KAA1B,EAAiC3T,IAAI,CAACuL,OAAtC,CAAb;;AACA,QAAIvL,IAAI,CAAC0L,SAAT,EAAoB;AAChB1d,YAAM,CAAC0d,SAAP,GAAmB1L,IAAI,CAAC0L,SAAxB;AACH;;AACD,WAAO1d,MAAP;AACH;;AACD,WAASyY,UAAT,CAAoBzG,IAApB,EAA0B;AACtB,QAAIhS,MAAM,GAAGupB,KAAK,CAACiF,QAAN,CAAe5R,MAAf,CAAsBrF,OAAO,CAACvF,IAAI,CAACqF,KAAN,CAA7B,CAAb;;AACA,QAAIrF,IAAI,CAACuL,OAAT,EAAkB;AACdvd,YAAM,CAACud,OAAP,GAAiB7F,SAAS,CAAC1F,IAAI,CAACuL,OAAN,CAA1B;AACH;;AACD,QAAIvL,IAAI,YAAYyX,kBAAkB,WAAtC,EAAgD;AAC5C,UAAIzX,IAAI,CAAClS,IAAT,EAAe;AACXE,cAAM,CAACF,IAAP,GAAckS,IAAI,CAAClS,IAAnB;AACH;;AACD;AACH;;AACD,WAAOE,MAAP;AACH;;AACD,WAAS+Y,mBAAT,CAA6B/G,IAA7B,EAAmC;AAC/B,WAAO;AAAEyc,aAAO,EAAEzc,IAAI,CAACyc,OAAhB;AAAyBC,kBAAY,EAAE1c,IAAI,CAAC0c;AAA5C,KAAP;AACH;;AACD,WAASnZ,sBAAT,CAAgC7M,YAAhC,EAA8C;AAC1C,WAAO;AACHA,kBAAY,EAAE4O,wBAAwB,CAAC5O,YAAD;AADnC,KAAP;AAGH;;AACD,WAAS0P,gBAAT,CAA0B1P,YAA1B,EAAwC;AACpC,WAAO;AACHA,kBAAY,EAAE4O,wBAAwB,CAAC5O,YAAD;AADnC,KAAP;AAGH;;AACD,WAAS6S,cAAT,CAAwBvJ,IAAxB,EAA8B;AAC1B,QAAIhS,MAAM,GAAGupB,KAAK,CAACoF,YAAN,CAAmB/R,MAAnB,CAA0BrF,OAAO,CAACvF,IAAI,CAACqF,KAAN,CAAjC,CAAb;;AACA,QAAIrF,IAAI,CAACpL,MAAT,EAAiB;AACb5G,YAAM,CAAC4G,MAAP,GAAgBmI,KAAK,CAACiD,IAAI,CAACpL,MAAN,CAArB;AACH;;AACD,QAAIsmB,YAAY,GAAGlb,IAAI,YAAY0X,sBAAsB,WAAtC,GAAiD1X,IAAjD,GAAwDxQ,SAA3E;;AACA,QAAI0rB,YAAY,IAAIA,YAAY,CAACptB,IAAjC,EAAuC;AACnCE,YAAM,CAACF,IAAP,GAAcotB,YAAY,CAACptB,IAA3B;AACH;;AACD,WAAOE,MAAP;AACH;;AACD,WAASkb,oBAAT,CAA8BxS,YAA9B,EAA4C;AACxC,WAAO;AACHA,kBAAY,EAAE4O,wBAAwB,CAAC5O,YAAD;AADnC,KAAP;AAGH;;AACD,SAAO;AACHqG,SAAK,EAALA,KADG;AAEHuI,4BAAwB,EAAxBA,wBAFG;AAGHwS,qCAAiC,EAAjCA,iCAHG;AAIHvgB,4BAAwB,EAAxBA,wBAJG;AAKHgC,8BAA0B,EAA1BA,0BALG;AAMHhB,6BAAyB,EAAzBA,yBANG;AAOH0C,4BAAwB,EAAxBA,wBAPG;AAQHb,gCAA4B,EAA5BA,4BARG;AASHwG,gCAA4B,EAA5BA,4BATG;AAUHlB,sBAAkB,EAAlBA,kBAVG;AAWHuZ,oBAAgB,EAAhBA,gBAXG;AAYH1T,WAAO,EAAPA,OAZG;AAaHqC,cAAU,EAAVA,UAbG;AAcH6R,eAAW,EAAXA,WAdG;AAeHE,wBAAoB,EAApBA,oBAfG;AAgBHQ,mBAAe,EAAfA,eAhBG;AAiBHI,gBAAY,EAAZA,YAjBG;AAkBHjG,iBAAa,EAAbA,aAlBG;AAmBHpU,oBAAgB,EAAhBA,gBAnBG;AAoBHkc,cAAU,EAAVA,UApBG;AAqBH9Z,qBAAiB,EAAjBA,iBArBG;AAsBHkD,uBAAmB,EAAnBA,mBAtBG;AAuBHE,aAAS,EAATA,SAvBG;AAwBHe,cAAU,EAAVA,UAxBG;AAyBHM,uBAAmB,EAAnBA,mBAzBG;AA0BHxD,0BAAsB,EAAtBA,sBA1BG;AA2BH6C,oBAAgB,EAAhBA,gBA3BG;AA4BHmD,kBAAc,EAAdA,cA5BG;AA6BHL,wBAAoB,EAApBA;AA7BG,GAAP;AA+BH;;AACDld,OAAO,CAAC6iB,eAAR,GAA0BA,eAA1B,C;;;;;;;;;;;;ACtaA;;;;AAIa;;;;;;;;;;;;;;;;;;AACb3iB,MAAM,CAACC,cAAP,CAAsBH,OAAtB,EAA+B,YAA/B,EAA6C;AAAEI,OAAK,EAAE;AAAT,CAA7C;;AACA,IAAMC,QAAQ,GAAGC,mBAAO,CAAC,iFAAD,CAAxB;;AACA,IAAMC,gCAAgC,GAAGD,mBAAO,CAAC,kGAAD,CAAhD;;AACA,IAAMswB,QAAQ,GAAGtwB,mBAAO,CAAC,qEAAD,CAAxB;;AACA,SAASqI,MAAT,CAAgBC,MAAhB,EAAwBC,GAAxB,EAA6B;AACzB,MAAID,MAAM,CAACC,GAAD,CAAN,KAAgB,KAAK,CAAzB,EAA4B;AACxBD,UAAM,CAACC,GAAD,CAAN,GAAc,EAAd;AACH;;AACD,SAAOD,MAAM,CAACC,GAAD,CAAb;AACH;;IACKgoB,oB;;;;;AACF,gCAAY9lB,MAAZ,EAAoB;AAAA;;AAAA,6BACVA,MADU,EACFxK,gCAAgC,CAACuwB,oBAAjC,CAAsD3uB,IADpD;AAEnB;;;;2CACsBkQ,W,EAAa;AAChC1J,YAAM,CAACA,MAAM,CAAC0J,WAAD,EAAc,cAAd,CAAP,EAAsC,eAAtC,CAAN,CAA6D3G,mBAA7D,GAAmF,IAAnF;AACH;;;+BACUD,Y,EAAc1B,gB,EAAkB;AAAA,kCACnB,KAAKgnB,eAAL,CAAqBhnB,gBAArB,EAAuC0B,YAAY,CAACulB,aAApD,CADmB;AAAA;AAAA,UAClC7mB,EADkC;AAAA,UAC9B8H,OAD8B;;AAEvC,UAAI,CAAC9H,EAAD,IAAO,CAAC8H,OAAZ,EAAqB;AACjB;AACH;;AACD,WAAK/I,QAAL,CAAc,KAAKE,QAAnB,EAA6B;AAAEe,UAAE,EAAEA,EAAN;AAAUL,uBAAe,EAAEmI;AAA3B,OAA7B;AACH;;;6CACwBA,O,EAAS;AAAA;;AAC9B,UAAIlH,MAAM,GAAG,KAAKzB,OAAlB;;AACA,UAAI2nB,0BAAyB,GAAG,SAA5BA,yBAA4B,CAACC,KAAD,EAAQ1d,OAAR,EAAiBC,KAAjB,EAA2B;AACvD,YAAM0d,aAAa,GAAG;AAClBD,eAAK,EAALA,KADkB;AAElBxmB,sBAAY,EAAEK,MAAM,CAACO,sBAAP,CAA8BgO,wBAA9B,CAAuD9F,OAAO,CAACnG,QAA/D,CAFI;AAGlBgM,eAAK,EAAEtO,MAAM,CAACO,sBAAP,CAA8BiO,OAA9B,CAAsC/F,OAAO,CAAC6F,KAA9C;AAHW,SAAtB;AAKA,eAAOtO,MAAM,CAAC7I,WAAP,CAAmB3B,gCAAgC,CAAC6wB,wBAAjC,CAA0DjvB,IAA7E,EAAmFgvB,aAAnF,EAAkG1d,KAAlG,EAAyGjF,IAAzG,CAA8G,KAAI,CAAC6iB,oBAAL,CAA0BC,IAA1B,CAA+B,KAA/B,CAA9G,EAAoJ,UAACrwB,KAAD,EAAW;AAClK8J,gBAAM,CAAC6I,gBAAP,CAAwBrT,gCAAgC,CAAC6wB,wBAAjC,CAA0DjvB,IAAlF,EAAwFlB,KAAxF;AACA,iBAAO4S,OAAO,CAACC,OAAR,CAAgB,IAAhB,CAAP;AACH,SAHM,CAAP;AAIH,OAVD;;AAWA,UAAIyd,sBAAqB,GAAG,SAAxBA,qBAAwB,CAAClkB,QAAD,EAAWoG,KAAX,EAAqB;AAC7C,YAAM0d,aAAa,GAAG;AAClBzmB,sBAAY,EAAEK,MAAM,CAACO,sBAAP,CAA8BgO,wBAA9B,CAAuDjM,QAAvD;AADI,SAAtB;AAGA,eAAOtC,MAAM,CAAC7I,WAAP,CAAmB3B,gCAAgC,CAACuwB,oBAAjC,CAAsD3uB,IAAzE,EAA+EgvB,aAA/E,EAA8F1d,KAA9F,EAAqGjF,IAArG,CAA0G,KAAI,CAACgjB,mBAAL,CAAyBF,IAAzB,CAA8B,KAA9B,CAA1G,EAA+I,UAACrwB,KAAD,EAAW;AAC7J8J,gBAAM,CAAC6I,gBAAP,CAAwBrT,gCAAgC,CAAC6wB,wBAAjC,CAA0DjvB,IAAlF,EAAwFlB,KAAxF;AACA,iBAAO4S,OAAO,CAACC,OAAR,CAAgB,IAAhB,CAAP;AACH,SAHM,CAAP;AAIH,OARD;;AASA,UAAI1I,UAAU,GAAGL,MAAM,CAACI,aAAP,CAAqBC,UAAtC;AACA,aAAO/K,QAAQ,CAACuK,SAAT,CAAmB6mB,qBAAnB,CAAyCxf,OAAO,CAAClI,gBAAjD,EAAmE;AACtEknB,iCAAyB,EAAE,mCAACC,KAAD,EAAQ1d,OAAR,EAAiBC,KAAjB,EAA2B;AAClD,iBAAOrI,UAAU,CAAC6lB,yBAAX,GACD7lB,UAAU,CAAC6lB,yBAAX,CAAqCC,KAArC,EAA4C1d,OAA5C,EAAqDC,KAArD,EAA4Dwd,0BAA5D,CADC,GAEDA,0BAAyB,CAACC,KAAD,EAAQ1d,OAAR,EAAiBC,KAAjB,CAF/B;AAGH,SALqE;AAMtE8d,6BAAqB,EAAE,+BAAClkB,QAAD,EAAWoG,KAAX,EAAqB;AACxC,iBAAOrI,UAAU,CAACmmB,qBAAX,GACDnmB,UAAU,CAACmmB,qBAAX,CAAiClkB,QAAjC,EAA2CoG,KAA3C,EAAkD8d,sBAAlD,CADC,GAEDA,sBAAqB,CAAClkB,QAAD,EAAWoG,KAAX,CAF3B;AAGH;AAVqE,OAAnE,CAAP;AAYH;;;4BACOyd,K,EAAO;AACX,aAAO,IAAI7wB,QAAQ,CAACmI,KAAb,CAAmB0oB,KAAK,CAACQ,GAAzB,EAA8BR,KAAK,CAACS,KAApC,EAA2CT,KAAK,CAACU,IAAjD,EAAuDV,KAAK,CAACW,KAA7D,CAAP;AACH;;;wCACmBC,gB,EAAkB;AAAA;;AAClC,UAAIpqB,KAAK,CAACiI,OAAN,CAAcmiB,gBAAd,CAAJ,EAAqC;AACjC,eAAOA,gBAAgB,CAACzF,GAAjB,CAAqB,UAAA0F,EAAE,EAAI;AAC9B,iBAAO,IAAI1xB,QAAQ,CAAC2xB,gBAAb,CAA8B,MAAI,CAAC1oB,OAAL,CAAaqF,sBAAb,CAAoC4K,OAApC,CAA4CwY,EAAE,CAAC1Y,KAA/C,CAA9B,EAAqF,MAAI,CAAC4Y,OAAL,CAAaF,EAAE,CAACb,KAAhB,CAArF,CAAP;AACH,SAFM,CAAP;AAGH;;AACD,aAAO,EAAP;AACH;;;yCACoBgB,kB,EAAoB;AAAA;;AACrC,UAAIxqB,KAAK,CAACiI,OAAN,CAAcuiB,kBAAd,CAAJ,EAAuC;AACnC,eAAOA,kBAAkB,CAAC7F,GAAnB,CAAuB,UAAA8F,EAAE,EAAI;AAChC,cAAIC,YAAY,GAAG,IAAI/xB,QAAQ,CAACgyB,iBAAb,CAA+BF,EAAE,CAAClD,KAAlC,CAAnB;AACAmD,sBAAY,CAAC5C,mBAAb,GAAmC,MAAI,CAAClmB,OAAL,CAAaqF,sBAAb,CAAoCC,WAApC,CAAgDujB,EAAE,CAAC3C,mBAAnD,CAAnC;AACA4C,sBAAY,CAACtC,QAAb,GAAwB,MAAI,CAACxmB,OAAL,CAAaqF,sBAAb,CAAoCyhB,UAApC,CAA+C+B,EAAE,CAACrC,QAAlD,CAAxB;AACA,iBAAOsC,YAAP;AACH,SALM,CAAP;AAMH;;AACD,aAAO,EAAP;AACH;;;;EAvE8BxB,QAAQ,CAACrf,mB;;AAyE5CvR,OAAO,CAAC6wB,oBAAR,GAA+BA,oBAA/B,C;;;;;;;;;;;;ACxFA;;;;AAIa;;;;;;;;;;;;AACb3wB,MAAM,CAACC,cAAP,CAAsBH,OAAtB,EAA+B,YAA/B,EAA6C;AAAEI,OAAK,EAAE;AAAT,CAA7C;;AACA,IAAMC,QAAQ,GAAGC,mBAAO,CAAC,iFAAD,CAAxB;;AACA,IAAMC,gCAAgC,GAAGD,mBAAO,CAAC,kGAAD,CAAhD;;IACMmd,oB;AACF,gCAAYnU,OAAZ,EAAqB;AAAA;;AACjB,SAAKA,OAAL,GAAeA,OAAf;AACH;;;;2CACsBmC,Y,EAAc;AACjCA,kBAAY,CAACR,SAAb,GAAyBQ,YAAY,CAACR,SAAb,IAA0B,EAAnD;AACAQ,kBAAY,CAACR,SAAb,CAAuBqnB,aAAvB,GAAuC,IAAvC;AACH;;;iCACY;AAAA;;AACT,UAAIvnB,MAAM,GAAG,KAAKzB,OAAlB;AACAyB,YAAM,CAACxI,SAAP,CAAiBhC,gCAAgC,CAACgyB,oBAAjC,CAAsDpwB,IAAvE,EAA6E,UAACC,MAAD,EAASqR,KAAT,EAAmB;AAC5F,YAAI6e,aAAa,GAAG,SAAhBA,aAAgB,CAAClwB,MAAD,EAAY;AAC5B,cAAIJ,MAAM,GAAG,EAAb;;AAD4B,qDAEXI,MAAM,CAACusB,KAFI;AAAA;;AAAA;AAE5B,gEAA+B;AAAA,kBAAtB3a,IAAsB;AAC3B,kBAAIlD,QAAQ,GAAGkD,IAAI,CAACwe,QAAL,KAAkB,KAAK,CAAvB,IAA4Bxe,IAAI,CAACwe,QAAL,KAAkB,IAA9C,GAAqD,KAAI,CAAClpB,OAAL,CAAaqF,sBAAb,CAAoCoC,KAApC,CAA0CiD,IAAI,CAACwe,QAA/C,CAArD,GAAgHhvB,SAA/H;AACAxB,oBAAM,CAAC0D,IAAP,CAAY,KAAI,CAACsZ,gBAAL,CAAsBlO,QAAtB,EAAgCkD,IAAI,CAAC2J,OAAL,KAAiB,IAAjB,GAAwB3J,IAAI,CAAC2J,OAA7B,GAAuCna,SAAvE,CAAZ;AACH;AAL2B;AAAA;AAAA;AAAA;AAAA;;AAM5B,iBAAOxB,MAAP;AACH,SAPD;;AAQA,YAAIoJ,UAAU,GAAGL,MAAM,CAACI,aAAP,CAAqBC,UAArB,CAAgCH,SAAjD;AACA,eAAOG,UAAU,IAAIA,UAAU,CAACknB,aAAzB,GACDlnB,UAAU,CAACknB,aAAX,CAAyBlwB,MAAzB,EAAiCqR,KAAjC,EAAwC6e,aAAxC,CADC,GAEDA,aAAa,CAAClwB,MAAD,EAASqR,KAAT,CAFnB;AAGH,OAbD;AAcH;;;qCACgB3C,Q,EAAU6M,O,EAAS;AAChC,UAAI3b,MAAM,GAAG,IAAb;;AACA,UAAI2b,OAAJ,EAAa;AACT,YAAImB,KAAK,GAAGnB,OAAO,CAAC8U,WAAR,CAAoB,GAApB,CAAZ;;AACA,YAAI3T,KAAK,KAAK,CAAC,CAAf,EAAkB;AACd9c,gBAAM,GAAG3B,QAAQ,CAAC4K,SAAT,CAAmB+T,gBAAnB,CAAoCxb,SAApC,EAA+CsN,QAA/C,EAAyDtE,GAAzD,CAA6DmR,OAA7D,CAAT;AACH,SAFD,MAGK;AACD,cAAI1I,MAAM,GAAG5U,QAAQ,CAAC4K,SAAT,CAAmB+T,gBAAnB,CAAoCrB,OAAO,CAACsB,MAAR,CAAe,CAAf,EAAkBH,KAAlB,CAApC,EAA8DhO,QAA9D,CAAb;;AACA,cAAImE,MAAJ,EAAY;AACRjT,kBAAM,GAAGiT,MAAM,CAACzI,GAAP,CAAWmR,OAAO,CAACsB,MAAR,CAAeH,KAAK,GAAG,CAAvB,CAAX,CAAT;AACH;AACJ;AACJ,OAXD,MAYK;AACD,YAAI7J,OAAM,GAAG5U,QAAQ,CAAC4K,SAAT,CAAmB+T,gBAAnB,CAAoCxb,SAApC,EAA+CsN,QAA/C,CAAb;;AACA9O,cAAM,GAAG,EAAT;;AACA,wCAAgB9B,MAAM,CAACoe,IAAP,CAAYrJ,OAAZ,CAAhB,kCAAqC;AAAhC,cAAIpM,GAAG,mBAAP;;AACD,cAAIoM,OAAM,CAAC9I,GAAP,CAAWtD,GAAX,CAAJ,EAAqB;AACjB7G,kBAAM,CAAC6G,GAAD,CAAN,GAAcoM,OAAM,CAACzI,GAAP,CAAW3D,GAAX,CAAd;AACH;AACJ;AACJ;;AACD,UAAI,CAAC7G,MAAL,EAAa;AACT,eAAO,IAAP;AACH;;AACD,aAAOA,MAAP;AACH;;;;;;AAELhC,OAAO,CAACyd,oBAAR,GAA+BA,oBAA/B,C;;;;;;;;;;;;AC9DA;;;;AAIa;;;;;;;;;;;;;;;;;;AACbvd,MAAM,CAACC,cAAP,CAAsBH,OAAtB,EAA+B,YAA/B,EAA6C;AAAEI,OAAK,EAAE;AAAT,CAA7C;;AACA,IAAMC,QAAQ,GAAGC,mBAAO,CAAC,iFAAD,CAAxB;;AACA,IAAMC,gCAAgC,GAAGD,mBAAO,CAAC,kGAAD,CAAhD;;AACA,IAAMswB,QAAQ,GAAGtwB,mBAAO,CAAC,qEAAD,CAAxB;;AACA,SAASqI,MAAT,CAAgBC,MAAhB,EAAwBC,GAAxB,EAA6B;AACzB,MAAID,MAAM,CAACC,GAAD,CAAN,KAAgB,KAAK,CAAzB,EAA4B;AACxBD,UAAM,CAACC,GAAD,CAAN,GAAc,EAAd;AACH;;AACD,SAAOD,MAAM,CAACC,GAAD,CAAb;AACH;;IACK6pB,kB;;;;;AACF,8BAAY3nB,MAAZ,EAAoB;AAAA;;AAAA,6BACVA,MADU,EACFxK,gCAAgC,CAACoyB,kBAAjC,CAAoDxwB,IADlD;AAEnB;;;;2CACsBkQ,W,EAAa;AAChC,UAAIugB,kBAAkB,GAAGjqB,MAAM,CAACA,MAAM,CAAC0J,WAAD,EAAc,cAAd,CAAP,EAAsC,aAAtC,CAA/B;AACAugB,wBAAkB,CAAClnB,mBAAnB,GAAyC,IAAzC;AACAknB,wBAAkB,CAAC/c,WAAnB,GAAiC,IAAjC;AACH;;;+BACUpK,Y,EAAc1B,gB,EAAkB;AAAA,kCACnB,KAAKgnB,eAAL,CAAqBhnB,gBAArB,EAAuC0B,YAAY,CAAConB,mBAApD,CADmB;AAAA;AAAA,UAClC1oB,EADkC;AAAA,UAC9B8H,OAD8B;;AAEvC,UAAI,CAAC9H,EAAD,IAAO,CAAC8H,OAAZ,EAAqB;AACjB;AACH;;AACD,WAAK/I,QAAL,CAAc,KAAKE,QAAnB,EAA6B;AAAEe,UAAE,EAAEA,EAAN;AAAUL,uBAAe,EAAEmI;AAA3B,OAA7B;AACH;;;6CACwBA,O,EAAS;AAC9B,UAAIlH,MAAM,GAAG,KAAKzB,OAAlB;;AACA,UAAIwpB,mBAAkB,GAAG,SAArBA,kBAAqB,CAACzlB,QAAD,EAAWkG,QAAX,EAAqBE,KAArB,EAA+B;AACpD,eAAO1I,MAAM,CAAC7I,WAAP,CAAmB3B,gCAAgC,CAACoyB,kBAAjC,CAAoDxwB,IAAvE,EAA6E4I,MAAM,CAACO,sBAAP,CAA8BsJ,4BAA9B,CAA2DvH,QAA3D,EAAqEkG,QAArE,CAA7E,EAA6JE,KAA7J,EAAoKjF,IAApK,CAAyKzD,MAAM,CAAC4D,sBAAP,CAA8BokB,mBAAvM,EAA4N,UAAC9xB,KAAD,EAAW;AAC1O8J,gBAAM,CAAC6I,gBAAP,CAAwBrT,gCAAgC,CAACoyB,kBAAjC,CAAoDxwB,IAA5E,EAAkFlB,KAAlF;AACA,iBAAO4S,OAAO,CAACC,OAAR,CAAgB,IAAhB,CAAP;AACH,SAHM,CAAP;AAIH,OALD;;AAMA,UAAI1I,UAAU,GAAGL,MAAM,CAACI,aAAP,CAAqBC,UAAtC;AACA,aAAO/K,QAAQ,CAACuK,SAAT,CAAmBooB,2BAAnB,CAA+C/gB,OAAO,CAAClI,gBAAvD,EAAyE;AAC5E+oB,0BAAkB,EAAE,4BAACzlB,QAAD,EAAWkG,QAAX,EAAqBE,KAArB,EAA+B;AAC/C,iBAAOrI,UAAU,CAAC0nB,kBAAX,GACD1nB,UAAU,CAAC0nB,kBAAX,CAA8BzlB,QAA9B,EAAwCkG,QAAxC,EAAkDE,KAAlD,EAAyDqf,mBAAzD,CADC,GAEDA,mBAAkB,CAACzlB,QAAD,EAAWkG,QAAX,EAAqBE,KAArB,CAFxB;AAGH;AAL2E,OAAzE,CAAP;AAOH;;;;EAhC4Bmd,QAAQ,CAACrf,mB;;AAkC1CvR,OAAO,CAAC0yB,kBAAR,GAA6BA,kBAA7B,C;;;;;;;;;;;;ACjDA;;;;AAIa;;;;;;;;;;;;;;;;;;AACbxyB,MAAM,CAACC,cAAP,CAAsBH,OAAtB,EAA+B,YAA/B,EAA6C;AAAEI,OAAK,EAAE;AAAT,CAA7C;;AACA,IAAMC,QAAQ,GAAGC,mBAAO,CAAC,iFAAD,CAAxB;;AACA,IAAMC,gCAAgC,GAAGD,mBAAO,CAAC,kGAAD,CAAhD;;AACA,IAAMswB,QAAQ,GAAGtwB,mBAAO,CAAC,qEAAD,CAAxB;;AACA,SAASqI,MAAT,CAAgBC,MAAhB,EAAwBC,GAAxB,EAA6B;AACzB,MAAID,MAAM,CAACC,GAAD,CAAN,KAAgB,KAAK,CAAzB,EAA4B;AACxBD,UAAM,CAACC,GAAD,CAAN,GAAc,EAAd;AACH;;AACD,SAAOD,MAAM,CAACC,GAAD,CAAb;AACH;;IACKoqB,mB;;;;;AACF,+BAAYloB,MAAZ,EAAoB;AAAA;;AAAA,6BACVA,MADU,EACFxK,gCAAgC,CAAC2yB,mBAAjC,CAAqD/wB,IADnD;AAEnB;;;;2CACsBkQ,W,EAAa;AAChC,UAAIT,UAAU,GAAGjJ,MAAM,CAACA,MAAM,CAAC0J,WAAD,EAAc,cAAd,CAAP,EAAsC,cAAtC,CAAvB;AACAT,gBAAU,CAAClG,mBAAX,GAAiC,IAAjC;AACAkG,gBAAU,CAACuhB,UAAX,GAAwB,IAAxB;AACAvhB,gBAAU,CAACwhB,eAAX,GAA6B,IAA7B;AACH;;;+BACU3nB,Y,EAAc1B,gB,EAAkB;AAAA,kCACnB,KAAKgnB,eAAL,CAAqBhnB,gBAArB,EAAuC0B,YAAY,CAAC4nB,oBAApD,CADmB;AAAA;AAAA,UAClClpB,EADkC;AAAA,UAC9B8H,OAD8B;;AAEvC,UAAI,CAAC9H,EAAD,IAAO,CAAC8H,OAAZ,EAAqB;AACjB;AACH;;AACD,WAAK/I,QAAL,CAAc,KAAKE,QAAnB,EAA6B;AAAEe,UAAE,EAAEA,EAAN;AAAUL,uBAAe,EAAEmI;AAA3B,OAA7B;AACH;;;6CACwBA,O,EAAS;AAAA;;AAC9B,UAAIlH,MAAM,GAAG,KAAKzB,OAAlB;;AACA,UAAIgqB,qBAAoB,GAAG,SAAvBA,oBAAuB,CAACjmB,QAAD,EAAWkmB,CAAX,EAAc9f,KAAd,EAAwB;AAC/C,YAAM0d,aAAa,GAAG;AAClBzmB,sBAAY,EAAEK,MAAM,CAACO,sBAAP,CAA8BgO,wBAA9B,CAAuDjM,QAAvD;AADI,SAAtB;AAGA,eAAOtC,MAAM,CAAC7I,WAAP,CAAmB3B,gCAAgC,CAAC2yB,mBAAjC,CAAqD/wB,IAAxE,EAA8EgvB,aAA9E,EAA6F1d,KAA7F,EAAoGjF,IAApG,CAAyG,KAAI,CAACglB,eAAL,CAAqBlC,IAArB,CAA0B,KAA1B,CAAzG,EAA0I,UAACrwB,KAAD,EAAW;AACxJ8J,gBAAM,CAAC6I,gBAAP,CAAwBrT,gCAAgC,CAAC2yB,mBAAjC,CAAqD/wB,IAA7E,EAAmFlB,KAAnF;AACA,iBAAO4S,OAAO,CAACC,OAAR,CAAgB,IAAhB,CAAP;AACH,SAHM,CAAP;AAIH,OARD;;AASA,UAAI1I,UAAU,GAAGL,MAAM,CAACI,aAAP,CAAqBC,UAAtC;AACA,aAAO/K,QAAQ,CAACuK,SAAT,CAAmB6oB,4BAAnB,CAAgDxhB,OAAO,CAAClI,gBAAxD,EAA0E;AAC7EupB,4BAD6E,gCACxDjmB,QADwD,EAC9CmG,OAD8C,EACrCC,KADqC,EAC9B;AAC3C,iBAAOrI,UAAU,CAACkoB,oBAAX,GACDloB,UAAU,CAACkoB,oBAAX,CAAgCjmB,QAAhC,EAA0CmG,OAA1C,EAAmDC,KAAnD,EAA0D6f,qBAA1D,CADC,GAEDA,qBAAoB,CAACjmB,QAAD,EAAWmG,OAAX,EAAoBC,KAApB,CAF1B;AAGH;AAL4E,OAA1E,CAAP;AAOH;;;uCACkBtD,I,EAAM;AACrB,UAAIA,IAAJ,EAAU;AACN,gBAAQA,IAAR;AACI,eAAK5P,gCAAgC,CAACmzB,gBAAjC,CAAkDC,OAAvD;AACI,mBAAOtzB,QAAQ,CAACqzB,gBAAT,CAA0BC,OAAjC;;AACJ,eAAKpzB,gCAAgC,CAACmzB,gBAAjC,CAAkDE,OAAvD;AACI,mBAAOvzB,QAAQ,CAACqzB,gBAAT,CAA0BE,OAAjC;;AACJ,eAAKrzB,gCAAgC,CAACmzB,gBAAjC,CAAkDG,MAAvD;AACI,mBAAOxzB,QAAQ,CAACqzB,gBAAT,CAA0BG,MAAjC;AANR;AAQH;;AACD,aAAO,KAAK,CAAZ;AACH;;;oCACeC,a,EAAe;AAAA;;AAC3B,UAAIpsB,KAAK,CAACiI,OAAN,CAAcmkB,aAAd,CAAJ,EAAkC;AAC9B,eAAOA,aAAa,CAACzH,GAAd,CAAkB,UAAA0H,CAAC,EAAI;AAC1B,iBAAO,IAAI1zB,QAAQ,CAAC2zB,YAAb,CAA0BD,CAAC,CAACE,SAA5B,EAAuCF,CAAC,CAACG,OAAzC,EAAkD,MAAI,CAACC,kBAAL,CAAwBJ,CAAC,CAAC5jB,IAA1B,CAAlD,CAAP;AACH,SAFM,CAAP;AAGH;;AACD,aAAO,EAAP;AACH;;;;EAzD6BygB,QAAQ,CAACrf,mB;;AA2D3CvR,OAAO,CAACizB,mBAAR,GAA8BA,mBAA9B,C;;;;;;;;;;;;AC1EA;;;;AAIa;;;;;;;;;;;;;;;;;;AACb/yB,MAAM,CAACC,cAAP,CAAsBH,OAAtB,EAA+B,YAA/B,EAA6C;AAAEI,OAAK,EAAE;AAAT,CAA7C;;AACA,IAAMC,QAAQ,GAAGC,mBAAO,CAAC,iFAAD,CAAxB;;AACA,IAAMC,gCAAgC,GAAGD,mBAAO,CAAC,kGAAD,CAAhD;;AACA,IAAMswB,QAAQ,GAAGtwB,mBAAO,CAAC,qEAAD,CAAxB;;AACA,SAASqI,MAAT,CAAgBC,MAAhB,EAAwBC,GAAxB,EAA6B;AACzB,MAAID,MAAM,CAACC,GAAD,CAAN,KAAgB,KAAK,CAAzB,EAA4B;AACxBD,UAAM,CAACC,GAAD,CAAN,GAAc,EAAd;AACH;;AACD,SAAOD,MAAM,CAACC,GAAD,CAAb;AACH;;IACKurB,qB;;;;;AACF,iCAAYrpB,MAAZ,EAAoB;AAAA;;AAAA,6BACVA,MADU,EACFxK,gCAAgC,CAAC8zB,qBAAjC,CAAuDlyB,IADrD;AAEnB;;;;2CACsBkQ,W,EAAa;AAChC,UAAIiiB,qBAAqB,GAAG3rB,MAAM,CAACA,MAAM,CAAC0J,WAAD,EAAc,cAAd,CAAP,EAAsC,gBAAtC,CAAlC;AACAiiB,2BAAqB,CAAC5oB,mBAAtB,GAA4C,IAA5C;AACA4oB,2BAAqB,CAACze,WAAtB,GAAoC,IAApC;AACH;;;+BACUpK,Y,EAAc1B,gB,EAAkB;AAAA,kCACnB,KAAKgnB,eAAL,CAAqBhnB,gBAArB,EAAuC0B,YAAY,CAAC8oB,sBAApD,CADmB;AAAA;AAAA,UAClCpqB,EADkC;AAAA,UAC9B8H,OAD8B;;AAEvC,UAAI,CAAC9H,EAAD,IAAO,CAAC8H,OAAZ,EAAqB;AACjB;AACH;;AACD,WAAK/I,QAAL,CAAc,KAAKE,QAAnB,EAA6B;AAAEe,UAAE,EAAEA,EAAN;AAAUL,uBAAe,EAAEmI;AAA3B,OAA7B;AACH;;;6CACwBA,O,EAAS;AAC9B,UAAIlH,MAAM,GAAG,KAAKzB,OAAlB;;AACA,UAAIkrB,sBAAqB,GAAG,SAAxBA,qBAAwB,CAACnnB,QAAD,EAAWkG,QAAX,EAAqBE,KAArB,EAA+B;AACvD,eAAO1I,MAAM,CAAC7I,WAAP,CAAmB3B,gCAAgC,CAAC8zB,qBAAjC,CAAuDlyB,IAA1E,EAAgF4I,MAAM,CAACO,sBAAP,CAA8BsJ,4BAA9B,CAA2DvH,QAA3D,EAAqEkG,QAArE,CAAhF,EAAgKE,KAAhK,EAAuKjF,IAAvK,CAA4KzD,MAAM,CAAC4D,sBAAP,CAA8BqH,kBAA1M,EAA8N,UAAC/U,KAAD,EAAW;AAC5O8J,gBAAM,CAAC6I,gBAAP,CAAwBrT,gCAAgC,CAAC8zB,qBAAjC,CAAuDlyB,IAA/E,EAAqFlB,KAArF;AACA,iBAAO4S,OAAO,CAACC,OAAR,CAAgB,IAAhB,CAAP;AACH,SAHM,CAAP;AAIH,OALD;;AAMA,UAAI1I,UAAU,GAAGL,MAAM,CAACI,aAAP,CAAqBC,UAAtC;AACA,aAAO/K,QAAQ,CAACuK,SAAT,CAAmB6pB,8BAAnB,CAAkDxiB,OAAO,CAAClI,gBAA1D,EAA4E;AAC/EyqB,6BAAqB,EAAE,+BAACnnB,QAAD,EAAWkG,QAAX,EAAqBE,KAArB,EAA+B;AAClD,iBAAOrI,UAAU,CAACopB,qBAAX,GACDppB,UAAU,CAACopB,qBAAX,CAAiCnnB,QAAjC,EAA2CkG,QAA3C,EAAqDE,KAArD,EAA4D+gB,sBAA5D,CADC,GAEDA,sBAAqB,CAACnnB,QAAD,EAAWkG,QAAX,EAAqBE,KAArB,CAF3B;AAGH;AAL8E,OAA5E,CAAP;AAOH;;;;EAhC+Bmd,QAAQ,CAACrf,mB;;AAkC7CvR,OAAO,CAACo0B,qBAAR,GAAgCA,qBAAhC,C;;;;;;;;;;;;ACjDA;;;;AAIa;;;;;;;;AACb,IAAIM,SAAS,GAAI,QAAQ,KAAKA,SAAd,IAA4B,UAAUC,OAAV,EAAmBC,UAAnB,EAA+BC,CAA/B,EAAkCC,SAAlC,EAA6C;AACrF,SAAO,KAAKD,CAAC,KAAKA,CAAC,GAAGhhB,OAAT,CAAN,EAAyB,UAAUC,OAAV,EAAmB0I,MAAnB,EAA2B;AACvD,aAASuY,SAAT,CAAmB30B,KAAnB,EAA0B;AAAE,UAAI;AAAE40B,YAAI,CAACF,SAAS,CAACG,IAAV,CAAe70B,KAAf,CAAD,CAAJ;AAA8B,OAApC,CAAqC,OAAO80B,CAAP,EAAU;AAAE1Y,cAAM,CAAC0Y,CAAD,CAAN;AAAY;AAAE;;AAC3F,aAASC,QAAT,CAAkB/0B,KAAlB,EAAyB;AAAE,UAAI;AAAE40B,YAAI,CAACF,SAAS,CAAC,OAAD,CAAT,CAAmB10B,KAAnB,CAAD,CAAJ;AAAkC,OAAxC,CAAyC,OAAO80B,CAAP,EAAU;AAAE1Y,cAAM,CAAC0Y,CAAD,CAAN;AAAY;AAAE;;AAC9F,aAASF,IAAT,CAAchzB,MAAd,EAAsB;AAAEA,YAAM,CAAC2kB,IAAP,GAAc7S,OAAO,CAAC9R,MAAM,CAAC5B,KAAR,CAArB,GAAsC,IAAIy0B,CAAJ,CAAM,UAAU/gB,OAAV,EAAmB;AAAEA,eAAO,CAAC9R,MAAM,CAAC5B,KAAR,CAAP;AAAwB,OAAnD,EAAqDoO,IAArD,CAA0DumB,SAA1D,EAAqEI,QAArE,CAAtC;AAAuH;;AAC/IH,QAAI,CAAC,CAACF,SAAS,GAAGA,SAAS,CAACM,KAAV,CAAgBT,OAAhB,EAAyBC,UAAU,IAAI,EAAvC,CAAb,EAAyDK,IAAzD,EAAD,CAAJ;AACH,GALM,CAAP;AAMH,CAPD;;AAQA/0B,MAAM,CAACC,cAAP,CAAsBH,OAAtB,EAA+B,YAA/B,EAA6C;AAAEI,OAAK,EAAE;AAAT,CAA7C;;AACA,IAAMC,QAAQ,GAAGC,mBAAO,CAAC,iFAAD,CAAxB;;AACA,IAAMC,gCAAgC,GAAGD,mBAAO,CAAC,kGAAD,CAAhD;;AACA,IAAMI,EAAE,GAAGJ,mBAAO,CAAC,yEAAD,CAAlB;;IACMkmB,Y;AACF,wBAAYld,OAAZ,EAAqB+rB,MAArB,EAA6B;AAAA;;AAAA;;AACzB,SAAK/rB,OAAL,GAAeA,OAAf;AACA,SAAK+rB,MAAL,GAAcA,MAAd;AACA,SAAKC,SAAL,GAAiB,CAAjB;AACA,SAAKC,WAAL,GAAmB,KAAKjsB,OAAL,CAAa3G,UAAb,CAAwBpC,gCAAgC,CAACi1B,QAAjC,CAA0CC,gBAA1C,CAA2DtzB,IAAnF,EAAyF,KAAKkzB,MAA9F,EAAsG,UAACj1B,KAAD,EAAW;AAChI,cAAQA,KAAK,CAAC+P,IAAd;AACI,aAAK,OAAL;AACI,eAAI,CAACulB,KAAL,CAAWt1B,KAAX;;AACA;;AACJ,aAAK,QAAL;AACI,eAAI,CAACu1B,MAAL,CAAYv1B,KAAZ;;AACA;;AACJ,aAAK,MAAL;AACI,eAAI,CAACumB,IAAL;;AACA;AATR;AAWH,KAZkB,CAAnB;AAaH;;;;0BACKvkB,M,EAAQ;AAAA;;AACV,UAAIwzB,QAAQ,GAAGxzB,MAAM,CAACyzB,WAAP,GAAqBx1B,QAAQ,CAACy1B,gBAAT,CAA0BC,YAA/C,GAA8D11B,QAAQ,CAACy1B,gBAAT,CAA0BE,MAAvG;AACA31B,cAAQ,CAAC2F,MAAT,CAAgBiwB,YAAhB,CAA6B;AAAEL,gBAAQ,EAARA,QAAF;AAAYC,mBAAW,EAAEzzB,MAAM,CAACyzB,WAAhC;AAA6ClO,aAAK,EAAEvlB,MAAM,CAACulB;AAA3D,OAA7B,EAAiG,UAACuO,QAAD,EAAWC,iBAAX;AAAA,eAAiCzB,SAAS,CAAC,MAAD,EAAO,KAAK,CAAZ,EAAe,KAAK,CAApB,wCAAuB;AAAA;;AAAA;AAAA;AAAA;AAAA;AAC9J,uBAAK0B,SAAL,GAAiBF,QAAjB;AACA,uBAAKG,SAAL,GAAiBj0B,MAAM,CAACk0B,UAAP,KAAsB9yB,SAAvC;AACA,uBAAK+yB,kBAAL,GAA0BJ,iBAA1B;;AACA,uBAAKI,kBAAL,CAAwBC,uBAAxB,CAAgD,YAAM;AAClD,0BAAI,CAACltB,OAAL,CAAa7G,gBAAb,CAA8BlC,gCAAgC,CAACi1B,QAAjC,CAA0CiB,kCAA1C,CAA6Et0B,IAA3G,EAAiH;AAAEsR,2BAAK,EAAE,MAAI,CAAC4hB;AAAd,qBAAjH;AACH,mBAFD;;AAGA,uBAAKM,MAAL,CAAYvzB,MAAZ;AAP8J,mDAQvJ,IAAIyR,OAAJ,CAAY,UAACC,OAAD,EAAU0I,MAAV,EAAqB;AACpC,0BAAI,CAAC0D,QAAL,GAAgBpM,OAAhB;AACA,0BAAI,CAACqM,OAAL,GAAe3D,MAAf;AACH,mBAHM,CARuJ;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAvB,EAA1C;AAAA,OAAjG;AAaH;;;2BACMpa,M,EAAQ;AACX,UAAI,KAAKi0B,SAAL,IAAkB31B,EAAE,CAAC2B,MAAH,CAAUD,MAAM,CAACrB,OAAjB,CAAtB,EAAiD;AAC7C,aAAKq1B,SAAL,CAAeT,MAAf,CAAsB;AAAE50B,iBAAO,EAAEqB,MAAM,CAACrB;AAAlB,SAAtB;AACH,OAFD,MAGK,IAAIL,EAAE,CAACmmB,MAAH,CAAUzkB,MAAM,CAACk0B,UAAjB,CAAJ,EAAkC;AACnC,YAAIA,UAAU,GAAGI,IAAI,CAACC,GAAL,CAAS,CAAT,EAAYD,IAAI,CAACE,GAAL,CAASx0B,MAAM,CAACk0B,UAAhB,EAA4B,GAA5B,CAAZ,CAAjB;AACA,YAAIO,KAAK,GAAGH,IAAI,CAACC,GAAL,CAAS,CAAT,EAAYL,UAAU,GAAG,KAAKhB,SAA9B,CAAZ;;AACA,aAAKc,SAAL,CAAeT,MAAf,CAAsB;AAAE50B,iBAAO,EAAEqB,MAAM,CAACrB,OAAlB;AAA2B+1B,mBAAS,EAAED;AAAtC,SAAtB;;AACA,aAAKvB,SAAL,IAAkBuB,KAAlB;AACH;AACJ;;;6BACQ;AACL,UAAI,KAAKtB,WAAT,EAAsB;AAClB,aAAKA,WAAL,CAAiBxwB,OAAjB;;AACA,aAAKwwB,WAAL,GAAmB/xB,SAAnB;AACH;;AACD,UAAI,KAAK2c,OAAT,EAAkB;AACd,aAAKA,OAAL;;AACA,aAAKD,QAAL,GAAgB1c,SAAhB;AACA,aAAK2c,OAAL,GAAe3c,SAAf;AACH;AACJ;;;2BACM;AACH,UAAI,KAAK+xB,WAAT,EAAsB;AAClB,aAAKA,WAAL,CAAiBxwB,OAAjB;;AACA,aAAKwwB,WAAL,GAAmB/xB,SAAnB;AACH;;AACD,UAAI,KAAK0c,QAAT,EAAmB;AACf,aAAKA,QAAL;;AACA,aAAKA,QAAL,GAAgB1c,SAAhB;AACA,aAAK2c,OAAL,GAAe3c,SAAf;AACH;AACJ;;;;;;AAELxD,OAAO,CAACwmB,YAAR,GAAuBA,YAAvB,C;;;;;;;;;;;;ACtFA;;;;AAIa;;;;;;;;;;;;;;AACbtmB,MAAM,CAACC,cAAP,CAAsBH,OAAtB,EAA+B,YAA/B,EAA6C;AAAEI,OAAK,EAAE;AAAT,CAA7C;;AACA,IAAMqjB,IAAI,GAAGnjB,mBAAO,CAAC,iFAAD,CAApB;;IACMy2B,gB;;;;;AACF,4BAAY1d,KAAZ,EAAmB;AAAA;;AAAA,6BACTA,KADS;AAElB;;;EAH0BoK,IAAI,CAAC+M,Q;;AAKpCxwB,OAAO,WAAP,GAAkB+2B,gBAAlB,C;;;;;;;;;;;;ACZA;;;;AAIa;;;;;;;;;;;;;;AACb72B,MAAM,CAACC,cAAP,CAAsBH,OAAtB,EAA+B,YAA/B,EAA6C;AAAEI,OAAK,EAAE;AAAT,CAA7C;;AACA,IAAMqjB,IAAI,GAAGnjB,mBAAO,CAAC,iFAAD,CAApB;;IACM02B,sB;;;;;AACF,kCAAY/H,KAAZ,EAAmB;AAAA;;AAAA,6BACTA,KADS;AAElB;;;EAHgCxL,IAAI,CAACwT,c;;AAK1Cj3B,OAAO,WAAP,GAAkBg3B,sBAAlB,C;;;;;;;;;;;;ACZA;;;;AAIa;;;;;;;;;;AACb92B,MAAM,CAACC,cAAP,CAAsBH,OAAtB,EAA+B,YAA/B,EAA6C;AAAEI,OAAK,EAAE;AAAT,CAA7C;;AACA,IAAMqjB,IAAI,GAAGnjB,mBAAO,CAAC,iFAAD,CAApB;;AACA,IAAM42B,EAAE,GAAG52B,mBAAO,CAAC,kGAAD,CAAlB;;AACA,IAAMI,EAAE,GAAGJ,mBAAO,CAAC,yEAAD,CAAlB;;AACA,IAAMkrB,wBAAwB,GAAGlrB,mBAAO,CAAC,qGAAD,CAAxC;;AACA,IAAMmrB,kBAAkB,GAAGnrB,mBAAO,CAAC,yFAAD,CAAlC;;AACA,IAAMorB,sBAAsB,GAAGprB,mBAAO,CAAC,iGAAD,CAAtC;;AACA,IAAI62B,SAAJ;;AACA,CAAC,UAAUA,SAAV,EAAqB;AAClB,WAASpuB,EAAT,CAAY3I,KAAZ,EAAmB;AACf,QAAI4I,SAAS,GAAG5I,KAAhB;AACA,WAAO4I,SAAS,IAAItI,EAAE,CAAC2B,MAAH,CAAU2G,SAAS,CAACouB,QAApB,CAAb,IAA8C12B,EAAE,CAAC2B,MAAH,CAAU2G,SAAS,CAAC5I,KAApB,CAArD;AACH;;AACD+2B,WAAS,CAACpuB,EAAV,GAAeA,EAAf;AACH,CAND,EAMGouB,SAAS,KAAKA,SAAS,GAAG,EAAjB,CANZ;;AAOA,SAAStU,eAAT,CAAyB8I,YAAzB,EAAuC;AACnC,MAAMC,aAAa,GAAG,SAAhBA,aAAgB,CAACxrB,KAAD;AAAA,WAAWqjB,IAAI,CAACuC,GAAL,CAASqR,KAAT,CAAej3B,KAAf,CAAX;AAAA,GAAtB;;AACA,MAAMyrB,aAAa,GAAGF,YAAY,IAAIC,aAAtC;;AACA,WAAS7a,KAAT,CAAe3Q,KAAf,EAAsB;AAClB,WAAOyrB,aAAa,CAACzrB,KAAD,CAApB;AACH;;AACD,WAASkoB,aAAT,CAAuBJ,WAAvB,EAAoC;AAChC,WAAOA,WAAW,CAACmE,GAAZ,CAAgBkC,YAAhB,CAAP;AACH;;AACD,WAASA,YAAT,CAAsB+I,UAAtB,EAAkC;AAC9B,QAAIt1B,MAAM,GAAG,IAAIyhB,IAAI,CAAC+K,UAAT,CAAoBjV,OAAO,CAAC+d,UAAU,CAACje,KAAZ,CAA3B,EAA+Cie,UAAU,CAACv2B,OAA1D,EAAmE4sB,oBAAoB,CAAC2J,UAAU,CAAC7I,QAAZ,CAAvF,CAAb;;AACA,QAAI/tB,EAAE,CAACmmB,MAAH,CAAUyQ,UAAU,CAAC7T,IAArB,KAA8B/iB,EAAE,CAAC2B,MAAH,CAAUi1B,UAAU,CAAC7T,IAArB,CAAlC,EAA8D;AAC1DzhB,YAAM,CAACyhB,IAAP,GAAc6T,UAAU,CAAC7T,IAAzB;AACH;;AACD,QAAI6T,UAAU,CAAC5I,MAAf,EAAuB;AACnB1sB,YAAM,CAAC0sB,MAAP,GAAgB4I,UAAU,CAAC5I,MAA3B;AACH;;AACD,QAAI4I,UAAU,CAACnN,kBAAf,EAAmC;AAC/BnoB,YAAM,CAACmoB,kBAAP,GAA4BoN,oBAAoB,CAACD,UAAU,CAACnN,kBAAZ,CAAhD;AACH;;AACD,QAAIziB,KAAK,CAACiI,OAAN,CAAc2nB,UAAU,CAACtJ,IAAzB,CAAJ,EAAoC;AAChChsB,YAAM,CAACgsB,IAAP,GAAcD,gBAAgB,CAACuJ,UAAU,CAACtJ,IAAZ,CAA9B;AACH;;AACD,WAAOhsB,MAAP;AACH;;AACD,WAASu1B,oBAAT,CAA8BpN,kBAA9B,EAAkD;AAC9C,WAAOA,kBAAkB,CAACkC,GAAnB,CAAuBmL,8BAAvB,CAAP;AACH;;AACD,WAASA,8BAAT,CAAwCC,WAAxC,EAAqD;AACjD,WAAO,IAAIhU,IAAI,CAACiU,4BAAT,CAAsCC,UAAU,CAACF,WAAW,CAAC7B,QAAb,CAAhD,EAAwE6B,WAAW,CAAC12B,OAApF,CAAP;AACH;;AACD,WAASgtB,gBAAT,CAA0BC,IAA1B,EAAgC;AAC5B,QAAI,CAACA,IAAL,EAAW;AACP,aAAOxqB,SAAP;AACH;;AACD,QAAIxB,MAAM,GAAG,EAAb;;AAJ4B,+CAKZgsB,IALY;AAAA;;AAAA;AAK5B,0DAAsB;AAAA,YAAbC,GAAa;AAClB,YAAIC,SAAS,GAAGC,eAAe,CAACF,GAAD,CAA/B;;AACA,YAAIC,SAAS,KAAK1qB,SAAlB,EAA6B;AACzBxB,gBAAM,CAAC0D,IAAP,CAAYwoB,SAAZ;AACH;AACJ;AAV2B;AAAA;AAAA;AAAA;AAAA;;AAW5B,WAAOlsB,MAAM,CAAC6D,MAAP,GAAgB,CAAhB,GAAoB7D,MAApB,GAA6BwB,SAApC;AACH;;AACD,WAAS2qB,eAAT,CAAyBF,GAAzB,EAA8B;AAC1B,YAAQA,GAAR;AACI,WAAKiJ,EAAE,CAAC9I,aAAH,CAAiBC,WAAtB;AACI,eAAO5K,IAAI,CAAC2K,aAAL,CAAmBC,WAA1B;;AACJ,WAAK6I,EAAE,CAAC9I,aAAH,CAAiBE,UAAtB;AACI,eAAO7K,IAAI,CAAC2K,aAAL,CAAmBE,UAA1B;;AACJ;AACI,eAAO9qB,SAAP;AANR;AAQH;;AACD,WAASoY,UAAT,CAAoBxb,KAApB,EAA2B;AACvB,QAAI,CAACA,KAAL,EAAY;AACR,aAAOoD,SAAP;AACH;;AACD,WAAO,IAAIigB,IAAI,CAACmU,QAAT,CAAkBx3B,KAAK,CAACksB,IAAxB,EAA8BlsB,KAAK,CAACmsB,SAApC,CAAP;AACH;;AACD,WAAShT,OAAT,CAAiBnZ,KAAjB,EAAwB;AACpB,QAAI,CAACA,KAAL,EAAY;AACR,aAAOoD,SAAP;AACH;;AACD,WAAO,IAAIigB,IAAI,CAAC9G,KAAT,CAAef,UAAU,CAACxb,KAAK,CAAC0oB,KAAP,CAAzB,EAAwClN,UAAU,CAACxb,KAAK,CAACosB,GAAP,CAAlD,CAAP;AACH;;AACD,WAASmB,oBAAT,CAA8BvtB,KAA9B,EAAqC;AACjC,QAAIA,KAAK,KAAK,KAAK,CAAf,IAAoBA,KAAK,KAAK,IAAlC,EAAwC;AACpC,aAAOqjB,IAAI,CAACmK,kBAAL,CAAwBnc,KAA/B;AACH;;AACD,YAAQrR,KAAR;AACI,WAAK82B,EAAE,CAACtJ,kBAAH,CAAsBnc,KAA3B;AACI,eAAOgS,IAAI,CAACmK,kBAAL,CAAwBnc,KAA/B;;AACJ,WAAKylB,EAAE,CAACtJ,kBAAH,CAAsBhJ,OAA3B;AACI,eAAOnB,IAAI,CAACmK,kBAAL,CAAwBhJ,OAA/B;;AACJ,WAAKsS,EAAE,CAACtJ,kBAAH,CAAsBC,WAA3B;AACI,eAAOpK,IAAI,CAACmK,kBAAL,CAAwBC,WAA/B;;AACJ,WAAKqJ,EAAE,CAACtJ,kBAAH,CAAsBE,IAA3B;AACI,eAAOrK,IAAI,CAACmK,kBAAL,CAAwBE,IAA/B;AARR;;AAUA,WAAOrK,IAAI,CAACmK,kBAAL,CAAwBnc,KAA/B;AACH;;AACD,WAASomB,cAAT,CAAwBz3B,KAAxB,EAA+B;AAC3B,QAAIM,EAAE,CAAC2B,MAAH,CAAUjC,KAAV,CAAJ,EAAsB;AAClB,aAAO,IAAIqjB,IAAI,CAACqU,cAAT,CAAwB13B,KAAxB,CAAP;AACH,KAFD,MAGK,IAAI+2B,SAAS,CAACpuB,EAAV,CAAa3I,KAAb,CAAJ,EAAyB;AAC1B,UAAI4B,MAAM,GAAG,IAAIyhB,IAAI,CAACqU,cAAT,EAAb;AACA,aAAO91B,MAAM,CAAC+1B,eAAP,CAAuB33B,KAAK,CAACA,KAA7B,EAAoCA,KAAK,CAACg3B,QAA1C,CAAP;AACH,KAHI,MAIA,IAAI1vB,KAAK,CAACiI,OAAN,CAAcvP,KAAd,CAAJ,EAA0B;AAC3B,UAAI4B,OAAM,GAAG,EAAb;;AAD2B,kDAEP5B,KAFO;AAAA;;AAAA;AAE3B,+DAA2B;AAAA,cAAlBoX,OAAkB;AACvB,cAAIxD,IAAI,GAAG,IAAIyP,IAAI,CAACqU,cAAT,EAAX;;AACA,cAAIX,SAAS,CAACpuB,EAAV,CAAayO,OAAb,CAAJ,EAA2B;AACvBxD,gBAAI,CAAC+jB,eAAL,CAAqBvgB,OAAO,CAACpX,KAA7B,EAAoCoX,OAAO,CAAC4f,QAA5C;AACH,WAFD,MAGK;AACDpjB,gBAAI,CAACgkB,cAAL,CAAoBxgB,OAApB;AACH;;AACDxV,iBAAM,CAAC0D,IAAP,CAAYsO,IAAZ;AACH;AAX0B;AAAA;AAAA;AAAA;AAAA;;AAY3B,aAAOhS,OAAP;AACH,KAbI,MAcA;AACD,UAAIA,QAAJ;;AACA,cAAQ5B,KAAK,CAAC+P,IAAd;AACI,aAAK+mB,EAAE,CAACtkB,UAAH,CAAcC,QAAnB;AACI,iBAAO,IAAI4Q,IAAI,CAACqU,cAAT,CAAwB13B,KAAK,CAACA,KAA9B,CAAP;;AACJ,aAAK82B,EAAE,CAACtkB,UAAH,CAAcE,SAAnB;AACI9Q,kBAAM,GAAG,IAAIyhB,IAAI,CAACqU,cAAT,EAAT;;AACA91B,kBAAM,CAACi2B,UAAP,CAAkB73B,KAAK,CAACA,KAAxB;;AACA,iBAAO4B,QAAP;;AACJ;AACIA,kBAAM,GAAG,IAAIyhB,IAAI,CAACqU,cAAT,EAAT;;AACA91B,kBAAM,CAACi2B,UAAP,yDAAmE73B,KAAK,CAAC+P,IAAzE;;AACA,iBAAOnO,QAAP;AAVR;AAYH;AACJ;;AACD,WAAS4sB,eAAT,CAAyBxuB,KAAzB,EAAgC;AAC5B,QAAIM,EAAE,CAAC2B,MAAH,CAAUjC,KAAV,CAAJ,EAAsB;AAClB,aAAOA,KAAP;AACH,KAFD,MAGK;AACD,cAAQA,KAAK,CAAC+P,IAAd;AACI,aAAK+mB,EAAE,CAACtkB,UAAH,CAAcC,QAAnB;AACI,iBAAO,IAAI4Q,IAAI,CAACqU,cAAT,CAAwB13B,KAAK,CAACA,KAA9B,CAAP;;AACJ,aAAK82B,EAAE,CAACtkB,UAAH,CAAcE,SAAnB;AACI,iBAAO1S,KAAK,CAACA,KAAb;;AACJ;AACI,yEAAwDA,KAAK,CAAC+P,IAA9D;AANR;AAQH;AACJ;;AACD,WAAS0E,OAAT,CAAiBqjB,KAAjB,EAAwB;AACpB,QAAI,CAACA,KAAL,EAAY;AACR,aAAO10B,SAAP;AACH;;AACD,WAAO,IAAIigB,IAAI,CAAC0U,KAAT,CAAeN,cAAc,CAACK,KAAK,CAACE,QAAP,CAA7B,EAA+C7e,OAAO,CAAC2e,KAAK,CAAC7e,KAAP,CAAtD,CAAP;AACH;;AACD,WAAS1F,kBAAT,CAA4B3R,MAA5B,EAAoC;AAChC,QAAI,CAACA,MAAL,EAAa;AACT,aAAOwB,SAAP;AACH;;AACD,QAAIkE,KAAK,CAACiI,OAAN,CAAc3N,MAAd,CAAJ,EAA2B;AACvB,UAAI2sB,KAAK,GAAG3sB,MAAZ;AACA,aAAO2sB,KAAK,CAACtC,GAAN,CAAUnY,gBAAV,CAAP;AACH;;AACD,QAAImkB,IAAI,GAAGr2B,MAAX;AACA,WAAO,IAAIyhB,IAAI,CAAC6U,cAAT,CAAwBD,IAAI,CAAC1J,KAAL,CAAWtC,GAAX,CAAenY,gBAAf,CAAxB,EAA0DmkB,IAAI,CAACE,YAA/D,CAAP;AACH;;AACD,WAASxJ,oBAAT,CAA8B3uB,KAA9B,EAAqC;AACjC;AACA,QAAI82B,EAAE,CAAC/uB,kBAAH,CAAsBhF,IAAtB,IAA8B/C,KAA9B,IAAuCA,KAAK,IAAI82B,EAAE,CAAC/uB,kBAAH,CAAsBF,aAA1E,EAAyF;AACrF,aAAO,CAAC7H,KAAK,GAAG,CAAT,EAAYoD,SAAZ,CAAP;AACH;;AACD;AACA,WAAO,CAACigB,IAAI,CAACtb,kBAAL,CAAwBhF,IAAzB,EAA+B/C,KAA/B,CAAP;AACH;;AACD,WAAS8T,gBAAT,CAA0BF,IAA1B,EAAgC;AAC5B,QAAIhS,MAAM,GAAG,IAAIwpB,wBAAwB,WAA5B,CAAqCxX,IAAI,CAACib,KAA1C,CAAb;;AACA,QAAIjb,IAAI,CAACmb,MAAT,EAAiB;AACbntB,YAAM,CAACmtB,MAAP,GAAgBnb,IAAI,CAACmb,MAArB;AACH;;AACD,QAAInb,IAAI,CAAC8a,aAAT,EAAwB;AACpB9sB,YAAM,CAAC8sB,aAAP,GAAuBF,eAAe,CAAC5a,IAAI,CAAC8a,aAAN,CAAtC;AACA9sB,YAAM,CAAC2Q,mBAAP,GAA6BjS,EAAE,CAAC2B,MAAH,CAAU2R,IAAI,CAAC8a,aAAf,IAAgC,SAAhC,GAA4C9a,IAAI,CAAC8a,aAAL,CAAmB3e,IAA5F;AACH;;AACD;;AACA,QAAI6D,IAAI,CAACob,UAAT,EAAqB;AACjBptB,YAAM,CAACotB,UAAP,GAAoBpb,IAAI,CAACob,UAAzB;AACH;;AACD,QAAIY,UAAU,GAAGwI,sBAAsB,CAACxkB,IAAD,CAAvC;;AACA,QAAIgc,UAAJ,EAAgB;AACZhuB,YAAM,CAACguB,UAAP,GAAoBA,UAAU,CAAChE,IAA/B;AACAhqB,YAAM,CAACqX,KAAP,GAAe2W,UAAU,CAAC3W,KAA1B;AACArX,YAAM,CAACmuB,QAAP,GAAkBH,UAAU,CAACG,QAA7B;AACH;;AACD,QAAIzvB,EAAE,CAACmmB,MAAH,CAAU7S,IAAI,CAAC7D,IAAf,CAAJ,EAA0B;AAAA,kCACK4e,oBAAoB,CAAC/a,IAAI,CAAC7D,IAAN,CADzB;AAAA;AAAA,UACjBsoB,QADiB;AAAA,UACPzJ,QADO;;AAEtBhtB,YAAM,CAACmO,IAAP,GAAcsoB,QAAd;;AACA,UAAIzJ,QAAJ,EAAc;AACVhtB,cAAM,CAACstB,gBAAP,GAA0BN,QAA1B;AACH;AACJ;;AACD,QAAIhb,IAAI,CAACub,QAAT,EAAmB;AACfvtB,YAAM,CAACutB,QAAP,GAAkBvb,IAAI,CAACub,QAAvB;AACH;;AACD,QAAIvb,IAAI,CAACwb,mBAAT,EAA8B;AAC1BxtB,YAAM,CAACwtB,mBAAP,GAA6B5gB,WAAW,CAACoF,IAAI,CAACwb,mBAAN,CAAxC;AACH;;AACD,QAAI9uB,EAAE,CAACg4B,WAAH,CAAe1kB,IAAI,CAACyb,gBAApB,CAAJ,EAA2C;AACvCztB,YAAM,CAACytB,gBAAP,GAA0Bzb,IAAI,CAACyb,gBAAL,CAAsBC,KAAtB,EAA1B;AACH;;AACD,QAAI1b,IAAI,CAACuL,OAAT,EAAkB;AACdvd,YAAM,CAACud,OAAP,GAAiB7F,SAAS,CAAC1F,IAAI,CAACuL,OAAN,CAA1B;AACH;;AACD,QAAIvL,IAAI,CAAC4b,UAAL,KAAoB,IAApB,IAA4B5b,IAAI,CAAC4b,UAAL,KAAoB,KAApD,EAA2D;AACvD5tB,YAAM,CAAC4tB,UAAP,GAAoB5b,IAAI,CAAC4b,UAAzB;AACH;;AACD,QAAI5b,IAAI,CAAC2b,SAAL,KAAmB,IAAnB,IAA2B3b,IAAI,CAAC2b,SAAL,KAAmB,KAAlD,EAAyD;AACrD3tB,YAAM,CAAC2tB,SAAP,GAAmB3b,IAAI,CAAC2b,SAAxB;AACH;;AACD,QAAI3b,IAAI,CAAClS,IAAL,KAAc,KAAK,CAAvB,EAA0B;AACtBE,YAAM,CAACF,IAAP,GAAckS,IAAI,CAAClS,IAAnB;AACH;;AACD,WAAOE,MAAP;AACH;;AACD,WAASw2B,sBAAT,CAAgCxkB,IAAhC,EAAsC;AAClC,QAAIA,IAAI,CAAC8b,QAAT,EAAmB;AACf,UAAI9b,IAAI,CAACkc,gBAAL,KAA0BgH,EAAE,CAACrH,gBAAH,CAAoBtnB,OAAlD,EAA2D;AACvD,eAAO;AAAEyjB,cAAI,EAAE,IAAIvI,IAAI,CAACwM,aAAT,CAAuBjc,IAAI,CAAC8b,QAAL,CAAcC,OAArC,CAAR;AAAuD1W,eAAK,EAAEE,OAAO,CAACvF,IAAI,CAAC8b,QAAL,CAAczW,KAAf,CAArE;AAA4F8W,kBAAQ,EAAE;AAAtG,SAAP;AACH,OAFD,MAGK;AACD,eAAO;AAAEnE,cAAI,EAAEhY,IAAI,CAAC8b,QAAL,CAAcC,OAAtB;AAA+B1W,eAAK,EAAEE,OAAO,CAACvF,IAAI,CAAC8b,QAAL,CAAczW,KAAf,CAA7C;AAAoE8W,kBAAQ,EAAE;AAA9E,SAAP;AACH;AACJ,KAPD,MAQK,IAAInc,IAAI,CAACgc,UAAT,EAAqB;AACtB,UAAIhc,IAAI,CAACkc,gBAAL,KAA0BgH,EAAE,CAACrH,gBAAH,CAAoBtnB,OAAlD,EAA2D;AACvD,eAAO;AAAEyjB,cAAI,EAAE,IAAIvI,IAAI,CAACwM,aAAT,CAAuBjc,IAAI,CAACgc,UAA5B,CAAR;AAAiDG,kBAAQ,EAAE;AAA3D,SAAP;AACH,OAFD,MAGK;AACD,eAAO;AAAEnE,cAAI,EAAEhY,IAAI,CAACgc,UAAb;AAAyBG,kBAAQ,EAAE;AAAnC,SAAP;AACH;AACJ,KAPI,MAQA;AACD,aAAO3sB,SAAP;AACH;AACJ;;AACD,WAAS4sB,UAAT,CAAoB1F,IAApB,EAA0B;AACtB,QAAI,CAACA,IAAL,EAAW;AACP,aAAOlnB,SAAP;AACH;;AACD,WAAO,IAAIigB,IAAI,CAACkV,QAAT,CAAkBpf,OAAO,CAACmR,IAAI,CAACrR,KAAN,CAAzB,EAAuCqR,IAAI,CAACqF,OAA5C,CAAP;AACH;;AACD,WAASnhB,WAAT,CAAqB+f,KAArB,EAA4B;AACxB,QAAI,CAACA,KAAL,EAAY;AACR,aAAOnrB,SAAP;AACH;;AACD,WAAOmrB,KAAK,CAACtC,GAAN,CAAU+D,UAAV,CAAP;AACH;;AACD,WAAS7a,eAAT,CAAyBvB,IAAzB,EAA+B;AAC3B,QAAI,CAACA,IAAL,EAAW;AACP,aAAOxQ,SAAP;AACH;;AACD,QAAIxB,MAAM,GAAG,IAAIyhB,IAAI,CAACmV,aAAT,EAAb;;AACA,QAAIl4B,EAAE,CAACmmB,MAAH,CAAU7S,IAAI,CAAC6kB,eAAf,CAAJ,EAAqC;AACjC72B,YAAM,CAAC62B,eAAP,GAAyB7kB,IAAI,CAAC6kB,eAA9B;AACH,KAFD,MAGK;AACD;AACA72B,YAAM,CAAC62B,eAAP,GAAyB,CAAzB;AACH;;AACD,QAAIn4B,EAAE,CAACmmB,MAAH,CAAU7S,IAAI,CAAC8kB,eAAf,CAAJ,EAAqC;AACjC92B,YAAM,CAAC82B,eAAP,GAAyB9kB,IAAI,CAAC8kB,eAA9B;AACH,KAFD,MAGK;AACD;AACA92B,YAAM,CAAC82B,eAAP,GAAyB,CAAzB;AACH;;AACD,QAAI9kB,IAAI,CAAC+kB,UAAT,EAAqB;AACjB/2B,YAAM,CAAC+2B,UAAP,GAAoBC,uBAAuB,CAAChlB,IAAI,CAAC+kB,UAAN,CAA3C;AACH;;AACD,WAAO/2B,MAAP;AACH;;AACD,WAASg3B,uBAAT,CAAiCrK,KAAjC,EAAwC;AACpC,WAAOA,KAAK,CAACtC,GAAN,CAAU4M,sBAAV,CAAP;AACH;;AACD,WAASA,sBAAT,CAAgCjlB,IAAhC,EAAsC;AAClC,QAAIhS,MAAM,GAAG,IAAIyhB,IAAI,CAACyV,oBAAT,CAA8BllB,IAAI,CAACib,KAAnC,CAAb;;AACA,QAAIjb,IAAI,CAAC8a,aAAT,EAAwB;AACpB9sB,YAAM,CAAC8sB,aAAP,GAAuBF,eAAe,CAAC5a,IAAI,CAAC8a,aAAN,CAAtC;AACH;;AACD,QAAI9a,IAAI,CAACmlB,UAAT,EAAqB;AACjBn3B,YAAM,CAACm3B,UAAP,GAAoBC,uBAAuB,CAACplB,IAAI,CAACmlB,UAAN,CAA3C;AACH;;AACD,WAAOn3B,MAAP;AACH;;AACD,WAASo3B,uBAAT,CAAiCplB,IAAjC,EAAuC;AACnC,WAAOA,IAAI,CAACqY,GAAL,CAASgN,sBAAT,CAAP;AACH;;AACD,WAASA,sBAAT,CAAgCrlB,IAAhC,EAAsC;AAClC,QAAIhS,MAAM,GAAG,IAAIyhB,IAAI,CAAC6V,oBAAT,CAA8BtlB,IAAI,CAACib,KAAnC,CAAb;;AACA,QAAIjb,IAAI,CAAC8a,aAAT,EAAwB;AACpB9sB,YAAM,CAAC8sB,aAAP,GAAuBF,eAAe,CAAC5a,IAAI,CAAC8a,aAAN,CAAtC;AACH;;AACD;AACA,WAAO9sB,MAAP;AACH;;AACD,WAAS21B,UAAT,CAAoB3jB,IAApB,EAA0B;AACtB,QAAI,CAACA,IAAL,EAAW;AACP,aAAOxQ,SAAP;AACH;;AACD,WAAO,IAAIigB,IAAI,CAAC8V,QAAT,CAAkB1N,aAAa,CAAC7X,IAAI,CAAC/H,GAAN,CAA/B,EAA2CsN,OAAO,CAACvF,IAAI,CAACqF,KAAN,CAAlD,CAAP;AACH;;AACD,WAAS0Z,mBAAT,CAA6B/e,IAA7B,EAAmC;AAC/B,QAAI,CAACA,IAAL,EAAW;AACP,aAAOxQ,SAAP;AACH;;AACD,WAAOg2B,gBAAgB,CAACxlB,IAAD,CAAvB;AACH;;AACD,WAASgC,kBAAT,CAA4BhC,IAA5B,EAAkC;AAC9B,QAAI,CAACA,IAAL,EAAW;AACP,aAAOxQ,SAAP;AACH;;AACD,WAAOg2B,gBAAgB,CAACxlB,IAAD,CAAvB;AACH;;AACD,WAASylB,cAAT,CAAwBzlB,IAAxB,EAA8B;AAC1B,QAAI,CAACA,IAAL,EAAW;AACP,aAAOxQ,SAAP;AACH;;AACD,QAAIxB,MAAM,GAAG;AACT03B,eAAS,EAAE7N,aAAa,CAAC7X,IAAI,CAAC0lB,SAAN,CADf;AAETC,iBAAW,EAAEpgB,OAAO,CAACvF,IAAI,CAAC4lB,oBAAN,CAFX;AAGTC,0BAAoB,EAAEtgB,OAAO,CAACvF,IAAI,CAAC6lB,oBAAN,CAHpB;AAITD,0BAAoB,EAAErgB,OAAO,CAACvF,IAAI,CAAC4lB,oBAAN;AAJpB,KAAb;;AAMA,QAAI,CAAC53B,MAAM,CAAC43B,oBAAZ,EAAkC;AAC9B,YAAM,IAAInoB,KAAJ,sDAAN;AACH;;AACD,WAAOzP,MAAP;AACH;;AACD,WAASw3B,gBAAT,CAA0BxlB,IAA1B,EAAgC;AAC5B,QAAI,CAACA,IAAL,EAAW;AACP,aAAOxQ,SAAP;AACH;;AACD,QAAI9C,EAAE,CAAC0oB,KAAH,CAASpV,IAAT,CAAJ,EAAoB;AAChB,UAAIA,IAAI,CAACnO,MAAL,KAAgB,CAApB,EAAuB;AACnB,eAAO,EAAP;AACH,OAFD,MAGK,IAAIqxB,EAAE,CAAC4C,YAAH,CAAgB/wB,EAAhB,CAAmBiL,IAAI,CAAC,CAAD,CAAvB,CAAJ,EAAiC;AAClC,YAAI+lB,KAAK,GAAG/lB,IAAZ;AACA,eAAO+lB,KAAK,CAAC1N,GAAN,CAAU,UAAChP,IAAD;AAAA,iBAAUoc,cAAc,CAACpc,IAAD,CAAxB;AAAA,SAAV,CAAP;AACH,OAHI,MAIA;AACD,YAAI2c,SAAS,GAAGhmB,IAAhB;AACA,eAAOgmB,SAAS,CAAC3N,GAAV,CAAc,UAACuJ,QAAD;AAAA,iBAAc+B,UAAU,CAAC/B,QAAD,CAAxB;AAAA,SAAd,CAAP;AACH;AACJ,KAZD,MAaK,IAAIsB,EAAE,CAAC4C,YAAH,CAAgB/wB,EAAhB,CAAmBiL,IAAnB,CAAJ,EAA8B;AAC/B,aAAO,CAACylB,cAAc,CAACzlB,IAAD,CAAf,CAAP;AACH,KAFI,MAGA;AACD,aAAO2jB,UAAU,CAAC3jB,IAAD,CAAjB;AACH;AACJ;;AACD,WAASuC,YAAT,CAAsBnM,MAAtB,EAA8B;AAC1B,QAAI,CAACA,MAAL,EAAa;AACT,aAAO5G,SAAP;AACH;;AACD,WAAO4G,MAAM,CAACiiB,GAAP,CAAW,UAAAuJ,QAAQ;AAAA,aAAI+B,UAAU,CAAC/B,QAAD,CAAd;AAAA,KAAnB,CAAP;AACH;;AACD,WAAS9e,oBAAT,CAA8B1M,MAA9B,EAAsC;AAClC,QAAI,CAACA,MAAL,EAAa;AACT,aAAO5G,SAAP;AACH;;AACD,WAAO4G,MAAM,CAACiiB,GAAP,CAAW4N,mBAAX,CAAP;AACH;;AACD,WAASA,mBAAT,CAA6BjmB,IAA7B,EAAmC;AAC/B,QAAIhS,MAAM,GAAG,IAAIyhB,IAAI,CAACyW,iBAAT,CAA2B3gB,OAAO,CAACvF,IAAI,CAACqF,KAAN,CAAlC,CAAb;;AACA,QAAI3Y,EAAE,CAACmmB,MAAH,CAAU7S,IAAI,CAAC7D,IAAf,CAAJ,EAA0B;AACtBnO,YAAM,CAACmO,IAAP,GAAcgqB,uBAAuB,CAACnmB,IAAI,CAAC7D,IAAN,CAArC;AACH;;AACD,WAAOnO,MAAP;AACH;;AACD,WAASm4B,uBAAT,CAAiCnmB,IAAjC,EAAuC;AACnC,YAAQA,IAAR;AACI,WAAKkjB,EAAE,CAACkD,qBAAH,CAAyBj3B,IAA9B;AACI,eAAOsgB,IAAI,CAAC2W,qBAAL,CAA2Bj3B,IAAlC;;AACJ,WAAK+zB,EAAE,CAACkD,qBAAH,CAAyBC,IAA9B;AACI,eAAO5W,IAAI,CAAC2W,qBAAL,CAA2BC,IAAlC;;AACJ,WAAKnD,EAAE,CAACkD,qBAAH,CAAyBE,KAA9B;AACI,eAAO7W,IAAI,CAAC2W,qBAAL,CAA2BE,KAAlC;AANR;;AAQA,WAAO7W,IAAI,CAAC2W,qBAAL,CAA2Bj3B,IAAlC;AACH;;AACD,WAASwU,oBAAT,CAA8BvN,MAA9B,EAAsC6B,GAAtC,EAA2C;AACvC,QAAI,CAAC7B,MAAL,EAAa;AACT,aAAO5G,SAAP;AACH;;AACD,WAAO4G,MAAM,CAACiiB,GAAP,CAAW,UAAAoL,WAAW;AAAA,aAAI8C,mBAAmB,CAAC9C,WAAD,EAAcxrB,GAAd,CAAvB;AAAA,KAAtB,CAAP;AACH;;AACD,WAASuuB,YAAT,CAAsBxmB,IAAtB,EAA4B;AACxB,QAAIA,IAAI,IAAIkjB,EAAE,CAAC1wB,UAAH,CAAcyB,aAA1B,EAAyC;AACrC;AACA,aAAO+L,IAAI,GAAG,CAAd;AACH;;AACD,WAAOyP,IAAI,CAACjd,UAAL,CAAgBO,QAAvB;AACH;;AACD,WAASwzB,mBAAT,CAA6BvmB,IAA7B,EAAmC/H,GAAnC,EAAwC;AACpC;AACA,QAAIjK,MAAM,GAAG,IAAIyhB,IAAI,CAACgX,iBAAT,CAA2BzmB,IAAI,CAAC7O,IAAhC,EAAsCq1B,YAAY,CAACxmB,IAAI,CAAC7D,IAAN,CAAlD,EAA+DoJ,OAAO,CAACvF,IAAI,CAAC4hB,QAAL,CAAcvc,KAAf,CAAtE,EAA6FrF,IAAI,CAAC4hB,QAAL,CAAc3pB,GAAd,GAAoB4f,aAAa,CAAC7X,IAAI,CAAC4hB,QAAL,CAAc3pB,GAAf,CAAjC,GAAuDA,GAApJ,CAAb;;AACA,QAAI+H,IAAI,CAAC0mB,aAAT,EAAwB;AACpB14B,YAAM,CAAC04B,aAAP,GAAuB1mB,IAAI,CAAC0mB,aAA5B;AACH;;AACD,WAAO14B,MAAP;AACH;;AACD,WAAS0V,iBAAT,CAA2BtN,MAA3B,EAAmC;AAC/B,QAAIA,MAAM,KAAK,KAAK,CAAhB,IAAqBA,MAAM,KAAK,IAApC,EAA0C;AACtC,aAAO5G,SAAP;AACH;;AACD,WAAO4G,MAAM,CAACiiB,GAAP,CAAWsO,gBAAX,CAAP;AACH;;AACD,WAASA,gBAAT,CAA0Bv6B,KAA1B,EAAiC;AAC7B,QAAI4B,MAAM,GAAG,IAAIyhB,IAAI,CAAChM,cAAT,CAAwBrX,KAAK,CAAC+E,IAA9B,EAAoC/E,KAAK,CAAC+uB,MAAN,IAAgB,EAApD,EAAwDqL,YAAY,CAACp6B,KAAK,CAAC+P,IAAP,CAApE,EAAkFoJ,OAAO,CAACnZ,KAAK,CAACiZ,KAAP,CAAzF,EAAwGE,OAAO,CAACnZ,KAAK,CAACw6B,cAAP,CAA/G,CAAb;;AACA,QAAIx6B,KAAK,CAACy6B,QAAN,KAAmB,KAAK,CAAxB,IAA6Bz6B,KAAK,CAACy6B,QAAN,CAAeh1B,MAAf,GAAwB,CAAzD,EAA4D;AACxD,UAAIg1B,QAAQ,GAAG,EAAf;;AADwD,kDAEtCz6B,KAAK,CAACy6B,QAFgC;AAAA;;AAAA;AAExD,+DAAkC;AAAA,cAAzBC,KAAyB;AAC9BD,kBAAQ,CAACn1B,IAAT,CAAci1B,gBAAgB,CAACG,KAAD,CAA9B;AACH;AAJuD;AAAA;AAAA;AAAA;AAAA;;AAKxD94B,YAAM,CAAC64B,QAAP,GAAkBA,QAAlB;AACH;;AACD,WAAO74B,MAAP;AACH;;AACD,WAAS0X,SAAT,CAAmB1F,IAAnB,EAAyB;AACrB,QAAIhS,MAAM,GAAG;AAAE2lB,WAAK,EAAE3T,IAAI,CAAC2T,KAAd;AAAqBpI,aAAO,EAAEvL,IAAI,CAACuL;AAAnC,KAAb;;AACA,QAAIvL,IAAI,CAAC0L,SAAT,EAAoB;AAChB1d,YAAM,CAAC0d,SAAP,GAAmB1L,IAAI,CAAC0L,SAAxB;AACH;;AACD,WAAO1d,MAAP;AACH;;AACD,WAAS+4B,UAAT,CAAoBpM,KAApB,EAA2B;AACvB,QAAI,CAACA,KAAL,EAAY;AACR,aAAOnrB,SAAP;AACH;;AACD,WAAOmrB,KAAK,CAACtC,GAAN,CAAU3S,SAAV,CAAP;AACH;;AACD,MAAMshB,WAAW,GAAG,IAAInxB,GAAJ,EAApB;AACAmxB,aAAW,CAAC9wB,GAAZ,CAAgBgtB,EAAE,CAACxe,cAAH,CAAkBC,KAAlC,EAAyC8K,IAAI,CAAC/K,cAAL,CAAoBC,KAA7D;AACAqiB,aAAW,CAAC9wB,GAAZ,CAAgBgtB,EAAE,CAACxe,cAAH,CAAkBE,QAAlC,EAA4C6K,IAAI,CAAC/K,cAAL,CAAoBE,QAAhE;AACAoiB,aAAW,CAAC9wB,GAAZ,CAAgBgtB,EAAE,CAACxe,cAAH,CAAkBG,QAAlC,EAA4C4K,IAAI,CAAC/K,cAAL,CAAoBG,QAAhE;AACAmiB,aAAW,CAAC9wB,GAAZ,CAAgBgtB,EAAE,CAACxe,cAAH,CAAkBI,eAAlC,EAAmD2K,IAAI,CAAC/K,cAAL,CAAoBI,eAAvE;AACAkiB,aAAW,CAAC9wB,GAAZ,CAAgBgtB,EAAE,CAACxe,cAAH,CAAkBK,cAAlC,EAAkD0K,IAAI,CAAC/K,cAAL,CAAoBK,cAAtE;AACAiiB,aAAW,CAAC9wB,GAAZ,CAAgBgtB,EAAE,CAACxe,cAAH,CAAkBM,eAAlC,EAAmDyK,IAAI,CAAC/K,cAAL,CAAoBM,eAAvE;AACAgiB,aAAW,CAAC9wB,GAAZ,CAAgBgtB,EAAE,CAACxe,cAAH,CAAkBO,MAAlC,EAA0CwK,IAAI,CAAC/K,cAAL,CAAoBO,MAA9D;AACA+hB,aAAW,CAAC9wB,GAAZ,CAAgBgtB,EAAE,CAACxe,cAAH,CAAkBQ,qBAAlC,EAAyDuK,IAAI,CAAC/K,cAAL,CAAoBQ,qBAA7E;;AACA,WAAS+hB,gBAAT,CAA0BjnB,IAA1B,EAAgC;AAC5B,QAAIA,IAAI,KAAK,KAAK,CAAd,IAAmBA,IAAI,KAAK,IAAhC,EAAsC;AAClC,aAAOxQ,SAAP;AACH;;AACD,QAAIxB,MAAM,GAAGg5B,WAAW,CAACxuB,GAAZ,CAAgBwH,IAAhB,CAAb;;AACA,QAAIhS,MAAJ,EAAY;AACR,aAAOA,MAAP;AACH;;AACD,QAAIk5B,KAAK,GAAGlnB,IAAI,CAACkL,KAAL,CAAW,GAAX,CAAZ;AACAld,UAAM,GAAGyhB,IAAI,CAAC/K,cAAL,CAAoBC,KAA7B;;AAT4B,gDAUXuiB,KAVW;AAAA;;AAAA;AAU5B,6DAAwB;AAAA,YAAf3U,IAAe;AACpBvkB,cAAM,GAAGA,MAAM,CAACoiB,MAAP,CAAcmC,IAAd,CAAT;AACH;AAZ2B;AAAA;AAAA;AAAA;AAAA;;AAa5B,WAAOvkB,MAAP;AACH;;AACD,WAAS+X,iBAAT,CAA2B4U,KAA3B,EAAkC;AAC9B,QAAIA,KAAK,KAAK,KAAK,CAAf,IAAoBA,KAAK,KAAK,IAAlC,EAAwC;AACpC,aAAOnrB,SAAP;AACH;;AACD,WAAOmrB,KAAK,CAACtC,GAAN,CAAU,UAAAlc,IAAI;AAAA,aAAI8qB,gBAAgB,CAAC9qB,IAAD,CAApB;AAAA,KAAd,CAAP;AACH;;AACD,WAASwJ,YAAT,CAAsB3F,IAAtB,EAA4B;AACxB,QAAIA,IAAI,KAAK,KAAK,CAAd,IAAmBA,IAAI,KAAK,IAAhC,EAAsC;AAClC,aAAOxQ,SAAP;AACH;;AACD,QAAIxB,MAAM,GAAG,IAAIyhB,IAAI,CAAC0X,UAAT,CAAoBnnB,IAAI,CAAC2T,KAAzB,CAAb;;AACA,QAAI3T,IAAI,CAAC7D,IAAL,KAAc,KAAK,CAAvB,EAA0B;AACtBnO,YAAM,CAACmO,IAAP,GAAc8qB,gBAAgB,CAACjnB,IAAI,CAAC7D,IAAN,CAA9B;AACH;;AACD,QAAI6D,IAAI,CAACkU,WAAT,EAAsB;AAClBlmB,YAAM,CAACkmB,WAAP,GAAqBI,aAAa,CAACtU,IAAI,CAACkU,WAAN,CAAlC;AACH;;AACD,QAAIlU,IAAI,CAAC0W,IAAT,EAAe;AACX1oB,YAAM,CAAC0oB,IAAP,GAAcnO,eAAe,CAACvI,IAAI,CAAC0W,IAAN,CAA7B;AACH;;AACD,QAAI1W,IAAI,CAACuL,OAAT,EAAkB;AACdvd,YAAM,CAACud,OAAP,GAAiB7F,SAAS,CAAC1F,IAAI,CAACuL,OAAN,CAA1B;AACH;;AACD,WAAOvd,MAAP;AACH;;AACD,WAASyY,UAAT,CAAoBzG,IAApB,EAA0B;AACtB,QAAI,CAACA,IAAL,EAAW;AACP,aAAOxQ,SAAP;AACH;;AACD,QAAIxB,MAAM,GAAG,IAAIypB,kBAAkB,WAAtB,CAA+BlS,OAAO,CAACvF,IAAI,CAACqF,KAAN,CAAtC,CAAb;;AACA,QAAIrF,IAAI,CAACuL,OAAT,EAAkB;AACdvd,YAAM,CAACud,OAAP,GAAiB7F,SAAS,CAAC1F,IAAI,CAACuL,OAAN,CAA1B;AACH;;AACD,QAAIvL,IAAI,CAAClS,IAAL,KAAc,KAAK,CAAnB,IAAwBkS,IAAI,CAAClS,IAAL,KAAc,IAA1C,EAAgD;AAC5CE,YAAM,CAACF,IAAP,GAAckS,IAAI,CAAClS,IAAnB;AACH;;AACD,WAAOE,MAAP;AACH;;AACD,WAASqY,YAAT,CAAsBsU,KAAtB,EAA6B;AACzB,QAAI,CAACA,KAAL,EAAY;AACR,aAAOnrB,SAAP;AACH;;AACD,WAAOmrB,KAAK,CAACtC,GAAN,CAAU,UAAC9R,QAAD;AAAA,aAAcE,UAAU,CAACF,QAAD,CAAxB;AAAA,KAAV,CAAP;AACH;;AACD,WAASgC,eAAT,CAAyBvI,IAAzB,EAA+B;AAC3B,QAAI,CAACA,IAAL,EAAW;AACP,aAAOxQ,SAAP;AACH;;AACD,QAAIxB,MAAM,GAAG,IAAIyhB,IAAI,CAAC2X,aAAT,EAAb;;AACA,QAAIpnB,IAAI,CAAC4V,eAAT,EAA0B;AACtB5V,UAAI,CAAC4V,eAAL,CAAqB5d,OAArB,CAA6B,UAAAY,MAAM,EAAI;AACnC,YAAIsqB,EAAE,CAACmE,UAAH,CAActyB,EAAd,CAAiB6D,MAAjB,CAAJ,EAA8B;AAC1B5K,gBAAM,CAACs5B,UAAP,CAAkBzP,aAAa,CAACjf,MAAM,CAACX,GAAR,CAA/B,EAA6CW,MAAM,CAACqF,OAApD;AACH,SAFD,MAGK,IAAIilB,EAAE,CAACqE,UAAH,CAAcxyB,EAAd,CAAiB6D,MAAjB,CAAJ,EAA8B;AAC/B5K,gBAAM,CAACw5B,UAAP,CAAkB3P,aAAa,CAACjf,MAAM,CAAC6uB,MAAR,CAA/B,EAAgD5P,aAAa,CAACjf,MAAM,CAAC8uB,MAAR,CAA7D,EAA8E9uB,MAAM,CAACqF,OAArF;AACH,SAFI,MAGA,IAAIilB,EAAE,CAACyE,UAAH,CAAc5yB,EAAd,CAAiB6D,MAAjB,CAAJ,EAA8B;AAC/B5K,gBAAM,CAAC45B,UAAP,CAAkB/P,aAAa,CAACjf,MAAM,CAACX,GAAR,CAA/B,EAA6CW,MAAM,CAACqF,OAApD;AACH,SAFI,MAGA,IAAIilB,EAAE,CAACrM,gBAAH,CAAoB9hB,EAApB,CAAuB6D,MAAvB,CAAJ,EAAoC;AACrC5K,gBAAM,CAACkI,GAAP,CAAW2hB,aAAa,CAACjf,MAAM,CAAClC,YAAP,CAAoBuB,GAArB,CAAxB,EAAmD2C,WAAW,CAAChC,MAAM,CAAC6B,KAAR,CAA9D;AACH,SAFI,MAGA;AACDzN,iBAAO,CAACC,KAAR,oDAA0DojB,IAAI,CAACC,SAAL,CAAe1X,MAAf,EAAuBpJ,SAAvB,EAAkC,CAAlC,CAA1D;AACH;AACJ,OAhBD;AAiBH,KAlBD,MAmBK,IAAIwQ,IAAI,CAACqU,OAAT,EAAkB;AACnBnoB,YAAM,CAACoe,IAAP,CAAYtK,IAAI,CAACqU,OAAjB,EAA0Brc,OAA1B,CAAkC,UAAAnD,GAAG,EAAI;AACrC7G,cAAM,CAACkI,GAAP,CAAW2hB,aAAa,CAAChjB,GAAD,CAAxB,EAA+B+F,WAAW,CAACoF,IAAI,CAACqU,OAAL,CAAaxf,GAAb,CAAD,CAA1C;AACH,OAFD;AAGH;;AACD,WAAO7G,MAAP;AACH;;AACD,WAASub,cAAT,CAAwBvJ,IAAxB,EAA8B;AAC1B,QAAIqF,KAAK,GAAGE,OAAO,CAACvF,IAAI,CAACqF,KAAN,CAAnB;AACA,QAAIzQ,MAAM,GAAGoL,IAAI,CAACpL,MAAL,GAAcmI,KAAK,CAACiD,IAAI,CAACpL,MAAN,CAAnB,GAAmCpF,SAAhD,CAF0B,CAG1B;;AACA,QAAI6Z,IAAI,GAAG,IAAIqO,sBAAsB,WAA1B,CAAmCrS,KAAnC,EAA0CzQ,MAA1C,CAAX;;AACA,QAAIoL,IAAI,CAAClS,IAAL,KAAc,KAAK,CAAnB,IAAwBkS,IAAI,CAAClS,IAAL,KAAc,IAA1C,EAAgD;AAC5Cub,UAAI,CAACvb,IAAL,GAAYkS,IAAI,CAAClS,IAAjB;AACH;;AACD,WAAOub,IAAP;AACH;;AACD,WAASF,eAAT,CAAyBwR,KAAzB,EAAgC;AAC5B,QAAI,CAACA,KAAL,EAAY;AACR,aAAOnrB,SAAP;AACH;;AACD,WAAOmrB,KAAK,CAACtC,GAAN,CAAU9O,cAAV,CAAP;AACH;;AACD,WAAS0U,OAAT,CAAiBf,KAAjB,EAAwB;AACpB,WAAO,IAAIzN,IAAI,CAACjb,KAAT,CAAe0oB,KAAK,CAACQ,GAArB,EAA0BR,KAAK,CAACS,KAAhC,EAAuCT,KAAK,CAACU,IAA7C,EAAmDV,KAAK,CAACW,KAAzD,CAAP;AACH;;AACD,WAASgK,kBAAT,CAA4B9J,EAA5B,EAAgC;AAC5B,WAAO,IAAItO,IAAI,CAACuO,gBAAT,CAA0BzY,OAAO,CAACwY,EAAE,CAAC1Y,KAAJ,CAAjC,EAA6C4Y,OAAO,CAACF,EAAE,CAACb,KAAJ,CAApD,CAAP;AACH;;AACD,WAASM,mBAAT,CAA6BM,gBAA7B,EAA+C;AAC3C,QAAIpqB,KAAK,CAACiI,OAAN,CAAcmiB,gBAAd,CAAJ,EAAqC;AACjC,aAAOA,gBAAgB,CAACzF,GAAjB,CAAqBwP,kBAArB,CAAP;AACH;;AACD,WAAOr4B,SAAP;AACH;;AACD,WAASs4B,mBAAT,CAA6B3J,EAA7B,EAAiC;AAC7B,QAAIC,YAAY,GAAG,IAAI3O,IAAI,CAAC4O,iBAAT,CAA2BF,EAAE,CAAClD,KAA9B,CAAnB;AACAmD,gBAAY,CAAC5C,mBAAb,GAAmC5gB,WAAW,CAACujB,EAAE,CAAC3C,mBAAJ,CAA9C;;AACA,QAAI2C,EAAE,CAACrC,QAAP,EAAiB;AACbsC,kBAAY,CAACtC,QAAb,GAAwBM,UAAU,CAAC+B,EAAE,CAACrC,QAAJ,CAAlC;AACH;;AACD,WAAOsC,YAAP;AACH;;AACD,WAASf,oBAAT,CAA8Ba,kBAA9B,EAAkD;AAC9C,QAAIxqB,KAAK,CAACiI,OAAN,CAAcuiB,kBAAd,CAAJ,EAAuC;AACnC,aAAOA,kBAAkB,CAAC7F,GAAnB,CAAuByP,mBAAvB,CAAP;AACH;;AACD,WAAOt4B,SAAP;AACH;;AACD,WAAS2wB,kBAAT,CAA4BhkB,IAA5B,EAAkC;AAC9B,QAAIA,IAAJ,EAAU;AACN,cAAQA,IAAR;AACI,aAAK+mB,EAAE,CAACxD,gBAAH,CAAoBC,OAAzB;AACI,iBAAOlQ,IAAI,CAACiQ,gBAAL,CAAsBC,OAA7B;;AACJ,aAAKuD,EAAE,CAACxD,gBAAH,CAAoBE,OAAzB;AACI,iBAAOnQ,IAAI,CAACiQ,gBAAL,CAAsBE,OAA7B;;AACJ,aAAKsD,EAAE,CAACxD,gBAAH,CAAoBG,MAAzB;AACI,iBAAOpQ,IAAI,CAACiQ,gBAAL,CAAsBG,MAA7B;AANR;AAQH;;AACD,WAAO,KAAK,CAAZ;AACH;;AACD,WAASkI,cAAT,CAAwBhI,CAAxB,EAA2B;AACvB,WAAO,IAAItQ,IAAI,CAACuQ,YAAT,CAAsBD,CAAC,CAACE,SAAxB,EAAmCF,CAAC,CAACG,OAArC,EAA8CC,kBAAkB,CAACJ,CAAC,CAAC5jB,IAAH,CAAhE,CAAP;AACH;;AACD,WAASqjB,eAAT,CAAyBM,aAAzB,EAAwC;AACpC,QAAIpsB,KAAK,CAACiI,OAAN,CAAcmkB,aAAd,CAAJ,EAAkC;AAC9B,aAAOA,aAAa,CAACzH,GAAd,CAAkB0P,cAAlB,CAAP;AACH;;AACD,WAAO,KAAK,CAAZ;AACH;;AACD,WAASC,gBAAT,CAA0BpB,cAA1B,EAA0C;AACtC,WAAO,IAAInX,IAAI,CAACwY,cAAT,CAAwB1iB,OAAO,CAACqhB,cAAc,CAACvhB,KAAhB,CAA/B,EAAuDuhB,cAAc,CAACsB,MAAf,GAAwBF,gBAAgB,CAACpB,cAAc,CAACsB,MAAhB,CAAxC,GAAkE14B,SAAzH,CAAP;AACH;;AACD,WAAS24B,iBAAT,CAA2BC,eAA3B,EAA4C;AACxC,QAAI,CAAC10B,KAAK,CAACiI,OAAN,CAAcysB,eAAd,CAAL,EAAqC;AACjC,aAAO,EAAP;AACH;;AACD,QAAIp6B,MAAM,GAAG,EAAb;;AAJwC,gDAKtBo6B,eALsB;AAAA;;AAAA;AAKxC,6DAAmC;AAAA,YAA1B/iB,KAA0B;AAC/BrX,cAAM,CAAC0D,IAAP,CAAYs2B,gBAAgB,CAAC3iB,KAAD,CAA5B;AACH;AAPuC;AAAA;AAAA;AAAA;AAAA;;AAQxC,WAAOrX,MAAP;AACH;;AACD,SAAO;AACH+O,SAAK,EAALA,KADG;AAEHuX,iBAAa,EAAbA,aAFG;AAGHiG,gBAAY,EAAZA,YAHG;AAIHhV,WAAO,EAAPA,OAJG;AAKHqC,cAAU,EAAVA,UALG;AAMH+R,wBAAoB,EAApBA,oBANG;AAOHQ,mBAAe,EAAfA,eAPG;AAQHtZ,WAAO,EAAPA,OARG;AASHlB,sBAAkB,EAAlBA,kBATG;AAUHO,oBAAgB,EAAhBA,gBAVG;AAWHkc,cAAU,EAAVA,UAXG;AAYHxhB,eAAW,EAAXA,WAZG;AAaH2G,mBAAe,EAAfA,eAbG;AAcHyjB,2BAAuB,EAAvBA,uBAdG;AAeHC,0BAAsB,EAAtBA,sBAfG;AAgBHG,2BAAuB,EAAvBA,uBAhBG;AAiBHC,0BAAsB,EAAtBA,sBAjBG;AAkBHtG,uBAAmB,EAAnBA,mBAlBG;AAmBH/c,sBAAkB,EAAlBA,kBAnBG;AAoBH2hB,cAAU,EAAVA,UApBG;AAqBHphB,gBAAY,EAAZA,YArBG;AAsBHO,wBAAoB,EAApBA,oBAtBG;AAuBHmjB,uBAAmB,EAAnBA,mBAvBG;AAwBHE,2BAAuB,EAAvBA,uBAxBG;AAyBHK,gBAAY,EAAZA,YAzBG;AA0BH7iB,wBAAoB,EAApBA,oBA1BG;AA2BH4iB,uBAAmB,EAAnBA,mBA3BG;AA4BH7iB,qBAAiB,EAAjBA,iBA5BG;AA6BHijB,oBAAgB,EAAhBA,gBA7BG;AA8BHjhB,aAAS,EAATA,SA9BG;AA+BHqhB,cAAU,EAAVA,UA/BG;AAgCHphB,gBAAY,EAAZA,YAhCG;AAiCHshB,oBAAgB,EAAhBA,gBAjCG;AAkCHlhB,qBAAiB,EAAjBA,iBAlCG;AAmCHU,cAAU,EAAVA,UAnCG;AAoCHJ,gBAAY,EAAZA,YApCG;AAqCHkC,mBAAe,EAAfA,eArCG;AAsCHgB,kBAAc,EAAdA,cAtCG;AAuCHJ,mBAAe,EAAfA,eAvCG;AAwCHgX,sBAAkB,EAAlBA,kBAxCG;AAyCH4H,kBAAc,EAAdA,cAzCG;AA0CHvI,mBAAe,EAAfA,eA1CG;AA2CHvB,WAAO,EAAPA,OA3CG;AA4CH4J,sBAAkB,EAAlBA,kBA5CG;AA6CHrK,uBAAmB,EAAnBA,mBA7CG;AA8CHsK,uBAAmB,EAAnBA,mBA9CG;AA+CHzK,wBAAoB,EAApBA,oBA/CG;AAgDH2K,oBAAgB,EAAhBA,gBAhDG;AAiDHG,qBAAiB,EAAjBA;AAjDG,GAAP;AAmDH;;AACDn8B,OAAO,CAAC6iB,eAAR,GAA0BA,eAA1B,C;;;;;;;;;;;;ACpqBA;;;;AAIa;;;;;;;;;;;;;;AACb3iB,MAAM,CAACC,cAAP,CAAsBH,OAAtB,EAA+B,YAA/B,EAA6C;AAAEI,OAAK,EAAE;AAAT,CAA7C;;AACA,IAAMqjB,IAAI,GAAGnjB,mBAAO,CAAC,iFAAD,CAApB;;IACM+7B,oB;;;;;AACF,gCAAYhjB,KAAZ,EAAmBzQ,MAAnB,EAA2B;AAAA;;AAAA,6BACjByQ,KADiB,EACVzQ,MADU;AAE1B;;;EAH8B6a,IAAI,CAACkN,Y;;AAKxC3wB,OAAO,WAAP,GAAkBq8B,oBAAlB,C;;;;;;;;;;;;ACZA;;;;AAIa;;;;;;;;;;;;;;;;;;AACbn8B,MAAM,CAACC,cAAP,CAAsBH,OAAtB,EAA+B,YAA/B,EAA6C;AAAEI,OAAK,EAAE;AAAT,CAA7C;;AACA,IAAMC,QAAQ,GAAGC,mBAAO,CAAC,iFAAD,CAAxB;;AACA,IAAMC,gCAAgC,GAAGD,mBAAO,CAAC,kGAAD,CAAhD;;AACA,IAAMswB,QAAQ,GAAGtwB,mBAAO,CAAC,qEAAD,CAAxB;;AACA,SAASqI,MAAT,CAAgBC,MAAhB,EAAwBC,GAAxB,EAA6B;AACzB,MAAID,MAAM,CAACC,GAAD,CAAN,KAAgB,KAAK,CAAzB,EAA4B;AACxBD,UAAM,CAACC,GAAD,CAAN,GAAc,EAAd;AACH;;AACD,SAAOD,MAAM,CAACC,GAAD,CAAb;AACH;;IACKyzB,qB;;;;;AACF,iCAAYvxB,MAAZ,EAAoB;AAAA;;AAAA,6BACVA,MADU,EACFxK,gCAAgC,CAACg8B,qBAAjC,CAAuDp6B,IADrD;AAEnB;;;;2CACsBkQ,W,EAAa;AAChC1J,YAAM,CAACA,MAAM,CAAC0J,WAAD,EAAc,cAAd,CAAP,EAAsC,gBAAtC,CAAN,CAA8D3G,mBAA9D,GAAoF,IAApF;AACA,UAAI8wB,qBAAqB,GAAG7zB,MAAM,CAACA,MAAM,CAAC0J,WAAD,EAAc,cAAd,CAAP,EAAsC,gBAAtC,CAAlC;AACAmqB,2BAAqB,CAAC9wB,mBAAtB,GAA4C,IAA5C;AACA8wB,2BAAqB,CAAC3mB,WAAtB,GAAoC,IAApC;AACH;;;+BACUpK,Y,EAAc1B,gB,EAAkB;AAAA,kCACnB,KAAKgnB,eAAL,CAAqBhnB,gBAArB,EAAuC0B,YAAY,CAACgxB,sBAApD,CADmB;AAAA;AAAA,UAClCtyB,EADkC;AAAA,UAC9B8H,OAD8B;;AAEvC,UAAI,CAAC9H,EAAD,IAAO,CAAC8H,OAAZ,EAAqB;AACjB;AACH;;AACD,WAAK/I,QAAL,CAAc,KAAKE,QAAnB,EAA6B;AAAEe,UAAE,EAAEA,EAAN;AAAUL,uBAAe,EAAEmI;AAA3B,OAA7B;AACH;;;6CACwBA,O,EAAS;AAC9B,UAAIlH,MAAM,GAAG,KAAKzB,OAAlB;;AACA,UAAIozB,sBAAqB,GAAG,SAAxBA,qBAAwB,CAACrvB,QAAD,EAAWkG,QAAX,EAAqBE,KAArB,EAA+B;AACvD,eAAO1I,MAAM,CAAC7I,WAAP,CAAmB3B,gCAAgC,CAACg8B,qBAAjC,CAAuDp6B,IAA1E,EAAgF4I,MAAM,CAACO,sBAAP,CAA8BsJ,4BAA9B,CAA2DvH,QAA3D,EAAqEkG,QAArE,CAAhF,EAAgKE,KAAhK,EAAuKjF,IAAvK,CAA4KzD,MAAM,CAAC4D,sBAAP,CAA8BqH,kBAA1M,EAA8N,UAAC/U,KAAD,EAAW;AAC5O8J,gBAAM,CAAC6I,gBAAP,CAAwBrT,gCAAgC,CAACg8B,qBAAjC,CAAuDp6B,IAA/E,EAAqFlB,KAArF;AACA,iBAAO4S,OAAO,CAACC,OAAR,CAAgB,IAAhB,CAAP;AACH,SAHM,CAAP;AAIH,OALD;;AAMA,UAAI1I,UAAU,GAAGL,MAAM,CAACI,aAAP,CAAqBC,UAAtC;AACA,aAAO/K,QAAQ,CAACuK,SAAT,CAAmB+xB,8BAAnB,CAAkD1qB,OAAO,CAAClI,gBAA1D,EAA4E;AAC/E2yB,6BAAqB,EAAE,+BAACrvB,QAAD,EAAWkG,QAAX,EAAqBE,KAArB,EAA+B;AAClD,iBAAOrI,UAAU,CAACsxB,qBAAX,GACDtxB,UAAU,CAACsxB,qBAAX,CAAiCrvB,QAAjC,EAA2CkG,QAA3C,EAAqDE,KAArD,EAA4DipB,sBAA5D,CADC,GAEDA,sBAAqB,CAACrvB,QAAD,EAAWkG,QAAX,EAAqBE,KAArB,CAF3B;AAGH;AAL8E,OAA5E,CAAP;AAOH;;;;EAjC+Bmd,QAAQ,CAACrf,mB;;AAmC7CvR,OAAO,CAACs8B,qBAAR,GAAgCA,qBAAhC,C;;;;;;;;;;;;AClDA;;;;AAIa;;;;;;AACbp8B,MAAM,CAACC,cAAP,CAAsBH,OAAtB,EAA+B,YAA/B,EAA6C;AAAEI,OAAK,EAAE;AAAT,CAA7C;;IACM0N,O;AACF,mBAAY8uB,YAAZ,EAA0B;AAAA;;AACtB,SAAKA,YAAL,GAAoBA,YAApB;AACA,SAAKC,OAAL,GAAer5B,SAAf;AACA,SAAKs5B,iBAAL,GAAyBt5B,SAAzB;AACA,SAAKu5B,SAAL,GAAiBv5B,SAAjB;AACA,SAAKw5B,IAAL,GAAYx5B,SAAZ;AACH;;;;4BACOw5B,I,EAAiC;AAAA;;AAAA,UAA3BC,KAA2B,uEAAnB,KAAKL,YAAc;AACrC,WAAKI,IAAL,GAAYA,IAAZ;;AACA,UAAIC,KAAK,IAAI,CAAb,EAAgB;AACZ,aAAKC,aAAL;AACH;;AACD,UAAI,CAAC,KAAKJ,iBAAV,EAA6B;AACzB,aAAKA,iBAAL,GAAyB,IAAIjpB,OAAJ,CAAY,UAACC,OAAD,EAAa;AAC9C,eAAI,CAACipB,SAAL,GAAiBjpB,OAAjB;AACH,SAFwB,EAEtBtF,IAFsB,CAEjB,YAAM;AACV,eAAI,CAACsuB,iBAAL,GAAyBt5B,SAAzB;AACA,eAAI,CAACu5B,SAAL,GAAiBv5B,SAAjB;;AACA,cAAIxB,MAAM,GAAG,KAAI,CAACg7B,IAAL,EAAb;;AACA,eAAI,CAACA,IAAL,GAAYx5B,SAAZ;AACA,iBAAOxB,MAAP;AACH,SARwB,CAAzB;AASH;;AACD,UAAIi7B,KAAK,IAAI,CAAT,IAAc,KAAKJ,OAAL,KAAiB,KAAK,CAAxC,EAA2C;AACvC,aAAKA,OAAL,GAAeM,UAAU,CAAC,YAAM;AAC5B,eAAI,CAACN,OAAL,GAAer5B,SAAf;;AACA,eAAI,CAACu5B,SAAL,CAAev5B,SAAf;AACH,SAHwB,EAGtBy5B,KAAK,IAAI,CAAT,GAAaA,KAAb,GAAqB,KAAKL,YAHJ,CAAzB;AAIH;;AACD,aAAO,KAAKE,iBAAZ;AACH;;;oCACe;AACZ,UAAI,CAAC,KAAKA,iBAAV,EAA6B;AACzB,eAAOt5B,SAAP;AACH;;AACD,WAAK05B,aAAL;AACA,UAAIl7B,MAAM,GAAG,KAAKg7B,IAAL,EAAb;AACA,WAAKF,iBAAL,GAAyBt5B,SAAzB;AACA,WAAKu5B,SAAL,GAAiBv5B,SAAjB;AACA,WAAKw5B,IAAL,GAAYx5B,SAAZ;AACA,aAAOxB,MAAP;AACH;;;kCACa;AACV,aAAO,KAAK66B,OAAL,KAAiB,KAAK,CAA7B;AACH;;;6BACQ;AACL,WAAKK,aAAL;AACA,WAAKJ,iBAAL,GAAyBt5B,SAAzB;AACH;;;oCACe;AACZ,UAAI,KAAKq5B,OAAL,KAAiB,KAAK,CAA1B,EAA6B;AACzBO,oBAAY,CAAC,KAAKP,OAAN,CAAZ;AACA,aAAKA,OAAL,GAAer5B,SAAf;AACH;AACJ;;;;;;AAELxD,OAAO,CAAC8N,OAAR,GAAkBA,OAAlB,C;;;;;;;;;;;;AC/DA;;;;AAIa;;AACb5N,MAAM,CAACC,cAAP,CAAsBH,OAAtB,EAA+B,YAA/B,EAA6C;AAAEI,OAAK,EAAE;AAAT,CAA7C;;AACA,SAASi9B,QAAT,CAAiBj9B,KAAjB,EAAwB;AACpB,SAAOA,KAAK,KAAK,IAAV,IAAkBA,KAAK,KAAK,KAAnC;AACH;;AACDJ,OAAO,WAAP,GAAkBq9B,QAAlB;;AACA,SAASh7B,MAAT,CAAgBjC,KAAhB,EAAuB;AACnB,SAAO,OAAOA,KAAP,KAAiB,QAAjB,IAA6BA,KAAK,YAAYmH,MAArD;AACH;;AACDvH,OAAO,CAACqC,MAAR,GAAiBA,MAAjB;;AACA,SAASwkB,MAAT,CAAgBzmB,KAAhB,EAAuB;AACnB,SAAO,OAAOA,KAAP,KAAiB,QAAjB,IAA6BA,KAAK,YAAYoH,MAArD;AACH;;AACDxH,OAAO,CAAC6mB,MAAR,GAAiBA,MAAjB;;AACA,SAAS5lB,KAAT,CAAeb,KAAf,EAAsB;AAClB,SAAOA,KAAK,YAAYqR,KAAxB;AACH;;AACDzR,OAAO,CAACiB,KAAR,GAAgBA,KAAhB;;AACA,SAASgI,IAAT,CAAc7I,KAAd,EAAqB;AACjB,SAAO,OAAOA,KAAP,KAAiB,UAAxB;AACH;;AACDJ,OAAO,CAACiJ,IAAR,GAAeA,IAAf;;AACA,SAASmgB,KAAT,CAAehpB,KAAf,EAAsB;AAClB,SAAOsH,KAAK,CAACiI,OAAN,CAAcvP,KAAd,CAAP;AACH;;AACDJ,OAAO,CAACopB,KAAR,GAAgBA,KAAhB;;AACA,SAASsP,WAAT,CAAqBt4B,KAArB,EAA4B;AACxB,SAAOgpB,KAAK,CAAChpB,KAAD,CAAL,IAAgBA,KAAK,CAACk9B,KAAN,CAAY,UAAA5P,IAAI;AAAA,WAAIrrB,MAAM,CAACqrB,IAAD,CAAV;AAAA,GAAhB,CAAvB;AACH;;AACD1tB,OAAO,CAAC04B,WAAR,GAAsBA,WAAtB;;AACA,SAAS6E,UAAT,CAAoBn9B,KAApB,EAA2Bo9B,KAA3B,EAAkC;AAC9B,SAAO91B,KAAK,CAACiI,OAAN,CAAcvP,KAAd,KAAwBA,KAAK,CAACk9B,KAAN,CAAYE,KAAZ,CAA/B;AACH;;AACDx9B,OAAO,CAACu9B,UAAR,GAAqBA,UAArB;;AACA,SAASE,QAAT,CAAkBr9B,KAAlB,EAAyB;AACrB,SAAOA,KAAK,IAAI6I,IAAI,CAAC7I,KAAK,CAACoO,IAAP,CAApB;AACH;;AACDxO,OAAO,CAACy9B,QAAR,GAAmBA,QAAnB,C;;;;;;;;;;;;ACzCA;;;;AAIa;;;;;;;;;;;;;;;;AACbv9B,MAAM,CAACC,cAAP,CAAsBH,OAAtB,EAA+B,YAA/B,EAA6C;AAAEI,OAAK,EAAE;AAAT,CAA7C;;IACMs9B,S;AACF,qBAAYC,MAAZ,EAAoB;AAAA;;AAChB,SAAKA,MAAL,GAAcA,MAAd,CADgB,CAEhB;AACH;;;;4BACO;AACJ,aAAO,KAAKA,MAAZ;AACH;;;2BACMC,K,EAAO;AACV,aAAO,KAAKC,KAAL,OAAiBD,KAAK,CAACC,KAAN,EAAxB;AACH;;;;;;IAECC,M;;;;;AACF,oBAAc;AAAA;;AAAA,6BACJ,CACFA,MAAM,CAACC,UAAP,EADE,EAEFD,MAAM,CAACC,UAAP,EAFE,EAGFD,MAAM,CAACC,UAAP,EAHE,EAIFD,MAAM,CAACC,UAAP,EAJE,EAKFD,MAAM,CAACC,UAAP,EALE,EAMFD,MAAM,CAACC,UAAP,EANE,EAOFD,MAAM,CAACC,UAAP,EAPE,EAQFD,MAAM,CAACC,UAAP,EARE,EASF,GATE,EAUFD,MAAM,CAACC,UAAP,EAVE,EAWFD,MAAM,CAACC,UAAP,EAXE,EAYFD,MAAM,CAACC,UAAP,EAZE,EAaFD,MAAM,CAACC,UAAP,EAbE,EAcF,GAdE,EAeF,GAfE,EAgBFD,MAAM,CAACC,UAAP,EAhBE,EAiBFD,MAAM,CAACC,UAAP,EAjBE,EAkBFD,MAAM,CAACC,UAAP,EAlBE,EAmBF,GAnBE,EAoBFD,MAAM,CAACE,MAAP,CAAcF,MAAM,CAACG,aAArB,CApBE,EAqBFH,MAAM,CAACC,UAAP,EArBE,EAsBFD,MAAM,CAACC,UAAP,EAtBE,EAuBFD,MAAM,CAACC,UAAP,EAvBE,EAwBF,GAxBE,EAyBFD,MAAM,CAACC,UAAP,EAzBE,EA0BFD,MAAM,CAACC,UAAP,EA1BE,EA2BFD,MAAM,CAACC,UAAP,EA3BE,EA4BFD,MAAM,CAACC,UAAP,EA5BE,EA6BFD,MAAM,CAACC,UAAP,EA7BE,EA8BFD,MAAM,CAACC,UAAP,EA9BE,EA+BFD,MAAM,CAACC,UAAP,EA/BE,EAgCFD,MAAM,CAACC,UAAP,EAhCE,EAiCFD,MAAM,CAACC,UAAP,EAjCE,EAkCFD,MAAM,CAACC,UAAP,EAlCE,EAmCFD,MAAM,CAACC,UAAP,EAnCE,EAoCFD,MAAM,CAACC,UAAP,EApCE,EAqCJG,IArCI,CAqCC,EArCD,CADI;AAuCb;;;;2BACa9U,K,EAAO;AACjB,aAAOA,KAAK,CAACsN,IAAI,CAACyH,KAAL,CAAW/U,KAAK,CAACvjB,MAAN,GAAe6wB,IAAI,CAAC0H,MAAL,EAA1B,CAAD,CAAZ;AACH;;;iCACmB;AAChB,aAAON,MAAM,CAACE,MAAP,CAAcF,MAAM,CAACO,MAArB,CAAP;AACH;;;;EA9CgBX,S;;AAgDrBI,MAAM,CAACO,MAAP,GAAgB,CAAC,GAAD,EAAM,GAAN,EAAW,GAAX,EAAgB,GAAhB,EAAqB,GAArB,EAA0B,GAA1B,EAA+B,GAA/B,EAAoC,GAApC,EAAyC,GAAzC,EAA8C,GAA9C,EAAmD,GAAnD,EAAwD,GAAxD,EAA6D,GAA7D,EAAkE,GAAlE,EAAuE,GAAvE,EAA4E,GAA5E,EAAiF,GAAjF,CAAhB;AACAP,MAAM,CAACG,aAAP,GAAuB,CAAC,GAAD,EAAM,GAAN,EAAW,GAAX,EAAgB,GAAhB,CAAvB;AACA;;;;AAGAj+B,OAAO,CAACs+B,KAAR,GAAgB,IAAIZ,SAAJ,CAAc,sCAAd,CAAhB;;AACA,SAASa,EAAT,GAAc;AACV,SAAO,IAAIT,MAAJ,EAAP;AACH;;AACD99B,OAAO,CAACu+B,EAAR,GAAaA,EAAb;AACA,IAAMC,YAAY,GAAG,iEAArB;;AACA,SAASC,MAAT,CAAgBr+B,KAAhB,EAAuB;AACnB,SAAOo+B,YAAY,CAACE,IAAb,CAAkBt+B,KAAlB,CAAP;AACH;;AACDJ,OAAO,CAACy+B,MAAR,GAAiBA,MAAjB;AACA;;;;;AAIA,SAASpH,KAAT,CAAej3B,KAAf,EAAsB;AAClB,MAAI,CAACq+B,MAAM,CAACr+B,KAAD,CAAX,EAAoB;AAChB,UAAM,IAAIqR,KAAJ,CAAU,cAAV,CAAN;AACH;;AACD,SAAO,IAAIisB,SAAJ,CAAct9B,KAAd,CAAP;AACH;;AACDJ,OAAO,CAACq3B,KAAR,GAAgBA,KAAhB;;AACA,SAASvrB,YAAT,GAAwB;AACpB,SAAOyyB,EAAE,GAAGV,KAAL,EAAP;AACH;;AACD79B,OAAO,CAAC8L,YAAR,GAAuBA,YAAvB,C;;;;;;;;;;;;AC/FA;;;;AAIa;;;;;;;;;;;;AACb5L,MAAM,CAACC,cAAP,CAAsBH,OAAtB,EAA+B,YAA/B,EAA6C;AAAEI,OAAK,EAAE;AAAT,CAA7C;;AACA,IAAMQ,IAAI,GAAGN,mBAAO,CAAC,6EAAD,CAApB;;AACA,IAAMD,QAAQ,GAAGC,mBAAO,CAAC,iFAAD,CAAxB;;AACA,IAAMC,gCAAgC,GAAGD,mBAAO,CAAC,kGAAD,CAAhD;;AACA,SAASq+B,MAAT,CAAgB/1B,MAAhB,EAAwBC,GAAxB,EAA6B;AACzB,MAAID,MAAM,KAAK,KAAK,CAApB,EAAuB;AACnB,WAAOpF,SAAP;AACH;;AACD,SAAOoF,MAAM,CAACC,GAAD,CAAb;AACH;;IACK+1B,uB;AACF,mCAAYt1B,OAAZ,EAAqB;AAAA;;AACjB,SAAKA,OAAL,GAAeA,OAAf;AACA,SAAKoU,UAAL,GAAkB,IAAI7T,GAAJ,EAAlB;AACH;;;;yCAIoBzH,M,EAAQ;AAAA;;AACzB,UAAIwlB,OAAO,GAAGvnB,QAAQ,CAAC4K,SAAT,CAAmBob,gBAAjC;;AACA,UAAIuB,OAAO,KAAK,KAAK,CAArB,EAAwB;AACpBxlB,cAAM,CAACikB,gBAAP,GAA0B,IAA1B;AACH,OAFD,MAGK;AACDjkB,cAAM,CAACikB,gBAAP,GAA0BuB,OAAO,CAACyE,GAAR,CAAY,UAAAxE,MAAM;AAAA,iBAAI,KAAI,CAACgX,UAAL,CAAgBhX,MAAhB,CAAJ;AAAA,SAAlB,CAA1B;AACH;AACJ;;;2CACsBpc,Y,EAAc;AACjCA,kBAAY,CAACR,SAAb,GAAyBQ,YAAY,CAACR,SAAb,IAA0B,EAAnD;AACAQ,kBAAY,CAACR,SAAb,CAAuBob,gBAAvB,GAA0C,IAA1C;AACH;;;+BACU5a,Y,EAAc;AAAA;;AACrB,UAAIV,MAAM,GAAG,KAAKzB,OAAlB;AACAyB,YAAM,CAACxI,SAAP,CAAiBhC,gCAAgC,CAACu+B,uBAAjC,CAAyD38B,IAA1E,EAAgF,UAACsR,KAAD,EAAW;AACvF,YAAI4S,gBAAgB,GAAG,SAAnBA,gBAAmB,GAAM;AACzB,cAAIuB,OAAO,GAAGvnB,QAAQ,CAAC4K,SAAT,CAAmBob,gBAAjC;;AACA,cAAIuB,OAAO,KAAK,KAAK,CAArB,EAAwB;AACpB,mBAAO,IAAP;AACH;;AACD,cAAI5lB,MAAM,GAAG4lB,OAAO,CAACyE,GAAR,CAAY,UAACxE,MAAD,EAAY;AACjC,mBAAO,MAAI,CAACgX,UAAL,CAAgBhX,MAAhB,CAAP;AACH,WAFY,CAAb;AAGA,iBAAO7lB,MAAP;AACH,SATD;;AAUA,YAAIoJ,UAAU,GAAGL,MAAM,CAACI,aAAP,CAAqBC,UAArB,CAAgCH,SAAjD;AACA,eAAOG,UAAU,IAAIA,UAAU,CAACib,gBAAzB,GACDjb,UAAU,CAACib,gBAAX,CAA4B5S,KAA5B,EAAmC4S,gBAAnC,CADC,GAEDA,gBAAgB,CAAC5S,KAAD,CAFtB;AAGH,OAfD;AAgBA,UAAIrT,KAAK,GAAGu+B,MAAM,CAACA,MAAM,CAACA,MAAM,CAAClzB,YAAD,EAAe,WAAf,CAAP,EAAoC,kBAApC,CAAP,EAAgE,qBAAhE,CAAlB;AACA,UAAItB,EAAJ;;AACA,UAAI,OAAO/J,KAAP,KAAiB,QAArB,EAA+B;AAC3B+J,UAAE,GAAG/J,KAAL;AACH,OAFD,MAGK,IAAIA,KAAK,KAAK,IAAd,EAAoB;AACrB+J,UAAE,GAAGvJ,IAAI,CAACkL,YAAL,EAAL;AACH;;AACD,UAAI3B,EAAJ,EAAQ;AACJ,aAAKjB,QAAL,CAAc,KAAKE,QAAnB,EAA6B;AACzBe,YAAE,EAAEA,EADqB;AAEzBL,yBAAe,EAAEtG;AAFQ,SAA7B;AAIH;AACJ;;;6BACQ8B,Q,EAAUxD,I,EAAM;AAAA;;AACrB,UAAIqI,EAAE,GAAGrI,IAAI,CAACqI,EAAd;AACA,UAAIY,MAAM,GAAG,KAAKzB,OAAlB;AACA,UAAIgI,UAAU,GAAGjR,QAAQ,CAAC4K,SAAT,CAAmB8zB,2BAAnB,CAA+C,UAAC7xB,KAAD,EAAW;AACvE,YAAI8xB,yBAAyB,GAAG,SAA5BA,yBAA4B,CAAC9xB,KAAD,EAAW;AACvC,cAAI9K,MAAM,GAAG;AACT8K,iBAAK,EAAE;AACH+xB,mBAAK,EAAE/xB,KAAK,CAAC+xB,KAAN,CAAY5S,GAAZ,CAAgB,UAAAxE,MAAM;AAAA,uBAAI,MAAI,CAACgX,UAAL,CAAgBhX,MAAhB,CAAJ;AAAA,eAAtB,CADJ;AAEHqX,qBAAO,EAAEhyB,KAAK,CAACgyB,OAAN,CAAc7S,GAAd,CAAkB,UAAAxE,MAAM;AAAA,uBAAI,MAAI,CAACgX,UAAL,CAAgBhX,MAAhB,CAAJ;AAAA,eAAxB;AAFN;AADE,WAAb;;AAMA,gBAAI,CAACve,OAAL,CAAa7G,gBAAb,CAA8BlC,gCAAgC,CAAC4+B,qCAAjC,CAAuEh9B,IAArG,EAA2GC,MAA3G;AACH,SARD;;AASA,YAAIgJ,UAAU,GAAGL,MAAM,CAACI,aAAP,CAAqBC,UAArB,CAAgCH,SAAjD;AACAG,kBAAU,IAAIA,UAAU,CAAC4zB,yBAAzB,GACM5zB,UAAU,CAAC4zB,yBAAX,CAAqC9xB,KAArC,EAA4C8xB,yBAA5C,CADN,GAEMA,yBAAyB,CAAC9xB,KAAD,CAF/B;AAGH,OAdgB,CAAjB;;AAeA,WAAKwQ,UAAL,CAAgBxT,GAAhB,CAAoBC,EAApB,EAAwBmH,UAAxB;AACH;;;+BACUnH,E,EAAI;AACX,UAAImH,UAAU,GAAG,KAAKoM,UAAL,CAAgBlR,GAAhB,CAAoBrC,EAApB,CAAjB;;AACA,UAAImH,UAAU,KAAK,KAAK,CAAxB,EAA2B;AACvB;AACH;;AACD,WAAKoM,UAAL,WAAuBvT,EAAvB;;AACAmH,gBAAU,CAACvM,OAAX;AACH;;;8BACS;AAAA,iDACiB,KAAK2Y,UAAL,CAAgBtT,MAAhB,EADjB;AAAA;;AAAA;AACN,4DAAiD;AAAA,cAAxCkH,UAAwC;AAC7CA,oBAAU,CAACvM,OAAX;AACH;AAHK;AAAA;AAAA;AAAA;AAAA;;AAIN,WAAK2Y,UAAL,CAAgBlT,KAAhB;AACH;;;+BACUqU,e,EAAiB;AACxB,UAAIA,eAAe,KAAK,KAAK,CAA7B,EAAgC;AAC5B,eAAO,IAAP;AACH;;AACD,aAAO;AAAE5S,WAAG,EAAE,KAAK3C,OAAL,CAAagC,sBAAb,CAAoCyF,KAApC,CAA0C8N,eAAe,CAAC5S,GAA1D,CAAP;AAAuE9G,YAAI,EAAE0Z,eAAe,CAAC1Z;AAA7F,OAAP;AACH;;;wBAxFc;AACX,aAAO5E,gCAAgC,CAAC4+B,qCAAjC,CAAuEh9B,IAA9E;AACH;;;;;;AAwFLnC,OAAO,CAAC4+B,uBAAR,GAAkCA,uBAAlC,C;;;;;;;;;;;;AC9GA;;;;AAIa;;AACb,SAAS/+B,QAAT,CAAkBC,CAAlB,EAAqB;AACjB,OAAK,IAAIC,CAAT,IAAcD,CAAd;AAAiB,QAAI,CAACE,OAAO,CAACC,cAAR,CAAuBF,CAAvB,CAAL,EAAgCC,OAAO,CAACD,CAAD,CAAP,GAAaD,CAAC,CAACC,CAAD,CAAd;AAAjD;AACH;;AACDG,MAAM,CAACC,cAAP,CAAsBH,OAAtB,EAA+B,YAA/B,EAA6C;AAAEI,OAAK,EAAE;AAAT,CAA7C;;AACA,IAAMg/B,gBAAgB,GAAG9+B,mBAAO,CAAC,8GAAD,CAAhC;;AACAN,OAAO,CAACgrB,UAAR,GAAqBoU,gBAAgB,CAACpU,UAAtC;AACAhrB,OAAO,CAACujB,aAAR,GAAwB6b,gBAAgB,CAAC7b,aAAzC;AACAvjB,OAAO,CAACq/B,iBAAR,GAA4BD,gBAAgB,CAACC,iBAA7C;AACAr/B,OAAO,CAACs/B,uBAAR,GAAkCF,gBAAgB,CAACE,uBAAnD;AACAt/B,OAAO,CAACmlB,UAAR,GAAqBia,gBAAgB,CAACja,UAAtC;AACAnlB,OAAO,CAAC+H,KAAR,GAAgBq3B,gBAAgB,CAACr3B,KAAjC;AACA/H,OAAO,CAACsiB,OAAR,GAAkB8c,gBAAgB,CAAC9c,OAAnC;AACAtiB,OAAO,CAACmmB,KAAR,GAAgBiZ,gBAAgB,CAACjZ,KAAjC;AACAnmB,OAAO,CAACkD,WAAR,GAAsBk8B,gBAAgB,CAACl8B,WAAvC;AACAlD,OAAO,CAACu/B,oBAAR,GAA+BH,gBAAgB,CAACG,oBAAhD;AACAv/B,OAAO,CAACw/B,oBAAR,GAA+BJ,gBAAgB,CAACI,oBAAhD;AACAx/B,OAAO,CAACy/B,WAAR,GAAsBL,gBAAgB,CAACK,WAAvC;AACAz/B,OAAO,CAAC0/B,YAAR,GAAuBN,gBAAgB,CAACM,YAAxC;AACA1/B,OAAO,CAAC2/B,gBAAR,GAA2BP,gBAAgB,CAACO,gBAA5C;AACA3/B,OAAO,CAAC4/B,iBAAR,GAA4BR,gBAAgB,CAACQ,iBAA7C;AACA5/B,OAAO,CAAC6f,aAAR,GAAwBuf,gBAAgB,CAACvf,aAAzC;AACA7f,OAAO,CAAC+f,aAAR,GAAwBqf,gBAAgB,CAACrf,aAAzC;AACA/f,OAAO,CAAC6/B,kBAAR,GAA6BT,gBAAgB,CAACS,kBAA9C;AACA7/B,OAAO,CAAC8/B,mBAAR,GAA8BV,gBAAgB,CAACU,mBAA/C;AACA9/B,OAAO,CAAC+/B,mBAAR,GAA8BX,gBAAgB,CAACW,mBAA/C;AACA//B,OAAO,CAACggC,gBAAR,GAA2BZ,gBAAgB,CAACY,gBAA5C;AACAhgC,OAAO,CAACigC,gBAAR,GAA2Bb,gBAAgB,CAACa,gBAA5C;AACAjgC,OAAO,CAACkgC,yBAAR,GAAoCd,gBAAgB,CAACc,yBAArD;AACAlgC,OAAO,CAACmgC,yBAAR,GAAoCf,gBAAgB,CAACe,yBAArD;AACAngC,OAAO,CAACogC,sBAAR,GAAiChB,gBAAgB,CAACgB,sBAAlD;AACApgC,OAAO,CAACqgC,2BAAR,GAAsCjB,gBAAgB,CAACiB,2BAAvD;AACArgC,OAAO,CAACsgC,2BAAR,GAAsClB,gBAAgB,CAACkB,2BAAvD;AACAtgC,OAAO,CAACugC,YAAR,GAAuBnB,gBAAgB,CAACmB,YAAxC;;AACA1gC,QAAQ,CAACS,mBAAO,CAAC,gGAAD,CAAR,CAAR;;AACAT,QAAQ,CAACS,mBAAO,CAAC,kFAAD,CAAR,CAAR;;AACA,IAAMkgC,aAAa,GAAGlgC,mBAAO,CAAC,gIAAD,CAA7B;;AACA,IAAMmgC,EAAE,GAAGngC,mBAAO,CAAC,gIAAD,CAAlB;;AACA,IAAIk1B,QAAJ;;AACA,CAAC,UAAUA,QAAV,EAAoB;AACjB,MAAIkL,2BAAJ;;AACA,GAAC,UAAUA,2BAAV,EAAuC;AACpCA,+BAA2B,CAACp+B,MAA5B,GAAqCk+B,aAAa,CAACE,2BAAd,CAA0Cp+B,MAA/E;AACAo+B,+BAA2B,CAACv+B,IAA5B,GAAmCq+B,aAAa,CAACE,2BAAd,CAA0Cv+B,IAA7E;AACH,GAHD,EAGGu+B,2BAA2B,GAAGlL,QAAQ,CAACkL,2BAAT,KAAyClL,QAAQ,CAACkL,2BAAT,GAAuC,EAAhF,CAHjC;;AAIA,MAAIC,iCAAJ;;AACA,GAAC,UAAUA,iCAAV,EAA6C;AAC1CA,qCAAiC,CAACr+B,MAAlC,GAA2Ck+B,aAAa,CAACG,iCAAd,CAAgDr+B,MAA3F;AACAq+B,qCAAiC,CAACx+B,IAAlC,GAAyCq+B,aAAa,CAACG,iCAAd,CAAgDx+B,IAAzF;AACH,GAHD,EAGGw+B,iCAAiC,GAAGnL,QAAQ,CAACmL,iCAAT,KAA+CnL,QAAQ,CAACmL,iCAAT,GAA6C,EAA5F,CAHvC;;AAIA,MAAIC,iCAAJ;;AACA,GAAC,UAAUA,iCAAV,EAA6C;AAC1CA,qCAAiC,CAACt+B,MAAlC,GAA2Ck+B,aAAa,CAACI,iCAAd,CAAgDt+B,MAA3F;AACAs+B,qCAAiC,CAACz+B,IAAlC,GAAyCq+B,aAAa,CAACI,iCAAd,CAAgDz+B,IAAzF;AACH,GAHD,EAGGy+B,iCAAiC,GAAGpL,QAAQ,CAACoL,iCAAT,KAA+CpL,QAAQ,CAACoL,iCAAT,GAA6C,EAA5F,CAHvC;;AAIApL,UAAQ,CAACqL,kBAAT,GAA8BJ,EAAE,CAACI,kBAAjC;AACArL,UAAQ,CAACsL,sBAAT,GAAkCL,EAAE,CAACK,sBAArC;AACAtL,UAAQ,CAACuL,cAAT,GAA0BN,EAAE,CAACM,cAA7B;AACA,MAAIC,qBAAJ;;AACA,GAAC,UAAUA,qBAAV,EAAiC;AAC9BA,yBAAqB,CAAC1+B,MAAtB,GAA+Bm+B,EAAE,CAACO,qBAAH,CAAyB1+B,MAAxD;AACA0+B,yBAAqB,CAAC7+B,IAAtB,GAA6Bs+B,EAAE,CAACO,qBAAH,CAAyB7+B,IAAtD;AACH,GAHD,EAGG6+B,qBAAqB,GAAGxL,QAAQ,CAACwL,qBAAT,KAAmCxL,QAAQ,CAACwL,qBAAT,GAAiC,EAApE,CAH3B;;AAIA,MAAIC,0BAAJ;;AACA,GAAC,UAAUA,0BAAV,EAAsC;AACnCA,8BAA0B,CAAC3+B,MAA3B,GAAoCm+B,EAAE,CAACQ,0BAAH,CAA8B3+B,MAAlE;AACA2+B,8BAA0B,CAAC9+B,IAA3B,GAAkCs+B,EAAE,CAACQ,0BAAH,CAA8B9+B,IAAhE;AACH,GAHD,EAGG8+B,0BAA0B,GAAGzL,QAAQ,CAACyL,0BAAT,KAAwCzL,QAAQ,CAACyL,0BAAT,GAAsC,EAA9E,CAHhC;;AAIA,MAAIC,0BAAJ;;AACA,GAAC,UAAUA,0BAAV,EAAsC;AACnCA,8BAA0B,CAAC5+B,MAA3B,GAAoCm+B,EAAE,CAACS,0BAAH,CAA8B5+B,MAAlE;AACA4+B,8BAA0B,CAAC/+B,IAA3B,GAAkCs+B,EAAE,CAACS,0BAAH,CAA8B/+B,IAAhE;AACH,GAHD,EAGG++B,0BAA0B,GAAG1L,QAAQ,CAAC0L,0BAAT,KAAwC1L,QAAQ,CAAC0L,0BAAT,GAAsC,EAA9E,CAHhC;AAIH,CAlCD,EAkCG1L,QAAQ,GAAGx1B,OAAO,CAACw1B,QAAR,KAAqBx1B,OAAO,CAACw1B,QAAR,GAAmB,EAAxC,CAlCd;;AAmCA,SAAS5zB,wBAAT,CAAkCke,MAAlC,EAA0CE,MAA1C,EAAkDte,MAAlD,EAA0Dy/B,QAA1D,EAAoE;AAChE,SAAO/B,gBAAgB,CAACgC,uBAAjB,CAAyCthB,MAAzC,EAAiDE,MAAjD,EAAyDte,MAAzD,EAAiEy/B,QAAjE,CAAP;AACH;;AACDnhC,OAAO,CAAC4B,wBAAR,GAAmCA,wBAAnC,C;;;;;;;;;;;;ACjFA;;;;AAIa;;;;;;;;;;;;;;AACb1B,MAAM,CAACC,cAAP,CAAsBH,OAAtB,EAA+B,YAA/B,EAA6C;AAAEI,OAAK,EAAE;AAAT,CAA7C;;AACA,IAAMg/B,gBAAgB,GAAG9+B,mBAAO,CAAC,8GAAD,CAAhC;;IACM+gC,oB;;;;;AACF,gCAAY/+B,MAAZ,EAAoB;AAAA;;AAAA,6BACVA,MADU;AAEnB;;;EAH8B88B,gBAAgB,CAACM,Y;;AAKpD1/B,OAAO,CAACqhC,oBAAR,GAA+BA,oBAA/B;;IACMC,mB;;;;;AACF,+BAAYh/B,MAAZ,EAAoB;AAAA;;AAAA,8BACVA,MADU;AAEnB;;;EAH6B88B,gBAAgB,CAACK,W;;AAKnDz/B,OAAO,CAACshC,mBAAR,GAA8BA,mBAA9B;;IACMC,wB;;;;;AACF,oCAAYj/B,MAAZ,EAAoB;AAAA;;AAAA,8BACVA,MADU;AAEnB;;;EAHkC88B,gBAAgB,CAACO,gB;;AAKxD3/B,OAAO,CAACuhC,wBAAR,GAAmCA,wBAAnC;;IACMC,yB;;;;;AACF,qCAAYl/B,MAAZ,EAAoB;AAAA;;AAAA,8BACVA,MADU;AAEnB;;;EAHmC88B,gBAAgB,CAACQ,iB;;AAKzD5/B,OAAO,CAACwhC,yBAAR,GAAoCA,yBAApC,C;;;;;;;;;;;;AC9BA;;;;AAIa;;AACbthC,MAAM,CAACC,cAAP,CAAsBH,OAAtB,EAA+B,YAA/B,EAA6C;AAAEI,OAAK,EAAE;AAAT,CAA7C;;AACA,IAAMqhC,UAAU,GAAGnhC,mBAAO,CAAC,kFAAD,CAA1B;AACA;;;;;;;;AAMA,IAAIogC,2BAAJ;;AACA,CAAC,UAAUA,2BAAV,EAAuC;AACpCA,6BAA2B,CAACp+B,MAA5B,GAAqC,mCAArC;AACAo+B,6BAA2B,CAACv+B,IAA5B,GAAmC,IAAIs/B,UAAU,CAACH,mBAAf,CAAmCZ,2BAA2B,CAACp+B,MAA/D,CAAnC;AACH,CAHD,EAGGo+B,2BAA2B,GAAG1gC,OAAO,CAAC0gC,2BAAR,KAAwC1gC,OAAO,CAAC0gC,2BAAR,GAAsC,EAA9E,CAHjC;AAIA;;;;;;;AAKA,IAAIC,iCAAJ;;AACA,CAAC,UAAUA,iCAAV,EAA6C;AAC1CA,mCAAiC,CAACr+B,MAAlC,GAA2C,6BAA3C;AACAq+B,mCAAiC,CAACx+B,IAAlC,GAAyC,IAAIs/B,UAAU,CAACH,mBAAf,CAAmCX,iCAAiC,CAACr+B,MAArE,CAAzC;AACH,CAHD,EAGGq+B,iCAAiC,GAAG3gC,OAAO,CAAC2gC,iCAAR,KAA8C3gC,OAAO,CAAC2gC,iCAAR,GAA4C,EAA1F,CAHvC;AAIA;;;;;;;AAKA,IAAIC,iCAAJ;;AACA,CAAC,UAAUA,iCAAV,EAA6C;AAC1CA,mCAAiC,CAACt+B,MAAlC,GAA2C,6BAA3C;AACAs+B,mCAAiC,CAACz+B,IAAlC,GAAyC,IAAIs/B,UAAU,CAACH,mBAAf,CAAmCV,iCAAiC,CAACt+B,MAArE,CAAzC;AACH,CAHD,EAGGs+B,iCAAiC,GAAG5gC,OAAO,CAAC4gC,iCAAR,KAA8C5gC,OAAO,CAAC4gC,iCAAR,GAA4C,EAA1F,CAHvC,E;;;;;;;;;;;;AClCA;;;;AAIa;;AACb1gC,MAAM,CAACC,cAAP,CAAsBH,OAAtB,EAA+B,YAA/B,EAA6C;AAAEI,OAAK,EAAE;AAAT,CAA7C;;AACA,IAAMg/B,gBAAgB,GAAG9+B,mBAAO,CAAC,8GAAD,CAAhC;;AACA,IAAMmhC,UAAU,GAAGnhC,mBAAO,CAAC,kFAAD,CAA1B;AACA;;;;;;;;AAMA,IAAIwwB,oBAAJ;;AACA,CAAC,UAAUA,oBAAV,EAAgC;AAC7BA,sBAAoB,CAACxuB,MAArB,GAA8B,4BAA9B;AACAwuB,sBAAoB,CAAC3uB,IAArB,GAA4B,IAAIs/B,UAAU,CAACH,mBAAf,CAAmCxQ,oBAAoB,CAACxuB,MAAxD,CAA5B;AACA;;AACAwuB,sBAAoB,CAAC4Q,UAArB,GAAkC,IAAItC,gBAAgB,CAACmB,YAArB,EAAlC;AACH,CALD,EAKGzP,oBAAoB,GAAG9wB,OAAO,CAAC8wB,oBAAR,KAAiC9wB,OAAO,CAAC8wB,oBAAR,GAA+B,EAAhE,CAL1B;AAMA;;;;;;;;AAMA,IAAIM,wBAAJ;;AACA,CAAC,UAAUA,wBAAV,EAAoC;AACjCA,0BAAwB,CAACjvB,IAAzB,GAAgC,IAAIs/B,UAAU,CAACH,mBAAf,CAAmC,gCAAnC,CAAhC;AACH,CAFD,EAEGlQ,wBAAwB,GAAGpxB,OAAO,CAACoxB,wBAAR,KAAqCpxB,OAAO,CAACoxB,wBAAR,GAAmC,EAAxE,CAF9B,E;;;;;;;;;;;;AC5BA;;;;AAIa;;AACblxB,MAAM,CAACC,cAAP,CAAsBH,OAAtB,EAA+B,YAA/B,EAA6C;AAAEI,OAAK,EAAE;AAAT,CAA7C;;AACA,IAAMqhC,UAAU,GAAGnhC,mBAAO,CAAC,kFAAD,CAA1B;AACA;;;;;;;;;;;AASA,IAAIiyB,oBAAJ;;AACA,CAAC,UAAUA,oBAAV,EAAgC;AAC7BA,sBAAoB,CAACpwB,IAArB,GAA4B,IAAIs/B,UAAU,CAACH,mBAAf,CAAmC,yBAAnC,CAA5B;AACH,CAFD,EAEG/O,oBAAoB,GAAGvyB,OAAO,CAACuyB,oBAAR,KAAiCvyB,OAAO,CAACuyB,oBAAR,GAA+B,EAAhE,CAF1B,E;;;;;;;;;;;;ACjBA;;;;AAIa;;AACbryB,MAAM,CAACC,cAAP,CAAsBH,OAAtB,EAA+B,YAA/B,EAA6C;AAAEI,OAAK,EAAE;AAAT,CAA7C;;AACA,IAAMg/B,gBAAgB,GAAG9+B,mBAAO,CAAC,8GAAD,CAAhC;;AACA,IAAMmhC,UAAU,GAAGnhC,mBAAO,CAAC,kFAAD,CAA1B,C,CACA;;;AACA,IAAIqhC,iBAAJ;AACA;;;;;;;;;AAOA,IAAIhP,kBAAJ;;AACA,CAAC,UAAUA,kBAAV,EAA8B;AAC3BA,oBAAkB,CAACrwB,MAAnB,GAA4B,0BAA5B;AACAqwB,oBAAkB,CAACxwB,IAAnB,GAA0B,IAAIs/B,UAAU,CAACH,mBAAf,CAAmC3O,kBAAkB,CAACrwB,MAAtD,CAA1B;AACA;;AACAqwB,oBAAkB,CAAC+O,UAAnB,GAAgC,IAAItC,gBAAgB,CAACmB,YAArB,EAAhC;AACH,CALD,EAKG5N,kBAAkB,GAAG3yB,OAAO,CAAC2yB,kBAAR,KAA+B3yB,OAAO,CAAC2yB,kBAAR,GAA6B,EAA5D,CALxB,E;;;;;;;;;;;;AClBa;AACb;;;;;AAIAzyB,MAAM,CAACC,cAAP,CAAsBH,OAAtB,EAA+B,YAA/B,EAA6C;AAAEI,OAAK,EAAE;AAAT,CAA7C;;AACA,IAAMg/B,gBAAgB,GAAG9+B,mBAAO,CAAC,8GAAD,CAAhC;;AACA,IAAMmhC,UAAU,GAAGnhC,mBAAO,CAAC,kFAAD,CAA1B;AACA;;;;;AAGA,IAAIozB,gBAAJ;;AACA,CAAC,UAAUA,gBAAV,EAA4B;AACzB;;;AAGAA,kBAAgB,CAAC,SAAD,CAAhB,GAA8B,SAA9B;AACA;;;;AAGAA,kBAAgB,CAAC,SAAD,CAAhB,GAA8B,SAA9B;AACA;;;;AAGAA,kBAAgB,CAAC,QAAD,CAAhB,GAA6B,QAA7B;AACH,CAbD,EAaGA,gBAAgB,GAAG1zB,OAAO,CAAC0zB,gBAAR,KAA6B1zB,OAAO,CAAC0zB,gBAAR,GAA2B,EAAxD,CAbtB;AAcA;;;;;;;;AAMA,IAAIR,mBAAJ;;AACA,CAAC,UAAUA,mBAAV,EAA+B;AAC5BA,qBAAmB,CAAC5wB,MAApB,GAA6B,2BAA7B;AACA4wB,qBAAmB,CAAC/wB,IAApB,GAA2B,IAAIs/B,UAAU,CAACH,mBAAf,CAAmCpO,mBAAmB,CAAC5wB,MAAvD,CAA3B;AACA;;AACA4wB,qBAAmB,CAACwO,UAApB,GAAiC,IAAItC,gBAAgB,CAACmB,YAArB,EAAjC;AACH,CALD,EAKGrN,mBAAmB,GAAGlzB,OAAO,CAACkzB,mBAAR,KAAgClzB,OAAO,CAACkzB,mBAAR,GAA8B,EAA9D,CALzB,E;;;;;;;;;;;;ACjCA;;;;AAIa;;AACbhzB,MAAM,CAACC,cAAP,CAAsBH,OAAtB,EAA+B,YAA/B,EAA6C;AAAEI,OAAK,EAAE;AAAT,CAA7C;;AACA,IAAMg/B,gBAAgB,GAAG9+B,mBAAO,CAAC,8GAAD,CAAhC;;AACA,IAAMmhC,UAAU,GAAGnhC,mBAAO,CAAC,kFAAD,CAA1B,C,CACA;;;AACA,IAAIqhC,iBAAJ;AACA;;;;;;;;AAMA,IAAItN,qBAAJ;;AACA,CAAC,UAAUA,qBAAV,EAAiC;AAC9BA,uBAAqB,CAAC/xB,MAAtB,GAA+B,6BAA/B;AACA+xB,uBAAqB,CAAClyB,IAAtB,GAA6B,IAAIs/B,UAAU,CAACH,mBAAf,CAAmCjN,qBAAqB,CAAC/xB,MAAzD,CAA7B;AACA;;AACA+xB,uBAAqB,CAACqN,UAAtB,GAAmC,IAAItC,gBAAgB,CAACmB,YAArB,EAAnC;AACH,CALD,EAKGlM,qBAAqB,GAAGr0B,OAAO,CAACq0B,qBAAR,KAAkCr0B,OAAO,CAACq0B,qBAAR,GAAgC,EAAlE,CAL3B,E;;;;;;;;;;;;ACjBA;;;;AAIa;;;;;;;;AACbn0B,MAAM,CAACC,cAAP,CAAsBH,OAAtB,EAA+B,YAA/B,EAA6C;AAAEI,OAAK,EAAE;AAAT,CAA7C;;AACA,IAAMM,EAAE,GAAGJ,mBAAO,CAAC,kFAAD,CAAlB;;AACA,IAAM8+B,gBAAgB,GAAG9+B,mBAAO,CAAC,8GAAD,CAAhC;;AACA,IAAMmhC,UAAU,GAAGnhC,mBAAO,CAAC,kFAAD,CAA1B;;AACA,IAAMshC,yBAAyB,GAAGthC,mBAAO,CAAC,gHAAD,CAAzC;;AACAN,OAAO,CAACq0B,qBAAR,GAAgCuN,yBAAyB,CAACvN,qBAA1D;;AACA,IAAMwN,yBAAyB,GAAGvhC,mBAAO,CAAC,gHAAD,CAAzC;;AACAN,OAAO,CAACu8B,qBAAR,GAAgCsF,yBAAyB,CAACtF,qBAA1D;;AACA,IAAMuF,2BAA2B,GAAGxhC,mBAAO,CAAC,oHAAD,CAA3C;;AACAN,OAAO,CAAC8+B,uBAAR,GAAkCgD,2BAA2B,CAAChD,uBAA9D;AACA9+B,OAAO,CAACm/B,qCAAR,GAAgD2C,2BAA2B,CAAC3C,qCAA5E;;AACA,IAAM4C,wBAAwB,GAAGzhC,mBAAO,CAAC,8GAAD,CAAxC;;AACAN,OAAO,CAACuyB,oBAAR,GAA+BwP,wBAAwB,CAACxP,oBAAxD;;AACA,IAAMyP,wBAAwB,GAAG1hC,mBAAO,CAAC,8GAAD,CAAxC;;AACAN,OAAO,CAAC8wB,oBAAR,GAA+BkR,wBAAwB,CAAClR,oBAAxD;AACA9wB,OAAO,CAACoxB,wBAAR,GAAmC4Q,wBAAwB,CAAC5Q,wBAA5D;;AACA,IAAM6Q,uBAAuB,GAAG3hC,mBAAO,CAAC,4GAAD,CAAvC;;AACAN,OAAO,CAACkzB,mBAAR,GAA8B+O,uBAAuB,CAAC/O,mBAAtD;;AACA,IAAMgP,sBAAsB,GAAG5hC,mBAAO,CAAC,0GAAD,CAAtC;;AACAN,OAAO,CAAC2yB,kBAAR,GAA6BuP,sBAAsB,CAACvP,kBAApD;;AACA,IAAMwP,yBAAyB,GAAG7hC,mBAAO,CAAC,gHAAD,CAAzC;;AACAN,OAAO,CAACoiC,qBAAR,GAAgCD,yBAAyB,CAACC,qBAA1D;;AACA,IAAMC,mBAAmB,GAAG/hC,mBAAO,CAAC,oGAAD,CAAnC;;AACAN,OAAO,CAACy1B,gBAAR,GAA2B4M,mBAAmB,CAAC5M,gBAA/C;AACAz1B,OAAO,CAACsiC,6BAAR,GAAwCD,mBAAmB,CAACC,6BAA5D;AACAtiC,OAAO,CAACy2B,kCAAR,GAA6C4L,mBAAmB,CAAC5L,kCAAjE,C,CACA;;AACA,IAAIkL,iBAAJ;AACA;;;;;;AAIA,IAAIY,cAAJ;;AACA,CAAC,UAAUA,cAAV,EAA0B;AACvB,WAASx5B,EAAT,CAAY3I,KAAZ,EAAmB;AACf,QAAM4I,SAAS,GAAG5I,KAAlB;AACA,WAAOM,EAAE,CAAC2B,MAAH,CAAU2G,SAAS,CAACouB,QAApB,KAAiC12B,EAAE,CAAC2B,MAAH,CAAU2G,SAAS,CAAC8e,MAApB,CAAjC,IAAgEpnB,EAAE,CAAC2B,MAAH,CAAU2G,SAAS,CAACw5B,OAApB,CAAvE;AACH;;AACDD,gBAAc,CAACx5B,EAAf,GAAoBA,EAApB;AACH,CAND,EAMGw5B,cAAc,GAAGviC,OAAO,CAACuiC,cAAR,KAA2BviC,OAAO,CAACuiC,cAAR,GAAyB,EAApD,CANpB;AAOA;;;;;;AAIA,IAAIE,gBAAJ;;AACA,CAAC,UAAUA,gBAAV,EAA4B;AACzB,WAAS15B,EAAT,CAAY3I,KAAZ,EAAmB;AACf,QAAI,CAACsH,KAAK,CAACiI,OAAN,CAAcvP,KAAd,CAAL,EAA2B;AACvB,aAAO,KAAP;AACH;;AAHc,+CAIEA,KAJF;AAAA;;AAAA;AAIf,0DAAwB;AAAA,YAAfstB,IAAe;;AACpB,YAAI,CAAChtB,EAAE,CAAC2B,MAAH,CAAUqrB,IAAV,CAAD,IAAoB,CAAC6U,cAAc,CAACx5B,EAAf,CAAkB2kB,IAAlB,CAAzB,EAAkD;AAC9C,iBAAO,KAAP;AACH;AACJ;AARc;AAAA;AAAA;AAAA;AAAA;;AASf,WAAO,IAAP;AACH;;AACD+U,kBAAgB,CAAC15B,EAAjB,GAAsBA,EAAtB;AACH,CAbD,EAaG05B,gBAAgB,GAAGziC,OAAO,CAACyiC,gBAAR,KAA6BziC,OAAO,CAACyiC,gBAAR,GAA2B,EAAxD,CAbtB;AAcA;;;;;;AAIA,IAAIzb,mBAAJ;;AACA,CAAC,UAAUA,mBAAV,EAA+B;AAC5BA,qBAAmB,CAAC7kB,IAApB,GAA2B,IAAIs/B,UAAU,CAACH,mBAAf,CAAmC,2BAAnC,CAA3B;AACH,CAFD,EAEGta,mBAAmB,GAAGhnB,OAAO,CAACgnB,mBAAR,KAAgChnB,OAAO,CAACgnB,mBAAR,GAA8B,EAA9D,CAFzB;AAGA;;;;;;AAIA,IAAIE,qBAAJ;;AACA,CAAC,UAAUA,qBAAV,EAAiC;AAC9BA,uBAAqB,CAAC/kB,IAAtB,GAA6B,IAAIs/B,UAAU,CAACH,mBAAf,CAAmC,6BAAnC,CAA7B;AACH,CAFD,EAEGpa,qBAAqB,GAAGlnB,OAAO,CAACknB,qBAAR,KAAkClnB,OAAO,CAACknB,qBAAR,GAAgC,EAAlE,CAF3B;;AAGA,IAAI4C,qBAAJ;;AACA,CAAC,UAAUA,qBAAV,EAAiC;AAC9B;;;AAGAA,uBAAqB,CAACzZ,MAAtB,GAA+B,QAA/B;AACA;;;;AAGAyZ,uBAAqB,CAACC,MAAtB,GAA+B,QAA/B;AACA;;;;AAGAD,uBAAqB,CAACvZ,MAAtB,GAA+B,QAA/B;AACH,CAbD,EAaGuZ,qBAAqB,GAAG9pB,OAAO,CAAC8pB,qBAAR,KAAkC9pB,OAAO,CAAC8pB,qBAAR,GAAgC,EAAlE,CAb3B;;AAcA,IAAIG,mBAAJ;;AACA,CAAC,UAAUA,mBAAV,EAA+B;AAC5B;;;;AAIAA,qBAAmB,CAACyY,KAApB,GAA4B,OAA5B;AACA;;;;;AAIAzY,qBAAmB,CAAC0Y,aAApB,GAAoC,eAApC;AACA;;;;;;AAKA1Y,qBAAmB,CAACC,qBAApB,GAA4C,uBAA5C;AACA;;;;;AAIAD,qBAAmB,CAAC2Y,IAApB,GAA2B,MAA3B;AACH,CAtBD,EAsBG3Y,mBAAmB,GAAGjqB,OAAO,CAACiqB,mBAAR,KAAgCjqB,OAAO,CAACiqB,mBAAR,GAA8B,EAA9D,CAtBzB;AAuBA;;;;;;AAIA,IAAInY,yBAAJ;;AACA,CAAC,UAAUA,yBAAV,EAAqC;AAClC,WAASC,KAAT,CAAe3R,KAAf,EAAsB;AAClB,QAAM4I,SAAS,GAAG5I,KAAlB;AACA,WAAO4I,SAAS,IAAItI,EAAE,CAAC2B,MAAH,CAAU2G,SAAS,CAACmB,EAApB,CAAb,IAAwCnB,SAAS,CAACmB,EAAV,CAAatE,MAAb,GAAsB,CAArE;AACH;;AACDiM,2BAAyB,CAACC,KAA1B,GAAkCA,KAAlC;AACH,CAND,EAMGD,yBAAyB,GAAG9R,OAAO,CAAC8R,yBAAR,KAAsC9R,OAAO,CAAC8R,yBAAR,GAAoC,EAA1E,CAN/B;AAOA;;;;;;AAIA,IAAID,+BAAJ;;AACA,CAAC,UAAUA,+BAAV,EAA2C;AACxC,WAAS9I,EAAT,CAAY3I,KAAZ,EAAmB;AACf,QAAM4I,SAAS,GAAG5I,KAAlB;AACA,WAAO4I,SAAS,KAAKA,SAAS,CAACe,gBAAV,KAA+B,IAA/B,IAAuC04B,gBAAgB,CAAC15B,EAAjB,CAAoBC,SAAS,CAACe,gBAA9B,CAA5C,CAAhB;AACH;;AACD8H,iCAA+B,CAAC9I,EAAhC,GAAqCA,EAArC;AACH,CAND,EAMG8I,+BAA+B,GAAG7R,OAAO,CAAC6R,+BAAR,KAA4C7R,OAAO,CAAC6R,+BAAR,GAA0C,EAAtF,CANrC;AAOA;;;;;;AAIA,IAAIG,uBAAJ;;AACA,CAAC,UAAUA,uBAAV,EAAmC;AAChC,WAASjJ,EAAT,CAAY3I,KAAZ,EAAmB;AACf,QAAM4I,SAAS,GAAG5I,KAAlB;AACA,WAAOM,EAAE,CAACmiC,aAAH,CAAiB75B,SAAjB,MAAgCA,SAAS,CAACgP,gBAAV,KAA+BxU,SAA/B,IAA4C9C,EAAE,WAAF,CAAWsI,SAAS,CAACgP,gBAArB,CAA5E,CAAP;AACH;;AACDhG,yBAAuB,CAACjJ,EAAxB,GAA6BA,EAA7B;;AACA,WAAS+5B,mBAAT,CAA6B1iC,KAA7B,EAAoC;AAChC,QAAM4I,SAAS,GAAG5I,KAAlB;AACA,WAAO4I,SAAS,IAAItI,EAAE,WAAF,CAAWsI,SAAS,CAACgP,gBAArB,CAApB;AACH;;AACDhG,yBAAuB,CAAC8wB,mBAAxB,GAA8CA,mBAA9C;AACH,CAXD,EAWG9wB,uBAAuB,GAAGhS,OAAO,CAACgS,uBAAR,KAAoChS,OAAO,CAACgS,uBAAR,GAAkC,EAAtE,CAX7B;AAYA;;;;;;;;;AAOA,IAAI3O,iBAAJ;;AACA,CAAC,UAAUA,iBAAV,EAA6B;AAC1BA,mBAAiB,CAAClB,IAAlB,GAAyB,IAAIs/B,UAAU,CAACH,mBAAf,CAAmC,YAAnC,CAAzB;AACH,CAFD,EAEGj+B,iBAAiB,GAAGrD,OAAO,CAACqD,iBAAR,KAA8BrD,OAAO,CAACqD,iBAAR,GAA4B,EAA1D,CAFvB;AAGA;;;;;AAGA,IAAI0/B,eAAJ;;AACA,CAAC,UAAUA,eAAV,EAA2B;AACxB;;;;;AAKAA,iBAAe,CAACC,sBAAhB,GAAyC,CAAzC;AACH,CAPD,EAOGD,eAAe,GAAG/iC,OAAO,CAAC+iC,eAAR,KAA4B/iC,OAAO,CAAC+iC,eAAR,GAA0B,EAAtD,CAPrB;AAQA;;;;;;;AAKA,IAAIzb,uBAAJ;;AACA,CAAC,UAAUA,uBAAV,EAAmC;AAChCA,yBAAuB,CAACnlB,IAAxB,GAA+B,IAAIs/B,UAAU,CAACF,wBAAf,CAAwC,aAAxC,CAA/B;AACH,CAFD,EAEGja,uBAAuB,GAAGtnB,OAAO,CAACsnB,uBAAR,KAAoCtnB,OAAO,CAACsnB,uBAAR,GAAkC,EAAtE,CAF7B,E,CAGA;;AACA;;;;;;;;AAMA,IAAI/jB,eAAJ;;AACA,CAAC,UAAUA,eAAV,EAA2B;AACxBA,iBAAe,CAACpB,IAAhB,GAAuB,IAAIs/B,UAAU,CAACJ,oBAAf,CAAoC,UAApC,CAAvB;AACH,CAFD,EAEG99B,eAAe,GAAGvD,OAAO,CAACuD,eAAR,KAA4BvD,OAAO,CAACuD,eAAR,GAA0B,EAAtD,CAFrB,E,CAGA;;AACA;;;;;;AAIA,IAAIG,gBAAJ;;AACA,CAAC,UAAUA,gBAAV,EAA4B;AACzBA,kBAAgB,CAACvB,IAAjB,GAAwB,IAAIs/B,UAAU,CAACD,yBAAf,CAAyC,MAAzC,CAAxB;AACH,CAFD,EAEG99B,gBAAgB,GAAG1D,OAAO,CAAC0D,gBAAR,KAA6B1D,OAAO,CAAC0D,gBAAR,GAA2B,EAAxD,CAFtB;AAGA;;;;;;;AAKA,IAAIQ,kCAAJ;;AACA,CAAC,UAAUA,kCAAV,EAA8C;AAC3CA,oCAAkC,CAAC/B,IAAnC,GAA0C,IAAIs/B,UAAU,CAACF,wBAAf,CAAwC,kCAAxC,CAA1C;AACH,CAFD,EAEGr9B,kCAAkC,GAAGlE,OAAO,CAACkE,kCAAR,KAA+ClE,OAAO,CAACkE,kCAAR,GAA6C,EAA5F,CAFxC,E,CAGA;;AACA;;;;;AAGA,IAAIygB,WAAJ;;AACA,CAAC,UAAUA,WAAV,EAAuB;AACpB;;;AAGAA,aAAW,CAAClT,KAAZ,GAAoB,CAApB;AACA;;;;AAGAkT,aAAW,CAACC,OAAZ,GAAsB,CAAtB;AACA;;;;AAGAD,aAAW,CAACb,IAAZ,GAAmB,CAAnB;AACA;;;;AAGAa,aAAW,CAACse,GAAZ,GAAkB,CAAlB;AACH,CAjBD,EAiBGte,WAAW,GAAG3kB,OAAO,CAAC2kB,WAAR,KAAwB3kB,OAAO,CAAC2kB,WAAR,GAAsB,EAA9C,CAjBjB;AAkBA;;;;;;AAIA,IAAI7gB,uBAAJ;;AACA,CAAC,UAAUA,uBAAV,EAAmC;AAChCA,yBAAuB,CAAC3B,IAAxB,GAA+B,IAAIs/B,UAAU,CAACF,wBAAf,CAAwC,oBAAxC,CAA/B;AACH,CAFD,EAEGz9B,uBAAuB,GAAG9D,OAAO,CAAC8D,uBAAR,KAAoC9D,OAAO,CAAC8D,uBAAR,GAAkC,EAAtE,CAF7B;AAGA;;;;;;AAIA,IAAIghB,kBAAJ;;AACA,CAAC,UAAUA,kBAAV,EAA8B;AAC3BA,oBAAkB,CAAC3iB,IAAnB,GAA0B,IAAIs/B,UAAU,CAACH,mBAAf,CAAmC,2BAAnC,CAA1B;AACH,CAFD,EAEGxc,kBAAkB,GAAG9kB,OAAO,CAAC8kB,kBAAR,KAA+B9kB,OAAO,CAAC8kB,kBAAR,GAA6B,EAA5D,CAFxB;AAGA;;;;;;AAIA,IAAIlhB,sBAAJ;;AACA,CAAC,UAAUA,sBAAV,EAAkC;AAC/BA,wBAAsB,CAACzB,IAAvB,GAA8B,IAAIs/B,UAAU,CAACF,wBAAf,CAAwC,mBAAxC,CAA9B;AACH,CAFD,EAEG39B,sBAAsB,GAAG5D,OAAO,CAAC4D,sBAAR,KAAmC5D,OAAO,CAAC4D,sBAAR,GAAiC,EAApE,CAF5B,E,CAGA;;AACA;;;;;;AAIA,IAAII,0BAAJ;;AACA,CAAC,UAAUA,0BAAV,EAAsC;AACnCA,4BAA0B,CAAC7B,IAA3B,GAAkC,IAAIs/B,UAAU,CAACF,wBAAf,CAAwC,iBAAxC,CAAlC;AACH,CAFD,EAEGv9B,0BAA0B,GAAGhE,OAAO,CAACgE,0BAAR,KAAuChE,OAAO,CAACgE,0BAAR,GAAqC,EAA5E,CAFhC;AAGA;;;;;;AAIA,IAAI6I,oBAAJ;;AACA,CAAC,UAAUA,oBAAV,EAAgC;AAC7B;;;AAGAA,sBAAoB,CAACC,IAArB,GAA4B,CAA5B;AACA;;;;;AAIAD,sBAAoB,CAACY,IAArB,GAA4B,CAA5B;AACA;;;;;;AAKAZ,sBAAoB,CAACS,WAArB,GAAmC,CAAnC;AACH,CAhBD,EAgBGT,oBAAoB,GAAG7M,OAAO,CAAC6M,oBAAR,KAAiC7M,OAAO,CAAC6M,oBAAR,GAA+B,EAAhE,CAhB1B;AAiBA;;;;;;;;;;;;AAUA,IAAIvI,+BAAJ;;AACA,CAAC,UAAUA,+BAAV,EAA2C;AACxCA,iCAA+B,CAAChC,MAAhC,GAAyC,sBAAzC;AACAgC,iCAA+B,CAACnC,IAAhC,GAAuC,IAAIs/B,UAAU,CAACF,wBAAf,CAAwCj9B,+BAA+B,CAAChC,MAAxE,CAAvC;AACH,CAHD,EAGGgC,+BAA+B,GAAGtE,OAAO,CAACsE,+BAAR,KAA4CtE,OAAO,CAACsE,+BAAR,GAA0C,EAAtF,CAHrC;AAIA;;;;;;AAIA,IAAIE,iCAAJ;;AACA,CAAC,UAAUA,iCAAV,EAA6C;AAC1CA,mCAAiC,CAAClC,MAAlC,GAA2C,wBAA3C;AACAkC,mCAAiC,CAACrC,IAAlC,GAAyC,IAAIs/B,UAAU,CAACF,wBAAf,CAAwC/8B,iCAAiC,CAAClC,MAA1E,CAAzC;AACH,CAHD,EAGGkC,iCAAiC,GAAGxE,OAAO,CAACwE,iCAAR,KAA8CxE,OAAO,CAACwE,iCAAR,GAA4C,EAA1F,CAHvC;AAIA;;;;;;;;;;;AASA,IAAIE,gCAAJ;;AACA,CAAC,UAAUA,gCAAV,EAA4C;AACzCA,kCAAgC,CAACpC,MAAjC,GAA0C,uBAA1C;AACAoC,kCAAgC,CAACvC,IAAjC,GAAwC,IAAIs/B,UAAU,CAACF,wBAAf,CAAwC78B,gCAAgC,CAACpC,MAAzE,CAAxC;AACH,CAHD,EAGGoC,gCAAgC,GAAG1E,OAAO,CAAC0E,gCAAR,KAA6C1E,OAAO,CAAC0E,gCAAR,GAA2C,EAAxF,CAHtC;AAIA;;;;;;AAIA,IAAIE,+BAAJ;;AACA,CAAC,UAAUA,+BAAV,EAA2C;AACxCA,iCAA+B,CAACtC,MAAhC,GAAyC,sBAAzC;AACAsC,iCAA+B,CAACzC,IAAhC,GAAuC,IAAIs/B,UAAU,CAACF,wBAAf,CAAwC38B,+BAA+B,CAACtC,MAAxE,CAAvC;AACH,CAHD,EAGGsC,+BAA+B,GAAG5E,OAAO,CAAC4E,+BAAR,KAA4C5E,OAAO,CAAC4E,+BAAR,GAA0C,EAAtF,CAHrC;AAIA;;;;;AAGA,IAAIioB,sBAAJ;;AACA,CAAC,UAAUA,sBAAV,EAAkC;AAC/B;;;;AAIAA,wBAAsB,CAACC,MAAvB,GAAgC,CAAhC;AACA;;;;AAGAD,wBAAsB,CAACE,UAAvB,GAAoC,CAApC;AACA;;;;AAGAF,wBAAsB,CAACG,QAAvB,GAAkC,CAAlC;AACH,CAdD,EAcGH,sBAAsB,GAAG7sB,OAAO,CAAC6sB,sBAAR,KAAmC7sB,OAAO,CAAC6sB,sBAAR,GAAiC,EAApE,CAd5B;AAeA;;;;;;AAIA,IAAI5e,gCAAJ;;AACA,CAAC,UAAUA,gCAAV,EAA4C;AACzCA,kCAAgC,CAAC3L,MAAjC,GAA0C,uBAA1C;AACA2L,kCAAgC,CAAC9L,IAAjC,GAAwC,IAAIs/B,UAAU,CAACF,wBAAf,CAAwCtzB,gCAAgC,CAAC3L,MAAzE,CAAxC;AACH,CAHD,EAGG2L,gCAAgC,GAAGjO,OAAO,CAACiO,gCAAR,KAA6CjO,OAAO,CAACiO,gCAAR,GAA2C,EAAxF,CAHtC;AAIA;;;;;;;;;;AAQA,IAAIM,oCAAJ;;AACA,CAAC,UAAUA,oCAAV,EAAgD;AAC7CA,sCAAoC,CAACjM,MAArC,GAA8C,gCAA9C;AACAiM,sCAAoC,CAACpM,IAArC,GAA4C,IAAIs/B,UAAU,CAACH,mBAAf,CAAmC/yB,oCAAoC,CAACjM,MAAxE,CAA5C;AACH,CAHD,EAGGiM,oCAAoC,GAAGvO,OAAO,CAACuO,oCAAR,KAAiDvO,OAAO,CAACuO,oCAAR,GAA+C,EAAhG,CAH1C;AAIA;;;;;;AAIA,IAAInK,iCAAJ;;AACA,CAAC,UAAUA,iCAAV,EAA6C;AAC1CA,mCAAiC,CAACjC,IAAlC,GAAyC,IAAIs/B,UAAU,CAACF,wBAAf,CAAwC,iCAAxC,CAAzC;AACH,CAFD,EAEGn9B,iCAAiC,GAAGpE,OAAO,CAACoE,iCAAR,KAA8CpE,OAAO,CAACoE,iCAAR,GAA4C,EAA1F,CAFvC;AAGA;;;;;AAGA,IAAI4M,cAAJ;;AACA,CAAC,UAAUA,cAAV,EAA0B;AACvB;;;AAGAA,gBAAc,CAACC,OAAf,GAAyB,CAAzB;AACA;;;;AAGAD,gBAAc,CAACG,OAAf,GAAyB,CAAzB;AACA;;;;AAGAH,gBAAc,CAACK,OAAf,GAAyB,CAAzB;AACH,CAbD,EAaGL,cAAc,GAAGhR,OAAO,CAACgR,cAAR,KAA2BhR,OAAO,CAACgR,cAAR,GAAyB,EAApD,CAbpB;;AAcA,IAAIZ,SAAJ;;AACA,CAAC,UAAUA,SAAV,EAAqB;AAClB;;;AAGAA,WAAS,CAACC,MAAV,GAAmB,CAAnB;AACA;;;;AAGAD,WAAS,CAACE,MAAV,GAAmB,CAAnB;AACA;;;;AAGAF,WAAS,CAACG,MAAV,GAAmB,CAAnB;AACH,CAbD,EAaGH,SAAS,GAAGpQ,OAAO,CAACoQ,SAAR,KAAsBpQ,OAAO,CAACoQ,SAAR,GAAoB,EAA1C,CAbf;AAcA;;;;;;AAIA,IAAItL,8BAAJ;;AACA,CAAC,UAAUA,8BAAV,EAA0C;AACvCA,gCAA8B,CAAC3C,IAA/B,GAAsC,IAAIs/B,UAAU,CAACF,wBAAf,CAAwC,iCAAxC,CAAtC;AACH,CAFD,EAEGz8B,8BAA8B,GAAG9E,OAAO,CAAC8E,8BAAR,KAA2C9E,OAAO,CAAC8E,8BAAR,GAAyC,EAApF,CAFpC;AAGA;;;;;AAGA,IAAIsoB,qBAAJ;;AACA,CAAC,UAAUA,qBAAV,EAAiC;AAC9B;;;;AAIAA,uBAAqB,CAACG,OAAtB,GAAgC,CAAhC;AACA;;;;;AAIAH,uBAAqB,CAACC,gBAAtB,GAAyC,CAAzC;AACA;;;;AAGAD,uBAAqB,CAACE,+BAAtB,GAAwD,CAAxD;AACH,CAfD,EAeGF,qBAAqB,GAAGptB,OAAO,CAACotB,qBAAR,KAAkCptB,OAAO,CAACotB,qBAAR,GAAgC,EAAlE,CAf3B;AAgBA;;;;;;;;;;;;;AAWA,IAAIhb,iBAAJ;;AACA,CAAC,UAAUA,iBAAV,EAA6B;AAC1BA,mBAAiB,CAAC9P,MAAlB,GAA2B,yBAA3B;AACA8P,mBAAiB,CAACjQ,IAAlB,GAAyB,IAAIs/B,UAAU,CAACH,mBAAf,CAAmClvB,iBAAiB,CAAC9P,MAArD,CAAzB;AACA;;AACA8P,mBAAiB,CAACsvB,UAAlB,GAA+B,IAAItC,gBAAgB,CAACmB,YAArB,EAA/B;AACH,CALD,EAKGnuB,iBAAiB,GAAGpS,OAAO,CAACoS,iBAAR,KAA8BpS,OAAO,CAACoS,iBAAR,GAA4B,EAA1D,CALvB;AAMA;;;;;;;AAKA,IAAI6B,wBAAJ;;AACA,CAAC,UAAUA,wBAAV,EAAoC;AACjCA,0BAAwB,CAAC3R,MAAzB,GAAkC,wBAAlC;AACA2R,0BAAwB,CAAC9R,IAAzB,GAAgC,IAAIs/B,UAAU,CAACH,mBAAf,CAAmCrtB,wBAAwB,CAAC3R,MAA5D,CAAhC;AACH,CAHD,EAGG2R,wBAAwB,GAAGjU,OAAO,CAACiU,wBAAR,KAAqCjU,OAAO,CAACiU,wBAAR,GAAmC,EAAxE,CAH9B;AAIA;;;;;;;AAKA,IAAIM,YAAJ;;AACA,CAAC,UAAUA,YAAV,EAAwB;AACrBA,cAAY,CAACjS,MAAb,GAAsB,oBAAtB;AACAiS,cAAY,CAACpS,IAAb,GAAoB,IAAIs/B,UAAU,CAACH,mBAAf,CAAmC/sB,YAAY,CAACjS,MAAhD,CAApB;AACH,CAHD,EAGGiS,YAAY,GAAGvU,OAAO,CAACuU,YAAR,KAAyBvU,OAAO,CAACuU,YAAR,GAAuB,EAAhD,CAHlB;AAIA;;;;;;;AAKA,IAAI2uB,wBAAJ;;AACA,CAAC,UAAUA,wBAAV,EAAoC;AACjC;;;AAGAA,0BAAwB,CAAC3V,OAAzB,GAAmC,CAAnC;AACA;;;;AAGA2V,0BAAwB,CAAC7V,gBAAzB,GAA4C,CAA5C;AACA;;;;AAGA6V,0BAAwB,CAACC,aAAzB,GAAyC,CAAzC;AACH,CAbD,EAaGD,wBAAwB,GAAGljC,OAAO,CAACkjC,wBAAR,KAAqCljC,OAAO,CAACkjC,wBAAR,GAAmC,EAAxE,CAb9B;;AAcA,IAAIluB,oBAAJ;;AACA,CAAC,UAAUA,oBAAV,EAAgC;AAC7BA,sBAAoB,CAAC1S,MAArB,GAA8B,4BAA9B;AACA0S,sBAAoB,CAAC7S,IAArB,GAA4B,IAAIs/B,UAAU,CAACH,mBAAf,CAAmCtsB,oBAAoB,CAAC1S,MAAxD,CAA5B;AACH,CAHD,EAGG0S,oBAAoB,GAAGhV,OAAO,CAACgV,oBAAR,KAAiChV,OAAO,CAACgV,oBAAR,GAA+B,EAAhE,CAH1B;AAIA;;;;;;;;;AAOA,IAAIW,iBAAJ;;AACA,CAAC,UAAUA,iBAAV,EAA6B;AAC1BA,mBAAiB,CAACrT,MAAlB,GAA2B,yBAA3B;AACAqT,mBAAiB,CAACxT,IAAlB,GAAyB,IAAIs/B,UAAU,CAACH,mBAAf,CAAmC3rB,iBAAiB,CAACrT,MAArD,CAAzB;AACA;;AACAqT,mBAAiB,CAAC+rB,UAAlB,GAA+B,IAAItC,gBAAgB,CAACmB,YAArB,EAA/B;AACH,CALD,EAKG5qB,iBAAiB,GAAG3V,OAAO,CAAC2V,iBAAR,KAA8B3V,OAAO,CAAC2V,iBAAR,GAA4B,EAA1D,CALvB;AAMA;;;;;;;;AAMA,IAAIQ,iBAAJ;;AACA,CAAC,UAAUA,iBAAV,EAA6B;AAC1BA,mBAAiB,CAAC7T,MAAlB,GAA2B,yBAA3B;AACA6T,mBAAiB,CAAChU,IAAlB,GAAyB,IAAIs/B,UAAU,CAACH,mBAAf,CAAmCnrB,iBAAiB,CAAC7T,MAArD,CAAzB;AACA;;AACA6T,mBAAiB,CAACurB,UAAlB,GAA+B,IAAItC,gBAAgB,CAACmB,YAArB,EAA/B;AACH,CALD,EAKGpqB,iBAAiB,GAAGnW,OAAO,CAACmW,iBAAR,KAA8BnW,OAAO,CAACmW,iBAAR,GAA4B,EAA1D,CALvB;AAMA;;;;;;;;AAMA,IAAIQ,wBAAJ;;AACA,CAAC,UAAUA,wBAAV,EAAoC;AACjCA,0BAAwB,CAACrU,MAAzB,GAAkC,gCAAlC;AACAqU,0BAAwB,CAACxU,IAAzB,GAAgC,IAAIs/B,UAAU,CAACH,mBAAf,CAAmC3qB,wBAAwB,CAACrU,MAA5D,CAAhC;AACA;;AACAqU,0BAAwB,CAAC+qB,UAAzB,GAAsC,IAAItC,gBAAgB,CAACmB,YAArB,EAAtC;AACH,CALD,EAKG5pB,wBAAwB,GAAG3W,OAAO,CAAC2W,wBAAR,KAAqC3W,OAAO,CAAC2W,wBAAR,GAAmC,EAAxE,CAL9B;AAMA;;;;;;;;AAMA,IAAIM,qBAAJ;;AACA,CAAC,UAAUA,qBAAV,EAAiC;AAC9BA,uBAAqB,CAAC3U,MAAtB,GAA+B,6BAA/B;AACA2U,uBAAqB,CAAC9U,IAAtB,GAA6B,IAAIs/B,UAAU,CAACH,mBAAf,CAAmCrqB,qBAAqB,CAAC3U,MAAzD,CAA7B;AACA;;AACA2U,uBAAqB,CAACyqB,UAAtB,GAAmC,IAAItC,gBAAgB,CAACmB,YAArB,EAAnC;AACH,CALD,EAKGtpB,qBAAqB,GAAGjX,OAAO,CAACiX,qBAAR,KAAkCjX,OAAO,CAACiX,qBAAR,GAAgC,EAAlE,CAL3B;AAMA;;;;;AAGA,IAAIqB,iBAAJ;;AACA,CAAC,UAAUA,iBAAV,EAA6B;AAC1BA,mBAAiB,CAAChW,MAAlB,GAA2B,yBAA3B;AACAgW,mBAAiB,CAACnW,IAAlB,GAAyB,IAAIs/B,UAAU,CAACH,mBAAf,CAAmChpB,iBAAiB,CAAChW,MAArD,CAAzB;AACA;;AACAgW,mBAAiB,CAACopB,UAAlB,GAA+B,IAAItC,gBAAgB,CAACmB,YAArB,EAA/B;AACH,CALD,EAKGjoB,iBAAiB,GAAGtY,OAAO,CAACsY,iBAAR,KAA8BtY,OAAO,CAACsY,iBAAR,GAA4B,EAA1D,CALvB;AAMA;;;;;;;;AAMA,IAAIR,sBAAJ;;AACA,CAAC,UAAUA,sBAAV,EAAkC;AAC/BA,wBAAsB,CAACxV,MAAvB,GAAgC,kBAAhC;AACAwV,wBAAsB,CAAC3V,IAAvB,GAA8B,IAAIs/B,UAAU,CAACH,mBAAf,CAAmCxpB,sBAAsB,CAACxV,MAA1D,CAA9B;AACA;;AACAwV,wBAAsB,CAAC4pB,UAAvB,GAAoC,IAAItC,gBAAgB,CAACmB,YAArB,EAApC;AACH,CALD,EAKGzoB,sBAAsB,GAAG9X,OAAO,CAAC8X,sBAAR,KAAmC9X,OAAO,CAAC8X,sBAAR,GAAiC,EAApE,CAL5B;AAMA;;;;;AAGA,IAAImC,eAAJ;;AACA,CAAC,UAAUA,eAAV,EAA2B;AACxBA,iBAAe,CAAC9X,IAAhB,GAAuB,IAAIs/B,UAAU,CAACH,mBAAf,CAAmC,uBAAnC,CAAvB;AACA;;AACArnB,iBAAe,CAACynB,UAAhB,GAA6B,IAAItC,gBAAgB,CAACmB,YAArB,EAA7B;AACH,CAJD,EAIGtmB,eAAe,GAAGja,OAAO,CAACia,eAAR,KAA4Bja,OAAO,CAACia,eAAR,GAA0B,EAAtD,CAJrB;AAKA;;;;;AAGA,IAAIO,sBAAJ;;AACA,CAAC,UAAUA,sBAAV,EAAkC;AAC/BA,wBAAsB,CAACrY,IAAvB,GAA8B,IAAIs/B,UAAU,CAACH,mBAAf,CAAmC,kBAAnC,CAA9B;AACH,CAFD,EAEG9mB,sBAAsB,GAAGxa,OAAO,CAACwa,sBAAR,KAAmCxa,OAAO,CAACwa,sBAAR,GAAiC,EAApE,CAF5B;AAGA;;;;;AAGA,IAAIuC,mBAAJ;;AACA,CAAC,UAAUA,mBAAV,EAA+B;AAC5BA,qBAAmB,CAACza,MAApB,GAA6B,2BAA7B;AACAya,qBAAmB,CAAC5a,IAApB,GAA2B,IAAIs/B,UAAU,CAACH,mBAAf,CAAmCvkB,mBAAmB,CAACza,MAAvD,CAA3B;AACA;;AACAya,qBAAmB,CAAC2kB,UAApB,GAAiC,IAAItC,gBAAgB,CAACmB,YAArB,EAAjC;AACH,CALD,EAKGxjB,mBAAmB,GAAG/c,OAAO,CAAC+c,mBAAR,KAAgC/c,OAAO,CAAC+c,mBAAR,GAA8B,EAA9D,CALzB;AAMA;;;;;;;AAKA,IAAIO,0BAAJ;;AACA,CAAC,UAAUA,0BAAV,EAAsC;AACnCA,4BAA0B,CAACnb,IAA3B,GAAkC,IAAIs/B,UAAU,CAACH,mBAAf,CAAmC,sBAAnC,CAAlC;AACH,CAFD,EAEGhkB,0BAA0B,GAAGtd,OAAO,CAACsd,0BAAR,KAAuCtd,OAAO,CAACsd,0BAAR,GAAqC,EAA5E,CAFhC;AAGA;;;;;AAGA,IAAI1C,yBAAJ;;AACA,CAAC,UAAUA,yBAAV,EAAqC;AAClCA,2BAAyB,CAACtY,MAA1B,GAAmC,yBAAnC;AACAsY,2BAAyB,CAACzY,IAA1B,GAAiC,IAAIs/B,UAAU,CAACH,mBAAf,CAAmC1mB,yBAAyB,CAACtY,MAA7D,CAAjC;AACH,CAHD,EAGGsY,yBAAyB,GAAG5a,OAAO,CAAC4a,yBAAR,KAAsC5a,OAAO,CAAC4a,yBAAR,GAAoC,EAA1E,CAH/B;AAIA;;;;;AAGA,IAAIM,8BAAJ;;AACA,CAAC,UAAUA,8BAAV,EAA0C;AACvCA,gCAA8B,CAAC5Y,MAA/B,GAAwC,8BAAxC;AACA4Y,gCAA8B,CAAC/Y,IAA/B,GAAsC,IAAIs/B,UAAU,CAACH,mBAAf,CAAmCpmB,8BAA8B,CAAC5Y,MAAlE,CAAtC;AACH,CAHD,EAGG4Y,8BAA8B,GAAGlb,OAAO,CAACkb,8BAAR,KAA2Clb,OAAO,CAACkb,8BAAR,GAAyC,EAApF,CAHpC;AAIA;;;;;AAGA,IAAIK,+BAAJ;;AACA,CAAC,UAAUA,+BAAV,EAA2C;AACxCA,iCAA+B,CAACjZ,MAAhC,GAAyC,+BAAzC;AACAiZ,iCAA+B,CAACpZ,IAAhC,GAAuC,IAAIs/B,UAAU,CAACH,mBAAf,CAAmC/lB,+BAA+B,CAACjZ,MAAnE,CAAvC;AACH,CAHD,EAGGiZ,+BAA+B,GAAGvb,OAAO,CAACub,+BAAR,KAA4Cvb,OAAO,CAACub,+BAAR,GAA0C,EAAtF,CAHrC;AAIA;;;;;AAGA,IAAIS,aAAJ;;AACA,CAAC,UAAUA,aAAV,EAAyB;AACtBA,eAAa,CAAC1Z,MAAd,GAAuB,qBAAvB;AACA0Z,eAAa,CAAC7Z,IAAd,GAAqB,IAAIs/B,UAAU,CAACH,mBAAf,CAAmCtlB,aAAa,CAAC1Z,MAAjD,CAArB;AACH,CAHD,EAGG0Z,aAAa,GAAGhc,OAAO,CAACgc,aAAR,KAA0Bhc,OAAO,CAACgc,aAAR,GAAwB,EAAlD,CAHnB;AAIA;;;;;AAGA,IAAIU,oBAAJ;;AACA,CAAC,UAAUA,oBAAV,EAAgC;AAC7BA,sBAAoB,CAACpa,MAArB,GAA8B,4BAA9B;AACAoa,sBAAoB,CAACva,IAArB,GAA4B,IAAIs/B,UAAU,CAACH,mBAAf,CAAmC5kB,oBAAoB,CAACpa,MAAxD,CAA5B;AACH,CAHD,EAGGoa,oBAAoB,GAAG1c,OAAO,CAAC0c,oBAAR,KAAiC1c,OAAO,CAAC0c,oBAAR,GAA+B,EAAhE,CAH1B;AAIA;;;;;;AAIA,IAAIiD,qBAAJ;;AACA,CAAC,UAAUA,qBAAV,EAAiC;AAC9BA,uBAAqB,CAACxd,IAAtB,GAA6B,IAAIs/B,UAAU,CAACH,mBAAf,CAAmC,0BAAnC,CAA7B;AACH,CAFD,EAEG3hB,qBAAqB,GAAG3f,OAAO,CAAC2f,qBAAR,KAAkC3f,OAAO,CAAC2f,qBAAR,GAAgC,EAAlE,CAF3B;AAGA;;;;;AAGA,IAAIyH,yBAAJ;;AACA,CAAC,UAAUA,yBAAV,EAAqC;AAClCA,2BAAyB,CAACjlB,IAA1B,GAAiC,IAAIs/B,UAAU,CAACH,mBAAf,CAAmC,qBAAnC,CAAjC;AACH,CAFD,EAEGla,yBAAyB,GAAGpnB,OAAO,CAAConB,yBAAR,KAAsCpnB,OAAO,CAAConB,yBAAR,GAAoC,EAA1E,CAF/B,E;;;;;;;;;;;;AC1qBA;;;;AAIa;;AACblnB,MAAM,CAACC,cAAP,CAAsBH,OAAtB,EAA+B,YAA/B,EAA6C;AAAEI,OAAK,EAAE;AAAT,CAA7C;;AACA,IAAMg/B,gBAAgB,GAAG9+B,mBAAO,CAAC,8GAAD,CAAhC;;AACA,IAAMmhC,UAAU,GAAGnhC,mBAAO,CAAC,kFAAD,CAA1B;;AACA,IAAIm1B,gBAAJ;;AACA,CAAC,UAAUA,gBAAV,EAA4B;AACzBA,kBAAgB,CAACtzB,IAAjB,GAAwB,IAAIi9B,gBAAgB,CAACmB,YAArB,EAAxB;AACH,CAFD,EAEG9K,gBAAgB,GAAGz1B,OAAO,CAACy1B,gBAAR,KAA6Bz1B,OAAO,CAACy1B,gBAAR,GAA2B,EAAxD,CAFtB;AAGA;;;;;;AAIA,IAAI6M,6BAAJ;;AACA,CAAC,UAAUA,6BAAV,EAAyC;AACtCA,+BAA6B,CAACngC,IAA9B,GAAqC,IAAIs/B,UAAU,CAACH,mBAAf,CAAmC,gCAAnC,CAArC;AACH,CAFD,EAEGgB,6BAA6B,GAAGtiC,OAAO,CAACsiC,6BAAR,KAA0CtiC,OAAO,CAACsiC,6BAAR,GAAwC,EAAlF,CAFnC;AAGA;;;;;;AAIA,IAAI7L,kCAAJ;;AACA,CAAC,UAAUA,kCAAV,EAA8C;AAC3CA,oCAAkC,CAACt0B,IAAnC,GAA0C,IAAIs/B,UAAU,CAACF,wBAAf,CAAwC,gCAAxC,CAA1C;AACH,CAFD,EAEG9K,kCAAkC,GAAGz2B,OAAO,CAACy2B,kCAAR,KAA+Cz2B,OAAO,CAACy2B,kCAAR,GAA6C,EAA5F,CAFxC,E;;;;;;;;;;;;ACzBa;AACb;;;;;AAIAv2B,MAAM,CAACC,cAAP,CAAsBH,OAAtB,EAA+B,YAA/B,EAA6C;AAAEI,OAAK,EAAE;AAAT,CAA7C;;AACA,IAAMg/B,gBAAgB,GAAG9+B,mBAAO,CAAC,8GAAD,CAAhC;;AACA,IAAMmhC,UAAU,GAAGnhC,mBAAO,CAAC,kFAAD,CAA1B;AACA;;;;;;;;AAMA,IAAI8hC,qBAAJ;;AACA,CAAC,UAAUA,qBAAV,EAAiC;AAC9BA,uBAAqB,CAAC9/B,MAAtB,GAA+B,6BAA/B;AACA8/B,uBAAqB,CAACjgC,IAAtB,GAA6B,IAAIs/B,UAAU,CAACH,mBAAf,CAAmCc,qBAAqB,CAAC9/B,MAAzD,CAA7B;AACA;;AACA8/B,uBAAqB,CAACV,UAAtB,GAAmC,IAAItC,gBAAgB,CAACmB,YAArB,EAAnC;AACH,CALD,EAKG6B,qBAAqB,GAAGpiC,OAAO,CAACoiC,qBAAR,KAAkCpiC,OAAO,CAACoiC,qBAAR,GAAgC,EAAlE,CAL3B,E;;;;;;;;;;;;ACfA;;;;AAIa;;AACbliC,MAAM,CAACC,cAAP,CAAsBH,OAAtB,EAA+B,YAA/B,EAA6C;AAAEI,OAAK,EAAE;AAAT,CAA7C;;AACA,IAAMqhC,UAAU,GAAGnhC,mBAAO,CAAC,kFAAD,CAA1B;AACA;;;;;;;;;AAOA,IAAIugC,kBAAJ;;AACA,CAAC,UAAUA,kBAAV,EAA8B;AAC3BA,oBAAkB,CAAC,SAAD,CAAlB,GAAgC,SAAhC;AACAA,oBAAkB,CAAC,SAAD,CAAlB,GAAgC,SAAhC;AACAA,oBAAkB,CAAC,QAAD,CAAlB,GAA+B,QAA/B;AACAA,oBAAkB,CAAC,QAAD,CAAlB,GAA+B,QAA/B;AACAA,oBAAkB,CAAC,QAAD,CAAlB,GAA+B,QAA/B;AACAA,oBAAkB,CAAC,UAAD,CAAlB,GAAiC,UAAjC;AACAA,oBAAkB,CAAC,WAAD,CAAlB,GAAkC,WAAlC;AACAA,oBAAkB,CAAC,MAAD,CAAlB,GAA6B,MAA7B;AACAA,oBAAkB,CAAC,QAAD,CAAlB,GAA+B,QAA/B;AACAA,oBAAkB,CAAC,OAAD,CAAlB,GAA8B,OAA9B;AACAA,oBAAkB,CAAC,WAAD,CAAlB,GAAkC,WAAlC;AACAA,oBAAkB,CAAC,MAAD,CAAlB,GAA6B,MAA7B;AACAA,oBAAkB,CAAC,eAAD,CAAlB,GAAsC,eAAtC;AACAA,oBAAkB,CAAC,UAAD,CAAlB,GAAiC,UAAjC;AACAA,oBAAkB,CAAC,QAAD,CAAlB,GAA+B,QAA/B;AACAA,oBAAkB,CAAC,UAAD,CAAlB,GAAiC,UAAjC;AACAA,oBAAkB,CAAC,OAAD,CAAlB,GAA8B,OAA9B;AACAA,oBAAkB,CAAC,UAAD,CAAlB,GAAiC,UAAjC;AACAA,oBAAkB,CAAC,WAAD,CAAlB,GAAkC,WAAlC;AACAA,oBAAkB,CAAC,OAAD,CAAlB,GAA8B,OAA9B;AACH,CArBD,EAqBGA,kBAAkB,GAAG7gC,OAAO,CAAC6gC,kBAAR,KAA+B7gC,OAAO,CAAC6gC,kBAAR,GAA6B,EAA5D,CArBxB;AAsBA;;;;;;;;;AAOA,IAAIC,sBAAJ;;AACA,CAAC,UAAUA,sBAAV,EAAkC;AAC/BA,wBAAsB,CAAC,eAAD,CAAtB,GAA0C,eAA1C;AACAA,wBAAsB,CAAC,aAAD,CAAtB,GAAwC,aAAxC;AACAA,wBAAsB,CAAC,YAAD,CAAtB,GAAuC,YAAvC;AACAA,wBAAsB,CAAC,WAAD,CAAtB,GAAsC,WAAtC;AACAA,wBAAsB,CAAC,QAAD,CAAtB,GAAmC,QAAnC;AACAA,wBAAsB,CAAC,UAAD,CAAtB,GAAqC,UAArC;AACAA,wBAAsB,CAAC,YAAD,CAAtB,GAAuC,YAAvC;AACAA,wBAAsB,CAAC,OAAD,CAAtB,GAAkC,OAAlC;AACAA,wBAAsB,CAAC,UAAD,CAAtB,GAAqC,UAArC;AACAA,wBAAsB,CAAC,UAAD,CAAtB,GAAqC,UAArC;AACH,CAXD,EAWGA,sBAAsB,GAAG9gC,OAAO,CAAC8gC,sBAAR,KAAmC9gC,OAAO,CAAC8gC,sBAAR,GAAiC,EAApE,CAX5B;AAYA;;;;;AAGA,IAAIC,cAAJ;;AACA,CAAC,UAAUA,cAAV,EAA0B;AACvB,WAASh4B,EAAT,CAAY3I,KAAZ,EAAmB;AACf,QAAM4I,SAAS,GAAG5I,KAAlB;AACA,WAAO4I,SAAS,KAAKxF,SAAd,KAA4BwF,SAAS,CAACo6B,QAAV,KAAuB5/B,SAAvB,IAAoC,OAAOwF,SAAS,CAACo6B,QAAjB,KAA8B,QAA9F,KACH17B,KAAK,CAACiI,OAAN,CAAc3G,SAAS,CAAClH,IAAxB,CADG,KAC+BkH,SAAS,CAAClH,IAAV,CAAe+D,MAAf,KAA0B,CAA1B,IAA+B,OAAOmD,SAAS,CAAClH,IAAV,CAAe,CAAf,CAAP,KAA6B,QAD3F,CAAP;AAEH;;AACDi/B,gBAAc,CAACh4B,EAAf,GAAoBA,EAApB;AACH,CAPD,EAOGg4B,cAAc,GAAG/gC,OAAO,CAAC+gC,cAAR,KAA2B/gC,OAAO,CAAC+gC,cAAR,GAAyB,EAApD,CAPpB;AAQA;;;;;AAGA,IAAIC,qBAAJ;;AACA,CAAC,UAAUA,qBAAV,EAAiC;AAC9BA,uBAAqB,CAAC1+B,MAAtB,GAA+B,6BAA/B;AACA0+B,uBAAqB,CAAC7+B,IAAtB,GAA6B,IAAIs/B,UAAU,CAACH,mBAAf,CAAmCN,qBAAqB,CAAC1+B,MAAzD,CAA7B;AACH,CAHD,EAGG0+B,qBAAqB,GAAGhhC,OAAO,CAACghC,qBAAR,KAAkChhC,OAAO,CAACghC,qBAAR,GAAgC,EAAlE,CAH3B;AAIA;;;;;AAGA,IAAIC,0BAAJ;;AACA,CAAC,UAAUA,0BAAV,EAAsC;AACnCA,4BAA0B,CAAC3+B,MAA3B,GAAoC,mCAApC;AACA2+B,4BAA0B,CAAC9+B,IAA3B,GAAkC,IAAIs/B,UAAU,CAACH,mBAAf,CAAmCL,0BAA0B,CAAC3+B,MAA9D,CAAlC;AACH,CAHD,EAGG2+B,0BAA0B,GAAGjhC,OAAO,CAACihC,0BAAR,KAAuCjhC,OAAO,CAACihC,0BAAR,GAAqC,EAA5E,CAHhC;AAIA;;;;;AAGA,IAAIC,0BAAJ;;AACA,CAAC,UAAUA,0BAAV,EAAsC;AACnCA,4BAA0B,CAAC5+B,MAA3B,GAAoC,mCAApC;AACA4+B,4BAA0B,CAAC/+B,IAA3B,GAAkC,IAAIs/B,UAAU,CAACH,mBAAf,CAAmCJ,0BAA0B,CAAC5+B,MAA9D,CAAlC;AACH,CAHD,EAGG4+B,0BAA0B,GAAGlhC,OAAO,CAACkhC,0BAAR,KAAuClhC,OAAO,CAACkhC,0BAAR,GAAqC,EAA5E,CAHhC,E;;;;;;;;;;;;ACzFA;;;;AAIa;;AACbhhC,MAAM,CAACC,cAAP,CAAsBH,OAAtB,EAA+B,YAA/B,EAA6C;AAAEI,OAAK,EAAE;AAAT,CAA7C;;AACA,IAAMg/B,gBAAgB,GAAG9+B,mBAAO,CAAC,8GAAD,CAAhC;;AACA,IAAMmhC,UAAU,GAAGnhC,mBAAO,CAAC,kFAAD,CAA1B,C,CACA;;;AACA,IAAIqhC,iBAAJ;AACA;;;;;;;;AAMA,IAAIpF,qBAAJ;;AACA,CAAC,UAAUA,qBAAV,EAAiC;AAC9BA,uBAAqB,CAACj6B,MAAtB,GAA+B,6BAA/B;AACAi6B,uBAAqB,CAACp6B,IAAtB,GAA6B,IAAIs/B,UAAU,CAACH,mBAAf,CAAmC/E,qBAAqB,CAACj6B,MAAzD,CAA7B;AACA;;AACAi6B,uBAAqB,CAACmF,UAAtB,GAAmC,IAAItC,gBAAgB,CAACmB,YAArB,EAAnC;AACH,CALD,EAKGhE,qBAAqB,GAAGv8B,OAAO,CAACu8B,qBAAR,KAAkCv8B,OAAO,CAACu8B,qBAAR,GAAgC,EAAlE,CAL3B,E;;;;;;;;;;;;ACjBA;;;;AAIa;;AACbr8B,MAAM,CAACC,cAAP,CAAsBH,OAAtB,EAA+B,YAA/B,EAA6C;AAAEI,OAAK,EAAE;AAAT,CAA7C;;AACA,IAAMqhC,UAAU,GAAGnhC,mBAAO,CAAC,kFAAD,CAA1B;AACA;;;;;AAGA,IAAIw+B,uBAAJ;;AACA,CAAC,UAAUA,uBAAV,EAAmC;AAChCA,yBAAuB,CAAC38B,IAAxB,GAA+B,IAAIs/B,UAAU,CAACJ,oBAAf,CAAoC,4BAApC,CAA/B;AACH,CAFD,EAEGvC,uBAAuB,GAAG9+B,OAAO,CAAC8+B,uBAAR,KAAoC9+B,OAAO,CAAC8+B,uBAAR,GAAkC,EAAtE,CAF7B;AAGA;;;;;;AAIA,IAAIK,qCAAJ;;AACA,CAAC,UAAUA,qCAAV,EAAiD;AAC9CA,uCAAqC,CAACh9B,IAAtC,GAA6C,IAAIs/B,UAAU,CAACF,wBAAf,CAAwC,qCAAxC,CAA7C;AACH,CAFD,EAEGpC,qCAAqC,GAAGn/B,OAAO,CAACm/B,qCAAR,KAAkDn/B,OAAO,CAACm/B,qCAAR,GAAgD,EAAlG,CAF3C,E;;;;;;;;;;;;ACnBA;;;;AAIa;;;;AACbj/B,MAAM,CAACC,cAAP,CAAsBH,OAAtB,EAA+B,YAA/B,EAA6C;AAAEI,OAAK,EAAE;AAAT,CAA7C;;AACA,SAASi9B,QAAT,CAAiBj9B,KAAjB,EAAwB;AACpB,SAAOA,KAAK,KAAK,IAAV,IAAkBA,KAAK,KAAK,KAAnC;AACH;;AACDJ,OAAO,WAAP,GAAkBq9B,QAAlB;;AACA,SAASh7B,MAAT,CAAgBjC,KAAhB,EAAuB;AACnB,SAAO,OAAOA,KAAP,KAAiB,QAAjB,IAA6BA,KAAK,YAAYmH,MAArD;AACH;;AACDvH,OAAO,CAACqC,MAAR,GAAiBA,MAAjB;;AACA,SAASwkB,MAAT,CAAgBzmB,KAAhB,EAAuB;AACnB,SAAO,OAAOA,KAAP,KAAiB,QAAjB,IAA6BA,KAAK,YAAYoH,MAArD;AACH;;AACDxH,OAAO,CAAC6mB,MAAR,GAAiBA,MAAjB;;AACA,SAAS5lB,KAAT,CAAeb,KAAf,EAAsB;AAClB,SAAOA,KAAK,YAAYqR,KAAxB;AACH;;AACDzR,OAAO,CAACiB,KAAR,GAAgBA,KAAhB;;AACA,SAASgI,IAAT,CAAc7I,KAAd,EAAqB;AACjB,SAAO,OAAOA,KAAP,KAAiB,UAAxB;AACH;;AACDJ,OAAO,CAACiJ,IAAR,GAAeA,IAAf;;AACA,SAASmgB,KAAT,CAAehpB,KAAf,EAAsB;AAClB,SAAOsH,KAAK,CAACiI,OAAN,CAAcvP,KAAd,CAAP;AACH;;AACDJ,OAAO,CAACopB,KAAR,GAAgBA,KAAhB;;AACA,SAASsP,WAAT,CAAqBt4B,KAArB,EAA4B;AACxB,SAAOgpB,KAAK,CAAChpB,KAAD,CAAL,IAAgBA,KAAK,CAACk9B,KAAN,CAAY,UAAA5P,IAAI;AAAA,WAAIrrB,MAAM,CAACqrB,IAAD,CAAV;AAAA,GAAhB,CAAvB;AACH;;AACD1tB,OAAO,CAAC04B,WAAR,GAAsBA,WAAtB;;AACA,SAAS6E,UAAT,CAAoBn9B,KAApB,EAA2Bo9B,KAA3B,EAAkC;AAC9B,SAAO91B,KAAK,CAACiI,OAAN,CAAcvP,KAAd,KAAwBA,KAAK,CAACk9B,KAAN,CAAYE,KAAZ,CAA/B;AACH;;AACDx9B,OAAO,CAACu9B,UAAR,GAAqBA,UAArB;;AACA,SAASsF,aAAT,CAAuBziC,KAAvB,EAA8B;AAC1B;AACA;AACA;AACA,SAAOA,KAAK,KAAK,IAAV,IAAkB,QAAOA,KAAP,MAAiB,QAA1C;AACH;;AACDJ,OAAO,CAAC6iC,aAAR,GAAwBA,aAAxB,C;;;;;;;;;;;;AC5CA;;;;AAIa;;;;;;AACb3iC,MAAM,CAACC,cAAP,CAAsBH,OAAtB,EAA+B,YAA/B,EAA6C;AAAEI,OAAK,EAAE;AAAT,CAA7C;;AACA,IAAMijC,QAAQ,GAAG/iC,mBAAO,CAAC,0GAAD,CAAxB;;AACA,IAAMI,EAAE,GAAGJ,mBAAO,CAAC,kGAAD,CAAlB;;AACA,IAAI++B,iBAAJ;;AACA,CAAC,UAAUA,iBAAV,EAA6B;AAC1BA,mBAAiB,CAACvyB,IAAlB,GAAyB5M,MAAM,CAACojC,MAAP,CAAc;AACnCC,2BAAuB,EAAE,KADU;AAEnC/M,2BAAuB,EAAE6M,QAAQ,CAACt7B,KAAT,CAAe+E;AAFL,GAAd,CAAzB;AAIAuyB,mBAAiB,CAACmE,SAAlB,GAA8BtjC,MAAM,CAACojC,MAAP,CAAc;AACxCC,2BAAuB,EAAE,IADe;AAExC/M,2BAAuB,EAAE6M,QAAQ,CAACt7B,KAAT,CAAe+E;AAFA,GAAd,CAA9B;;AAIA,WAAS/D,EAAT,CAAY3I,KAAZ,EAAmB;AACf,QAAI4I,SAAS,GAAG5I,KAAhB;AACA,WAAO4I,SAAS,KAAKA,SAAS,KAAKq2B,iBAAiB,CAACvyB,IAAhC,IACd9D,SAAS,KAAKq2B,iBAAiB,CAACmE,SADlB,IAEb9iC,EAAE,WAAF,CAAWsI,SAAS,CAACu6B,uBAArB,KAAiD,CAAC,CAACv6B,SAAS,CAACwtB,uBAFrD,CAAhB;AAGH;;AACD6I,mBAAiB,CAACt2B,EAAlB,GAAuBA,EAAvB;AACH,CAhBD,EAgBGs2B,iBAAiB,GAAGr/B,OAAO,CAACq/B,iBAAR,KAA8Br/B,OAAO,CAACq/B,iBAAR,GAA4B,EAA1D,CAhBvB;;AAiBA,IAAMoE,aAAa,GAAGvjC,MAAM,CAACojC,MAAP,CAAc,UAAUr5B,QAAV,EAAoBuJ,OAApB,EAA6B;AAC7D,MAAIkwB,MAAM,GAAGvG,UAAU,CAAClzB,QAAQ,CAACqnB,IAAT,CAAc9d,OAAd,CAAD,EAAyB,CAAzB,CAAvB;AACA,SAAO;AAAEzO,WAAF,qBAAY;AAAEq4B,kBAAY,CAACsG,MAAD,CAAZ;AAAuB;AAArC,GAAP;AACH,CAHqB,CAAtB;;IAIMC,Y;AACF,0BAAc;AAAA;;AACV,SAAKC,YAAL,GAAoB,KAApB;AACH;;;;6BACQ;AACL,UAAI,CAAC,KAAKA,YAAV,EAAwB;AACpB,aAAKA,YAAL,GAAoB,IAApB;;AACA,YAAI,KAAKC,QAAT,EAAmB;AACf,eAAKA,QAAL,CAAc5e,IAAd,CAAmBzhB,SAAnB;;AACA,eAAKuB,OAAL;AACH;AACJ;AACJ;;;8BAaS;AACN,UAAI,KAAK8+B,QAAT,EAAmB;AACf,aAAKA,QAAL,CAAc9+B,OAAd;;AACA,aAAK8+B,QAAL,GAAgBrgC,SAAhB;AACH;AACJ;;;wBAjB6B;AAC1B,aAAO,KAAKogC,YAAZ;AACH;;;wBAC6B;AAC1B,UAAI,KAAKA,YAAT,EAAuB;AACnB,eAAOH,aAAP;AACH;;AACD,UAAI,CAAC,KAAKI,QAAV,EAAoB;AAChB,aAAKA,QAAL,GAAgB,IAAIR,QAAQ,CAAC/gB,OAAb,EAAhB;AACH;;AACD,aAAO,KAAKuhB,QAAL,CAAc32B,KAArB;AACH;;;;;;IAQCoyB,uB;;;;;;;6BASO;AACL,UAAI,CAAC,KAAKjK,MAAV,EAAkB;AACd;AACA;AACA;AACA,aAAKA,MAAL,GAAcgK,iBAAiB,CAACmE,SAAhC;AACH,OALD,MAMK;AACD,aAAKnO,MAAL,CAAYzO,MAAZ;AACH;AACJ;;;8BACS;AACN,UAAI,CAAC,KAAKyO,MAAV,EAAkB;AACd;AACA,aAAKA,MAAL,GAAcgK,iBAAiB,CAACvyB,IAAhC;AACH,OAHD,MAIK,IAAI,KAAKuoB,MAAL,YAAuBsO,YAA3B,EAAyC;AAC1C;AACA,aAAKtO,MAAL,CAAYtwB,OAAZ;AACH;AACJ;;;wBA5BW;AACR,UAAI,CAAC,KAAKswB,MAAV,EAAkB;AACd;AACA;AACA,aAAKA,MAAL,GAAc,IAAIsO,YAAJ,EAAd;AACH;;AACD,aAAO,KAAKtO,MAAZ;AACH;;;;;;AAuBLr1B,OAAO,CAACs/B,uBAAR,GAAkCA,uBAAlC,C;;;;;;;;;;;;AC7FA;;;;AAIa;;;;;;AACbp/B,MAAM,CAACC,cAAP,CAAsBH,OAAtB,EAA+B,YAA/B,EAA6C;AAAEI,OAAK,EAAE;AAAT,CAA7C;AACA,IAAI+kB,UAAJ;;AACA,CAAC,UAAUA,UAAV,EAAsB;AACnB,WAASvG,MAAT,CAAgB3V,IAAhB,EAAsB;AAClB,WAAO;AACHlE,aAAO,EAAEkE;AADN,KAAP;AAGH;;AACDkc,YAAU,CAACvG,MAAX,GAAoBA,MAApB;AACH,CAPD,EAOGuG,UAAU,GAAGnlB,OAAO,CAACmlB,UAAR,KAAuBnlB,OAAO,CAACmlB,UAAR,GAAqB,EAA5C,CAPhB;;AAQA,IAAIpd,KAAJ;;AACA,CAAC,UAAUA,KAAV,EAAiB;AACd,MAAMwtB,WAAW,GAAG;AAAExwB,WAAF,qBAAY,CAAG;AAAf,GAApB;;AACAgD,OAAK,CAAC+E,IAAN,GAAa,YAAY;AAAE,WAAOyoB,WAAP;AAAqB,GAAhD;AACH,CAHD,EAGGxtB,KAAK,GAAG/H,OAAO,CAAC+H,KAAR,KAAkB/H,OAAO,CAAC+H,KAAR,GAAgB,EAAlC,CAHX;;IAIM+7B,Y;;;;;;;wBACE75B,Q,EAAkC;AAAA;;AAAA,UAAxBuJ,OAAwB,uEAAd,IAAc;AAAA,UAARuwB,MAAQ;;AAClC,UAAI,CAAC,KAAKC,UAAV,EAAsB;AAClB,aAAKA,UAAL,GAAkB,EAAlB;AACA,aAAKC,SAAL,GAAiB,EAAjB;AACH;;AACD,WAAKD,UAAL,CAAgBt+B,IAAhB,CAAqBuE,QAArB;;AACA,WAAKg6B,SAAL,CAAev+B,IAAf,CAAoB8N,OAApB;;AACA,UAAI9L,KAAK,CAACiI,OAAN,CAAco0B,MAAd,CAAJ,EAA2B;AACvBA,cAAM,CAACr+B,IAAP,CAAY;AAAEX,iBAAO,EAAE;AAAA,mBAAM,KAAI,CAACm/B,MAAL,CAAYj6B,QAAZ,EAAsBuJ,OAAtB,CAAN;AAAA;AAAX,SAAZ;AACH;AACJ;;;2BACMvJ,Q,EAA0B;AAAA,UAAhBuJ,OAAgB,uEAAN,IAAM;;AAC7B,UAAI,CAAC,KAAKwwB,UAAV,EAAsB;AAClB;AACH;;AACD,UAAIG,iCAAiC,GAAG,KAAxC;;AACA,WAAK,IAAIzlB,CAAC,GAAG,CAAR,EAAW0lB,GAAG,GAAG,KAAKJ,UAAL,CAAgBn+B,MAAtC,EAA8C6Y,CAAC,GAAG0lB,GAAlD,EAAuD1lB,CAAC,EAAxD,EAA4D;AACxD,YAAI,KAAKslB,UAAL,CAAgBtlB,CAAhB,MAAuBzU,QAA3B,EAAqC;AACjC,cAAI,KAAKg6B,SAAL,CAAevlB,CAAf,MAAsBlL,OAA1B,EAAmC;AAC/B;AACA,iBAAKwwB,UAAL,CAAgBK,MAAhB,CAAuB3lB,CAAvB,EAA0B,CAA1B;;AACA,iBAAKulB,SAAL,CAAeI,MAAf,CAAsB3lB,CAAtB,EAAyB,CAAzB;;AACA;AACH,WALD,MAMK;AACDylB,6CAAiC,GAAG,IAApC;AACH;AACJ;AACJ;;AACD,UAAIA,iCAAJ,EAAuC;AACnC,cAAM,IAAI1yB,KAAJ,CAAU,mFAAV,CAAN;AACH;AACJ;;;6BACe;AACZ,UAAI,CAAC,KAAKuyB,UAAV,EAAsB;AAClB,eAAO,EAAP;AACH;;AACD,UAAIM,GAAG,GAAG,EAAV;AAAA,UAAcC,SAAS,GAAG,KAAKP,UAAL,CAAgBtU,KAAhB,CAAsB,CAAtB,CAA1B;AAAA,UAAoD8U,QAAQ,GAAG,KAAKP,SAAL,CAAevU,KAAf,CAAqB,CAArB,CAA/D;;AAJY,wCAANjQ,IAAM;AAANA,YAAM;AAAA;;AAKZ,WAAK,IAAIf,CAAC,GAAG,CAAR,EAAW0lB,GAAG,GAAGG,SAAS,CAAC1+B,MAAhC,EAAwC6Y,CAAC,GAAG0lB,GAA5C,EAAiD1lB,CAAC,EAAlD,EAAsD;AAClD,YAAI;AACA4lB,aAAG,CAAC5+B,IAAJ,CAAS6+B,SAAS,CAAC7lB,CAAD,CAAT,CAAa0W,KAAb,CAAmBoP,QAAQ,CAAC9lB,CAAD,CAA3B,EAAgCe,IAAhC,CAAT;AACH,SAFD,CAGA,OAAOyV,CAAP,EAAU;AACN;AACAl0B,iBAAO,CAACC,KAAR,CAAci0B,CAAd;AACH;AACJ;;AACD,aAAOoP,GAAP;AACH;;;8BACS;AACN,aAAO,CAAC,KAAKN,UAAN,IAAoB,KAAKA,UAAL,CAAgBn+B,MAAhB,KAA2B,CAAtD;AACH;;;8BACS;AACN,WAAKm+B,UAAL,GAAkBxgC,SAAlB;AACA,WAAKygC,SAAL,GAAiBzgC,SAAjB;AACH;;;;;;IAEC8e,O;AACF,mBAAYrK,QAAZ,EAAsB;AAAA;;AAClB,SAAKA,QAAL,GAAgBA,QAAhB;AACH;AACD;;;;;;;;;AAgCA;;;;yBAIK/K,K,EAAO;AACR,UAAI,KAAK82B,UAAT,EAAqB;AACjB,aAAKA,UAAL,CAAgBS,MAAhB,CAAuBC,IAAvB,CAA4B,KAAKV,UAAjC,EAA6C92B,KAA7C;AACH;AACJ;;;8BACS;AACN,UAAI,KAAK82B,UAAT,EAAqB;AACjB,aAAKA,UAAL,CAAgBj/B,OAAhB;;AACA,aAAKi/B,UAAL,GAAkBxgC,SAAlB;AACH;AACJ;;;wBA1CW;AAAA;;AACR,UAAI,CAAC,KAAK+F,MAAV,EAAkB;AACd,aAAKA,MAAL,GAAc,UAAC4e,QAAD,EAAWwc,QAAX,EAAqBC,WAArB,EAAqC;AAC/C,cAAI,CAAC,MAAI,CAACZ,UAAV,EAAsB;AAClB,kBAAI,CAACA,UAAL,GAAkB,IAAIF,YAAJ,EAAlB;AACH;;AACD,cAAI,MAAI,CAAC7rB,QAAL,IAAiB,MAAI,CAACA,QAAL,CAAc4sB,kBAA/B,IAAqD,MAAI,CAACb,UAAL,CAAgBc,OAAhB,EAAzD,EAAoF;AAChF,kBAAI,CAAC7sB,QAAL,CAAc4sB,kBAAd,CAAiC,MAAjC;AACH;;AACD,gBAAI,CAACb,UAAL,CAAgBe,GAAhB,CAAoB5c,QAApB,EAA8Bwc,QAA9B;;AACA,cAAI3iC,MAAJ;AACAA,gBAAM,GAAG;AACL+C,mBAAO,EAAE,mBAAM;AACX,oBAAI,CAACi/B,UAAL,CAAgBE,MAAhB,CAAuB/b,QAAvB,EAAiCwc,QAAjC;;AACA3iC,oBAAM,CAAC+C,OAAP,GAAiBud,OAAO,CAAC0iB,KAAzB;;AACA,kBAAI,MAAI,CAAC/sB,QAAL,IAAiB,MAAI,CAACA,QAAL,CAAcgtB,oBAA/B,IAAuD,MAAI,CAACjB,UAAL,CAAgBc,OAAhB,EAA3D,EAAsF;AAClF,sBAAI,CAAC7sB,QAAL,CAAcgtB,oBAAd,CAAmC,MAAnC;AACH;AACJ;AAPI,WAAT;;AASA,cAAIv9B,KAAK,CAACiI,OAAN,CAAci1B,WAAd,CAAJ,EAAgC;AAC5BA,uBAAW,CAACl/B,IAAZ,CAAiB1D,MAAjB;AACH;;AACD,iBAAOA,MAAP;AACH,SAtBD;AAuBH;;AACD,aAAO,KAAKuH,MAAZ;AACH;;;;;;AAiBLvJ,OAAO,CAACsiB,OAAR,GAAkBA,OAAlB;;AACAA,OAAO,CAAC0iB,KAAR,GAAgB,YAAY,CAAG,CAA/B,C;;;;;;;;;;;;ACnIA;;;;AAIa;;AACb9kC,MAAM,CAACC,cAAP,CAAsBH,OAAtB,EAA+B,YAA/B,EAA6C;AAAEI,OAAK,EAAE;AAAT,CAA7C;;AACA,SAASi9B,QAAT,CAAiBj9B,KAAjB,EAAwB;AACpB,SAAOA,KAAK,KAAK,IAAV,IAAkBA,KAAK,KAAK,KAAnC;AACH;;AACDJ,OAAO,WAAP,GAAkBq9B,QAAlB;;AACA,SAASh7B,MAAT,CAAgBjC,KAAhB,EAAuB;AACnB,SAAO,OAAOA,KAAP,KAAiB,QAAjB,IAA6BA,KAAK,YAAYmH,MAArD;AACH;;AACDvH,OAAO,CAACqC,MAAR,GAAiBA,MAAjB;;AACA,SAASwkB,MAAT,CAAgBzmB,KAAhB,EAAuB;AACnB,SAAO,OAAOA,KAAP,KAAiB,QAAjB,IAA6BA,KAAK,YAAYoH,MAArD;AACH;;AACDxH,OAAO,CAAC6mB,MAAR,GAAiBA,MAAjB;;AACA,SAAS5lB,KAAT,CAAeb,KAAf,EAAsB;AAClB,SAAOA,KAAK,YAAYqR,KAAxB;AACH;;AACDzR,OAAO,CAACiB,KAAR,GAAgBA,KAAhB;;AACA,SAASgI,IAAT,CAAc7I,KAAd,EAAqB;AACjB,SAAO,OAAOA,KAAP,KAAiB,UAAxB;AACH;;AACDJ,OAAO,CAACiJ,IAAR,GAAeA,IAAf;;AACA,SAASmgB,KAAT,CAAehpB,KAAf,EAAsB;AAClB,SAAOsH,KAAK,CAACiI,OAAN,CAAcvP,KAAd,CAAP;AACH;;AACDJ,OAAO,CAACopB,KAAR,GAAgBA,KAAhB;;AACA,SAASsP,WAAT,CAAqBt4B,KAArB,EAA4B;AACxB,SAAOgpB,KAAK,CAAChpB,KAAD,CAAL,IAAgBA,KAAK,CAACk9B,KAAN,CAAY,UAAA5P,IAAI;AAAA,WAAIrrB,MAAM,CAACqrB,IAAD,CAAV;AAAA,GAAhB,CAAvB;AACH;;AACD1tB,OAAO,CAAC04B,WAAR,GAAsBA,WAAtB,C;;;;;;;;;;;;ACjCa;AACb;;;;;;;;;AAIAx4B,MAAM,CAACC,cAAP,CAAsBH,OAAtB,EAA+B,YAA/B,EAA6C;AAAEI,OAAK,EAAE;AAAT,CAA7C;AACA,IAAI8kC,KAAJ;;AACA,CAAC,UAAUA,KAAV,EAAiB;AACdA,OAAK,CAACp4B,IAAN,GAAa,CAAb;AACAo4B,OAAK,CAACC,KAAN,GAAc,CAAd;AACAD,OAAK,CAACE,IAAN,GAAa,CAAb;AACH,CAJD,EAIGF,KAAK,GAAGllC,OAAO,CAACklC,KAAR,KAAkBllC,OAAO,CAACklC,KAAR,GAAgB,EAAlC,CAJX;;IAKMG,S;AACF,uBAAc;AAAA;;AACV,SAAKC,IAAL,GAAY,IAAIz7B,GAAJ,EAAZ;AACA,SAAK07B,KAAL,GAAa/hC,SAAb;AACA,SAAKgiC,KAAL,GAAahiC,SAAb;AACA,SAAKiiC,KAAL,GAAa,CAAb;AACH;;;;4BACO;AACJ,WAAKH,IAAL,CAAU96B,KAAV;;AACA,WAAK+6B,KAAL,GAAa/hC,SAAb;AACA,WAAKgiC,KAAL,GAAahiC,SAAb;AACA,WAAKiiC,KAAL,GAAa,CAAb;AACH;;;8BACS;AACN,aAAO,CAAC,KAAKF,KAAN,IAAe,CAAC,KAAKC,KAA5B;AACH;;;wBAIG38B,G,EAAK;AACL,aAAO,KAAKy8B,IAAL,CAAUn5B,GAAV,CAActD,GAAd,CAAP;AACH;;;wBACGA,G,EAAK;AACL,UAAMmL,IAAI,GAAG,KAAKsxB,IAAL,CAAU94B,GAAV,CAAc3D,GAAd,CAAb;;AACA,UAAI,CAACmL,IAAL,EAAW;AACP,eAAOxQ,SAAP;AACH;;AACD,aAAOwQ,IAAI,CAAC5T,KAAZ;AACH;;;wBACGyI,G,EAAKzI,K,EAA2B;AAAA,UAApBslC,KAAoB,uEAAZR,KAAK,CAACp4B,IAAM;;AAChC,UAAIkH,IAAI,GAAG,KAAKsxB,IAAL,CAAU94B,GAAV,CAAc3D,GAAd,CAAX;;AACA,UAAImL,IAAJ,EAAU;AACNA,YAAI,CAAC5T,KAAL,GAAaA,KAAb;;AACA,YAAIslC,KAAK,KAAKR,KAAK,CAACp4B,IAApB,EAA0B;AACtB,eAAK44B,KAAL,CAAW1xB,IAAX,EAAiB0xB,KAAjB;AACH;AACJ,OALD,MAMK;AACD1xB,YAAI,GAAG;AAAEnL,aAAG,EAAHA,GAAF;AAAOzI,eAAK,EAALA,KAAP;AAAc60B,cAAI,EAAEzxB,SAApB;AAA+BmiC,kBAAQ,EAAEniC;AAAzC,SAAP;;AACA,gBAAQkiC,KAAR;AACI,eAAKR,KAAK,CAACp4B,IAAX;AACI,iBAAK84B,WAAL,CAAiB5xB,IAAjB;AACA;;AACJ,eAAKkxB,KAAK,CAACC,KAAX;AACI,iBAAKU,YAAL,CAAkB7xB,IAAlB;AACA;;AACJ,eAAKkxB,KAAK,CAACE,IAAX;AACI,iBAAKQ,WAAL,CAAiB5xB,IAAjB;AACA;;AACJ;AACI,iBAAK4xB,WAAL,CAAiB5xB,IAAjB;AACA;AAZR;;AAcA,aAAKsxB,IAAL,CAAUp7B,GAAV,CAAcrB,GAAd,EAAmBmL,IAAnB;;AACA,aAAKyxB,KAAL;AACH;AACJ;;;4BACM58B,G,EAAK;AACR,UAAMmL,IAAI,GAAG,KAAKsxB,IAAL,CAAU94B,GAAV,CAAc3D,GAAd,CAAb;;AACA,UAAI,CAACmL,IAAL,EAAW;AACP,eAAO,KAAP;AACH;;AACD,WAAKsxB,IAAL,WAAiBz8B,GAAjB;;AACA,WAAKi9B,UAAL,CAAgB9xB,IAAhB;AACA,WAAKyxB,KAAL;AACA,aAAO,IAAP;AACH;;;4BACO;AACJ,UAAI,CAAC,KAAKF,KAAN,IAAe,CAAC,KAAKC,KAAzB,EAAgC;AAC5B,eAAOhiC,SAAP;AACH;;AACD,UAAI,CAAC,KAAK+hC,KAAN,IAAe,CAAC,KAAKC,KAAzB,EAAgC;AAC5B,cAAM,IAAI/zB,KAAJ,CAAU,cAAV,CAAN;AACH;;AACD,UAAMuC,IAAI,GAAG,KAAKuxB,KAAlB;;AACA,WAAKD,IAAL,WAAiBtxB,IAAI,CAACnL,GAAtB;;AACA,WAAKi9B,UAAL,CAAgB9xB,IAAhB;AACA,WAAKyxB,KAAL;AACA,aAAOzxB,IAAI,CAAC5T,KAAZ;AACH;;;4BACO2lC,U,EAAYpR,O,EAAS;AACzB,UAAIlW,OAAO,GAAG,KAAK8mB,KAAnB;;AACA,aAAO9mB,OAAP,EAAgB;AACZ,YAAIkW,OAAJ,EAAa;AACToR,oBAAU,CAACzU,IAAX,CAAgBqD,OAAhB,EAAyBlW,OAAO,CAACre,KAAjC,EAAwCqe,OAAO,CAAC5V,GAAhD,EAAqD,IAArD;AACH,SAFD,MAGK;AACDk9B,oBAAU,CAACtnB,OAAO,CAACre,KAAT,EAAgBqe,OAAO,CAAC5V,GAAxB,EAA6B,IAA7B,CAAV;AACH;;AACD4V,eAAO,GAAGA,OAAO,CAACwW,IAAlB;AACH;AACJ;;;mCACc8Q,U,EAAYpR,O,EAAS;AAChC,UAAIlW,OAAO,GAAG,KAAK+mB,KAAnB;;AACA,aAAO/mB,OAAP,EAAgB;AACZ,YAAIkW,OAAJ,EAAa;AACToR,oBAAU,CAACzU,IAAX,CAAgBqD,OAAhB,EAAyBlW,OAAO,CAACre,KAAjC,EAAwCqe,OAAO,CAAC5V,GAAhD,EAAqD,IAArD;AACH,SAFD,MAGK;AACDk9B,oBAAU,CAACtnB,OAAO,CAACre,KAAT,EAAgBqe,OAAO,CAAC5V,GAAxB,EAA6B,IAA7B,CAAV;AACH;;AACD4V,eAAO,GAAGA,OAAO,CAACknB,QAAlB;AACH;AACJ;;;6BACQ;AACL,UAAI3jC,MAAM,GAAG,EAAb;AACA,UAAIyc,OAAO,GAAG,KAAK8mB,KAAnB;;AACA,aAAO9mB,OAAP,EAAgB;AACZzc,cAAM,CAAC0D,IAAP,CAAY+Y,OAAO,CAACre,KAApB;AACAqe,eAAO,GAAGA,OAAO,CAACwW,IAAlB;AACH;;AACD,aAAOjzB,MAAP;AACH;;;2BACM;AACH,UAAIA,MAAM,GAAG,EAAb;AACA,UAAIyc,OAAO,GAAG,KAAK8mB,KAAnB;;AACA,aAAO9mB,OAAP,EAAgB;AACZzc,cAAM,CAAC0D,IAAP,CAAY+Y,OAAO,CAAC5V,GAApB;AACA4V,eAAO,GAAGA,OAAO,CAACwW,IAAlB;AACH;;AACD,aAAOjzB,MAAP;AACH;AACD;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;iCAuCagS,I,EAAM;AACf;AACA,UAAI,CAAC,KAAKuxB,KAAN,IAAe,CAAC,KAAKC,KAAzB,EAAgC;AAC5B,aAAKA,KAAL,GAAaxxB,IAAb;AACH,OAFD,MAGK,IAAI,CAAC,KAAKuxB,KAAV,EAAiB;AAClB,cAAM,IAAI9zB,KAAJ,CAAU,cAAV,CAAN;AACH,OAFI,MAGA;AACDuC,YAAI,CAACihB,IAAL,GAAY,KAAKsQ,KAAjB;AACA,aAAKA,KAAL,CAAWI,QAAX,GAAsB3xB,IAAtB;AACH;;AACD,WAAKuxB,KAAL,GAAavxB,IAAb;AACH;;;gCACWA,I,EAAM;AACd;AACA,UAAI,CAAC,KAAKuxB,KAAN,IAAe,CAAC,KAAKC,KAAzB,EAAgC;AAC5B,aAAKD,KAAL,GAAavxB,IAAb;AACH,OAFD,MAGK,IAAI,CAAC,KAAKwxB,KAAV,EAAiB;AAClB,cAAM,IAAI/zB,KAAJ,CAAU,cAAV,CAAN;AACH,OAFI,MAGA;AACDuC,YAAI,CAAC2xB,QAAL,GAAgB,KAAKH,KAArB;AACA,aAAKA,KAAL,CAAWvQ,IAAX,GAAkBjhB,IAAlB;AACH;;AACD,WAAKwxB,KAAL,GAAaxxB,IAAb;AACH;;;+BACUA,I,EAAM;AACb,UAAIA,IAAI,KAAK,KAAKuxB,KAAd,IAAuBvxB,IAAI,KAAK,KAAKwxB,KAAzC,EAAgD;AAC5C,aAAKD,KAAL,GAAa/hC,SAAb;AACA,aAAKgiC,KAAL,GAAahiC,SAAb;AACH,OAHD,MAIK,IAAIwQ,IAAI,KAAK,KAAKuxB,KAAlB,EAAyB;AAC1B,aAAKA,KAAL,GAAavxB,IAAI,CAACihB,IAAlB;AACH,OAFI,MAGA,IAAIjhB,IAAI,KAAK,KAAKwxB,KAAlB,EAAyB;AAC1B,aAAKA,KAAL,GAAaxxB,IAAI,CAAC2xB,QAAlB;AACH,OAFI,MAGA;AACD,YAAM1Q,IAAI,GAAGjhB,IAAI,CAACihB,IAAlB;AACA,YAAM0Q,QAAQ,GAAG3xB,IAAI,CAAC2xB,QAAtB;;AACA,YAAI,CAAC1Q,IAAD,IAAS,CAAC0Q,QAAd,EAAwB;AACpB,gBAAM,IAAIl0B,KAAJ,CAAU,cAAV,CAAN;AACH;;AACDwjB,YAAI,CAAC0Q,QAAL,GAAgBA,QAAhB;AACAA,gBAAQ,CAAC1Q,IAAT,GAAgBA,IAAhB;AACH;AACJ;;;0BACKjhB,I,EAAM0xB,M,EAAO;AACf,UAAI,CAAC,KAAKH,KAAN,IAAe,CAAC,KAAKC,KAAzB,EAAgC;AAC5B,cAAM,IAAI/zB,KAAJ,CAAU,cAAV,CAAN;AACH;;AACD,UAAKi0B,MAAK,KAAKR,KAAK,CAACC,KAAhB,IAAyBO,MAAK,KAAKR,KAAK,CAACE,IAA9C,EAAqD;AACjD;AACH;;AACD,UAAIM,MAAK,KAAKR,KAAK,CAACC,KAApB,EAA2B;AACvB,YAAInxB,IAAI,KAAK,KAAKuxB,KAAlB,EAAyB;AACrB;AACH;;AACD,YAAMtQ,IAAI,GAAGjhB,IAAI,CAACihB,IAAlB;AACA,YAAM0Q,QAAQ,GAAG3xB,IAAI,CAAC2xB,QAAtB,CALuB,CAMvB;;AACA,YAAI3xB,IAAI,KAAK,KAAKwxB,KAAlB,EAAyB;AACrB;AACA;AACAG,kBAAQ,CAAC1Q,IAAT,GAAgBzxB,SAAhB;AACA,eAAKgiC,KAAL,GAAaG,QAAb;AACH,SALD,MAMK;AACD;AACA1Q,cAAI,CAAC0Q,QAAL,GAAgBA,QAAhB;AACAA,kBAAQ,CAAC1Q,IAAT,GAAgBA,IAAhB;AACH,SAjBsB,CAkBvB;;;AACAjhB,YAAI,CAAC2xB,QAAL,GAAgBniC,SAAhB;AACAwQ,YAAI,CAACihB,IAAL,GAAY,KAAKsQ,KAAjB;AACA,aAAKA,KAAL,CAAWI,QAAX,GAAsB3xB,IAAtB;AACA,aAAKuxB,KAAL,GAAavxB,IAAb;AACH,OAvBD,MAwBK,IAAI0xB,MAAK,KAAKR,KAAK,CAACE,IAApB,EAA0B;AAC3B,YAAIpxB,IAAI,KAAK,KAAKwxB,KAAlB,EAAyB;AACrB;AACH;;AACD,YAAMvQ,KAAI,GAAGjhB,IAAI,CAACihB,IAAlB;AACA,YAAM0Q,SAAQ,GAAG3xB,IAAI,CAAC2xB,QAAtB,CAL2B,CAM3B;;AACA,YAAI3xB,IAAI,KAAK,KAAKuxB,KAAlB,EAAyB;AACrB;AACA;AACAtQ,eAAI,CAAC0Q,QAAL,GAAgBniC,SAAhB;AACA,eAAK+hC,KAAL,GAAatQ,KAAb;AACH,SALD,MAMK;AACD;AACAA,eAAI,CAAC0Q,QAAL,GAAgBA,SAAhB;AACAA,mBAAQ,CAAC1Q,IAAT,GAAgBA,KAAhB;AACH;;AACDjhB,YAAI,CAACihB,IAAL,GAAYzxB,SAAZ;AACAwQ,YAAI,CAAC2xB,QAAL,GAAgB,KAAKH,KAArB;AACA,aAAKA,KAAL,CAAWvQ,IAAX,GAAkBjhB,IAAlB;AACA,aAAKwxB,KAAL,GAAaxxB,IAAb;AACH;AACJ;;;wBAxPU;AACP,aAAO,KAAKyxB,KAAZ;AACH;;;;;;AAwPLzlC,OAAO,CAACqlC,SAAR,GAAoBA,SAApB,C;;;;;;;;;;;;ACtRA;;;;AAIA;AACa;;;;;;;;;;;;;;;;;;;;AACb,SAASxlC,QAAT,CAAkBC,CAAlB,EAAqB;AACjB,OAAK,IAAIC,CAAT,IAAcD,CAAd;AAAiB,QAAI,CAACE,OAAO,CAACC,cAAR,CAAuBF,CAAvB,CAAL,EAAgCC,OAAO,CAACD,CAAD,CAAP,GAAaD,CAAC,CAACC,CAAD,CAAd;AAAjD;AACH;;AACDG,MAAM,CAACC,cAAP,CAAsBH,OAAtB,EAA+B,YAA/B,EAA6C;AAAEI,OAAK,EAAE;AAAT,CAA7C;;AACA,IAAMM,EAAE,GAAGJ,mBAAO,CAAC,kGAAD,CAAlB;;AACA,IAAMmhC,UAAU,GAAGnhC,mBAAO,CAAC,8GAAD,CAA1B;;AACAN,OAAO,CAACy/B,WAAR,GAAsBgC,UAAU,CAAChC,WAAjC;AACAz/B,OAAO,CAAC0/B,YAAR,GAAuB+B,UAAU,CAAC/B,YAAlC;AACA1/B,OAAO,CAACgmC,YAAR,GAAuBvE,UAAU,CAACuE,YAAlC;AACAhmC,OAAO,CAACimC,YAAR,GAAuBxE,UAAU,CAACwE,YAAlC;AACAjmC,OAAO,CAACkmC,YAAR,GAAuBzE,UAAU,CAACyE,YAAlC;AACAlmC,OAAO,CAACmmC,YAAR,GAAuB1E,UAAU,CAAC0E,YAAlC;AACAnmC,OAAO,CAAComC,YAAR,GAAuB3E,UAAU,CAAC2E,YAAlC;AACApmC,OAAO,CAACqmC,YAAR,GAAuB5E,UAAU,CAAC4E,YAAlC;AACArmC,OAAO,CAACsmC,YAAR,GAAuB7E,UAAU,CAAC6E,YAAlC;AACAtmC,OAAO,CAACumC,YAAR,GAAuB9E,UAAU,CAAC8E,YAAlC;AACAvmC,OAAO,CAACwmC,YAAR,GAAuB/E,UAAU,CAAC+E,YAAlC;AACAxmC,OAAO,CAACujB,aAAR,GAAwBke,UAAU,CAACle,aAAnC;AACAvjB,OAAO,CAACgrB,UAAR,GAAqByW,UAAU,CAACzW,UAAhC;AACAhrB,OAAO,CAAC2/B,gBAAR,GAA2B8B,UAAU,CAAC9B,gBAAtC;AACA3/B,OAAO,CAAC4/B,iBAAR,GAA4B6B,UAAU,CAAC7B,iBAAvC;AACA5/B,OAAO,CAACymC,iBAAR,GAA4BhF,UAAU,CAACgF,iBAAvC;AACAzmC,OAAO,CAAC0mC,iBAAR,GAA4BjF,UAAU,CAACiF,iBAAvC;AACA1mC,OAAO,CAAC2mC,iBAAR,GAA4BlF,UAAU,CAACkF,iBAAvC;AACA3mC,OAAO,CAAC4mC,iBAAR,GAA4BnF,UAAU,CAACmF,iBAAvC;AACA5mC,OAAO,CAAC6mC,iBAAR,GAA4BpF,UAAU,CAACoF,iBAAvC;AACA7mC,OAAO,CAAC8mC,iBAAR,GAA4BrF,UAAU,CAACqF,iBAAvC;AACA9mC,OAAO,CAAC+mC,iBAAR,GAA4BtF,UAAU,CAACsF,iBAAvC;AACA/mC,OAAO,CAACgnC,iBAAR,GAA4BvF,UAAU,CAACuF,iBAAvC;AACAhnC,OAAO,CAACinC,iBAAR,GAA4BxF,UAAU,CAACwF,iBAAvC;;AACA,IAAMC,eAAe,GAAG5mC,mBAAO,CAAC,wHAAD,CAA/B;;AACAN,OAAO,CAAC6f,aAAR,GAAwBqnB,eAAe,CAACrnB,aAAxC;AACA7f,OAAO,CAAC8/B,mBAAR,GAA8BoH,eAAe,CAACpH,mBAA9C;AACA9/B,OAAO,CAACggC,gBAAR,GAA2BkH,eAAe,CAAClH,gBAA3C;AACAhgC,OAAO,CAACmnC,mBAAR,GAA8BD,eAAe,CAACC,mBAA9C;;AACA,IAAMC,eAAe,GAAG9mC,mBAAO,CAAC,wHAAD,CAA/B;;AACAN,OAAO,CAAC+f,aAAR,GAAwBqnB,eAAe,CAACrnB,aAAxC;AACA/f,OAAO,CAAC+/B,mBAAR,GAA8BqH,eAAe,CAACrH,mBAA9C;AACA//B,OAAO,CAACigC,gBAAR,GAA2BmH,eAAe,CAACnH,gBAA3C;AACAjgC,OAAO,CAACqnC,mBAAR,GAA8BD,eAAe,CAACC,mBAA9C;;AACA,IAAMhE,QAAQ,GAAG/iC,mBAAO,CAAC,0GAAD,CAAxB;;AACAN,OAAO,CAACmlB,UAAR,GAAqBke,QAAQ,CAACle,UAA9B;AACAnlB,OAAO,CAAC+H,KAAR,GAAgBs7B,QAAQ,CAACt7B,KAAzB;AACA/H,OAAO,CAACsiB,OAAR,GAAkB+gB,QAAQ,CAAC/gB,OAA3B;;AACA,IAAMglB,cAAc,GAAGhnC,mBAAO,CAAC,sHAAD,CAA9B;;AACAN,OAAO,CAACs/B,uBAAR,GAAkCgI,cAAc,CAAChI,uBAAjD;AACAt/B,OAAO,CAACq/B,iBAAR,GAA4BiI,cAAc,CAACjI,iBAA3C;;AACA,IAAMkI,WAAW,GAAGjnC,mBAAO,CAAC,gHAAD,CAA3B;;AACAT,QAAQ,CAACS,mBAAO,CAAC,oHAAD,CAAR,CAAR;;AACAT,QAAQ,CAACS,mBAAO,CAAC,wHAAD,CAAR,CAAR;;AACA,IAAIknC,kBAAJ;;AACA,CAAC,UAAUA,kBAAV,EAA8B;AAC3BA,oBAAkB,CAACrlC,IAAnB,GAA0B,IAAIs/B,UAAU,CAAC9B,gBAAf,CAAgC,iBAAhC,CAA1B;AACH,CAFD,EAEG6H,kBAAkB,KAAKA,kBAAkB,GAAG,EAA1B,CAFrB;;AAGA,IAAIC,oBAAJ;;AACA,CAAC,UAAUA,oBAAV,EAAgC;AAC7BA,sBAAoB,CAACtlC,IAArB,GAA4B,IAAIs/B,UAAU,CAAC9B,gBAAf,CAAgC,YAAhC,CAA5B;AACH,CAFD,EAEG8H,oBAAoB,KAAKA,oBAAoB,GAAG,EAA5B,CAFvB;;IAGMlH,Y,GACF,wBAAc;AAAA;AACb,C;;AAELvgC,OAAO,CAACugC,YAAR,GAAuBA,YAAvB;AACAvgC,OAAO,CAAC0nC,UAAR,GAAqBxnC,MAAM,CAACojC,MAAP,CAAc;AAC/BriC,OAAK,EAAE,iBAAM,CAAG,CADe;AAE/BC,MAAI,EAAE,gBAAM,CAAG,CAFgB;AAG/BC,MAAI,EAAE,gBAAM,CAAG,CAHgB;AAI/BC,KAAG,EAAE,eAAM,CAAG;AAJiB,CAAd,CAArB;AAMA,IAAI+kB,KAAJ;;AACA,CAAC,UAAUA,KAAV,EAAiB;AACdA,OAAK,CAACA,KAAK,CAAC,KAAD,CAAL,GAAe,CAAhB,CAAL,GAA0B,KAA1B;AACAA,OAAK,CAACA,KAAK,CAAC,UAAD,CAAL,GAAoB,CAArB,CAAL,GAA+B,UAA/B;AACAA,OAAK,CAACA,KAAK,CAAC,SAAD,CAAL,GAAmB,CAApB,CAAL,GAA8B,SAA9B;AACH,CAJD,EAIGA,KAAK,GAAGnmB,OAAO,CAACmmB,KAAR,KAAkBnmB,OAAO,CAACmmB,KAAR,GAAgB,EAAlC,CAJX;;AAKA,CAAC,UAAUA,KAAV,EAAiB;AACd,WAAS8C,UAAT,CAAoB7oB,KAApB,EAA2B;AACvB,QAAI,CAACM,EAAE,CAAC2B,MAAH,CAAUjC,KAAV,CAAL,EAAuB;AACnB,aAAO+lB,KAAK,CAAC4C,GAAb;AACH;;AACD3oB,SAAK,GAAGA,KAAK,CAACunC,WAAN,EAAR;;AACA,YAAQvnC,KAAR;AACI,WAAK,KAAL;AACI,eAAO+lB,KAAK,CAAC4C,GAAb;;AACJ,WAAK,UAAL;AACI,eAAO5C,KAAK,CAACyhB,QAAb;;AACJ,WAAK,SAAL;AACI,eAAOzhB,KAAK,CAAC0hB,OAAb;;AACJ;AACI,eAAO1hB,KAAK,CAAC4C,GAAb;AARR;AAUH;;AACD5C,OAAK,CAAC8C,UAAN,GAAmBA,UAAnB;;AACA,WAAS/c,QAAT,CAAkB9L,KAAlB,EAAyB;AACrB,YAAQA,KAAR;AACI,WAAK+lB,KAAK,CAAC4C,GAAX;AACI,eAAO,KAAP;;AACJ,WAAK5C,KAAK,CAACyhB,QAAX;AACI,eAAO,UAAP;;AACJ,WAAKzhB,KAAK,CAAC0hB,OAAX;AACI,eAAO,SAAP;;AACJ;AACI,eAAO,KAAP;AARR;AAUH;;AACD1hB,OAAK,CAACja,QAAN,GAAiBA,QAAjB;AACH,CA/BD,EA+BGia,KAAK,GAAGnmB,OAAO,CAACmmB,KAAR,KAAkBnmB,OAAO,CAACmmB,KAAR,GAAgB,EAAlC,CA/BX;;AAgCA,IAAIjjB,WAAJ;;AACA,CAAC,UAAUA,WAAV,EAAuB;AACpBA,aAAW,CAAC,MAAD,CAAX,GAAsB,MAAtB;AACAA,aAAW,CAAC,MAAD,CAAX,GAAsB,MAAtB;AACH,CAHD,EAGGA,WAAW,GAAGlD,OAAO,CAACkD,WAAR,KAAwBlD,OAAO,CAACkD,WAAR,GAAsB,EAA9C,CAHjB;;AAIA,CAAC,UAAUA,WAAV,EAAuB;AACpB,WAAS+lB,UAAT,CAAoB7oB,KAApB,EAA2B;AACvBA,SAAK,GAAGA,KAAK,CAACunC,WAAN,EAAR;;AACA,QAAIvnC,KAAK,KAAK,MAAd,EAAsB;AAClB,aAAO8C,WAAW,CAACmhB,IAAnB;AACH,KAFD,MAGK;AACD,aAAOnhB,WAAW,CAACC,IAAnB;AACH;AACJ;;AACDD,aAAW,CAAC+lB,UAAZ,GAAyBA,UAAzB;AACH,CAXD,EAWG/lB,WAAW,GAAGlD,OAAO,CAACkD,WAAR,KAAwBlD,OAAO,CAACkD,WAAR,GAAsB,EAA9C,CAXjB;;AAYA,IAAIq8B,oBAAJ;;AACA,CAAC,UAAUA,oBAAV,EAAgC;AAC7BA,sBAAoB,CAACp9B,IAArB,GAA4B,IAAIs/B,UAAU,CAAC9B,gBAAf,CAAgC,wBAAhC,CAA5B;AACH,CAFD,EAEGJ,oBAAoB,GAAGv/B,OAAO,CAACu/B,oBAAR,KAAiCv/B,OAAO,CAACu/B,oBAAR,GAA+B,EAAhE,CAF1B;;AAGA,IAAIC,oBAAJ;;AACA,CAAC,UAAUA,oBAAV,EAAgC;AAC7BA,sBAAoB,CAACr9B,IAArB,GAA4B,IAAIs/B,UAAU,CAAC9B,gBAAf,CAAgC,wBAAhC,CAA5B;AACH,CAFD,EAEGH,oBAAoB,GAAGx/B,OAAO,CAACw/B,oBAAR,KAAiCx/B,OAAO,CAACw/B,oBAAR,GAA+B,EAAhE,CAF1B;;AAGA,IAAIsI,gBAAJ;;AACA,CAAC,UAAUA,gBAAV,EAA4B;AACzB;;;AAGAA,kBAAgB,CAACA,gBAAgB,CAAC,QAAD,CAAhB,GAA6B,CAA9B,CAAhB,GAAmD,QAAnD;AACA;;;;AAGAA,kBAAgB,CAACA,gBAAgB,CAAC,UAAD,CAAhB,GAA+B,CAAhC,CAAhB,GAAqD,UAArD;AACA;;;;AAGAA,kBAAgB,CAACA,gBAAgB,CAAC,kBAAD,CAAhB,GAAuC,CAAxC,CAAhB,GAA6D,kBAA7D;AACH,CAbD,EAaGA,gBAAgB,GAAG9nC,OAAO,CAAC8nC,gBAAR,KAA6B9nC,OAAO,CAAC8nC,gBAAR,GAA2B,EAAxD,CAbtB;;IAcMC,e;;;;;AACF,2BAAYtkB,IAAZ,EAAkB1iB,OAAlB,EAA2B;AAAA;;AAAA;;AACvB,8BAAMA,OAAN;AACA,UAAK0iB,IAAL,GAAYA,IAAZ;AACAvjB,UAAM,CAAC8nC,cAAP,gCAA4BD,eAAe,CAACE,SAA5C;AAHuB;AAI1B;;;iCALyBx2B,K;;AAO9BzR,OAAO,CAAC+nC,eAAR,GAA0BA,eAA1B;AACA,IAAIlI,kBAAJ;;AACA,CAAC,UAAUA,kBAAV,EAA8B;AAC3B,WAAS92B,EAAT,CAAY3I,KAAZ,EAAmB;AACf,QAAI4I,SAAS,GAAG5I,KAAhB;AACA,WAAO4I,SAAS,IAAItI,EAAE,CAACuI,IAAH,CAAQD,SAAS,CAACk/B,kBAAlB,CAApB;AACH;;AACDrI,oBAAkB,CAAC92B,EAAnB,GAAwBA,EAAxB;AACH,CAND,EAMG82B,kBAAkB,GAAG7/B,OAAO,CAAC6/B,kBAAR,KAA+B7/B,OAAO,CAAC6/B,kBAAR,GAA6B,EAA5D,CANxB;;AAOA,IAAIsI,eAAJ;;AACA,CAAC,UAAUA,eAAV,EAA2B;AACxBA,iBAAe,CAACA,eAAe,CAAC,KAAD,CAAf,GAAyB,CAA1B,CAAf,GAA8C,KAA9C;AACAA,iBAAe,CAACA,eAAe,CAAC,WAAD,CAAf,GAA+B,CAAhC,CAAf,GAAoD,WAApD;AACAA,iBAAe,CAACA,eAAe,CAAC,QAAD,CAAf,GAA4B,CAA7B,CAAf,GAAiD,QAAjD;AACAA,iBAAe,CAACA,eAAe,CAAC,UAAD,CAAf,GAA8B,CAA/B,CAAf,GAAmD,UAAnD;AACH,CALD,EAKGA,eAAe,KAAKA,eAAe,GAAG,EAAvB,CALlB;;AAMA,SAASC,wBAAT,CAAkCC,aAAlC,EAAiDC,aAAjD,EAAgE5mC,MAAhE,EAAwEy/B,QAAxE,EAAkF;AAC9E,MAAIoH,cAAc,GAAG,CAArB;AACA,MAAIC,yBAAyB,GAAG,CAAhC;AACA,MAAIC,4BAA4B,GAAG,CAAnC;AACA,MAAM3d,OAAO,GAAG,KAAhB;AACA,MAAI4d,kBAAkB,GAAGllC,SAAzB;AACA,MAAImlC,eAAe,GAAGzoC,MAAM,CAAC0e,MAAP,CAAc,IAAd,CAAtB;AACA,MAAIgqB,uBAAuB,GAAGplC,SAA9B;AACA,MAAIqlC,oBAAoB,GAAG3oC,MAAM,CAAC0e,MAAP,CAAc,IAAd,CAA3B;AACA,MAAIkqB,gBAAgB,GAAG,IAAIj/B,GAAJ,EAAvB;AACA,MAAIk/B,KAAJ;AACA,MAAIC,YAAY,GAAG,IAAIzB,WAAW,CAAClC,SAAhB,EAAnB;AACA,MAAI4D,gBAAgB,GAAG/oC,MAAM,CAAC0e,MAAP,CAAc,IAAd,CAAvB;AACA,MAAIsqB,aAAa,GAAGhpC,MAAM,CAAC0e,MAAP,CAAc,IAAd,CAApB;AACA,MAAI/b,MAAK,GAAGsjB,KAAK,CAAC4C,GAAlB;AACA,MAAI9lB,WAAW,GAAGC,WAAW,CAACC,IAA9B;AACA,MAAIL,MAAJ;AACA,MAAIue,KAAK,GAAG8mB,eAAe,CAACgB,GAA5B;AACA,MAAIC,YAAY,GAAG,IAAI/F,QAAQ,CAAC/gB,OAAb,EAAnB;AACA,MAAI+mB,YAAY,GAAG,IAAIhG,QAAQ,CAAC/gB,OAAb,EAAnB;AACA,MAAIgnB,4BAA4B,GAAG,IAAIjG,QAAQ,CAAC/gB,OAAb,EAAnC;AACA,MAAIinB,wBAAwB,GAAG,IAAIlG,QAAQ,CAAC/gB,OAAb,EAA/B;AACA,MAAIknB,cAAc,GAAG,IAAInG,QAAQ,CAAC/gB,OAAb,EAArB;;AACA,WAASmnB,qBAAT,CAA+Bt/B,EAA/B,EAAmC;AAC/B,WAAO,SAASA,EAAE,CAAC+B,QAAH,EAAhB;AACH;;AACD,WAASw9B,sBAAT,CAAgCv/B,EAAhC,EAAoC;AAChC,QAAIA,EAAE,KAAK,IAAX,EAAiB;AACb,aAAO,iBAAiB,CAAC,EAAEs+B,4BAAH,EAAiCv8B,QAAjC,EAAxB;AACH,KAFD,MAGK;AACD,aAAO,SAAS/B,EAAE,CAAC+B,QAAH,EAAhB;AACH;AACJ;;AACD,WAASy9B,0BAAT,GAAsC;AAClC,WAAO,SAAS,CAAC,EAAEnB,yBAAH,EAA8Bt8B,QAA9B,EAAhB;AACH;;AACD,WAAS09B,iBAAT,CAA2BC,KAA3B,EAAkC9oC,OAAlC,EAA2C;AACvC,QAAI0gC,UAAU,CAACqI,gBAAX,CAA4B/oC,OAA5B,CAAJ,EAA0C;AACtC8oC,WAAK,CAAC3/B,GAAN,CAAUu/B,qBAAqB,CAAC1oC,OAAO,CAACoJ,EAAT,CAA/B,EAA6CpJ,OAA7C;AACH,KAFD,MAGK,IAAI0gC,UAAU,CAACsI,iBAAX,CAA6BhpC,OAA7B,CAAJ,EAA2C;AAC5C8oC,WAAK,CAAC3/B,GAAN,CAAUw/B,sBAAsB,CAAC3oC,OAAO,CAACoJ,EAAT,CAAhC,EAA8CpJ,OAA9C;AACH,KAFI,MAGA;AACD8oC,WAAK,CAAC3/B,GAAN,CAAUy/B,0BAA0B,EAApC,EAAwC5oC,OAAxC;AACH;AACJ;;AACD,WAASmnC,kBAAT,CAA4B5iC,QAA5B,EAAsC;AAClC,WAAO9B,SAAP;AACH;;AACD,WAASwmC,WAAT,GAAuB;AACnB,WAAO3oB,KAAK,KAAK8mB,eAAe,CAAC8B,SAAjC;AACH;;AACD,WAASC,QAAT,GAAoB;AAChB,WAAO7oB,KAAK,KAAK8mB,eAAe,CAACgC,MAAjC;AACH;;AACD,WAASC,UAAT,GAAsB;AAClB,WAAO/oB,KAAK,KAAK8mB,eAAe,CAACkC,QAAjC;AACH;;AACD,WAAS5oC,YAAT,GAAwB;AACpB,QAAI4f,KAAK,KAAK8mB,eAAe,CAACgB,GAA1B,IAAiC9nB,KAAK,KAAK8mB,eAAe,CAAC8B,SAA/D,EAA0E;AACtE5oB,WAAK,GAAG8mB,eAAe,CAACgC,MAAxB;AACAd,kBAAY,CAACpkB,IAAb,CAAkBzhB,SAAlB;AACH,KAJmB,CAKpB;;AACH;;AACD,WAAS8mC,gBAAT,CAA0BrpC,KAA1B,EAAiC;AAC7BmoC,gBAAY,CAACnkB,IAAb,CAAkB,CAAChkB,KAAD,EAAQuC,SAAR,EAAmBA,SAAnB,CAAlB;AACH;;AACD,WAAS+mC,iBAAT,CAA2BzoC,IAA3B,EAAiC;AAC7BsnC,gBAAY,CAACnkB,IAAb,CAAkBnjB,IAAlB;AACH;;AACDumC,eAAa,CAACtmC,OAAd,CAAsBN,YAAtB;AACA4mC,eAAa,CAACxmC,OAAd,CAAsByoC,gBAAtB;AACAhC,eAAa,CAACvmC,OAAd,CAAsBN,YAAtB;AACA6mC,eAAa,CAACzmC,OAAd,CAAsB0oC,iBAAtB;;AACA,WAASC,mBAAT,GAA+B;AAC3B,QAAIzB,KAAK,IAAIC,YAAY,CAACz+B,IAAb,KAAsB,CAAnC,EAAsC;AAClC;AACH;;AACDw+B,SAAK,GAAG0B,YAAY,CAAC,YAAM;AACvB1B,WAAK,GAAGvlC,SAAR;AACAknC,yBAAmB;AACtB,KAHmB,CAApB;AAIH;;AACD,WAASA,mBAAT,GAA+B;AAC3B,QAAI1B,YAAY,CAACz+B,IAAb,KAAsB,CAA1B,EAA6B;AACzB;AACH;;AACD,QAAIxJ,OAAO,GAAGioC,YAAY,CAAC7iC,KAAb,EAAd;;AACA,QAAI;AACA,UAAIs7B,UAAU,CAACqI,gBAAX,CAA4B/oC,OAA5B,CAAJ,EAA0C;AACtC4pC,qBAAa,CAAC5pC,OAAD,CAAb;AACH,OAFD,MAGK,IAAI0gC,UAAU,CAACmJ,qBAAX,CAAiC7pC,OAAjC,CAAJ,EAA+C;AAChD8pC,0BAAkB,CAAC9pC,OAAD,CAAlB;AACH,OAFI,MAGA,IAAI0gC,UAAU,CAACsI,iBAAX,CAA6BhpC,OAA7B,CAAJ,EAA2C;AAC5C+pC,sBAAc,CAAC/pC,OAAD,CAAd;AACH,OAFI,MAGA;AACDgqC,4BAAoB,CAAChqC,OAAD,CAApB;AACH;AACJ,KAbD,SAcQ;AACJypC,yBAAmB;AACtB;AACJ;;AACD,MAAIvgC,QAAQ,GAAG,SAAXA,QAAW,CAAClJ,OAAD,EAAa;AACxB,QAAI;AACA;AACA;AACA,UAAI0gC,UAAU,CAACmJ,qBAAX,CAAiC7pC,OAAjC,KAA6CA,OAAO,CAACuB,MAAR,KAAmBklC,kBAAkB,CAACrlC,IAAnB,CAAwBG,MAA5F,EAAoG;AAChG,YAAIuG,GAAG,GAAG4gC,qBAAqB,CAAC1oC,OAAO,CAACqB,MAAR,CAAe+H,EAAhB,CAA/B;AACA,YAAI6gC,QAAQ,GAAGhC,YAAY,CAACx8B,GAAb,CAAiB3D,GAAjB,CAAf;;AACA,YAAI44B,UAAU,CAACqI,gBAAX,CAA4BkB,QAA5B,CAAJ,EAA2C;AACvC,cAAIC,QAAQ,GAAG9J,QAAQ,IAAIA,QAAQ,CAAC+G,kBAArB,GAA0C/G,QAAQ,CAAC+G,kBAAT,CAA4B8C,QAA5B,EAAsC9C,kBAAtC,CAA1C,GAAsGA,kBAAkB,CAAC8C,QAAD,CAAvI;;AACA,cAAIC,QAAQ,KAAKA,QAAQ,CAAChqC,KAAT,KAAmB,KAAK,CAAxB,IAA6BgqC,QAAQ,CAACjpC,MAAT,KAAoB,KAAK,CAA3D,CAAZ,EAA2E;AACvEgnC,wBAAY,UAAZ,CAAoBngC,GAApB;AACAoiC,oBAAQ,CAAC9gC,EAAT,GAAc6gC,QAAQ,CAAC7gC,EAAvB;AACA+gC,gCAAoB,CAACD,QAAD,EAAWlqC,OAAO,CAACuB,MAAnB,EAA2BqD,IAAI,CAACC,GAAL,EAA3B,CAApB;AACA0iC,yBAAa,CAAC6C,KAAd,CAAoBF,QAApB;AACA;AACH;AACJ;AACJ;;AACDrB,uBAAiB,CAACZ,YAAD,EAAejoC,OAAf,CAAjB;AACH,KAlBD,SAmBQ;AACJypC,yBAAmB;AACtB;AACJ,GAvBD;;AAwBA,WAASG,aAAT,CAAuBS,cAAvB,EAAuC;AACnC,QAAIhB,UAAU,EAAd,EAAkB;AACd;AACA;AACA;AACH;;AACD,aAASiB,KAAT,CAAeC,aAAf,EAA8BhpC,MAA9B,EAAsCipC,SAAtC,EAAiD;AAC7C,UAAIxqC,OAAO,GAAG;AACVyqC,eAAO,EAAE1gB,OADC;AAEV3gB,UAAE,EAAEihC,cAAc,CAACjhC;AAFT,OAAd;;AAIA,UAAImhC,aAAa,YAAY7J,UAAU,CAACle,aAAxC,EAAuD;AACnDxiB,eAAO,CAACE,KAAR,GAAgBqqC,aAAa,CAACG,MAAd,EAAhB;AACH,OAFD,MAGK;AACD1qC,eAAO,CAACiB,MAAR,GAAiBspC,aAAa,KAAK,KAAK,CAAvB,GAA2B,IAA3B,GAAkCA,aAAnD;AACH;;AACDJ,0BAAoB,CAACnqC,OAAD,EAAUuB,MAAV,EAAkBipC,SAAlB,CAApB;AACAjD,mBAAa,CAAC6C,KAAd,CAAoBpqC,OAApB;AACH;;AACD,aAAS2qC,UAAT,CAAoBzqC,KAApB,EAA2BqB,MAA3B,EAAmCipC,SAAnC,EAA8C;AAC1C,UAAIxqC,OAAO,GAAG;AACVyqC,eAAO,EAAE1gB,OADC;AAEV3gB,UAAE,EAAEihC,cAAc,CAACjhC,EAFT;AAGVlJ,aAAK,EAAEA,KAAK,CAACwqC,MAAN;AAHG,OAAd;AAKAP,0BAAoB,CAACnqC,OAAD,EAAUuB,MAAV,EAAkBipC,SAAlB,CAApB;AACAjD,mBAAa,CAAC6C,KAAd,CAAoBpqC,OAApB;AACH;;AACD,aAAS4qC,YAAT,CAAsB3pC,MAAtB,EAA8BM,MAA9B,EAAsCipC,SAAtC,EAAiD;AAC7C;AACA;AACA,UAAIvpC,MAAM,KAAK,KAAK,CAApB,EAAuB;AACnBA,cAAM,GAAG,IAAT;AACH;;AACD,UAAIjB,OAAO,GAAG;AACVyqC,eAAO,EAAE1gB,OADC;AAEV3gB,UAAE,EAAEihC,cAAc,CAACjhC,EAFT;AAGVnI,cAAM,EAAEA;AAHE,OAAd;AAKAkpC,0BAAoB,CAACnqC,OAAD,EAAUuB,MAAV,EAAkBipC,SAAlB,CAApB;AACAjD,mBAAa,CAAC6C,KAAd,CAAoBpqC,OAApB;AACH;;AACD6qC,wBAAoB,CAACR,cAAD,CAApB;AACA,QAAI5zB,OAAO,GAAGmxB,eAAe,CAACyC,cAAc,CAAC9oC,MAAhB,CAA7B;AACA,QAAIH,IAAJ;AACA,QAAI0pC,cAAJ;;AACA,QAAIr0B,OAAJ,EAAa;AACTrV,UAAI,GAAGqV,OAAO,CAACrV,IAAf;AACA0pC,oBAAc,GAAGr0B,OAAO,CAAChV,OAAzB;AACH;;AACD,QAAI+oC,SAAS,GAAG5lC,IAAI,CAACC,GAAL,EAAhB;;AACA,QAAIimC,cAAc,IAAInD,kBAAtB,EAA0C;AACtC,UAAIoD,kBAAkB,GAAG,IAAIxE,cAAc,CAAChI,uBAAnB,EAAzB;AACA,UAAIyM,QAAQ,GAAGxkC,MAAM,CAAC6jC,cAAc,CAACjhC,EAAhB,CAArB;AACA++B,mBAAa,CAAC6C,QAAD,CAAb,GAA0BD,kBAA1B;;AACA,UAAI;AACA,YAAIE,aAAJ;;AACA,YAAIZ,cAAc,CAAChpC,MAAf,KAA0B,KAAK,CAA/B,IAAqCD,IAAI,KAAK,KAAK,CAAd,IAAmBA,IAAI,CAAC8pC,cAAL,KAAwB,CAApF,EAAwF;AACpFD,uBAAa,GAAGH,cAAc,GACxBA,cAAc,CAACC,kBAAkB,CAACr4B,KAApB,CADU,GAExBi1B,kBAAkB,CAAC0C,cAAc,CAAC9oC,MAAhB,EAAwBwpC,kBAAkB,CAACr4B,KAA3C,CAFxB;AAGH,SAJD,MAKK,IAAI/S,EAAE,CAAC0oB,KAAH,CAASgiB,cAAc,CAAChpC,MAAxB,MAAoCD,IAAI,KAAK,KAAK,CAAd,IAAmBA,IAAI,CAAC8pC,cAAL,GAAsB,CAA7E,CAAJ,EAAqF;AACtFD,uBAAa,GAAGH,cAAc,GACxBA,cAAc,MAAd,4BAAkBT,cAAc,CAAChpC,MAAjC,UAAyC0pC,kBAAkB,CAACr4B,KAA5D,GADwB,GAExBi1B,kBAAkB,MAAlB,UAAmB0C,cAAc,CAAC9oC,MAAlC,4BAA6C8oC,cAAc,CAAChpC,MAA5D,IAAoE0pC,kBAAkB,CAACr4B,KAAvF,GAFN;AAGH,SAJI,MAKA;AACDu4B,uBAAa,GAAGH,cAAc,GACxBA,cAAc,CAACT,cAAc,CAAChpC,MAAhB,EAAwB0pC,kBAAkB,CAACr4B,KAA3C,CADU,GAExBi1B,kBAAkB,CAAC0C,cAAc,CAAC9oC,MAAhB,EAAwB8oC,cAAc,CAAChpC,MAAvC,EAA+C0pC,kBAAkB,CAACr4B,KAAlE,CAFxB;AAGH;;AACD,YAAIy4B,OAAO,GAAGF,aAAd;;AACA,YAAI,CAACA,aAAL,EAAoB;AAChB,iBAAO9C,aAAa,CAAC6C,QAAD,CAApB;AACAJ,sBAAY,CAACK,aAAD,EAAgBZ,cAAc,CAAC9oC,MAA/B,EAAuCipC,SAAvC,CAAZ;AACH,SAHD,MAIK,IAAIW,OAAO,CAAC19B,IAAZ,EAAkB;AACnB09B,iBAAO,CAAC19B,IAAR,CAAa,UAAC88B,aAAD,EAAmB;AAC5B,mBAAOpC,aAAa,CAAC6C,QAAD,CAApB;AACAV,iBAAK,CAACC,aAAD,EAAgBF,cAAc,CAAC9oC,MAA/B,EAAuCipC,SAAvC,CAAL;AACH,WAHD,EAGG,UAAAtqC,KAAK,EAAI;AACR,mBAAOioC,aAAa,CAAC6C,QAAD,CAApB;;AACA,gBAAI9qC,KAAK,YAAYwgC,UAAU,CAACle,aAAhC,EAA+C;AAC3CmoB,wBAAU,CAACzqC,KAAD,EAAQmqC,cAAc,CAAC9oC,MAAvB,EAA+BipC,SAA/B,CAAV;AACH,aAFD,MAGK,IAAItqC,KAAK,IAAIP,EAAE,CAAC2B,MAAH,CAAUpB,KAAK,CAACF,OAAhB,CAAb,EAAuC;AACxC2qC,wBAAU,CAAC,IAAIjK,UAAU,CAACle,aAAf,CAA6Bke,UAAU,CAACzW,UAAX,CAAsBmhB,aAAnD,oBAA6Ef,cAAc,CAAC9oC,MAA5F,mCAA2HrB,KAAK,CAACF,OAAjI,EAAD,EAA8IqqC,cAAc,CAAC9oC,MAA7J,EAAqKipC,SAArK,CAAV;AACH,aAFI,MAGA;AACDG,wBAAU,CAAC,IAAIjK,UAAU,CAACle,aAAf,CAA6Bke,UAAU,CAACzW,UAAX,CAAsBmhB,aAAnD,oBAA6Ef,cAAc,CAAC9oC,MAA5F,yDAAD,EAA2J8oC,cAAc,CAAC9oC,MAA1K,EAAkLipC,SAAlL,CAAV;AACH;AACJ,WAdD;AAeH,SAhBI,MAiBA;AACD,iBAAOrC,aAAa,CAAC6C,QAAD,CAApB;AACAV,eAAK,CAACW,aAAD,EAAgBZ,cAAc,CAAC9oC,MAA/B,EAAuCipC,SAAvC,CAAL;AACH;AACJ,OA3CD,CA4CA,OAAOtqC,KAAP,EAAc;AACV,eAAOioC,aAAa,CAAC6C,QAAD,CAApB;;AACA,YAAI9qC,KAAK,YAAYwgC,UAAU,CAACle,aAAhC,EAA+C;AAC3C8nB,eAAK,CAACpqC,KAAD,EAAQmqC,cAAc,CAAC9oC,MAAvB,EAA+BipC,SAA/B,CAAL;AACH,SAFD,MAGK,IAAItqC,KAAK,IAAIP,EAAE,CAAC2B,MAAH,CAAUpB,KAAK,CAACF,OAAhB,CAAb,EAAuC;AACxC2qC,oBAAU,CAAC,IAAIjK,UAAU,CAACle,aAAf,CAA6Bke,UAAU,CAACzW,UAAX,CAAsBmhB,aAAnD,oBAA6Ef,cAAc,CAAC9oC,MAA5F,mCAA2HrB,KAAK,CAACF,OAAjI,EAAD,EAA8IqqC,cAAc,CAAC9oC,MAA7J,EAAqKipC,SAArK,CAAV;AACH,SAFI,MAGA;AACDG,oBAAU,CAAC,IAAIjK,UAAU,CAACle,aAAf,CAA6Bke,UAAU,CAACzW,UAAX,CAAsBmhB,aAAnD,oBAA6Ef,cAAc,CAAC9oC,MAA5F,yDAAD,EAA2J8oC,cAAc,CAAC9oC,MAA1K,EAAkLipC,SAAlL,CAAV;AACH;AACJ;AACJ,KA5DD,MA6DK;AACDG,gBAAU,CAAC,IAAIjK,UAAU,CAACle,aAAf,CAA6Bke,UAAU,CAACzW,UAAX,CAAsBohB,cAAnD,6BAAuFhB,cAAc,CAAC9oC,MAAtG,EAAD,EAAkH8oC,cAAc,CAAC9oC,MAAjI,EAAyIipC,SAAzI,CAAV;AACH;AACJ;;AACD,WAAST,cAAT,CAAwBuB,eAAxB,EAAyC;AACrC,QAAIjC,UAAU,EAAd,EAAkB;AACd;AACA;AACH;;AACD,QAAIiC,eAAe,CAACliC,EAAhB,KAAuB,IAA3B,EAAiC;AAC7B,UAAIkiC,eAAe,CAACprC,KAApB,EAA2B;AACvBS,cAAM,CAACT,KAAP,6DAAkEojB,IAAI,CAACC,SAAL,CAAe+nB,eAAe,CAACprC,KAA/B,EAAsCuC,SAAtC,EAAiD,CAAjD,CAAlE;AACH,OAFD,MAGK;AACD9B,cAAM,CAACT,KAAP;AACH;AACJ,KAPD,MAQK;AACD,UAAI4H,GAAG,GAAGtB,MAAM,CAAC8kC,eAAe,CAACliC,EAAjB,CAAhB;AACA,UAAImiC,eAAe,GAAGrD,gBAAgB,CAACpgC,GAAD,CAAtC;AACA0jC,2BAAqB,CAACF,eAAD,EAAkBC,eAAlB,CAArB;;AACA,UAAIA,eAAJ,EAAqB;AACjB,eAAOrD,gBAAgB,CAACpgC,GAAD,CAAvB;;AACA,YAAI;AACA,cAAIwjC,eAAe,CAACprC,KAApB,EAA2B;AACvB,gBAAIA,KAAK,GAAGorC,eAAe,CAACprC,KAA5B;AACAqrC,2BAAe,CAAC9vB,MAAhB,CAAuB,IAAIilB,UAAU,CAACle,aAAf,CAA6BtiB,KAAK,CAACwiB,IAAnC,EAAyCxiB,KAAK,CAACF,OAA/C,EAAwDE,KAAK,CAACa,IAA9D,CAAvB;AACH,WAHD,MAIK,IAAIuqC,eAAe,CAACrqC,MAAhB,KAA2B,KAAK,CAApC,EAAuC;AACxCsqC,2BAAe,CAACx4B,OAAhB,CAAwBu4B,eAAe,CAACrqC,MAAxC;AACH,WAFI,MAGA;AACD,kBAAM,IAAIyP,KAAJ,CAAU,sBAAV,CAAN;AACH;AACJ,SAXD,CAYA,OAAOxQ,KAAP,EAAc;AACV,cAAIA,KAAK,CAACF,OAAV,EAAmB;AACfW,kBAAM,CAACT,KAAP,6BAAkCqrC,eAAe,CAAChqC,MAAlD,oCAAkFrB,KAAK,CAACF,OAAxF;AACH,WAFD,MAGK;AACDW,kBAAM,CAACT,KAAP,6BAAkCqrC,eAAe,CAAChqC,MAAlD;AACH;AACJ;AACJ;AACJ;AACJ;;AACD,WAASuoC,kBAAT,CAA4B9pC,OAA5B,EAAqC;AACjC,QAAIqpC,UAAU,EAAd,EAAkB;AACd;AACA;AACH;;AACD,QAAIjoC,IAAI,GAAGqB,SAAX;AACA,QAAIgpC,mBAAJ;;AACA,QAAIzrC,OAAO,CAACuB,MAAR,KAAmBklC,kBAAkB,CAACrlC,IAAnB,CAAwBG,MAA/C,EAAuD;AACnDkqC,yBAAmB,GAAG,6BAACpqC,MAAD,EAAY;AAC9B,YAAI+H,EAAE,GAAG/H,MAAM,CAAC+H,EAAhB;AACA,YAAIukB,MAAM,GAAGwa,aAAa,CAAC3hC,MAAM,CAAC4C,EAAD,CAAP,CAA1B;;AACA,YAAIukB,MAAJ,EAAY;AACRA,gBAAM,CAAC9H,MAAP;AACH;AACJ,OAND;AAOH,KARD,MASK;AACD,UAAIpP,OAAO,GAAGqxB,oBAAoB,CAAC9nC,OAAO,CAACuB,MAAT,CAAlC;;AACA,UAAIkV,OAAJ,EAAa;AACTg1B,2BAAmB,GAAGh1B,OAAO,CAAChV,OAA9B;AACAL,YAAI,GAAGqV,OAAO,CAACrV,IAAf;AACH;AACJ;;AACD,QAAIqqC,mBAAmB,IAAI5D,uBAA3B,EAAoD;AAChD,UAAI;AACA6D,iCAAyB,CAAC1rC,OAAD,CAAzB;;AACA,YAAIA,OAAO,CAACqB,MAAR,KAAmB,KAAK,CAAxB,IAA8BD,IAAI,KAAK,KAAK,CAAd,IAAmBA,IAAI,CAAC8pC,cAAL,KAAwB,CAA7E,EAAiF;AAC7EO,6BAAmB,GAAGA,mBAAmB,EAAtB,GAA2B5D,uBAAuB,CAAC7nC,OAAO,CAACuB,MAAT,CAArE;AACH,SAFD,MAGK,IAAI5B,EAAE,CAAC0oB,KAAH,CAASroB,OAAO,CAACqB,MAAjB,MAA6BD,IAAI,KAAK,KAAK,CAAd,IAAmBA,IAAI,CAAC8pC,cAAL,GAAsB,CAAtE,CAAJ,EAA8E;AAC/EO,6BAAmB,GAAGA,mBAAmB,MAAnB,4BAAuBzrC,OAAO,CAACqB,MAA/B,EAAH,GAA4CwmC,uBAAuB,MAAvB,UAAwB7nC,OAAO,CAACuB,MAAhC,4BAA2CvB,OAAO,CAACqB,MAAnD,GAA/D;AACH,SAFI,MAGA;AACDoqC,6BAAmB,GAAGA,mBAAmB,CAACzrC,OAAO,CAACqB,MAAT,CAAtB,GAAyCwmC,uBAAuB,CAAC7nC,OAAO,CAACuB,MAAT,EAAiBvB,OAAO,CAACqB,MAAzB,CAAnF;AACH;AACJ,OAXD,CAYA,OAAOnB,KAAP,EAAc;AACV,YAAIA,KAAK,CAACF,OAAV,EAAmB;AACfW,gBAAM,CAACT,KAAP,iCAAsCF,OAAO,CAACuB,MAA9C,oCAA8ErB,KAAK,CAACF,OAApF;AACH,SAFD,MAGK;AACDW,gBAAM,CAACT,KAAP,iCAAsCF,OAAO,CAACuB,MAA9C;AACH;AACJ;AACJ,KArBD,MAsBK;AACDgnC,kCAA4B,CAACrkB,IAA7B,CAAkClkB,OAAlC;AACH;AACJ;;AACD,WAASgqC,oBAAT,CAA8BhqC,OAA9B,EAAuC;AACnC,QAAI,CAACA,OAAL,EAAc;AACVW,YAAM,CAACT,KAAP,CAAa,yBAAb;AACA;AACH;;AACDS,UAAM,CAACT,KAAP,qFAA0FojB,IAAI,CAACC,SAAL,CAAevjB,OAAf,EAAwB,IAAxB,EAA8B,CAA9B,CAA1F,GALmC,CAMnC;;AACA,QAAIsrC,eAAe,GAAGtrC,OAAtB;;AACA,QAAIL,EAAE,CAAC2B,MAAH,CAAUgqC,eAAe,CAACliC,EAA1B,KAAiCzJ,EAAE,CAACmmB,MAAH,CAAUwlB,eAAe,CAACliC,EAA1B,CAArC,EAAoE;AAChE,UAAItB,GAAG,GAAGtB,MAAM,CAAC8kC,eAAe,CAACliC,EAAjB,CAAhB;AACA,UAAIuiC,eAAe,GAAGzD,gBAAgB,CAACpgC,GAAD,CAAtC;;AACA,UAAI6jC,eAAJ,EAAqB;AACjBA,uBAAe,CAAClwB,MAAhB,CAAuB,IAAI/K,KAAJ,CAAU,mEAAV,CAAvB;AACH;AACJ;AACJ;;AACD,WAASk7B,mBAAT,CAA6B5rC,OAA7B,EAAsC;AAClC,QAAI8B,MAAK,KAAKsjB,KAAK,CAAC4C,GAAhB,IAAuB,CAACjmB,MAA5B,EAAoC;AAChC;AACH;;AACD,QAAIG,WAAW,KAAKC,WAAW,CAACC,IAAhC,EAAsC;AAClC,UAAIrB,IAAI,GAAG0B,SAAX;;AACA,UAAIX,MAAK,KAAKsjB,KAAK,CAAC0hB,OAAhB,IAA2B9mC,OAAO,CAACqB,MAAvC,EAA+C;AAC3CN,YAAI,qBAAcuiB,IAAI,CAACC,SAAL,CAAevjB,OAAO,CAACqB,MAAvB,EAA+B,IAA/B,EAAqC,CAArC,CAAd,SAAJ;AACH;;AACDU,YAAM,CAAC1B,GAAP,4BAA+BL,OAAO,CAACuB,MAAvC,iBAAoDvB,OAAO,CAACoJ,EAA5D,UAAqErI,IAArE;AACH,KAND,MAOK;AACD8qC,mBAAa,CAAC,cAAD,EAAiB7rC,OAAjB,CAAb;AACH;AACJ;;AACD,WAAS8rC,wBAAT,CAAkC9rC,OAAlC,EAA2C;AACvC,QAAI8B,MAAK,KAAKsjB,KAAK,CAAC4C,GAAhB,IAAuB,CAACjmB,MAA5B,EAAoC;AAChC;AACH;;AACD,QAAIG,WAAW,KAAKC,WAAW,CAACC,IAAhC,EAAsC;AAClC,UAAIrB,IAAI,GAAG0B,SAAX;;AACA,UAAIX,MAAK,KAAKsjB,KAAK,CAAC0hB,OAApB,EAA6B;AACzB,YAAI9mC,OAAO,CAACqB,MAAZ,EAAoB;AAChBN,cAAI,qBAAcuiB,IAAI,CAACC,SAAL,CAAevjB,OAAO,CAACqB,MAAvB,EAA+B,IAA/B,EAAqC,CAArC,CAAd,SAAJ;AACH,SAFD,MAGK;AACDN,cAAI,GAAG,6BAAP;AACH;AACJ;;AACDgB,YAAM,CAAC1B,GAAP,iCAAoCL,OAAO,CAACuB,MAA5C,SAAwDR,IAAxD;AACH,KAXD,MAYK;AACD8qC,mBAAa,CAAC,mBAAD,EAAsB7rC,OAAtB,CAAb;AACH;AACJ;;AACD,WAASmqC,oBAAT,CAA8BnqC,OAA9B,EAAuCuB,MAAvC,EAA+CipC,SAA/C,EAA0D;AACtD,QAAI1oC,MAAK,KAAKsjB,KAAK,CAAC4C,GAAhB,IAAuB,CAACjmB,MAA5B,EAAoC;AAChC;AACH;;AACD,QAAIG,WAAW,KAAKC,WAAW,CAACC,IAAhC,EAAsC;AAClC,UAAIrB,IAAI,GAAG0B,SAAX;;AACA,UAAIX,MAAK,KAAKsjB,KAAK,CAAC0hB,OAApB,EAA6B;AACzB,YAAI9mC,OAAO,CAACE,KAAR,IAAiBF,OAAO,CAACE,KAAR,CAAca,IAAnC,EAAyC;AACrCA,cAAI,yBAAkBuiB,IAAI,CAACC,SAAL,CAAevjB,OAAO,CAACE,KAAR,CAAca,IAA7B,EAAmC,IAAnC,EAAyC,CAAzC,CAAlB,SAAJ;AACH,SAFD,MAGK;AACD,cAAIf,OAAO,CAACiB,MAAZ,EAAoB;AAChBF,gBAAI,qBAAcuiB,IAAI,CAACC,SAAL,CAAevjB,OAAO,CAACiB,MAAvB,EAA+B,IAA/B,EAAqC,CAArC,CAAd,SAAJ;AACH,WAFD,MAGK,IAAIjB,OAAO,CAACE,KAAR,KAAkB,KAAK,CAA3B,EAA8B;AAC/Ba,gBAAI,GAAG,yBAAP;AACH;AACJ;AACJ;;AACDgB,YAAM,CAAC1B,GAAP,6BAAgCkB,MAAhC,iBAA6CvB,OAAO,CAACoJ,EAArD,yCAAsFxE,IAAI,CAACC,GAAL,KAAa2lC,SAAnG,SAAkHzpC,IAAlH;AACH,KAhBD,MAiBK;AACD8qC,mBAAa,CAAC,eAAD,EAAkB7rC,OAAlB,CAAb;AACH;AACJ;;AACD,WAAS6qC,oBAAT,CAA8B7qC,OAA9B,EAAuC;AACnC,QAAI8B,MAAK,KAAKsjB,KAAK,CAAC4C,GAAhB,IAAuB,CAACjmB,MAA5B,EAAoC;AAChC;AACH;;AACD,QAAIG,WAAW,KAAKC,WAAW,CAACC,IAAhC,EAAsC;AAClC,UAAIrB,IAAI,GAAG0B,SAAX;;AACA,UAAIX,MAAK,KAAKsjB,KAAK,CAAC0hB,OAAhB,IAA2B9mC,OAAO,CAACqB,MAAvC,EAA+C;AAC3CN,YAAI,qBAAcuiB,IAAI,CAACC,SAAL,CAAevjB,OAAO,CAACqB,MAAvB,EAA+B,IAA/B,EAAqC,CAArC,CAAd,SAAJ;AACH;;AACDU,YAAM,CAAC1B,GAAP,6BAAgCL,OAAO,CAACuB,MAAxC,iBAAqDvB,OAAO,CAACoJ,EAA7D,UAAsErI,IAAtE;AACH,KAND,MAOK;AACD8qC,mBAAa,CAAC,iBAAD,EAAoB7rC,OAApB,CAAb;AACH;AACJ;;AACD,WAAS0rC,yBAAT,CAAmC1rC,OAAnC,EAA4C;AACxC,QAAI8B,MAAK,KAAKsjB,KAAK,CAAC4C,GAAhB,IAAuB,CAACjmB,MAAxB,IAAkC/B,OAAO,CAACuB,MAAR,KAAmBk9B,oBAAoB,CAACr9B,IAArB,CAA0BG,MAAnF,EAA2F;AACvF;AACH;;AACD,QAAIW,WAAW,KAAKC,WAAW,CAACC,IAAhC,EAAsC;AAClC,UAAIrB,IAAI,GAAG0B,SAAX;;AACA,UAAIX,MAAK,KAAKsjB,KAAK,CAAC0hB,OAApB,EAA6B;AACzB,YAAI9mC,OAAO,CAACqB,MAAZ,EAAoB;AAChBN,cAAI,qBAAcuiB,IAAI,CAACC,SAAL,CAAevjB,OAAO,CAACqB,MAAvB,EAA+B,IAA/B,EAAqC,CAArC,CAAd,SAAJ;AACH,SAFD,MAGK;AACDN,cAAI,GAAG,6BAAP;AACH;AACJ;;AACDgB,YAAM,CAAC1B,GAAP,kCAAqCL,OAAO,CAACuB,MAA7C,SAAyDR,IAAzD;AACH,KAXD,MAYK;AACD8qC,mBAAa,CAAC,sBAAD,EAAyB7rC,OAAzB,CAAb;AACH;AACJ;;AACD,WAASwrC,qBAAT,CAA+BxrC,OAA/B,EAAwCurC,eAAxC,EAAyD;AACrD,QAAIzpC,MAAK,KAAKsjB,KAAK,CAAC4C,GAAhB,IAAuB,CAACjmB,MAA5B,EAAoC;AAChC;AACH;;AACD,QAAIG,WAAW,KAAKC,WAAW,CAACC,IAAhC,EAAsC;AAClC,UAAIrB,IAAI,GAAG0B,SAAX;;AACA,UAAIX,MAAK,KAAKsjB,KAAK,CAAC0hB,OAApB,EAA6B;AACzB,YAAI9mC,OAAO,CAACE,KAAR,IAAiBF,OAAO,CAACE,KAAR,CAAca,IAAnC,EAAyC;AACrCA,cAAI,yBAAkBuiB,IAAI,CAACC,SAAL,CAAevjB,OAAO,CAACE,KAAR,CAAca,IAA7B,EAAmC,IAAnC,EAAyC,CAAzC,CAAlB,SAAJ;AACH,SAFD,MAGK;AACD,cAAIf,OAAO,CAACiB,MAAZ,EAAoB;AAChBF,gBAAI,qBAAcuiB,IAAI,CAACC,SAAL,CAAevjB,OAAO,CAACiB,MAAvB,EAA+B,IAA/B,EAAqC,CAArC,CAAd,SAAJ;AACH,WAFD,MAGK,IAAIjB,OAAO,CAACE,KAAR,KAAkB,KAAK,CAA3B,EAA8B;AAC/Ba,gBAAI,GAAG,yBAAP;AACH;AACJ;AACJ;;AACD,UAAIwqC,eAAJ,EAAqB;AACjB,YAAIrrC,KAAK,GAAGF,OAAO,CAACE,KAAR,8BAAoCF,OAAO,CAACE,KAAR,CAAcF,OAAlD,eAA8DA,OAAO,CAACE,KAAR,CAAcwiB,IAA5E,UAAuF,EAAnG;AACA3gB,cAAM,CAAC1B,GAAP,8BAAiCkrC,eAAe,CAAChqC,MAAjD,iBAA8DvB,OAAO,CAACoJ,EAAtE,mBAAiFxE,IAAI,CAACC,GAAL,KAAa0mC,eAAe,CAACQ,UAA9G,gBAA8H7rC,KAA9H,GAAuIa,IAAvI;AACH,OAHD,MAIK;AACDgB,cAAM,CAAC1B,GAAP,6BAAgCL,OAAO,CAACoJ,EAAxC,wCAA+ErI,IAA/E;AACH;AACJ,KAtBD,MAuBK;AACD8qC,mBAAa,CAAC,kBAAD,EAAqB7rC,OAArB,CAAb;AACH;AACJ;;AACD,WAAS6rC,aAAT,CAAuBzqC,IAAvB,EAA6BpB,OAA7B,EAAsC;AAClC,QAAI,CAAC+B,MAAD,IAAWD,MAAK,KAAKsjB,KAAK,CAAC4C,GAA/B,EAAoC;AAChC;AACH;;AACD,QAAMgkB,UAAU,GAAG;AACf5oB,kBAAY,EAAE,IADC;AAEfhiB,UAAI,EAAJA,IAFe;AAGfpB,aAAO,EAAPA,OAHe;AAIfisC,eAAS,EAAErnC,IAAI,CAACC,GAAL;AAJI,KAAnB;AAMA9C,UAAM,CAAC1B,GAAP,CAAW2rC,UAAX;AACH;;AACD,WAASE,uBAAT,GAAmC;AAC/B,QAAI/C,QAAQ,EAAZ,EAAgB;AACZ,YAAM,IAAInC,eAAJ,CAAoBD,gBAAgB,CAACqC,MAArC,EAA6C,uBAA7C,CAAN;AACH;;AACD,QAAIC,UAAU,EAAd,EAAkB;AACd,YAAM,IAAIrC,eAAJ,CAAoBD,gBAAgB,CAACuC,QAArC,EAA+C,yBAA/C,CAAN;AACH;AACJ;;AACD,WAAS6C,gBAAT,GAA4B;AACxB,QAAIlD,WAAW,EAAf,EAAmB;AACf,YAAM,IAAIjC,eAAJ,CAAoBD,gBAAgB,CAACqF,gBAArC,EAAuD,iCAAvD,CAAN;AACH;AACJ;;AACD,WAASC,mBAAT,GAA+B;AAC3B,QAAI,CAACpD,WAAW,EAAhB,EAAoB;AAChB,YAAM,IAAIv4B,KAAJ,CAAU,sBAAV,CAAN;AACH;AACJ;;AACD,WAAS47B,eAAT,CAAyBC,KAAzB,EAAgC;AAC5B,QAAIA,KAAK,KAAK,KAAK,CAAnB,EAAsB;AAClB,aAAO,IAAP;AACH,KAFD,MAGK;AACD,aAAOA,KAAP;AACH;AACJ;;AACD,WAASC,oBAAT,CAA8BprC,IAA9B,EAAoCC,MAApC,EAA4C;AACxC,QAAIJ,MAAJ;AACA,QAAIiqC,cAAc,GAAG9pC,IAAI,CAAC8pC,cAA1B;;AACA,YAAQA,cAAR;AACI,WAAK,CAAL;AACIjqC,cAAM,GAAG,IAAT;AACA;;AACJ,WAAK,CAAL;AACIA,cAAM,GAAGqrC,eAAe,CAACjrC,MAAM,CAAC,CAAD,CAAP,CAAxB;AACA;;AACJ;AACIJ,cAAM,GAAG,EAAT;;AACA,aAAK,IAAI0c,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGtc,MAAM,CAACyD,MAAX,IAAqB6Y,CAAC,GAAGutB,cAAzC,EAAyDvtB,CAAC,EAA1D,EAA8D;AAC1D1c,gBAAM,CAAC0D,IAAP,CAAY2nC,eAAe,CAACjrC,MAAM,CAACsc,CAAD,CAAP,CAA3B;AACH;;AACD,YAAItc,MAAM,CAACyD,MAAP,GAAgBomC,cAApB,EAAoC;AAChC,eAAK,IAAIvtB,EAAC,GAAGtc,MAAM,CAACyD,MAApB,EAA4B6Y,EAAC,GAAGutB,cAAhC,EAAgDvtB,EAAC,EAAjD,EAAqD;AACjD1c,kBAAM,CAAC0D,IAAP,CAAY,IAAZ;AACH;AACJ;;AACD;AAjBR;;AAmBA,WAAO1D,MAAP;AACH;;AACD,MAAIL,UAAU,GAAG;AACbc,oBAAgB,EAAE,0BAACN,IAAD,EAAqB;AACnC8qC,6BAAuB;AACvB,UAAI3qC,MAAJ;AACA,UAAIkrC,aAAJ;;AAHmC,wCAAXprC,MAAW;AAAXA,cAAW;AAAA;;AAInC,UAAI1B,EAAE,CAAC2B,MAAH,CAAUF,IAAV,CAAJ,EAAqB;AACjBG,cAAM,GAAGH,IAAT;;AACA,gBAAQC,MAAM,CAACyD,MAAf;AACI,eAAK,CAAL;AACI2nC,yBAAa,GAAG,IAAhB;AACA;;AACJ,eAAK,CAAL;AACIA,yBAAa,GAAGprC,MAAM,CAAC,CAAD,CAAtB;AACA;;AACJ;AACIorC,yBAAa,GAAGprC,MAAhB;AACA;AATR;AAWH,OAbD,MAcK;AACDE,cAAM,GAAGH,IAAI,CAACG,MAAd;AACAkrC,qBAAa,GAAGD,oBAAoB,CAACprC,IAAD,EAAOC,MAAP,CAApC;AACH;;AACD,UAAIqrC,mBAAmB,GAAG;AACtBjC,eAAO,EAAE1gB,OADa;AAEtBxoB,cAAM,EAAEA,MAFc;AAGtBF,cAAM,EAAEorC;AAHc,OAA1B;AAKAX,8BAAwB,CAACY,mBAAD,CAAxB;AACAnF,mBAAa,CAAC6C,KAAd,CAAoBsC,mBAApB;AACH,KA9BY;AA+Bb/qC,kBAAc,EAAE,wBAACP,IAAD,EAAOK,OAAP,EAAmB;AAC/ByqC,6BAAuB;;AACvB,UAAIvsC,EAAE,CAACuI,IAAH,CAAQ9G,IAAR,CAAJ,EAAmB;AACfymC,+BAAuB,GAAGzmC,IAA1B;AACH,OAFD,MAGK,IAAIK,OAAJ,EAAa;AACd,YAAI9B,EAAE,CAAC2B,MAAH,CAAUF,IAAV,CAAJ,EAAqB;AACjB0mC,8BAAoB,CAAC1mC,IAAD,CAApB,GAA6B;AAAEA,gBAAI,EAAEqB,SAAR;AAAmBhB,mBAAO,EAAPA;AAAnB,WAA7B;AACH,SAFD,MAGK;AACDqmC,8BAAoB,CAAC1mC,IAAI,CAACG,MAAN,CAApB,GAAoC;AAAEH,gBAAI,EAAJA,IAAF;AAAQK,mBAAO,EAAPA;AAAR,WAApC;AACH;AACJ;AACJ,KA5CY;AA6CbG,cAAU,EAAE,oBAAC6G,KAAD,EAAQiK,KAAR,EAAejR,OAAf,EAA2B;AACnC,UAAIsmC,gBAAgB,CAAC38B,GAAjB,CAAqBsH,KAArB,CAAJ,EAAiC;AAC7B,cAAM,IAAIhC,KAAJ,sCAAwCgC,KAAxC,yBAAN;AACH;;AACDq1B,sBAAgB,CAAC5+B,GAAjB,CAAqBuJ,KAArB,EAA4BjR,OAA5B;AACA,aAAO;AACHuC,eAAO,EAAE,mBAAM;AACX+jC,0BAAgB,UAAhB,CAAwBr1B,KAAxB;AACH;AAHE,OAAP;AAKH,KAvDY;AAwDb7Q,gBAAY,EAAE,sBAAC4G,KAAD,EAAQiK,KAAR,EAAerT,KAAf,EAAyB;AACnCuB,gBAAU,CAACc,gBAAX,CAA4BglC,oBAAoB,CAACtlC,IAAjD,EAAuD;AAAEsR,aAAK,EAALA,KAAF;AAASrT,aAAK,EAALA;AAAT,OAAvD;AACH,KA1DY;AA2DbstC,uBAAmB,EAAEnE,wBAAwB,CAACr8B,KA3DjC;AA4DbhL,eAAW,EAAE,qBAACC,IAAD,EAAqB;AAC9B8qC,6BAAuB;AACvBG,yBAAmB;AACnB,UAAI9qC,MAAJ;AACA,UAAIkrC,aAAJ;AACA,UAAI/5B,KAAK,GAAGjQ,SAAZ;;AAL8B,yCAAXpB,MAAW;AAAXA,cAAW;AAAA;;AAM9B,UAAI1B,EAAE,CAAC2B,MAAH,CAAUF,IAAV,CAAJ,EAAqB;AACjBG,cAAM,GAAGH,IAAT;;AACA,gBAAQC,MAAM,CAACyD,MAAf;AACI,eAAK,CAAL;AACI2nC,yBAAa,GAAG,IAAhB;AACA;;AACJ,eAAK,CAAL;AACI;AACA,gBAAIlG,cAAc,CAACjI,iBAAf,CAAiCt2B,EAAjC,CAAoC3G,MAAM,CAAC,CAAD,CAA1C,CAAJ,EAAoD;AAChDorC,2BAAa,GAAG,IAAhB;AACA/5B,mBAAK,GAAGrR,MAAM,CAAC,CAAD,CAAd;AACH,aAHD,MAIK;AACDorC,2BAAa,GAAGH,eAAe,CAACjrC,MAAM,CAAC,CAAD,CAAP,CAA/B;AACH;;AACD;;AACJ;AACI,gBAAMurC,IAAI,GAAGvrC,MAAM,CAACyD,MAAP,GAAgB,CAA7B;;AACA,gBAAIyhC,cAAc,CAACjI,iBAAf,CAAiCt2B,EAAjC,CAAoC3G,MAAM,CAACurC,IAAD,CAA1C,CAAJ,EAAuD;AACnDl6B,mBAAK,GAAGrR,MAAM,CAACurC,IAAD,CAAd;;AACA,kBAAIvrC,MAAM,CAACyD,MAAP,KAAkB,CAAtB,EAAyB;AACrB2nC,6BAAa,GAAGH,eAAe,CAACjrC,MAAM,CAAC,CAAD,CAAP,CAA/B;AACH,eAFD,MAGK;AACDorC,6BAAa,GAAGprC,MAAM,CAACstB,KAAP,CAAa,CAAb,EAAgBie,IAAhB,EAAsBthB,GAAtB,CAA0B,UAAAjsB,KAAK;AAAA,yBAAIitC,eAAe,CAACjtC,KAAD,CAAnB;AAAA,iBAA/B,CAAhB;AACH;AACJ,aARD,MASK;AACDotC,2BAAa,GAAGprC,MAAM,CAACiqB,GAAP,CAAW,UAAAjsB,KAAK;AAAA,uBAAIitC,eAAe,CAACjtC,KAAD,CAAnB;AAAA,eAAhB,CAAhB;AACH;;AACD;AA5BR;AA8BH,OAhCD,MAiCK;AACDkC,cAAM,GAAGH,IAAI,CAACG,MAAd;AACAkrC,qBAAa,GAAGD,oBAAoB,CAACprC,IAAD,EAAOC,MAAP,CAApC;AACA,YAAI6pC,cAAc,GAAG9pC,IAAI,CAAC8pC,cAA1B;AACAx4B,aAAK,GAAG6zB,cAAc,CAACjI,iBAAf,CAAiCt2B,EAAjC,CAAoC3G,MAAM,CAAC6pC,cAAD,CAA1C,IAA8D7pC,MAAM,CAAC6pC,cAAD,CAApE,GAAuFzoC,SAA/F;AACH;;AACD,UAAI2G,EAAE,GAAGo+B,cAAc,EAAvB;AACA,UAAIvmC,MAAM,GAAG,IAAI6R,OAAJ,CAAY,UAACC,OAAD,EAAU0I,MAAV,EAAqB;AAC1C,YAAI4uB,cAAc,GAAG;AACjBI,iBAAO,EAAE1gB,OADQ;AAEjB3gB,YAAE,EAAEA,EAFa;AAGjB7H,gBAAM,EAAEA,MAHS;AAIjBF,gBAAM,EAAEorC;AAJS,SAArB;AAMA,YAAIlB,eAAe,GAAG;AAAEhqC,gBAAM,EAAEA,MAAV;AAAkBwqC,oBAAU,EAAEnnC,IAAI,CAACC,GAAL,EAA9B;AAA0CkO,iBAAO,EAAPA,OAA1C;AAAmD0I,gBAAM,EAANA;AAAnD,SAAtB;AACAmwB,2BAAmB,CAACvB,cAAD,CAAnB;;AACA,YAAI;AACA9C,uBAAa,CAAC6C,KAAd,CAAoBC,cAApB;AACH,SAFD,CAGA,OAAOlW,CAAP,EAAU;AACN;AACAoX,yBAAe,CAAC9vB,MAAhB,CAAuB,IAAIilB,UAAU,CAACle,aAAf,CAA6Bke,UAAU,CAACzW,UAAX,CAAsB4iB,iBAAnD,EAAsE1Y,CAAC,CAACn0B,OAAF,GAAYm0B,CAAC,CAACn0B,OAAd,GAAwB,gBAA9F,CAAvB;AACAurC,yBAAe,GAAG,IAAlB;AACH;;AACD,YAAIA,eAAJ,EAAqB;AACjBrD,0BAAgB,CAAC1hC,MAAM,CAAC4C,EAAD,CAAP,CAAhB,GAA+BmiC,eAA/B;AACH;AACJ,OApBY,CAAb;;AAqBA,UAAI74B,KAAJ,EAAW;AACPA,aAAK,CAAC+iB,uBAAN,CAA8B,YAAM;AAChC70B,oBAAU,CAACc,gBAAX,CAA4B+kC,kBAAkB,CAACrlC,IAA/C,EAAqD;AAAEgI,cAAE,EAAFA;AAAF,WAArD;AACH,SAFD;AAGH;;AACD,aAAOnI,MAAP;AACH,KArIY;AAsIbO,aAAS,EAAE,mBAACJ,IAAD,EAAOK,OAAP,EAAmB;AAC1ByqC,6BAAuB;;AACvB,UAAIvsC,EAAE,CAACuI,IAAH,CAAQ9G,IAAR,CAAJ,EAAmB;AACfumC,0BAAkB,GAAGvmC,IAArB;AACH,OAFD,MAGK,IAAIK,OAAJ,EAAa;AACd,YAAI9B,EAAE,CAAC2B,MAAH,CAAUF,IAAV,CAAJ,EAAqB;AACjBwmC,yBAAe,CAACxmC,IAAD,CAAf,GAAwB;AAAEA,gBAAI,EAAEqB,SAAR;AAAmBhB,mBAAO,EAAPA;AAAnB,WAAxB;AACH,SAFD,MAGK;AACDmmC,yBAAe,CAACxmC,IAAI,CAACG,MAAN,CAAf,GAA+B;AAAEH,gBAAI,EAAJA,IAAF;AAAQK,mBAAO,EAAPA;AAAR,WAA/B;AACH;AACJ;AACJ,KAnJY;AAoJbK,SAAK,EAAE,eAAC86B,MAAD,EAASnb,OAAT,EAAkBzf,8BAAlB,EAAqD;AACxD,UAAI8qC,iBAAiB,GAAG,KAAxB;AACA,UAAIvtB,YAAY,GAAGpd,WAAW,CAACC,IAA/B;;AACA,UAAIJ,8BAA8B,KAAK,KAAK,CAA5C,EAA+C;AAC3C,YAAIrC,EAAE,WAAF,CAAWqC,8BAAX,CAAJ,EAAgD;AAC5C8qC,2BAAiB,GAAG9qC,8BAApB;AACH,SAFD,MAGK;AACD8qC,2BAAiB,GAAG9qC,8BAA8B,CAACN,gBAA/B,IAAmD,KAAvE;AACA6d,sBAAY,GAAGvd,8BAA8B,CAACE,WAA/B,IAA8CC,WAAW,CAACC,IAAzE;AACH;AACJ;;AACDN,YAAK,GAAG86B,MAAR;AACA16B,iBAAW,GAAGqd,YAAd;;AACA,UAAIzd,MAAK,KAAKsjB,KAAK,CAAC4C,GAApB,EAAyB;AACrBjmB,cAAM,GAAGU,SAAT;AACH,OAFD,MAGK;AACDV,cAAM,GAAG0f,OAAT;AACH;;AACD,UAAIqrB,iBAAiB,IAAI,CAAC3D,QAAQ,EAA9B,IAAoC,CAACE,UAAU,EAAnD,EAAuD;AACnDzoC,kBAAU,CAACc,gBAAX,CAA4B88B,oBAAoB,CAACp9B,IAAjD,EAAuD;AAAE/B,eAAK,EAAE+lB,KAAK,CAACja,QAAN,CAAeyxB,MAAf;AAAT,SAAvD;AACH;AACJ,KA3KY;AA4Kb97B,WAAO,EAAEunC,YAAY,CAACl8B,KA5KT;AA6KbnL,WAAO,EAAEsnC,YAAY,CAACn8B,KA7KT;AA8Kb4gC,2BAAuB,EAAExE,4BAA4B,CAACp8B,KA9KzC;AA+Kb6gC,aAAS,EAAEvE,cAAc,CAACt8B,KA/Kb;AAgLbnI,WAAO,EAAE,mBAAM;AACX,UAAIqlC,UAAU,EAAd,EAAkB;AACd;AACH;;AACD/oB,WAAK,GAAG8mB,eAAe,CAACkC,QAAxB;AACAb,oBAAc,CAACvkB,IAAf,CAAoBzhB,SAApB;AACA,UAAIvC,KAAK,GAAG,IAAIwQ,KAAJ,CAAU,0BAAV,CAAZ;AACAvR,YAAM,CAACoe,IAAP,CAAY2qB,gBAAZ,EAA8Bj9B,OAA9B,CAAsC,UAACnD,GAAD,EAAS;AAC3CogC,wBAAgB,CAACpgC,GAAD,CAAhB,CAAsB2T,MAAtB,CAA6Bvb,KAA7B;AACH,OAFD;AAGAgoC,sBAAgB,GAAG/oC,MAAM,CAAC0e,MAAP,CAAc,IAAd,CAAnB;AACAsqB,mBAAa,GAAGhpC,MAAM,CAAC0e,MAAP,CAAc,IAAd,CAAhB;AACAoqB,kBAAY,GAAG,IAAIzB,WAAW,CAAClC,SAAhB,EAAf,CAZW,CAaX;;AACA,UAAI3kC,EAAE,CAACuI,IAAH,CAAQq/B,aAAa,CAACvjC,OAAtB,CAAJ,EAAoC;AAChCujC,qBAAa,CAACvjC,OAAd;AACH;;AACD,UAAIrE,EAAE,CAACuI,IAAH,CAAQo/B,aAAa,CAACtjC,OAAtB,CAAJ,EAAoC;AAChCsjC,qBAAa,CAACtjC,OAAd;AACH;AACJ,KApMY;AAqMb9C,UAAM,EAAE,kBAAM;AACVgrC,6BAAuB;AACvBC,sBAAgB;AAChB7rB,WAAK,GAAG8mB,eAAe,CAAC8B,SAAxB;AACA5B,mBAAa,CAACpmC,MAAd,CAAqBgI,QAArB;AACH,KA1MY;AA2Mb+jC,WAAO,EAAE,mBAAM;AACX;AACAhtC,aAAO,CAACI,GAAR,CAAY,SAAZ;AACH;AA9MY,GAAjB;AAgNAO,YAAU,CAACe,cAAX,CAA0B88B,oBAAoB,CAACr9B,IAA/C,EAAqD,UAACC,MAAD,EAAY;AAC7D,QAAIS,MAAK,KAAKsjB,KAAK,CAAC4C,GAAhB,IAAuB,CAACjmB,MAA5B,EAAoC;AAChC;AACH;;AACDA,UAAM,CAAC1B,GAAP,CAAWgB,MAAM,CAACrB,OAAlB,EAA2B8B,MAAK,KAAKsjB,KAAK,CAAC0hB,OAAhB,GAA0BzlC,MAAM,CAAC6rC,OAAjC,GAA2CzqC,SAAtE;AACH,GALD;AAMA7B,YAAU,CAACe,cAAX,CAA0B+kC,oBAAoB,CAACtlC,IAA/C,EAAqD,UAACC,MAAD,EAAY;AAC7D,QAAMI,OAAO,GAAGsmC,gBAAgB,CAACt8B,GAAjB,CAAqBpK,MAAM,CAACqR,KAA5B,CAAhB;;AACA,QAAIjR,OAAJ,EAAa;AACTA,aAAO,CAACJ,MAAM,CAAChC,KAAR,CAAP;AACH,KAFD,MAGK;AACDmpC,8BAAwB,CAACtkB,IAAzB,CAA8B7iB,MAA9B;AACH;AACJ,GARD;AASA,SAAOT,UAAP;AACH;;AACD,SAASusC,eAAT,CAAyB9tC,KAAzB,EAAgC;AAC5B,SAAOA,KAAK,CAAC6B,MAAN,KAAiB,KAAK,CAAtB,IAA2B7B,KAAK,CAAC+tC,IAAN,KAAe,KAAK,CAAtD;AACH;;AACD,SAASC,eAAT,CAAyBhuC,KAAzB,EAAgC;AAC5B,SAAOA,KAAK,CAAC+qC,KAAN,KAAgB,KAAK,CAArB,IAA0B/qC,KAAK,CAACosB,GAAN,KAAc,KAAK,CAApD;AACH;;AACD,SAAS4U,uBAAT,CAAiC9/B,KAAjC,EAAwCC,MAAxC,EAAgDG,MAAhD,EAAwDy/B,QAAxD,EAAkE;AAC9D,MAAI,CAACz/B,MAAL,EAAa;AACTA,UAAM,GAAG1B,OAAO,CAAC0nC,UAAjB;AACH;;AACD,MAAI5nB,MAAM,GAAGouB,eAAe,CAAC5sC,KAAD,CAAf,GAAyBA,KAAzB,GAAiC,IAAI4lC,eAAe,CAACpH,mBAApB,CAAwCx+B,KAAxC,CAA9C;AACA,MAAI0e,MAAM,GAAGouB,eAAe,CAAC7sC,MAAD,CAAf,GAA0BA,MAA1B,GAAmC,IAAI6lC,eAAe,CAACrH,mBAApB,CAAwCx+B,MAAxC,CAAhD;AACA,SAAO6mC,wBAAwB,CAACtoB,MAAD,EAASE,MAAT,EAAiBte,MAAjB,EAAyBy/B,QAAzB,CAA/B;AACH;;AACDnhC,OAAO,CAACohC,uBAAR,GAAkCA,uBAAlC,C;;;;;;;;;;;;;ACh8BA;;;;AAIa;;;;;;;;;;;;;;;;AACblhC,MAAM,CAACC,cAAP,CAAsBH,OAAtB,EAA+B,YAA/B,EAA6C;AAAEI,OAAK,EAAE;AAAT,CAA7C;;AACA,IAAMijC,QAAQ,GAAG/iC,mBAAO,CAAC,0GAAD,CAAxB;;AACA,IAAMI,EAAE,GAAGJ,mBAAO,CAAC,kGAAD,CAAlB;;AACA,IAAI+tC,WAAW,GAAG,IAAlB;AACA,IAAIC,EAAE,GAAGC,MAAM,CAACC,IAAP,CAAY,IAAZ,EAAkB,OAAlB,EAA2B,CAA3B,CAAT;AACA,IAAIC,EAAE,GAAGF,MAAM,CAACC,IAAP,CAAY,IAAZ,EAAkB,OAAlB,EAA2B,CAA3B,CAAT;AACA,IAAIE,IAAI,GAAG,MAAX;;IACMC,a;AACF,2BAA+B;AAAA,QAAnBC,QAAmB,uEAAR,MAAQ;;AAAA;;AAC3B,SAAKA,QAAL,GAAgBA,QAAhB;AACA,SAAK9vB,KAAL,GAAa,CAAb;AACA,SAAK+vB,MAAL,GAAcN,MAAM,CAACO,WAAP,CAAmBT,WAAnB,CAAd;AACH;;;;2BACMU,K,EAAO;AACV,UAAIC,QAAQ,GAAGD,KAAf;;AACA,UAAI,OAAQA,KAAR,KAAmB,QAAvB,EAAiC;AAC7B,YAAIE,GAAG,GAAGF,KAAV;AACA,YAAIG,SAAS,GAAGX,MAAM,CAACY,UAAP,CAAkBF,GAAlB,EAAuB,KAAKL,QAA5B,CAAhB;AACAI,gBAAQ,GAAGT,MAAM,CAACO,WAAP,CAAmBI,SAAnB,CAAX;AACAF,gBAAQ,CAAC7D,KAAT,CAAe8D,GAAf,EAAoB,CAApB,EAAuBC,SAAvB,EAAkC,KAAKN,QAAvC;AACH;;AACD,UAAI,KAAKC,MAAL,CAAYhpC,MAAZ,GAAqB,KAAKiZ,KAA1B,IAAmCkwB,QAAQ,CAACnpC,MAAhD,EAAwD;AACpDmpC,gBAAQ,CAACI,IAAT,CAAc,KAAKP,MAAnB,EAA2B,KAAK/vB,KAAhC,EAAuC,CAAvC,EAA0CkwB,QAAQ,CAACnpC,MAAnD;AACH,OAFD,MAGK;AACD,YAAIwpC,OAAO,GAAG,CAAC3Y,IAAI,CAAC4Y,IAAL,CAAU,CAAC,KAAKxwB,KAAL,GAAakwB,QAAQ,CAACnpC,MAAvB,IAAiCwoC,WAA3C,IAA0D,CAA3D,IAAgEA,WAA9E;;AACA,YAAI,KAAKvvB,KAAL,KAAe,CAAnB,EAAsB;AAClB,eAAK+vB,MAAL,GAAcN,MAAM,CAACO,WAAP,CAAmBO,OAAnB,CAAd;AACAL,kBAAQ,CAACI,IAAT,CAAc,KAAKP,MAAnB,EAA2B,CAA3B,EAA8B,CAA9B,EAAiCG,QAAQ,CAACnpC,MAA1C;AACH,SAHD,MAIK;AACD,eAAKgpC,MAAL,GAAcN,MAAM,CAACgB,MAAP,CAAc,CAAC,KAAKV,MAAL,CAAYnf,KAAZ,CAAkB,CAAlB,EAAqB,KAAK5Q,KAA1B,CAAD,EAAmCkwB,QAAnC,CAAd,EAA4DK,OAA5D,CAAd;AACH;AACJ;;AACD,WAAKvwB,KAAL,IAAckwB,QAAQ,CAACnpC,MAAvB;AACH;;;qCACgB;AACb,UAAI7D,MAAM,GAAGwB,SAAb;AACA,UAAIib,OAAO,GAAG,CAAd;;AACA,aAAOA,OAAO,GAAG,CAAV,GAAc,KAAKK,KAAnB,KAA6B,KAAK+vB,MAAL,CAAYpwB,OAAZ,MAAyB6vB,EAAzB,IAA+B,KAAKO,MAAL,CAAYpwB,OAAO,GAAG,CAAtB,MAA6BgwB,EAA5D,IAAkE,KAAKI,MAAL,CAAYpwB,OAAO,GAAG,CAAtB,MAA6B6vB,EAA/F,IAAqG,KAAKO,MAAL,CAAYpwB,OAAO,GAAG,CAAtB,MAA6BgwB,EAA/J,CAAP,EAA2K;AACvKhwB,eAAO;AACV,OALY,CAMb;;;AACA,UAAIA,OAAO,GAAG,CAAV,IAAe,KAAKK,KAAxB,EAA+B;AAC3B,eAAO9c,MAAP;AACH;;AACDA,YAAM,GAAG9B,MAAM,CAAC0e,MAAP,CAAc,IAAd,CAAT;AACA,UAAI4wB,OAAO,GAAG,KAAKX,MAAL,CAAY3iC,QAAZ,CAAqB,OAArB,EAA8B,CAA9B,EAAiCuS,OAAjC,EAA0CS,KAA1C,CAAgDwvB,IAAhD,CAAd;AACAc,aAAO,CAACxjC,OAAR,CAAgB,UAACyjC,MAAD,EAAY;AACxB,YAAI3wB,KAAK,GAAG2wB,MAAM,CAAC1wB,OAAP,CAAe,GAAf,CAAZ;;AACA,YAAID,KAAK,KAAK,CAAC,CAAf,EAAkB;AACd,gBAAM,IAAIrN,KAAJ,CAAU,oDAAV,CAAN;AACH;;AACD,YAAI5I,GAAG,GAAG4mC,MAAM,CAACxwB,MAAP,CAAc,CAAd,EAAiBH,KAAjB,CAAV;AACA,YAAI1e,KAAK,GAAGqvC,MAAM,CAACxwB,MAAP,CAAcH,KAAK,GAAG,CAAtB,EAAyB4wB,IAAzB,EAAZ;AACA1tC,cAAM,CAAC6G,GAAD,CAAN,GAAczI,KAAd;AACH,OARD;AASA,UAAIuvC,SAAS,GAAGlxB,OAAO,GAAG,CAA1B;AACA,WAAKowB,MAAL,GAAc,KAAKA,MAAL,CAAYnf,KAAZ,CAAkBigB,SAAlB,CAAd;AACA,WAAK7wB,KAAL,GAAa,KAAKA,KAAL,GAAa6wB,SAA1B;AACA,aAAO3tC,MAAP;AACH;;;mCACc6D,M,EAAQ;AACnB,UAAI,KAAKiZ,KAAL,GAAajZ,MAAjB,EAAyB;AACrB,eAAO,IAAP;AACH;;AACD,UAAI7D,MAAM,GAAG,KAAK6sC,MAAL,CAAY3iC,QAAZ,CAAqB,KAAK0iC,QAA1B,EAAoC,CAApC,EAAuC/oC,MAAvC,CAAb;AACA,UAAI8pC,SAAS,GAAG9pC,MAAhB;AACA,WAAKgpC,MAAL,CAAYO,IAAZ,CAAiB,KAAKP,MAAtB,EAA8B,CAA9B,EAAiCc,SAAjC;AACA,WAAK7wB,KAAL,GAAa,KAAKA,KAAL,GAAa6wB,SAA1B;AACA,aAAO3tC,MAAP;AACH;;;wBACmB;AAChB,aAAO,KAAK8c,KAAZ;AACH;;;;;;AAEL,IAAIe,aAAJ;;AACA,CAAC,UAAUA,aAAV,EAAyB;AACtB,WAAS9W,EAAT,CAAY3I,KAAZ,EAAmB;AACf,QAAI4I,SAAS,GAAG5I,KAAhB;AACA,WAAO4I,SAAS,IAAItI,EAAE,CAACuI,IAAH,CAAQD,SAAS,CAAC/G,MAAlB,CAAb,IAA0CvB,EAAE,CAACuI,IAAH,CAAQD,SAAS,CAACjE,OAAlB,CAA1C,IACHrE,EAAE,CAACuI,IAAH,CAAQD,SAAS,CAACnH,OAAlB,CADG,IAC2BnB,EAAE,CAACuI,IAAH,CAAQD,SAAS,CAACjH,OAAlB,CAD3B,IACyDrB,EAAE,CAACuI,IAAH,CAAQD,SAAS,CAAC4mC,gBAAlB,CADhE;AAEH;;AACD/vB,eAAa,CAAC9W,EAAd,GAAmBA,EAAnB;AACH,CAPD,EAOG8W,aAAa,GAAG7f,OAAO,CAAC6f,aAAR,KAA0B7f,OAAO,CAAC6f,aAAR,GAAwB,EAAlD,CAPnB;;IAQMgwB,qB;AACF,mCAAc;AAAA;;AACV,SAAKzG,YAAL,GAAoB,IAAI/F,QAAQ,CAAC/gB,OAAb,EAApB;AACA,SAAK+mB,YAAL,GAAoB,IAAIhG,QAAQ,CAAC/gB,OAAb,EAApB;AACA,SAAKwtB,qBAAL,GAA6B,IAAIzM,QAAQ,CAAC/gB,OAAb,EAA7B;AACH;;;;8BACS;AACN,WAAK8mB,YAAL,CAAkBrkC,OAAlB;AACA,WAAKskC,YAAL,CAAkBtkC,OAAlB;AACH;;;8BAIS9D,K,EAAO;AACb,WAAKmoC,YAAL,CAAkBnkB,IAAlB,CAAuB,KAAK8qB,OAAL,CAAa9uC,KAAb,CAAvB;AACH;;;gCAIW;AACR,WAAKooC,YAAL,CAAkBpkB,IAAlB,CAAuBzhB,SAAvB;AACH;;;uCAIkBrC,I,EAAM;AACrB,WAAK2uC,qBAAL,CAA2B7qB,IAA3B,CAAgC9jB,IAAhC;AACH;;;4BACOF,K,EAAO;AACX,UAAIA,KAAK,YAAYwQ,KAArB,EAA4B;AACxB,eAAOxQ,KAAP;AACH,OAFD,MAGK;AACD,eAAO,IAAIwQ,KAAJ,0CAA4C/Q,EAAE,CAAC2B,MAAH,CAAUpB,KAAK,CAACF,OAAhB,IAA2BE,KAAK,CAACF,OAAjC,GAA2C,SAAvF,EAAP;AACH;AACJ;;;wBAzBa;AACV,aAAO,KAAKqoC,YAAL,CAAkBl8B,KAAzB;AACH;;;wBAIa;AACV,aAAO,KAAKm8B,YAAL,CAAkBn8B,KAAzB;AACH;;;wBAIsB;AACnB,aAAO,KAAK4iC,qBAAL,CAA2B5iC,KAAlC;AACH;;;;;;AAaLlN,OAAO,CAAC6vC,qBAAR,GAAgCA,qBAAhC;;IACM/P,mB;;;;;AACF,+BAAYkQ,QAAZ,EAAyC;AAAA;;AAAA,QAAnBpB,QAAmB,uEAAR,MAAQ;;AAAA;;AACrC;AACA,UAAKoB,QAAL,GAAgBA,QAAhB;AACA,UAAKnB,MAAL,GAAc,IAAIF,aAAJ,CAAkBC,QAAlB,CAAd;AACA,UAAKqB,sBAAL,GAA8B,KAA9B;AAJqC;AAKxC;;;;2BAOMhmC,Q,EAAU;AAAA;;AACb,WAAKimC,iBAAL,GAAyB,CAAC,CAA1B;AACA,WAAKC,YAAL,GAAoB,CAApB;AACA,WAAKC,mBAAL,GAA2B5sC,SAA3B;AACA,WAAKyG,QAAL,GAAgBA,QAAhB;AACA,WAAK+lC,QAAL,CAAcK,EAAd,CAAiB,MAAjB,EAAyB,UAACvuC,IAAD,EAAU;AAC/B,cAAI,CAACwuC,MAAL,CAAYxuC,IAAZ;AACH,OAFD;AAGA,WAAKkuC,QAAL,CAAcK,EAAd,CAAiB,OAAjB,EAA0B,UAACpvC,KAAD;AAAA,eAAW,MAAI,CAACsvC,SAAL,CAAetvC,KAAf,CAAX;AAAA,OAA1B;AACA,WAAK+uC,QAAL,CAAcK,EAAd,CAAiB,OAAjB,EAA0B;AAAA,eAAM,MAAI,CAACG,SAAL,EAAN;AAAA,OAA1B;AACH;;;2BACM1uC,I,EAAM;AACT,WAAK+sC,MAAL,CAAYzqB,MAAZ,CAAmBtiB,IAAnB;;AACA,aAAO,IAAP,EAAa;AACT,YAAI,KAAKouC,iBAAL,KAA2B,CAAC,CAAhC,EAAmC;AAC/B,cAAIV,OAAO,GAAG,KAAKX,MAAL,CAAY4B,cAAZ,EAAd;;AACA,cAAI,CAACjB,OAAL,EAAc;AACV;AACH;;AACD,cAAIkB,aAAa,GAAGlB,OAAO,CAAC,gBAAD,CAA3B;;AACA,cAAI,CAACkB,aAAL,EAAoB;AAChB,kBAAM,IAAIj/B,KAAJ,CAAU,gDAAV,CAAN;AACH;;AACD,cAAI5L,MAAM,GAAG8qC,QAAQ,CAACD,aAAD,CAArB;;AACA,cAAIE,KAAK,CAAC/qC,MAAD,CAAT,EAAmB;AACf,kBAAM,IAAI4L,KAAJ,CAAU,wCAAV,CAAN;AACH;;AACD,eAAKy+B,iBAAL,GAAyBrqC,MAAzB,CAb+B,CAc/B;AACA;AACH;;AACD,YAAIgrC,GAAG,GAAG,KAAKhC,MAAL,CAAYiC,cAAZ,CAA2B,KAAKZ,iBAAhC,CAAV;;AACA,YAAIW,GAAG,KAAK,IAAZ,EAAkB;AACd;AACA,eAAKE,sBAAL;AACA;AACH;;AACD,aAAKC,wBAAL;AACA,aAAKd,iBAAL,GAAyB,CAAC,CAA1B;AACA,aAAKC,YAAL;AACA,YAAIc,IAAI,GAAG5sB,IAAI,CAACgT,KAAL,CAAWwZ,GAAX,CAAX;AACA,aAAK5mC,QAAL,CAAcgnC,IAAd;AACH;AACJ;;;+CAC0B;AACvB,UAAI,KAAKb,mBAAT,EAA8B;AAC1BhT,oBAAY,CAAC,KAAKgT,mBAAN,CAAZ;AACA,aAAKA,mBAAL,GAA2B5sC,SAA3B;AACH;AACJ;;;6CACwB;AAAA;;AACrB,WAAKwtC,wBAAL;;AACA,UAAI,KAAKf,sBAAL,IAA+B,CAAnC,EAAsC;AAClC;AACH;;AACD,WAAKG,mBAAL,GAA2BjT,UAAU,CAAC,UAAC1pB,KAAD,EAAQopB,OAAR,EAAoB;AACtD,cAAI,CAACuT,mBAAL,GAA2B5sC,SAA3B;;AACA,YAAIiQ,KAAK,KAAK,MAAI,CAAC08B,YAAnB,EAAiC;AAC7B,gBAAI,CAACe,kBAAL,CAAwB;AAAEf,wBAAY,EAAE18B,KAAhB;AAAuB09B,uBAAW,EAAEtU;AAApC,WAAxB;;AACA,gBAAI,CAACkU,sBAAL;AACH;AACJ,OANoC,EAMlC,KAAKd,sBAN6B,EAML,KAAKE,YANA,EAMc,KAAKF,sBANnB,CAArC;AAOH;;;sBApEyBpT,O,EAAS;AAC/B,WAAKoT,sBAAL,GAA8BpT,OAA9B;AACH,K;wBAC2B;AACxB,aAAO,KAAKoT,sBAAZ;AACH;;;;EAZ6BJ,qB;;AA6ElC7vC,OAAO,CAAC8/B,mBAAR,GAA8BA,mBAA9B;;IACME,gB;;;;;AACF,4BAAYna,OAAZ,EAAqB;AAAA;;AAAA;;AACjB;AACA,WAAKA,OAAL,GAAeA,OAAf;AACA,QAAIurB,YAAY,GAAG,OAAKvrB,OAAxB;AACAurB,gBAAY,CAACf,EAAb,CAAgB,OAAhB,EAAyB,UAACpvC,KAAD;AAAA,aAAW,OAAKsvC,SAAL,CAAetvC,KAAf,CAAX;AAAA,KAAzB;AACAmwC,gBAAY,CAACf,EAAb,CAAgB,OAAhB,EAAyB;AAAA,aAAM,OAAKG,SAAL,EAAN;AAAA,KAAzB;AALiB;AAMpB;;;;2BACMvmC,Q,EAAU;AACb,WAAK4b,OAAL,CAAawqB,EAAb,CAAgB,SAAhB,EAA2BpmC,QAA3B;AACH;;;;EAV0B4lC,qB;;AAY/B7vC,OAAO,CAACggC,gBAAR,GAA2BA,gBAA3B;;IACMmH,mB;;;;;AACF,+BAAYkK,MAAZ,EAAwC;AAAA,QAApBzC,QAAoB,uEAAT,OAAS;;AAAA;;AAAA,8BAC9ByC,MAD8B,EACtBzC,QADsB;AAEvC;;;EAH6B9O,mB;;AAKlC9/B,OAAO,CAACmnC,mBAAR,GAA8BA,mBAA9B,C;;;;;;;;;;;;;AChOA;;;;AAIa;;;;;;;;;;;;;;;;;;AACbjnC,MAAM,CAACC,cAAP,CAAsBH,OAAtB,EAA+B,YAA/B,EAA6C;AAAEI,OAAK,EAAE;AAAT,CAA7C;;AACA,IAAMijC,QAAQ,GAAG/iC,mBAAO,CAAC,0GAAD,CAAxB;;AACA,IAAMI,EAAE,GAAGJ,mBAAO,CAAC,kGAAD,CAAlB;;AACA,IAAIgxC,aAAa,GAAG,kBAApB;AACA,IAAI5C,IAAI,GAAG,MAAX;AACA,IAAI3uB,aAAJ;;AACA,CAAC,UAAUA,aAAV,EAAyB;AACtB,WAAShX,EAAT,CAAY3I,KAAZ,EAAmB;AACf,QAAI4I,SAAS,GAAG5I,KAAhB;AACA,WAAO4I,SAAS,IAAItI,EAAE,CAACuI,IAAH,CAAQD,SAAS,CAACjE,OAAlB,CAAb,IAA2CrE,EAAE,CAACuI,IAAH,CAAQD,SAAS,CAACjH,OAAlB,CAA3C,IACHrB,EAAE,CAACuI,IAAH,CAAQD,SAAS,CAACnH,OAAlB,CADG,IAC2BnB,EAAE,CAACuI,IAAH,CAAQD,SAAS,CAACmiC,KAAlB,CADlC;AAEH;;AACDprB,eAAa,CAAChX,EAAd,GAAmBA,EAAnB;AACH,CAPD,EAOGgX,aAAa,GAAG/f,OAAO,CAAC+f,aAAR,KAA0B/f,OAAO,CAAC+f,aAAR,GAAwB,EAAlD,CAPnB;;IAQMwxB,qB;AACF,mCAAc;AAAA;;AACV,SAAKnI,YAAL,GAAoB,IAAI/F,QAAQ,CAAC/gB,OAAb,EAApB;AACA,SAAK+mB,YAAL,GAAoB,IAAIhG,QAAQ,CAAC/gB,OAAb,EAApB;AACH;;;;8BACS;AACN,WAAK8mB,YAAL,CAAkBrkC,OAAlB;AACA,WAAKskC,YAAL,CAAkBtkC,OAAlB;AACH;;;8BAIS9D,K,EAAOF,O,EAASwE,K,EAAO;AAC7B,WAAK6jC,YAAL,CAAkBnkB,IAAlB,CAAuB,CAAC,KAAK8qB,OAAL,CAAa9uC,KAAb,CAAD,EAAsBF,OAAtB,EAA+BwE,KAA/B,CAAvB;AACH;;;gCAIW;AACR,WAAK8jC,YAAL,CAAkBpkB,IAAlB,CAAuBzhB,SAAvB;AACH;;;4BACOvC,K,EAAO;AACX,UAAIA,KAAK,YAAYwQ,KAArB,EAA4B;AACxB,eAAOxQ,KAAP;AACH,OAFD,MAGK;AACD,eAAO,IAAIwQ,KAAJ,0CAA4C/Q,EAAE,CAAC2B,MAAH,CAAUpB,KAAK,CAACF,OAAhB,IAA2BE,KAAK,CAACF,OAAjC,GAA2C,SAAvF,EAAP;AACH;AACJ;;;wBAnBa;AACV,aAAO,KAAKqoC,YAAL,CAAkBl8B,KAAzB;AACH;;;wBAIa;AACV,aAAO,KAAKm8B,YAAL,CAAkBn8B,KAAzB;AACH;;;;;;AAaLlN,OAAO,CAACuxC,qBAAR,GAAgCA,qBAAhC;;IACMxR,mB;;;;;AACF,+BAAYyR,QAAZ,EAAyC;AAAA;;AAAA,QAAnB5C,QAAmB,uEAAR,MAAQ;;AAAA;;AACrC;AACA,UAAK4C,QAAL,GAAgBA,QAAhB;AACA,UAAK5C,QAAL,GAAgBA,QAAhB;AACA,UAAK6C,UAAL,GAAkB,CAAlB;;AACA,UAAKD,QAAL,CAAcnB,EAAd,CAAiB,OAAjB,EAA0B,UAACpvC,KAAD;AAAA,aAAW,MAAKsvC,SAAL,CAAetvC,KAAf,CAAX;AAAA,KAA1B;;AACA,UAAKuwC,QAAL,CAAcnB,EAAd,CAAiB,OAAjB,EAA0B;AAAA,aAAM,MAAKG,SAAL,EAAN;AAAA,KAA1B;;AANqC;AAOxC;;;;0BACKK,G,EAAK;AACP,UAAII,IAAI,GAAG5sB,IAAI,CAACC,SAAL,CAAeusB,GAAf,CAAX;AACA,UAAIH,aAAa,GAAGnC,MAAM,CAACY,UAAP,CAAkB8B,IAAlB,EAAwB,KAAKrC,QAA7B,CAApB;AACA,UAAIY,OAAO,GAAG,CACV8B,aADU,EACKZ,aAAa,CAACxkC,QAAd,EADL,EAC+BwiC,IAD/B,EAEVA,IAFU,CAAd;;AAIA,UAAI;AACA;AACA,aAAK8C,QAAL,CAAcrG,KAAd,CAAoBqE,OAAO,CAACtR,IAAR,CAAa,EAAb,CAApB,EAAsC,OAAtC,EAFA,CAGA;;AACA,aAAKsT,QAAL,CAAcrG,KAAd,CAAoB8F,IAApB,EAA0B,KAAKrC,QAA/B;AACA,aAAK6C,UAAL,GAAkB,CAAlB;AACH,OAND,CAOA,OAAOxwC,KAAP,EAAc;AACV,aAAKwwC,UAAL;AACA,aAAKlB,SAAL,CAAetvC,KAAf,EAAsB4vC,GAAtB,EAA2B,KAAKY,UAAhC;AACH;AACJ;;;;EA3B6BF,qB;;AA6BlCvxC,OAAO,CAAC+/B,mBAAR,GAA8BA,mBAA9B;;IACME,gB;;;;;AACF,4BAAYpa,OAAZ,EAAqB;AAAA;;AAAA;;AACjB;AACA,WAAKA,OAAL,GAAeA,OAAf;AACA,WAAK4rB,UAAL,GAAkB,CAAlB;AACA,WAAK5H,KAAL,GAAa,EAAb;AACA,WAAK6H,OAAL,GAAe,KAAf;AACA,QAAIN,YAAY,GAAG,OAAKvrB,OAAxB;AACAurB,gBAAY,CAACf,EAAb,CAAgB,OAAhB,EAAyB,UAACpvC,KAAD;AAAA,aAAW,OAAKsvC,SAAL,CAAetvC,KAAf,CAAX;AAAA,KAAzB;AACAmwC,gBAAY,CAACf,EAAb,CAAgB,OAAhB,EAAyB;AAAA,aAAM,OAAKG,SAAX;AAAA,KAAzB;AARiB;AASpB;;;;0BACKK,G,EAAK;AACP,UAAI,CAAC,KAAKa,OAAN,IAAiB,KAAK7H,KAAL,CAAWhkC,MAAX,KAAsB,CAA3C,EAA8C;AAC1C;AACA,aAAK8rC,cAAL,CAAoBd,GAApB;AACH,OAHD,MAIK;AACD,aAAKhH,KAAL,CAAWnkC,IAAX,CAAgBmrC,GAAhB;AACH;AACJ;;;mCACcA,G,EAAK;AAAA;;AAChB,UAAI;AACA,YAAI,KAAKhrB,OAAL,CAAa+rB,IAAjB,EAAuB;AACnB,eAAKF,OAAL,GAAe,IAAf;AACA,eAAK7rB,OAAL,CAAa+rB,IAAb,CAAkBf,GAAlB,EAAuBrtC,SAAvB,EAAkCA,SAAlC,EAA6C,UAACvC,KAAD,EAAW;AACpD,kBAAI,CAACywC,OAAL,GAAe,KAAf;;AACA,gBAAIzwC,KAAJ,EAAW;AACP,oBAAI,CAACwwC,UAAL;;AACA,oBAAI,CAAClB,SAAL,CAAetvC,KAAf,EAAsB4vC,GAAtB,EAA2B,MAAI,CAACY,UAAhC;AACH,aAHD,MAIK;AACD,oBAAI,CAACA,UAAL,GAAkB,CAAlB;AACH;;AACD,gBAAI,MAAI,CAAC5H,KAAL,CAAWhkC,MAAX,GAAoB,CAAxB,EAA2B;AACvB,oBAAI,CAAC8rC,cAAL,CAAoB,MAAI,CAAC9H,KAAL,CAAW1jC,KAAX,EAApB;AACH;AACJ,WAZD;AAaH;AACJ,OAjBD,CAkBA,OAAOlF,KAAP,EAAc;AACV,aAAKwwC,UAAL;AACA,aAAKlB,SAAL,CAAetvC,KAAf,EAAsB4vC,GAAtB,EAA2B,KAAKY,UAAhC;AACH;AACJ;;;;EA3C0BF,qB;;AA6C/BvxC,OAAO,CAACigC,gBAAR,GAA2BA,gBAA3B;;IACMoH,mB;;;;;AACF,+BAAYgK,MAAZ,EAAuC;AAAA;;AAAA,QAAnBzC,QAAmB,uEAAR,MAAQ;;AAAA;;AACnC;AACA,WAAKyC,MAAL,GAAcA,MAAd;AACA,WAAKxH,KAAL,GAAa,EAAb;AACA,WAAK6H,OAAL,GAAe,KAAf;AACA,WAAK9C,QAAL,GAAgBA,QAAhB;AACA,WAAK6C,UAAL,GAAkB,CAAlB;;AACA,WAAKJ,MAAL,CAAYhB,EAAZ,CAAe,OAAf,EAAwB,UAACpvC,KAAD;AAAA,aAAW,OAAKsvC,SAAL,CAAetvC,KAAf,CAAX;AAAA,KAAxB;;AACA,WAAKowC,MAAL,CAAYhB,EAAZ,CAAe,OAAf,EAAwB;AAAA,aAAM,OAAKG,SAAL,EAAN;AAAA,KAAxB;;AARmC;AAStC;;;;8BACS;AACN;;AACA,WAAKa,MAAL,CAAYQ,OAAZ;AACH;;;0BACKhB,G,EAAK;AACP,UAAI,CAAC,KAAKa,OAAN,IAAiB,KAAK7H,KAAL,CAAWhkC,MAAX,KAAsB,CAA3C,EAA8C;AAC1C;AACA,aAAK8rC,cAAL,CAAoBd,GAApB;AACH,OAHD,MAIK;AACD,aAAKhH,KAAL,CAAWnkC,IAAX,CAAgBmrC,GAAhB;AACH;AACJ;;;mCACcA,G,EAAK;AAAA;;AAChB,UAAII,IAAI,GAAG5sB,IAAI,CAACC,SAAL,CAAeusB,GAAf,CAAX;AACA,UAAIH,aAAa,GAAGnC,MAAM,CAACY,UAAP,CAAkB8B,IAAlB,EAAwB,KAAKrC,QAA7B,CAApB;AACA,UAAIY,OAAO,GAAG,CACV8B,aADU,EACKZ,aAAa,CAACxkC,QAAd,EADL,EAC+BwiC,IAD/B,EAEVA,IAFU,CAAd;;AAIA,UAAI;AACA;AACA,aAAKgD,OAAL,GAAe,IAAf;AACA,aAAKL,MAAL,CAAYlG,KAAZ,CAAkBqE,OAAO,CAACtR,IAAR,CAAa,EAAb,CAAlB,EAAoC,OAApC,EAA6C,UAACj9B,KAAD,EAAW;AACpD,cAAIA,KAAJ,EAAW;AACP,kBAAI,CAAC6wC,WAAL,CAAiB7wC,KAAjB,EAAwB4vC,GAAxB;AACH;;AACD,cAAI;AACA;AACA,kBAAI,CAACQ,MAAL,CAAYlG,KAAZ,CAAkB8F,IAAlB,EAAwB,MAAI,CAACrC,QAA7B,EAAuC,UAAC3tC,KAAD,EAAW;AAC9C,oBAAI,CAACywC,OAAL,GAAe,KAAf;;AACA,kBAAIzwC,KAAJ,EAAW;AACP,sBAAI,CAAC6wC,WAAL,CAAiB7wC,KAAjB,EAAwB4vC,GAAxB;AACH,eAFD,MAGK;AACD,sBAAI,CAACY,UAAL,GAAkB,CAAlB;AACH;;AACD,kBAAI,MAAI,CAAC5H,KAAL,CAAWhkC,MAAX,GAAoB,CAAxB,EAA2B;AACvB,sBAAI,CAAC8rC,cAAL,CAAoB,MAAI,CAAC9H,KAAL,CAAW1jC,KAAX,EAApB;AACH;AACJ,aAXD;AAYH,WAdD,CAeA,OAAOlF,KAAP,EAAc;AACV,kBAAI,CAAC6wC,WAAL,CAAiB7wC,KAAjB,EAAwB4vC,GAAxB;AACH;AACJ,SAtBD;AAuBH,OA1BD,CA2BA,OAAO5vC,KAAP,EAAc;AACV,aAAK6wC,WAAL,CAAiB7wC,KAAjB,EAAwB4vC,GAAxB;AACH;AACJ;;;gCACW5vC,K,EAAO4vC,G,EAAK;AACpB,WAAKY,UAAL;AACA,WAAKlB,SAAL,CAAetvC,KAAf,EAAsB4vC,GAAtB,EAA2B,KAAKY,UAAhC;AACH;;;;EAjE6BF,qB;;AAmElCvxC,OAAO,CAACqnC,mBAAR,GAA8BA,mBAA9B,C;;;;;;;;;;;;;ACjMA;;;;AAIa;;;;;;;;;;;;;;;;;;;;AACbnnC,MAAM,CAACC,cAAP,CAAsBH,OAAtB,EAA+B,YAA/B,EAA6C;AAAEI,OAAK,EAAE;AAAT,CAA7C;;AACA,IAAM2I,EAAE,GAAGzI,mBAAO,CAAC,kGAAD,CAAlB;AACA;;;;;AAGA,IAAI0qB,UAAJ;;AACA,CAAC,UAAUA,UAAV,EAAsB;AACnB;AACAA,YAAU,CAAC+mB,UAAX,GAAwB,CAAC,KAAzB;AACA/mB,YAAU,CAACgnB,cAAX,GAA4B,CAAC,KAA7B;AACAhnB,YAAU,CAACohB,cAAX,GAA4B,CAAC,KAA7B;AACAphB,YAAU,CAACinB,aAAX,GAA2B,CAAC,KAA5B;AACAjnB,YAAU,CAACmhB,aAAX,GAA2B,CAAC,KAA5B;AACAnhB,YAAU,CAACknB,gBAAX,GAA8B,CAAC,KAA/B;AACAlnB,YAAU,CAACmnB,cAAX,GAA4B,CAAC,KAA7B;AACAnnB,YAAU,CAAConB,oBAAX,GAAkC,CAAC,KAAnC;AACApnB,YAAU,CAACqnB,gBAAX,GAA8B,CAAC,KAA/B,CAVmB,CAWnB;;AACArnB,YAAU,CAACC,gBAAX,GAA8B,CAAC,KAA/B;AACAD,YAAU,CAACsnB,eAAX,GAA6B,CAAC,KAA9B,CAbmB,CAcnB;;AACAtnB,YAAU,CAAC4iB,iBAAX,GAA+B,CAA/B;AACA5iB,YAAU,CAACunB,gBAAX,GAA8B,CAA9B;AACH,CAjBD,EAiBGvnB,UAAU,GAAGhrB,OAAO,CAACgrB,UAAR,KAAuBhrB,OAAO,CAACgrB,UAAR,GAAqB,EAA5C,CAjBhB;AAkBA;;;;;;IAIMzH,a;;;;;AACF,yBAAYE,IAAZ,EAAkB1iB,OAAlB,EAA2Be,IAA3B,EAAiC;AAAA;;AAAA;;AAC7B,8BAAMf,OAAN;AACA,UAAK0iB,IAAL,GAAY1a,EAAE,CAAC8d,MAAH,CAAUpD,IAAV,IAAkBA,IAAlB,GAAyBuH,UAAU,CAACqnB,gBAAhD;AACA,UAAKvwC,IAAL,GAAYA,IAAZ;AACA5B,UAAM,CAAC8nC,cAAP,gCAA4BzkB,aAAa,CAAC0kB,SAA1C;AAJ6B;AAKhC;;;;6BACQ;AACL,aAAO;AACHxkB,YAAI,EAAE,KAAKA,IADR;AAEH1iB,eAAO,EAAE,KAAKA,OAFX;AAGHe,YAAI,EAAE,KAAKA;AAHR,OAAP;AAKH;;;;iCAbuB2P,K;;AAe5BzR,OAAO,CAACujB,aAAR,GAAwBA,aAAxB;AACA;;;;IAGMivB,mB;AACF,+BAAY9iC,OAAZ,EAAqB+iC,eAArB,EAAsC;AAAA;;AAClC,SAAK/iC,OAAL,GAAeA,OAAf;AACA,SAAK+iC,eAAL,GAAuBA,eAAvB;AACH;;;;wBACY;AACT,aAAO,KAAK/iC,OAAZ;AACH;;;wBACoB;AACjB,aAAO,KAAK+iC,eAAZ;AACH;;;;;;AAELzyC,OAAO,CAACwyC,mBAAR,GAA8BA,mBAA9B;AACA;;;;;;;;IAOM9S,Y;;;;;AACF,wBAAYp9B,MAAZ,EAAoB;AAAA;;AAAA,8BACVA,MADU,EACF,CADE;AAEnB;;;EAHsBkwC,mB;;AAK3BxyC,OAAO,CAAC0/B,YAAR,GAAuBA,YAAvB;;IACMD,W;;;;;AACF,uBAAYn9B,MAAZ,EAAoB;AAAA;;AAAA,8BACVA,MADU,EACF,CADE;AAEnB;;;EAHqBkwC,mB;;AAK1BxyC,OAAO,CAACy/B,WAAR,GAAsBA,WAAtB;;IACMuG,Y;;;;;AACF,wBAAY1jC,MAAZ,EAAoB;AAAA;;AAAA,8BACVA,MADU,EACF,CADE;AAEnB;;;EAHsBkwC,mB;;AAK3BxyC,OAAO,CAACgmC,YAAR,GAAuBA,YAAvB;;IACMC,Y;;;;;AACF,wBAAY3jC,MAAZ,EAAoB;AAAA;;AAAA,8BACVA,MADU,EACF,CADE;AAEnB;;;EAHsBkwC,mB;;AAK3BxyC,OAAO,CAACimC,YAAR,GAAuBA,YAAvB;;IACMC,Y;;;;;AACF,wBAAY5jC,MAAZ,EAAoB;AAAA;;AAAA,8BACVA,MADU,EACF,CADE;AAEnB;;;EAHsBkwC,mB;;AAK3BxyC,OAAO,CAACkmC,YAAR,GAAuBA,YAAvB;;IACMC,Y;;;;;AACF,wBAAY7jC,MAAZ,EAAoB;AAAA;;AAAA,8BACVA,MADU,EACF,CADE;AAEnB;;;EAHsBkwC,mB;;AAK3BxyC,OAAO,CAACmmC,YAAR,GAAuBA,YAAvB;;IACMC,Y;;;;;AACF,wBAAY9jC,MAAZ,EAAoB;AAAA;;AAAA,8BACVA,MADU,EACF,CADE;AAEnB;;;EAHsBkwC,mB;;AAK3BxyC,OAAO,CAAComC,YAAR,GAAuBA,YAAvB;;IACMC,Y;;;;;AACF,wBAAY/jC,MAAZ,EAAoB;AAAA;;AAAA,8BACVA,MADU,EACF,CADE;AAEnB;;;EAHsBkwC,mB;;AAK3BxyC,OAAO,CAACqmC,YAAR,GAAuBA,YAAvB;;IACMC,Y;;;;;AACF,wBAAYhkC,MAAZ,EAAoB;AAAA;;AAAA,+BACVA,MADU,EACF,CADE;AAEnB;;;EAHsBkwC,mB;;AAK3BxyC,OAAO,CAACsmC,YAAR,GAAuBA,YAAvB;;IACMC,Y;;;;;AACF,wBAAYjkC,MAAZ,EAAoB;AAAA;;AAAA,+BACVA,MADU,EACF,CADE;AAEnB;;;EAHsBkwC,mB;;AAK3BxyC,OAAO,CAACumC,YAAR,GAAuBA,YAAvB;;IACMC,Y;;;;;AACF,wBAAYlkC,MAAZ,EAAoB;AAAA;;AAAA,+BACVA,MADU,EACF,CADE;AAEnB;;;EAHsBkwC,mB;;AAK3BxyC,OAAO,CAACwmC,YAAR,GAAuBA,YAAvB;AACA;;;;;;IAKM7G,gB;;;;;AACF,4BAAYr9B,MAAZ,EAAoB;AAAA;;AAAA;;AAChB,iCAAMA,MAAN,EAAc,CAAd;AACA,WAAKixB,CAAL,GAAS/vB,SAAT;AAFgB;AAGnB;;;EAJ0BgvC,mB;;AAM/BxyC,OAAO,CAAC2/B,gBAAR,GAA2BA,gBAA3B;;IACMC,iB;;;;;AACF,6BAAYt9B,MAAZ,EAAoB;AAAA;;AAAA,+BACVA,MADU,EACF,CADE;AAEnB;;;EAH2BkwC,mB;;AAKhCxyC,OAAO,CAAC4/B,iBAAR,GAA4BA,iBAA5B;;IACM6G,iB;;;;;AACF,6BAAYnkC,MAAZ,EAAoB;AAAA;;AAAA,+BACVA,MADU,EACF,CADE;AAEnB;;;EAH2BkwC,mB;;AAKhCxyC,OAAO,CAACymC,iBAAR,GAA4BA,iBAA5B;;IACMC,iB;;;;;AACF,6BAAYpkC,MAAZ,EAAoB;AAAA;;AAAA,+BACVA,MADU,EACF,CADE;AAEnB;;;EAH2BkwC,mB;;AAKhCxyC,OAAO,CAAC0mC,iBAAR,GAA4BA,iBAA5B;;IACMC,iB;;;;;AACF,6BAAYrkC,MAAZ,EAAoB;AAAA;;AAAA,+BACVA,MADU,EACF,CADE;AAEnB;;;EAH2BkwC,mB;;AAKhCxyC,OAAO,CAAC2mC,iBAAR,GAA4BA,iBAA5B;;IACMC,iB;;;;;AACF,6BAAYtkC,MAAZ,EAAoB;AAAA;;AAAA,+BACVA,MADU,EACF,CADE;AAEnB;;;EAH2BkwC,mB;;AAKhCxyC,OAAO,CAAC4mC,iBAAR,GAA4BA,iBAA5B;;IACMC,iB;;;;;AACF,6BAAYvkC,MAAZ,EAAoB;AAAA;;AAAA,+BACVA,MADU,EACF,CADE;AAEnB;;;EAH2BkwC,mB;;AAKhCxyC,OAAO,CAAC6mC,iBAAR,GAA4BA,iBAA5B;;IACMC,iB;;;;;AACF,6BAAYxkC,MAAZ,EAAoB;AAAA;;AAAA,+BACVA,MADU,EACF,CADE;AAEnB;;;EAH2BkwC,mB;;AAKhCxyC,OAAO,CAAC8mC,iBAAR,GAA4BA,iBAA5B;;IACMC,iB;;;;;AACF,6BAAYzkC,MAAZ,EAAoB;AAAA;;AAAA,+BACVA,MADU,EACF,CADE;AAEnB;;;EAH2BkwC,mB;;AAKhCxyC,OAAO,CAAC+mC,iBAAR,GAA4BA,iBAA5B;;IACMC,iB;;;;;AACF,6BAAY1kC,MAAZ,EAAoB;AAAA;;AAAA,+BACVA,MADU,EACF,CADE;AAEnB;;;EAH2BkwC,mB;;AAKhCxyC,OAAO,CAACgnC,iBAAR,GAA4BA,iBAA5B;;IACMC,iB;;;;;AACF,6BAAY3kC,MAAZ,EAAoB;AAAA;;AAAA,+BACVA,MADU,EACF,CADE;AAEnB;;;EAH2BkwC,mB;;AAKhCxyC,OAAO,CAACinC,iBAAR,GAA4BA,iBAA5B;AACA;;;;AAGA,SAAS6C,gBAAT,CAA0B/oC,OAA1B,EAAmC;AAC/B,MAAIiI,SAAS,GAAGjI,OAAhB;AACA,SAAOiI,SAAS,IAAID,EAAE,CAAC1G,MAAH,CAAU2G,SAAS,CAAC1G,MAApB,CAAb,KAA6CyG,EAAE,CAAC1G,MAAH,CAAU2G,SAAS,CAACmB,EAApB,KAA2BpB,EAAE,CAAC8d,MAAH,CAAU7d,SAAS,CAACmB,EAApB,CAAxE,CAAP;AACH;;AACDnK,OAAO,CAAC8pC,gBAAR,GAA2BA,gBAA3B;AACA;;;;AAGA,SAASc,qBAAT,CAA+B7pC,OAA/B,EAAwC;AACpC,MAAIiI,SAAS,GAAGjI,OAAhB;AACA,SAAOiI,SAAS,IAAID,EAAE,CAAC1G,MAAH,CAAU2G,SAAS,CAAC1G,MAApB,CAAb,IAA4CvB,OAAO,CAACoJ,EAAR,KAAe,KAAK,CAAvE;AACH;;AACDnK,OAAO,CAAC4qC,qBAAR,GAAgCA,qBAAhC;AACA;;;;AAGA,SAASb,iBAAT,CAA2BhpC,OAA3B,EAAoC;AAChC,MAAIiI,SAAS,GAAGjI,OAAhB;AACA,SAAOiI,SAAS,KAAKA,SAAS,CAAChH,MAAV,KAAqB,KAAK,CAA1B,IAA+B,CAAC,CAACgH,SAAS,CAAC/H,KAAhD,CAAT,KAAoE8H,EAAE,CAAC1G,MAAH,CAAU2G,SAAS,CAACmB,EAApB,KAA2BpB,EAAE,CAAC8d,MAAH,CAAU7d,SAAS,CAACmB,EAApB,CAA3B,IAAsDnB,SAAS,CAACmB,EAAV,KAAiB,IAA3I,CAAP;AACH;;AACDnK,OAAO,CAAC+pC,iBAAR,GAA4BA,iBAA5B,C;;;;;;;;;;;;ACzOA;;;;AAIa;;AACb7pC,MAAM,CAACC,cAAP,CAAsBH,OAAtB,EAA+B,YAA/B,EAA6C;AAAEI,OAAK,EAAE;AAAT,CAA7C;;AACA,IAAMsyC,MAAM,GAAGpyC,mBAAO,CAAC,sDAAD,CAAtB;;AACA,IAAMqyC,IAAI,GAAGryC,mBAAO,CAAC,oDAAD,CAApB;;AACA,IAAMsyC,QAAQ,GAAGtyC,mBAAO,CAAC,+DAAD,CAAxB;;AACA,IAAMuyC,KAAK,GAAGvyC,mBAAO,CAAC,4DAAD,CAArB;;AACA,IAAM4mC,eAAe,GAAG5mC,mBAAO,CAAC,wHAAD,CAA/B;;AACA,IAAM8mC,eAAe,GAAG9mC,mBAAO,CAAC,wHAAD,CAA/B;;AACA,SAAS8/B,sBAAT,GAAkC;AAC9B,MAAM0S,YAAY,GAAGF,QAAQ,CAACG,WAAT,CAAqB,EAArB,EAAyB7mC,QAAzB,CAAkC,KAAlC,CAArB;;AACA,MAAI2Z,OAAO,CAACmtB,QAAR,KAAqB,OAAzB,EAAkC;AAC9B,iDAAsCF,YAAtC;AACH,GAFD,MAGK;AACD;AACA,WAAOJ,MAAM,CAACxU,IAAP,CAAYyU,IAAI,CAACM,MAAL,EAAZ,mBAAqCH,YAArC,WAAP;AACH;AACJ;;AACD9yC,OAAO,CAACogC,sBAAR,GAAiCA,sBAAjC;;AACA,SAASF,yBAAT,CAAmCgT,QAAnC,EAAiE;AAAA,MAApBtE,QAAoB,uEAAT,OAAS;AAC7D,MAAIuE,cAAJ;AACA,MAAIC,SAAS,GAAG,IAAIv/B,OAAJ,CAAY,UAACC,OAAD,EAAUqM,OAAV,EAAsB;AAC9CgzB,kBAAc,GAAGr/B,OAAjB;AACH,GAFe,CAAhB;AAGA,SAAO,IAAID,OAAJ,CAAY,UAACC,OAAD,EAAU0I,MAAV,EAAqB;AACpC,QAAI62B,MAAM,GAAGR,KAAK,CAACS,YAAN,CAAmB,UAACjC,MAAD,EAAY;AACxCgC,YAAM,CAACE,KAAP;AACAJ,oBAAc,CAAC,CACX,IAAIjM,eAAe,CAACC,mBAApB,CAAwCkK,MAAxC,EAAgDzC,QAAhD,CADW,EAEX,IAAIxH,eAAe,CAACC,mBAApB,CAAwCgK,MAAxC,EAAgDzC,QAAhD,CAFW,CAAD,CAAd;AAIH,KANY,CAAb;AAOAyE,UAAM,CAAChD,EAAP,CAAU,OAAV,EAAmB7zB,MAAnB;AACA62B,UAAM,CAACpxC,MAAP,CAAcixC,QAAd,EAAwB,YAAM;AAC1BG,YAAM,CAACG,cAAP,CAAsB,OAAtB,EAA+Bh3B,MAA/B;AACA1I,aAAO,CAAC;AACJ2/B,mBAAW,EAAE,uBAAM;AAAE,iBAAOL,SAAP;AAAmB;AADpC,OAAD,CAAP;AAGH,KALD;AAMH,GAfM,CAAP;AAgBH;;AACDpzC,OAAO,CAACkgC,yBAAR,GAAoCA,yBAApC;;AACA,SAASC,yBAAT,CAAmC+S,QAAnC,EAAiE;AAAA,MAApBtE,QAAoB,uEAAT,OAAS;AAC7D,MAAMyC,MAAM,GAAGwB,KAAK,CAACxxC,gBAAN,CAAuB6xC,QAAvB,CAAf;AACA,SAAO,CACH,IAAIhM,eAAe,CAACC,mBAApB,CAAwCkK,MAAxC,EAAgDzC,QAAhD,CADG,EAEH,IAAIxH,eAAe,CAACC,mBAApB,CAAwCgK,MAAxC,EAAgDzC,QAAhD,CAFG,CAAP;AAIH;;AACD5uC,OAAO,CAACmgC,yBAAR,GAAoCA,yBAApC,C;;;;;;;;;;;;;ACrDA;;;;AAIa;;AACbjgC,MAAM,CAACC,cAAP,CAAsBH,OAAtB,EAA+B,YAA/B,EAA6C;AAAEI,OAAK,EAAE;AAAT,CAA7C;;AACA,IAAMyyC,KAAK,GAAGvyC,mBAAO,CAAC,4DAAD,CAArB;;AACA,IAAM4mC,eAAe,GAAG5mC,mBAAO,CAAC,wHAAD,CAA/B;;AACA,IAAM8mC,eAAe,GAAG9mC,mBAAO,CAAC,wHAAD,CAA/B;;AACA,SAAS+/B,2BAAT,CAAqCqT,IAArC,EAA+D;AAAA,MAApB9E,QAAoB,uEAAT,OAAS;AAC3D,MAAIuE,cAAJ;AACA,MAAIC,SAAS,GAAG,IAAIv/B,OAAJ,CAAY,UAACC,OAAD,EAAUqM,OAAV,EAAsB;AAC9CgzB,kBAAc,GAAGr/B,OAAjB;AACH,GAFe,CAAhB;AAGA,SAAO,IAAID,OAAJ,CAAY,UAACC,OAAD,EAAU0I,MAAV,EAAqB;AACpC,QAAI62B,MAAM,GAAGR,KAAK,CAACS,YAAN,CAAmB,UAACjC,MAAD,EAAY;AACxCgC,YAAM,CAACE,KAAP;AACAJ,oBAAc,CAAC,CACX,IAAIjM,eAAe,CAACC,mBAApB,CAAwCkK,MAAxC,EAAgDzC,QAAhD,CADW,EAEX,IAAIxH,eAAe,CAACC,mBAApB,CAAwCgK,MAAxC,EAAgDzC,QAAhD,CAFW,CAAD,CAAd;AAIH,KANY,CAAb;AAOAyE,UAAM,CAAChD,EAAP,CAAU,OAAV,EAAmB7zB,MAAnB;AACA62B,UAAM,CAACpxC,MAAP,CAAcyxC,IAAd,EAAoB,WAApB,EAAiC,YAAM;AACnCL,YAAM,CAACG,cAAP,CAAsB,OAAtB,EAA+Bh3B,MAA/B;AACA1I,aAAO,CAAC;AACJ2/B,mBAAW,EAAE,uBAAM;AAAE,iBAAOL,SAAP;AAAmB;AADpC,OAAD,CAAP;AAGH,KALD;AAMH,GAfM,CAAP;AAgBH;;AACDpzC,OAAO,CAACqgC,2BAAR,GAAsCA,2BAAtC;;AACA,SAASC,2BAAT,CAAqCoT,IAArC,EAA+D;AAAA,MAApB9E,QAAoB,uEAAT,OAAS;AAC3D,MAAMyC,MAAM,GAAGwB,KAAK,CAACxxC,gBAAN,CAAuBqyC,IAAvB,EAA6B,WAA7B,CAAf;AACA,SAAO,CACH,IAAIxM,eAAe,CAACC,mBAApB,CAAwCkK,MAAxC,EAAgDzC,QAAhD,CADG,EAEH,IAAIxH,eAAe,CAACC,mBAApB,CAAwCgK,MAAxC,EAAgDzC,QAAhD,CAFG,CAAP;AAIH;;AACD5uC,OAAO,CAACsgC,2BAAR,GAAsCA,2BAAtC,C","file":"9.bundle.js","sourcesContent":["function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\n\nmodule.exports = _arrayWithHoles;","function _iterableToArrayLimit(arr, i) {\n  if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}\n\nmodule.exports = _iterableToArrayLimit;","function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nmodule.exports = _nonIterableRest;","var arrayWithHoles = require(\"./arrayWithHoles\");\n\nvar iterableToArrayLimit = require(\"./iterableToArrayLimit\");\n\nvar unsupportedIterableToArray = require(\"./unsupportedIterableToArray\");\n\nvar nonIterableRest = require(\"./nonIterableRest\");\n\nfunction _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || unsupportedIterableToArray(arr, i) || nonIterableRest();\n}\n\nmodule.exports = _slicedToArray;","/**\n * Copyright (c) 2014-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nvar runtime = (function (exports) {\n  \"use strict\";\n\n  var Op = Object.prototype;\n  var hasOwn = Op.hasOwnProperty;\n  var undefined; // More compressible than void 0.\n  var $Symbol = typeof Symbol === \"function\" ? Symbol : {};\n  var iteratorSymbol = $Symbol.iterator || \"@@iterator\";\n  var asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\";\n  var toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\";\n\n  function wrap(innerFn, outerFn, self, tryLocsList) {\n    // If outerFn provided and outerFn.prototype is a Generator, then outerFn.prototype instanceof Generator.\n    var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator;\n    var generator = Object.create(protoGenerator.prototype);\n    var context = new Context(tryLocsList || []);\n\n    // The ._invoke method unifies the implementations of the .next,\n    // .throw, and .return methods.\n    generator._invoke = makeInvokeMethod(innerFn, self, context);\n\n    return generator;\n  }\n  exports.wrap = wrap;\n\n  // Try/catch helper to minimize deoptimizations. Returns a completion\n  // record like context.tryEntries[i].completion. This interface could\n  // have been (and was previously) designed to take a closure to be\n  // invoked without arguments, but in all the cases we care about we\n  // already have an existing method we want to call, so there's no need\n  // to create a new function object. We can even get away with assuming\n  // the method takes exactly one argument, since that happens to be true\n  // in every case, so we don't have to touch the arguments object. The\n  // only additional allocation required is the completion record, which\n  // has a stable shape and so hopefully should be cheap to allocate.\n  function tryCatch(fn, obj, arg) {\n    try {\n      return { type: \"normal\", arg: fn.call(obj, arg) };\n    } catch (err) {\n      return { type: \"throw\", arg: err };\n    }\n  }\n\n  var GenStateSuspendedStart = \"suspendedStart\";\n  var GenStateSuspendedYield = \"suspendedYield\";\n  var GenStateExecuting = \"executing\";\n  var GenStateCompleted = \"completed\";\n\n  // Returning this object from the innerFn has the same effect as\n  // breaking out of the dispatch switch statement.\n  var ContinueSentinel = {};\n\n  // Dummy constructor functions that we use as the .constructor and\n  // .constructor.prototype properties for functions that return Generator\n  // objects. For full spec compliance, you may wish to configure your\n  // minifier not to mangle the names of these two functions.\n  function Generator() {}\n  function GeneratorFunction() {}\n  function GeneratorFunctionPrototype() {}\n\n  // This is a polyfill for %IteratorPrototype% for environments that\n  // don't natively support it.\n  var IteratorPrototype = {};\n  IteratorPrototype[iteratorSymbol] = function () {\n    return this;\n  };\n\n  var getProto = Object.getPrototypeOf;\n  var NativeIteratorPrototype = getProto && getProto(getProto(values([])));\n  if (NativeIteratorPrototype &&\n      NativeIteratorPrototype !== Op &&\n      hasOwn.call(NativeIteratorPrototype, iteratorSymbol)) {\n    // This environment has a native %IteratorPrototype%; use it instead\n    // of the polyfill.\n    IteratorPrototype = NativeIteratorPrototype;\n  }\n\n  var Gp = GeneratorFunctionPrototype.prototype =\n    Generator.prototype = Object.create(IteratorPrototype);\n  GeneratorFunction.prototype = Gp.constructor = GeneratorFunctionPrototype;\n  GeneratorFunctionPrototype.constructor = GeneratorFunction;\n  GeneratorFunctionPrototype[toStringTagSymbol] =\n    GeneratorFunction.displayName = \"GeneratorFunction\";\n\n  // Helper for defining the .next, .throw, and .return methods of the\n  // Iterator interface in terms of a single ._invoke method.\n  function defineIteratorMethods(prototype) {\n    [\"next\", \"throw\", \"return\"].forEach(function(method) {\n      prototype[method] = function(arg) {\n        return this._invoke(method, arg);\n      };\n    });\n  }\n\n  exports.isGeneratorFunction = function(genFun) {\n    var ctor = typeof genFun === \"function\" && genFun.constructor;\n    return ctor\n      ? ctor === GeneratorFunction ||\n        // For the native GeneratorFunction constructor, the best we can\n        // do is to check its .name property.\n        (ctor.displayName || ctor.name) === \"GeneratorFunction\"\n      : false;\n  };\n\n  exports.mark = function(genFun) {\n    if (Object.setPrototypeOf) {\n      Object.setPrototypeOf(genFun, GeneratorFunctionPrototype);\n    } else {\n      genFun.__proto__ = GeneratorFunctionPrototype;\n      if (!(toStringTagSymbol in genFun)) {\n        genFun[toStringTagSymbol] = \"GeneratorFunction\";\n      }\n    }\n    genFun.prototype = Object.create(Gp);\n    return genFun;\n  };\n\n  // Within the body of any async function, `await x` is transformed to\n  // `yield regeneratorRuntime.awrap(x)`, so that the runtime can test\n  // `hasOwn.call(value, \"__await\")` to determine if the yielded value is\n  // meant to be awaited.\n  exports.awrap = function(arg) {\n    return { __await: arg };\n  };\n\n  function AsyncIterator(generator, PromiseImpl) {\n    function invoke(method, arg, resolve, reject) {\n      var record = tryCatch(generator[method], generator, arg);\n      if (record.type === \"throw\") {\n        reject(record.arg);\n      } else {\n        var result = record.arg;\n        var value = result.value;\n        if (value &&\n            typeof value === \"object\" &&\n            hasOwn.call(value, \"__await\")) {\n          return PromiseImpl.resolve(value.__await).then(function(value) {\n            invoke(\"next\", value, resolve, reject);\n          }, function(err) {\n            invoke(\"throw\", err, resolve, reject);\n          });\n        }\n\n        return PromiseImpl.resolve(value).then(function(unwrapped) {\n          // When a yielded Promise is resolved, its final value becomes\n          // the .value of the Promise<{value,done}> result for the\n          // current iteration.\n          result.value = unwrapped;\n          resolve(result);\n        }, function(error) {\n          // If a rejected Promise was yielded, throw the rejection back\n          // into the async generator function so it can be handled there.\n          return invoke(\"throw\", error, resolve, reject);\n        });\n      }\n    }\n\n    var previousPromise;\n\n    function enqueue(method, arg) {\n      function callInvokeWithMethodAndArg() {\n        return new PromiseImpl(function(resolve, reject) {\n          invoke(method, arg, resolve, reject);\n        });\n      }\n\n      return previousPromise =\n        // If enqueue has been called before, then we want to wait until\n        // all previous Promises have been resolved before calling invoke,\n        // so that results are always delivered in the correct order. If\n        // enqueue has not been called before, then it is important to\n        // call invoke immediately, without waiting on a callback to fire,\n        // so that the async generator function has the opportunity to do\n        // any necessary setup in a predictable way. This predictability\n        // is why the Promise constructor synchronously invokes its\n        // executor callback, and why async functions synchronously\n        // execute code before the first await. Since we implement simple\n        // async functions in terms of async generators, it is especially\n        // important to get this right, even though it requires care.\n        previousPromise ? previousPromise.then(\n          callInvokeWithMethodAndArg,\n          // Avoid propagating failures to Promises returned by later\n          // invocations of the iterator.\n          callInvokeWithMethodAndArg\n        ) : callInvokeWithMethodAndArg();\n    }\n\n    // Define the unified helper method that is used to implement .next,\n    // .throw, and .return (see defineIteratorMethods).\n    this._invoke = enqueue;\n  }\n\n  defineIteratorMethods(AsyncIterator.prototype);\n  AsyncIterator.prototype[asyncIteratorSymbol] = function () {\n    return this;\n  };\n  exports.AsyncIterator = AsyncIterator;\n\n  // Note that simple async functions are implemented on top of\n  // AsyncIterator objects; they just return a Promise for the value of\n  // the final result produced by the iterator.\n  exports.async = function(innerFn, outerFn, self, tryLocsList, PromiseImpl) {\n    if (PromiseImpl === void 0) PromiseImpl = Promise;\n\n    var iter = new AsyncIterator(\n      wrap(innerFn, outerFn, self, tryLocsList),\n      PromiseImpl\n    );\n\n    return exports.isGeneratorFunction(outerFn)\n      ? iter // If outerFn is a generator, return the full iterator.\n      : iter.next().then(function(result) {\n          return result.done ? result.value : iter.next();\n        });\n  };\n\n  function makeInvokeMethod(innerFn, self, context) {\n    var state = GenStateSuspendedStart;\n\n    return function invoke(method, arg) {\n      if (state === GenStateExecuting) {\n        throw new Error(\"Generator is already running\");\n      }\n\n      if (state === GenStateCompleted) {\n        if (method === \"throw\") {\n          throw arg;\n        }\n\n        // Be forgiving, per 25.3.3.3.3 of the spec:\n        // https://people.mozilla.org/~jorendorff/es6-draft.html#sec-generatorresume\n        return doneResult();\n      }\n\n      context.method = method;\n      context.arg = arg;\n\n      while (true) {\n        var delegate = context.delegate;\n        if (delegate) {\n          var delegateResult = maybeInvokeDelegate(delegate, context);\n          if (delegateResult) {\n            if (delegateResult === ContinueSentinel) continue;\n            return delegateResult;\n          }\n        }\n\n        if (context.method === \"next\") {\n          // Setting context._sent for legacy support of Babel's\n          // function.sent implementation.\n          context.sent = context._sent = context.arg;\n\n        } else if (context.method === \"throw\") {\n          if (state === GenStateSuspendedStart) {\n            state = GenStateCompleted;\n            throw context.arg;\n          }\n\n          context.dispatchException(context.arg);\n\n        } else if (context.method === \"return\") {\n          context.abrupt(\"return\", context.arg);\n        }\n\n        state = GenStateExecuting;\n\n        var record = tryCatch(innerFn, self, context);\n        if (record.type === \"normal\") {\n          // If an exception is thrown from innerFn, we leave state ===\n          // GenStateExecuting and loop back for another invocation.\n          state = context.done\n            ? GenStateCompleted\n            : GenStateSuspendedYield;\n\n          if (record.arg === ContinueSentinel) {\n            continue;\n          }\n\n          return {\n            value: record.arg,\n            done: context.done\n          };\n\n        } else if (record.type === \"throw\") {\n          state = GenStateCompleted;\n          // Dispatch the exception by looping back around to the\n          // context.dispatchException(context.arg) call above.\n          context.method = \"throw\";\n          context.arg = record.arg;\n        }\n      }\n    };\n  }\n\n  // Call delegate.iterator[context.method](context.arg) and handle the\n  // result, either by returning a { value, done } result from the\n  // delegate iterator, or by modifying context.method and context.arg,\n  // setting context.delegate to null, and returning the ContinueSentinel.\n  function maybeInvokeDelegate(delegate, context) {\n    var method = delegate.iterator[context.method];\n    if (method === undefined) {\n      // A .throw or .return when the delegate iterator has no .throw\n      // method always terminates the yield* loop.\n      context.delegate = null;\n\n      if (context.method === \"throw\") {\n        // Note: [\"return\"] must be used for ES3 parsing compatibility.\n        if (delegate.iterator[\"return\"]) {\n          // If the delegate iterator has a return method, give it a\n          // chance to clean up.\n          context.method = \"return\";\n          context.arg = undefined;\n          maybeInvokeDelegate(delegate, context);\n\n          if (context.method === \"throw\") {\n            // If maybeInvokeDelegate(context) changed context.method from\n            // \"return\" to \"throw\", let that override the TypeError below.\n            return ContinueSentinel;\n          }\n        }\n\n        context.method = \"throw\";\n        context.arg = new TypeError(\n          \"The iterator does not provide a 'throw' method\");\n      }\n\n      return ContinueSentinel;\n    }\n\n    var record = tryCatch(method, delegate.iterator, context.arg);\n\n    if (record.type === \"throw\") {\n      context.method = \"throw\";\n      context.arg = record.arg;\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    var info = record.arg;\n\n    if (! info) {\n      context.method = \"throw\";\n      context.arg = new TypeError(\"iterator result is not an object\");\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    if (info.done) {\n      // Assign the result of the finished delegate to the temporary\n      // variable specified by delegate.resultName (see delegateYield).\n      context[delegate.resultName] = info.value;\n\n      // Resume execution at the desired location (see delegateYield).\n      context.next = delegate.nextLoc;\n\n      // If context.method was \"throw\" but the delegate handled the\n      // exception, let the outer generator proceed normally. If\n      // context.method was \"next\", forget context.arg since it has been\n      // \"consumed\" by the delegate iterator. If context.method was\n      // \"return\", allow the original .return call to continue in the\n      // outer generator.\n      if (context.method !== \"return\") {\n        context.method = \"next\";\n        context.arg = undefined;\n      }\n\n    } else {\n      // Re-yield the result returned by the delegate method.\n      return info;\n    }\n\n    // The delegate iterator is finished, so forget it and continue with\n    // the outer generator.\n    context.delegate = null;\n    return ContinueSentinel;\n  }\n\n  // Define Generator.prototype.{next,throw,return} in terms of the\n  // unified ._invoke helper method.\n  defineIteratorMethods(Gp);\n\n  Gp[toStringTagSymbol] = \"Generator\";\n\n  // A Generator should always return itself as the iterator object when the\n  // @@iterator function is called on it. Some browsers' implementations of the\n  // iterator prototype chain incorrectly implement this, causing the Generator\n  // object to not be returned from this call. This ensures that doesn't happen.\n  // See https://github.com/facebook/regenerator/issues/274 for more details.\n  Gp[iteratorSymbol] = function() {\n    return this;\n  };\n\n  Gp.toString = function() {\n    return \"[object Generator]\";\n  };\n\n  function pushTryEntry(locs) {\n    var entry = { tryLoc: locs[0] };\n\n    if (1 in locs) {\n      entry.catchLoc = locs[1];\n    }\n\n    if (2 in locs) {\n      entry.finallyLoc = locs[2];\n      entry.afterLoc = locs[3];\n    }\n\n    this.tryEntries.push(entry);\n  }\n\n  function resetTryEntry(entry) {\n    var record = entry.completion || {};\n    record.type = \"normal\";\n    delete record.arg;\n    entry.completion = record;\n  }\n\n  function Context(tryLocsList) {\n    // The root entry object (effectively a try statement without a catch\n    // or a finally block) gives us a place to store values thrown from\n    // locations where there is no enclosing try statement.\n    this.tryEntries = [{ tryLoc: \"root\" }];\n    tryLocsList.forEach(pushTryEntry, this);\n    this.reset(true);\n  }\n\n  exports.keys = function(object) {\n    var keys = [];\n    for (var key in object) {\n      keys.push(key);\n    }\n    keys.reverse();\n\n    // Rather than returning an object with a next method, we keep\n    // things simple and return the next function itself.\n    return function next() {\n      while (keys.length) {\n        var key = keys.pop();\n        if (key in object) {\n          next.value = key;\n          next.done = false;\n          return next;\n        }\n      }\n\n      // To avoid creating an additional object, we just hang the .value\n      // and .done properties off the next function object itself. This\n      // also ensures that the minifier will not anonymize the function.\n      next.done = true;\n      return next;\n    };\n  };\n\n  function values(iterable) {\n    if (iterable) {\n      var iteratorMethod = iterable[iteratorSymbol];\n      if (iteratorMethod) {\n        return iteratorMethod.call(iterable);\n      }\n\n      if (typeof iterable.next === \"function\") {\n        return iterable;\n      }\n\n      if (!isNaN(iterable.length)) {\n        var i = -1, next = function next() {\n          while (++i < iterable.length) {\n            if (hasOwn.call(iterable, i)) {\n              next.value = iterable[i];\n              next.done = false;\n              return next;\n            }\n          }\n\n          next.value = undefined;\n          next.done = true;\n\n          return next;\n        };\n\n        return next.next = next;\n      }\n    }\n\n    // Return an iterator with no values.\n    return { next: doneResult };\n  }\n  exports.values = values;\n\n  function doneResult() {\n    return { value: undefined, done: true };\n  }\n\n  Context.prototype = {\n    constructor: Context,\n\n    reset: function(skipTempReset) {\n      this.prev = 0;\n      this.next = 0;\n      // Resetting context._sent for legacy support of Babel's\n      // function.sent implementation.\n      this.sent = this._sent = undefined;\n      this.done = false;\n      this.delegate = null;\n\n      this.method = \"next\";\n      this.arg = undefined;\n\n      this.tryEntries.forEach(resetTryEntry);\n\n      if (!skipTempReset) {\n        for (var name in this) {\n          // Not sure about the optimal order of these conditions:\n          if (name.charAt(0) === \"t\" &&\n              hasOwn.call(this, name) &&\n              !isNaN(+name.slice(1))) {\n            this[name] = undefined;\n          }\n        }\n      }\n    },\n\n    stop: function() {\n      this.done = true;\n\n      var rootEntry = this.tryEntries[0];\n      var rootRecord = rootEntry.completion;\n      if (rootRecord.type === \"throw\") {\n        throw rootRecord.arg;\n      }\n\n      return this.rval;\n    },\n\n    dispatchException: function(exception) {\n      if (this.done) {\n        throw exception;\n      }\n\n      var context = this;\n      function handle(loc, caught) {\n        record.type = \"throw\";\n        record.arg = exception;\n        context.next = loc;\n\n        if (caught) {\n          // If the dispatched exception was caught by a catch block,\n          // then let that catch block handle the exception normally.\n          context.method = \"next\";\n          context.arg = undefined;\n        }\n\n        return !! caught;\n      }\n\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        var record = entry.completion;\n\n        if (entry.tryLoc === \"root\") {\n          // Exception thrown outside of any try block that could handle\n          // it, so set the completion value of the entire function to\n          // throw the exception.\n          return handle(\"end\");\n        }\n\n        if (entry.tryLoc <= this.prev) {\n          var hasCatch = hasOwn.call(entry, \"catchLoc\");\n          var hasFinally = hasOwn.call(entry, \"finallyLoc\");\n\n          if (hasCatch && hasFinally) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            } else if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else if (hasCatch) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            }\n\n          } else if (hasFinally) {\n            if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else {\n            throw new Error(\"try statement without catch or finally\");\n          }\n        }\n      }\n    },\n\n    abrupt: function(type, arg) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc <= this.prev &&\n            hasOwn.call(entry, \"finallyLoc\") &&\n            this.prev < entry.finallyLoc) {\n          var finallyEntry = entry;\n          break;\n        }\n      }\n\n      if (finallyEntry &&\n          (type === \"break\" ||\n           type === \"continue\") &&\n          finallyEntry.tryLoc <= arg &&\n          arg <= finallyEntry.finallyLoc) {\n        // Ignore the finally entry if control is not jumping to a\n        // location outside the try/catch block.\n        finallyEntry = null;\n      }\n\n      var record = finallyEntry ? finallyEntry.completion : {};\n      record.type = type;\n      record.arg = arg;\n\n      if (finallyEntry) {\n        this.method = \"next\";\n        this.next = finallyEntry.finallyLoc;\n        return ContinueSentinel;\n      }\n\n      return this.complete(record);\n    },\n\n    complete: function(record, afterLoc) {\n      if (record.type === \"throw\") {\n        throw record.arg;\n      }\n\n      if (record.type === \"break\" ||\n          record.type === \"continue\") {\n        this.next = record.arg;\n      } else if (record.type === \"return\") {\n        this.rval = this.arg = record.arg;\n        this.method = \"return\";\n        this.next = \"end\";\n      } else if (record.type === \"normal\" && afterLoc) {\n        this.next = afterLoc;\n      }\n\n      return ContinueSentinel;\n    },\n\n    finish: function(finallyLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.finallyLoc === finallyLoc) {\n          this.complete(entry.completion, entry.afterLoc);\n          resetTryEntry(entry);\n          return ContinueSentinel;\n        }\n      }\n    },\n\n    \"catch\": function(tryLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc === tryLoc) {\n          var record = entry.completion;\n          if (record.type === \"throw\") {\n            var thrown = record.arg;\n            resetTryEntry(entry);\n          }\n          return thrown;\n        }\n      }\n\n      // The context.catch method must only be called with a location\n      // argument that corresponds to a known catch block.\n      throw new Error(\"illegal catch attempt\");\n    },\n\n    delegateYield: function(iterable, resultName, nextLoc) {\n      this.delegate = {\n        iterator: values(iterable),\n        resultName: resultName,\n        nextLoc: nextLoc\n      };\n\n      if (this.method === \"next\") {\n        // Deliberately forget the last sent value so that we don't\n        // accidentally pass it on to the delegate.\n        this.arg = undefined;\n      }\n\n      return ContinueSentinel;\n    }\n  };\n\n  // Regardless of whether this script is executing as a CommonJS module\n  // or not, return the runtime object so that we can declare the variable\n  // regeneratorRuntime in the outer scope, which allows this module to be\n  // injected easily by `bin/regenerator --include-runtime script.js`.\n  return exports;\n\n}(\n  // If this script is executing as a CommonJS module, use module.exports\n  // as the regeneratorRuntime namespace. Otherwise create a new empty\n  // object. Either way, the resulting object will be used to initialize\n  // the regeneratorRuntime variable at the top of this file.\n  typeof module === \"object\" ? module.exports : {}\n));\n\ntry {\n  regeneratorRuntime = runtime;\n} catch (accidentalStrictMode) {\n  // This module should not be running in strict mode, so the above\n  // assignment should always work unless something is misconfigured. Just\n  // in case runtime.js accidentally runs in strict mode, we can escape\n  // strict mode using a global Function call. This could conceivably fail\n  // if a Content Security Policy forbids using Function, but in that case\n  // the proper solution is to fix the accidental strict mode problem. If\n  // you've misconfigured your bundler to force strict mode and applied a\n  // CSP to forbid Function, and you're not willing to fix either of those\n  // problems, please detail your unique predicament in a GitHub issue.\n  Function(\"r\", \"regeneratorRuntime = r\")(runtime);\n}\n","module.exports = require(\"regenerator-runtime\");\n","/********************************************************************************\n * Copyright (C) 2017 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\n/* eslint-disable @typescript-eslint/no-explicit-any */\n\nimport { injectable, inject } from 'inversify';\nimport { MaybePromise, MessageService, CommandRegistry } from '@theia/core';\nimport { Disposable, DisposableCollection } from '@theia/core/lib/common';\nimport { FrontendApplication, WebSocketConnectionProvider } from '@theia/core/lib/browser';\nimport {\n    LanguageContribution, ILanguageClient, LanguageClientOptions,\n    DocumentSelector, TextDocument, FileSystemWatcher,\n    Workspace, Languages, State\n} from './language-client-services';\nimport { MessageConnection, ResponseError } from 'vscode-jsonrpc';\nimport { LanguageClientFactory } from './language-client-factory';\nimport { WorkspaceService } from '@theia/workspace/lib/browser';\nimport { InitializeParams } from 'monaco-languageclient';\nimport { Deferred } from '@theia/core/lib/common/promise-util';\n\nexport const LanguageClientContribution = Symbol('LanguageClientContribution');\nexport interface LanguageClientContribution extends LanguageContribution {\n    readonly running: boolean;\n    readonly languageClient: Promise<ILanguageClient>;\n    waitForActivation(app: FrontendApplication): Promise<void>;\n    activate(app: FrontendApplication): Disposable;\n    deactivate(): void;\n    restart(): void;\n}\n\n@injectable()\nexport abstract class BaseLanguageClientContribution implements LanguageClientContribution {\n\n    abstract readonly id: string;\n    abstract readonly name: string;\n\n    protected _languageClient: ILanguageClient | undefined;\n\n    protected resolveReady: (languageClient: ILanguageClient) => void;\n    protected ready: Promise<ILanguageClient>;\n\n    @inject(MessageService) protected readonly messageService: MessageService;\n    @inject(CommandRegistry) protected readonly registry: CommandRegistry;\n    @inject(WorkspaceService) protected readonly workspaceService: WorkspaceService;\n    @inject(LanguageContribution.Service) protected readonly languageContributionService: LanguageContribution.Service;\n    @inject(WebSocketConnectionProvider) protected readonly connectionProvider: WebSocketConnectionProvider;\n\n    constructor(\n        @inject(Workspace) protected readonly workspace: Workspace,\n        @inject(Languages) protected readonly languages: Languages,\n        @inject(LanguageClientFactory) protected readonly languageClientFactory: LanguageClientFactory\n    ) {\n        this.waitForReady();\n    }\n\n    get languageClient(): Promise<ILanguageClient> {\n        return this._languageClient ? Promise.resolve(this._languageClient) : this.ready;\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    waitForActivation(app: FrontendApplication): Promise<any> {\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        const activationPromises: Promise<any>[] = [];\n        const workspaceContains = this.workspaceContains;\n        if (workspaceContains.length !== 0) {\n            activationPromises.push(this.waitForItemInWorkspace());\n        }\n        const documentSelector = this.documentSelector;\n        if (documentSelector) {\n            activationPromises.push(this.waitForOpenTextDocument(documentSelector));\n        }\n        if (activationPromises.length !== 0) {\n            return Promise.all([\n                this.workspace.ready,\n                Promise.race(activationPromises.map(p => new Promise(async resolve => {\n                    try {\n                        await p;\n                        resolve();\n                    } catch (e) {\n                        console.error(e);\n                    }\n                })))\n            ]);\n        }\n        return this.workspace.ready;\n    }\n\n    protected deferredConnection = new Deferred<MessageConnection>();\n\n    protected readonly toDeactivate = new DisposableCollection();\n    activate(): Disposable {\n        if (this.toDeactivate.disposed) {\n            if (!this._languageClient) {\n                this._languageClient = this.createLanguageClient(() => this.deferredConnection.promise);\n                this._languageClient.onDidChangeState(({ newState }) => {\n                    this.state = newState;\n                });\n            }\n            const toStop = new DisposableCollection(Disposable.create(() => { })); // mark as not disposed\n            this.toDeactivate.push(toStop);\n            this.doActivate(toStop);\n        }\n        return this.toDeactivate;\n    }\n    deactivate(): void {\n        this.toDeactivate.dispose();\n    }\n\n    protected stop = Promise.resolve();\n    protected async doActivate(toStop: DisposableCollection): Promise<void> {\n        try {\n            // make sure that the previous client is stopped to avoid duplicate commands and language services\n            await this.stop;\n            if (toStop.disposed) {\n                return;\n            }\n            const startParameters = await this.getStartParameters();\n            if (toStop.disposed) {\n                return;\n            }\n            const sessionId = await this.languageContributionService.create(this.id, startParameters);\n            if (toStop.disposed) {\n                this.languageContributionService.destroy(sessionId);\n                return;\n            }\n            toStop.push(Disposable.create(() => this.languageContributionService.destroy(sessionId)));\n            this.connectionProvider.listen({\n                path: LanguageContribution.getPath(this, sessionId),\n                onConnection: messageConnection => {\n                    this.deferredConnection.resolve(messageConnection);\n                    messageConnection.onDispose(() => this.deferredConnection = new Deferred<MessageConnection>());\n                    if (toStop.disposed) {\n                        messageConnection.dispose();\n                        return;\n                    }\n                    toStop.push(Disposable.create(() => this.stop = (async () => {\n                        try {\n                            // avoid calling stop if start failed\n                            await this._languageClient!.onReady();\n                            // remove all listeners\n                            await this._languageClient!.stop();\n                        } catch {\n                            try {\n                                // if start or stop failed make sure the the connection is closed\n                                messageConnection.dispose();\n                            } catch { /* no-op */ }\n                        }\n                    })()));\n                    toStop.push(messageConnection.onClose(() => this.forceRestart()));\n                    this._languageClient!.start();\n                    // it should be called after `start` that `onReady` promise gets reinitialized\n                    this.onWillStart(this._languageClient!, toStop);\n                }\n            }, { reconnecting: false });\n        } catch (e) {\n            console.error(e);\n            if (!toStop.disposed) {\n                this.forceRestart();\n            }\n        }\n    }\n\n    protected state: State | undefined;\n    get running(): boolean {\n        return !this.toDeactivate.disposed && this.state === State.Running;\n    }\n\n    restart(): void {\n        if (!this.running) {\n            return;\n        }\n        this.forceRestart();\n    }\n\n    protected forceRestart(): void {\n        this.deactivate();\n        this.activate();\n    }\n\n    protected onWillStart(languageClient: ILanguageClient, toStop?: DisposableCollection): void {\n        languageClient.onReady().then(() => this.onReady(languageClient, toStop));\n    }\n\n    protected onReady(languageClient: ILanguageClient, toStop?: DisposableCollection): void {\n        this._languageClient = languageClient;\n        this.resolveReady(this._languageClient);\n        this.waitForReady();\n    }\n\n    protected waitForReady(): void {\n        this.ready = new Promise<ILanguageClient>(resolve =>\n            this.resolveReady = resolve\n        );\n    }\n\n    protected createLanguageClient(connection: MessageConnection | (() => MaybePromise<MessageConnection>)): ILanguageClient {\n        const clientOptions = this.createOptions();\n        return this.languageClientFactory.get(this, clientOptions, connection);\n    }\n\n    protected createOptions(): LanguageClientOptions {\n        const { id, documentSelector, fileEvents, configurationSection, initializationOptions } = this;\n        return {\n            documentSelector,\n            synchronize: { fileEvents, configurationSection },\n            initializationFailedHandler: err => this.handleInitializationFailed(err),\n            diagnosticCollectionName: id,\n            initializationOptions\n        };\n    }\n    protected handleInitializationFailed(err: ResponseError<InitializeParams> | Error | any): boolean {\n        this.deactivate();\n        const detail = err instanceof Error ? `: ${err.message}` : '.';\n        this.messageService.error(`Failed to start ${this.name} language server${detail}`, 'Retry').then(result => {\n            if (result) {\n                this.activate();\n            }\n        });\n        return false;\n    }\n\n    protected getStartParameters(): MaybePromise<any> {\n        return undefined;\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    protected get initializationOptions(): any | (() => any) | undefined {\n        return undefined;\n    }\n\n    protected get configurationSection(): string | string[] | undefined {\n        return undefined;\n    }\n\n    protected get workspaceContains(): string[] {\n        return [];\n    }\n\n    protected get documentSelector(): DocumentSelector | undefined {\n        return [this.id];\n    }\n\n    protected _fileEvents: FileSystemWatcher[] | undefined;\n    protected get fileEvents(): FileSystemWatcher[] {\n        return this._fileEvents = this._fileEvents || this.createFileEvents();\n    }\n    protected createFileEvents(): FileSystemWatcher[] {\n        const watchers = [];\n        if (this.workspace.createFileSystemWatcher) {\n            for (const globPattern of this.globPatterns) {\n                watchers.push(this.workspace.createFileSystemWatcher(globPattern));\n            }\n        }\n        return watchers;\n    }\n\n    protected get globPatterns(): string[] {\n        return [];\n    }\n\n    /**\n     * Check to see if one of the paths is in the current workspace.\n     */\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    protected async waitForItemInWorkspace(): Promise<any> {\n        const doesContain = await this.workspaceService.containsSome(this.workspaceContains);\n        if (!doesContain) {\n            return new Promise(resolve => { });\n        }\n        return doesContain;\n    }\n\n    // FIXME move it to the workspace\n    protected waitForOpenTextDocument(selector: DocumentSelector): Promise<TextDocument> {\n        const document = this.workspace.textDocuments.filter(doc =>\n            this.languages.match(selector, doc)\n        )[0];\n        if (document !== undefined) {\n            return Promise.resolve(document);\n        }\n        return new Promise<TextDocument>(resolve => {\n            const disposable = this.workspace.onDidOpenTextDocument(doc => {\n                if (this.languages.match(selector, doc)) {\n                    disposable.dispose();\n                    resolve(doc);\n                }\n            });\n        });\n    }\n\n}\n","/********************************************************************************\n * Copyright (C) 2017 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { injectable, inject } from 'inversify';\nimport { MessageConnection } from 'vscode-jsonrpc';\nimport { CommandRegistry, Disposable, MaybePromise } from '@theia/core/lib/common';\nimport { ErrorAction, RevealOutputChannelOn, CloseAction } from 'monaco-languageclient';\nimport {\n    Workspace, Languages, Window, Services,\n    ILanguageClient, LanguageClientOptions, MonacoLanguageClient,\n    createConnection, LanguageContribution\n} from './language-client-services';\nimport { TypeHierarchyFeature } from './typehierarchy/typehierarchy-feature';\n\n@injectable()\nexport class LanguageClientFactory {\n\n    @inject(CommandRegistry) protected readonly registry: CommandRegistry;\n\n    constructor(\n        @inject(Workspace) protected readonly workspace: Workspace,\n        @inject(Languages) protected readonly languages: Languages,\n        @inject(Window) protected readonly window: Window\n    ) {\n        Services.install({\n            workspace,\n            languages,\n            window,\n            commands: {\n                registerCommand: this.registerCommand.bind(this)\n            }\n        });\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    protected registerCommand(id: string, callback: (...args: any[]) => any, thisArg?: any): Disposable {\n        const execute = callback.bind(thisArg);\n        return this.registry.registerCommand({ id }, { execute });\n    }\n\n    get(contribution: LanguageContribution, clientOptions: LanguageClientOptions,\n        connectionProvider: MessageConnection | (() => MaybePromise<MessageConnection>)): ILanguageClient {\n        if (clientOptions.revealOutputChannelOn === undefined) {\n            clientOptions.revealOutputChannelOn = RevealOutputChannelOn.Never;\n        }\n        if (!clientOptions.errorHandler) {\n            clientOptions.errorHandler = {\n                // ignore connection errors\n                error: () => ErrorAction.Continue,\n                closed: () => CloseAction.DoNotRestart\n            };\n        }\n        const initializationFailedHandler = clientOptions.initializationFailedHandler;\n        clientOptions.initializationFailedHandler = e => !!initializationFailedHandler && initializationFailedHandler(e);\n        const client = new MonacoLanguageClient({\n            id: contribution.id,\n            name: contribution.name,\n            clientOptions,\n            connectionProvider: {\n                get: async (errorHandler, closeHandler) => {\n                    const connection = typeof connectionProvider === 'function' ? await connectionProvider() : connectionProvider;\n                    return createConnection(connection, errorHandler, closeHandler);\n                }\n            }\n        });\n        client.registerFeature(new TypeHierarchyFeature(client));\n        return this.patch4085(client);\n    }\n\n    /**\n     * see https://github.com/eclipse-theia/theia/issues/4085\n     * remove when monaco-languageclient is upgraded to latest vscode-languageclient\n     */\n    protected patch4085(client: MonacoLanguageClient): MonacoLanguageClient {\n        const features = client['_dynamicFeatures'] as Map<string, {\n            _listener?: Object | undefined\n            dispose?: Function\n        }>;\n        for (const feature of features.values()) {\n            if (feature.dispose) {\n                const dispose = feature.dispose.bind(feature);\n                feature.dispose = () => {\n                    dispose();\n                    if (feature._listener) {\n                        feature._listener = undefined;\n                    }\n                };\n            }\n        }\n        return client;\n    }\n\n}\n","/********************************************************************************\n * Copyright (C) 2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { injectable, inject, named } from 'inversify';\nimport { ContributionProvider } from '@theia/core/lib/common';\nimport { LanguageClientContribution } from './language-client-contribution';\nimport { ILanguageClient } from './language-client-services';\nimport { LanguageClientProvider } from './language-client-provider';\n\n@injectable()\nexport class LanguageClientProviderImpl implements LanguageClientProvider {\n\n    @inject(ContributionProvider) @named(LanguageClientContribution)\n    private readonly contributions: ContributionProvider<LanguageClientContribution>;\n\n    async getLanguageClient(languageId: string): Promise<ILanguageClient | undefined> {\n        const contribution = this.getLanguageContribution(languageId);\n        if (contribution) {\n            return contribution.languageClient;\n        }\n    }\n\n    protected getLanguageContribution(languageId: string): LanguageClientContribution | undefined {\n        const contributions = this.contributions.getContributions();\n        if (contributions) {\n            for (const contribution of contributions) {\n                if (contribution.id === languageId) {\n                    return contribution;\n                }\n            }\n        }\n        return undefined;\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { ILanguageClient } from './language-client-services';\n\nexport const LanguageClientProvider = Symbol('LanguageClientProvider');\nexport interface LanguageClientProvider {\n    getLanguageClient(languageId: string): Promise<ILanguageClient | undefined>\n}\n","/********************************************************************************\n * Copyright (C) 2017 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport * as services from 'monaco-languageclient/lib/services';\nimport * as connection from 'monaco-languageclient/lib/connection';\nimport * as base from 'monaco-languageclient/lib/monaco-language-client';\nexport * from 'monaco-languageclient';\nexport * from '../common';\n\nexport interface Language {\n    readonly id: string;\n    readonly name: string;\n    readonly extensions: Set<string>;\n    readonly filenames: Set<string>;\n}\n\nexport interface WorkspaceSymbolProvider extends services.WorkspaceSymbolProvider {\n    resolveWorkspaceSymbol?(symbol: services.SymbolInformation, token: services.CancellationToken): Thenable<services.SymbolInformation>\n}\n\nexport const Languages = Symbol('Languages');\nexport interface Languages extends services.Languages {\n    readonly workspaceSymbolProviders?: WorkspaceSymbolProvider[];\n    readonly languages?: Language[]\n    getLanguage?(languageId: string): Language | undefined;\n}\n\nexport const Workspace = Symbol('Workspace');\nexport interface Workspace extends services.Workspace {\n    readonly ready: Promise<void>;\n}\n\nexport const Commands = Symbol('Commands');\nexport interface Commands extends services.Commands { }\n\nexport const Window = Symbol('Window');\nexport interface Window extends services.Window { }\n\nexport const IConnectionProvider = Symbol('IConnectionProvider');\nexport interface IConnectionProvider extends connection.IConnectionProvider { }\n\nexport const ILanguageClient = Symbol('ILanguageClient');\nexport interface ILanguageClient extends base.MonacoLanguageClient { }\n\nexport interface LanguageClientOptions extends base.LanguageClientOptions { }\n","/********************************************************************************\n * Copyright (C) 2019 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { injectable, inject } from 'inversify';\nimport URI from '@theia/core/lib/common/uri';\nimport { ResourceContextKey } from '@theia/core/lib/browser/resource-context-key';\nimport { Languages } from './language-client-services';\n\n@injectable()\nexport class LanguageResourceContextKey extends ResourceContextKey {\n\n    @inject(Languages)\n    protected readonly languages: Languages;\n\n    protected getLanguageId(uri: URI | undefined): string | undefined {\n        const { languages } = this.languages;\n        if (uri && languages) {\n            for (const language of languages) {\n                if (language.extensions.has(uri.path.ext)) {\n                    return language.id;\n                }\n            }\n        }\n        return undefined;\n    }\n\n}\n","/********************************************************************************\n * Copyright (C) 2017 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { injectable, inject, named } from 'inversify';\nimport { ContributionProvider, CommandContribution, CommandRegistry } from '@theia/core/lib/common';\nimport { FrontendApplication, FrontendApplicationContribution, PreferenceSchema, PreferenceSchemaProvider } from '@theia/core/lib/browser';\nimport { LanguageClientContribution } from './language-client-contribution';\n\n@injectable()\nexport class LanguagesFrontendContribution implements FrontendApplicationContribution, CommandContribution {\n\n    @inject(FrontendApplication)\n    protected readonly app: FrontendApplication;\n\n    @inject(PreferenceSchemaProvider)\n    protected preferenceSchema: PreferenceSchemaProvider;\n\n    @inject(ContributionProvider) @named(LanguageClientContribution)\n    protected readonly contributions: ContributionProvider<LanguageClientContribution>;\n\n    onStart(app: FrontendApplication): void {\n        const schema: PreferenceSchema = {\n            type: 'object',\n            properties: {}\n        };\n        for (const contribution of this.contributions.getContributions()) {\n            contribution.waitForActivation(app).then(() =>\n                contribution.activate(app)\n            );\n            schema.properties[`${contribution.id}.trace.server`] = {\n                type: 'string',\n                enum: [\n                    'off',\n                    'messages',\n                    'verbose'\n                ],\n                default: 'off',\n                description: `Enable/disable tracing communications with the ${contribution.name} language server`\n            };\n        }\n        this.preferenceSchema.setSchema(schema);\n    }\n\n    registerCommands(commands: CommandRegistry): void {\n        for (const contribution of this.contributions.getContributions()) {\n            commands.registerCommand({\n                id: `${contribution.id}.server.start`,\n                label: `${contribution.name}: Start Language Server`\n            }, {\n                execute: () => contribution.activate(this.app),\n                isEnabled: () => !contribution.running,\n                isVisible: () => !contribution.running,\n            });\n            commands.registerCommand({\n                id: `${contribution.id}.server.stop`,\n                label: `${contribution.name}: Stop Language Server`\n            }, {\n                execute: () => contribution.deactivate(),\n                isEnabled: () => contribution.running,\n                isVisible: () => contribution.running,\n            });\n            commands.registerCommand({\n                id: `${contribution.id}.server.restart`,\n                label: `${contribution.name}: Restart Language Server`\n            }, {\n                execute: () => contribution.restart(),\n                isEnabled: () => contribution.running,\n                isVisible: () => contribution.running,\n            });\n        }\n    }\n\n}\n","/********************************************************************************\n * Copyright (C) 2017 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { ContainerModule } from 'inversify';\nimport { bindContributionProvider, CommandContribution } from '@theia/core/lib/common';\nimport { ResourceContextKey } from '@theia/core/lib/browser/resource-context-key';\nimport { FrontendApplicationContribution, KeybindingContribution, QuickOpenContribution, WebSocketConnectionProvider } from '@theia/core/lib/browser';\nimport { Window } from './language-client-services';\nimport { WindowImpl } from './window-impl';\nimport { LanguageClientFactory } from './language-client-factory';\nimport { LanguagesFrontendContribution } from './languages-frontend-contribution';\nimport { LanguageClientContribution } from './language-client-contribution';\nimport { WorkspaceSymbolCommand } from './workspace-symbols';\nimport { LanguageClientProvider } from './language-client-provider';\nimport { LanguageClientProviderImpl } from './language-client-provider-impl';\nimport { LanguageContribution } from '../common';\nimport { LanguageResourceContextKey } from './language-resource-context-key';\n\nexport default new ContainerModule((bind, unbind, isBound, rebind) => {\n    bind(Window).to(WindowImpl).inSingletonScope();\n\n    bind(LanguageClientFactory).toSelf().inSingletonScope();\n    bind(LanguageContribution.Service).toDynamicValue(({ container }) =>\n        WebSocketConnectionProvider.createProxy(container, LanguageContribution.servicePath)\n    ).inSingletonScope();\n\n    bindContributionProvider(bind, LanguageClientContribution);\n    bind(LanguagesFrontendContribution).toSelf().inSingletonScope();\n    bind(FrontendApplicationContribution).toService(LanguagesFrontendContribution);\n    bind(CommandContribution).toService(LanguagesFrontendContribution);\n\n    bind(WorkspaceSymbolCommand).toSelf().inSingletonScope();\n    for (const identifier of [CommandContribution, KeybindingContribution, QuickOpenContribution]) {\n        bind(identifier).toService(WorkspaceSymbolCommand);\n    }\n\n    bind(LanguageClientProviderImpl).toSelf().inSingletonScope();\n    bind(LanguageClientProvider).toService(LanguageClientProviderImpl);\n\n    bind(LanguageResourceContextKey).toSelf().inSingletonScope();\n    rebind(ResourceContextKey).to(LanguageResourceContextKey).inSingletonScope();\n});\n","/********************************************************************************\n * Copyright (C) 2019 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { v4 } from 'uuid';\nimport {\n    Disposable,\n    ILanguageClient,\n    DocumentSelector,\n    ClientCapabilities,\n    ServerCapabilities,\n    TextDocumentFeature,\n    TextDocumentRegistrationOptions\n} from '../language-client-services';\nimport { TypeHierarchyRequest } from './typehierarchy-protocol';\n\n// NOTE: This module can be removed, or at least can be simplified once the type hierarchy will become the part of the LSP.\n// https://github.com/Microsoft/language-server-protocol/issues/582\n// https://github.com/Microsoft/vscode-languageserver-node/pull/346#discussion_r221659062\n\n/**\n * Text document feature for handling super- and subtype hierarchies through the LSP.\n */\nexport class TypeHierarchyFeature extends TextDocumentFeature<{}, TextDocumentRegistrationOptions> {\n\n    constructor(readonly client: ILanguageClient) {\n        super(client, TypeHierarchyRequest.type);\n    }\n\n    fillClientCapabilities(capabilities: ClientCapabilities): void {\n        if (!capabilities.textDocument) {\n            capabilities.textDocument = {};\n        }\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        (capabilities.textDocument as any).typeHierarchy = {\n            dynamicRegistration: true\n        };\n    }\n\n    initialize(capabilities: ServerCapabilities, documentSelector: DocumentSelector): void {\n        if (!documentSelector) {\n            return;\n        }\n        const capabilitiesExt: ServerCapabilities & { typeHierarchyProvider?: boolean } = capabilities;\n        if (capabilitiesExt.typeHierarchyProvider) {\n            const id = v4();\n            this.register(this.messages, {\n                id,\n                registerOptions: Object.assign({}, { documentSelector: documentSelector }, capabilitiesExt.typeHierarchyProvider)\n            });\n        }\n    }\n\n    protected registerLanguageProvider(): Disposable {\n        return Disposable.create(() => { /* NOOP */ });\n    }\n\n}\n","/********************************************************************************\n * Copyright (C) 2019 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { RequestType } from '../language-client-services';\nimport { SymbolKind, Range } from 'vscode-languageserver-types';\nimport { TextDocumentPositionParams, TextDocumentRegistrationOptions, StaticRegistrationOptions } from 'vscode-languageserver';\n\n// NOTE: This module can be removed, once the type hierarchy will become the part of the LSP.\n// https://github.com/Microsoft/language-server-protocol/issues/582\n// https://github.com/Microsoft/vscode-languageserver-node/pull/346#discussion_r221659062\n\n/**\n * Client capabilities specific to the type hierarchy feature.\n */\nexport interface TypeHierarchyCapabilities {\n\n    /**\n     * The text document client capabilities.\n     */\n    textDocument?: {\n\n        /**\n         * Capabilities specific to the `textDocument/typeHierarchy`.\n         */\n        typeHierarchy?: {\n\n            /**\n             * Whether implementation supports dynamic registration. If this is set to `true`\n             * the client supports the new `(TextDocumentRegistrationOptions & StaticRegistrationOptions)`\n             * return value for the corresponding server capability as well.\n             */\n            dynamicRegistration?: boolean;\n\n        }\n\n    }\n\n}\n\n/**\n * Type hierarchy language server capability.\n */\nexport interface TypeHierarchyServerCapabilities {\n\n    /**\n     * Server capability for calculating super- and subtype hierarchies.\n     */\n    typeHierarchyProvider?: boolean | (TextDocumentRegistrationOptions & StaticRegistrationOptions);\n\n}\n\n/**\n * The type hierarchy params is an extension of the `TextDocumentPositionParams` with optional properties\n * which can be used to eagerly resolve the item when requesting from the server.\n */\nexport interface TypeHierarchyParams extends TextDocumentPositionParams {\n\n    /**\n     * The hierarchy levels to resolve. `0` indicates no level. When not defined, it is treated as `0`.\n     */\n    resolve?: number;\n\n    /**\n     * The direction of the hierarchy levels to resolve.\n     */\n    direction?: TypeHierarchyDirection\n\n}\n\nexport namespace TypeHierarchyDirection {\n\n    /**\n     * Flag for retrieving/resolving the subtypes.\n     */\n    export const Children = 0;\n\n    /**\n     * Flag to use when retrieving/resolving the supertypes.\n     */\n    export const Parents = 1;\n\n    /**\n     * Flag for resolving both the super- and subtypes.\n     */\n    export const Both = 2;\n\n}\nexport type TypeHierarchyDirection = 0 | 1 | 2;\n\n/**\n * The `textDocument/typeHierarchy` request is sent from the client to the server to retrieve the type hierarchy\n * items from a given position of a text document. Can resolve the parentage information on demand.\n * If no item can be retrieved for a given text document position, returns with `null`.\n */\nexport namespace TypeHierarchyRequest {\n    export const type = new RequestType<TypeHierarchyParams, TypeHierarchyItem | null, void, void>('textDocument/typeHierarchy');\n}\n\n/**\n * Parameters for the `typeHierarchy/resolve` request.\n */\nexport interface ResolveTypeHierarchyItemParams {\n\n    /**\n     * The item to resolve.\n     */\n    item: TypeHierarchyItem;\n\n    /**\n     * The hierarchy levels to resolve. `0` indicates no level.\n     */\n    resolve: number;\n\n    /**\n     * The direction of the hierarchy levels to resolve.\n     */\n    direction: TypeHierarchyDirection;\n}\n\n/**\n * The `typeHierarchy/resolve` request is sent from the client to the server to resolve a type hierarchy\n * item by resolving sub- and supertype information.\n */\nexport namespace ResolveTypeHierarchyRequest {\n    export const type = new RequestType<ResolveTypeHierarchyItemParams, TypeHierarchyItem | null, void, void>('typeHierarchy/resolve');\n}\n\nexport interface TypeHierarchyItem {\n\n    /**\n     * The human readable name of the hierarchy item.\n     */\n    name: string;\n\n    /**\n     * Optional detail for the hierarchy item. It can be, for instance, the signature of a function or method.\n     */\n    detail?: string;\n\n    /**\n     * The kind of the hierarchy item. For instance, class or interface.\n     */\n    kind: SymbolKind;\n\n    /**\n     * `true` if the hierarchy item is deprecated. Otherwise, `false`. It is `false` by default.\n     */\n    deprecated?: boolean;\n\n    /**\n     * The URI of the text document where this type hierarchy item belongs to.\n     */\n    uri: string;\n\n    /**\n     * The range enclosing this type hierarchy item not including leading/trailing whitespace but everything else\n     * like comments. This information is typically used to determine if the clients cursor is inside the type\n     * hierarchy item to reveal in the symbol in the UI.\n     */\n    range: Range;\n\n    /**\n     * The range that should be selected and revealed when this type hierarchy item is being picked, e.g the name\n     * of a function. Must be contained by the `range`.\n     */\n    selectionRange: Range;\n\n    /**\n     * If this type hierarchy item is resolved, it contains the direct parents. Could be empty if the item does\n     * not have any direct parents. If not defined, the parents have not been resolved yet.\n     */\n    parents?: TypeHierarchyItem[];\n\n    /**\n     * If this type hierarchy item is resolved, it contains the direct children of the current item. Could be\n     * empty if the item does not have any descendants. If not defined, the children have not been resolved.\n     */\n    children?: TypeHierarchyItem[];\n\n    /**\n     * An optional data field can be used to identify a type hierarchy item in a resolve request.\n     */\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    data?: any;\n}\n","/********************************************************************************\n * Copyright (C) 2017 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { injectable, inject } from 'inversify';\nimport { MessageService } from '@theia/core/lib/common';\nimport { Window, OutputChannel, MessageActionItem, MessageType } from 'monaco-languageclient/lib/services';\nimport { OutputChannelManager } from '@theia/output/lib/common/output-channel';\nimport { OutputContribution } from '@theia/output/lib/browser/output-contribution';\n\n@injectable()\nexport class WindowImpl implements Window {\n\n    @inject(MessageService) protected readonly messageService: MessageService;\n    @inject(OutputChannelManager) protected readonly outputChannelManager: OutputChannelManager;\n    @inject(OutputContribution) protected readonly outputContribution: OutputContribution;\n\n    showMessage<T extends MessageActionItem>(type: MessageType, message: string, ...actions: T[]): Thenable<T | undefined> {\n        const originalActions = new Map((actions || []).map(action => [action.title, action] as [string, T]));\n        const actionTitles = (actions || []).map(action => action.title);\n        const mapActionType: (result: string | undefined) => (T | undefined) = result => {\n            if (!!result) {\n                return originalActions.get(result);\n            }\n            return undefined;\n        };\n        if (type === MessageType.Error) {\n            return this.messageService.error(message, ...actionTitles).then(mapActionType);\n        }\n        if (type === MessageType.Warning) {\n            return this.messageService.warn(message, ...actionTitles).then(mapActionType);\n        }\n        if (type === MessageType.Info) {\n            return this.messageService.info(message, ...actionTitles).then(mapActionType);\n        }\n        if (type === MessageType.Log) {\n            return this.messageService.log(message, ...actionTitles).then(mapActionType);\n        }\n        return Promise.resolve(undefined);\n    }\n\n    createOutputChannel(name: string): OutputChannel {\n        const outputChannel = this.outputChannelManager.getChannel(name);\n        return {\n            append: outputChannel.append.bind(outputChannel),\n            appendLine: outputChannel.appendLine.bind(outputChannel),\n            show: async (preserveFocus?: boolean) => {\n                const options = Object.assign({\n                    preserveFocus: false,\n                }, { preserveFocus });\n                const activate = !options.preserveFocus;\n                const reveal = options.preserveFocus;\n                await this.outputContribution.openView({ activate, reveal });\n                outputChannel.setVisibility(true);\n            },\n            dispose: () => {\n                this.outputChannelManager.deleteChannel(outputChannel.name);\n            }\n        };\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2017 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { injectable, inject } from 'inversify';\nimport { environment } from '@theia/application-package/lib/environment';\nimport {\n    PrefixQuickOpenService, QuickOpenModel, QuickOpenItem, OpenerService,\n    QuickOpenMode, KeybindingContribution, KeybindingRegistry, QuickOpenHandler, QuickOpenOptions, QuickOpenContribution, QuickOpenHandlerRegistry\n} from '@theia/core/lib/browser';\nimport { Languages, WorkspaceSymbolParams, SymbolInformation, WorkspaceSymbolProvider, CancellationToken } from './language-client-services';\nimport { CancellationTokenSource, CommandRegistry, CommandHandler, Command, SelectionService } from '@theia/core';\nimport URI from '@theia/core/lib/common/uri';\nimport { CommandContribution } from '@theia/core/lib/common';\nimport { Range, Position } from 'vscode-languageserver-types';\n\n@injectable()\nexport class WorkspaceSymbolCommand implements QuickOpenModel, CommandContribution, KeybindingContribution, CommandHandler, QuickOpenHandler, QuickOpenContribution {\n\n    readonly prefix = '#';\n    readonly description = 'Go to Symbol in Workspace';\n\n    private command: Command = {\n        id: 'languages.workspace.symbol',\n        label: 'Open Workspace Symbol...'\n    };\n\n    constructor(@inject(Languages) protected languages: Languages,\n        @inject(OpenerService) protected readonly openerService: OpenerService,\n        @inject(PrefixQuickOpenService) protected quickOpenService: PrefixQuickOpenService,\n        @inject(SelectionService) protected selectionService: SelectionService) { }\n\n    isEnabled(): boolean {\n        return this.languages.workspaceSymbolProviders !== undefined;\n    }\n\n    execute(): void {\n        this.quickOpenService.open(this.prefix);\n    }\n\n    getModel(): QuickOpenModel {\n        return this;\n    }\n\n    getOptions(): QuickOpenOptions {\n        return {\n            fuzzyMatchLabel: true,\n            showItemsWithoutHighlight: true,\n            onClose: () => {\n                this.cancellationSource.cancel();\n            }\n        };\n    }\n\n    registerCommands(commands: CommandRegistry): void {\n        commands.registerCommand(this.command, this);\n    }\n\n    private isElectron(): boolean {\n        return environment.electron.is();\n    }\n\n    registerKeybindings(keybindings: KeybindingRegistry): void {\n        keybindings.registerKeybinding({\n            command: this.command.id,\n            keybinding: this.isElectron() ? 'ctrlcmd+t' : 'ctrlcmd+o',\n        });\n    }\n\n    registerQuickOpenHandlers(handlers: QuickOpenHandlerRegistry): void {\n        handlers.registerHandler(this);\n    }\n\n    private cancellationSource = new CancellationTokenSource();\n\n    async onType(lookFor: string, acceptor: (items: QuickOpenItem[]) => void): Promise<void> {\n        if (this.languages.workspaceSymbolProviders) {\n            this.cancellationSource.cancel();\n            const newCancellationSource = new CancellationTokenSource();\n            this.cancellationSource = newCancellationSource;\n\n            const param: WorkspaceSymbolParams = {\n                query: lookFor\n            };\n\n            const items: QuickOpenItem[] = [];\n\n            const workspaceProviderPromises = [];\n            for (const provider of this.languages.workspaceSymbolProviders) {\n                workspaceProviderPromises.push((async () => {\n                    const symbols = await provider.provideWorkspaceSymbols(param, newCancellationSource.token);\n                    if (symbols && !newCancellationSource.token.isCancellationRequested) {\n                        for (const symbol of symbols) {\n                            items.push(this.createItem(symbol, provider, newCancellationSource.token));\n                        }\n                        acceptor(items);\n                    }\n                    return symbols;\n                })());\n            }\n            Promise.all(workspaceProviderPromises.map(p => p.then(sym => sym, _ => undefined))).then(symbols => {\n                const filteredSymbols = symbols.filter(el => el && el.length !== 0);\n                if (filteredSymbols.length === 0) {\n                    items.push(new QuickOpenItem({\n                        label: lookFor.length === 0 ? 'Type to search for symbols' : 'No symbols matching',\n                        run: () => false\n                    }));\n                    acceptor(items);\n                }\n            }).catch();\n        }\n    }\n\n    protected createItem(sym: SymbolInformation, provider: WorkspaceSymbolProvider, token: CancellationToken): QuickOpenItem {\n        const uri = new URI(sym.location.uri);\n        const kind = SymbolKind[sym.kind];\n        const icon = (kind) ? SymbolKind[sym.kind].toLowerCase() : 'unknown';\n        let parent = sym.containerName;\n        if (parent) {\n            parent += ' - ';\n        }\n        parent = (parent || '') + uri.displayName;\n        return new SimpleOpenItem(sym.name, icon, parent, uri.toString(), () => {\n\n            if (provider.resolveWorkspaceSymbol) {\n                provider.resolveWorkspaceSymbol(sym, token).then(resolvedSymbol => {\n                    if (resolvedSymbol) {\n                        this.openURL(uri, resolvedSymbol.location.range.start, resolvedSymbol.location.range.end);\n                    } else {\n                        // the symbol didn't resolve -> use given symbol\n                        this.openURL(uri, sym.location.range.start, sym.location.range.end);\n                    }\n                });\n            } else {\n                // resolveWorkspaceSymbol wasn't specified\n                this.openURL(uri, sym.location.range.start, sym.location.range.end);\n            }\n        });\n    }\n\n    private openURL(uri: URI, start: Position, end: Position): void {\n        this.openerService.getOpener(uri).then(opener => opener.open(uri, {\n            selection: Range.create(start, end)\n        }));\n    }\n}\n\nclass SimpleOpenItem extends QuickOpenItem {\n\n    constructor(\n        protected readonly label: string,\n        protected readonly icon: string,\n        protected readonly parent: string,\n        protected readonly toolTip: string,\n        protected readonly onOpen: () => void,\n        protected readonly onSelect?: () => void\n    ) {\n        super();\n    }\n\n    getLabel(): string {\n        return this.label;\n    }\n\n    isHidden(): boolean {\n        return false;\n    }\n\n    getTooltip(): string {\n        return this.toolTip;\n    }\n\n    getDescription(): string {\n        return this.parent;\n    }\n\n    getIconClass(): string {\n        return this.icon;\n    }\n\n    run(mode: QuickOpenMode): boolean {\n        if (mode !== QuickOpenMode.OPEN) {\n            if (!this.onSelect) {\n                return false;\n            }\n            this.onSelect();\n            return true;\n        }\n        this.onOpen();\n        return true;\n    }\n}\n\nenum SymbolKind {\n    File = 1,\n    Module = 2,\n    Namespace = 3,\n    Package = 4,\n    Class = 5,\n    Method = 6,\n    Property = 7,\n    Field = 8,\n    Constructor = 9,\n    Enum = 10,\n    Interface = 11,\n    Function = 12,\n    Variable = 13,\n    Constant = 14,\n    String = 15,\n    Number = 16,\n    Boolean = 17,\n    Array = 18,\n    Object = 19,\n    Key = 20,\n    Null = 21,\n    EnumMember = 22,\n    Struct = 23,\n    Event = 24,\n    Operator = 25,\n    TypeParameter = 26\n}\n","/********************************************************************************\n * Copyright (C) 2017 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nexport * from './language-contribution';\n","/********************************************************************************\n * Copyright (C) 2017 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nexport interface LanguageContribution {\n    readonly id: string;\n    readonly name: string;\n}\n\nexport namespace LanguageContribution {\n    export const servicePath = '/services/languages';\n    export function getPath(contribution: LanguageContribution, sessionId: string = ':id'): string {\n        return servicePath + '/' + contribution.id + '/' + sessionId;\n    }\n    export const Service = Symbol('LanguageContributionService');\n    export interface Service {\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        create(contributionId: string, parameters: any): Promise<string>;\n        destroy(sessionId: string): Promise<void>;\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2017 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nexport * from './workspace-commands';\nexport * from './workspace-service';\nexport * from './workspace-frontend-contribution';\nexport * from './workspace-frontend-module';\nexport * from './workspace-preferences';\n","module.exports = function (glob, opts) {\n  if (typeof glob !== 'string') {\n    throw new TypeError('Expected a string');\n  }\n\n  var str = String(glob);\n\n  // The regexp we are building, as a string.\n  var reStr = \"\";\n\n  // Whether we are matching so called \"extended\" globs (like bash) and should\n  // support single character matching, matching ranges of characters, group\n  // matching, etc.\n  var extended = opts ? !!opts.extended : false;\n\n  // When globstar is _false_ (default), '/foo/*' is translated a regexp like\n  // '^\\/foo\\/.*$' which will match any string beginning with '/foo/'\n  // When globstar is _true_, '/foo/*' is translated to regexp like\n  // '^\\/foo\\/[^/]*$' which will match any string beginning with '/foo/' BUT\n  // which does not have a '/' to the right of it.\n  // E.g. with '/foo/*' these will match: '/foo/bar', '/foo/bar.txt' but\n  // these will not '/foo/bar/baz', '/foo/bar/baz.txt'\n  // Lastely, when globstar is _true_, '/foo/**' is equivelant to '/foo/*' when\n  // globstar is _false_\n  var globstar = opts ? !!opts.globstar : false;\n\n  // If we are doing extended matching, this boolean is true when we are inside\n  // a group (eg {*.html,*.js}), and false otherwise.\n  var inGroup = false;\n\n  // RegExp flags (eg \"i\" ) to pass in to RegExp constructor.\n  var flags = opts && typeof( opts.flags ) === \"string\" ? opts.flags : \"\";\n\n  var c;\n  for (var i = 0, len = str.length; i < len; i++) {\n    c = str[i];\n\n    switch (c) {\n    case \"\\\\\":\n    case \"/\":\n    case \"$\":\n    case \"^\":\n    case \"+\":\n    case \".\":\n    case \"(\":\n    case \")\":\n    case \"=\":\n    case \"!\":\n    case \"|\":\n      reStr += \"\\\\\" + c;\n      break;\n\n    case \"?\":\n      if (extended) {\n        reStr += \".\";\n\t    break;\n      }\n\n    case \"[\":\n    case \"]\":\n      if (extended) {\n        reStr += c;\n\t    break;\n      }\n\n    case \"{\":\n      if (extended) {\n        inGroup = true;\n\t    reStr += \"(\";\n\t    break;\n      }\n\n    case \"}\":\n      if (extended) {\n        inGroup = false;\n\t    reStr += \")\";\n\t    break;\n      }\n\n    case \",\":\n      if (inGroup) {\n        reStr += \"|\";\n\t    break;\n      }\n      reStr += \"\\\\\" + c;\n      break;\n\n    case \"*\":\n      // Move over all consecutive \"*\"'s.\n      // Also store the previous and next characters\n      var prevChar = str[i - 1];\n      var starCount = 1;\n      while(str[i + 1] === \"*\") {\n        starCount++;\n        i++;\n      }\n      var nextChar = str[i + 1];\n\n      if (!globstar) {\n        // globstar is disabled, so treat any number of \"*\" as one\n        reStr += \".*\";\n      } else {\n        // globstar is enabled, so determine if this is a globstar segment\n        var isGlobstar = starCount > 1                      // multiple \"*\"'s\n          && (prevChar === \"/\" || prevChar === undefined)   // from the start of the segment\n          && (nextChar === \"/\" || nextChar === undefined)   // to the end of the segment\n\n        if (isGlobstar) {\n          // it's a globstar, so match zero or more path segments\n          reStr += \"(?:[^/]*(?:\\/|$))*\";\n          i++; // move over the \"/\"\n        } else {\n          // it's not a globstar, so only match one path segment\n          reStr += \"[^/]*\";\n        }\n      }\n      break;\n\n    default:\n      reStr += c;\n    }\n  }\n\n  // When regexp 'g' flag is specified don't\n  // constrain the regular expression with ^ & $\n  if (!flags || !~flags.indexOf('g')) {\n    reStr = \"^\" + reStr + \"$\";\n  }\n\n  return new RegExp(reStr, flags);\n};\n","/* --------------------------------------------------------------------------------------------\n * Copyright (c) 2018 TypeFox GmbH (http://www.typefox.io). All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\n'use strict';\n\nimport {\n    Message, MessageType as RPCMessageType,\n    RequestType, RequestType0, RequestHandler, RequestHandler0, GenericRequestHandler,\n    NotificationType, NotificationType0,\n    NotificationHandler, NotificationHandler0, GenericNotificationHandler,\n    Trace, Tracer, CancellationToken, MessageConnection\n} from 'vscode-jsonrpc';\n\nimport {\n    InitializeRequest, InitializeParams, InitializeResult,\n    ShutdownRequest, ExitNotification,\n    LogMessageNotification, LogMessageParams,\n    ShowMessageNotification, ShowMessageParams,\n    TelemetryEventNotification,\n    DidChangeConfigurationNotification, DidChangeConfigurationParams,\n    DidOpenTextDocumentNotification, DidOpenTextDocumentParams,\n    DidChangeTextDocumentNotification, DidChangeTextDocumentParams,\n    DidCloseTextDocumentNotification, DidCloseTextDocumentParams,\n    DidSaveTextDocumentNotification, DidSaveTextDocumentParams,\n    DidChangeWatchedFilesNotification, DidChangeWatchedFilesParams,\n    PublishDiagnosticsNotification, PublishDiagnosticsParams,\n} from 'vscode-languageserver-protocol/lib/main';\n\nimport * as Is from 'vscode-languageserver-protocol/lib/utils/is';\n\nimport { OutputChannel } from \"./services\";\n\nexport interface IConnection {\n\n    listen(): void;\n\n    sendRequest<R, E, RO>(type: RequestType0<R, E, RO>, token?: CancellationToken): Thenable<R>;\n    sendRequest<P, R, E, RO>(type: RequestType<P, R, E, RO>, params: P, token?: CancellationToken): Thenable<R>;\n    sendRequest<R>(method: string, token?: CancellationToken): Thenable<R>;\n    sendRequest<R>(method: string, param: any, token?: CancellationToken): Thenable<R>;\n    sendRequest<R>(type: string | RPCMessageType, ...params: any[]): Thenable<R>;\n\n    onRequest<R, E, RO>(type: RequestType0<R, E, RO>, handler: RequestHandler0<R, E>): void;\n    onRequest<P, R, E, RO>(type: RequestType<P, R, E, RO>, handler: RequestHandler<P, R, E>): void;\n    onRequest<R, E>(method: string, handler: GenericRequestHandler<R, E>): void;\n    onRequest<R, E>(method: string | RPCMessageType, handler: GenericRequestHandler<R, E>): void;\n\n    sendNotification<RO>(type: NotificationType0<RO>): void;\n    sendNotification<P, RO>(type: NotificationType<P, RO>, params?: P): void;\n    sendNotification(method: string): void;\n    sendNotification(method: string, params: any): void;\n    sendNotification(method: string | RPCMessageType, params?: any): void;\n\n    onNotification<RO>(type: NotificationType0<RO>, handler: NotificationHandler0): void;\n    onNotification<P, RO>(type: NotificationType<P, RO>, handler: NotificationHandler<P>): void;\n    onNotification(method: string, handler: GenericNotificationHandler): void;\n    onNotification(method: string | RPCMessageType, handler: GenericNotificationHandler): void;\n\n    trace(value: Trace, tracer: Tracer, sendNotification?: boolean): void;\n\n    initialize(params: InitializeParams): Thenable<InitializeResult>;\n    shutdown(): Thenable<void>;\n    exit(): void;\n\n    onLogMessage(handle: NotificationHandler<LogMessageParams>): void;\n    onShowMessage(handler: NotificationHandler<ShowMessageParams>): void;\n    onTelemetry(handler: NotificationHandler<any>): void;\n\n    didChangeConfiguration(params: DidChangeConfigurationParams): void;\n    didChangeWatchedFiles(params: DidChangeWatchedFilesParams): void;\n\n    didOpenTextDocument(params: DidOpenTextDocumentParams): void;\n    didChangeTextDocument(params: DidChangeTextDocumentParams): void;\n    didCloseTextDocument(params: DidCloseTextDocumentParams): void;\n    didSaveTextDocument(params: DidSaveTextDocumentParams): void;\n    onDiagnostics(handler: NotificationHandler<PublishDiagnosticsParams>): void;\n\n    dispose(): void;\n}\n\nexport interface ConnectionErrorHandler {\n    (error: Error, message: Message | undefined, count: number | undefined): void;\n}\nexport interface ConnectionCloseHandler {\n    (): void;\n}\nexport interface IConnectionProvider {\n    get(errorHandler: ConnectionErrorHandler, closeHandler: ConnectionCloseHandler, outputChannel: OutputChannel | undefined): Thenable<IConnection>;\n}\nexport function createConnection(connection: MessageConnection, errorHandler: ConnectionErrorHandler, closeHandler: ConnectionCloseHandler): IConnection {\n    connection.onError((data) => { errorHandler(data[0], data[1], data[2]) });\n    connection.onClose(closeHandler);\n    return {\n\n        listen: (): void => connection.listen(),\n\n        sendRequest: <R>(type: string | RPCMessageType, ...params: any[]): Thenable<R> => connection.sendRequest(Is.string(type) ? type : type.method, ...params),\n        onRequest: <R, E>(type: string | RPCMessageType, handler: GenericRequestHandler<R, E>): void => connection.onRequest(Is.string(type) ? type : type.method, handler),\n\n        sendNotification: (type: string | RPCMessageType, params?: any): void => connection.sendNotification(Is.string(type) ? type : type.method, params),\n        onNotification: (type: string | RPCMessageType, handler: GenericNotificationHandler): void => connection.onNotification(Is.string(type) ? type : type.method, handler),\n\n        trace: (value: Trace, tracer: Tracer, sendNotification: boolean = false): void => connection.trace(value, tracer, sendNotification),\n\n        initialize: (params: InitializeParams) => connection.sendRequest(InitializeRequest.type, params),\n        shutdown: () => connection.sendRequest(ShutdownRequest.type, undefined),\n        exit: () => connection.sendNotification(ExitNotification.type),\n\n        onLogMessage: (handler: NotificationHandler<LogMessageParams>) => connection.onNotification(LogMessageNotification.type, handler),\n        onShowMessage: (handler: NotificationHandler<ShowMessageParams>) => connection.onNotification(ShowMessageNotification.type, handler),\n        onTelemetry: (handler: NotificationHandler<any>) => connection.onNotification(TelemetryEventNotification.type, handler),\n\n        didChangeConfiguration: (params: DidChangeConfigurationParams) => connection.sendNotification(DidChangeConfigurationNotification.type, params),\n        didChangeWatchedFiles: (params: DidChangeWatchedFilesParams) => connection.sendNotification(DidChangeWatchedFilesNotification.type, params),\n\n        didOpenTextDocument: (params: DidOpenTextDocumentParams) => connection.sendNotification(DidOpenTextDocumentNotification.type, params),\n        didChangeTextDocument: (params: DidChangeTextDocumentParams) => connection.sendNotification(DidChangeTextDocumentNotification.type, params),\n        didCloseTextDocument: (params: DidCloseTextDocumentParams) => connection.sendNotification(DidCloseTextDocumentNotification.type, params),\n        didSaveTextDocument: (params: DidSaveTextDocumentParams) => connection.sendNotification(DidSaveTextDocumentNotification.type, params),\n\n        onDiagnostics: (handler: NotificationHandler<PublishDiagnosticsParams>) => connection.onNotification(PublishDiagnosticsNotification.type, handler),\n\n        dispose: () => connection.dispose()\n    };\n}","/* --------------------------------------------------------------------------------------------\n * Copyright (c) 2018 TypeFox GmbH (http://www.typefox.io). All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nimport { MessageActionItem, MessageType, Window, OutputChannel } from './services';\n\nexport class ConsoleWindow implements Window {\n    protected readonly channels = new Map<string, OutputChannel>();\n    showMessage<T extends MessageActionItem>(type: MessageType, message: string, ...actions: T[]): Thenable<T | undefined> {\n        if (type === MessageType.Error) {\n            console.error(message);\n        }\n        if (type === MessageType.Warning) {\n            console.warn(message);\n        }\n        if (type === MessageType.Info) {\n            console.info(message);\n        }\n        if (type === MessageType.Log) {\n            console.log(message);\n        }\n        return Promise.resolve(undefined);\n    }\n    createOutputChannel(name: string): OutputChannel {\n        const existing = this.channels.get(name);\n        if (existing) {\n            return existing;\n        }\n        const channel: OutputChannel = {\n            append(value: string): void {\n                console.log(name + ': ' + value);\n            },\n            appendLine(line: string): void {\n                console.log(name + ': ' + line);\n            },\n            show(): void {\n                // no-op\n            },\n            dispose(): void {\n                // no-op\n            }\n        }\n        this.channels.set(name, channel)\n        return channel;\n    }\n}","/* --------------------------------------------------------------------------------------------\n * Copyright (c) 2018 TypeFox GmbH (http://www.typefox.io). All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nimport { Disposable } from './services';\n\nexport {\n    Disposable\n}\n\nexport class DisposableCollection implements Disposable {\n    protected readonly disposables: Disposable[] = [];\n\n    dispose(): void {\n        while (this.disposables.length !== 0) {\n            this.disposables.pop()!.dispose();\n        }\n    }\n\n    push(disposable: Disposable): Disposable {\n        const disposables = this.disposables;\n        disposables.push(disposable);\n        return {\n            dispose(): void {\n                const index = disposables.indexOf(disposable);\n                if (index !== -1) {\n                    disposables.splice(index, 1);\n                }\n            }\n        }\n    }\n\n}","/* --------------------------------------------------------------------------------------------\n * Copyright (c) 2018 TypeFox GmbH (http://www.typefox.io). All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nexport * from './disposable';\nexport * from './services';\nexport * from './connection';\nexport * from './monaco-language-client';\nexport * from './monaco-commands';\nexport * from './console-window';\nexport * from './monaco-languages';\nexport * from './monaco-workspace';\nexport * from './monaco-services';\nexport * from './monaco-converter';\n","/* --------------------------------------------------------------------------------------------\n * Copyright (c) 2018 TypeFox GmbH (http://www.typefox.io). All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nimport { Commands, Disposable } from './services';\n\nexport class MonacoCommands implements Commands {\n\n    public constructor(protected readonly editor: monaco.editor.IStandaloneCodeEditor) { }\n\n    public registerCommand(command: string, callback: (...args: any[]) => any, thisArg?: any): Disposable {\n        return this.editor._commandService.addCommand({\n            id: command,\n            handler: (_accessor: any, ...args: any[]) => callback(...args)\n        });\n    }\n}\n","/* --------------------------------------------------------------------------------------------\n * Copyright (c) 2018 TypeFox GmbH (http://www.typefox.io). All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nimport * as ls from 'vscode-languageserver-protocol';\nimport * as Is from 'vscode-languageserver-protocol/lib/utils/is';\nimport {\n    CodeActionParams, CodeLensParams,\n    DocumentFormattingParams, DocumentOnTypeFormattingParams,\n    DocumentRangeFormattingParams, ReferenceParams,\n    RenameParams, TextDocumentPositionParams,\n    Position, TextDocumentIdentifier, CompletionItem, CompletionList,\n    CompletionParams, CompletionContext, CompletionTriggerKind,\n    InsertTextFormat, Range, Diagnostic, CompletionItemKind,\n    Hover, SignatureHelp, SignatureInformation, ParameterInformation,\n    Definition, Location, DocumentHighlight, DocumentHighlightKind,\n    SymbolInformation, DocumentSymbolParams, CodeActionContext, DiagnosticSeverity,\n    Command, CodeLens, FormattingOptions, TextEdit, WorkspaceEdit, DocumentLinkParams, DocumentLink,\n    MarkedString, MarkupContent, ColorInformation, ColorPresentation, FoldingRange, FoldingRangeKind,\n    DiagnosticRelatedInformation, MarkupKind, SymbolKind, DocumentSymbol, CodeAction\n} from './services';\nimport IReadOnlyModel = monaco.editor.IReadOnlyModel;\n\nexport type RecursivePartial<T> = {\n    [P in keyof T]?: RecursivePartial<T[P]>;\n};\n\nexport interface ProtocolDocumentLink extends monaco.languages.ILink {\n    data?: any;\n}\nexport namespace ProtocolDocumentLink {\n    export function is(item: any): item is ProtocolDocumentLink {\n        return !!item && 'data' in item;\n    }\n}\n\nexport interface ProtocolCodeLens extends monaco.languages.ICodeLensSymbol {\n    data?: any;\n}\nexport namespace ProtocolCodeLens {\n    export function is(item: any): item is ProtocolCodeLens {\n        return !!item && 'data' in item;\n    }\n}\n\nexport interface ProtocolCompletionItem extends monaco.languages.CompletionItem {\n    data?: any;\n    fromEdit?: boolean;\n    documentationFormat?: string;\n    originalItemKind?: CompletionItemKind;\n    deprecated?: boolean;\n}\nexport namespace ProtocolCompletionItem {\n    export function is(item: any): item is ProtocolCompletionItem {\n        return !!item && 'data' in item;\n    }\n}\n\nexport class MonacoToProtocolConverter {\n    asPosition(lineNumber: undefined | null, column: undefined | null): {};\n    asPosition(lineNumber: number, column: undefined | null): Pick<Position, 'line'>;\n    asPosition(lineNumber: undefined | null, column: number): Pick<Position, 'character'>;\n    asPosition(lineNumber: number, column: number): Position;\n    asPosition(lineNumber: number | undefined | null, column: number | undefined | null): Partial<Position>;\n    asPosition(lineNumber: number | undefined | null, column: number | undefined | null): Partial<Position> {\n        const line = lineNumber === undefined || lineNumber === null ? undefined : lineNumber - 1;\n        const character = column === undefined || column === null ? undefined : column - 1;\n        return {\n            line, character\n        };\n    }\n\n    asRange(range: null): null;\n    asRange(range: undefined): undefined;\n    asRange(range: monaco.IRange): Range;\n    asRange(range: monaco.IRange | undefined): Range | undefined;\n    asRange(range: monaco.IRange | null): Range | null;\n    asRange(range: Partial<monaco.IRange>): RecursivePartial<Range>;\n    asRange(range: Partial<monaco.IRange> | undefined): RecursivePartial<Range> | undefined;\n    asRange(range: Partial<monaco.IRange> | null): RecursivePartial<Range> | null;\n    asRange(range: Partial<monaco.IRange> | undefined | null): RecursivePartial<Range> | undefined | null {\n        if (range === undefined) {\n            return undefined;\n        }\n        if (range === null) {\n            return null;\n        }\n        const start = this.asPosition(range.startLineNumber, range.startColumn);\n        const end = this.asPosition(range.endLineNumber, range.endColumn);\n        return {\n            start, end\n        };\n    }\n\n    asTextDocumentIdentifier(model: IReadOnlyModel): TextDocumentIdentifier {\n        return {\n            uri: model.uri.toString()\n        }\n    }\n\n    asTextDocumentPositionParams(model: IReadOnlyModel, position: monaco.Position): TextDocumentPositionParams {\n        return {\n            textDocument: this.asTextDocumentIdentifier(model),\n            position: this.asPosition(position.lineNumber, position.column)\n        };\n    }\n\n    asCompletionParams(model: IReadOnlyModel, position: monaco.Position, context: monaco.languages.CompletionContext): CompletionParams {\n        return Object.assign(this.asTextDocumentPositionParams(model, position), {\n            context: this.asCompletionContext(context)\n        });\n    }\n\n    asCompletionContext(context: monaco.languages.CompletionContext): CompletionContext {\n        return {\n            triggerKind: this.asTriggerKind(context.triggerKind),\n            triggerCharacter: context.triggerCharacter\n        }\n    }\n\n    asTriggerKind(triggerKind: monaco.languages.CompletionTriggerKind): CompletionTriggerKind {\n        switch (triggerKind) {\n            case monaco.languages.CompletionTriggerKind.TriggerCharacter:\n                return CompletionTriggerKind.TriggerCharacter;\n            case monaco.languages.CompletionTriggerKind.TriggerForIncompleteCompletions:\n                return CompletionTriggerKind.TriggerForIncompleteCompletions;\n            default:\n                return CompletionTriggerKind.Invoked;\n        }\n    }\n\n    asCompletionItem(item: monaco.languages.CompletionItem): CompletionItem {\n        const result: CompletionItem = { label: item.label };\n        const protocolItem = ProtocolCompletionItem.is(item) ? item : undefined;\n        if (item.detail) { result.detail = item.detail; }\n        // We only send items back we created. So this can't be something else than\n        // a string right now.\n        if (item.documentation) {\n            if (!protocolItem || !protocolItem.documentationFormat) {\n                result.documentation = item.documentation as string;\n            } else {\n                result.documentation = this.asDocumentation(protocolItem.documentationFormat, item.documentation);\n            }\n        }\n        if (item.filterText) { result.filterText = item.filterText; }\n        this.fillPrimaryInsertText(result, item as ProtocolCompletionItem);\n        if (Is.number(item.kind)) {\n            result.kind = this.asCompletionItemKind(item.kind, protocolItem && protocolItem.originalItemKind);\n        }\n        if (item.sortText) { result.sortText = item.sortText; }\n        if (item.additionalTextEdits) { result.additionalTextEdits = this.asTextEdits(item.additionalTextEdits); }\n        if (item.command) { result.command = this.asCommand(item.command); }\n        if (item.commitCharacters) { result.commitCharacters = item.commitCharacters.slice(); }\n        if (item.command) { result.command = this.asCommand(item.command); }\n        // TODO if (item.preselect === true || item.preselect === false) { result.preselect = item.preselect; }\n        if (protocolItem) {\n            if (protocolItem.data !== undefined) {\n                result.data = protocolItem.data;\n            }\n            if (protocolItem.deprecated === true || protocolItem.deprecated === false) {\n                result.deprecated = protocolItem.deprecated;\n            }\n        }\n        return result;\n    }\n\n    protected asCompletionItemKind(value: monaco.languages.CompletionItemKind, original: CompletionItemKind | undefined): CompletionItemKind {\n        if (original !== undefined) {\n            return original;\n        }\n        switch (value) {\n            case monaco.languages.CompletionItemKind.Method: return CompletionItemKind.Method;\n            case monaco.languages.CompletionItemKind.Function: return CompletionItemKind.Function;\n            case monaco.languages.CompletionItemKind.Constructor: return CompletionItemKind.Constructor;\n            case monaco.languages.CompletionItemKind.Field: return CompletionItemKind.Field;\n            case monaco.languages.CompletionItemKind.Variable: return CompletionItemKind.Variable;\n            case monaco.languages.CompletionItemKind.Class: return CompletionItemKind.Class;\n            case monaco.languages.CompletionItemKind.Struct: return CompletionItemKind.Struct;\n            case monaco.languages.CompletionItemKind.Interface: return CompletionItemKind.Interface;\n            case monaco.languages.CompletionItemKind.Module: return CompletionItemKind.Module;\n            case monaco.languages.CompletionItemKind.Property: return CompletionItemKind.Property;\n            case monaco.languages.CompletionItemKind.Event: return CompletionItemKind.Event;\n            case monaco.languages.CompletionItemKind.Operator: return CompletionItemKind.Operator;\n            case monaco.languages.CompletionItemKind.Unit: return CompletionItemKind.Unit;\n            case monaco.languages.CompletionItemKind.Value: return CompletionItemKind.Value;\n            case monaco.languages.CompletionItemKind.Constant: return CompletionItemKind.Constant;\n            case monaco.languages.CompletionItemKind.Enum: return CompletionItemKind.Enum;\n            case monaco.languages.CompletionItemKind.EnumMember: return CompletionItemKind.EnumMember;\n            case monaco.languages.CompletionItemKind.Keyword: return CompletionItemKind.Keyword;\n            case monaco.languages.CompletionItemKind.Text: return CompletionItemKind.Text;\n            case monaco.languages.CompletionItemKind.Color: return CompletionItemKind.Color;\n            case monaco.languages.CompletionItemKind.File: return CompletionItemKind.File;\n            case monaco.languages.CompletionItemKind.Reference: return CompletionItemKind.Reference;\n            case monaco.languages.CompletionItemKind.Customcolor: return CompletionItemKind.Color;\n            case monaco.languages.CompletionItemKind.Folder: return CompletionItemKind.Folder;\n            case monaco.languages.CompletionItemKind.TypeParameter: return CompletionItemKind.TypeParameter;\n            case monaco.languages.CompletionItemKind.Snippet: return CompletionItemKind.Snippet;\n            default: return value + 1 as CompletionItemKind;\n        }\n    }\n\n    protected asDocumentation(format: string, documentation: string | monaco.IMarkdownString): string | MarkupContent {\n        switch (format) {\n            case MarkupKind.PlainText:\n                return { kind: format, value: documentation as string };\n            case MarkupKind.Markdown:\n                return { kind: format, value: (documentation as monaco.IMarkdownString).value };\n            default:\n                return `Unsupported Markup content received. Kind is: ${format}`;\n        }\n    }\n\n    protected fillPrimaryInsertText(target: CompletionItem, source: ProtocolCompletionItem): void {\n        let format: InsertTextFormat = InsertTextFormat.PlainText;\n        let text: string | undefined;\n        let range: Range | undefined;\n        if (source.insertTextRules !== undefined && (source.insertTextRules & monaco.languages.CompletionItemInsertTextRule.InsertAsSnippet) === 0) {\n            format = InsertTextFormat.Snippet;\n            text = source.insertText;\n        }\n        target.insertTextFormat = format;\n\n        text = source.insertText;\n        if (source.range) {\n            range = this.asRange(source.range);\n        }\n\n        target.insertTextFormat = format;\n        if (source.fromEdit && text && range) {\n            target.textEdit = { newText: text, range: range };\n        } else {\n            target.insertText = text;\n        }\n    }\n\n    asTextEdit(edit: monaco.editor.ISingleEditOperation): TextEdit {\n        const range = this.asRange(edit.range)!;\n        return {\n            range,\n            newText: edit.text || ''\n        }\n    }\n\n    asTextEdits(items: monaco.editor.ISingleEditOperation[]): TextEdit[];\n    asTextEdits(items: undefined | null): undefined;\n    asTextEdits(items: monaco.editor.ISingleEditOperation[] | undefined | null): TextEdit[] | undefined;\n    asTextEdits(items: monaco.editor.ISingleEditOperation[] | undefined | null): TextEdit[] | undefined {\n        if (!items) {\n            return undefined;\n        }\n        return items.map(item => this.asTextEdit(item));\n    }\n\n    asReferenceParams(model: IReadOnlyModel, position: monaco.Position, options: { includeDeclaration: boolean; }): ReferenceParams {\n        return {\n            textDocument: this.asTextDocumentIdentifier(model),\n            position: this.asPosition(position.lineNumber, position.column),\n            context: { includeDeclaration: options.includeDeclaration }\n        };\n    }\n\n    asDocumentSymbolParams(model: IReadOnlyModel): DocumentSymbolParams {\n        return {\n            textDocument: this.asTextDocumentIdentifier(model)\n        }\n    }\n\n    asCodeLensParams(model: IReadOnlyModel): CodeLensParams {\n        return {\n            textDocument: this.asTextDocumentIdentifier(model)\n        }\n    }\n\n    asDiagnosticSeverity(value: monaco.MarkerSeverity): DiagnosticSeverity | undefined {\n        switch (value) {\n            case monaco.MarkerSeverity.Error:\n                return DiagnosticSeverity.Error;\n            case monaco.MarkerSeverity.Warning:\n                return DiagnosticSeverity.Warning;\n            case monaco.MarkerSeverity.Info:\n                return DiagnosticSeverity.Information;\n            case monaco.MarkerSeverity.Hint:\n                return DiagnosticSeverity.Hint;\n        }\n        return undefined;\n    }\n\n    asDiagnostic(marker: monaco.editor.IMarkerData): Diagnostic {\n        const range = this.asRange(new monaco.Range(marker.startLineNumber, marker.startColumn, marker.endLineNumber, marker.endColumn))\n        const severity = this.asDiagnosticSeverity(marker.severity);\n        return Diagnostic.create(range, marker.message, severity, marker.code, marker.source);\n    }\n\n    asDiagnostics(markers: monaco.editor.IMarkerData[]): Diagnostic[] {\n        if (markers === void 0 || markers === null) {\n            return markers;\n        }\n        return markers.map(marker => this.asDiagnostic(marker));\n    }\n\n    asCodeActionContext(context: monaco.languages.CodeActionContext): CodeActionContext {\n        if (context === void 0 || context === null) {\n            return context;\n        }\n        const diagnostics = this.asDiagnostics(context.markers);\n        return CodeActionContext.create(diagnostics, Is.string(context.only) ? [context.only] : undefined);\n    }\n\n    asCodeActionParams(model: IReadOnlyModel, range: monaco.Range, context: monaco.languages.CodeActionContext): CodeActionParams {\n        return {\n            textDocument: this.asTextDocumentIdentifier(model),\n            range: this.asRange(range),\n            context: this.asCodeActionContext(context)\n        }\n    }\n\n    asCommand(item: monaco.languages.Command | undefined | null): Command | undefined {\n        if (item) {\n            let args = item.arguments || [];\n            return Command.create(item.title, item.id, ...args);\n        }\n        return undefined;\n    }\n\n    asCodeLens(item: monaco.languages.ICodeLensSymbol): CodeLens {\n        let result = CodeLens.create(this.asRange(item.range));\n        if (item.command) { result.command = this.asCommand(item.command); }\n        if (ProtocolCodeLens.is(item)) {\n            if (item.data) { result.data = item.data };\n        }\n        return result;\n    }\n\n    asFormattingOptions(options: monaco.languages.FormattingOptions): FormattingOptions {\n        return { tabSize: options.tabSize, insertSpaces: options.insertSpaces };\n    }\n\n    asDocumentFormattingParams(model: IReadOnlyModel, options: monaco.languages.FormattingOptions): DocumentFormattingParams {\n        return {\n            textDocument: this.asTextDocumentIdentifier(model),\n            options: this.asFormattingOptions(options)\n        }\n    }\n\n    asDocumentRangeFormattingParams(model: IReadOnlyModel, range: monaco.Range, options: monaco.languages.FormattingOptions): DocumentRangeFormattingParams {\n        return {\n            textDocument: this.asTextDocumentIdentifier(model),\n            range: this.asRange(range),\n            options: this.asFormattingOptions(options)\n        }\n    }\n\n    asDocumentOnTypeFormattingParams(model: IReadOnlyModel, position: monaco.IPosition, ch: string, options: monaco.languages.FormattingOptions): DocumentOnTypeFormattingParams {\n        return {\n            textDocument: this.asTextDocumentIdentifier(model),\n            position: this.asPosition(position.lineNumber, position.column),\n            ch,\n            options: this.asFormattingOptions(options)\n        }\n    }\n\n    asRenameParams(model: IReadOnlyModel, position: monaco.IPosition, newName: string): RenameParams {\n        return {\n            textDocument: this.asTextDocumentIdentifier(model),\n            position: this.asPosition(position.lineNumber, position.column),\n            newName\n        }\n    }\n\n    asDocumentLinkParams(model: IReadOnlyModel): DocumentLinkParams {\n        return {\n            textDocument: this.asTextDocumentIdentifier(model)\n        }\n    }\n\n    asDocumentLink(item: monaco.languages.ILink): DocumentLink {\n        let result = DocumentLink.create(this.asRange(item.range));\n        if (item.url) { result.target = typeof item.url === 'string' ? item.url : item.url.toString(); }\n        if (ProtocolDocumentLink.is(item) && item.data) {\n            result.data = item.data;\n        }\n        return result;\n    }\n}\n\nexport class ProtocolToMonacoConverter {\n\n    asResourceEdits(resource: monaco.Uri, edits: TextEdit[], modelVersionId?: number): monaco.languages.ResourceTextEdit {\n        return {\n            resource: resource,\n            edits: this.asTextEdits(edits),\n            modelVersionId\n        }\n    }\n\n    asWorkspaceEdit(item: WorkspaceEdit): monaco.languages.WorkspaceEdit;\n    asWorkspaceEdit(item: undefined | null): undefined;\n    asWorkspaceEdit(item: WorkspaceEdit | undefined | null): monaco.languages.WorkspaceEdit | undefined;\n    asWorkspaceEdit(item: WorkspaceEdit | undefined | null): monaco.languages.WorkspaceEdit | undefined {\n        if (!item) {\n            return undefined;\n        }\n        const edits: (monaco.languages.ResourceTextEdit | monaco.languages.ResourceFileEdit)[] = [];\n        if (item.documentChanges) {\n            item.documentChanges.forEach(change => {\n                if (ls.CreateFile.is(change)) {\n                    edits.push(<monaco.languages.ResourceFileEdit>{\n                        newUri: monaco.Uri.parse(change.uri),\n                        options: change.options\n                    });\n                } else if (ls.RenameFile.is(change)) {\n                    edits.push(<monaco.languages.ResourceFileEdit>{\n                        oldUri: monaco.Uri.parse(change.oldUri),\n                        newUri: monaco.Uri.parse(change.newUri),\n                        options: change.options\n                    });\n                } else if (ls.DeleteFile.is(change)) {\n                    edits.push(<monaco.languages.ResourceFileEdit>{\n                        oldUri: monaco.Uri.parse(change.uri),\n                        options: change.options\n                    });\n                } else if (ls.TextDocumentEdit.is(change)) {\n                    const resource = monaco.Uri.parse(change.textDocument.uri);\n                    const version = typeof change.textDocument.version === 'number' ? change.textDocument.version : undefined;\n                    edits.push(this.asResourceEdits(resource, change.edits, version));\n                } else {\n                    console.error(`Unknown workspace edit change received:\\n${JSON.stringify(change, undefined, 4)}`);\n                }\n            });\n        } else if (item.changes) {\n            for (const key of Object.keys(item.changes)) {\n                const resource = monaco.Uri.parse(key);\n                edits.push(this.asResourceEdits(resource, item.changes[key]));\n            }\n        }\n        return {\n            edits\n        };\n    }\n\n    asTextEdit(edit: TextEdit): monaco.languages.TextEdit;\n    asTextEdit(edit: undefined | null): undefined;\n    asTextEdit(edit: TextEdit | undefined | null): undefined;\n    asTextEdit(edit: TextEdit | undefined | null): monaco.languages.TextEdit | undefined {\n        if (!edit) {\n            return undefined;\n        }\n        const range = this.asRange(edit.range)!;\n        return {\n            range,\n            text: edit.newText\n        }\n    }\n\n    asTextEdits(items: TextEdit[]): monaco.languages.TextEdit[];\n    asTextEdits(items: undefined | null): undefined;\n    asTextEdits(items: TextEdit[] | undefined | null): monaco.languages.TextEdit[] | undefined;\n    asTextEdits(items: TextEdit[] | undefined | null): monaco.languages.TextEdit[] | undefined {\n        if (!items) {\n            return undefined;\n        }\n        return items.map(item => this.asTextEdit(item));\n    }\n\n    asCodeLens(item: CodeLens): monaco.languages.ICodeLensSymbol;\n    asCodeLens(item: undefined | null): undefined;\n    asCodeLens(item: CodeLens | undefined | null): monaco.languages.ICodeLensSymbol | undefined;\n    asCodeLens(item: CodeLens | undefined | null): monaco.languages.ICodeLensSymbol | undefined {\n        if (!item) {\n            return undefined;\n        }\n        const range = this.asRange(item.range);\n        let result = <ProtocolCodeLens>{ range };\n        if (item.command) { result.command = this.asCommand(item.command); }\n        if (item.data !== void 0 && item.data !== null) { result.data = item.data; }\n        return result;\n    }\n\n    asCodeLenses(items: CodeLens[]): monaco.languages.ICodeLensSymbol[];\n    asCodeLenses(items: undefined | null): undefined;\n    asCodeLenses(items: CodeLens[] | undefined | null): monaco.languages.ICodeLensSymbol[] | undefined;\n    asCodeLenses(items: CodeLens[] | undefined | null): monaco.languages.ICodeLensSymbol[] | undefined {\n        if (!items) {\n            return undefined;\n        }\n        return items.map((codeLens) => this.asCodeLens(codeLens));\n    }\n\n    asCodeActions(actions: (Command | CodeAction)[]): (monaco.languages.Command | monaco.languages.CodeAction)[] {\n        return actions.map(action => this.asCodeAction(action));\n    }\n\n    asCodeAction(item: Command | CodeAction): monaco.languages.Command | monaco.languages.CodeAction {\n        if (CodeAction.is(item)) {\n            return {\n                title: item.title,\n                command: this.asCommand(item.command),\n                edit: this.asWorkspaceEdit(item.edit),\n                diagnostics: this.asDiagnostics(item.diagnostics),\n                kind: item.kind\n            };\n        }\n        return {\n            command: {\n                id: item.command,\n                title: item.title,\n                arguments: item.arguments\n            },\n            title: item.title\n        };\n    }\n\n    asCommand(command: Command): monaco.languages.Command;\n    asCommand(command: undefined): undefined;\n    asCommand(command: Command | undefined): monaco.languages.Command | undefined;\n    asCommand(command: Command | undefined): monaco.languages.Command | undefined {\n        if (!command) {\n            return undefined;\n        }\n        return {\n            id: command.command,\n            title: command.title,\n            arguments: command.arguments\n        };\n    }\n\n    asDocumentSymbol(value: DocumentSymbol): monaco.languages.DocumentSymbol {\n        const children = value.children && value.children.map(c => this.asDocumentSymbol(c));\n        return {\n            name: value.name,\n            detail: value.detail || \"\",\n            kind: this.asSymbolKind(value.kind),\n            range: this.asRange(value.range),\n            selectionRange: this.asRange(value.selectionRange),\n            children\n        };\n    }\n\n    asDocumentSymbols(values: SymbolInformation[] | DocumentSymbol[]): monaco.languages.DocumentSymbol[] {\n        if (DocumentSymbol.is(values[0])) {\n            return (values as DocumentSymbol[]).map(s => this.asDocumentSymbol(s));\n        }\n        return this.asSymbolInformations(values as SymbolInformation[]);\n    }\n\n    asSymbolInformations(values: SymbolInformation[], uri?: monaco.Uri): monaco.languages.DocumentSymbol[];\n    asSymbolInformations(values: undefined | null, uri?: monaco.Uri): undefined;\n    asSymbolInformations(values: SymbolInformation[] | undefined | null, uri?: monaco.Uri): monaco.languages.DocumentSymbol[] | undefined;\n    asSymbolInformations(values: SymbolInformation[] | undefined | null, uri?: monaco.Uri): monaco.languages.DocumentSymbol[] | undefined {\n        if (!values) {\n            return undefined;\n        }\n        return values.map(information => this.asSymbolInformation(information, uri));\n    }\n\n    asSymbolInformation(item: SymbolInformation, uri?: monaco.Uri): monaco.languages.DocumentSymbol {\n        const location = this.asLocation(uri ? { ...item.location, uri: uri.toString() } : item.location);\n        return {\n            name: item.name,\n            detail: '',\n            containerName: item.containerName,\n            kind: this.asSymbolKind(item.kind),\n            range: location.range,\n            selectionRange: location.range\n        };\n    }\n\n    asSymbolKind(item: SymbolKind): monaco.languages.SymbolKind {\n        if (item <= SymbolKind.TypeParameter) {\n            // Symbol kind is one based in the protocol and zero based in code.\n            return item - 1;\n        }\n        return monaco.languages.SymbolKind.Property;\n    }\n\n    asDocumentHighlights(values: DocumentHighlight[]): monaco.languages.DocumentHighlight[];\n    asDocumentHighlights(values: undefined | null): undefined;\n    asDocumentHighlights(values: DocumentHighlight[] | undefined | null): monaco.languages.DocumentHighlight[] | undefined;\n    asDocumentHighlights(values: DocumentHighlight[] | undefined | null): monaco.languages.DocumentHighlight[] | undefined {\n        if (!values) {\n            return undefined;\n        }\n        return values.map(item => this.asDocumentHighlight(item));\n    }\n\n    asDocumentHighlight(item: DocumentHighlight): monaco.languages.DocumentHighlight {\n        const range = this.asRange(item.range)!;\n        const kind = Is.number(item.kind) ? this.asDocumentHighlightKind(item.kind) : undefined!;\n        return { range, kind };\n    }\n\n    asDocumentHighlightKind(item: number): monaco.languages.DocumentHighlightKind {\n        switch (item) {\n            case DocumentHighlightKind.Text:\n                return monaco.languages.DocumentHighlightKind.Text;\n            case DocumentHighlightKind.Read:\n                return monaco.languages.DocumentHighlightKind.Read;\n            case DocumentHighlightKind.Write:\n                return monaco.languages.DocumentHighlightKind.Write;\n        }\n        return monaco.languages.DocumentHighlightKind.Text;\n    }\n\n    asReferences(values: Location[]): monaco.languages.Location[];\n    asReferences(values: undefined | null): monaco.languages.Location[] | undefined;\n    asReferences(values: Location[] | undefined | null): monaco.languages.Location[] | undefined;\n    asReferences(values: Location[] | undefined | null): monaco.languages.Location[] | undefined {\n        if (!values) {\n            return undefined;\n        }\n        return values.map(location => this.asLocation(location));\n    }\n\n    asDefinitionResult(item: Definition): monaco.languages.Definition;\n    asDefinitionResult(item: undefined | null): undefined;\n    asDefinitionResult(item: Definition | undefined | null): monaco.languages.Definition | undefined;\n    asDefinitionResult(item: Definition | undefined | null): monaco.languages.Definition | undefined {\n        if (!item) {\n            return undefined;\n        }\n        if (Is.array(item)) {\n            return item.map((location) => this.asLocation(location));\n        } else {\n            return this.asLocation(item);\n        }\n    }\n\n    asLocation(item: Location): monaco.languages.Location;\n    asLocation(item: undefined | null): undefined;\n    asLocation(item: Location | undefined | null): monaco.languages.Location | undefined;\n    asLocation(item: Location | undefined | null): monaco.languages.Location | undefined {\n        if (!item) {\n            return undefined;\n        }\n        const uri = monaco.Uri.parse(item.uri);\n        const range = this.asRange(item.range)!;\n        return {\n            uri, range\n        }\n    }\n\n    asSignatureHelp(item: undefined | null): undefined;\n    asSignatureHelp(item: SignatureHelp): monaco.languages.SignatureHelp;\n    asSignatureHelp(item: SignatureHelp | undefined | null): monaco.languages.SignatureHelp | undefined;\n    asSignatureHelp(item: SignatureHelp | undefined | null): monaco.languages.SignatureHelp | undefined {\n        if (!item) {\n            return undefined;\n        }\n        let result = <monaco.languages.SignatureHelp>{};\n        if (Is.number(item.activeSignature)) {\n            result.activeSignature = item.activeSignature;\n        } else {\n            // activeSignature was optional in the past\n            result.activeSignature = 0;\n        }\n        if (Is.number(item.activeParameter)) {\n            result.activeParameter = item.activeParameter;\n        } else {\n            // activeParameter was optional in the past\n            result.activeParameter = 0;\n        }\n        if (item.signatures) {\n            result.signatures = this.asSignatureInformations(item.signatures);\n        } else {\n            result.signatures = [];\n        }\n        return result;\n    }\n\n    asSignatureInformations(items: SignatureInformation[]): monaco.languages.SignatureInformation[] {\n        return items.map(item => this.asSignatureInformation(item));\n    }\n\n    asSignatureInformation(item: SignatureInformation): monaco.languages.SignatureInformation {\n        let result = <monaco.languages.SignatureInformation>{ label: item.label };\n        if (item.documentation) { result.documentation = this.asDocumentation(item.documentation); }\n        if (item.parameters) {\n            result.parameters = this.asParameterInformations(item.parameters);\n        } else {\n            result.parameters = [];\n        }\n        return result;\n    }\n\n    asParameterInformations(item: ParameterInformation[]): monaco.languages.ParameterInformation[] {\n        return item.map(item => this.asParameterInformation(item));\n    }\n\n    asParameterInformation(item: ParameterInformation): monaco.languages.ParameterInformation {\n        let result = <monaco.languages.ParameterInformation>{ label: item.label };\n        if (item.documentation) { result.documentation = this.asDocumentation(item.documentation) };\n        return result;\n    }\n\n    asHover(hover: Hover): monaco.languages.Hover;\n    asHover(hover: undefined | null): undefined;\n    asHover(hover: Hover | undefined | null): monaco.languages.Hover | undefined;\n    asHover(hover: Hover | undefined | null): monaco.languages.Hover | undefined {\n        if (!hover) {\n            return undefined;\n        }\n        return {\n            contents: this.asHoverContent(hover.contents),\n            range: this.asRange(hover.range)\n        };\n    }\n\n    asHoverContent(contents: MarkedString | MarkedString[] | MarkupContent): monaco.IMarkdownString[] {\n        if (Array.isArray(contents)) {\n            return contents.map(content => this.asMarkdownString(content));\n        }\n        return [this.asMarkdownString(contents)];\n    }\n\n    asDocumentation(value: string | MarkupContent): string | monaco.IMarkdownString {\n        if (Is.string(value)) {\n            return value;\n        }\n        if (value.kind === MarkupKind.PlainText) {\n            return value.value;\n        }\n        return this.asMarkdownString(value);\n    }\n\n    asMarkdownString(content: MarkedString | MarkupContent): monaco.IMarkdownString {\n        if (MarkupContent.is(content)) {\n            return {\n                value: content.value\n            };\n        }\n        if (Is.string(content)) {\n            return { value: content };\n        }\n        const { language, value } = content;\n        return {\n            value: '```' + language + '\\n' + value + '\\n```'\n        };\n    }\n\n    asSeverity(severity?: number): monaco.MarkerSeverity {\n        if (severity === 1) {\n            return monaco.MarkerSeverity.Error;\n        }\n        if (severity === 2) {\n            return monaco.MarkerSeverity.Warning;\n        }\n        if (severity === 3) {\n            return monaco.MarkerSeverity.Info;\n        }\n        return monaco.MarkerSeverity.Hint;\n    }\n\n    asDiagnostics(diagnostics: undefined): undefined;\n    asDiagnostics(diagnostics: Diagnostic[]): monaco.editor.IMarkerData[];\n    asDiagnostics(diagnostics: Diagnostic[] | undefined): monaco.editor.IMarkerData[] | undefined;\n    asDiagnostics(diagnostics: Diagnostic[] | undefined): monaco.editor.IMarkerData[] | undefined {\n        if (!diagnostics) {\n            return undefined;\n        }\n        return diagnostics.map(diagnostic => this.asDiagnostic(diagnostic));\n    }\n\n    asDiagnostic(diagnostic: Diagnostic): monaco.editor.IMarkerData {\n        return {\n            code: typeof diagnostic.code === \"number\" ? diagnostic.code.toString() : diagnostic.code,\n            severity: this.asSeverity(diagnostic.severity),\n            message: diagnostic.message,\n            source: diagnostic.source,\n            startLineNumber: diagnostic.range.start.line + 1,\n            startColumn: diagnostic.range.start.character + 1,\n            endLineNumber: diagnostic.range.end.line + 1,\n            endColumn: diagnostic.range.end.character + 1,\n            relatedInformation: this.asRelatedInformations(diagnostic.relatedInformation)\n        }\n    }\n\n    asRelatedInformations(relatedInformation?: DiagnosticRelatedInformation[]): monaco.editor.IRelatedInformation[] | undefined {\n        if (!relatedInformation) {\n            return undefined;\n        }\n        return relatedInformation.map(item => this.asRelatedInformation(item));\n    }\n\n    asRelatedInformation(relatedInformation: DiagnosticRelatedInformation): monaco.editor.IRelatedInformation {\n        return {\n            resource: monaco.Uri.parse(relatedInformation.location.uri),\n            startLineNumber: relatedInformation.location.range.start.line + 1,\n            startColumn: relatedInformation.location.range.start.character + 1,\n            endLineNumber: relatedInformation.location.range.end.line + 1,\n            endColumn: relatedInformation.location.range.end.character + 1,\n            message: relatedInformation.message\n        }\n    }\n\n    asCompletionResult(result: CompletionItem[] | CompletionList | null | undefined, defaultRange: monaco.IRange): monaco.languages.CompletionList {\n        if (!result) {\n            return {\n                incomplete: false,\n                suggestions: []\n            }\n        }\n        if (Array.isArray(result)) {\n            const suggestions = result.map(item => this.asCompletionItem(item, defaultRange));\n            return {\n                incomplete: false,\n                suggestions\n            }\n        }\n        return {\n            incomplete: result.isIncomplete,\n            suggestions: result.items.map(item => this.asCompletionItem(item, defaultRange))\n        }\n    }\n\n    asCompletionItem(item: CompletionItem, defaultRange: monaco.IRange): ProtocolCompletionItem {\n        const result = <ProtocolCompletionItem>{ label: item.label };\n        if (item.detail) { result.detail = item.detail; }\n        if (item.documentation) {\n            result.documentation = this.asDocumentation(item.documentation);\n            result.documentationFormat = Is.string(item.documentation) ? undefined : item.documentation.kind;\n        };\n        if (item.filterText) { result.filterText = item.filterText; }\n        const insertText = this.asCompletionInsertText(item, defaultRange);\n        result.insertText = insertText.insertText;\n        result.range = insertText.range;\n        result.fromEdit = insertText.fromEdit;\n        if (insertText.isSnippet) {\n            result.insertTextRules = monaco.languages.CompletionItemInsertTextRule.InsertAsSnippet;\n        }\n        if (Is.number(item.kind)) {\n            let [itemKind, original] = this.asCompletionItemKind(item.kind);\n            result.kind = itemKind;\n            if (original) {\n                result.originalItemKind = original;\n            }\n        }\n        if (item.sortText) { result.sortText = item.sortText; }\n        if (item.additionalTextEdits) { result.additionalTextEdits = this.asTextEdits(item.additionalTextEdits); }\n        if (Is.stringArray(item.commitCharacters)) { result.commitCharacters = item.commitCharacters.slice(); }\n        if (item.command) { result.command = this.asCommand(item.command); }\n        if (item.deprecated === true || item.deprecated === false) { result.deprecated = item.deprecated; }\n        if (item.preselect === true || item.preselect === false) { result.preselect = item.preselect; }\n        if (item.data !== undefined) { result.data = item.data; }\n        if (item.deprecated === true || item.deprecated === false) {\n            result.deprecated = item.deprecated;\n        }\n        return result;\n    }\n\n    asCompletionItemKind(value: CompletionItemKind): [monaco.languages.CompletionItemKind, CompletionItemKind | undefined] {\n        if (CompletionItemKind.Text <= value && value <= CompletionItemKind.TypeParameter) {\n            switch (value) {\n                case CompletionItemKind.Text: return [monaco.languages.CompletionItemKind.Text, undefined];\n                case CompletionItemKind.Method: return [monaco.languages.CompletionItemKind.Method, undefined];\n                case CompletionItemKind.Function: return [monaco.languages.CompletionItemKind.Function, undefined];\n                case CompletionItemKind.Constructor: return [monaco.languages.CompletionItemKind.Constructor, undefined];\n                case CompletionItemKind.Field: return [monaco.languages.CompletionItemKind.Field, undefined];\n                case CompletionItemKind.Variable: return [monaco.languages.CompletionItemKind.Variable, undefined];\n                case CompletionItemKind.Class: return [monaco.languages.CompletionItemKind.Class, undefined];\n                case CompletionItemKind.Interface: return [monaco.languages.CompletionItemKind.Interface, undefined];\n                case CompletionItemKind.Module: return [monaco.languages.CompletionItemKind.Module, undefined];\n                case CompletionItemKind.Property: return [monaco.languages.CompletionItemKind.Property, undefined];\n                case CompletionItemKind.Unit: return [monaco.languages.CompletionItemKind.Unit, undefined];\n                case CompletionItemKind.Value: return [monaco.languages.CompletionItemKind.Value, undefined];\n                case CompletionItemKind.Enum: return [monaco.languages.CompletionItemKind.Enum, undefined];\n                case CompletionItemKind.Keyword: return [monaco.languages.CompletionItemKind.Keyword, undefined];\n                case CompletionItemKind.Snippet: return [monaco.languages.CompletionItemKind.Snippet, undefined];\n                case CompletionItemKind.Color: return [monaco.languages.CompletionItemKind.Color, undefined];\n                case CompletionItemKind.File: return [monaco.languages.CompletionItemKind.File, undefined];\n                case CompletionItemKind.Reference: return [monaco.languages.CompletionItemKind.Reference, undefined];\n                case CompletionItemKind.Folder: return [monaco.languages.CompletionItemKind.Folder, undefined];\n                case CompletionItemKind.EnumMember: return [monaco.languages.CompletionItemKind.EnumMember, undefined];\n                case CompletionItemKind.Constant: return [monaco.languages.CompletionItemKind.Constant, undefined];\n                case CompletionItemKind.Struct: return [monaco.languages.CompletionItemKind.Struct, undefined];\n                case CompletionItemKind.Event: return [monaco.languages.CompletionItemKind.Event, undefined];\n                case CompletionItemKind.Operator: return [monaco.languages.CompletionItemKind.Operator, undefined];\n                case CompletionItemKind.TypeParameter: return [monaco.languages.CompletionItemKind.TypeParameter, undefined];\n                default: return [value - 1, undefined];\n            }\n\n        };\n        return [CompletionItemKind.Text, value];\n    }\n\n    asCompletionInsertText(item: CompletionItem, defaultRange: monaco.IRange): { insertText: string, range: monaco.IRange, fromEdit: boolean, isSnippet: boolean } {\n        const isSnippet = item.insertTextFormat === InsertTextFormat.Snippet;\n        if (item.textEdit) {\n            const range = this.asRange(item.textEdit.range);\n            const value = item.textEdit.newText;\n            return { isSnippet, insertText: value, range, fromEdit: true, };\n        }\n        if (item.insertText) {\n            return { isSnippet, insertText: item.insertText, fromEdit: false, range: defaultRange };\n        }\n        return { insertText: item.label, range: defaultRange, fromEdit: false, isSnippet: false };\n    }\n\n    asDocumentLinks(documentLinks: DocumentLink[]): monaco.languages.ILinksList {\n        const links = documentLinks.map(link => this.asDocumentLink(link));\n        return { links };\n    }\n\n    asDocumentLink(documentLink: DocumentLink): ProtocolDocumentLink {\n        return {\n            range: this.asRange(documentLink.range),\n            url: documentLink.target,\n            data: documentLink.data\n        };\n    }\n\n    asRange(range: null): null;\n    asRange(range: undefined): undefined;\n    asRange(range: Range): monaco.Range;\n    asRange(range: Range | undefined): monaco.Range | undefined;\n    asRange(range: Range | null): monaco.Range | null;\n    asRange(range: RecursivePartial<Range>): Partial<monaco.IRange>;\n    asRange(range: RecursivePartial<Range> | undefined): monaco.Range | Partial<monaco.IRange> | undefined;\n    asRange(range: RecursivePartial<Range> | null): monaco.Range | Partial<monaco.IRange> | null;\n    asRange(range: RecursivePartial<Range> | undefined | null): monaco.Range | Partial<monaco.IRange> | undefined | null {\n        if (range === undefined) {\n            return undefined;\n        }\n        if (range === null) {\n            return null;\n        }\n        const start = this.asPosition(range.start);\n        const end = this.asPosition(range.end);\n        if (start instanceof monaco.Position && end instanceof monaco.Position) {\n            return new monaco.Range(start.lineNumber, start.column, end.lineNumber, end.column);\n        }\n        const startLineNumber = !start || start.lineNumber === undefined ? undefined : start.lineNumber;\n        const startColumn = !start || start.column === undefined ? undefined : start.column;\n        const endLineNumber = !end || end.lineNumber === undefined ? undefined : end.lineNumber;\n        const endColumn = !end || end.column === undefined ? undefined : end.column;\n        return { startLineNumber, startColumn, endLineNumber, endColumn };\n    }\n\n    asPosition(position: null): null;\n    asPosition(position: undefined): undefined;\n    asPosition(position: Position): monaco.Position;\n    asPosition(position: Position | undefined): monaco.Position | undefined;\n    asPosition(position: Position | null): monaco.Position | null;\n    asPosition(position: Partial<Position>): Partial<monaco.IPosition>;\n    asPosition(position: Partial<Position> | undefined): monaco.Position | Partial<monaco.IPosition> | undefined;\n    asPosition(position: Partial<Position> | null): monaco.Position | Partial<monaco.IPosition> | null;\n    asPosition(position: Partial<Position> | undefined | null): monaco.Position | Partial<monaco.IPosition> | undefined | null {\n        if (position === undefined) {\n            return undefined;\n        }\n        if (position === null) {\n            return null;\n        }\n        const { line, character } = position;\n        const lineNumber = line === undefined ? undefined : line + 1;\n        const column = character === undefined ? undefined : character + 1;\n        if (lineNumber !== undefined && column !== undefined) {\n            return new monaco.Position(lineNumber, column);\n        }\n        return { lineNumber, column };\n    }\n\n    asColorInformations(items: ColorInformation[]): monaco.languages.IColorInformation[] {\n        return items.map(item => this.asColorInformation(item));\n    }\n\n    asColorInformation(item: ColorInformation): monaco.languages.IColorInformation {\n        return {\n            range: this.asRange(item.range),\n            color: item.color\n        }\n    }\n\n    asColorPresentations(items: ColorPresentation[]): monaco.languages.IColorPresentation[] {\n        return items.map(item => this.asColorPresentation(item));\n    }\n\n    asColorPresentation(item: ColorPresentation): monaco.languages.IColorPresentation {\n        return {\n            label: item.label,\n            textEdit: this.asTextEdit(item.textEdit),\n            additionalTextEdits: this.asTextEdits(item.additionalTextEdits)\n        }\n    }\n\n    asFoldingRanges(items: undefined | null): undefined | null;\n    asFoldingRanges(items: FoldingRange[]): monaco.languages.FoldingRange[];\n    asFoldingRanges(items: FoldingRange[] | undefined | null): monaco.languages.FoldingRange[] | undefined | null {\n        if (!items) {\n            return items;\n        }\n        return items.map(item => this.asFoldingRange(item));\n    }\n\n    asFoldingRange(item: FoldingRange): monaco.languages.FoldingRange {\n        return {\n            start: item.startLine + 1,\n            end: item.endLine + 1,\n            kind: this.asFoldingRangeKind(item.kind)\n        };\n    }\n\n    asFoldingRangeKind(kind?: string): monaco.languages.FoldingRangeKind | undefined {\n        if (kind) {\n            switch (kind) {\n                case FoldingRangeKind.Comment:\n                    return monaco.languages.FoldingRangeKind.Comment;\n                case FoldingRangeKind.Imports:\n                    return monaco.languages.FoldingRangeKind.Imports;\n                case FoldingRangeKind.Region:\n                    return monaco.languages.FoldingRangeKind.Region;\n            };\n        }\n        return undefined;\n    }\n\n}\n","/* --------------------------------------------------------------------------------------------\n * Copyright (c) 2018 TypeFox GmbH (http://www.typefox.io). All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nimport { DiagnosticCollection, Diagnostic } from './services';\nimport { DisposableCollection, Disposable } from './disposable';\nimport { ProtocolToMonacoConverter } from './monaco-converter';\nimport IModel = monaco.editor.IModel;\nimport IMarkerData = monaco.editor.IMarkerData;\n\nexport class MonacoDiagnosticCollection implements DiagnosticCollection {\n\n    protected readonly diagnostics = new Map<string, MonacoModelDiagnostics | undefined>();\n    protected readonly toDispose = new DisposableCollection();\n\n    constructor(\n        protected readonly name: string,\n        protected readonly p2m: ProtocolToMonacoConverter) {\n    }\n\n    dispose() {\n        this.toDispose.dispose();\n    }\n\n    get(uri: string): Diagnostic[] {\n        const diagnostics = this.diagnostics.get(uri);\n        return !!diagnostics ? diagnostics.diagnostics : [];\n    }\n\n    set(uri: string, diagnostics: Diagnostic[]): void {\n        const existing = this.diagnostics.get(uri);\n        if (existing) {\n            existing.diagnostics = diagnostics;\n        } else {\n            const modelDiagnostics = new MonacoModelDiagnostics(uri, diagnostics, this.name, this.p2m);\n            this.diagnostics.set(uri, modelDiagnostics);\n            this.toDispose.push(Disposable.create(() => {\n                this.diagnostics.delete(uri);\n                modelDiagnostics.dispose();\n            }));\n        }\n    }\n\n}\n\nexport class MonacoModelDiagnostics implements Disposable {\n    readonly uri: monaco.Uri;\n    protected _markers: IMarkerData[] = [];\n    protected _diagnostics: Diagnostic[] = [];\n    constructor(\n        uri: string,\n        diagnostics: Diagnostic[],\n        readonly owner: string,\n        protected readonly p2m: ProtocolToMonacoConverter\n    ) {\n        this.uri = monaco.Uri.parse(uri);\n        this.diagnostics = diagnostics;\n        monaco.editor.onDidCreateModel(model => this.doUpdateModelMarkers(model));\n    }\n\n    set diagnostics(diagnostics: Diagnostic[]) {\n        this._diagnostics = diagnostics;\n        this._markers = this.p2m.asDiagnostics(diagnostics);\n        this.updateModelMarkers();\n    }\n\n    get diagnostics(): Diagnostic[] {\n        return this._diagnostics;\n    }\n\n    get markers(): ReadonlyArray<IMarkerData> {\n        return this._markers;\n    }\n\n    dispose(): void {\n        this._markers = [];\n        this.updateModelMarkers();\n    }\n\n    updateModelMarkers(): void {\n        const model = monaco.editor.getModel(this.uri);\n        this.doUpdateModelMarkers(model ? model : undefined);\n    }\n\n    protected doUpdateModelMarkers(model: IModel | undefined): void {\n        if (model && this.uri.toString() === model.uri.toString()) {\n            monaco.editor.setModelMarkers(model, this.owner, this._markers);\n        }\n    }\n}\n","/* --------------------------------------------------------------------------------------------\n * Copyright (c) 2018 TypeFox GmbH (http://www.typefox.io). All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nimport {\n    BaseLanguageClient, MessageTransports, LanguageClientOptions,\n    CompletionParams, WillSaveTextDocumentParams, StaticFeature, DynamicFeature\n} from \"vscode-languageclient/lib/client\";\nimport { TypeDefinitionFeature } from \"vscode-languageclient/lib/typeDefinition\";\nimport { ConfigurationFeature as PullConfigurationFeature } from \"vscode-languageclient/lib/configuration\";\nimport { ImplementationFeature } from \"vscode-languageclient/lib/implementation\";\nimport { ColorProviderFeature } from \"vscode-languageclient/lib/colorProvider\";\nimport { WorkspaceFoldersFeature } from \"vscode-languageclient/lib/workspaceFolders\";\nimport { FoldingRangeFeature } from \"vscode-languageclient/lib/foldingRange\";\nimport * as p2c from 'vscode-languageclient/lib/protocolConverter';\nimport * as c2p from 'vscode-languageclient/lib/codeConverter';\nimport { IConnectionProvider, IConnection } from './connection';\nimport { DeclarationFeature } from \"vscode-languageclient/lib/declaration\";\n\nexport * from 'vscode-languageclient/lib/client';\n\nexport class MonacoLanguageClient extends BaseLanguageClient {\n\n    static bypassConversion = (result: any) => result || undefined;\n\n    protected readonly connectionProvider: IConnectionProvider;\n\n    constructor({ id, name, clientOptions, connectionProvider }: MonacoLanguageClient.Options) {\n        super(id || name.toLowerCase(), name, clientOptions);\n        this.connectionProvider = connectionProvider;\n        (this as any).createConnection = this.doCreateConnection.bind(this);\n\n        // bypass LSP <=> VS Code conversion\n        const self: {\n            _p2c: p2c.Converter,\n            _c2p: c2p.Converter\n        } = this as any;\n        self._p2c = new Proxy(self._p2c, {\n            get: (target: any, prop: string) => {\n                if (prop === 'asUri') {\n                    return target[prop];\n                }\n                return MonacoLanguageClient.bypassConversion;\n            }\n        });\n        self._c2p = new Proxy(self._c2p, {\n            get: (target: c2p.Converter, prop: string) => {\n                if (prop === 'asUri') {\n                    return target[prop];\n                }\n                if (prop === 'asCompletionParams') {\n                    return (textDocument: any, position: any, context: any): CompletionParams => {\n                        return {\n                            textDocument: target.asTextDocumentIdentifier(textDocument),\n                            position,\n                            context\n                        }\n                    }\n                }\n                if (prop === 'asWillSaveTextDocumentParams') {\n                    return (event: any): WillSaveTextDocumentParams => {\n                        return {\n                            textDocument: target.asTextDocumentIdentifier(event.document),\n                            reason: event.reason\n                        }\n                    }\n                }\n                if (prop.endsWith('Params')) {\n                    return (target as any)[prop];\n                }\n                return MonacoLanguageClient.bypassConversion;\n            }\n        });\n    }\n\n    protected doCreateConnection(): Thenable<IConnection> {\n        const errorHandler = (this as any).handleConnectionError.bind(this);\n        const closeHandler = this.handleConnectionClosed.bind(this);\n        return this.connectionProvider.get(errorHandler, closeHandler, this.outputChannel);\n    }\n\n    protected createMessageTransports(encoding: string): Thenable<MessageTransports> {\n        throw new Error('Unsupported');\n    }\n\n    protected registerBuiltinFeatures(): void {\n        super.registerBuiltinFeatures();\n        this.registerFeature(new PullConfigurationFeature(this));\n        this.registerFeature(new TypeDefinitionFeature(this));\n        this.registerFeature(new ImplementationFeature(this));\n        this.registerFeature(new ColorProviderFeature(this));\n        this.registerFeature(new WorkspaceFoldersFeature(this));\n        const foldingRangeFeature = new FoldingRangeFeature(this);\n        foldingRangeFeature['asFoldingRanges'] = MonacoLanguageClient.bypassConversion;\n        this.registerFeature(foldingRangeFeature);\n        this.registerFeature(new DeclarationFeature(this));\n\n        const features = this['_features'] as ((StaticFeature | DynamicFeature<any>)[]);\n        for (const feature of features) {\n            if (feature instanceof ColorProviderFeature) {\n                feature['asColor'] = MonacoLanguageClient.bypassConversion;\n                feature['asColorInformations'] = MonacoLanguageClient.bypassConversion;\n                feature['asColorPresentations'] = MonacoLanguageClient.bypassConversion;\n            }\n        }\n    }\n\n}\nexport namespace MonacoLanguageClient {\n    export interface Options {\n        name: string;\n        id?: string;\n        clientOptions: LanguageClientOptions;\n        connectionProvider: IConnectionProvider;\n    }\n}\n","/* --------------------------------------------------------------------------------------------\n * Copyright (c) 2018 TypeFox GmbH (http://www.typefox.io). All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nimport globToRegExp = require('glob-to-regexp');\nimport {\n    Languages, DiagnosticCollection, CompletionItemProvider, DocumentIdentifier, HoverProvider,\n    SignatureHelpProvider, DefinitionProvider, ReferenceProvider, DocumentHighlightProvider,\n    DocumentSymbolProvider, CodeActionProvider, CodeLensProvider, DocumentFormattingEditProvider, DocumentRangeFormattingEditProvider,\n    OnTypeFormattingEditProvider, RenameProvider,\n    DocumentFilter, DocumentSelector, DocumentLinkProvider, ImplementationProvider, TypeDefinitionProvider, DocumentColorProvider,\n    FoldingRangeProvider\n} from \"./services\";\nimport { MonacoDiagnosticCollection } from './monaco-diagnostic-collection';\nimport { ProtocolToMonacoConverter, MonacoToProtocolConverter } from './monaco-converter';\nimport { DisposableCollection, Disposable } from './disposable';\n\nexport interface MonacoModelIdentifier {\n    uri: monaco.Uri;\n    languageId: string;\n}\n\nexport namespace MonacoModelIdentifier {\n    export function fromDocument(document: DocumentIdentifier): MonacoModelIdentifier {\n        return {\n            uri: monaco.Uri.parse(document.uri),\n            languageId: document.languageId\n        }\n    }\n    export function fromModel(model: monaco.editor.IReadOnlyModel): MonacoModelIdentifier {\n        return {\n            uri: model.uri,\n            languageId: model.getModeId()\n        }\n    }\n}\n\nexport function testGlob(pattern: string, value: string): boolean {\n    const regExp = globToRegExp(pattern, {\n        extended: true,\n        globstar: true\n    });\n    return regExp.test(value);\n}\n\nexport class MonacoLanguages implements Languages {\n\n    constructor(\n        protected readonly p2m: ProtocolToMonacoConverter,\n        protected readonly m2p: MonacoToProtocolConverter\n    ) { }\n\n    match(selector: DocumentSelector, document: DocumentIdentifier): boolean {\n        return this.matchModel(selector, MonacoModelIdentifier.fromDocument(document));\n    }\n\n    createDiagnosticCollection(name?: string): DiagnosticCollection {\n        return new MonacoDiagnosticCollection(name || 'default', this.p2m);\n    }\n\n    registerCompletionItemProvider(selector: DocumentSelector, provider: CompletionItemProvider, ...triggerCharacters: string[]): Disposable {\n        const completionProvider = this.createCompletionProvider(selector, provider, ...triggerCharacters);\n        const providers = new DisposableCollection();\n        for (const language of this.matchLanguage(selector)) {\n            providers.push(monaco.languages.registerCompletionItemProvider(language, completionProvider))\n        };\n        return providers;\n    }\n\n    protected createCompletionProvider(selector: DocumentSelector, provider: CompletionItemProvider, ...triggerCharacters: string[]): monaco.languages.CompletionItemProvider {\n        return {\n            triggerCharacters,\n            provideCompletionItems: async (model, position, context, token) => {\n                if (!this.matchModel(selector, MonacoModelIdentifier.fromModel(model))) {\n                    return undefined;\n                }\n                const wordUntil = model.getWordUntilPosition(position);\n                const defaultRange = new monaco.Range(position.lineNumber, wordUntil.startColumn, position.lineNumber, wordUntil.endColumn);\n                const params = this.m2p.asCompletionParams(model, position, context);\n                const result = await provider.provideCompletionItems(params, token);\n                return result && this.p2m.asCompletionResult(result, defaultRange);\n            },\n            resolveCompletionItem: provider.resolveCompletionItem ? async (model, position, item, token) => {\n                const protocolItem = this.m2p.asCompletionItem(item);\n                const resolvedItem = await provider.resolveCompletionItem!(protocolItem, token);\n                if (resolvedItem) {\n                    const resolvedCompletionItem = this.p2m.asCompletionItem(resolvedItem, item.range);\n                    Object.assign(item, resolvedCompletionItem);\n                }\n                return item;\n            } : undefined\n        };\n    }\n\n    registerHoverProvider(selector: DocumentSelector, provider: HoverProvider): Disposable {\n        const hoverProvider = this.createHoverProvider(selector, provider);\n        const providers = new DisposableCollection();\n        for (const language of this.matchLanguage(selector)) {\n            providers.push(monaco.languages.registerHoverProvider(language, hoverProvider));\n        }\n        return providers;\n    }\n\n    protected createHoverProvider(selector: DocumentSelector, provider: HoverProvider): monaco.languages.HoverProvider {\n        return {\n            provideHover: async (model, position, token) => {\n                if (!this.matchModel(selector, MonacoModelIdentifier.fromModel(model))) {\n                    return undefined;\n                }\n                const params = this.m2p.asTextDocumentPositionParams(model, position);\n                const hover = await provider.provideHover(params, token);\n                return hover && this.p2m.asHover(hover);\n            }\n        }\n    }\n\n    registerSignatureHelpProvider(selector: DocumentSelector, provider: SignatureHelpProvider, ...triggerCharacters: string[]): Disposable {\n        const signatureHelpProvider = this.createSignatureHelpProvider(selector, provider, ...triggerCharacters);\n        const providers = new DisposableCollection();\n        for (const language of this.matchLanguage(selector)) {\n            providers.push(monaco.languages.registerSignatureHelpProvider(language, signatureHelpProvider));\n        }\n        return providers;\n    }\n\n    protected createSignatureHelpProvider(selector: DocumentSelector, provider: SignatureHelpProvider, ...triggerCharacters: string[]): monaco.languages.SignatureHelpProvider {\n        const signatureHelpTriggerCharacters = [...(provider.triggerCharacters || triggerCharacters || [])];\n        // TODO support regrigger characters after Monaco udpate\n        return {\n            signatureHelpTriggerCharacters,\n            provideSignatureHelp: async (model, position, token) => {\n                if (!this.matchModel(selector, MonacoModelIdentifier.fromModel(model))) {\n                    return undefined;\n                }\n                const params = this.m2p.asTextDocumentPositionParams(model, position);\n                const signatureHelp = await provider.provideSignatureHelp(params, token, {\n                    // TODO pass context from monaco after Monaco udpate\n                    triggerKind: 1,\n                    isRetrigger: false\n                });\n                return signatureHelp && this.p2m.asSignatureHelp(signatureHelp);\n            }\n        }\n    }\n\n    registerDefinitionProvider(selector: DocumentSelector, provider: DefinitionProvider): Disposable {\n        const definitionProvider = this.createDefinitionProvider(selector, provider);\n        const providers = new DisposableCollection();\n        for (const language of this.matchLanguage(selector)) {\n            providers.push(monaco.languages.registerDefinitionProvider(language, definitionProvider));\n        }\n        return providers;\n    }\n\n    protected createDefinitionProvider(selector: DocumentSelector, provider: DefinitionProvider): monaco.languages.DefinitionProvider {\n        return {\n            provideDefinition: async (model, position, token) => {\n                if (!this.matchModel(selector, MonacoModelIdentifier.fromModel(model))) {\n                    return undefined;\n                }\n                const params = this.m2p.asTextDocumentPositionParams(model, position);\n                const result = await provider.provideDefinition(params, token);\n                return result && this.p2m.asDefinitionResult(result);\n            }\n        }\n    }\n\n    registerReferenceProvider(selector: DocumentSelector, provider: ReferenceProvider): Disposable {\n        const referenceProvider = this.createReferenceProvider(selector, provider);\n        const providers = new DisposableCollection();\n        for (const language of this.matchLanguage(selector)) {\n            providers.push(monaco.languages.registerReferenceProvider(language, referenceProvider));\n        }\n        return providers;\n    }\n\n    protected createReferenceProvider(selector: DocumentSelector, provider: ReferenceProvider): monaco.languages.ReferenceProvider {\n        return {\n            provideReferences: async (model, position, context, token) => {\n                if (!this.matchModel(selector, MonacoModelIdentifier.fromModel(model))) {\n                    return undefined;\n                }\n                const params = this.m2p.asReferenceParams(model, position, context);\n                const result = await provider.provideReferences(params, token);\n                return result && this.p2m.asReferences(result);\n            }\n        }\n    }\n\n    registerDocumentHighlightProvider(selector: DocumentSelector, provider: DocumentHighlightProvider): Disposable {\n        const documentHighlightProvider = this.createDocumentHighlightProvider(selector, provider);\n        const providers = new DisposableCollection();\n        for (const language of this.matchLanguage(selector)) {\n            providers.push(monaco.languages.registerDocumentHighlightProvider(language, documentHighlightProvider));\n        }\n        return providers;\n    }\n\n    protected createDocumentHighlightProvider(selector: DocumentSelector, provider: DocumentHighlightProvider): monaco.languages.DocumentHighlightProvider {\n        return {\n            provideDocumentHighlights: async (model, position, token) => {\n                if (!this.matchModel(selector, MonacoModelIdentifier.fromModel(model))) {\n                    return undefined;\n                }\n                const params = this.m2p.asTextDocumentPositionParams(model, position);\n                const result = await provider.provideDocumentHighlights(params, token);\n                return result && this.p2m.asDocumentHighlights(result);\n            }\n        }\n    }\n\n    registerDocumentSymbolProvider(selector: DocumentSelector, provider: DocumentSymbolProvider): Disposable {\n        const documentSymbolProvider = this.createDocumentSymbolProvider(selector, provider);\n        const providers = new DisposableCollection();\n        for (const language of this.matchLanguage(selector)) {\n            providers.push(monaco.languages.registerDocumentSymbolProvider(language, documentSymbolProvider));\n        }\n        return providers;\n    }\n\n    protected createDocumentSymbolProvider(selector: DocumentSelector, provider: DocumentSymbolProvider): monaco.languages.DocumentSymbolProvider {\n        return {\n            provideDocumentSymbols: async (model, token) => {\n                if (!this.matchModel(selector, MonacoModelIdentifier.fromModel(model))) {\n                    return undefined;\n                }\n                const params = this.m2p.asDocumentSymbolParams(model);\n                const result = await provider.provideDocumentSymbols(params, token);\n                return result && this.p2m.asDocumentSymbols(result);\n            }\n        }\n    }\n\n    registerCodeActionsProvider(selector: DocumentSelector, provider: CodeActionProvider): Disposable {\n        const codeActionProvider = this.createCodeActionProvider(selector, provider);\n        const providers = new DisposableCollection();\n        for (const language of this.matchLanguage(selector)) {\n            providers.push(monaco.languages.registerCodeActionProvider(language, codeActionProvider));\n        }\n        return providers;\n    }\n\n    protected createCodeActionProvider(selector: DocumentSelector, provider: CodeActionProvider): monaco.languages.CodeActionProvider {\n        return {\n            provideCodeActions: async (model, range, context, token) => {\n                if (!this.matchModel(selector, MonacoModelIdentifier.fromModel(model))) {\n                    // FIXME: get rid of `!` when https://github.com/microsoft/monaco-editor/issues/1560 is resolved\n                    return undefined!;\n                }\n                const params = this.m2p.asCodeActionParams(model, range, context);\n                const result = await provider.provideCodeActions(params, token);\n                // FIXME: get rid of `|| undefined!` when https://github.com/microsoft/monaco-editor/issues/1560 is resolved\n                return result && this.p2m.asCodeActions(result) || undefined!;\n            }\n        }\n    }\n\n    registerCodeLensProvider(selector: DocumentSelector, provider: CodeLensProvider): Disposable {\n        const codeLensProvider = this.createCodeLensProvider(selector, provider);\n        const providers = new DisposableCollection();\n        for (const language of this.matchLanguage(selector)) {\n            providers.push(monaco.languages.registerCodeLensProvider(language, codeLensProvider));\n        }\n        return providers;\n    }\n\n    protected createCodeLensProvider(selector: DocumentSelector, provider: CodeLensProvider): monaco.languages.CodeLensProvider {\n        return {\n            provideCodeLenses: async (model, token) => {\n                if (!this.matchModel(selector, MonacoModelIdentifier.fromModel(model))) {\n                    return undefined;\n                }\n                const params = this.m2p.asCodeLensParams(model);\n                const result = await provider.provideCodeLenses(params, token);\n                return result && this.p2m.asCodeLenses(result);\n            },\n            resolveCodeLens: provider.resolveCodeLens ? async (model, codeLens, token) => {\n                if (!this.matchModel(selector, MonacoModelIdentifier.fromModel(model))) {\n                    return codeLens;\n                }\n                const protocolCodeLens = this.m2p.asCodeLens(codeLens);\n                const result = await provider.resolveCodeLens!(protocolCodeLens, token);\n                if (result) {\n                    const resolvedCodeLens = this.p2m.asCodeLens(result);\n                    Object.assign(codeLens, resolvedCodeLens);\n                }\n                return codeLens;\n            } : ((_, codeLens) => codeLens)\n        }\n    }\n\n    registerDocumentFormattingEditProvider(selector: DocumentSelector, provider: DocumentFormattingEditProvider): Disposable {\n        const documentFormattingEditProvider = this.createDocumentFormattingEditProvider(selector, provider);\n        const providers = new DisposableCollection();\n        for (const language of this.matchLanguage(selector)) {\n            providers.push(monaco.languages.registerDocumentFormattingEditProvider(language, documentFormattingEditProvider));\n        }\n        return providers;\n    }\n\n    protected createDocumentFormattingEditProvider(selector: DocumentSelector, provider: DocumentFormattingEditProvider): monaco.languages.DocumentFormattingEditProvider {\n        return {\n            provideDocumentFormattingEdits: async (model, options, token) => {\n                if (!this.matchModel(selector, MonacoModelIdentifier.fromModel(model))) {\n                    return undefined;\n                }\n                const params = this.m2p.asDocumentFormattingParams(model, options);\n                const result = await provider.provideDocumentFormattingEdits(params, token);\n                return result && this.p2m.asTextEdits(result);\n            }\n        }\n    }\n\n    registerDocumentRangeFormattingEditProvider(selector: DocumentSelector, provider: DocumentRangeFormattingEditProvider): Disposable {\n        const documentRangeFormattingEditProvider = this.createDocumentRangeFormattingEditProvider(selector, provider);\n        const providers = new DisposableCollection();\n        for (const language of this.matchLanguage(selector)) {\n            providers.push(monaco.languages.registerDocumentRangeFormattingEditProvider(language, documentRangeFormattingEditProvider));\n        }\n        return providers;\n    }\n\n    createDocumentRangeFormattingEditProvider(selector: DocumentSelector, provider: DocumentRangeFormattingEditProvider): monaco.languages.DocumentRangeFormattingEditProvider {\n        return {\n            provideDocumentRangeFormattingEdits: async (model, range, options, token) => {\n                if (!this.matchModel(selector, MonacoModelIdentifier.fromModel(model))) {\n                    return undefined;\n                }\n                const params = this.m2p.asDocumentRangeFormattingParams(model, range, options);\n                const result = await provider.provideDocumentRangeFormattingEdits(params, token);\n                return result && this.p2m.asTextEdits(result);\n            }\n        }\n    }\n\n    registerOnTypeFormattingEditProvider(selector: DocumentSelector, provider: OnTypeFormattingEditProvider, firstTriggerCharacter: string, ...moreTriggerCharacter: string[]): Disposable {\n        const onTypeFormattingEditProvider = this.createOnTypeFormattingEditProvider(selector, provider, firstTriggerCharacter, ...moreTriggerCharacter);\n        const providers = new DisposableCollection();\n        for (const language of this.matchLanguage(selector)) {\n            providers.push(monaco.languages.registerOnTypeFormattingEditProvider(language, onTypeFormattingEditProvider));\n        }\n        return providers;\n    }\n\n    protected createOnTypeFormattingEditProvider(selector: DocumentSelector, provider: OnTypeFormattingEditProvider, firstTriggerCharacter: string, ...moreTriggerCharacter: string[]): monaco.languages.OnTypeFormattingEditProvider {\n        const autoFormatTriggerCharacters = [firstTriggerCharacter].concat(moreTriggerCharacter)\n        return {\n            autoFormatTriggerCharacters,\n            provideOnTypeFormattingEdits: async (model, position, ch, options, token) => {\n                if (!this.matchModel(selector, MonacoModelIdentifier.fromModel(model))) {\n                    return undefined;\n                }\n                const params = this.m2p.asDocumentOnTypeFormattingParams(model, position, ch, options);\n                const result = await provider.provideOnTypeFormattingEdits(params, token);\n                return result && this.p2m.asTextEdits(result);\n            }\n        }\n    }\n\n    registerRenameProvider(selector: DocumentSelector, provider: RenameProvider): Disposable {\n        const renameProvider = this.createRenameProvider(selector, provider);\n        const providers = new DisposableCollection();\n        for (const language of this.matchLanguage(selector)) {\n            providers.push(monaco.languages.registerRenameProvider(language, renameProvider));\n        }\n        return providers;\n    }\n\n    protected createRenameProvider(selector: DocumentSelector, provider: RenameProvider): monaco.languages.RenameProvider {\n        return {\n            provideRenameEdits: async (model, position, newName, token) => {\n                if (!this.matchModel(selector, MonacoModelIdentifier.fromModel(model))) {\n                    return undefined;\n                }\n                const params = this.m2p.asRenameParams(model, position, newName);\n                const result = await provider.provideRenameEdits(params, token);\n                return result && this.p2m.asWorkspaceEdit(result);\n            }\n        }\n    }\n\n    registerDocumentLinkProvider(selector: DocumentSelector, provider: DocumentLinkProvider): Disposable {\n        const linkProvider = this.createDocumentLinkProvider(selector, provider);\n        const providers = new DisposableCollection();\n        for (const language of this.matchLanguage(selector)) {\n            providers.push(monaco.languages.registerLinkProvider(language, linkProvider));\n        }\n        return providers;\n    }\n\n    protected createDocumentLinkProvider(selector: DocumentSelector, provider: DocumentLinkProvider): monaco.languages.LinkProvider {\n        return {\n            provideLinks: async (model, token) => {\n                if (!this.matchModel(selector, MonacoModelIdentifier.fromModel(model))) {\n                    return undefined;\n                }\n                const params = this.m2p.asDocumentLinkParams(model);\n                const result = await provider.provideDocumentLinks(params, token);\n                return result && this.p2m.asDocumentLinks(result);\n            },\n            resolveLink: async (link: monaco.languages.ILink, token) => {\n                // resolve the link if the provider supports it\n                // and the link doesn't have a url set\n                if (provider.resolveDocumentLink && (link.url === null || link.url === undefined)) {\n                    const documentLink = this.m2p.asDocumentLink(link);\n                    const result = await provider.resolveDocumentLink(documentLink, token);\n                    if (result) {\n                        const resolvedLink = this.p2m.asDocumentLink(result);\n                        Object.assign(link, resolvedLink);\n                    }\n                }\n                return link;\n            }\n        }\n    }\n\n    registerImplementationProvider(selector: DocumentSelector, provider: ImplementationProvider): Disposable {\n        const implementationProvider = this.createImplementationProvider(selector, provider);\n        const providers = new DisposableCollection();\n        for (const language of this.matchLanguage(selector)) {\n            providers.push(monaco.languages.registerImplementationProvider(language, implementationProvider));\n        }\n        return providers;\n    }\n\n    protected createImplementationProvider(selector: DocumentSelector, provider: ImplementationProvider): monaco.languages.ImplementationProvider {\n        return {\n            provideImplementation: async (model, position, token) => {\n                if (!this.matchModel(selector, MonacoModelIdentifier.fromModel(model))) {\n                    return undefined;\n                }\n                const params = this.m2p.asTextDocumentPositionParams(model, position);\n                const result = await provider.provideImplementation(params, token);\n                return result && this.p2m.asDefinitionResult(result);\n            }\n        }\n    }\n\n    registerTypeDefinitionProvider(selector: DocumentSelector, provider: TypeDefinitionProvider): Disposable {\n        const typeDefinitionProvider = this.createTypeDefinitionProvider(selector, provider);\n        const providers = new DisposableCollection();\n        for (const language of this.matchLanguage(selector)) {\n            providers.push(monaco.languages.registerTypeDefinitionProvider(language, typeDefinitionProvider));\n        }\n        return providers;\n    }\n\n    protected createTypeDefinitionProvider(selector: DocumentSelector, provider: TypeDefinitionProvider): monaco.languages.TypeDefinitionProvider {\n        return {\n            provideTypeDefinition: async (model, position, token) => {\n                if (!this.matchModel(selector, MonacoModelIdentifier.fromModel(model))) {\n                    return undefined;\n                }\n                const params = this.m2p.asTextDocumentPositionParams(model, position);\n                const result = await provider.provideTypeDefinition(params, token);\n                return result && this.p2m.asDefinitionResult(result);\n            }\n        }\n    }\n\n    registerColorProvider(selector: DocumentSelector, provider: DocumentColorProvider): Disposable {\n        const documentColorProvider = this.createDocumentColorProvider(selector, provider);\n        const providers = new DisposableCollection();\n        for (const language of this.matchLanguage(selector)) {\n            providers.push(monaco.languages.registerColorProvider(language, documentColorProvider));\n        }\n        return providers;\n    }\n\n    protected createDocumentColorProvider(selector: DocumentSelector, provider: DocumentColorProvider): monaco.languages.DocumentColorProvider {\n        return {\n            provideDocumentColors: async (model, token) => {\n                if (!this.matchModel(selector, MonacoModelIdentifier.fromModel(model))) {\n                    return undefined;\n                }\n                const textDocument = this.m2p.asTextDocumentIdentifier(model);\n                const result = await provider.provideDocumentColors({ textDocument }, token);\n                return result && this.p2m.asColorInformations(result);\n            },\n            provideColorPresentations: async (model, info, token) => {\n                if (!this.matchModel(selector, MonacoModelIdentifier.fromModel(model))) {\n                    return undefined;\n                }\n                const textDocument = this.m2p.asTextDocumentIdentifier(model);\n                const range = this.m2p.asRange(info.range);\n                const result = await provider.provideColorPresentations({\n                    textDocument,\n                    color: info.color,\n                    range\n                }, token);\n                return result && this.p2m.asColorPresentations(result);\n            }\n        }\n    }\n\n    registerFoldingRangeProvider(selector: DocumentSelector, provider: FoldingRangeProvider): Disposable {\n        const foldingRangeProvider = this.createFoldingRangeProvider(selector, provider);\n        const providers = new DisposableCollection();\n        for (const language of this.matchLanguage(selector)) {\n            providers.push(monaco.languages.registerFoldingRangeProvider(language, foldingRangeProvider));\n        }\n        return providers;\n    }\n\n    protected createFoldingRangeProvider(selector: DocumentSelector, provider: FoldingRangeProvider): monaco.languages.FoldingRangeProvider {\n        return {\n            provideFoldingRanges: async (model, context, token) => {\n                if (!this.matchModel(selector, MonacoModelIdentifier.fromModel(model))) {\n                    return undefined;\n                }\n                const textDocument = this.m2p.asTextDocumentIdentifier(model);\n                const result = await provider.provideFoldingRanges({\n                    textDocument\n                }, token);\n                return result && this.p2m.asFoldingRanges(result);\n            }\n        }\n    }\n\n    protected matchModel(selector: string | DocumentFilter | DocumentSelector, model: MonacoModelIdentifier): boolean {\n        if (Array.isArray(selector)) {\n            return selector.some(filter => this.matchModel(filter, model));\n        }\n        if (DocumentFilter.is(selector)) {\n            if (!!selector.language && selector.language !== model.languageId) {\n                return false;\n            }\n            if (!!selector.scheme && selector.scheme !== model.uri.scheme) {\n                return false;\n            }\n            if (!!selector.pattern && !testGlob(selector.pattern, model.uri.path)) {\n                return false;\n            }\n            return true;\n        }\n        return selector === model.languageId;\n    }\n\n    protected matchLanguage(selector: string | DocumentFilter | DocumentSelector): Set<string> {\n        const languages = new Set<string>();\n        if (Array.isArray(selector)) {\n            for (const filter of selector) {\n                languages.add(this.matchLanguageByFilter(filter));\n            }\n        } else {\n            languages.add(this.matchLanguageByFilter(selector));\n        }\n        return languages;\n    }\n\n    protected matchLanguageByFilter(selector: string | DocumentFilter): string {\n        if (DocumentFilter.is(selector)) {\n            if (!selector.language) {\n                return '*';\n            }\n            return selector.language;\n        }\n        return selector;\n    }\n\n}\n","/* --------------------------------------------------------------------------------------------\n * Copyright (c) 2018 TypeFox GmbH (http://www.typefox.io). All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nimport { MonacoToProtocolConverter, ProtocolToMonacoConverter } from \"./monaco-converter\";\nimport { MonacoCommands } from './monaco-commands';\nimport { MonacoLanguages } from \"./monaco-languages\";\nimport { MonacoWorkspace } from \"./monaco-workspace\";\nimport { ConsoleWindow } from \"./console-window\";\nimport { Services } from \"./services\";\n\nexport interface MonacoServices extends Services {\n    commands: MonacoCommands\n    languages: MonacoLanguages\n    workspace: MonacoWorkspace\n    window: ConsoleWindow\n}\nexport namespace MonacoServices {\n    export interface Options {\n        rootUri?: string\n    }\n    export type Provider = () => MonacoServices;\n    export function create(editor: monaco.editor.IStandaloneCodeEditor, options: Options = {}): MonacoServices {\n        const m2p = new MonacoToProtocolConverter();\n        const p2m = new ProtocolToMonacoConverter();\n        return {\n            commands: new MonacoCommands(editor),\n            languages: new MonacoLanguages(p2m, m2p),\n            workspace: new MonacoWorkspace(p2m, m2p, options.rootUri),\n            window: new ConsoleWindow()\n        }\n    }\n    export function install(editor: monaco.editor.IStandaloneCodeEditor, options: Options = {}): MonacoServices {\n        const services = create(editor, options);\n        Services.install(services);\n        return services;\n    }\n    export function get(): MonacoServices {\n        return Services.get() as MonacoServices;\n    }\n}","/* --------------------------------------------------------------------------------------------\n * Copyright (c) 2018 TypeFox GmbH (http://www.typefox.io). All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nimport { MonacoToProtocolConverter, ProtocolToMonacoConverter } from './monaco-converter';\nimport { Workspace, WorkspaceEdit, TextDocumentDidChangeEvent, TextDocument, Event, Emitter } from './services';\nimport IModel = monaco.editor.IModel;\nimport IIdentifiedSingleEditOperation = monaco.editor.IIdentifiedSingleEditOperation;\n\nexport class MonacoWorkspace implements Workspace {\n\n    protected readonly documents = new Map<string, TextDocument>();\n    protected readonly onDidOpenTextDocumentEmitter = new Emitter<TextDocument>();\n    protected readonly onDidCloseTextDocumentEmitter = new Emitter<TextDocument>();\n    protected readonly onDidChangeTextDocumentEmitter = new Emitter<TextDocumentDidChangeEvent>();\n\n    constructor(\n        protected readonly p2m: ProtocolToMonacoConverter,\n        protected readonly m2p: MonacoToProtocolConverter,\n        protected _rootUri: string | null = null) {\n        for (const model of monaco.editor.getModels()) {\n            this.addModel(model);\n        }\n        monaco.editor.onDidCreateModel(model => this.addModel(model));\n        monaco.editor.onWillDisposeModel(model => this.removeModel(model));\n    }\n\n    get rootUri() {\n        return this._rootUri;\n    }\n\n    protected removeModel(model: IModel): void {\n        const uri = model.uri.toString();\n        const document = this.documents.get(uri);\n        if (document) {\n            this.documents.delete(uri);\n            this.onDidCloseTextDocumentEmitter.fire(document);\n        }\n    }\n\n    protected addModel(model: IModel): void {\n        const uri = model.uri.toString();\n        const document = this.setModel(uri, model);\n        this.onDidOpenTextDocumentEmitter.fire(document)\n        model.onDidChangeContent(event =>\n            this.onDidChangeContent(uri, model, event)\n        );\n    }\n\n    protected onDidChangeContent(uri: string, model: IModel, event: monaco.editor.IModelContentChangedEvent) {\n        const textDocument = this.setModel(uri, model);\n        const contentChanges = [];\n        for (const change of event.changes) {\n            const range = this.m2p.asRange(change.range);\n            const rangeLength = change.rangeLength;\n            const text = change.text;\n            contentChanges.push({ range, rangeLength, text });\n        }\n        this.onDidChangeTextDocumentEmitter.fire({\n            textDocument,\n            contentChanges\n        });\n    }\n\n    protected setModel(uri: string, model: IModel): TextDocument {\n        const document = TextDocument.create(uri, model.getModeId(), model.getVersionId(), model.getValue());\n        this.documents.set(uri, document);\n        return document;\n    }\n\n    get textDocuments(): TextDocument[] {\n        return Array.from(this.documents.values());\n    }\n\n    get onDidOpenTextDocument(): Event<TextDocument> {\n        return this.onDidOpenTextDocumentEmitter.event;\n    }\n\n    get onDidCloseTextDocument(): Event<TextDocument> {\n        return this.onDidCloseTextDocumentEmitter.event;\n    }\n\n    get onDidChangeTextDocument(): Event<TextDocumentDidChangeEvent> {\n        return this.onDidChangeTextDocumentEmitter.event;\n    }\n\n    public applyEdit(workspaceEdit: WorkspaceEdit): Promise<boolean> {\n        const edit: monaco.languages.WorkspaceEdit = this.p2m.asWorkspaceEdit(workspaceEdit);\n\n        // Collect all referenced models\n        const models: { [uri: string]: monaco.editor.IModel } = edit.edits ? edit.edits.reduce(\n            (acc: { [uri: string]: monaco.editor.IModel }, currentEdit) => {\n                const textEdit = currentEdit as monaco.languages.ResourceTextEdit;\n                acc[textEdit.resource.toString()] = monaco.editor.getModel(textEdit.resource) as monaco.editor.ITextModel;\n                return acc;\n            }, {}\n        ) : {};\n\n        // If any of the models do not exist, refuse to apply the edit.\n        if (!Object.keys(models).map(uri => models[uri]).every(model => !!model)) {\n            return Promise.resolve(false);\n        }\n\n        // Group edits by resource so we can batch them when applying\n        const editsByResource: { [uri: string]: IIdentifiedSingleEditOperation[] } = edit.edits ? edit.edits.reduce(\n            (acc: { [uri: string]: IIdentifiedSingleEditOperation[] }, currentEdit) => {\n                const textEdit = currentEdit as monaco.languages.ResourceTextEdit;\n                const uri = textEdit.resource.toString();\n                if (!(uri in acc)) {\n                    acc[uri] = [];\n                }\n                const operations = textEdit.edits.map(edit => {\n                    return {\n                        range: monaco.Range.lift(edit.range as monaco.IRange),\n                        text: edit.text as string,\n                    }\n                });\n                acc[uri].push(...operations);\n                return acc;\n            }, {}\n        ) : {};\n\n        // Apply edits for each resource\n        Object.keys(editsByResource).forEach(uri => {\n            models[uri].pushEditOperations(\n                [],  // Do not try and preserve editor selections.\n                editsByResource[uri].map(resourceEdit => {\n                    return {\n                        identifier: { major: 1, minor: 0 },\n                        range: resourceEdit.range,\n                        text: resourceEdit.text,\n                        forceMoveMarkers: true,\n                    };\n                }),\n                () => [],  // Do not try and preserve editor selections.\n            );\n        });\n        return Promise.resolve(true);\n    }\n\n}\n","/* --------------------------------------------------------------------------------------------\n * Copyright (c) 2018 TypeFox GmbH (http://www.typefox.io). All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\n'use strict';\n\nimport {\n    DocumentSelector, MessageActionItem, MessageType,\n    TextDocumentPositionParams, ReferenceParams, CodeActionParams, CodeLensParams, DocumentFormattingParams,\n    DocumentRangeFormattingParams, DocumentOnTypeFormattingParams, RenameParams, DocumentLinkParams,\n    WorkspaceClientCapabilities, DidChangeTextDocumentParams, Diagnostic, TextDocument, CompletionItem, CompletionList,\n    Hover, SignatureHelp, Definition, Location, DocumentHighlight,\n    SymbolInformation, Command, CodeLens, TextEdit, WorkspaceEdit,\n    DocumentLink, TextDocumentSaveReason, DocumentSymbolParams,\n    WorkspaceSymbolParams, TextDocumentContentChangeEvent, CompletionParams,\n    ColorInformation, ColorPresentation, DocumentColorParams, ColorPresentationParams,\n    FoldingRange, FoldingRangeRequestParam, DocumentFilter, DocumentSymbol, CodeAction,\n    Declaration, SelectionRangeParams, SelectionRange\n} from 'vscode-languageserver-protocol';\n\nimport {\n    Disposable, CancellationToken, Event, Emitter\n} from 'vscode-jsonrpc';\n\nimport Uri from 'vscode-uri';\n\nexport {\n    Disposable, CancellationToken, Event, Emitter\n}\nexport * from 'vscode-languageserver-protocol/lib/main';\n\nexport interface Services {\n    languages: Languages;\n    workspace: Workspace;\n    commands?: Commands;\n    window?: Window;\n}\nexport namespace Services {\n    const global = window as any;\n    const symbol = Symbol('Services');\n    export type Provider = () => Services;\n    export const get: Provider = () => {\n        const services = global[symbol];\n        if (!services) {\n            throw new Error('Language Client services has not been installed');\n        }\n        return services;\n    }\n    export function install(services: Services): Disposable {\n        if (global[symbol]) {\n            console.error(new Error('Language Client services has been overridden'));\n        }\n        global[symbol] = services;\n\n        return Disposable.create(() => global[symbol] = undefined)\n    }\n}\n\nexport function isDocumentSelector(selector: any): selector is DocumentSelector {\n    if (!selector || !Array.isArray(selector)) {\n        return false;\n    }\n    return selector.every(value => typeof value === 'string' || DocumentFilter.is(value));\n}\n\nexport interface DiagnosticCollection extends Disposable {\n    set(uri: string, diagnostics: Diagnostic[]): void;\n}\n\nexport type ProviderResult<T> = T | undefined | null | PromiseLike<T | undefined | null>;\n\nexport interface CompletionItemProvider {\n    provideCompletionItems(params: CompletionParams, token: CancellationToken): ProviderResult<CompletionItem[] | CompletionList>;\n    resolveCompletionItem?(item: CompletionItem, token: CancellationToken): ProviderResult<CompletionItem>;\n}\n\nexport interface HoverProvider {\n    provideHover(params: TextDocumentPositionParams, token: CancellationToken): ProviderResult<Hover>;\n}\n\nexport enum SignatureHelpTriggerKind {\n    Invoke = 1,\n    TriggerCharacter = 2,\n    ContentChange = 3\n}\n\nexport interface SignatureHelpContext {\n    readonly triggerKind: SignatureHelpTriggerKind;\n    readonly triggerCharacter?: string;\n    readonly isRetrigger: boolean;\n    readonly activeSignatureHelp?: SignatureHelp;\n}\n\nexport interface SignatureHelpProvider {\n    readonly triggerCharacters?: ReadonlyArray<string>;\n    readonly retriggerCharacters?: ReadonlyArray<string>;\n    provideSignatureHelp(params: TextDocumentPositionParams, token: CancellationToken, context: SignatureHelpContext): ProviderResult<SignatureHelp>;\n}\n\nexport interface DefinitionProvider {\n    provideDefinition(params: TextDocumentPositionParams, token: CancellationToken): ProviderResult<Definition>;\n}\n\nexport interface ReferenceProvider {\n    provideReferences(params: ReferenceParams, token: CancellationToken): ProviderResult<Location[]>;\n}\n\nexport interface DocumentHighlightProvider {\n    provideDocumentHighlights(params: TextDocumentPositionParams, token: CancellationToken): ProviderResult<DocumentHighlight[]>;\n}\n\nexport interface DocumentSymbolProvider {\n    provideDocumentSymbols(params: DocumentSymbolParams, token: CancellationToken): ProviderResult<SymbolInformation[] | DocumentSymbol[]>;\n}\n\nexport interface WorkspaceSymbolProvider {\n    provideWorkspaceSymbols(params: WorkspaceSymbolParams, token: CancellationToken): ProviderResult<SymbolInformation[]>;\n}\n\nexport interface CodeActionProvider {\n    provideCodeActions(params: CodeActionParams, token: CancellationToken): ProviderResult<(Command | CodeAction)[]>;\n}\n\nexport interface CodeLensProvider {\n    provideCodeLenses(params: CodeLensParams, token: CancellationToken): ProviderResult<CodeLens[]>;\n    resolveCodeLens?(codeLens: CodeLens, token: CancellationToken): ProviderResult<CodeLens>;\n}\n\nexport interface DocumentFormattingEditProvider {\n    provideDocumentFormattingEdits(params: DocumentFormattingParams, token: CancellationToken): ProviderResult<TextEdit[]>;\n}\n\nexport interface DocumentRangeFormattingEditProvider {\n    provideDocumentRangeFormattingEdits(params: DocumentRangeFormattingParams, token: CancellationToken): ProviderResult<TextEdit[]>;\n}\n\nexport interface OnTypeFormattingEditProvider {\n    provideOnTypeFormattingEdits(params: DocumentOnTypeFormattingParams, token: CancellationToken): ProviderResult<TextEdit[]>;\n}\n\nexport interface RenameProvider {\n    provideRenameEdits(params: RenameParams, token: CancellationToken): ProviderResult<WorkspaceEdit>;\n}\n\nexport interface DocumentLinkProvider {\n    provideDocumentLinks(params: DocumentLinkParams, token: CancellationToken): ProviderResult<DocumentLink[]>;\n    resolveDocumentLink?(link: DocumentLink, token: CancellationToken): ProviderResult<DocumentLink>;\n}\n\nexport interface DocumentIdentifier {\n    uri: string;\n    languageId: string;\n}\nexport namespace DocumentIdentifier {\n    export function is(arg: any): arg is DocumentIdentifier {\n        return !!arg && ('uri' in arg) && ('languageId' in arg);\n    }\n}\n\nexport interface ImplementationProvider {\n    provideImplementation(params: TextDocumentPositionParams, token: CancellationToken): ProviderResult<Definition>;\n}\n\nexport interface TypeDefinitionProvider {\n    provideTypeDefinition(params: TextDocumentPositionParams, token: CancellationToken): ProviderResult<Definition>;\n}\n\nexport interface DeclarationProvider {\n    provideDeclaration(params: TextDocumentPositionParams, token: CancellationToken): ProviderResult<Declaration>;\n}\n\nexport interface DocumentColorProvider {\n    provideDocumentColors(params: DocumentColorParams, token: CancellationToken): ProviderResult<ColorInformation[]>;\n    provideColorPresentations(params: ColorPresentationParams, token: CancellationToken): ProviderResult<ColorPresentation[]>;\n}\n\nexport interface FoldingRangeProvider {\n    provideFoldingRanges(params: FoldingRangeRequestParam, token: CancellationToken): ProviderResult<FoldingRange[]>;\n}\n\nexport interface SelectionRangeProvider {\n    provideSelectionRanges(params: SelectionRangeParams, token: CancellationToken): ProviderResult<SelectionRange[]>;\n}\n\nexport interface Languages {\n    match(selector: DocumentSelector, document: DocumentIdentifier): boolean;\n    createDiagnosticCollection?(name?: string): DiagnosticCollection;\n    registerCompletionItemProvider?(selector: DocumentSelector, provider: CompletionItemProvider, ...triggerCharacters: string[]): Disposable;\n    registerHoverProvider?(selector: DocumentSelector, provider: HoverProvider): Disposable;\n    registerSignatureHelpProvider?(selector: DocumentSelector, provider: SignatureHelpProvider): Disposable;\n    registerDefinitionProvider?(selector: DocumentSelector, provider: DefinitionProvider): Disposable;\n    registerReferenceProvider?(selector: DocumentSelector, provider: ReferenceProvider): Disposable;\n    registerDocumentHighlightProvider?(selector: DocumentSelector, provider: DocumentHighlightProvider): Disposable;\n    registerDocumentSymbolProvider?(selector: DocumentSelector, provider: DocumentSymbolProvider): Disposable;\n    registerWorkspaceSymbolProvider?(provider: WorkspaceSymbolProvider): Disposable;\n    registerCodeActionsProvider?(selector: DocumentSelector, provider: CodeActionProvider): Disposable;\n    registerCodeLensProvider?(selector: DocumentSelector, provider: CodeLensProvider): Disposable;\n    registerDocumentFormattingEditProvider?(selector: DocumentSelector, provider: DocumentFormattingEditProvider): Disposable;\n    registerDocumentRangeFormattingEditProvider?(selector: DocumentSelector, provider: DocumentRangeFormattingEditProvider): Disposable;\n    registerOnTypeFormattingEditProvider?(selector: DocumentSelector, provider: OnTypeFormattingEditProvider, firstTriggerCharacter: string, ...moreTriggerCharacter: string[]): Disposable;\n    registerRenameProvider?(selector: DocumentSelector, provider: RenameProvider): Disposable;\n    registerDocumentLinkProvider?(selector: DocumentSelector, provider: DocumentLinkProvider): Disposable;\n    registerImplementationProvider?(selector: DocumentSelector, provider: ImplementationProvider): Disposable;\n    registerTypeDefinitionProvider?(selector: DocumentSelector, provider: TypeDefinitionProvider): Disposable;\n    registerDeclarationProvider?(selector: DocumentSelector, provider: DeclarationProvider): Disposable;\n    registerColorProvider?(selector: DocumentSelector, provider: DocumentColorProvider): Disposable;\n    registerFoldingRangeProvider?(selector: DocumentSelector, provider: FoldingRangeProvider): Disposable;\n    registerSelectionRangeProvider?(selector: DocumentSelector, provider: SelectionRangeProvider): Disposable;\n}\n\nexport interface TextDocumentDidChangeEvent {\n    readonly textDocument: TextDocument;\n    readonly contentChanges: TextDocumentContentChangeEvent[];\n}\n\nexport interface TextDocumentWillSaveEvent {\n    readonly textDocument: TextDocument;\n    readonly reason: TextDocumentSaveReason;\n    waitUntil?(PromiseLike: PromiseLike<TextEdit[]>): void;\n}\n\nexport enum ConfigurationTarget {\n    Global = 1,\n    Workspace = 2,\n    WorkspaceFolder = 3\n}\n\nexport interface WorkspaceConfiguration {\n    toJSON(): any;\n    get<T>(section: string): T | undefined;\n    get<T>(section: string, defaultValue: T): T;\n    has(section: string): boolean;\n    readonly [key: string]: any;\n}\n\nexport interface FileSystemWatcher extends Disposable {\n    readonly onDidCreate: Event<Uri>;\n    readonly onDidChange: Event<Uri>;\n    readonly onDidDelete: Event<Uri>;\n}\n\nexport interface ConfigurationChangeEvent {\n    affectsConfiguration(section: string): boolean;\n}\nexport interface Configurations {\n    getConfiguration(section?: string, resource?: string): WorkspaceConfiguration;\n    readonly onDidChangeConfiguration: Event<ConfigurationChangeEvent>;\n}\n\nexport interface Workspace {\n    readonly capabilities?: WorkspaceClientCapabilities;\n    readonly rootPath?: string | null;\n    readonly rootUri: string | null;\n    readonly workspaceFolders?: typeof import('vscode').workspace.workspaceFolders;\n    readonly onDidChangeWorkspaceFolders?: typeof import('vscode').workspace.onDidChangeWorkspaceFolders\n    readonly textDocuments: TextDocument[];\n    readonly onDidOpenTextDocument: Event<TextDocument>;\n    readonly onDidCloseTextDocument: Event<TextDocument>;\n    readonly onDidChangeTextDocument: Event<DidChangeTextDocumentParams>;\n    readonly configurations?: Configurations;\n    readonly onWillSaveTextDocument?: Event<TextDocumentWillSaveEvent>;\n    readonly onDidSaveTextDocument?: Event<TextDocument>;\n    applyEdit(changes: WorkspaceEdit): PromiseLike<boolean>;\n    createFileSystemWatcher?(globPattern: string, ignoreCreateEvents?: boolean, ignoreChangeEvents?: boolean, ignoreDeleteEvents?: boolean): FileSystemWatcher;\n}\n\nexport interface Commands {\n    registerCommand(command: string, callback: (...args: any[]) => any, thisArg?: any): Disposable;\n}\n\nexport interface OutputChannel extends Disposable {\n    append(value: string): void;\n    appendLine(line: string): void;\n    show(preserveFocus?: boolean): void;\n}\n\nexport interface Window {\n    showMessage<T extends MessageActionItem>(type: MessageType, message: string, ...actions: T[]): PromiseLike<T | undefined>;\n    createOutputChannel?(name: string): OutputChannel;\n    withProgress?: typeof import('vscode').window.withProgress\n}","/* --------------------------------------------------------------------------------------------\n * Copyright (c) 2018 TypeFox GmbH (http://www.typefox.io). All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\n\nimport * as vscode from \"vscode\";\nimport URI from \"vscode-uri\"\nimport { Disposable } from \"./disposable\";\nimport {\n    Services, Event, Diagnostic, WorkspaceEdit, isDocumentSelector,\n    MessageType, OutputChannel, CompletionTriggerKind, DocumentIdentifier\n} from \"./services\";\n\nexport function createVSCodeApi(servicesProvider: Services.Provider): typeof vscode {\n    const unsupported = () => { throw new Error('unsupported') };\n    const Uri: typeof vscode.Uri = URI;\n    class CompletionItem implements vscode.CompletionItem {\n        constructor(public label: string, public kind?: vscode.CompletionItemKind) { }\n    }\n    class CodeLens implements vscode.CodeLens {\n        constructor(\n            public range: vscode.Range,\n            public command?: vscode.Command\n        ) { }\n\n        get isResolved(): boolean {\n            return !!this.command;\n        }\n    }\n    class DocumentLink implements vscode.DocumentLink {\n        constructor(public range: vscode.Range, public target?: vscode.Uri) { }\n    }\n    class CodeActionKind implements vscode.CodeActionKind {\n        private static readonly sep = '.';\n\n        static Empty = new CodeActionKind('');\n        static QuickFix = new CodeActionKind('quickfix');\n        static Refactor = new CodeActionKind('refactor');\n        static RefactorExtract = CodeActionKind.Refactor.append('extract');\n        static RefactorInline = CodeActionKind.Refactor.append('inline');\n        static RefactorRewrite = CodeActionKind.Refactor.append('rewrite');\n        static Source = new CodeActionKind('source');\n        static SourceOrganizeImports = CodeActionKind.Source.append('organizeImports');\n        static SourceFixAll = CodeActionKind.Source.append('fixAll');\n        private constructor(readonly value: string) { }\n        public append(parts: string): CodeActionKind {\n            return new CodeActionKind(this.value ? this.value + CodeActionKind.sep + parts : parts);\n        }\n        contains = unsupported\n        intersects = unsupported\n    }\n    const workspace: typeof vscode.workspace = {\n        createFileSystemWatcher(globPattern, ignoreCreateEvents, ignoreChangeEvents, ignoreDeleteEvents): vscode.FileSystemWatcher {\n            const services = servicesProvider();\n            if (typeof globPattern !== 'string') {\n                throw new Error('unsupported');\n            }\n            if (services.workspace.createFileSystemWatcher) {\n                const watcher = services.workspace.createFileSystemWatcher(globPattern, ignoreCreateEvents, ignoreChangeEvents, ignoreDeleteEvents);\n                return Object.assign(watcher, {\n                    ignoreCreateEvents: !!ignoreCreateEvents,\n                    ignoreChangeEvents: !!ignoreChangeEvents,\n                    ignoreDeleteEvents: !!ignoreDeleteEvents,\n                });\n            }\n            return {\n                ignoreCreateEvents: !!ignoreCreateEvents,\n                ignoreChangeEvents: !!ignoreChangeEvents,\n                ignoreDeleteEvents: !!ignoreDeleteEvents,\n                onDidCreate: Event.None,\n                onDidChange: Event.None,\n                onDidDelete: Event.None,\n                dispose: () => { }\n            }\n        },\n        applyEdit: async (edit) => {\n            const services = servicesProvider();\n            if (WorkspaceEdit.is(edit)) {\n                return services.workspace.applyEdit(edit);\n            }\n            throw new Error('unsupported');\n        },\n        getConfiguration(section, resource): vscode.WorkspaceConfiguration {\n            const { workspace } = servicesProvider();\n            const configuration = workspace.configurations ?\n                workspace.configurations.getConfiguration(section, resource ? resource.toString() : undefined) :\n                undefined;\n            const result: vscode.WorkspaceConfiguration = {\n                get: (section: string, defaultValue?: any) => {\n                    return configuration ? configuration.get(section, defaultValue) : defaultValue;\n                },\n                has: (section: string) => {\n                    return configuration ? configuration.has(section) : false;\n                },\n                inspect: unsupported,\n                update: unsupported\n            };\n            return Object.assign(result, {\n                toJSON: () => configuration ? configuration.toJSON() : undefined\n            });\n        },\n        get onDidChangeConfiguration(): typeof vscode.workspace.onDidChangeConfiguration {\n            const services = servicesProvider();\n            if (services.workspace.configurations) {\n                return services.workspace.configurations.onDidChangeConfiguration;\n            }\n            return Event.None;\n        },\n        get workspaceFolders(): typeof vscode.workspace.workspaceFolders {\n            const services = servicesProvider();\n            if ('workspaceFolders' in services.workspace) {\n                return services.workspace.workspaceFolders;\n            }\n            const rootUri = services.workspace.rootUri;\n            if (!rootUri) {\n                return undefined;\n            }\n            const uri = Uri.parse(rootUri);\n            return [{\n                uri,\n                index: 0,\n                name: uri.toString()\n            }];\n        },\n        get onDidChangeWorkspaceFolders(): typeof vscode.workspace.onDidChangeWorkspaceFolders {\n            const services = servicesProvider();\n            return services.workspace.onDidChangeWorkspaceFolders || Event.None;\n        },\n        get textDocuments(): typeof vscode.workspace.textDocuments {\n            const services = servicesProvider();\n            return services.workspace.textDocuments as any;\n        },\n        get onDidOpenTextDocument(): typeof vscode.workspace.onDidOpenTextDocument {\n            const services = servicesProvider();\n            return services.workspace.onDidOpenTextDocument as any;\n        },\n        get onDidCloseTextDocument(): typeof vscode.workspace.onDidCloseTextDocument {\n            const services = servicesProvider();\n            return services.workspace.onDidCloseTextDocument as any;\n        },\n        get onDidChangeTextDocument(): typeof vscode.workspace.onDidChangeTextDocument {\n            const services = servicesProvider();\n            return (listener: (e: vscode.TextDocumentChangeEvent) => any, thisArgs?: any, disposables?: Disposable[]): Disposable => {\n                return services.workspace.onDidChangeTextDocument(({ textDocument, contentChanges }) => {\n                    const l: (e: vscode.TextDocumentChangeEvent) => any = listener.bind(thisArgs);\n                    l({\n                        document: <any>textDocument,\n                        contentChanges: <any>contentChanges\n                    });\n                }, undefined, disposables);\n            }\n        },\n        get onWillSaveTextDocument(): typeof vscode.workspace.onWillSaveTextDocument {\n            const services = servicesProvider();\n            const onWillSaveTextDocument = services.workspace.onWillSaveTextDocument;\n            if (!onWillSaveTextDocument) {\n                return Event.None;\n            }\n            return (listener: (e: vscode.TextDocumentWillSaveEvent) => any, thisArgs?: any, disposables?: Disposable[]): Disposable => {\n                return onWillSaveTextDocument(({ textDocument, reason, waitUntil }) => {\n                    const l: (e: vscode.TextDocumentWillSaveEvent) => any = listener.bind(thisArgs);\n                    l({\n                        document: <any>textDocument,\n                        reason: reason,\n                        waitUntil: (edits: PromiseLike<vscode.TextEdit[]>) => {\n                            if (waitUntil) {\n                                waitUntil(edits);\n                            }\n                        }\n                    });\n                }, undefined, disposables);\n            }\n        },\n        get onDidSaveTextDocument(): typeof vscode.workspace.onDidSaveTextDocument {\n            const services = servicesProvider();\n            return (services.workspace.onDidSaveTextDocument as any) || Event.None;\n        },\n        getWorkspaceFolder: unsupported,\n        asRelativePath: unsupported,\n        updateWorkspaceFolders: unsupported,\n        findFiles: unsupported,\n        saveAll: unsupported,\n        openTextDocument: unsupported,\n        registerTextDocumentContentProvider: unsupported,\n        registerTaskProvider: unsupported,\n        registerFileSystemProvider: unsupported,\n        rootPath: undefined,\n        name: undefined\n    };\n    const languages: typeof vscode.languages = {\n        match(selector, document): number {\n            if (!isDocumentSelector(selector)) {\n                throw new Error('unexpected selector: ' + JSON.stringify(selector));\n            }\n            if (!DocumentIdentifier.is(document)) {\n                throw new Error('unexpected document: ' + JSON.stringify(document));\n            }\n            const services = servicesProvider();\n            const result = services.languages.match(selector, document);\n            return result ? 1 : 0;\n        },\n        createDiagnosticCollection(name?: string): vscode.DiagnosticCollection {\n            const services = servicesProvider();\n            const collection = services.languages.createDiagnosticCollection ?\n                services.languages.createDiagnosticCollection(name) : undefined;\n            return {\n                name: name || 'default',\n                set(arg0: vscode.Uri | [vscode.Uri, vscode.Diagnostic[] | undefined][], arg1?: vscode.Diagnostic[] | undefined): void {\n                    if (collection) {\n                        if (arg1) {\n                            collection.set(arg0.toString(), arg1 as Diagnostic[]);\n                        } else {\n                            collection.set(arg0.toString(), []);\n                        }\n                    }\n                },\n                dispose(): void {\n                    if (collection) {\n                        collection.dispose();\n                    }\n                },\n                delete: unsupported,\n                clear: unsupported,\n                forEach: unsupported,\n                get: unsupported,\n                has: unsupported\n            }\n        },\n        registerCompletionItemProvider(selector, provider, ...triggerCharacters) {\n            if (!isDocumentSelector(selector)) {\n                throw new Error('unexpected selector: ' + JSON.stringify(selector));\n            }\n            const { languages } = servicesProvider();\n            if (!languages.registerCompletionItemProvider) {\n                return Disposable.create(() => { });\n            }\n            const resolveCompletionItem = provider.resolveCompletionItem;\n            return languages.registerCompletionItemProvider(selector, {\n                provideCompletionItems({ textDocument, position, context }, token) {\n                    return provider.provideCompletionItems(<any>textDocument, <any>position, token, context || {\n                        triggerKind: CompletionTriggerKind.Invoked\n                    }) as any;\n                },\n                resolveCompletionItem: resolveCompletionItem ? (item, token) => {\n                    return resolveCompletionItem(item as any, token) as any;\n                } : undefined\n            }, ...triggerCharacters);\n        },\n        registerCodeActionsProvider(selector, provider) {\n            if (!isDocumentSelector(selector)) {\n                throw new Error('unexpected selector: ' + JSON.stringify(selector));\n            }\n            const { languages } = servicesProvider();\n            if (!languages.registerCodeActionsProvider) {\n                return Disposable.create(() => { });\n            }\n            return languages.registerCodeActionsProvider(selector, {\n                provideCodeActions({ textDocument, range, context }, token) {\n                    return provider.provideCodeActions(<any>textDocument, <any>range, <any>context, token) as any;\n                }\n            });\n        },\n        registerCodeLensProvider(selector, provider) {\n            if (!isDocumentSelector(selector)) {\n                throw new Error('unexpected selector: ' + JSON.stringify(selector));\n            }\n            const { languages } = servicesProvider();\n            if (!languages.registerCodeLensProvider) {\n                return Disposable.create(() => { });\n            }\n            const resolveCodeLens = provider.resolveCodeLens;\n            return languages.registerCodeLensProvider(selector, {\n                provideCodeLenses({ textDocument }, token) {\n                    return provider.provideCodeLenses(<any>textDocument, token) as any;\n                },\n                resolveCodeLens: resolveCodeLens ? (codeLens, token) => {\n                    return resolveCodeLens(<any>codeLens, token) as any;\n                } : undefined\n            });\n        },\n        registerDefinitionProvider(selector, provider) {\n            if (!isDocumentSelector(selector)) {\n                throw new Error('unexpected selector: ' + JSON.stringify(selector));\n            }\n            const { languages } = servicesProvider();\n            if (!languages.registerDefinitionProvider) {\n                return Disposable.create(() => { });\n            }\n            return languages.registerDefinitionProvider(selector, {\n                provideDefinition({ textDocument, position }, token) {\n                    return provider.provideDefinition(<any>textDocument, <any>position, token) as any;\n                }\n            });\n        },\n        registerImplementationProvider(selector, provider) {\n            if (!isDocumentSelector(selector)) {\n                throw new Error('unexpected selector: ' + JSON.stringify(selector));\n            }\n            const { languages } = servicesProvider();\n            if (!languages.registerImplementationProvider) {\n                return Disposable.create(() => { });\n            }\n            return languages.registerImplementationProvider(selector, {\n                provideImplementation({ textDocument, position }, token) {\n                    return provider.provideImplementation(<any>textDocument, <any>position, token) as any;\n                }\n            });\n        },\n        registerTypeDefinitionProvider(selector, provider) {\n            if (!isDocumentSelector(selector)) {\n                throw new Error('unexpected selector: ' + JSON.stringify(selector));\n            }\n            const { languages } = servicesProvider();\n            if (!languages.registerTypeDefinitionProvider) {\n                return Disposable.create(() => { });\n            }\n            return languages.registerTypeDefinitionProvider(selector, {\n                provideTypeDefinition({ textDocument, position }, token) {\n                    return provider.provideTypeDefinition(<any>textDocument, <any>position, token) as any;\n                }\n            });\n        },\n        registerDeclarationProvider(selector, provider) {\n            if (!isDocumentSelector(selector)) {\n                throw new Error('unexpected selector: ' + JSON.stringify(selector));\n            }\n            const { languages } = servicesProvider();\n            if (!languages.registerDeclarationProvider) {\n                return Disposable.create(() => { });\n            }\n            return languages.registerDeclarationProvider(selector, {\n                provideDeclaration({ textDocument, position }, token) {\n                    return provider.provideDeclaration(<any>textDocument, <any>position, token) as any;\n                }\n            })\n        },\n        registerHoverProvider(selector, provider) {\n            if (!isDocumentSelector(selector)) {\n                throw new Error('unexpected selector: ' + JSON.stringify(selector));\n            }\n            const { languages } = servicesProvider();\n            if (languages.registerHoverProvider) {\n                return languages.registerHoverProvider(selector, {\n                    provideHover({ textDocument, position }, token) {\n                        return provider.provideHover(<any>textDocument, <any>position, token) as any;\n                    }\n                });\n            }\n            return Disposable.create(() => { });\n        },\n        registerDocumentHighlightProvider(selector, provider) {\n            if (!isDocumentSelector(selector)) {\n                throw new Error('unexpected selector: ' + JSON.stringify(selector));\n            }\n            const { languages } = servicesProvider();\n            if (!languages.registerDocumentHighlightProvider) {\n                return Disposable.create(() => { });\n            }\n            return languages.registerDocumentHighlightProvider(selector, {\n                provideDocumentHighlights({ textDocument, position }, token) {\n                    return provider.provideDocumentHighlights(<any>textDocument, <any>position, token) as any;\n                }\n            });\n        },\n        registerDocumentSymbolProvider(selector, provider) {\n            if (!isDocumentSelector(selector)) {\n                throw new Error('unexpected selector: ' + JSON.stringify(selector));\n            }\n            const { languages } = servicesProvider();\n            if (!languages.registerDocumentSymbolProvider) {\n                return Disposable.create(() => { });\n            }\n            return languages.registerDocumentSymbolProvider(selector, {\n                provideDocumentSymbols({ textDocument }, token) {\n                    return provider.provideDocumentSymbols(<any>textDocument, token) as any;\n                }\n            });\n        },\n        registerWorkspaceSymbolProvider(provider) {\n            const { languages } = servicesProvider();\n            if (!languages.registerWorkspaceSymbolProvider) {\n                return Disposable.create(() => { });\n            }\n            return languages.registerWorkspaceSymbolProvider({\n                provideWorkspaceSymbols({ query }, token) {\n                    return provider.provideWorkspaceSymbols(query, token) as any;\n                }\n            });\n        },\n        registerReferenceProvider(selector, provider) {\n            if (!isDocumentSelector(selector)) {\n                throw new Error('unexpected selector: ' + JSON.stringify(selector));\n            }\n            const { languages } = servicesProvider();\n            if (!languages.registerReferenceProvider) {\n                return Disposable.create(() => { });\n            }\n            return languages.registerReferenceProvider(selector, {\n                provideReferences({ textDocument, position, context }, token) {\n                    return provider.provideReferences(<any>textDocument, <any>position, context, token) as any\n                }\n            });\n        },\n        registerRenameProvider(selector, provider) {\n            if (!isDocumentSelector(selector)) {\n                throw new Error('unexpected selector: ' + JSON.stringify(selector));\n            }\n            const { languages } = servicesProvider();\n            if (!languages.registerRenameProvider) {\n                return Disposable.create(() => { });\n            }\n            return languages.registerRenameProvider(selector, {\n                provideRenameEdits({ textDocument, position, newName }, token) {\n                    return provider.provideRenameEdits(<any>textDocument, <any>position, newName, token) as any\n                }\n            });\n        },\n        registerDocumentFormattingEditProvider(selector, provider) {\n            if (!isDocumentSelector(selector)) {\n                throw new Error('unexpected selector: ' + JSON.stringify(selector));\n            }\n            const { languages } = servicesProvider();\n            if (!languages.registerDocumentFormattingEditProvider) {\n                return Disposable.create(() => { });\n            }\n            return languages.registerDocumentFormattingEditProvider(selector, {\n                provideDocumentFormattingEdits({ textDocument, options }, token) {\n                    return provider.provideDocumentFormattingEdits(<any>textDocument, <any>options, token) as any\n                }\n            });\n        },\n        registerDocumentRangeFormattingEditProvider(selector, provider) {\n            if (!isDocumentSelector(selector)) {\n                throw new Error('unexpected selector: ' + JSON.stringify(selector));\n            }\n            const { languages } = servicesProvider();\n            if (!languages.registerDocumentRangeFormattingEditProvider) {\n                return Disposable.create(() => { });\n            }\n            return languages.registerDocumentRangeFormattingEditProvider(selector, {\n                provideDocumentRangeFormattingEdits({ textDocument, range, options }, token) {\n                    return provider.provideDocumentRangeFormattingEdits(<any>textDocument, <any>range, <any>options, token) as any\n                }\n            });\n        },\n        registerOnTypeFormattingEditProvider(selector, provider, firstTriggerCharacter, ...moreTriggerCharacter) {\n            if (!isDocumentSelector(selector)) {\n                throw new Error('unexpected selector: ' + JSON.stringify(selector));\n            }\n            const { languages } = servicesProvider();\n            if (!languages.registerOnTypeFormattingEditProvider) {\n                return Disposable.create(() => { });\n            }\n            return languages.registerOnTypeFormattingEditProvider(selector, {\n                provideOnTypeFormattingEdits({ textDocument, position, ch, options }, token) {\n                    return provider.provideOnTypeFormattingEdits(<any>textDocument, <any>position, ch, <any>options, token) as any\n                }\n            }, firstTriggerCharacter, ...moreTriggerCharacter);\n        },\n        registerSignatureHelpProvider(selector: vscode.DocumentSelector, provider: vscode.SignatureHelpProvider, firstItem?: string | vscode.SignatureHelpProviderMetadata, ...remaining: string[]) {\n            if (!isDocumentSelector(selector)) {\n                throw new Error('unexpected selector: ' + JSON.stringify(selector));\n            }\n            const { languages } = servicesProvider();\n            if (!languages.registerSignatureHelpProvider) {\n                return Disposable.create(() => { });\n            }\n            let triggerCharacters;\n            let retriggerCharacters;\n            if (typeof firstItem === 'string') {\n                triggerCharacters = [firstItem, ...remaining];\n            } else if (firstItem) {\n                triggerCharacters = firstItem.triggerCharacters;\n                retriggerCharacters = firstItem.retriggerCharacters;\n            }\n            return languages.registerSignatureHelpProvider(selector, {\n                triggerCharacters,\n                retriggerCharacters,\n                provideSignatureHelp({ textDocument, position }, token, context) {\n                    return provider.provideSignatureHelp(<any>textDocument, <any>position, token, <any>context) as any\n                }\n            });\n        },\n        registerDocumentLinkProvider(selector, provider) {\n            if (!isDocumentSelector(selector)) {\n                throw new Error('unexpected selector: ' + JSON.stringify(selector));\n            }\n            const { languages } = servicesProvider();\n            if (!languages.registerDocumentLinkProvider) {\n                return Disposable.create(() => { });\n            }\n            const resolveDocumentLink = provider.resolveDocumentLink;\n            return languages.registerDocumentLinkProvider(selector, {\n                provideDocumentLinks({ textDocument }, token) {\n                    return provider.provideDocumentLinks(<any>textDocument, token) as any\n                },\n                resolveDocumentLink: resolveDocumentLink ? (link, token) => {\n                    return resolveDocumentLink(<any>link, token) as any\n                } : undefined\n            });\n        },\n        registerColorProvider(selector, provider) {\n            if (!isDocumentSelector(selector)) {\n                throw new Error('unexpected selector: ' + JSON.stringify(selector));\n            }\n            const { languages } = servicesProvider();\n            if (!languages.registerColorProvider) {\n                return Disposable.create(() => { });\n            }\n            return languages.registerColorProvider(selector, {\n                provideDocumentColors({ textDocument }, token) {\n                    return provider.provideDocumentColors(<any>textDocument, token) as any\n                },\n                provideColorPresentations({ textDocument, color, range }, token) {\n                    return provider.provideColorPresentations(color, {\n                        document: <any>textDocument,\n                        range: <any>range\n                    }, token) as any\n                }\n            });\n        },\n        registerFoldingRangeProvider(selector, provider) {\n            if (!isDocumentSelector(selector)) {\n                throw new Error('unexpected selector: ' + JSON.stringify(selector));\n            }\n            const { languages } = servicesProvider();\n            if (!languages.registerFoldingRangeProvider) {\n                return Disposable.create(() => { });\n            }\n            return languages.registerFoldingRangeProvider(selector, {\n                provideFoldingRanges({ textDocument }, token) {\n                    return provider.provideFoldingRanges(<any>textDocument, {}, token) as any;\n                }\n            });\n        },\n        registerSelectionRangeProvider(selector, provider) {\n            if (!isDocumentSelector(selector)) {\n                throw new Error('unexpected selector: ' + JSON.stringify(selector));\n            }\n            const { languages } = servicesProvider();\n            if (!languages.registerSelectionRangeProvider) {\n                return Disposable.create(() => { });\n            }\n            return languages.registerSelectionRangeProvider(selector, {\n                provideSelectionRanges({ textDocument, positions }, token) {\n                    return provider.provideSelectionRanges(<any>textDocument, <any>positions, token) as any;\n                }\n            });\n        },\n        getLanguages: unsupported,\n        setTextDocumentLanguage: unsupported,\n        getDiagnostics: unsupported,\n        setLanguageConfiguration: unsupported,\n        onDidChangeDiagnostics: unsupported\n    };\n    function showMessage(type: MessageType, arg0: any, ...arg1: any[]): Thenable<any> {\n        if (typeof arg0 !== \"string\") {\n            throw new Error('unexpected message: ' + JSON.stringify(arg0));\n        }\n        const message: string = arg0;\n        if (arg1 !== undefined && !Array.isArray(arg1)) {\n            throw new Error('unexpected actions: ' + JSON.stringify(arg1));\n        }\n        const actions: vscode.MessageItem[] = arg1 || [];\n        const { window } = servicesProvider();\n        if (!window) {\n            return Promise.resolve(undefined);\n        }\n        return window.showMessage(type, message, ...actions);\n    }\n    const window: typeof vscode.window = {\n        showInformationMessage: showMessage.bind(undefined, MessageType.Info),\n        showWarningMessage: showMessage.bind(undefined, MessageType.Warning),\n        showErrorMessage: showMessage.bind(undefined, MessageType.Error),\n        createOutputChannel(name: string): vscode.OutputChannel {\n            const { window } = servicesProvider();\n            const createOutputChannel = window ? window.createOutputChannel : undefined;\n            const channel: OutputChannel | undefined = createOutputChannel ? createOutputChannel.bind(window)(name) : undefined;\n            return {\n                name,\n                append: channel ? channel.append.bind(channel) : () => { },\n                appendLine: channel ? channel.appendLine.bind(channel) : () => { },\n                clear: unsupported,\n                show: (arg: any) => {\n                    if (arg !== undefined && typeof arg !== 'boolean') {\n                        throw new Error('unexpected preserveFocus argument: ' + JSON.stringify(arg, undefined, 4));\n                    }\n                    return channel ? channel.show(arg) : () => { }\n                },\n                hide: unsupported,\n                dispose: channel ? channel.dispose.bind(channel) : () => { }\n            };\n        },\n        withProgress: (options, task) => {\n            const { window } = servicesProvider();\n            if (window && window.withProgress) {\n                return window.withProgress(options, task);\n            }\n            return task({ report: () => { } }, new vscode.CancellationTokenSource().token);\n        },\n        showTextDocument: unsupported,\n        createTextEditorDecorationType: unsupported,\n        showQuickPick: unsupported,\n        showWorkspaceFolderPick: unsupported,\n        showOpenDialog: unsupported,\n        showSaveDialog: unsupported,\n        showInputBox: unsupported,\n        createWebviewPanel: unsupported,\n        setStatusBarMessage: unsupported,\n        withScmProgress: unsupported,\n        createStatusBarItem: unsupported,\n        createTerminal: unsupported,\n        registerTreeDataProvider: unsupported,\n        createTreeView: unsupported,\n        registerWebviewPanelSerializer: unsupported,\n        get activeTextEditor() {\n            return unsupported();\n        },\n        get visibleTextEditors() {\n            return unsupported();\n        },\n        onDidChangeActiveTextEditor: unsupported,\n        onDidChangeVisibleTextEditors: unsupported,\n        onDidChangeTextEditorSelection: unsupported,\n        onDidChangeTextEditorVisibleRanges: unsupported,\n        onDidChangeTextEditorOptions: unsupported,\n        onDidChangeTextEditorViewColumn: unsupported,\n        get terminals() {\n            return unsupported();\n        },\n        get activeTerminal() {\n            return unsupported();\n        },\n        onDidChangeActiveTerminal: unsupported,\n        onDidOpenTerminal: unsupported,\n        onDidCloseTerminal: unsupported,\n        get state() {\n            return unsupported();\n        },\n        onDidChangeWindowState: unsupported,\n        createQuickPick: unsupported,\n        createInputBox: unsupported,\n        registerUriHandler: unsupported\n    };\n    const commands: typeof vscode.commands = {\n        registerCommand(command, callback, thisArg): Disposable {\n            const { commands } = servicesProvider();\n            if (!commands) {\n                return Disposable.create(() => { });\n            }\n            return commands.registerCommand(command, callback, thisArg);\n        },\n        registerTextEditorCommand: unsupported,\n        executeCommand: unsupported,\n        getCommands: unsupported\n    };\n    class CodeDisposable implements vscode.Disposable {\n        constructor(public callOnDispose: Function) { }\n        dispose() {\n            this.callOnDispose();\n        }\n    }\n    return {\n        workspace,\n        languages,\n        window,\n        commands,\n        Uri,\n        CompletionItem,\n        CodeLens,\n        DocumentLink,\n        CodeActionKind,\n        Disposable: CodeDisposable\n    } as any;\n}\n","/* --------------------------------------------------------------------------------------------\n * Copyright (c) 2018 TypeFox GmbH (http://www.typefox.io). All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nimport { createVSCodeApi } from \"./vscode-api\";\nimport { Services } from \"./services\";\n\nexport = createVSCodeApi(Services.get);","var v1 = require('./v1');\nvar v4 = require('./v4');\n\nvar uuid = v4;\nuuid.v1 = v1;\nuuid.v4 = v4;\n\nmodule.exports = uuid;\n","/**\n * Convert array of 16 byte values to UUID string format of the form:\n * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n */\nvar byteToHex = [];\nfor (var i = 0; i < 256; ++i) {\n  byteToHex[i] = (i + 0x100).toString(16).substr(1);\n}\n\nfunction bytesToUuid(buf, offset) {\n  var i = offset || 0;\n  var bth = byteToHex;\n  // join used to fix memory issue caused by concatenation: https://bugs.chromium.org/p/v8/issues/detail?id=3175#c4\n  return ([\n    bth[buf[i++]], bth[buf[i++]],\n    bth[buf[i++]], bth[buf[i++]], '-',\n    bth[buf[i++]], bth[buf[i++]], '-',\n    bth[buf[i++]], bth[buf[i++]], '-',\n    bth[buf[i++]], bth[buf[i++]], '-',\n    bth[buf[i++]], bth[buf[i++]],\n    bth[buf[i++]], bth[buf[i++]],\n    bth[buf[i++]], bth[buf[i++]]\n  ]).join('');\n}\n\nmodule.exports = bytesToUuid;\n","// Unique ID creation requires a high quality random # generator.  In the\n// browser this is a little complicated due to unknown quality of Math.random()\n// and inconsistent support for the `crypto` API.  We do the best we can via\n// feature-detection\n\n// getRandomValues needs to be invoked in a context where \"this\" is a Crypto\n// implementation. Also, find the complete implementation of crypto on IE11.\nvar getRandomValues = (typeof(crypto) != 'undefined' && crypto.getRandomValues && crypto.getRandomValues.bind(crypto)) ||\n                      (typeof(msCrypto) != 'undefined' && typeof window.msCrypto.getRandomValues == 'function' && msCrypto.getRandomValues.bind(msCrypto));\n\nif (getRandomValues) {\n  // WHATWG crypto RNG - http://wiki.whatwg.org/wiki/Crypto\n  var rnds8 = new Uint8Array(16); // eslint-disable-line no-undef\n\n  module.exports = function whatwgRNG() {\n    getRandomValues(rnds8);\n    return rnds8;\n  };\n} else {\n  // Math.random()-based (RNG)\n  //\n  // If all else fails, use Math.random().  It's fast, but is of unspecified\n  // quality.\n  var rnds = new Array(16);\n\n  module.exports = function mathRNG() {\n    for (var i = 0, r; i < 16; i++) {\n      if ((i & 0x03) === 0) r = Math.random() * 0x100000000;\n      rnds[i] = r >>> ((i & 0x03) << 3) & 0xff;\n    }\n\n    return rnds;\n  };\n}\n","var rng = require('./lib/rng');\nvar bytesToUuid = require('./lib/bytesToUuid');\n\n// **`v1()` - Generate time-based UUID**\n//\n// Inspired by https://github.com/LiosK/UUID.js\n// and http://docs.python.org/library/uuid.html\n\nvar _nodeId;\nvar _clockseq;\n\n// Previous uuid creation time\nvar _lastMSecs = 0;\nvar _lastNSecs = 0;\n\n// See https://github.com/uuidjs/uuid for API details\nfunction v1(options, buf, offset) {\n  var i = buf && offset || 0;\n  var b = buf || [];\n\n  options = options || {};\n  var node = options.node || _nodeId;\n  var clockseq = options.clockseq !== undefined ? options.clockseq : _clockseq;\n\n  // node and clockseq need to be initialized to random values if they're not\n  // specified.  We do this lazily to minimize issues related to insufficient\n  // system entropy.  See #189\n  if (node == null || clockseq == null) {\n    var seedBytes = rng();\n    if (node == null) {\n      // Per 4.5, create and 48-bit node id, (47 random bits + multicast bit = 1)\n      node = _nodeId = [\n        seedBytes[0] | 0x01,\n        seedBytes[1], seedBytes[2], seedBytes[3], seedBytes[4], seedBytes[5]\n      ];\n    }\n    if (clockseq == null) {\n      // Per 4.2.2, randomize (14 bit) clockseq\n      clockseq = _clockseq = (seedBytes[6] << 8 | seedBytes[7]) & 0x3fff;\n    }\n  }\n\n  // UUID timestamps are 100 nano-second units since the Gregorian epoch,\n  // (1582-10-15 00:00).  JSNumbers aren't precise enough for this, so\n  // time is handled internally as 'msecs' (integer milliseconds) and 'nsecs'\n  // (100-nanoseconds offset from msecs) since unix epoch, 1970-01-01 00:00.\n  var msecs = options.msecs !== undefined ? options.msecs : new Date().getTime();\n\n  // Per 4.2.1.2, use count of uuid's generated during the current clock\n  // cycle to simulate higher resolution clock\n  var nsecs = options.nsecs !== undefined ? options.nsecs : _lastNSecs + 1;\n\n  // Time since last uuid creation (in msecs)\n  var dt = (msecs - _lastMSecs) + (nsecs - _lastNSecs)/10000;\n\n  // Per 4.2.1.2, Bump clockseq on clock regression\n  if (dt < 0 && options.clockseq === undefined) {\n    clockseq = clockseq + 1 & 0x3fff;\n  }\n\n  // Reset nsecs if clock regresses (new clockseq) or we've moved onto a new\n  // time interval\n  if ((dt < 0 || msecs > _lastMSecs) && options.nsecs === undefined) {\n    nsecs = 0;\n  }\n\n  // Per 4.2.1.2 Throw error if too many uuids are requested\n  if (nsecs >= 10000) {\n    throw new Error('uuid.v1(): Can\\'t create more than 10M uuids/sec');\n  }\n\n  _lastMSecs = msecs;\n  _lastNSecs = nsecs;\n  _clockseq = clockseq;\n\n  // Per 4.1.4 - Convert from unix epoch to Gregorian epoch\n  msecs += 12219292800000;\n\n  // `time_low`\n  var tl = ((msecs & 0xfffffff) * 10000 + nsecs) % 0x100000000;\n  b[i++] = tl >>> 24 & 0xff;\n  b[i++] = tl >>> 16 & 0xff;\n  b[i++] = tl >>> 8 & 0xff;\n  b[i++] = tl & 0xff;\n\n  // `time_mid`\n  var tmh = (msecs / 0x100000000 * 10000) & 0xfffffff;\n  b[i++] = tmh >>> 8 & 0xff;\n  b[i++] = tmh & 0xff;\n\n  // `time_high_and_version`\n  b[i++] = tmh >>> 24 & 0xf | 0x10; // include version\n  b[i++] = tmh >>> 16 & 0xff;\n\n  // `clock_seq_hi_and_reserved` (Per 4.2.2 - include variant)\n  b[i++] = clockseq >>> 8 | 0x80;\n\n  // `clock_seq_low`\n  b[i++] = clockseq & 0xff;\n\n  // `node`\n  for (var n = 0; n < 6; ++n) {\n    b[i + n] = node[n];\n  }\n\n  return buf ? buf : bytesToUuid(b);\n}\n\nmodule.exports = v1;\n","var rng = require('./lib/rng');\nvar bytesToUuid = require('./lib/bytesToUuid');\n\nfunction v4(options, buf, offset) {\n  var i = buf && offset || 0;\n\n  if (typeof(options) == 'string') {\n    buf = options === 'binary' ? new Array(16) : null;\n    options = null;\n  }\n  options = options || {};\n\n  var rnds = options.random || (options.rng || rng)();\n\n  // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n  rnds[6] = (rnds[6] & 0x0f) | 0x40;\n  rnds[8] = (rnds[8] & 0x3f) | 0x80;\n\n  // Copy bytes to buffer, if provided\n  if (buf) {\n    for (var ii = 0; ii < 16; ++ii) {\n      buf[i + ii] = rnds[ii];\n    }\n  }\n\n  return buf || bytesToUuid(rnds);\n}\n\nmodule.exports = v4;\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nfunction __export(m) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst vscode_1 = require(\"vscode\");\r\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\r\nconst c2p = require(\"./codeConverter\");\r\nconst p2c = require(\"./protocolConverter\");\r\nconst Is = require(\"./utils/is\");\r\nconst async_1 = require(\"./utils/async\");\r\nconst UUID = require(\"./utils/uuid\");\r\nconst progressPart_1 = require(\"./progressPart\");\r\n__export(require(\"vscode-languageserver-protocol\"));\r\nclass ConsoleLogger {\r\n    error(message) {\r\n        console.error(message);\r\n    }\r\n    warn(message) {\r\n        console.warn(message);\r\n    }\r\n    info(message) {\r\n        console.info(message);\r\n    }\r\n    log(message) {\r\n        console.log(message);\r\n    }\r\n}\r\nfunction createConnection(input, output, errorHandler, closeHandler) {\r\n    let logger = new ConsoleLogger();\r\n    let connection = vscode_languageserver_protocol_1.createProtocolConnection(input, output, logger);\r\n    connection.onError((data) => { errorHandler(data[0], data[1], data[2]); });\r\n    connection.onClose(closeHandler);\r\n    let result = {\r\n        listen: () => connection.listen(),\r\n        sendRequest: (type, ...params) => connection.sendRequest(Is.string(type) ? type : type.method, ...params),\r\n        onRequest: (type, handler) => connection.onRequest(Is.string(type) ? type : type.method, handler),\r\n        sendNotification: (type, params) => connection.sendNotification(Is.string(type) ? type : type.method, params),\r\n        onNotification: (type, handler) => connection.onNotification(Is.string(type) ? type : type.method, handler),\r\n        onProgress: connection.onProgress,\r\n        sendProgress: connection.sendProgress,\r\n        trace: (value, tracer, sendNotificationOrTraceOptions) => {\r\n            const defaultTraceOptions = {\r\n                sendNotification: false,\r\n                traceFormat: vscode_languageserver_protocol_1.TraceFormat.Text\r\n            };\r\n            if (sendNotificationOrTraceOptions === void 0) {\r\n                connection.trace(value, tracer, defaultTraceOptions);\r\n            }\r\n            else if (Is.boolean(sendNotificationOrTraceOptions)) {\r\n                connection.trace(value, tracer, sendNotificationOrTraceOptions);\r\n            }\r\n            else {\r\n                connection.trace(value, tracer, sendNotificationOrTraceOptions);\r\n            }\r\n        },\r\n        initialize: (params) => connection.sendRequest(vscode_languageserver_protocol_1.InitializeRequest.type, params),\r\n        shutdown: () => connection.sendRequest(vscode_languageserver_protocol_1.ShutdownRequest.type, undefined),\r\n        exit: () => connection.sendNotification(vscode_languageserver_protocol_1.ExitNotification.type),\r\n        onLogMessage: (handler) => connection.onNotification(vscode_languageserver_protocol_1.LogMessageNotification.type, handler),\r\n        onShowMessage: (handler) => connection.onNotification(vscode_languageserver_protocol_1.ShowMessageNotification.type, handler),\r\n        onTelemetry: (handler) => connection.onNotification(vscode_languageserver_protocol_1.TelemetryEventNotification.type, handler),\r\n        didChangeConfiguration: (params) => connection.sendNotification(vscode_languageserver_protocol_1.DidChangeConfigurationNotification.type, params),\r\n        didChangeWatchedFiles: (params) => connection.sendNotification(vscode_languageserver_protocol_1.DidChangeWatchedFilesNotification.type, params),\r\n        didOpenTextDocument: (params) => connection.sendNotification(vscode_languageserver_protocol_1.DidOpenTextDocumentNotification.type, params),\r\n        didChangeTextDocument: (params) => connection.sendNotification(vscode_languageserver_protocol_1.DidChangeTextDocumentNotification.type, params),\r\n        didCloseTextDocument: (params) => connection.sendNotification(vscode_languageserver_protocol_1.DidCloseTextDocumentNotification.type, params),\r\n        didSaveTextDocument: (params) => connection.sendNotification(vscode_languageserver_protocol_1.DidSaveTextDocumentNotification.type, params),\r\n        onDiagnostics: (handler) => connection.onNotification(vscode_languageserver_protocol_1.PublishDiagnosticsNotification.type, handler),\r\n        dispose: () => connection.dispose()\r\n    };\r\n    return result;\r\n}\r\n/**\r\n * An action to be performed when the connection is producing errors.\r\n */\r\nvar ErrorAction;\r\n(function (ErrorAction) {\r\n    /**\r\n     * Continue running the server.\r\n     */\r\n    ErrorAction[ErrorAction[\"Continue\"] = 1] = \"Continue\";\r\n    /**\r\n     * Shutdown the server.\r\n     */\r\n    ErrorAction[ErrorAction[\"Shutdown\"] = 2] = \"Shutdown\";\r\n})(ErrorAction = exports.ErrorAction || (exports.ErrorAction = {}));\r\n/**\r\n * An action to be performed when the connection to a server got closed.\r\n */\r\nvar CloseAction;\r\n(function (CloseAction) {\r\n    /**\r\n     * Don't restart the server. The connection stays closed.\r\n     */\r\n    CloseAction[CloseAction[\"DoNotRestart\"] = 1] = \"DoNotRestart\";\r\n    /**\r\n     * Restart the server.\r\n     */\r\n    CloseAction[CloseAction[\"Restart\"] = 2] = \"Restart\";\r\n})(CloseAction = exports.CloseAction || (exports.CloseAction = {}));\r\nclass DefaultErrorHandler {\r\n    constructor(name) {\r\n        this.name = name;\r\n        this.restarts = [];\r\n    }\r\n    error(_error, _message, count) {\r\n        if (count && count <= 3) {\r\n            return ErrorAction.Continue;\r\n        }\r\n        return ErrorAction.Shutdown;\r\n    }\r\n    closed() {\r\n        this.restarts.push(Date.now());\r\n        if (this.restarts.length < 5) {\r\n            return CloseAction.Restart;\r\n        }\r\n        else {\r\n            let diff = this.restarts[this.restarts.length - 1] - this.restarts[0];\r\n            if (diff <= 3 * 60 * 1000) {\r\n                vscode_1.window.showErrorMessage(`The ${this.name} server crashed 5 times in the last 3 minutes. The server will not be restarted.`);\r\n                return CloseAction.DoNotRestart;\r\n            }\r\n            else {\r\n                this.restarts.shift();\r\n                return CloseAction.Restart;\r\n            }\r\n        }\r\n    }\r\n}\r\nvar RevealOutputChannelOn;\r\n(function (RevealOutputChannelOn) {\r\n    RevealOutputChannelOn[RevealOutputChannelOn[\"Info\"] = 1] = \"Info\";\r\n    RevealOutputChannelOn[RevealOutputChannelOn[\"Warn\"] = 2] = \"Warn\";\r\n    RevealOutputChannelOn[RevealOutputChannelOn[\"Error\"] = 3] = \"Error\";\r\n    RevealOutputChannelOn[RevealOutputChannelOn[\"Never\"] = 4] = \"Never\";\r\n})(RevealOutputChannelOn = exports.RevealOutputChannelOn || (exports.RevealOutputChannelOn = {}));\r\nvar State;\r\n(function (State) {\r\n    State[State[\"Stopped\"] = 1] = \"Stopped\";\r\n    State[State[\"Starting\"] = 3] = \"Starting\";\r\n    State[State[\"Running\"] = 2] = \"Running\";\r\n})(State = exports.State || (exports.State = {}));\r\nvar ClientState;\r\n(function (ClientState) {\r\n    ClientState[ClientState[\"Initial\"] = 0] = \"Initial\";\r\n    ClientState[ClientState[\"Starting\"] = 1] = \"Starting\";\r\n    ClientState[ClientState[\"StartFailed\"] = 2] = \"StartFailed\";\r\n    ClientState[ClientState[\"Running\"] = 3] = \"Running\";\r\n    ClientState[ClientState[\"Stopping\"] = 4] = \"Stopping\";\r\n    ClientState[ClientState[\"Stopped\"] = 5] = \"Stopped\";\r\n})(ClientState || (ClientState = {}));\r\nconst SupportedSymbolKinds = [\r\n    vscode_languageserver_protocol_1.SymbolKind.File,\r\n    vscode_languageserver_protocol_1.SymbolKind.Module,\r\n    vscode_languageserver_protocol_1.SymbolKind.Namespace,\r\n    vscode_languageserver_protocol_1.SymbolKind.Package,\r\n    vscode_languageserver_protocol_1.SymbolKind.Class,\r\n    vscode_languageserver_protocol_1.SymbolKind.Method,\r\n    vscode_languageserver_protocol_1.SymbolKind.Property,\r\n    vscode_languageserver_protocol_1.SymbolKind.Field,\r\n    vscode_languageserver_protocol_1.SymbolKind.Constructor,\r\n    vscode_languageserver_protocol_1.SymbolKind.Enum,\r\n    vscode_languageserver_protocol_1.SymbolKind.Interface,\r\n    vscode_languageserver_protocol_1.SymbolKind.Function,\r\n    vscode_languageserver_protocol_1.SymbolKind.Variable,\r\n    vscode_languageserver_protocol_1.SymbolKind.Constant,\r\n    vscode_languageserver_protocol_1.SymbolKind.String,\r\n    vscode_languageserver_protocol_1.SymbolKind.Number,\r\n    vscode_languageserver_protocol_1.SymbolKind.Boolean,\r\n    vscode_languageserver_protocol_1.SymbolKind.Array,\r\n    vscode_languageserver_protocol_1.SymbolKind.Object,\r\n    vscode_languageserver_protocol_1.SymbolKind.Key,\r\n    vscode_languageserver_protocol_1.SymbolKind.Null,\r\n    vscode_languageserver_protocol_1.SymbolKind.EnumMember,\r\n    vscode_languageserver_protocol_1.SymbolKind.Struct,\r\n    vscode_languageserver_protocol_1.SymbolKind.Event,\r\n    vscode_languageserver_protocol_1.SymbolKind.Operator,\r\n    vscode_languageserver_protocol_1.SymbolKind.TypeParameter\r\n];\r\nconst SupportedCompletionItemKinds = [\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Text,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Method,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Function,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Constructor,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Field,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Variable,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Class,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Interface,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Module,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Property,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Unit,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Value,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Enum,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Keyword,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Snippet,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Color,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.File,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Reference,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Folder,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.EnumMember,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Constant,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Struct,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Event,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Operator,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.TypeParameter\r\n];\r\nfunction ensure(target, key) {\r\n    if (target[key] === void 0) {\r\n        target[key] = {};\r\n    }\r\n    return target[key];\r\n}\r\nvar DynamicFeature;\r\n(function (DynamicFeature) {\r\n    function is(value) {\r\n        let candidate = value;\r\n        return candidate && Is.func(candidate.register) && Is.func(candidate.unregister) && Is.func(candidate.dispose) && candidate.messages !== void 0;\r\n    }\r\n    DynamicFeature.is = is;\r\n})(DynamicFeature || (DynamicFeature = {}));\r\nclass DocumentNotifiactions {\r\n    constructor(_client, _event, _type, _middleware, _createParams, _selectorFilter) {\r\n        this._client = _client;\r\n        this._event = _event;\r\n        this._type = _type;\r\n        this._middleware = _middleware;\r\n        this._createParams = _createParams;\r\n        this._selectorFilter = _selectorFilter;\r\n        this._selectors = new Map();\r\n    }\r\n    static textDocumentFilter(selectors, textDocument) {\r\n        for (const selector of selectors) {\r\n            if (vscode_1.languages.match(selector, textDocument)) {\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n    register(_message, data) {\r\n        if (!data.registerOptions.documentSelector) {\r\n            return;\r\n        }\r\n        if (!this._listener) {\r\n            this._listener = this._event(this.callback, this);\r\n        }\r\n        this._selectors.set(data.id, data.registerOptions.documentSelector);\r\n    }\r\n    callback(data) {\r\n        if (!this._selectorFilter || this._selectorFilter(this._selectors.values(), data)) {\r\n            if (this._middleware) {\r\n                this._middleware(data, (data) => this._client.sendNotification(this._type, this._createParams(data)));\r\n            }\r\n            else {\r\n                this._client.sendNotification(this._type, this._createParams(data));\r\n            }\r\n            this.notificationSent(data);\r\n        }\r\n    }\r\n    notificationSent(_data) {\r\n    }\r\n    unregister(id) {\r\n        this._selectors.delete(id);\r\n        if (this._selectors.size === 0 && this._listener) {\r\n            this._listener.dispose();\r\n            this._listener = undefined;\r\n        }\r\n    }\r\n    dispose() {\r\n        this._selectors.clear();\r\n        if (this._listener) {\r\n            this._listener.dispose();\r\n            this._listener = undefined;\r\n        }\r\n    }\r\n}\r\nclass DidOpenTextDocumentFeature extends DocumentNotifiactions {\r\n    constructor(client, _syncedDocuments) {\r\n        super(client, vscode_1.workspace.onDidOpenTextDocument, vscode_languageserver_protocol_1.DidOpenTextDocumentNotification.type, client.clientOptions.middleware.didOpen, (textDocument) => client.code2ProtocolConverter.asOpenTextDocumentParams(textDocument), DocumentNotifiactions.textDocumentFilter);\r\n        this._syncedDocuments = _syncedDocuments;\r\n    }\r\n    get messages() {\r\n        return vscode_languageserver_protocol_1.DidOpenTextDocumentNotification.type;\r\n    }\r\n    fillClientCapabilities(capabilities) {\r\n        ensure(ensure(capabilities, 'textDocument'), 'synchronization').dynamicRegistration = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        let textDocumentSyncOptions = capabilities.resolvedTextDocumentSync;\r\n        if (documentSelector && textDocumentSyncOptions && textDocumentSyncOptions.openClose) {\r\n            this.register(this.messages, { id: UUID.generateUuid(), registerOptions: { documentSelector: documentSelector } });\r\n        }\r\n    }\r\n    register(message, data) {\r\n        super.register(message, data);\r\n        if (!data.registerOptions.documentSelector) {\r\n            return;\r\n        }\r\n        let documentSelector = data.registerOptions.documentSelector;\r\n        vscode_1.workspace.textDocuments.forEach((textDocument) => {\r\n            let uri = textDocument.uri.toString();\r\n            if (this._syncedDocuments.has(uri)) {\r\n                return;\r\n            }\r\n            if (vscode_1.languages.match(documentSelector, textDocument)) {\r\n                let middleware = this._client.clientOptions.middleware;\r\n                let didOpen = (textDocument) => {\r\n                    this._client.sendNotification(this._type, this._createParams(textDocument));\r\n                };\r\n                if (middleware.didOpen) {\r\n                    middleware.didOpen(textDocument, didOpen);\r\n                }\r\n                else {\r\n                    didOpen(textDocument);\r\n                }\r\n                this._syncedDocuments.set(uri, textDocument);\r\n            }\r\n        });\r\n    }\r\n    notificationSent(textDocument) {\r\n        super.notificationSent(textDocument);\r\n        this._syncedDocuments.set(textDocument.uri.toString(), textDocument);\r\n    }\r\n}\r\nclass DidCloseTextDocumentFeature extends DocumentNotifiactions {\r\n    constructor(client, _syncedDocuments) {\r\n        super(client, vscode_1.workspace.onDidCloseTextDocument, vscode_languageserver_protocol_1.DidCloseTextDocumentNotification.type, client.clientOptions.middleware.didClose, (textDocument) => client.code2ProtocolConverter.asCloseTextDocumentParams(textDocument), DocumentNotifiactions.textDocumentFilter);\r\n        this._syncedDocuments = _syncedDocuments;\r\n    }\r\n    get messages() {\r\n        return vscode_languageserver_protocol_1.DidCloseTextDocumentNotification.type;\r\n    }\r\n    fillClientCapabilities(capabilities) {\r\n        ensure(ensure(capabilities, 'textDocument'), 'synchronization').dynamicRegistration = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        let textDocumentSyncOptions = capabilities.resolvedTextDocumentSync;\r\n        if (documentSelector && textDocumentSyncOptions && textDocumentSyncOptions.openClose) {\r\n            this.register(this.messages, { id: UUID.generateUuid(), registerOptions: { documentSelector: documentSelector } });\r\n        }\r\n    }\r\n    notificationSent(textDocument) {\r\n        super.notificationSent(textDocument);\r\n        this._syncedDocuments.delete(textDocument.uri.toString());\r\n    }\r\n    unregister(id) {\r\n        let selector = this._selectors.get(id);\r\n        // The super call removed the selector from the map\r\n        // of selectors.\r\n        super.unregister(id);\r\n        let selectors = this._selectors.values();\r\n        this._syncedDocuments.forEach((textDocument) => {\r\n            if (vscode_1.languages.match(selector, textDocument) && !this._selectorFilter(selectors, textDocument)) {\r\n                let middleware = this._client.clientOptions.middleware;\r\n                let didClose = (textDocument) => {\r\n                    this._client.sendNotification(this._type, this._createParams(textDocument));\r\n                };\r\n                this._syncedDocuments.delete(textDocument.uri.toString());\r\n                if (middleware.didClose) {\r\n                    middleware.didClose(textDocument, didClose);\r\n                }\r\n                else {\r\n                    didClose(textDocument);\r\n                }\r\n            }\r\n        });\r\n    }\r\n}\r\nclass DidChangeTextDocumentFeature {\r\n    constructor(_client) {\r\n        this._client = _client;\r\n        this._changeData = new Map();\r\n        this._forcingDelivery = false;\r\n    }\r\n    get messages() {\r\n        return vscode_languageserver_protocol_1.DidChangeTextDocumentNotification.type;\r\n    }\r\n    fillClientCapabilities(capabilities) {\r\n        ensure(ensure(capabilities, 'textDocument'), 'synchronization').dynamicRegistration = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        let textDocumentSyncOptions = capabilities.resolvedTextDocumentSync;\r\n        if (documentSelector && textDocumentSyncOptions && textDocumentSyncOptions.change !== void 0 && textDocumentSyncOptions.change !== vscode_languageserver_protocol_1.TextDocumentSyncKind.None) {\r\n            this.register(this.messages, {\r\n                id: UUID.generateUuid(),\r\n                registerOptions: Object.assign({}, { documentSelector: documentSelector }, { syncKind: textDocumentSyncOptions.change })\r\n            });\r\n        }\r\n    }\r\n    register(_message, data) {\r\n        if (!data.registerOptions.documentSelector) {\r\n            return;\r\n        }\r\n        if (!this._listener) {\r\n            this._listener = vscode_1.workspace.onDidChangeTextDocument(this.callback, this);\r\n        }\r\n        this._changeData.set(data.id, {\r\n            documentSelector: data.registerOptions.documentSelector,\r\n            syncKind: data.registerOptions.syncKind\r\n        });\r\n    }\r\n    callback(event) {\r\n        // Text document changes are send for dirty changes as well. We don't\r\n        // have dirty / undirty events in the LSP so we ignore content changes\r\n        // with length zero.\r\n        if (event.contentChanges.length === 0) {\r\n            return;\r\n        }\r\n        for (const changeData of this._changeData.values()) {\r\n            if (vscode_1.languages.match(changeData.documentSelector, event.document)) {\r\n                let middleware = this._client.clientOptions.middleware;\r\n                if (changeData.syncKind === vscode_languageserver_protocol_1.TextDocumentSyncKind.Incremental) {\r\n                    let params = this._client.code2ProtocolConverter.asChangeTextDocumentParams(event);\r\n                    if (middleware.didChange) {\r\n                        middleware.didChange(event, () => this._client.sendNotification(vscode_languageserver_protocol_1.DidChangeTextDocumentNotification.type, params));\r\n                    }\r\n                    else {\r\n                        this._client.sendNotification(vscode_languageserver_protocol_1.DidChangeTextDocumentNotification.type, params);\r\n                    }\r\n                }\r\n                else if (changeData.syncKind === vscode_languageserver_protocol_1.TextDocumentSyncKind.Full) {\r\n                    let didChange = (event) => {\r\n                        if (this._changeDelayer) {\r\n                            if (this._changeDelayer.uri !== event.document.uri.toString()) {\r\n                                // Use this force delivery to track boolean state. Otherwise we might call two times.\r\n                                this.forceDelivery();\r\n                                this._changeDelayer.uri = event.document.uri.toString();\r\n                            }\r\n                            this._changeDelayer.delayer.trigger(() => {\r\n                                this._client.sendNotification(vscode_languageserver_protocol_1.DidChangeTextDocumentNotification.type, this._client.code2ProtocolConverter.asChangeTextDocumentParams(event.document));\r\n                            });\r\n                        }\r\n                        else {\r\n                            this._changeDelayer = {\r\n                                uri: event.document.uri.toString(),\r\n                                delayer: new async_1.Delayer(200)\r\n                            };\r\n                            this._changeDelayer.delayer.trigger(() => {\r\n                                this._client.sendNotification(vscode_languageserver_protocol_1.DidChangeTextDocumentNotification.type, this._client.code2ProtocolConverter.asChangeTextDocumentParams(event.document));\r\n                            }, -1);\r\n                        }\r\n                    };\r\n                    if (middleware.didChange) {\r\n                        middleware.didChange(event, didChange);\r\n                    }\r\n                    else {\r\n                        didChange(event);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n    unregister(id) {\r\n        this._changeData.delete(id);\r\n        if (this._changeData.size === 0 && this._listener) {\r\n            this._listener.dispose();\r\n            this._listener = undefined;\r\n        }\r\n    }\r\n    dispose() {\r\n        this._changeDelayer = undefined;\r\n        this._forcingDelivery = false;\r\n        this._changeData.clear();\r\n        if (this._listener) {\r\n            this._listener.dispose();\r\n            this._listener = undefined;\r\n        }\r\n    }\r\n    forceDelivery() {\r\n        if (this._forcingDelivery || !this._changeDelayer) {\r\n            return;\r\n        }\r\n        try {\r\n            this._forcingDelivery = true;\r\n            this._changeDelayer.delayer.forceDelivery();\r\n        }\r\n        finally {\r\n            this._forcingDelivery = false;\r\n        }\r\n    }\r\n}\r\nclass WillSaveFeature extends DocumentNotifiactions {\r\n    constructor(client) {\r\n        super(client, vscode_1.workspace.onWillSaveTextDocument, vscode_languageserver_protocol_1.WillSaveTextDocumentNotification.type, client.clientOptions.middleware.willSave, (willSaveEvent) => client.code2ProtocolConverter.asWillSaveTextDocumentParams(willSaveEvent), (selectors, willSaveEvent) => DocumentNotifiactions.textDocumentFilter(selectors, willSaveEvent.document));\r\n    }\r\n    get messages() {\r\n        return vscode_languageserver_protocol_1.WillSaveTextDocumentNotification.type;\r\n    }\r\n    fillClientCapabilities(capabilities) {\r\n        let value = ensure(ensure(capabilities, 'textDocument'), 'synchronization');\r\n        value.willSave = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        let textDocumentSyncOptions = capabilities.resolvedTextDocumentSync;\r\n        if (documentSelector && textDocumentSyncOptions && textDocumentSyncOptions.willSave) {\r\n            this.register(this.messages, {\r\n                id: UUID.generateUuid(),\r\n                registerOptions: { documentSelector: documentSelector }\r\n            });\r\n        }\r\n    }\r\n}\r\nclass WillSaveWaitUntilFeature {\r\n    constructor(_client) {\r\n        this._client = _client;\r\n        this._selectors = new Map();\r\n    }\r\n    get messages() {\r\n        return vscode_languageserver_protocol_1.WillSaveTextDocumentWaitUntilRequest.type;\r\n    }\r\n    fillClientCapabilities(capabilities) {\r\n        let value = ensure(ensure(capabilities, 'textDocument'), 'synchronization');\r\n        value.willSaveWaitUntil = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        let textDocumentSyncOptions = capabilities.resolvedTextDocumentSync;\r\n        if (documentSelector && textDocumentSyncOptions && textDocumentSyncOptions.willSaveWaitUntil) {\r\n            this.register(this.messages, {\r\n                id: UUID.generateUuid(),\r\n                registerOptions: { documentSelector: documentSelector }\r\n            });\r\n        }\r\n    }\r\n    register(_message, data) {\r\n        if (!data.registerOptions.documentSelector) {\r\n            return;\r\n        }\r\n        if (!this._listener) {\r\n            this._listener = vscode_1.workspace.onWillSaveTextDocument(this.callback, this);\r\n        }\r\n        this._selectors.set(data.id, data.registerOptions.documentSelector);\r\n    }\r\n    callback(event) {\r\n        if (DocumentNotifiactions.textDocumentFilter(this._selectors.values(), event.document)) {\r\n            let middleware = this._client.clientOptions.middleware;\r\n            let willSaveWaitUntil = (event) => {\r\n                return this._client.sendRequest(vscode_languageserver_protocol_1.WillSaveTextDocumentWaitUntilRequest.type, this._client.code2ProtocolConverter.asWillSaveTextDocumentParams(event)).then((edits) => {\r\n                    let vEdits = this._client.protocol2CodeConverter.asTextEdits(edits);\r\n                    return vEdits === void 0 ? [] : vEdits;\r\n                });\r\n            };\r\n            event.waitUntil(middleware.willSaveWaitUntil\r\n                ? middleware.willSaveWaitUntil(event, willSaveWaitUntil)\r\n                : willSaveWaitUntil(event));\r\n        }\r\n    }\r\n    unregister(id) {\r\n        this._selectors.delete(id);\r\n        if (this._selectors.size === 0 && this._listener) {\r\n            this._listener.dispose();\r\n            this._listener = undefined;\r\n        }\r\n    }\r\n    dispose() {\r\n        this._selectors.clear();\r\n        if (this._listener) {\r\n            this._listener.dispose();\r\n            this._listener = undefined;\r\n        }\r\n    }\r\n}\r\nclass DidSaveTextDocumentFeature extends DocumentNotifiactions {\r\n    constructor(client) {\r\n        super(client, vscode_1.workspace.onDidSaveTextDocument, vscode_languageserver_protocol_1.DidSaveTextDocumentNotification.type, client.clientOptions.middleware.didSave, (textDocument) => client.code2ProtocolConverter.asSaveTextDocumentParams(textDocument, this._includeText), DocumentNotifiactions.textDocumentFilter);\r\n    }\r\n    get messages() {\r\n        return vscode_languageserver_protocol_1.DidSaveTextDocumentNotification.type;\r\n    }\r\n    fillClientCapabilities(capabilities) {\r\n        ensure(ensure(capabilities, 'textDocument'), 'synchronization').didSave = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        let textDocumentSyncOptions = capabilities.resolvedTextDocumentSync;\r\n        if (documentSelector && textDocumentSyncOptions && textDocumentSyncOptions.save) {\r\n            this.register(this.messages, {\r\n                id: UUID.generateUuid(),\r\n                registerOptions: Object.assign({}, { documentSelector: documentSelector }, { includeText: !!textDocumentSyncOptions.save.includeText })\r\n            });\r\n        }\r\n    }\r\n    register(method, data) {\r\n        this._includeText = !!data.registerOptions.includeText;\r\n        super.register(method, data);\r\n    }\r\n}\r\nclass FileSystemWatcherFeature {\r\n    constructor(_client, _notifyFileEvent) {\r\n        this._client = _client;\r\n        this._notifyFileEvent = _notifyFileEvent;\r\n        this._watchers = new Map();\r\n    }\r\n    get messages() {\r\n        return vscode_languageserver_protocol_1.DidChangeWatchedFilesNotification.type;\r\n    }\r\n    fillClientCapabilities(capabilities) {\r\n        ensure(ensure(capabilities, 'workspace'), 'didChangeWatchedFiles').dynamicRegistration = true;\r\n    }\r\n    initialize(_capabilities, _documentSelector) {\r\n    }\r\n    register(_method, data) {\r\n        if (!Array.isArray(data.registerOptions.watchers)) {\r\n            return;\r\n        }\r\n        let disposeables = [];\r\n        for (let watcher of data.registerOptions.watchers) {\r\n            if (!Is.string(watcher.globPattern)) {\r\n                continue;\r\n            }\r\n            let watchCreate = true, watchChange = true, watchDelete = true;\r\n            if (watcher.kind !== void 0 && watcher.kind !== null) {\r\n                watchCreate = (watcher.kind & vscode_languageserver_protocol_1.WatchKind.Create) !== 0;\r\n                watchChange = (watcher.kind & vscode_languageserver_protocol_1.WatchKind.Change) != 0;\r\n                watchDelete = (watcher.kind & vscode_languageserver_protocol_1.WatchKind.Delete) != 0;\r\n            }\r\n            let fileSystemWatcher = vscode_1.workspace.createFileSystemWatcher(watcher.globPattern, !watchCreate, !watchChange, !watchDelete);\r\n            this.hookListeners(fileSystemWatcher, watchCreate, watchChange, watchDelete);\r\n            disposeables.push(fileSystemWatcher);\r\n        }\r\n        this._watchers.set(data.id, disposeables);\r\n    }\r\n    registerRaw(id, fileSystemWatchers) {\r\n        let disposeables = [];\r\n        for (let fileSystemWatcher of fileSystemWatchers) {\r\n            this.hookListeners(fileSystemWatcher, true, true, true, disposeables);\r\n        }\r\n        this._watchers.set(id, disposeables);\r\n    }\r\n    hookListeners(fileSystemWatcher, watchCreate, watchChange, watchDelete, listeners) {\r\n        if (watchCreate) {\r\n            fileSystemWatcher.onDidCreate((resource) => this._notifyFileEvent({\r\n                uri: this._client.code2ProtocolConverter.asUri(resource),\r\n                type: vscode_languageserver_protocol_1.FileChangeType.Created\r\n            }), null, listeners);\r\n        }\r\n        if (watchChange) {\r\n            fileSystemWatcher.onDidChange((resource) => this._notifyFileEvent({\r\n                uri: this._client.code2ProtocolConverter.asUri(resource),\r\n                type: vscode_languageserver_protocol_1.FileChangeType.Changed\r\n            }), null, listeners);\r\n        }\r\n        if (watchDelete) {\r\n            fileSystemWatcher.onDidDelete((resource) => this._notifyFileEvent({\r\n                uri: this._client.code2ProtocolConverter.asUri(resource),\r\n                type: vscode_languageserver_protocol_1.FileChangeType.Deleted\r\n            }), null, listeners);\r\n        }\r\n    }\r\n    unregister(id) {\r\n        let disposeables = this._watchers.get(id);\r\n        if (disposeables) {\r\n            for (let disposable of disposeables) {\r\n                disposable.dispose();\r\n            }\r\n        }\r\n    }\r\n    dispose() {\r\n        this._watchers.forEach((disposeables) => {\r\n            for (let disposable of disposeables) {\r\n                disposable.dispose();\r\n            }\r\n        });\r\n        this._watchers.clear();\r\n    }\r\n}\r\nclass TextDocumentFeature {\r\n    constructor(_client, _message) {\r\n        this._client = _client;\r\n        this._message = _message;\r\n        this._providers = new Map();\r\n    }\r\n    get messages() {\r\n        return this._message;\r\n    }\r\n    register(message, data) {\r\n        if (message.method !== this.messages.method) {\r\n            throw new Error(`Register called on wrong feature. Requested ${message.method} but reached feature ${this.messages.method}`);\r\n        }\r\n        if (!data.registerOptions.documentSelector) {\r\n            return;\r\n        }\r\n        let provider = this.registerLanguageProvider(data.registerOptions);\r\n        if (provider) {\r\n            this._providers.set(data.id, provider);\r\n        }\r\n    }\r\n    unregister(id) {\r\n        let provider = this._providers.get(id);\r\n        if (provider) {\r\n            provider.dispose();\r\n        }\r\n    }\r\n    dispose() {\r\n        this._providers.forEach((value) => {\r\n            value.dispose();\r\n        });\r\n        this._providers.clear();\r\n    }\r\n    getRegistration(documentSelector, capability) {\r\n        if (!capability) {\r\n            return [undefined, undefined];\r\n        }\r\n        else if (vscode_languageserver_protocol_1.TextDocumentRegistrationOptions.is(capability)) {\r\n            const id = vscode_languageserver_protocol_1.StaticRegistrationOptions.hasId(capability) ? capability.id : UUID.generateUuid();\r\n            const selector = capability.documentSelector || documentSelector;\r\n            if (selector) {\r\n                return [id, Object.assign({}, capability, { documentSelector: selector })];\r\n            }\r\n        }\r\n        else if (Is.boolean(capability) && capability === true || vscode_languageserver_protocol_1.WorkDoneProgressOptions.is(capability)) {\r\n            if (!documentSelector) {\r\n                return [undefined, undefined];\r\n            }\r\n            let options = (Is.boolean(capability) && capability === true ? { documentSelector } : Object.assign({}, capability, { documentSelector }));\r\n            return [UUID.generateUuid(), options];\r\n        }\r\n        return [undefined, undefined];\r\n    }\r\n    getRegistrationOptions(documentSelector, capability) {\r\n        if (!documentSelector || !capability) {\r\n            return undefined;\r\n        }\r\n        return (Is.boolean(capability) && capability === true ? { documentSelector } : Object.assign({}, capability, { documentSelector }));\r\n    }\r\n}\r\nexports.TextDocumentFeature = TextDocumentFeature;\r\nclass WorkspaceFeature {\r\n    constructor(_client, _message) {\r\n        this._client = _client;\r\n        this._message = _message;\r\n        this._providers = new Map();\r\n    }\r\n    get messages() {\r\n        return this._message;\r\n    }\r\n    register(message, data) {\r\n        if (message.method !== this.messages.method) {\r\n            throw new Error(`Register called on wron feature. Requested ${message.method} but reached feature ${this.messages.method}`);\r\n        }\r\n        let provider = this.registerLanguageProvider(data.registerOptions);\r\n        if (provider) {\r\n            this._providers.set(data.id, provider);\r\n        }\r\n    }\r\n    unregister(id) {\r\n        let provider = this._providers.get(id);\r\n        if (provider) {\r\n            provider.dispose();\r\n        }\r\n    }\r\n    dispose() {\r\n        this._providers.forEach((value) => {\r\n            value.dispose();\r\n        });\r\n        this._providers.clear();\r\n    }\r\n}\r\nclass CompletionItemFeature extends TextDocumentFeature {\r\n    constructor(client) {\r\n        super(client, vscode_languageserver_protocol_1.CompletionRequest.type);\r\n    }\r\n    fillClientCapabilities(capabilites) {\r\n        let completion = ensure(ensure(capabilites, 'textDocument'), 'completion');\r\n        completion.dynamicRegistration = true;\r\n        completion.contextSupport = true;\r\n        completion.completionItem = {\r\n            snippetSupport: true,\r\n            commitCharactersSupport: true,\r\n            documentationFormat: [vscode_languageserver_protocol_1.MarkupKind.Markdown, vscode_languageserver_protocol_1.MarkupKind.PlainText],\r\n            deprecatedSupport: true,\r\n            preselectSupport: true\r\n        };\r\n        completion.completionItemKind = { valueSet: SupportedCompletionItemKinds };\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        const options = this.getRegistrationOptions(documentSelector, capabilities.completionProvider);\r\n        if (!options) {\r\n            return;\r\n        }\r\n        this.register(this.messages, {\r\n            id: UUID.generateUuid(),\r\n            registerOptions: options\r\n        });\r\n    }\r\n    registerLanguageProvider(options) {\r\n        let triggerCharacters = options.triggerCharacters || [];\r\n        let client = this._client;\r\n        let provideCompletionItems = (document, position, context, token) => {\r\n            return client.sendRequest(vscode_languageserver_protocol_1.CompletionRequest.type, client.code2ProtocolConverter.asCompletionParams(document, position, context), token).then(client.protocol2CodeConverter.asCompletionResult, (error) => {\r\n                client.logFailedRequest(vscode_languageserver_protocol_1.CompletionRequest.type, error);\r\n                return Promise.resolve([]);\r\n            });\r\n        };\r\n        let resolveCompletionItem = (item, token) => {\r\n            return client.sendRequest(vscode_languageserver_protocol_1.CompletionResolveRequest.type, client.code2ProtocolConverter.asCompletionItem(item), token).then(client.protocol2CodeConverter.asCompletionItem, (error) => {\r\n                client.logFailedRequest(vscode_languageserver_protocol_1.CompletionResolveRequest.type, error);\r\n                return Promise.resolve(item);\r\n            });\r\n        };\r\n        let middleware = this._client.clientOptions.middleware;\r\n        return vscode_1.languages.registerCompletionItemProvider(options.documentSelector, {\r\n            provideCompletionItems: (document, position, token, context) => {\r\n                return middleware.provideCompletionItem\r\n                    ? middleware.provideCompletionItem(document, position, context, token, provideCompletionItems)\r\n                    : provideCompletionItems(document, position, context, token);\r\n            },\r\n            resolveCompletionItem: options.resolveProvider\r\n                ? (item, token) => {\r\n                    return middleware.resolveCompletionItem\r\n                        ? middleware.resolveCompletionItem(item, token, resolveCompletionItem)\r\n                        : resolveCompletionItem(item, token);\r\n                }\r\n                : undefined\r\n        }, ...triggerCharacters);\r\n    }\r\n}\r\nclass HoverFeature extends TextDocumentFeature {\r\n    constructor(client) {\r\n        super(client, vscode_languageserver_protocol_1.HoverRequest.type);\r\n    }\r\n    fillClientCapabilities(capabilites) {\r\n        const hoverCapability = (ensure(ensure(capabilites, 'textDocument'), 'hover'));\r\n        hoverCapability.dynamicRegistration = true;\r\n        hoverCapability.contentFormat = [vscode_languageserver_protocol_1.MarkupKind.Markdown, vscode_languageserver_protocol_1.MarkupKind.PlainText];\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        const options = this.getRegistrationOptions(documentSelector, capabilities.hoverProvider);\r\n        if (!options) {\r\n            return;\r\n        }\r\n        this.register(this.messages, {\r\n            id: UUID.generateUuid(),\r\n            registerOptions: options\r\n        });\r\n    }\r\n    registerLanguageProvider(options) {\r\n        let client = this._client;\r\n        let provideHover = (document, position, token) => {\r\n            return client.sendRequest(vscode_languageserver_protocol_1.HoverRequest.type, client.code2ProtocolConverter.asTextDocumentPositionParams(document, position), token).then(client.protocol2CodeConverter.asHover, (error) => {\r\n                client.logFailedRequest(vscode_languageserver_protocol_1.HoverRequest.type, error);\r\n                return Promise.resolve(null);\r\n            });\r\n        };\r\n        let middleware = client.clientOptions.middleware;\r\n        return vscode_1.languages.registerHoverProvider(options.documentSelector, {\r\n            provideHover: (document, position, token) => {\r\n                return middleware.provideHover\r\n                    ? middleware.provideHover(document, position, token, provideHover)\r\n                    : provideHover(document, position, token);\r\n            }\r\n        });\r\n    }\r\n}\r\nclass SignatureHelpFeature extends TextDocumentFeature {\r\n    constructor(client) {\r\n        super(client, vscode_languageserver_protocol_1.SignatureHelpRequest.type);\r\n    }\r\n    fillClientCapabilities(capabilites) {\r\n        let config = ensure(ensure(capabilites, 'textDocument'), 'signatureHelp');\r\n        config.dynamicRegistration = true;\r\n        config.signatureInformation = { documentationFormat: [vscode_languageserver_protocol_1.MarkupKind.Markdown, vscode_languageserver_protocol_1.MarkupKind.PlainText] };\r\n        config.signatureInformation.parameterInformation = { labelOffsetSupport: true };\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        const options = this.getRegistrationOptions(documentSelector, capabilities.signatureHelpProvider);\r\n        if (!options) {\r\n            return;\r\n        }\r\n        this.register(this.messages, {\r\n            id: UUID.generateUuid(),\r\n            registerOptions: options\r\n        });\r\n    }\r\n    registerLanguageProvider(options) {\r\n        let client = this._client;\r\n        let providerSignatureHelp = (document, position, token) => {\r\n            return client.sendRequest(vscode_languageserver_protocol_1.SignatureHelpRequest.type, client.code2ProtocolConverter.asTextDocumentPositionParams(document, position), token).then(client.protocol2CodeConverter.asSignatureHelp, (error) => {\r\n                client.logFailedRequest(vscode_languageserver_protocol_1.SignatureHelpRequest.type, error);\r\n                return Promise.resolve(null);\r\n            });\r\n        };\r\n        let middleware = client.clientOptions.middleware;\r\n        let triggerCharacters = options.triggerCharacters || [];\r\n        return vscode_1.languages.registerSignatureHelpProvider(options.documentSelector, {\r\n            provideSignatureHelp: (document, position, token) => {\r\n                return middleware.provideSignatureHelp\r\n                    ? middleware.provideSignatureHelp(document, position, token, providerSignatureHelp)\r\n                    : providerSignatureHelp(document, position, token);\r\n            }\r\n        }, ...triggerCharacters);\r\n    }\r\n}\r\nclass DefinitionFeature extends TextDocumentFeature {\r\n    constructor(client) {\r\n        super(client, vscode_languageserver_protocol_1.DefinitionRequest.type);\r\n    }\r\n    fillClientCapabilities(capabilites) {\r\n        let definitionSupport = ensure(ensure(capabilites, 'textDocument'), 'definition');\r\n        definitionSupport.dynamicRegistration = true;\r\n        definitionSupport.linkSupport = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        const options = this.getRegistrationOptions(documentSelector, capabilities.definitionProvider);\r\n        if (!options) {\r\n            return;\r\n        }\r\n        this.register(this.messages, { id: UUID.generateUuid(), registerOptions: options });\r\n    }\r\n    registerLanguageProvider(options) {\r\n        let client = this._client;\r\n        let provideDefinition = (document, position, token) => {\r\n            return client.sendRequest(vscode_languageserver_protocol_1.DefinitionRequest.type, client.code2ProtocolConverter.asTextDocumentPositionParams(document, position), token).then(client.protocol2CodeConverter.asDefinitionResult, (error) => {\r\n                client.logFailedRequest(vscode_languageserver_protocol_1.DefinitionRequest.type, error);\r\n                return Promise.resolve(null);\r\n            });\r\n        };\r\n        let middleware = client.clientOptions.middleware;\r\n        return vscode_1.languages.registerDefinitionProvider(options.documentSelector, {\r\n            provideDefinition: (document, position, token) => {\r\n                return middleware.provideDefinition\r\n                    ? middleware.provideDefinition(document, position, token, provideDefinition)\r\n                    : provideDefinition(document, position, token);\r\n            }\r\n        });\r\n    }\r\n}\r\nclass ReferencesFeature extends TextDocumentFeature {\r\n    constructor(client) {\r\n        super(client, vscode_languageserver_protocol_1.ReferencesRequest.type);\r\n    }\r\n    fillClientCapabilities(capabilites) {\r\n        ensure(ensure(capabilites, 'textDocument'), 'references').dynamicRegistration = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        const options = this.getRegistrationOptions(documentSelector, capabilities.referencesProvider);\r\n        if (!options) {\r\n            return;\r\n        }\r\n        this.register(this.messages, { id: UUID.generateUuid(), registerOptions: options });\r\n    }\r\n    registerLanguageProvider(options) {\r\n        let client = this._client;\r\n        let providerReferences = (document, position, options, token) => {\r\n            return client.sendRequest(vscode_languageserver_protocol_1.ReferencesRequest.type, client.code2ProtocolConverter.asReferenceParams(document, position, options), token).then(client.protocol2CodeConverter.asReferences, (error) => {\r\n                client.logFailedRequest(vscode_languageserver_protocol_1.ReferencesRequest.type, error);\r\n                return Promise.resolve([]);\r\n            });\r\n        };\r\n        let middleware = client.clientOptions.middleware;\r\n        return vscode_1.languages.registerReferenceProvider(options.documentSelector, {\r\n            provideReferences: (document, position, options, token) => {\r\n                return middleware.provideReferences\r\n                    ? middleware.provideReferences(document, position, options, token, providerReferences)\r\n                    : providerReferences(document, position, options, token);\r\n            }\r\n        });\r\n    }\r\n}\r\nclass DocumentHighlightFeature extends TextDocumentFeature {\r\n    constructor(client) {\r\n        super(client, vscode_languageserver_protocol_1.DocumentHighlightRequest.type);\r\n    }\r\n    fillClientCapabilities(capabilites) {\r\n        ensure(ensure(capabilites, 'textDocument'), 'documentHighlight').dynamicRegistration = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        const options = this.getRegistrationOptions(documentSelector, capabilities.documentHighlightProvider);\r\n        if (!options) {\r\n            return;\r\n        }\r\n        this.register(this.messages, { id: UUID.generateUuid(), registerOptions: options });\r\n    }\r\n    registerLanguageProvider(options) {\r\n        let client = this._client;\r\n        let provideDocumentHighlights = (document, position, token) => {\r\n            return client.sendRequest(vscode_languageserver_protocol_1.DocumentHighlightRequest.type, client.code2ProtocolConverter.asTextDocumentPositionParams(document, position), token).then(client.protocol2CodeConverter.asDocumentHighlights, (error) => {\r\n                client.logFailedRequest(vscode_languageserver_protocol_1.DocumentHighlightRequest.type, error);\r\n                return Promise.resolve([]);\r\n            });\r\n        };\r\n        let middleware = client.clientOptions.middleware;\r\n        return vscode_1.languages.registerDocumentHighlightProvider(options.documentSelector, {\r\n            provideDocumentHighlights: (document, position, token) => {\r\n                return middleware.provideDocumentHighlights\r\n                    ? middleware.provideDocumentHighlights(document, position, token, provideDocumentHighlights)\r\n                    : provideDocumentHighlights(document, position, token);\r\n            }\r\n        });\r\n    }\r\n}\r\nclass DocumentSymbolFeature extends TextDocumentFeature {\r\n    constructor(client) {\r\n        super(client, vscode_languageserver_protocol_1.DocumentSymbolRequest.type);\r\n    }\r\n    fillClientCapabilities(capabilites) {\r\n        let symbolCapabilities = ensure(ensure(capabilites, 'textDocument'), 'documentSymbol');\r\n        symbolCapabilities.dynamicRegistration = true;\r\n        symbolCapabilities.symbolKind = {\r\n            valueSet: SupportedSymbolKinds\r\n        };\r\n        symbolCapabilities.hierarchicalDocumentSymbolSupport = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        const options = this.getRegistrationOptions(documentSelector, capabilities.documentSymbolProvider);\r\n        if (!options) {\r\n            return;\r\n        }\r\n        this.register(this.messages, { id: UUID.generateUuid(), registerOptions: options });\r\n    }\r\n    registerLanguageProvider(options) {\r\n        let client = this._client;\r\n        let provideDocumentSymbols = (document, token) => {\r\n            return client.sendRequest(vscode_languageserver_protocol_1.DocumentSymbolRequest.type, client.code2ProtocolConverter.asDocumentSymbolParams(document), token).then((data) => {\r\n                if (data === null) {\r\n                    return undefined;\r\n                }\r\n                if (data.length === 0) {\r\n                    return [];\r\n                }\r\n                else {\r\n                    let element = data[0];\r\n                    if (vscode_languageserver_protocol_1.DocumentSymbol.is(element)) {\r\n                        return client.protocol2CodeConverter.asDocumentSymbols(data);\r\n                    }\r\n                    else {\r\n                        return client.protocol2CodeConverter.asSymbolInformations(data);\r\n                    }\r\n                }\r\n            }, (error) => {\r\n                client.logFailedRequest(vscode_languageserver_protocol_1.DocumentSymbolRequest.type, error);\r\n                return Promise.resolve([]);\r\n            });\r\n        };\r\n        let middleware = client.clientOptions.middleware;\r\n        return vscode_1.languages.registerDocumentSymbolProvider(options.documentSelector, {\r\n            provideDocumentSymbols: (document, token) => {\r\n                return middleware.provideDocumentSymbols\r\n                    ? middleware.provideDocumentSymbols(document, token, provideDocumentSymbols)\r\n                    : provideDocumentSymbols(document, token);\r\n            }\r\n        });\r\n    }\r\n}\r\nclass WorkspaceSymbolFeature extends WorkspaceFeature {\r\n    constructor(client) {\r\n        super(client, vscode_languageserver_protocol_1.WorkspaceSymbolRequest.type);\r\n    }\r\n    fillClientCapabilities(capabilites) {\r\n        let symbolCapabilities = ensure(ensure(capabilites, 'workspace'), 'symbol');\r\n        symbolCapabilities.dynamicRegistration = true;\r\n        symbolCapabilities.symbolKind = {\r\n            valueSet: SupportedSymbolKinds\r\n        };\r\n    }\r\n    initialize(capabilities) {\r\n        if (!capabilities.workspaceSymbolProvider) {\r\n            return;\r\n        }\r\n        this.register(this.messages, {\r\n            id: UUID.generateUuid(),\r\n            registerOptions: capabilities.workspaceSymbolProvider === true ? { workDoneProgress: false } : capabilities.workspaceSymbolProvider\r\n        });\r\n    }\r\n    registerLanguageProvider(_options) {\r\n        let client = this._client;\r\n        let provideWorkspaceSymbols = (query, token) => {\r\n            return client.sendRequest(vscode_languageserver_protocol_1.WorkspaceSymbolRequest.type, { query }, token).then(client.protocol2CodeConverter.asSymbolInformations, (error) => {\r\n                client.logFailedRequest(vscode_languageserver_protocol_1.WorkspaceSymbolRequest.type, error);\r\n                return Promise.resolve([]);\r\n            });\r\n        };\r\n        let middleware = client.clientOptions.middleware;\r\n        return vscode_1.languages.registerWorkspaceSymbolProvider({\r\n            provideWorkspaceSymbols: (query, token) => {\r\n                return middleware.provideWorkspaceSymbols\r\n                    ? middleware.provideWorkspaceSymbols(query, token, provideWorkspaceSymbols)\r\n                    : provideWorkspaceSymbols(query, token);\r\n            }\r\n        });\r\n    }\r\n}\r\nclass CodeActionFeature extends TextDocumentFeature {\r\n    constructor(client) {\r\n        super(client, vscode_languageserver_protocol_1.CodeActionRequest.type);\r\n    }\r\n    fillClientCapabilities(capabilites) {\r\n        const cap = ensure(ensure(capabilites, 'textDocument'), 'codeAction');\r\n        cap.dynamicRegistration = true;\r\n        cap.codeActionLiteralSupport = {\r\n            codeActionKind: {\r\n                valueSet: [\r\n                    vscode_languageserver_protocol_1.CodeActionKind.Empty,\r\n                    vscode_languageserver_protocol_1.CodeActionKind.QuickFix,\r\n                    vscode_languageserver_protocol_1.CodeActionKind.Refactor,\r\n                    vscode_languageserver_protocol_1.CodeActionKind.RefactorExtract,\r\n                    vscode_languageserver_protocol_1.CodeActionKind.RefactorInline,\r\n                    vscode_languageserver_protocol_1.CodeActionKind.RefactorRewrite,\r\n                    vscode_languageserver_protocol_1.CodeActionKind.Source,\r\n                    vscode_languageserver_protocol_1.CodeActionKind.SourceOrganizeImports\r\n                ]\r\n            }\r\n        };\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        const options = this.getRegistrationOptions(documentSelector, capabilities.codeActionProvider);\r\n        if (!options) {\r\n            return;\r\n        }\r\n        this.register(this.messages, { id: UUID.generateUuid(), registerOptions: options });\r\n    }\r\n    registerLanguageProvider(options) {\r\n        let client = this._client;\r\n        let provideCodeActions = (document, range, context, token) => {\r\n            let params = {\r\n                textDocument: client.code2ProtocolConverter.asTextDocumentIdentifier(document),\r\n                range: client.code2ProtocolConverter.asRange(range),\r\n                context: client.code2ProtocolConverter.asCodeActionContext(context)\r\n            };\r\n            return client.sendRequest(vscode_languageserver_protocol_1.CodeActionRequest.type, params, token).then((values) => {\r\n                if (values === null) {\r\n                    return undefined;\r\n                }\r\n                let result = [];\r\n                for (let item of values) {\r\n                    if (vscode_languageserver_protocol_1.Command.is(item)) {\r\n                        result.push(client.protocol2CodeConverter.asCommand(item));\r\n                    }\r\n                    else {\r\n                        result.push(client.protocol2CodeConverter.asCodeAction(item));\r\n                    }\r\n                    ;\r\n                }\r\n                return result;\r\n            }, (error) => {\r\n                client.logFailedRequest(vscode_languageserver_protocol_1.CodeActionRequest.type, error);\r\n                return Promise.resolve([]);\r\n            });\r\n        };\r\n        let middleware = client.clientOptions.middleware;\r\n        return vscode_1.languages.registerCodeActionsProvider(options.documentSelector, {\r\n            provideCodeActions: (document, range, context, token) => {\r\n                return middleware.provideCodeActions\r\n                    ? middleware.provideCodeActions(document, range, context, token, provideCodeActions)\r\n                    : provideCodeActions(document, range, context, token);\r\n            }\r\n        }, options.codeActionKinds\r\n            ? { providedCodeActionKinds: client.protocol2CodeConverter.asCodeActionKinds(options.codeActionKinds) }\r\n            : undefined);\r\n    }\r\n}\r\nclass CodeLensFeature extends TextDocumentFeature {\r\n    constructor(client) {\r\n        super(client, vscode_languageserver_protocol_1.CodeLensRequest.type);\r\n    }\r\n    fillClientCapabilities(capabilites) {\r\n        ensure(ensure(capabilites, 'textDocument'), 'codeLens').dynamicRegistration = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        const options = this.getRegistrationOptions(documentSelector, capabilities.codeLensProvider);\r\n        if (!options) {\r\n            return;\r\n        }\r\n        this.register(this.messages, { id: UUID.generateUuid(), registerOptions: options });\r\n    }\r\n    registerLanguageProvider(options) {\r\n        let client = this._client;\r\n        let provideCodeLenses = (document, token) => {\r\n            return client.sendRequest(vscode_languageserver_protocol_1.CodeLensRequest.type, client.code2ProtocolConverter.asCodeLensParams(document), token).then(client.protocol2CodeConverter.asCodeLenses, (error) => {\r\n                client.logFailedRequest(vscode_languageserver_protocol_1.CodeLensRequest.type, error);\r\n                return Promise.resolve([]);\r\n            });\r\n        };\r\n        let resolveCodeLens = (codeLens, token) => {\r\n            return client.sendRequest(vscode_languageserver_protocol_1.CodeLensResolveRequest.type, client.code2ProtocolConverter.asCodeLens(codeLens), token).then(client.protocol2CodeConverter.asCodeLens, (error) => {\r\n                client.logFailedRequest(vscode_languageserver_protocol_1.CodeLensResolveRequest.type, error);\r\n                return codeLens;\r\n            });\r\n        };\r\n        let middleware = client.clientOptions.middleware;\r\n        return vscode_1.languages.registerCodeLensProvider(options.documentSelector, {\r\n            provideCodeLenses: (document, token) => {\r\n                return middleware.provideCodeLenses\r\n                    ? middleware.provideCodeLenses(document, token, provideCodeLenses)\r\n                    : provideCodeLenses(document, token);\r\n            },\r\n            resolveCodeLens: (options.resolveProvider)\r\n                ? (codeLens, token) => {\r\n                    return middleware.resolveCodeLens\r\n                        ? middleware.resolveCodeLens(codeLens, token, resolveCodeLens)\r\n                        : resolveCodeLens(codeLens, token);\r\n                }\r\n                : undefined\r\n        });\r\n    }\r\n}\r\nclass DocumentFormattingFeature extends TextDocumentFeature {\r\n    constructor(client) {\r\n        super(client, vscode_languageserver_protocol_1.DocumentFormattingRequest.type);\r\n    }\r\n    fillClientCapabilities(capabilites) {\r\n        ensure(ensure(capabilites, 'textDocument'), 'formatting').dynamicRegistration = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        const options = this.getRegistrationOptions(documentSelector, capabilities.documentFormattingProvider);\r\n        if (!options) {\r\n            return;\r\n        }\r\n        this.register(this.messages, { id: UUID.generateUuid(), registerOptions: options });\r\n    }\r\n    registerLanguageProvider(options) {\r\n        let client = this._client;\r\n        let provideDocumentFormattingEdits = (document, options, token) => {\r\n            let params = {\r\n                textDocument: client.code2ProtocolConverter.asTextDocumentIdentifier(document),\r\n                options: client.code2ProtocolConverter.asFormattingOptions(options)\r\n            };\r\n            return client.sendRequest(vscode_languageserver_protocol_1.DocumentFormattingRequest.type, params, token).then(client.protocol2CodeConverter.asTextEdits, (error) => {\r\n                client.logFailedRequest(vscode_languageserver_protocol_1.DocumentFormattingRequest.type, error);\r\n                return Promise.resolve([]);\r\n            });\r\n        };\r\n        let middleware = client.clientOptions.middleware;\r\n        return vscode_1.languages.registerDocumentFormattingEditProvider(options.documentSelector, {\r\n            provideDocumentFormattingEdits: (document, options, token) => {\r\n                return middleware.provideDocumentFormattingEdits\r\n                    ? middleware.provideDocumentFormattingEdits(document, options, token, provideDocumentFormattingEdits)\r\n                    : provideDocumentFormattingEdits(document, options, token);\r\n            }\r\n        });\r\n    }\r\n}\r\nclass DocumentRangeFormattingFeature extends TextDocumentFeature {\r\n    constructor(client) {\r\n        super(client, vscode_languageserver_protocol_1.DocumentRangeFormattingRequest.type);\r\n    }\r\n    fillClientCapabilities(capabilites) {\r\n        ensure(ensure(capabilites, 'textDocument'), 'rangeFormatting').dynamicRegistration = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        const options = this.getRegistrationOptions(documentSelector, capabilities.documentRangeFormattingProvider);\r\n        if (!options) {\r\n            return;\r\n        }\r\n        this.register(this.messages, { id: UUID.generateUuid(), registerOptions: options });\r\n    }\r\n    registerLanguageProvider(options) {\r\n        let client = this._client;\r\n        let provideDocumentRangeFormattingEdits = (document, range, options, token) => {\r\n            let params = {\r\n                textDocument: client.code2ProtocolConverter.asTextDocumentIdentifier(document),\r\n                range: client.code2ProtocolConverter.asRange(range),\r\n                options: client.code2ProtocolConverter.asFormattingOptions(options)\r\n            };\r\n            return client.sendRequest(vscode_languageserver_protocol_1.DocumentRangeFormattingRequest.type, params, token).then(client.protocol2CodeConverter.asTextEdits, (error) => {\r\n                client.logFailedRequest(vscode_languageserver_protocol_1.DocumentRangeFormattingRequest.type, error);\r\n                return Promise.resolve([]);\r\n            });\r\n        };\r\n        let middleware = client.clientOptions.middleware;\r\n        return vscode_1.languages.registerDocumentRangeFormattingEditProvider(options.documentSelector, {\r\n            provideDocumentRangeFormattingEdits: (document, range, options, token) => {\r\n                return middleware.provideDocumentRangeFormattingEdits\r\n                    ? middleware.provideDocumentRangeFormattingEdits(document, range, options, token, provideDocumentRangeFormattingEdits)\r\n                    : provideDocumentRangeFormattingEdits(document, range, options, token);\r\n            }\r\n        });\r\n    }\r\n}\r\nclass DocumentOnTypeFormattingFeature extends TextDocumentFeature {\r\n    constructor(client) {\r\n        super(client, vscode_languageserver_protocol_1.DocumentOnTypeFormattingRequest.type);\r\n    }\r\n    fillClientCapabilities(capabilites) {\r\n        ensure(ensure(capabilites, 'textDocument'), 'onTypeFormatting').dynamicRegistration = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        const options = this.getRegistrationOptions(documentSelector, capabilities.documentOnTypeFormattingProvider);\r\n        if (!options) {\r\n            return;\r\n        }\r\n        this.register(this.messages, { id: UUID.generateUuid(), registerOptions: options });\r\n    }\r\n    registerLanguageProvider(options) {\r\n        let client = this._client;\r\n        let moreTriggerCharacter = options.moreTriggerCharacter || [];\r\n        let provideOnTypeFormattingEdits = (document, position, ch, options, token) => {\r\n            let params = {\r\n                textDocument: client.code2ProtocolConverter.asTextDocumentIdentifier(document),\r\n                position: client.code2ProtocolConverter.asPosition(position),\r\n                ch: ch,\r\n                options: client.code2ProtocolConverter.asFormattingOptions(options)\r\n            };\r\n            return client.sendRequest(vscode_languageserver_protocol_1.DocumentOnTypeFormattingRequest.type, params, token).then(client.protocol2CodeConverter.asTextEdits, (error) => {\r\n                client.logFailedRequest(vscode_languageserver_protocol_1.DocumentOnTypeFormattingRequest.type, error);\r\n                return Promise.resolve([]);\r\n            });\r\n        };\r\n        let middleware = client.clientOptions.middleware;\r\n        return vscode_1.languages.registerOnTypeFormattingEditProvider(options.documentSelector, {\r\n            provideOnTypeFormattingEdits: (document, position, ch, options, token) => {\r\n                return middleware.provideOnTypeFormattingEdits\r\n                    ? middleware.provideOnTypeFormattingEdits(document, position, ch, options, token, provideOnTypeFormattingEdits)\r\n                    : provideOnTypeFormattingEdits(document, position, ch, options, token);\r\n            }\r\n        }, options.firstTriggerCharacter, ...moreTriggerCharacter);\r\n    }\r\n}\r\nclass RenameFeature extends TextDocumentFeature {\r\n    constructor(client) {\r\n        super(client, vscode_languageserver_protocol_1.RenameRequest.type);\r\n    }\r\n    fillClientCapabilities(capabilites) {\r\n        let rename = ensure(ensure(capabilites, 'textDocument'), 'rename');\r\n        rename.dynamicRegistration = true;\r\n        rename.prepareSupport = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        const options = this.getRegistrationOptions(documentSelector, capabilities.renameProvider);\r\n        if (!options) {\r\n            return;\r\n        }\r\n        if (Is.boolean(capabilities.renameProvider)) {\r\n            options.prepareProvider = false;\r\n        }\r\n        this.register(this.messages, { id: UUID.generateUuid(), registerOptions: options });\r\n    }\r\n    registerLanguageProvider(options) {\r\n        let client = this._client;\r\n        let provideRenameEdits = (document, position, newName, token) => {\r\n            let params = {\r\n                textDocument: client.code2ProtocolConverter.asTextDocumentIdentifier(document),\r\n                position: client.code2ProtocolConverter.asPosition(position),\r\n                newName: newName\r\n            };\r\n            return client.sendRequest(vscode_languageserver_protocol_1.RenameRequest.type, params, token).then(client.protocol2CodeConverter.asWorkspaceEdit, (error) => {\r\n                client.logFailedRequest(vscode_languageserver_protocol_1.RenameRequest.type, error);\r\n                return Promise.reject(new Error(error.message));\r\n            });\r\n        };\r\n        let prepareRename = (document, position, token) => {\r\n            let params = {\r\n                textDocument: client.code2ProtocolConverter.asTextDocumentIdentifier(document),\r\n                position: client.code2ProtocolConverter.asPosition(position),\r\n            };\r\n            return client.sendRequest(vscode_languageserver_protocol_1.PrepareRenameRequest.type, params, token).then((result) => {\r\n                if (vscode_languageserver_protocol_1.Range.is(result)) {\r\n                    return client.protocol2CodeConverter.asRange(result);\r\n                }\r\n                else if (result && vscode_languageserver_protocol_1.Range.is(result.range)) {\r\n                    return {\r\n                        range: client.protocol2CodeConverter.asRange(result.range),\r\n                        placeholder: result.placeholder\r\n                    };\r\n                }\r\n                // To cancel the rename vscode API expects a rejected promise.\r\n                return Promise.reject(new Error(`The element can't be renamed.`));\r\n            }, (error) => {\r\n                client.logFailedRequest(vscode_languageserver_protocol_1.PrepareRenameRequest.type, error);\r\n                return Promise.reject(new Error(error.message));\r\n            });\r\n        };\r\n        let middleware = client.clientOptions.middleware;\r\n        return vscode_1.languages.registerRenameProvider(options.documentSelector, {\r\n            provideRenameEdits: (document, position, newName, token) => {\r\n                return middleware.provideRenameEdits\r\n                    ? middleware.provideRenameEdits(document, position, newName, token, provideRenameEdits)\r\n                    : provideRenameEdits(document, position, newName, token);\r\n            },\r\n            prepareRename: options.prepareProvider\r\n                ? (document, position, token) => {\r\n                    return middleware.prepareRename\r\n                        ? middleware.prepareRename(document, position, token, prepareRename)\r\n                        : prepareRename(document, position, token);\r\n                }\r\n                : undefined\r\n        });\r\n    }\r\n}\r\nclass DocumentLinkFeature extends TextDocumentFeature {\r\n    constructor(client) {\r\n        super(client, vscode_languageserver_protocol_1.DocumentLinkRequest.type);\r\n    }\r\n    fillClientCapabilities(capabilites) {\r\n        ensure(ensure(capabilites, 'textDocument'), 'documentLink').dynamicRegistration = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        const options = this.getRegistrationOptions(documentSelector, capabilities.documentLinkProvider);\r\n        if (!options) {\r\n            return;\r\n        }\r\n        this.register(this.messages, { id: UUID.generateUuid(), registerOptions: options });\r\n    }\r\n    registerLanguageProvider(options) {\r\n        let client = this._client;\r\n        let provideDocumentLinks = (document, token) => {\r\n            return client.sendRequest(vscode_languageserver_protocol_1.DocumentLinkRequest.type, client.code2ProtocolConverter.asDocumentLinkParams(document), token).then(client.protocol2CodeConverter.asDocumentLinks, (error) => {\r\n                client.logFailedRequest(vscode_languageserver_protocol_1.DocumentLinkRequest.type, error);\r\n                Promise.resolve(new Error(error.message));\r\n            });\r\n        };\r\n        let resolveDocumentLink = (link, token) => {\r\n            return client.sendRequest(vscode_languageserver_protocol_1.DocumentLinkResolveRequest.type, client.code2ProtocolConverter.asDocumentLink(link), token).then(client.protocol2CodeConverter.asDocumentLink, (error) => {\r\n                client.logFailedRequest(vscode_languageserver_protocol_1.DocumentLinkResolveRequest.type, error);\r\n                Promise.resolve(new Error(error.message));\r\n            });\r\n        };\r\n        let middleware = client.clientOptions.middleware;\r\n        return vscode_1.languages.registerDocumentLinkProvider(options.documentSelector, {\r\n            provideDocumentLinks: (document, token) => {\r\n                return middleware.provideDocumentLinks\r\n                    ? middleware.provideDocumentLinks(document, token, provideDocumentLinks)\r\n                    : provideDocumentLinks(document, token);\r\n            },\r\n            resolveDocumentLink: options.resolveProvider\r\n                ? (link, token) => {\r\n                    return middleware.resolveDocumentLink\r\n                        ? middleware.resolveDocumentLink(link, token, resolveDocumentLink)\r\n                        : resolveDocumentLink(link, token);\r\n                }\r\n                : undefined\r\n        });\r\n    }\r\n}\r\nclass ConfigurationFeature {\r\n    constructor(_client) {\r\n        this._client = _client;\r\n        this._listeners = new Map();\r\n    }\r\n    get messages() {\r\n        return vscode_languageserver_protocol_1.DidChangeConfigurationNotification.type;\r\n    }\r\n    fillClientCapabilities(capabilities) {\r\n        ensure(ensure(capabilities, 'workspace'), 'didChangeConfiguration').dynamicRegistration = true;\r\n    }\r\n    initialize() {\r\n        let section = this._client.clientOptions.synchronize.configurationSection;\r\n        if (section !== void 0) {\r\n            this.register(this.messages, {\r\n                id: UUID.generateUuid(),\r\n                registerOptions: {\r\n                    section: section\r\n                }\r\n            });\r\n        }\r\n    }\r\n    register(_message, data) {\r\n        let disposable = vscode_1.workspace.onDidChangeConfiguration((event) => {\r\n            this.onDidChangeConfiguration(data.registerOptions.section, event);\r\n        });\r\n        this._listeners.set(data.id, disposable);\r\n        if (data.registerOptions.section !== void 0) {\r\n            this.onDidChangeConfiguration(data.registerOptions.section, undefined);\r\n        }\r\n    }\r\n    unregister(id) {\r\n        let disposable = this._listeners.get(id);\r\n        if (disposable) {\r\n            this._listeners.delete(id);\r\n            disposable.dispose();\r\n        }\r\n    }\r\n    dispose() {\r\n        for (let disposable of this._listeners.values()) {\r\n            disposable.dispose();\r\n        }\r\n        this._listeners.clear();\r\n    }\r\n    onDidChangeConfiguration(configurationSection, event) {\r\n        let sections;\r\n        if (Is.string(configurationSection)) {\r\n            sections = [configurationSection];\r\n        }\r\n        else {\r\n            sections = configurationSection;\r\n        }\r\n        if (sections !== void 0 && event !== void 0) {\r\n            let affected = sections.some((section) => event.affectsConfiguration(section));\r\n            if (!affected) {\r\n                return;\r\n            }\r\n        }\r\n        let didChangeConfiguration = (sections) => {\r\n            if (sections === void 0) {\r\n                this._client.sendNotification(vscode_languageserver_protocol_1.DidChangeConfigurationNotification.type, { settings: null });\r\n                return;\r\n            }\r\n            this._client.sendNotification(vscode_languageserver_protocol_1.DidChangeConfigurationNotification.type, { settings: this.extractSettingsInformation(sections) });\r\n        };\r\n        let middleware = this.getMiddleware();\r\n        middleware\r\n            ? middleware(sections, didChangeConfiguration)\r\n            : didChangeConfiguration(sections);\r\n    }\r\n    extractSettingsInformation(keys) {\r\n        function ensurePath(config, path) {\r\n            let current = config;\r\n            for (let i = 0; i < path.length - 1; i++) {\r\n                let obj = current[path[i]];\r\n                if (!obj) {\r\n                    obj = Object.create(null);\r\n                    current[path[i]] = obj;\r\n                }\r\n                current = obj;\r\n            }\r\n            return current;\r\n        }\r\n        let resource = this._client.clientOptions.workspaceFolder\r\n            ? this._client.clientOptions.workspaceFolder.uri\r\n            : undefined;\r\n        let result = Object.create(null);\r\n        for (let i = 0; i < keys.length; i++) {\r\n            let key = keys[i];\r\n            let index = key.indexOf('.');\r\n            let config = null;\r\n            if (index >= 0) {\r\n                config = vscode_1.workspace.getConfiguration(key.substr(0, index), resource).get(key.substr(index + 1));\r\n            }\r\n            else {\r\n                config = vscode_1.workspace.getConfiguration(key, resource);\r\n            }\r\n            if (config) {\r\n                let path = keys[i].split('.');\r\n                ensurePath(result, path)[path[path.length - 1]] = config;\r\n            }\r\n        }\r\n        return result;\r\n    }\r\n    getMiddleware() {\r\n        let middleware = this._client.clientOptions.middleware;\r\n        if (middleware.workspace && middleware.workspace.didChangeConfiguration) {\r\n            return middleware.workspace.didChangeConfiguration;\r\n        }\r\n        else {\r\n            return undefined;\r\n        }\r\n    }\r\n}\r\nclass ExecuteCommandFeature {\r\n    constructor(_client) {\r\n        this._client = _client;\r\n        this._commands = new Map();\r\n    }\r\n    get messages() {\r\n        return vscode_languageserver_protocol_1.ExecuteCommandRequest.type;\r\n    }\r\n    fillClientCapabilities(capabilities) {\r\n        ensure(ensure(capabilities, 'workspace'), 'executeCommand').dynamicRegistration = true;\r\n    }\r\n    initialize(capabilities) {\r\n        if (!capabilities.executeCommandProvider) {\r\n            return;\r\n        }\r\n        this.register(this.messages, {\r\n            id: UUID.generateUuid(),\r\n            registerOptions: Object.assign({}, capabilities.executeCommandProvider)\r\n        });\r\n    }\r\n    register(_message, data) {\r\n        let client = this._client;\r\n        if (data.registerOptions.commands) {\r\n            let disposeables = [];\r\n            for (const command of data.registerOptions.commands) {\r\n                disposeables.push(vscode_1.commands.registerCommand(command, (...args) => {\r\n                    let params = {\r\n                        command,\r\n                        arguments: args\r\n                    };\r\n                    return client.sendRequest(vscode_languageserver_protocol_1.ExecuteCommandRequest.type, params).then(undefined, (error) => {\r\n                        client.logFailedRequest(vscode_languageserver_protocol_1.ExecuteCommandRequest.type, error);\r\n                    });\r\n                }));\r\n            }\r\n            this._commands.set(data.id, disposeables);\r\n        }\r\n    }\r\n    unregister(id) {\r\n        let disposeables = this._commands.get(id);\r\n        if (disposeables) {\r\n            disposeables.forEach(disposable => disposable.dispose());\r\n        }\r\n    }\r\n    dispose() {\r\n        this._commands.forEach((value) => {\r\n            value.forEach(disposable => disposable.dispose());\r\n        });\r\n        this._commands.clear();\r\n    }\r\n}\r\nvar MessageTransports;\r\n(function (MessageTransports) {\r\n    function is(value) {\r\n        let candidate = value;\r\n        return candidate && vscode_languageserver_protocol_1.MessageReader.is(value.reader) && vscode_languageserver_protocol_1.MessageWriter.is(value.writer);\r\n    }\r\n    MessageTransports.is = is;\r\n})(MessageTransports = exports.MessageTransports || (exports.MessageTransports = {}));\r\nclass OnReady {\r\n    constructor(_resolve, _reject) {\r\n        this._resolve = _resolve;\r\n        this._reject = _reject;\r\n        this._used = false;\r\n    }\r\n    get isUsed() {\r\n        return this._used;\r\n    }\r\n    resolve() {\r\n        this._used = true;\r\n        this._resolve();\r\n    }\r\n    reject(error) {\r\n        this._used = true;\r\n        this._reject(error);\r\n    }\r\n}\r\nclass BaseLanguageClient {\r\n    constructor(id, name, clientOptions) {\r\n        this._traceFormat = vscode_languageserver_protocol_1.TraceFormat.Text;\r\n        this._features = [];\r\n        this._method2Message = new Map();\r\n        this._dynamicFeatures = new Map();\r\n        this._id = id;\r\n        this._name = name;\r\n        clientOptions = clientOptions || {};\r\n        this._clientOptions = {\r\n            documentSelector: clientOptions.documentSelector || [],\r\n            synchronize: clientOptions.synchronize || {},\r\n            diagnosticCollectionName: clientOptions.diagnosticCollectionName,\r\n            outputChannelName: clientOptions.outputChannelName || this._name,\r\n            revealOutputChannelOn: clientOptions.revealOutputChannelOn || RevealOutputChannelOn.Error,\r\n            stdioEncoding: clientOptions.stdioEncoding || 'utf8',\r\n            initializationOptions: clientOptions.initializationOptions,\r\n            initializationFailedHandler: clientOptions.initializationFailedHandler,\r\n            progressOnInitialization: !!clientOptions.progressOnInitialization,\r\n            errorHandler: clientOptions.errorHandler || new DefaultErrorHandler(this._name),\r\n            middleware: clientOptions.middleware || {},\r\n            uriConverters: clientOptions.uriConverters,\r\n            workspaceFolder: clientOptions.workspaceFolder\r\n        };\r\n        this._clientOptions.synchronize = this._clientOptions.synchronize || {};\r\n        this.state = ClientState.Initial;\r\n        this._connectionPromise = undefined;\r\n        this._resolvedConnection = undefined;\r\n        this._initializeResult = undefined;\r\n        if (clientOptions.outputChannel) {\r\n            this._outputChannel = clientOptions.outputChannel;\r\n            this._disposeOutputChannel = false;\r\n        }\r\n        else {\r\n            this._outputChannel = undefined;\r\n            this._disposeOutputChannel = true;\r\n        }\r\n        this._traceOutputChannel = clientOptions.traceOutputChannel;\r\n        this._listeners = undefined;\r\n        this._providers = undefined;\r\n        this._diagnostics = undefined;\r\n        this._fileEvents = [];\r\n        this._fileEventDelayer = new async_1.Delayer(250);\r\n        this._onReady = new Promise((resolve, reject) => {\r\n            this._onReadyCallbacks = new OnReady(resolve, reject);\r\n        });\r\n        this._onStop = undefined;\r\n        this._telemetryEmitter = new vscode_languageserver_protocol_1.Emitter();\r\n        this._stateChangeEmitter = new vscode_languageserver_protocol_1.Emitter();\r\n        this._tracer = {\r\n            log: (messageOrDataObject, data) => {\r\n                if (Is.string(messageOrDataObject)) {\r\n                    this.logTrace(messageOrDataObject, data);\r\n                }\r\n                else {\r\n                    this.logObjectTrace(messageOrDataObject);\r\n                }\r\n            },\r\n        };\r\n        this._c2p = c2p.createConverter(clientOptions.uriConverters ? clientOptions.uriConverters.code2Protocol : undefined);\r\n        this._p2c = p2c.createConverter(clientOptions.uriConverters ? clientOptions.uriConverters.protocol2Code : undefined);\r\n        this._syncedDocuments = new Map();\r\n        this.registerBuiltinFeatures();\r\n    }\r\n    get state() {\r\n        return this._state;\r\n    }\r\n    set state(value) {\r\n        let oldState = this.getPublicState();\r\n        this._state = value;\r\n        let newState = this.getPublicState();\r\n        if (newState !== oldState) {\r\n            this._stateChangeEmitter.fire({ oldState, newState });\r\n        }\r\n    }\r\n    getPublicState() {\r\n        if (this.state === ClientState.Running) {\r\n            return State.Running;\r\n        }\r\n        else if (this.state === ClientState.Starting) {\r\n            return State.Starting;\r\n        }\r\n        else {\r\n            return State.Stopped;\r\n        }\r\n    }\r\n    get initializeResult() {\r\n        return this._initializeResult;\r\n    }\r\n    sendRequest(type, ...params) {\r\n        if (!this.isConnectionActive()) {\r\n            throw new Error('Language client is not ready yet');\r\n        }\r\n        this.forceDocumentSync();\r\n        try {\r\n            return this._resolvedConnection.sendRequest(type, ...params);\r\n        }\r\n        catch (error) {\r\n            this.error(`Sending request ${Is.string(type) ? type : type.method} failed.`, error);\r\n            throw error;\r\n        }\r\n    }\r\n    onRequest(type, handler) {\r\n        if (!this.isConnectionActive()) {\r\n            throw new Error('Language client is not ready yet');\r\n        }\r\n        try {\r\n            this._resolvedConnection.onRequest(type, handler);\r\n        }\r\n        catch (error) {\r\n            this.error(`Registering request handler ${Is.string(type) ? type : type.method} failed.`, error);\r\n            throw error;\r\n        }\r\n    }\r\n    sendNotification(type, params) {\r\n        if (!this.isConnectionActive()) {\r\n            throw new Error('Language client is not ready yet');\r\n        }\r\n        this.forceDocumentSync();\r\n        try {\r\n            this._resolvedConnection.sendNotification(type, params);\r\n        }\r\n        catch (error) {\r\n            this.error(`Sending notification ${Is.string(type) ? type : type.method} failed.`, error);\r\n            throw error;\r\n        }\r\n    }\r\n    onNotification(type, handler) {\r\n        if (!this.isConnectionActive()) {\r\n            throw new Error('Language client is not ready yet');\r\n        }\r\n        try {\r\n            this._resolvedConnection.onNotification(type, handler);\r\n        }\r\n        catch (error) {\r\n            this.error(`Registering notification handler ${Is.string(type) ? type : type.method} failed.`, error);\r\n            throw error;\r\n        }\r\n    }\r\n    onProgress(type, token, handler) {\r\n        if (!this.isConnectionActive()) {\r\n            throw new Error('Language client is not ready yet');\r\n        }\r\n        try {\r\n            return this._resolvedConnection.onProgress(type, token, handler);\r\n        }\r\n        catch (error) {\r\n            this.error(`Registering progress handler for token ${token} failed.`, error);\r\n            throw error;\r\n        }\r\n    }\r\n    sendProgress(type, token, value) {\r\n        if (!this.isConnectionActive()) {\r\n            throw new Error('Language client is not ready yet');\r\n        }\r\n        this.forceDocumentSync();\r\n        try {\r\n            this._resolvedConnection.sendProgress(type, token, value);\r\n        }\r\n        catch (error) {\r\n            this.error(`Sending progress for token ${token} failed.`, error);\r\n            throw error;\r\n        }\r\n    }\r\n    get clientOptions() {\r\n        return this._clientOptions;\r\n    }\r\n    get protocol2CodeConverter() {\r\n        return this._p2c;\r\n    }\r\n    get code2ProtocolConverter() {\r\n        return this._c2p;\r\n    }\r\n    get onTelemetry() {\r\n        return this._telemetryEmitter.event;\r\n    }\r\n    get onDidChangeState() {\r\n        return this._stateChangeEmitter.event;\r\n    }\r\n    get outputChannel() {\r\n        if (!this._outputChannel) {\r\n            this._outputChannel = vscode_1.window.createOutputChannel(this._clientOptions.outputChannelName ? this._clientOptions.outputChannelName : this._name);\r\n        }\r\n        return this._outputChannel;\r\n    }\r\n    get traceOutputChannel() {\r\n        if (this._traceOutputChannel) {\r\n            return this._traceOutputChannel;\r\n        }\r\n        return this.outputChannel;\r\n    }\r\n    get diagnostics() {\r\n        return this._diagnostics;\r\n    }\r\n    createDefaultErrorHandler() {\r\n        return new DefaultErrorHandler(this._name);\r\n    }\r\n    set trace(value) {\r\n        this._trace = value;\r\n        this.onReady().then(() => {\r\n            this.resolveConnection().then((connection) => {\r\n                connection.trace(this._trace, this._tracer, {\r\n                    sendNotification: false,\r\n                    traceFormat: this._traceFormat\r\n                });\r\n            });\r\n        }, () => {\r\n        });\r\n    }\r\n    data2String(data) {\r\n        if (data instanceof vscode_languageserver_protocol_1.ResponseError) {\r\n            const responseError = data;\r\n            return `  Message: ${responseError.message}\\n  Code: ${responseError.code} ${responseError.data ? '\\n' + responseError.data.toString() : ''}`;\r\n        }\r\n        if (data instanceof Error) {\r\n            if (Is.string(data.stack)) {\r\n                return data.stack;\r\n            }\r\n            return data.message;\r\n        }\r\n        if (Is.string(data)) {\r\n            return data;\r\n        }\r\n        return data.toString();\r\n    }\r\n    info(message, data) {\r\n        this.outputChannel.appendLine(`[Info  - ${(new Date().toLocaleTimeString())}] ${message}`);\r\n        if (data) {\r\n            this.outputChannel.appendLine(this.data2String(data));\r\n        }\r\n        if (this._clientOptions.revealOutputChannelOn <= RevealOutputChannelOn.Info) {\r\n            this.showNotificationMessage();\r\n        }\r\n    }\r\n    warn(message, data) {\r\n        this.outputChannel.appendLine(`[Warn  - ${(new Date().toLocaleTimeString())}] ${message}`);\r\n        if (data) {\r\n            this.outputChannel.appendLine(this.data2String(data));\r\n        }\r\n        if (this._clientOptions.revealOutputChannelOn <= RevealOutputChannelOn.Warn) {\r\n            this.showNotificationMessage();\r\n        }\r\n    }\r\n    error(message, data) {\r\n        this.outputChannel.appendLine(`[Error - ${(new Date().toLocaleTimeString())}] ${message}`);\r\n        if (data) {\r\n            this.outputChannel.appendLine(this.data2String(data));\r\n        }\r\n        if (this._clientOptions.revealOutputChannelOn <= RevealOutputChannelOn.Error) {\r\n            this.showNotificationMessage();\r\n        }\r\n    }\r\n    showNotificationMessage() {\r\n        vscode_1.window.showInformationMessage('A request has failed. See the output for more information.', 'Go to output').then(() => {\r\n            this.outputChannel.show(true);\r\n        });\r\n    }\r\n    logTrace(message, data) {\r\n        this.traceOutputChannel.appendLine(`[Trace - ${(new Date().toLocaleTimeString())}] ${message}`);\r\n        if (data) {\r\n            this.traceOutputChannel.appendLine(this.data2String(data));\r\n        }\r\n    }\r\n    logObjectTrace(data) {\r\n        if (data.isLSPMessage && data.type) {\r\n            this.traceOutputChannel.append(`[LSP   - ${(new Date().toLocaleTimeString())}] `);\r\n        }\r\n        else {\r\n            this.traceOutputChannel.append(`[Trace - ${(new Date().toLocaleTimeString())}] `);\r\n        }\r\n        if (data) {\r\n            this.traceOutputChannel.appendLine(`${JSON.stringify(data)}`);\r\n        }\r\n    }\r\n    needsStart() {\r\n        return this.state === ClientState.Initial || this.state === ClientState.Stopping || this.state === ClientState.Stopped;\r\n    }\r\n    needsStop() {\r\n        return this.state === ClientState.Starting || this.state === ClientState.Running;\r\n    }\r\n    onReady() {\r\n        return this._onReady;\r\n    }\r\n    isConnectionActive() {\r\n        return this.state === ClientState.Running && !!this._resolvedConnection;\r\n    }\r\n    start() {\r\n        if (this._onReadyCallbacks.isUsed) {\r\n            this._onReady = new Promise((resolve, reject) => {\r\n                this._onReadyCallbacks = new OnReady(resolve, reject);\r\n            });\r\n        }\r\n        this._listeners = [];\r\n        this._providers = [];\r\n        // If we restart then the diagnostics collection is reused.\r\n        if (!this._diagnostics) {\r\n            this._diagnostics = this._clientOptions.diagnosticCollectionName\r\n                ? vscode_1.languages.createDiagnosticCollection(this._clientOptions.diagnosticCollectionName)\r\n                : vscode_1.languages.createDiagnosticCollection();\r\n        }\r\n        this.state = ClientState.Starting;\r\n        this.resolveConnection().then((connection) => {\r\n            connection.onLogMessage((message) => {\r\n                switch (message.type) {\r\n                    case vscode_languageserver_protocol_1.MessageType.Error:\r\n                        this.error(message.message);\r\n                        break;\r\n                    case vscode_languageserver_protocol_1.MessageType.Warning:\r\n                        this.warn(message.message);\r\n                        break;\r\n                    case vscode_languageserver_protocol_1.MessageType.Info:\r\n                        this.info(message.message);\r\n                        break;\r\n                    default:\r\n                        this.outputChannel.appendLine(message.message);\r\n                }\r\n            });\r\n            connection.onShowMessage((message) => {\r\n                switch (message.type) {\r\n                    case vscode_languageserver_protocol_1.MessageType.Error:\r\n                        vscode_1.window.showErrorMessage(message.message);\r\n                        break;\r\n                    case vscode_languageserver_protocol_1.MessageType.Warning:\r\n                        vscode_1.window.showWarningMessage(message.message);\r\n                        break;\r\n                    case vscode_languageserver_protocol_1.MessageType.Info:\r\n                        vscode_1.window.showInformationMessage(message.message);\r\n                        break;\r\n                    default:\r\n                        vscode_1.window.showInformationMessage(message.message);\r\n                }\r\n            });\r\n            connection.onRequest(vscode_languageserver_protocol_1.ShowMessageRequest.type, (params) => {\r\n                let messageFunc;\r\n                switch (params.type) {\r\n                    case vscode_languageserver_protocol_1.MessageType.Error:\r\n                        messageFunc = vscode_1.window.showErrorMessage;\r\n                        break;\r\n                    case vscode_languageserver_protocol_1.MessageType.Warning:\r\n                        messageFunc = vscode_1.window.showWarningMessage;\r\n                        break;\r\n                    case vscode_languageserver_protocol_1.MessageType.Info:\r\n                        messageFunc = vscode_1.window.showInformationMessage;\r\n                        break;\r\n                    default:\r\n                        messageFunc = vscode_1.window.showInformationMessage;\r\n                }\r\n                let actions = params.actions || [];\r\n                return messageFunc(params.message, ...actions);\r\n            });\r\n            connection.onTelemetry((data) => {\r\n                this._telemetryEmitter.fire(data);\r\n            });\r\n            connection.listen();\r\n            // Error is handled in the initialize call.\r\n            return this.initialize(connection);\r\n        }).then(undefined, (error) => {\r\n            this.state = ClientState.StartFailed;\r\n            this._onReadyCallbacks.reject(error);\r\n            this.error('Starting client failed', error);\r\n            vscode_1.window.showErrorMessage(`Couldn't start client ${this._name}`);\r\n        });\r\n        return new vscode_1.Disposable(() => {\r\n            if (this.needsStop()) {\r\n                this.stop();\r\n            }\r\n        });\r\n    }\r\n    resolveConnection() {\r\n        if (!this._connectionPromise) {\r\n            this._connectionPromise = this.createConnection();\r\n        }\r\n        return this._connectionPromise;\r\n    }\r\n    initialize(connection) {\r\n        this.refreshTrace(connection, false);\r\n        let initOption = this._clientOptions.initializationOptions;\r\n        let rootPath = this._clientOptions.workspaceFolder\r\n            ? this._clientOptions.workspaceFolder.uri.fsPath\r\n            : this._clientGetRootPath();\r\n        let initParams = {\r\n            processId: process.pid,\r\n            rootPath: rootPath ? rootPath : null,\r\n            rootUri: rootPath ? this._c2p.asUri(vscode_1.Uri.file(rootPath)) : null,\r\n            capabilities: this.computeClientCapabilities(),\r\n            initializationOptions: Is.func(initOption) ? initOption() : initOption,\r\n            trace: vscode_languageserver_protocol_1.Trace.toString(this._trace),\r\n            workspaceFolders: null\r\n        };\r\n        this.fillInitializeParams(initParams);\r\n        if (this._clientOptions.progressOnInitialization) {\r\n            const token = UUID.generateUuid();\r\n            const part = new progressPart_1.ProgressPart(connection, token);\r\n            initParams.workDoneToken = token;\r\n            return this.doInitialize(connection, initParams).then((result) => {\r\n                part.done();\r\n                return result;\r\n            }, (error) => {\r\n                part.cancel();\r\n                throw error;\r\n            });\r\n        }\r\n        else {\r\n            return this.doInitialize(connection, initParams);\r\n        }\r\n    }\r\n    doInitialize(connection, initParams) {\r\n        return connection.initialize(initParams).then((result) => {\r\n            this._resolvedConnection = connection;\r\n            this._initializeResult = result;\r\n            this.state = ClientState.Running;\r\n            let textDocumentSyncOptions = undefined;\r\n            if (Is.number(result.capabilities.textDocumentSync)) {\r\n                if (result.capabilities.textDocumentSync === vscode_languageserver_protocol_1.TextDocumentSyncKind.None) {\r\n                    textDocumentSyncOptions = {\r\n                        openClose: false,\r\n                        change: vscode_languageserver_protocol_1.TextDocumentSyncKind.None,\r\n                        save: undefined\r\n                    };\r\n                }\r\n                else {\r\n                    textDocumentSyncOptions = {\r\n                        openClose: true,\r\n                        change: result.capabilities.textDocumentSync,\r\n                        save: {\r\n                            includeText: false\r\n                        }\r\n                    };\r\n                }\r\n            }\r\n            else if (result.capabilities.textDocumentSync !== void 0 && result.capabilities.textDocumentSync !== null) {\r\n                textDocumentSyncOptions = result.capabilities.textDocumentSync;\r\n            }\r\n            this._capabilities = Object.assign({}, result.capabilities, { resolvedTextDocumentSync: textDocumentSyncOptions });\r\n            connection.onDiagnostics(params => this.handleDiagnostics(params));\r\n            connection.onRequest(vscode_languageserver_protocol_1.RegistrationRequest.type, params => this.handleRegistrationRequest(params));\r\n            // See https://github.com/Microsoft/vscode-languageserver-node/issues/199\r\n            connection.onRequest('client/registerFeature', params => this.handleRegistrationRequest(params));\r\n            connection.onRequest(vscode_languageserver_protocol_1.UnregistrationRequest.type, params => this.handleUnregistrationRequest(params));\r\n            // See https://github.com/Microsoft/vscode-languageserver-node/issues/199\r\n            connection.onRequest('client/unregisterFeature', params => this.handleUnregistrationRequest(params));\r\n            connection.onRequest(vscode_languageserver_protocol_1.ApplyWorkspaceEditRequest.type, params => this.handleApplyWorkspaceEdit(params));\r\n            connection.sendNotification(vscode_languageserver_protocol_1.InitializedNotification.type, {});\r\n            this.hookFileEvents(connection);\r\n            this.hookConfigurationChanged(connection);\r\n            this.initializeFeatures(connection);\r\n            this._onReadyCallbacks.resolve();\r\n            return result;\r\n        }).then(undefined, (error) => {\r\n            if (this._clientOptions.initializationFailedHandler) {\r\n                if (this._clientOptions.initializationFailedHandler(error)) {\r\n                    this.initialize(connection);\r\n                }\r\n                else {\r\n                    this.stop();\r\n                    this._onReadyCallbacks.reject(error);\r\n                }\r\n            }\r\n            else if (error instanceof vscode_languageserver_protocol_1.ResponseError && error.data && error.data.retry) {\r\n                vscode_1.window.showErrorMessage(error.message, { title: 'Retry', id: \"retry\" }).then(item => {\r\n                    if (item && item.id === 'retry') {\r\n                        this.initialize(connection);\r\n                    }\r\n                    else {\r\n                        this.stop();\r\n                        this._onReadyCallbacks.reject(error);\r\n                    }\r\n                });\r\n            }\r\n            else {\r\n                if (error && error.message) {\r\n                    vscode_1.window.showErrorMessage(error.message);\r\n                }\r\n                this.error('Server initialization failed.', error);\r\n                this.stop();\r\n                this._onReadyCallbacks.reject(error);\r\n            }\r\n        });\r\n    }\r\n    _clientGetRootPath() {\r\n        let folders = vscode_1.workspace.workspaceFolders;\r\n        if (!folders || folders.length === 0) {\r\n            return undefined;\r\n        }\r\n        let folder = folders[0];\r\n        if (folder.uri.scheme === 'file') {\r\n            return folder.uri.fsPath;\r\n        }\r\n        return undefined;\r\n    }\r\n    stop() {\r\n        this._initializeResult = undefined;\r\n        if (!this._connectionPromise) {\r\n            this.state = ClientState.Stopped;\r\n            return Promise.resolve();\r\n        }\r\n        if (this.state === ClientState.Stopping && this._onStop) {\r\n            return this._onStop;\r\n        }\r\n        this.state = ClientState.Stopping;\r\n        this.cleanUp(false);\r\n        // unhook listeners\r\n        return this._onStop = this.resolveConnection().then(connection => {\r\n            return connection.shutdown().then(() => {\r\n                connection.exit();\r\n                connection.dispose();\r\n                this.state = ClientState.Stopped;\r\n                this.cleanUpChannel();\r\n                this._onStop = undefined;\r\n                this._connectionPromise = undefined;\r\n                this._resolvedConnection = undefined;\r\n            });\r\n        });\r\n    }\r\n    cleanUp(channel = true, diagnostics = true) {\r\n        if (this._listeners) {\r\n            this._listeners.forEach(listener => listener.dispose());\r\n            this._listeners = undefined;\r\n        }\r\n        if (this._providers) {\r\n            this._providers.forEach(provider => provider.dispose());\r\n            this._providers = undefined;\r\n        }\r\n        if (this._syncedDocuments) {\r\n            this._syncedDocuments.clear();\r\n        }\r\n        for (let handler of this._dynamicFeatures.values()) {\r\n            handler.dispose();\r\n        }\r\n        if (channel) {\r\n            this.cleanUpChannel();\r\n        }\r\n        if (diagnostics && this._diagnostics) {\r\n            this._diagnostics.dispose();\r\n            this._diagnostics = undefined;\r\n        }\r\n    }\r\n    cleanUpChannel() {\r\n        if (this._outputChannel && this._disposeOutputChannel) {\r\n            this._outputChannel.dispose();\r\n            this._outputChannel = undefined;\r\n        }\r\n    }\r\n    notifyFileEvent(event) {\r\n        this._fileEvents.push(event);\r\n        this._fileEventDelayer.trigger(() => {\r\n            this.onReady().then(() => {\r\n                this.resolveConnection().then(connection => {\r\n                    if (this.isConnectionActive()) {\r\n                        this.forceDocumentSync();\r\n                        connection.didChangeWatchedFiles({ changes: this._fileEvents });\r\n                    }\r\n                    this._fileEvents = [];\r\n                });\r\n            }, (error) => {\r\n                this.error(`Notify file events failed.`, error);\r\n            });\r\n        });\r\n    }\r\n    forceDocumentSync() {\r\n        this._dynamicFeatures.get(vscode_languageserver_protocol_1.DidChangeTextDocumentNotification.type.method).forceDelivery();\r\n    }\r\n    handleDiagnostics(params) {\r\n        if (!this._diagnostics) {\r\n            return;\r\n        }\r\n        let uri = this._p2c.asUri(params.uri);\r\n        let diagnostics = this._p2c.asDiagnostics(params.diagnostics);\r\n        let middleware = this.clientOptions.middleware.handleDiagnostics;\r\n        if (middleware) {\r\n            middleware(uri, diagnostics, (uri, diagnostics) => this.setDiagnostics(uri, diagnostics));\r\n        }\r\n        else {\r\n            this.setDiagnostics(uri, diagnostics);\r\n        }\r\n    }\r\n    setDiagnostics(uri, diagnostics) {\r\n        if (!this._diagnostics) {\r\n            return;\r\n        }\r\n        this._diagnostics.set(uri, diagnostics);\r\n    }\r\n    createConnection() {\r\n        let errorHandler = (error, message, count) => {\r\n            this.handleConnectionError(error, message, count);\r\n        };\r\n        let closeHandler = () => {\r\n            this.handleConnectionClosed();\r\n        };\r\n        return this.createMessageTransports(this._clientOptions.stdioEncoding || 'utf8').then((transports) => {\r\n            return createConnection(transports.reader, transports.writer, errorHandler, closeHandler);\r\n        });\r\n    }\r\n    handleConnectionClosed() {\r\n        // Check whether this is a normal shutdown in progress or the client stopped normally.\r\n        if (this.state === ClientState.Stopping || this.state === ClientState.Stopped) {\r\n            return;\r\n        }\r\n        try {\r\n            if (this._resolvedConnection) {\r\n                this._resolvedConnection.dispose();\r\n            }\r\n        }\r\n        catch (error) {\r\n            // Disposing a connection could fail if error cases.\r\n        }\r\n        let action = CloseAction.DoNotRestart;\r\n        try {\r\n            action = this._clientOptions.errorHandler.closed();\r\n        }\r\n        catch (error) {\r\n            // Ignore errors coming from the error handler.\r\n        }\r\n        this._connectionPromise = undefined;\r\n        this._resolvedConnection = undefined;\r\n        if (action === CloseAction.DoNotRestart) {\r\n            this.error('Connection to server got closed. Server will not be restarted.');\r\n            this.state = ClientState.Stopped;\r\n            this.cleanUp(false, true);\r\n        }\r\n        else if (action === CloseAction.Restart) {\r\n            this.info('Connection to server got closed. Server will restart.');\r\n            this.cleanUp(false, false);\r\n            this.state = ClientState.Initial;\r\n            this.start();\r\n        }\r\n    }\r\n    handleConnectionError(error, message, count) {\r\n        let action = this._clientOptions.errorHandler.error(error, message, count);\r\n        if (action === ErrorAction.Shutdown) {\r\n            this.error('Connection to server is erroring. Shutting down server.');\r\n            this.stop();\r\n        }\r\n    }\r\n    hookConfigurationChanged(connection) {\r\n        vscode_1.workspace.onDidChangeConfiguration(() => {\r\n            this.refreshTrace(connection, true);\r\n        });\r\n    }\r\n    refreshTrace(connection, sendNotification = false) {\r\n        let config = vscode_1.workspace.getConfiguration(this._id);\r\n        let trace = vscode_languageserver_protocol_1.Trace.Off;\r\n        let traceFormat = vscode_languageserver_protocol_1.TraceFormat.Text;\r\n        if (config) {\r\n            const traceConfig = config.get('trace.server', 'off');\r\n            if (typeof traceConfig === 'string') {\r\n                trace = vscode_languageserver_protocol_1.Trace.fromString(traceConfig);\r\n            }\r\n            else {\r\n                trace = vscode_languageserver_protocol_1.Trace.fromString(config.get('trace.server.verbosity', 'off'));\r\n                traceFormat = vscode_languageserver_protocol_1.TraceFormat.fromString(config.get('trace.server.format', 'text'));\r\n            }\r\n        }\r\n        this._trace = trace;\r\n        this._traceFormat = traceFormat;\r\n        connection.trace(this._trace, this._tracer, {\r\n            sendNotification,\r\n            traceFormat: this._traceFormat\r\n        });\r\n    }\r\n    hookFileEvents(_connection) {\r\n        let fileEvents = this._clientOptions.synchronize.fileEvents;\r\n        if (!fileEvents) {\r\n            return;\r\n        }\r\n        let watchers;\r\n        if (Is.array(fileEvents)) {\r\n            watchers = fileEvents;\r\n        }\r\n        else {\r\n            watchers = [fileEvents];\r\n        }\r\n        if (!watchers) {\r\n            return;\r\n        }\r\n        this._dynamicFeatures.get(vscode_languageserver_protocol_1.DidChangeWatchedFilesNotification.type.method).registerRaw(UUID.generateUuid(), watchers);\r\n    }\r\n    registerFeatures(features) {\r\n        for (let feature of features) {\r\n            this.registerFeature(feature);\r\n        }\r\n    }\r\n    registerFeature(feature) {\r\n        this._features.push(feature);\r\n        if (DynamicFeature.is(feature)) {\r\n            let messages = feature.messages;\r\n            if (Array.isArray(messages)) {\r\n                for (let message of messages) {\r\n                    this._method2Message.set(message.method, message);\r\n                    this._dynamicFeatures.set(message.method, feature);\r\n                }\r\n            }\r\n            else {\r\n                this._method2Message.set(messages.method, messages);\r\n                this._dynamicFeatures.set(messages.method, feature);\r\n            }\r\n        }\r\n    }\r\n    registerBuiltinFeatures() {\r\n        this.registerFeature(new ConfigurationFeature(this));\r\n        this.registerFeature(new DidOpenTextDocumentFeature(this, this._syncedDocuments));\r\n        this.registerFeature(new DidChangeTextDocumentFeature(this));\r\n        this.registerFeature(new WillSaveFeature(this));\r\n        this.registerFeature(new WillSaveWaitUntilFeature(this));\r\n        this.registerFeature(new DidSaveTextDocumentFeature(this));\r\n        this.registerFeature(new DidCloseTextDocumentFeature(this, this._syncedDocuments));\r\n        this.registerFeature(new FileSystemWatcherFeature(this, (event) => this.notifyFileEvent(event)));\r\n        this.registerFeature(new CompletionItemFeature(this));\r\n        this.registerFeature(new HoverFeature(this));\r\n        this.registerFeature(new SignatureHelpFeature(this));\r\n        this.registerFeature(new DefinitionFeature(this));\r\n        this.registerFeature(new ReferencesFeature(this));\r\n        this.registerFeature(new DocumentHighlightFeature(this));\r\n        this.registerFeature(new DocumentSymbolFeature(this));\r\n        this.registerFeature(new WorkspaceSymbolFeature(this));\r\n        this.registerFeature(new CodeActionFeature(this));\r\n        this.registerFeature(new CodeLensFeature(this));\r\n        this.registerFeature(new DocumentFormattingFeature(this));\r\n        this.registerFeature(new DocumentRangeFormattingFeature(this));\r\n        this.registerFeature(new DocumentOnTypeFormattingFeature(this));\r\n        this.registerFeature(new RenameFeature(this));\r\n        this.registerFeature(new DocumentLinkFeature(this));\r\n        this.registerFeature(new ExecuteCommandFeature(this));\r\n    }\r\n    fillInitializeParams(params) {\r\n        for (let feature of this._features) {\r\n            if (Is.func(feature.fillInitializeParams)) {\r\n                feature.fillInitializeParams(params);\r\n            }\r\n        }\r\n    }\r\n    computeClientCapabilities() {\r\n        let result = {};\r\n        ensure(result, 'workspace').applyEdit = true;\r\n        let workspaceEdit = ensure(ensure(result, 'workspace'), 'workspaceEdit');\r\n        workspaceEdit.documentChanges = true;\r\n        workspaceEdit.resourceOperations = [vscode_languageserver_protocol_1.ResourceOperationKind.Create, vscode_languageserver_protocol_1.ResourceOperationKind.Rename, vscode_languageserver_protocol_1.ResourceOperationKind.Delete];\r\n        workspaceEdit.failureHandling = vscode_languageserver_protocol_1.FailureHandlingKind.TextOnlyTransactional;\r\n        let diagnostics = ensure(ensure(result, 'textDocument'), 'publishDiagnostics');\r\n        diagnostics.relatedInformation = true;\r\n        diagnostics.tagSupport = true;\r\n        for (let feature of this._features) {\r\n            feature.fillClientCapabilities(result);\r\n        }\r\n        return result;\r\n    }\r\n    initializeFeatures(_connection) {\r\n        let documentSelector = this._clientOptions.documentSelector;\r\n        for (let feature of this._features) {\r\n            feature.initialize(this._capabilities, documentSelector);\r\n        }\r\n    }\r\n    handleRegistrationRequest(params) {\r\n        return new Promise((resolve, reject) => {\r\n            for (let registration of params.registrations) {\r\n                const feature = this._dynamicFeatures.get(registration.method);\r\n                if (!feature) {\r\n                    reject(new Error(`No feature implementation for ${registration.method} found. Registration failed.`));\r\n                    return;\r\n                }\r\n                const options = registration.registerOptions || {};\r\n                options.documentSelector = options.documentSelector || this._clientOptions.documentSelector;\r\n                const data = {\r\n                    id: registration.id,\r\n                    registerOptions: options\r\n                };\r\n                feature.register(this._method2Message.get(registration.method), data);\r\n            }\r\n            resolve();\r\n        });\r\n    }\r\n    handleUnregistrationRequest(params) {\r\n        return new Promise((resolve, reject) => {\r\n            for (let unregistration of params.unregisterations) {\r\n                const feature = this._dynamicFeatures.get(unregistration.method);\r\n                if (!feature) {\r\n                    reject(new Error(`No feature implementation for ${unregistration.method} found. Unregistration failed.`));\r\n                    return;\r\n                }\r\n                feature.unregister(unregistration.id);\r\n            }\r\n            ;\r\n            resolve();\r\n        });\r\n    }\r\n    handleApplyWorkspaceEdit(params) {\r\n        // This is some sort of workaround since the version check should be done by VS Code in the Workspace.applyEdit.\r\n        // However doing it here adds some safety since the server can lag more behind then an extension.\r\n        let workspaceEdit = params.edit;\r\n        let openTextDocuments = new Map();\r\n        vscode_1.workspace.textDocuments.forEach((document) => openTextDocuments.set(document.uri.toString(), document));\r\n        let versionMismatch = false;\r\n        if (workspaceEdit.documentChanges) {\r\n            for (const change of workspaceEdit.documentChanges) {\r\n                if (vscode_languageserver_protocol_1.TextDocumentEdit.is(change) && change.textDocument.version && change.textDocument.version >= 0) {\r\n                    let textDocument = openTextDocuments.get(change.textDocument.uri);\r\n                    if (textDocument && textDocument.version !== change.textDocument.version) {\r\n                        versionMismatch = true;\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        if (versionMismatch) {\r\n            return Promise.resolve({ applied: false });\r\n        }\r\n        return vscode_1.workspace.applyEdit(this._p2c.asWorkspaceEdit(params.edit)).then((value) => { return { applied: value }; });\r\n    }\r\n    ;\r\n    logFailedRequest(type, error) {\r\n        // If we get a request cancel don't log anything.\r\n        if (error instanceof vscode_languageserver_protocol_1.ResponseError && error.code === vscode_languageserver_protocol_1.ErrorCodes.RequestCancelled) {\r\n            return;\r\n        }\r\n        this.error(`Request ${type.method} failed.`, error);\r\n    }\r\n}\r\nexports.BaseLanguageClient = BaseLanguageClient;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst code = require(\"vscode\");\r\nconst proto = require(\"vscode-languageserver-protocol\");\r\nconst Is = require(\"./utils/is\");\r\nconst protocolCompletionItem_1 = require(\"./protocolCompletionItem\");\r\nconst protocolCodeLens_1 = require(\"./protocolCodeLens\");\r\nconst protocolDocumentLink_1 = require(\"./protocolDocumentLink\");\r\nfunction createConverter(uriConverter) {\r\n    const nullConverter = (value) => value.toString();\r\n    const _uriConverter = uriConverter || nullConverter;\r\n    function asUri(value) {\r\n        return _uriConverter(value);\r\n    }\r\n    function asTextDocumentIdentifier(textDocument) {\r\n        return {\r\n            uri: _uriConverter(textDocument.uri)\r\n        };\r\n    }\r\n    function asVersionedTextDocumentIdentifier(textDocument) {\r\n        return {\r\n            uri: _uriConverter(textDocument.uri),\r\n            version: textDocument.version\r\n        };\r\n    }\r\n    function asOpenTextDocumentParams(textDocument) {\r\n        return {\r\n            textDocument: {\r\n                uri: _uriConverter(textDocument.uri),\r\n                languageId: textDocument.languageId,\r\n                version: textDocument.version,\r\n                text: textDocument.getText()\r\n            }\r\n        };\r\n    }\r\n    function isTextDocumentChangeEvent(value) {\r\n        let candidate = value;\r\n        return !!candidate.document && !!candidate.contentChanges;\r\n    }\r\n    function isTextDocument(value) {\r\n        let candidate = value;\r\n        return !!candidate.uri && !!candidate.version;\r\n    }\r\n    function asChangeTextDocumentParams(arg) {\r\n        if (isTextDocument(arg)) {\r\n            let result = {\r\n                textDocument: {\r\n                    uri: _uriConverter(arg.uri),\r\n                    version: arg.version\r\n                },\r\n                contentChanges: [{ text: arg.getText() }]\r\n            };\r\n            return result;\r\n        }\r\n        else if (isTextDocumentChangeEvent(arg)) {\r\n            let document = arg.document;\r\n            let result = {\r\n                textDocument: {\r\n                    uri: _uriConverter(document.uri),\r\n                    version: document.version\r\n                },\r\n                contentChanges: arg.contentChanges.map((change) => {\r\n                    let range = change.range;\r\n                    return {\r\n                        range: {\r\n                            start: { line: range.start.line, character: range.start.character },\r\n                            end: { line: range.end.line, character: range.end.character }\r\n                        },\r\n                        rangeLength: change.rangeLength,\r\n                        text: change.text\r\n                    };\r\n                })\r\n            };\r\n            return result;\r\n        }\r\n        else {\r\n            throw Error('Unsupported text document change parameter');\r\n        }\r\n    }\r\n    function asCloseTextDocumentParams(textDocument) {\r\n        return {\r\n            textDocument: asTextDocumentIdentifier(textDocument)\r\n        };\r\n    }\r\n    function asSaveTextDocumentParams(textDocument, includeContent = false) {\r\n        let result = {\r\n            textDocument: asVersionedTextDocumentIdentifier(textDocument)\r\n        };\r\n        if (includeContent) {\r\n            result.text = textDocument.getText();\r\n        }\r\n        return result;\r\n    }\r\n    function asTextDocumentSaveReason(reason) {\r\n        switch (reason) {\r\n            case code.TextDocumentSaveReason.Manual:\r\n                return proto.TextDocumentSaveReason.Manual;\r\n            case code.TextDocumentSaveReason.AfterDelay:\r\n                return proto.TextDocumentSaveReason.AfterDelay;\r\n            case code.TextDocumentSaveReason.FocusOut:\r\n                return proto.TextDocumentSaveReason.FocusOut;\r\n        }\r\n        return proto.TextDocumentSaveReason.Manual;\r\n    }\r\n    function asWillSaveTextDocumentParams(event) {\r\n        return {\r\n            textDocument: asTextDocumentIdentifier(event.document),\r\n            reason: asTextDocumentSaveReason(event.reason)\r\n        };\r\n    }\r\n    function asTextDocumentPositionParams(textDocument, position) {\r\n        return {\r\n            textDocument: asTextDocumentIdentifier(textDocument),\r\n            position: asWorkerPosition(position)\r\n        };\r\n    }\r\n    function asTriggerKind(triggerKind) {\r\n        switch (triggerKind) {\r\n            case code.CompletionTriggerKind.TriggerCharacter:\r\n                return proto.CompletionTriggerKind.TriggerCharacter;\r\n            case code.CompletionTriggerKind.TriggerForIncompleteCompletions:\r\n                return proto.CompletionTriggerKind.TriggerForIncompleteCompletions;\r\n            default:\r\n                return proto.CompletionTriggerKind.Invoked;\r\n        }\r\n    }\r\n    function asCompletionParams(textDocument, position, context) {\r\n        return {\r\n            textDocument: asTextDocumentIdentifier(textDocument),\r\n            position: asWorkerPosition(position),\r\n            context: {\r\n                triggerKind: asTriggerKind(context.triggerKind),\r\n                triggerCharacter: context.triggerCharacter\r\n            }\r\n        };\r\n    }\r\n    function asWorkerPosition(position) {\r\n        return { line: position.line, character: position.character };\r\n    }\r\n    function asPosition(value) {\r\n        if (value === void 0) {\r\n            return undefined;\r\n        }\r\n        else if (value === null) {\r\n            return null;\r\n        }\r\n        return { line: value.line, character: value.character };\r\n    }\r\n    function asPositions(value) {\r\n        let result = [];\r\n        for (let elem of value) {\r\n            result.push(asPosition(elem));\r\n        }\r\n        return result;\r\n    }\r\n    function asRange(value) {\r\n        if (value === void 0 || value === null) {\r\n            return value;\r\n        }\r\n        return { start: asPosition(value.start), end: asPosition(value.end) };\r\n    }\r\n    function asDiagnosticSeverity(value) {\r\n        switch (value) {\r\n            case code.DiagnosticSeverity.Error:\r\n                return proto.DiagnosticSeverity.Error;\r\n            case code.DiagnosticSeverity.Warning:\r\n                return proto.DiagnosticSeverity.Warning;\r\n            case code.DiagnosticSeverity.Information:\r\n                return proto.DiagnosticSeverity.Information;\r\n            case code.DiagnosticSeverity.Hint:\r\n                return proto.DiagnosticSeverity.Hint;\r\n        }\r\n    }\r\n    function asDiagnosticTags(tags) {\r\n        if (!tags) {\r\n            return undefined;\r\n        }\r\n        let result = [];\r\n        for (let tag of tags) {\r\n            let converted = asDiagnosticTag(tag);\r\n            if (converted !== undefined) {\r\n                result.push(converted);\r\n            }\r\n        }\r\n        return result.length > 0 ? result : undefined;\r\n    }\r\n    function asDiagnosticTag(tag) {\r\n        switch (tag) {\r\n            case code.DiagnosticTag.Unnecessary:\r\n                return proto.DiagnosticTag.Unnecessary;\r\n            case code.DiagnosticTag.Deprecated:\r\n                return proto.DiagnosticTag.Deprecated;\r\n            default:\r\n                return undefined;\r\n        }\r\n    }\r\n    function asDiagnostic(item) {\r\n        let result = proto.Diagnostic.create(asRange(item.range), item.message);\r\n        if (Is.number(item.severity)) {\r\n            result.severity = asDiagnosticSeverity(item.severity);\r\n        }\r\n        if (Is.number(item.code) || Is.string(item.code)) {\r\n            result.code = item.code;\r\n        }\r\n        if (Array.isArray(item.tags)) {\r\n            result.tags = asDiagnosticTags(item.tags);\r\n        }\r\n        ;\r\n        if (item.source) {\r\n            result.source = item.source;\r\n        }\r\n        return result;\r\n    }\r\n    function asDiagnostics(items) {\r\n        if (items === void 0 || items === null) {\r\n            return items;\r\n        }\r\n        return items.map(asDiagnostic);\r\n    }\r\n    function asDocumentation(format, documentation) {\r\n        switch (format) {\r\n            case '$string':\r\n                return documentation;\r\n            case proto.MarkupKind.PlainText:\r\n                return { kind: format, value: documentation };\r\n            case proto.MarkupKind.Markdown:\r\n                return { kind: format, value: documentation.value };\r\n            default:\r\n                return `Unsupported Markup content received. Kind is: ${format}`;\r\n        }\r\n    }\r\n    function asCompletionItemKind(value, original) {\r\n        if (original !== void 0) {\r\n            return original;\r\n        }\r\n        return value + 1;\r\n    }\r\n    function asCompletionItem(item) {\r\n        let result = { label: item.label };\r\n        let protocolItem = item instanceof protocolCompletionItem_1.default ? item : undefined;\r\n        if (item.detail) {\r\n            result.detail = item.detail;\r\n        }\r\n        // We only send items back we created. So this can't be something else than\r\n        // a string right now.\r\n        if (item.documentation) {\r\n            if (!protocolItem || protocolItem.documentationFormat === '$string') {\r\n                result.documentation = item.documentation;\r\n            }\r\n            else {\r\n                result.documentation = asDocumentation(protocolItem.documentationFormat, item.documentation);\r\n            }\r\n        }\r\n        if (item.filterText) {\r\n            result.filterText = item.filterText;\r\n        }\r\n        fillPrimaryInsertText(result, item);\r\n        if (Is.number(item.kind)) {\r\n            result.kind = asCompletionItemKind(item.kind, protocolItem && protocolItem.originalItemKind);\r\n        }\r\n        if (item.sortText) {\r\n            result.sortText = item.sortText;\r\n        }\r\n        if (item.additionalTextEdits) {\r\n            result.additionalTextEdits = asTextEdits(item.additionalTextEdits);\r\n        }\r\n        if (item.commitCharacters) {\r\n            result.commitCharacters = item.commitCharacters.slice();\r\n        }\r\n        if (item.command) {\r\n            result.command = asCommand(item.command);\r\n        }\r\n        if (item.preselect === true || item.preselect === false) {\r\n            result.preselect = item.preselect;\r\n        }\r\n        if (protocolItem) {\r\n            if (protocolItem.data !== void 0) {\r\n                result.data = protocolItem.data;\r\n            }\r\n            if (protocolItem.deprecated === true || protocolItem.deprecated === false) {\r\n                result.deprecated = protocolItem.deprecated;\r\n            }\r\n        }\r\n        return result;\r\n    }\r\n    function fillPrimaryInsertText(target, source) {\r\n        let format = proto.InsertTextFormat.PlainText;\r\n        let text;\r\n        let range = undefined;\r\n        if (source.textEdit) {\r\n            text = source.textEdit.newText;\r\n            range = asRange(source.textEdit.range);\r\n        }\r\n        else if (source.insertText instanceof code.SnippetString) {\r\n            format = proto.InsertTextFormat.Snippet;\r\n            text = source.insertText.value;\r\n        }\r\n        else {\r\n            text = source.insertText;\r\n        }\r\n        if (source.range) {\r\n            range = asRange(source.range);\r\n        }\r\n        target.insertTextFormat = format;\r\n        if (source.fromEdit && text && range) {\r\n            target.textEdit = { newText: text, range: range };\r\n        }\r\n        else {\r\n            target.insertText = text;\r\n        }\r\n    }\r\n    function asTextEdit(edit) {\r\n        return { range: asRange(edit.range), newText: edit.newText };\r\n    }\r\n    function asTextEdits(edits) {\r\n        if (edits === void 0 || edits === null) {\r\n            return edits;\r\n        }\r\n        return edits.map(asTextEdit);\r\n    }\r\n    function asReferenceParams(textDocument, position, options) {\r\n        return {\r\n            textDocument: asTextDocumentIdentifier(textDocument),\r\n            position: asWorkerPosition(position),\r\n            context: { includeDeclaration: options.includeDeclaration }\r\n        };\r\n    }\r\n    function asCodeActionContext(context) {\r\n        if (context === void 0 || context === null) {\r\n            return context;\r\n        }\r\n        let only;\r\n        if (context.only && Is.string(context.only.value)) {\r\n            only = [context.only.value];\r\n        }\r\n        return proto.CodeActionContext.create(asDiagnostics(context.diagnostics), only);\r\n    }\r\n    function asCommand(item) {\r\n        let result = proto.Command.create(item.title, item.command);\r\n        if (item.arguments) {\r\n            result.arguments = item.arguments;\r\n        }\r\n        return result;\r\n    }\r\n    function asCodeLens(item) {\r\n        let result = proto.CodeLens.create(asRange(item.range));\r\n        if (item.command) {\r\n            result.command = asCommand(item.command);\r\n        }\r\n        if (item instanceof protocolCodeLens_1.default) {\r\n            if (item.data) {\r\n                result.data = item.data;\r\n            }\r\n            ;\r\n        }\r\n        return result;\r\n    }\r\n    function asFormattingOptions(item) {\r\n        return { tabSize: item.tabSize, insertSpaces: item.insertSpaces };\r\n    }\r\n    function asDocumentSymbolParams(textDocument) {\r\n        return {\r\n            textDocument: asTextDocumentIdentifier(textDocument)\r\n        };\r\n    }\r\n    function asCodeLensParams(textDocument) {\r\n        return {\r\n            textDocument: asTextDocumentIdentifier(textDocument)\r\n        };\r\n    }\r\n    function asDocumentLink(item) {\r\n        let result = proto.DocumentLink.create(asRange(item.range));\r\n        if (item.target) {\r\n            result.target = asUri(item.target);\r\n        }\r\n        let protocolItem = item instanceof protocolDocumentLink_1.default ? item : undefined;\r\n        if (protocolItem && protocolItem.data) {\r\n            result.data = protocolItem.data;\r\n        }\r\n        return result;\r\n    }\r\n    function asDocumentLinkParams(textDocument) {\r\n        return {\r\n            textDocument: asTextDocumentIdentifier(textDocument)\r\n        };\r\n    }\r\n    return {\r\n        asUri,\r\n        asTextDocumentIdentifier,\r\n        asVersionedTextDocumentIdentifier,\r\n        asOpenTextDocumentParams,\r\n        asChangeTextDocumentParams,\r\n        asCloseTextDocumentParams,\r\n        asSaveTextDocumentParams,\r\n        asWillSaveTextDocumentParams,\r\n        asTextDocumentPositionParams,\r\n        asCompletionParams,\r\n        asWorkerPosition,\r\n        asRange,\r\n        asPosition,\r\n        asPositions,\r\n        asDiagnosticSeverity,\r\n        asDiagnosticTag,\r\n        asDiagnostic,\r\n        asDiagnostics,\r\n        asCompletionItem,\r\n        asTextEdit,\r\n        asReferenceParams,\r\n        asCodeActionContext,\r\n        asCommand,\r\n        asCodeLens,\r\n        asFormattingOptions,\r\n        asDocumentSymbolParams,\r\n        asCodeLensParams,\r\n        asDocumentLink,\r\n        asDocumentLinkParams\r\n    };\r\n}\r\nexports.createConverter = createConverter;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst vscode_1 = require(\"vscode\");\r\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\r\nconst client_1 = require(\"./client\");\r\nfunction ensure(target, key) {\r\n    if (target[key] === void 0) {\r\n        target[key] = {};\r\n    }\r\n    return target[key];\r\n}\r\nclass ColorProviderFeature extends client_1.TextDocumentFeature {\r\n    constructor(client) {\r\n        super(client, vscode_languageserver_protocol_1.DocumentColorRequest.type);\r\n    }\r\n    fillClientCapabilities(capabilites) {\r\n        ensure(ensure(capabilites, 'textDocument'), 'colorProvider').dynamicRegistration = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        let [id, options] = this.getRegistration(documentSelector, capabilities.colorProvider);\r\n        if (!id || !options) {\r\n            return;\r\n        }\r\n        this.register(this.messages, { id: id, registerOptions: options });\r\n    }\r\n    registerLanguageProvider(options) {\r\n        let client = this._client;\r\n        let provideColorPresentations = (color, context, token) => {\r\n            const requestParams = {\r\n                color,\r\n                textDocument: client.code2ProtocolConverter.asTextDocumentIdentifier(context.document),\r\n                range: client.code2ProtocolConverter.asRange(context.range)\r\n            };\r\n            return client.sendRequest(vscode_languageserver_protocol_1.ColorPresentationRequest.type, requestParams, token).then(this.asColorPresentations.bind(this), (error) => {\r\n                client.logFailedRequest(vscode_languageserver_protocol_1.ColorPresentationRequest.type, error);\r\n                return Promise.resolve(null);\r\n            });\r\n        };\r\n        let provideDocumentColors = (document, token) => {\r\n            const requestParams = {\r\n                textDocument: client.code2ProtocolConverter.asTextDocumentIdentifier(document)\r\n            };\r\n            return client.sendRequest(vscode_languageserver_protocol_1.DocumentColorRequest.type, requestParams, token).then(this.asColorInformations.bind(this), (error) => {\r\n                client.logFailedRequest(vscode_languageserver_protocol_1.ColorPresentationRequest.type, error);\r\n                return Promise.resolve(null);\r\n            });\r\n        };\r\n        let middleware = client.clientOptions.middleware;\r\n        return vscode_1.languages.registerColorProvider(options.documentSelector, {\r\n            provideColorPresentations: (color, context, token) => {\r\n                return middleware.provideColorPresentations\r\n                    ? middleware.provideColorPresentations(color, context, token, provideColorPresentations)\r\n                    : provideColorPresentations(color, context, token);\r\n            },\r\n            provideDocumentColors: (document, token) => {\r\n                return middleware.provideDocumentColors\r\n                    ? middleware.provideDocumentColors(document, token, provideDocumentColors)\r\n                    : provideDocumentColors(document, token);\r\n            }\r\n        });\r\n    }\r\n    asColor(color) {\r\n        return new vscode_1.Color(color.red, color.green, color.blue, color.alpha);\r\n    }\r\n    asColorInformations(colorInformation) {\r\n        if (Array.isArray(colorInformation)) {\r\n            return colorInformation.map(ci => {\r\n                return new vscode_1.ColorInformation(this._client.protocol2CodeConverter.asRange(ci.range), this.asColor(ci.color));\r\n            });\r\n        }\r\n        return [];\r\n    }\r\n    asColorPresentations(colorPresentations) {\r\n        if (Array.isArray(colorPresentations)) {\r\n            return colorPresentations.map(cp => {\r\n                let presentation = new vscode_1.ColorPresentation(cp.label);\r\n                presentation.additionalTextEdits = this._client.protocol2CodeConverter.asTextEdits(cp.additionalTextEdits);\r\n                presentation.textEdit = this._client.protocol2CodeConverter.asTextEdit(cp.textEdit);\r\n                return presentation;\r\n            });\r\n        }\r\n        return [];\r\n    }\r\n}\r\nexports.ColorProviderFeature = ColorProviderFeature;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst vscode_1 = require(\"vscode\");\r\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\r\nclass ConfigurationFeature {\r\n    constructor(_client) {\r\n        this._client = _client;\r\n    }\r\n    fillClientCapabilities(capabilities) {\r\n        capabilities.workspace = capabilities.workspace || {};\r\n        capabilities.workspace.configuration = true;\r\n    }\r\n    initialize() {\r\n        let client = this._client;\r\n        client.onRequest(vscode_languageserver_protocol_1.ConfigurationRequest.type, (params, token) => {\r\n            let configuration = (params) => {\r\n                let result = [];\r\n                for (let item of params.items) {\r\n                    let resource = item.scopeUri !== void 0 && item.scopeUri !== null ? this._client.protocol2CodeConverter.asUri(item.scopeUri) : undefined;\r\n                    result.push(this.getConfiguration(resource, item.section !== null ? item.section : undefined));\r\n                }\r\n                return result;\r\n            };\r\n            let middleware = client.clientOptions.middleware.workspace;\r\n            return middleware && middleware.configuration\r\n                ? middleware.configuration(params, token, configuration)\r\n                : configuration(params, token);\r\n        });\r\n    }\r\n    getConfiguration(resource, section) {\r\n        let result = null;\r\n        if (section) {\r\n            let index = section.lastIndexOf('.');\r\n            if (index === -1) {\r\n                result = vscode_1.workspace.getConfiguration(undefined, resource).get(section);\r\n            }\r\n            else {\r\n                let config = vscode_1.workspace.getConfiguration(section.substr(0, index), resource);\r\n                if (config) {\r\n                    result = config.get(section.substr(index + 1));\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            let config = vscode_1.workspace.getConfiguration(undefined, resource);\r\n            result = {};\r\n            for (let key of Object.keys(config)) {\r\n                if (config.has(key)) {\r\n                    result[key] = config.get(key);\r\n                }\r\n            }\r\n        }\r\n        if (!result) {\r\n            return null;\r\n        }\r\n        return result;\r\n    }\r\n}\r\nexports.ConfigurationFeature = ConfigurationFeature;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst vscode_1 = require(\"vscode\");\r\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\r\nconst client_1 = require(\"./client\");\r\nfunction ensure(target, key) {\r\n    if (target[key] === void 0) {\r\n        target[key] = {};\r\n    }\r\n    return target[key];\r\n}\r\nclass DeclarationFeature extends client_1.TextDocumentFeature {\r\n    constructor(client) {\r\n        super(client, vscode_languageserver_protocol_1.DeclarationRequest.type);\r\n    }\r\n    fillClientCapabilities(capabilites) {\r\n        let declarationSupport = ensure(ensure(capabilites, 'textDocument'), 'declaration');\r\n        declarationSupport.dynamicRegistration = true;\r\n        declarationSupport.linkSupport = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        let [id, options] = this.getRegistration(documentSelector, capabilities.declarationProvider);\r\n        if (!id || !options) {\r\n            return;\r\n        }\r\n        this.register(this.messages, { id: id, registerOptions: options });\r\n    }\r\n    registerLanguageProvider(options) {\r\n        let client = this._client;\r\n        let provideDeclaration = (document, position, token) => {\r\n            return client.sendRequest(vscode_languageserver_protocol_1.DeclarationRequest.type, client.code2ProtocolConverter.asTextDocumentPositionParams(document, position), token).then(client.protocol2CodeConverter.asDeclarationResult, (error) => {\r\n                client.logFailedRequest(vscode_languageserver_protocol_1.DeclarationRequest.type, error);\r\n                return Promise.resolve(null);\r\n            });\r\n        };\r\n        let middleware = client.clientOptions.middleware;\r\n        return vscode_1.languages.registerDeclarationProvider(options.documentSelector, {\r\n            provideDeclaration: (document, position, token) => {\r\n                return middleware.provideDeclaration\r\n                    ? middleware.provideDeclaration(document, position, token, provideDeclaration)\r\n                    : provideDeclaration(document, position, token);\r\n            }\r\n        });\r\n    }\r\n}\r\nexports.DeclarationFeature = DeclarationFeature;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst vscode_1 = require(\"vscode\");\r\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\r\nconst client_1 = require(\"./client\");\r\nfunction ensure(target, key) {\r\n    if (target[key] === void 0) {\r\n        target[key] = {};\r\n    }\r\n    return target[key];\r\n}\r\nclass FoldingRangeFeature extends client_1.TextDocumentFeature {\r\n    constructor(client) {\r\n        super(client, vscode_languageserver_protocol_1.FoldingRangeRequest.type);\r\n    }\r\n    fillClientCapabilities(capabilites) {\r\n        let capability = ensure(ensure(capabilites, 'textDocument'), 'foldingRange');\r\n        capability.dynamicRegistration = true;\r\n        capability.rangeLimit = 5000;\r\n        capability.lineFoldingOnly = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        let [id, options] = this.getRegistration(documentSelector, capabilities.foldingRangeProvider);\r\n        if (!id || !options) {\r\n            return;\r\n        }\r\n        this.register(this.messages, { id: id, registerOptions: options });\r\n    }\r\n    registerLanguageProvider(options) {\r\n        let client = this._client;\r\n        let provideFoldingRanges = (document, _, token) => {\r\n            const requestParams = {\r\n                textDocument: client.code2ProtocolConverter.asTextDocumentIdentifier(document)\r\n            };\r\n            return client.sendRequest(vscode_languageserver_protocol_1.FoldingRangeRequest.type, requestParams, token).then(this.asFoldingRanges.bind(this), (error) => {\r\n                client.logFailedRequest(vscode_languageserver_protocol_1.FoldingRangeRequest.type, error);\r\n                return Promise.resolve(null);\r\n            });\r\n        };\r\n        let middleware = client.clientOptions.middleware;\r\n        return vscode_1.languages.registerFoldingRangeProvider(options.documentSelector, {\r\n            provideFoldingRanges(document, context, token) {\r\n                return middleware.provideFoldingRanges\r\n                    ? middleware.provideFoldingRanges(document, context, token, provideFoldingRanges)\r\n                    : provideFoldingRanges(document, context, token);\r\n            }\r\n        });\r\n    }\r\n    asFoldingRangeKind(kind) {\r\n        if (kind) {\r\n            switch (kind) {\r\n                case vscode_languageserver_protocol_1.FoldingRangeKind.Comment:\r\n                    return vscode_1.FoldingRangeKind.Comment;\r\n                case vscode_languageserver_protocol_1.FoldingRangeKind.Imports:\r\n                    return vscode_1.FoldingRangeKind.Imports;\r\n                case vscode_languageserver_protocol_1.FoldingRangeKind.Region:\r\n                    return vscode_1.FoldingRangeKind.Region;\r\n            }\r\n        }\r\n        return void 0;\r\n    }\r\n    asFoldingRanges(foldingRanges) {\r\n        if (Array.isArray(foldingRanges)) {\r\n            return foldingRanges.map(r => {\r\n                return new vscode_1.FoldingRange(r.startLine, r.endLine, this.asFoldingRangeKind(r.kind));\r\n            });\r\n        }\r\n        return [];\r\n    }\r\n}\r\nexports.FoldingRangeFeature = FoldingRangeFeature;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst vscode_1 = require(\"vscode\");\r\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\r\nconst client_1 = require(\"./client\");\r\nfunction ensure(target, key) {\r\n    if (target[key] === void 0) {\r\n        target[key] = {};\r\n    }\r\n    return target[key];\r\n}\r\nclass ImplementationFeature extends client_1.TextDocumentFeature {\r\n    constructor(client) {\r\n        super(client, vscode_languageserver_protocol_1.ImplementationRequest.type);\r\n    }\r\n    fillClientCapabilities(capabilites) {\r\n        let implementationSupport = ensure(ensure(capabilites, 'textDocument'), 'implementation');\r\n        implementationSupport.dynamicRegistration = true;\r\n        implementationSupport.linkSupport = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        let [id, options] = this.getRegistration(documentSelector, capabilities.implementationProvider);\r\n        if (!id || !options) {\r\n            return;\r\n        }\r\n        this.register(this.messages, { id: id, registerOptions: options });\r\n    }\r\n    registerLanguageProvider(options) {\r\n        let client = this._client;\r\n        let provideImplementation = (document, position, token) => {\r\n            return client.sendRequest(vscode_languageserver_protocol_1.ImplementationRequest.type, client.code2ProtocolConverter.asTextDocumentPositionParams(document, position), token).then(client.protocol2CodeConverter.asDefinitionResult, (error) => {\r\n                client.logFailedRequest(vscode_languageserver_protocol_1.ImplementationRequest.type, error);\r\n                return Promise.resolve(null);\r\n            });\r\n        };\r\n        let middleware = client.clientOptions.middleware;\r\n        return vscode_1.languages.registerImplementationProvider(options.documentSelector, {\r\n            provideImplementation: (document, position, token) => {\r\n                return middleware.provideImplementation\r\n                    ? middleware.provideImplementation(document, position, token, provideImplementation)\r\n                    : provideImplementation(document, position, token);\r\n            }\r\n        });\r\n    }\r\n}\r\nexports.ImplementationFeature = ImplementationFeature;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst vscode_1 = require(\"vscode\");\r\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\r\nconst Is = require(\"./utils/is\");\r\nclass ProgressPart {\r\n    constructor(_client, _token) {\r\n        this._client = _client;\r\n        this._token = _token;\r\n        this._reported = 0;\r\n        this._disposable = this._client.onProgress(vscode_languageserver_protocol_1.Proposed.WorkDoneProgress.type, this._token, (value) => {\r\n            switch (value.kind) {\r\n                case 'begin':\r\n                    this.begin(value);\r\n                    break;\r\n                case 'report':\r\n                    this.report(value);\r\n                    break;\r\n                case 'done':\r\n                    this.done();\r\n                    break;\r\n            }\r\n        });\r\n    }\r\n    begin(params) {\r\n        let location = params.cancellable ? vscode_1.ProgressLocation.Notification : vscode_1.ProgressLocation.Window;\r\n        vscode_1.window.withProgress({ location, cancellable: params.cancellable, title: params.title }, (progress, cancellationToken) => __awaiter(this, void 0, void 0, function* () {\r\n            this._progress = progress;\r\n            this._infinite = params.percentage === undefined;\r\n            this._cancellationToken = cancellationToken;\r\n            this._cancellationToken.onCancellationRequested(() => {\r\n                this._client.sendNotification(vscode_languageserver_protocol_1.Proposed.WorkDoneProgressCancelNotification.type, { token: this._token });\r\n            });\r\n            this.report(params);\r\n            return new Promise((resolve, reject) => {\r\n                this._resolve = resolve;\r\n                this._reject = reject;\r\n            });\r\n        }));\r\n    }\r\n    report(params) {\r\n        if (this._infinite && Is.string(params.message)) {\r\n            this._progress.report({ message: params.message });\r\n        }\r\n        else if (Is.number(params.percentage)) {\r\n            let percentage = Math.max(0, Math.min(params.percentage, 100));\r\n            let delta = Math.max(0, percentage - this._reported);\r\n            this._progress.report({ message: params.message, increment: delta });\r\n            this._reported += delta;\r\n        }\r\n    }\r\n    cancel() {\r\n        if (this._disposable) {\r\n            this._disposable.dispose();\r\n            this._disposable = undefined;\r\n        }\r\n        if (this._reject) {\r\n            this._reject();\r\n            this._resolve = undefined;\r\n            this._reject = undefined;\r\n        }\r\n    }\r\n    done() {\r\n        if (this._disposable) {\r\n            this._disposable.dispose();\r\n            this._disposable = undefined;\r\n        }\r\n        if (this._resolve) {\r\n            this._resolve();\r\n            this._resolve = undefined;\r\n            this._reject = undefined;\r\n        }\r\n    }\r\n}\r\nexports.ProgressPart = ProgressPart;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst code = require(\"vscode\");\r\nclass ProtocolCodeLens extends code.CodeLens {\r\n    constructor(range) {\r\n        super(range);\r\n    }\r\n}\r\nexports.default = ProtocolCodeLens;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst code = require(\"vscode\");\r\nclass ProtocolCompletionItem extends code.CompletionItem {\r\n    constructor(label) {\r\n        super(label);\r\n    }\r\n}\r\nexports.default = ProtocolCompletionItem;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst code = require(\"vscode\");\r\nconst ls = require(\"vscode-languageserver-protocol\");\r\nconst Is = require(\"./utils/is\");\r\nconst protocolCompletionItem_1 = require(\"./protocolCompletionItem\");\r\nconst protocolCodeLens_1 = require(\"./protocolCodeLens\");\r\nconst protocolDocumentLink_1 = require(\"./protocolDocumentLink\");\r\nvar CodeBlock;\r\n(function (CodeBlock) {\r\n    function is(value) {\r\n        let candidate = value;\r\n        return candidate && Is.string(candidate.language) && Is.string(candidate.value);\r\n    }\r\n    CodeBlock.is = is;\r\n})(CodeBlock || (CodeBlock = {}));\r\nfunction createConverter(uriConverter) {\r\n    const nullConverter = (value) => code.Uri.parse(value);\r\n    const _uriConverter = uriConverter || nullConverter;\r\n    function asUri(value) {\r\n        return _uriConverter(value);\r\n    }\r\n    function asDiagnostics(diagnostics) {\r\n        return diagnostics.map(asDiagnostic);\r\n    }\r\n    function asDiagnostic(diagnostic) {\r\n        let result = new code.Diagnostic(asRange(diagnostic.range), diagnostic.message, asDiagnosticSeverity(diagnostic.severity));\r\n        if (Is.number(diagnostic.code) || Is.string(diagnostic.code)) {\r\n            result.code = diagnostic.code;\r\n        }\r\n        if (diagnostic.source) {\r\n            result.source = diagnostic.source;\r\n        }\r\n        if (diagnostic.relatedInformation) {\r\n            result.relatedInformation = asRelatedInformation(diagnostic.relatedInformation);\r\n        }\r\n        if (Array.isArray(diagnostic.tags)) {\r\n            result.tags = asDiagnosticTags(diagnostic.tags);\r\n        }\r\n        return result;\r\n    }\r\n    function asRelatedInformation(relatedInformation) {\r\n        return relatedInformation.map(asDiagnosticRelatedInformation);\r\n    }\r\n    function asDiagnosticRelatedInformation(information) {\r\n        return new code.DiagnosticRelatedInformation(asLocation(information.location), information.message);\r\n    }\r\n    function asDiagnosticTags(tags) {\r\n        if (!tags) {\r\n            return undefined;\r\n        }\r\n        let result = [];\r\n        for (let tag of tags) {\r\n            let converted = asDiagnosticTag(tag);\r\n            if (converted !== undefined) {\r\n                result.push(converted);\r\n            }\r\n        }\r\n        return result.length > 0 ? result : undefined;\r\n    }\r\n    function asDiagnosticTag(tag) {\r\n        switch (tag) {\r\n            case ls.DiagnosticTag.Unnecessary:\r\n                return code.DiagnosticTag.Unnecessary;\r\n            case ls.DiagnosticTag.Deprecated:\r\n                return code.DiagnosticTag.Deprecated;\r\n            default:\r\n                return undefined;\r\n        }\r\n    }\r\n    function asPosition(value) {\r\n        if (!value) {\r\n            return undefined;\r\n        }\r\n        return new code.Position(value.line, value.character);\r\n    }\r\n    function asRange(value) {\r\n        if (!value) {\r\n            return undefined;\r\n        }\r\n        return new code.Range(asPosition(value.start), asPosition(value.end));\r\n    }\r\n    function asDiagnosticSeverity(value) {\r\n        if (value === void 0 || value === null) {\r\n            return code.DiagnosticSeverity.Error;\r\n        }\r\n        switch (value) {\r\n            case ls.DiagnosticSeverity.Error:\r\n                return code.DiagnosticSeverity.Error;\r\n            case ls.DiagnosticSeverity.Warning:\r\n                return code.DiagnosticSeverity.Warning;\r\n            case ls.DiagnosticSeverity.Information:\r\n                return code.DiagnosticSeverity.Information;\r\n            case ls.DiagnosticSeverity.Hint:\r\n                return code.DiagnosticSeverity.Hint;\r\n        }\r\n        return code.DiagnosticSeverity.Error;\r\n    }\r\n    function asHoverContent(value) {\r\n        if (Is.string(value)) {\r\n            return new code.MarkdownString(value);\r\n        }\r\n        else if (CodeBlock.is(value)) {\r\n            let result = new code.MarkdownString();\r\n            return result.appendCodeblock(value.value, value.language);\r\n        }\r\n        else if (Array.isArray(value)) {\r\n            let result = [];\r\n            for (let element of value) {\r\n                let item = new code.MarkdownString();\r\n                if (CodeBlock.is(element)) {\r\n                    item.appendCodeblock(element.value, element.language);\r\n                }\r\n                else {\r\n                    item.appendMarkdown(element);\r\n                }\r\n                result.push(item);\r\n            }\r\n            return result;\r\n        }\r\n        else {\r\n            let result;\r\n            switch (value.kind) {\r\n                case ls.MarkupKind.Markdown:\r\n                    return new code.MarkdownString(value.value);\r\n                case ls.MarkupKind.PlainText:\r\n                    result = new code.MarkdownString();\r\n                    result.appendText(value.value);\r\n                    return result;\r\n                default:\r\n                    result = new code.MarkdownString();\r\n                    result.appendText(`Unsupported Markup content received. Kind is: ${value.kind}`);\r\n                    return result;\r\n            }\r\n        }\r\n    }\r\n    function asDocumentation(value) {\r\n        if (Is.string(value)) {\r\n            return value;\r\n        }\r\n        else {\r\n            switch (value.kind) {\r\n                case ls.MarkupKind.Markdown:\r\n                    return new code.MarkdownString(value.value);\r\n                case ls.MarkupKind.PlainText:\r\n                    return value.value;\r\n                default:\r\n                    return `Unsupported Markup content received. Kind is: ${value.kind}`;\r\n            }\r\n        }\r\n    }\r\n    function asHover(hover) {\r\n        if (!hover) {\r\n            return undefined;\r\n        }\r\n        return new code.Hover(asHoverContent(hover.contents), asRange(hover.range));\r\n    }\r\n    function asCompletionResult(result) {\r\n        if (!result) {\r\n            return undefined;\r\n        }\r\n        if (Array.isArray(result)) {\r\n            let items = result;\r\n            return items.map(asCompletionItem);\r\n        }\r\n        let list = result;\r\n        return new code.CompletionList(list.items.map(asCompletionItem), list.isIncomplete);\r\n    }\r\n    function asCompletionItemKind(value) {\r\n        // Protocol item kind is 1 based, codes item kind is zero based.\r\n        if (ls.CompletionItemKind.Text <= value && value <= ls.CompletionItemKind.TypeParameter) {\r\n            return [value - 1, undefined];\r\n        }\r\n        ;\r\n        return [code.CompletionItemKind.Text, value];\r\n    }\r\n    function asCompletionItem(item) {\r\n        let result = new protocolCompletionItem_1.default(item.label);\r\n        if (item.detail) {\r\n            result.detail = item.detail;\r\n        }\r\n        if (item.documentation) {\r\n            result.documentation = asDocumentation(item.documentation);\r\n            result.documentationFormat = Is.string(item.documentation) ? '$string' : item.documentation.kind;\r\n        }\r\n        ;\r\n        if (item.filterText) {\r\n            result.filterText = item.filterText;\r\n        }\r\n        let insertText = asCompletionInsertText(item);\r\n        if (insertText) {\r\n            result.insertText = insertText.text;\r\n            result.range = insertText.range;\r\n            result.fromEdit = insertText.fromEdit;\r\n        }\r\n        if (Is.number(item.kind)) {\r\n            let [itemKind, original] = asCompletionItemKind(item.kind);\r\n            result.kind = itemKind;\r\n            if (original) {\r\n                result.originalItemKind = original;\r\n            }\r\n        }\r\n        if (item.sortText) {\r\n            result.sortText = item.sortText;\r\n        }\r\n        if (item.additionalTextEdits) {\r\n            result.additionalTextEdits = asTextEdits(item.additionalTextEdits);\r\n        }\r\n        if (Is.stringArray(item.commitCharacters)) {\r\n            result.commitCharacters = item.commitCharacters.slice();\r\n        }\r\n        if (item.command) {\r\n            result.command = asCommand(item.command);\r\n        }\r\n        if (item.deprecated === true || item.deprecated === false) {\r\n            result.deprecated = item.deprecated;\r\n        }\r\n        if (item.preselect === true || item.preselect === false) {\r\n            result.preselect = item.preselect;\r\n        }\r\n        if (item.data !== void 0) {\r\n            result.data = item.data;\r\n        }\r\n        return result;\r\n    }\r\n    function asCompletionInsertText(item) {\r\n        if (item.textEdit) {\r\n            if (item.insertTextFormat === ls.InsertTextFormat.Snippet) {\r\n                return { text: new code.SnippetString(item.textEdit.newText), range: asRange(item.textEdit.range), fromEdit: true };\r\n            }\r\n            else {\r\n                return { text: item.textEdit.newText, range: asRange(item.textEdit.range), fromEdit: true };\r\n            }\r\n        }\r\n        else if (item.insertText) {\r\n            if (item.insertTextFormat === ls.InsertTextFormat.Snippet) {\r\n                return { text: new code.SnippetString(item.insertText), fromEdit: false };\r\n            }\r\n            else {\r\n                return { text: item.insertText, fromEdit: false };\r\n            }\r\n        }\r\n        else {\r\n            return undefined;\r\n        }\r\n    }\r\n    function asTextEdit(edit) {\r\n        if (!edit) {\r\n            return undefined;\r\n        }\r\n        return new code.TextEdit(asRange(edit.range), edit.newText);\r\n    }\r\n    function asTextEdits(items) {\r\n        if (!items) {\r\n            return undefined;\r\n        }\r\n        return items.map(asTextEdit);\r\n    }\r\n    function asSignatureHelp(item) {\r\n        if (!item) {\r\n            return undefined;\r\n        }\r\n        let result = new code.SignatureHelp();\r\n        if (Is.number(item.activeSignature)) {\r\n            result.activeSignature = item.activeSignature;\r\n        }\r\n        else {\r\n            // activeSignature was optional in the past\r\n            result.activeSignature = 0;\r\n        }\r\n        if (Is.number(item.activeParameter)) {\r\n            result.activeParameter = item.activeParameter;\r\n        }\r\n        else {\r\n            // activeParameter was optional in the past\r\n            result.activeParameter = 0;\r\n        }\r\n        if (item.signatures) {\r\n            result.signatures = asSignatureInformations(item.signatures);\r\n        }\r\n        return result;\r\n    }\r\n    function asSignatureInformations(items) {\r\n        return items.map(asSignatureInformation);\r\n    }\r\n    function asSignatureInformation(item) {\r\n        let result = new code.SignatureInformation(item.label);\r\n        if (item.documentation) {\r\n            result.documentation = asDocumentation(item.documentation);\r\n        }\r\n        if (item.parameters) {\r\n            result.parameters = asParameterInformations(item.parameters);\r\n        }\r\n        return result;\r\n    }\r\n    function asParameterInformations(item) {\r\n        return item.map(asParameterInformation);\r\n    }\r\n    function asParameterInformation(item) {\r\n        let result = new code.ParameterInformation(item.label);\r\n        if (item.documentation) {\r\n            result.documentation = asDocumentation(item.documentation);\r\n        }\r\n        ;\r\n        return result;\r\n    }\r\n    function asLocation(item) {\r\n        if (!item) {\r\n            return undefined;\r\n        }\r\n        return new code.Location(_uriConverter(item.uri), asRange(item.range));\r\n    }\r\n    function asDeclarationResult(item) {\r\n        if (!item) {\r\n            return undefined;\r\n        }\r\n        return asLocationResult(item);\r\n    }\r\n    function asDefinitionResult(item) {\r\n        if (!item) {\r\n            return undefined;\r\n        }\r\n        return asLocationResult(item);\r\n    }\r\n    function asLocationLink(item) {\r\n        if (!item) {\r\n            return undefined;\r\n        }\r\n        let result = {\r\n            targetUri: _uriConverter(item.targetUri),\r\n            targetRange: asRange(item.targetSelectionRange),\r\n            originSelectionRange: asRange(item.originSelectionRange),\r\n            targetSelectionRange: asRange(item.targetSelectionRange)\r\n        };\r\n        if (!result.targetSelectionRange) {\r\n            throw new Error(`targetSelectionRange must not be undefined or null`);\r\n        }\r\n        return result;\r\n    }\r\n    function asLocationResult(item) {\r\n        if (!item) {\r\n            return undefined;\r\n        }\r\n        if (Is.array(item)) {\r\n            if (item.length === 0) {\r\n                return [];\r\n            }\r\n            else if (ls.LocationLink.is(item[0])) {\r\n                let links = item;\r\n                return links.map((link) => asLocationLink(link));\r\n            }\r\n            else {\r\n                let locations = item;\r\n                return locations.map((location) => asLocation(location));\r\n            }\r\n        }\r\n        else if (ls.LocationLink.is(item)) {\r\n            return [asLocationLink(item)];\r\n        }\r\n        else {\r\n            return asLocation(item);\r\n        }\r\n    }\r\n    function asReferences(values) {\r\n        if (!values) {\r\n            return undefined;\r\n        }\r\n        return values.map(location => asLocation(location));\r\n    }\r\n    function asDocumentHighlights(values) {\r\n        if (!values) {\r\n            return undefined;\r\n        }\r\n        return values.map(asDocumentHighlight);\r\n    }\r\n    function asDocumentHighlight(item) {\r\n        let result = new code.DocumentHighlight(asRange(item.range));\r\n        if (Is.number(item.kind)) {\r\n            result.kind = asDocumentHighlightKind(item.kind);\r\n        }\r\n        return result;\r\n    }\r\n    function asDocumentHighlightKind(item) {\r\n        switch (item) {\r\n            case ls.DocumentHighlightKind.Text:\r\n                return code.DocumentHighlightKind.Text;\r\n            case ls.DocumentHighlightKind.Read:\r\n                return code.DocumentHighlightKind.Read;\r\n            case ls.DocumentHighlightKind.Write:\r\n                return code.DocumentHighlightKind.Write;\r\n        }\r\n        return code.DocumentHighlightKind.Text;\r\n    }\r\n    function asSymbolInformations(values, uri) {\r\n        if (!values) {\r\n            return undefined;\r\n        }\r\n        return values.map(information => asSymbolInformation(information, uri));\r\n    }\r\n    function asSymbolKind(item) {\r\n        if (item <= ls.SymbolKind.TypeParameter) {\r\n            // Symbol kind is one based in the protocol and zero based in code.\r\n            return item - 1;\r\n        }\r\n        return code.SymbolKind.Property;\r\n    }\r\n    function asSymbolInformation(item, uri) {\r\n        // Symbol kind is one based in the protocol and zero based in code.\r\n        let result = new code.SymbolInformation(item.name, asSymbolKind(item.kind), asRange(item.location.range), item.location.uri ? _uriConverter(item.location.uri) : uri);\r\n        if (item.containerName) {\r\n            result.containerName = item.containerName;\r\n        }\r\n        return result;\r\n    }\r\n    function asDocumentSymbols(values) {\r\n        if (values === void 0 || values === null) {\r\n            return undefined;\r\n        }\r\n        return values.map(asDocumentSymbol);\r\n    }\r\n    function asDocumentSymbol(value) {\r\n        let result = new code.DocumentSymbol(value.name, value.detail || '', asSymbolKind(value.kind), asRange(value.range), asRange(value.selectionRange));\r\n        if (value.children !== void 0 && value.children.length > 0) {\r\n            let children = [];\r\n            for (let child of value.children) {\r\n                children.push(asDocumentSymbol(child));\r\n            }\r\n            result.children = children;\r\n        }\r\n        return result;\r\n    }\r\n    function asCommand(item) {\r\n        let result = { title: item.title, command: item.command };\r\n        if (item.arguments) {\r\n            result.arguments = item.arguments;\r\n        }\r\n        return result;\r\n    }\r\n    function asCommands(items) {\r\n        if (!items) {\r\n            return undefined;\r\n        }\r\n        return items.map(asCommand);\r\n    }\r\n    const kindMapping = new Map();\r\n    kindMapping.set(ls.CodeActionKind.Empty, code.CodeActionKind.Empty);\r\n    kindMapping.set(ls.CodeActionKind.QuickFix, code.CodeActionKind.QuickFix);\r\n    kindMapping.set(ls.CodeActionKind.Refactor, code.CodeActionKind.Refactor);\r\n    kindMapping.set(ls.CodeActionKind.RefactorExtract, code.CodeActionKind.RefactorExtract);\r\n    kindMapping.set(ls.CodeActionKind.RefactorInline, code.CodeActionKind.RefactorInline);\r\n    kindMapping.set(ls.CodeActionKind.RefactorRewrite, code.CodeActionKind.RefactorRewrite);\r\n    kindMapping.set(ls.CodeActionKind.Source, code.CodeActionKind.Source);\r\n    kindMapping.set(ls.CodeActionKind.SourceOrganizeImports, code.CodeActionKind.SourceOrganizeImports);\r\n    function asCodeActionKind(item) {\r\n        if (item === void 0 || item === null) {\r\n            return undefined;\r\n        }\r\n        let result = kindMapping.get(item);\r\n        if (result) {\r\n            return result;\r\n        }\r\n        let parts = item.split('.');\r\n        result = code.CodeActionKind.Empty;\r\n        for (let part of parts) {\r\n            result = result.append(part);\r\n        }\r\n        return result;\r\n    }\r\n    function asCodeActionKinds(items) {\r\n        if (items === void 0 || items === null) {\r\n            return undefined;\r\n        }\r\n        return items.map(kind => asCodeActionKind(kind));\r\n    }\r\n    function asCodeAction(item) {\r\n        if (item === void 0 || item === null) {\r\n            return undefined;\r\n        }\r\n        let result = new code.CodeAction(item.title);\r\n        if (item.kind !== void 0) {\r\n            result.kind = asCodeActionKind(item.kind);\r\n        }\r\n        if (item.diagnostics) {\r\n            result.diagnostics = asDiagnostics(item.diagnostics);\r\n        }\r\n        if (item.edit) {\r\n            result.edit = asWorkspaceEdit(item.edit);\r\n        }\r\n        if (item.command) {\r\n            result.command = asCommand(item.command);\r\n        }\r\n        return result;\r\n    }\r\n    function asCodeLens(item) {\r\n        if (!item) {\r\n            return undefined;\r\n        }\r\n        let result = new protocolCodeLens_1.default(asRange(item.range));\r\n        if (item.command) {\r\n            result.command = asCommand(item.command);\r\n        }\r\n        if (item.data !== void 0 && item.data !== null) {\r\n            result.data = item.data;\r\n        }\r\n        return result;\r\n    }\r\n    function asCodeLenses(items) {\r\n        if (!items) {\r\n            return undefined;\r\n        }\r\n        return items.map((codeLens) => asCodeLens(codeLens));\r\n    }\r\n    function asWorkspaceEdit(item) {\r\n        if (!item) {\r\n            return undefined;\r\n        }\r\n        let result = new code.WorkspaceEdit();\r\n        if (item.documentChanges) {\r\n            item.documentChanges.forEach(change => {\r\n                if (ls.CreateFile.is(change)) {\r\n                    result.createFile(_uriConverter(change.uri), change.options);\r\n                }\r\n                else if (ls.RenameFile.is(change)) {\r\n                    result.renameFile(_uriConverter(change.oldUri), _uriConverter(change.newUri), change.options);\r\n                }\r\n                else if (ls.DeleteFile.is(change)) {\r\n                    result.deleteFile(_uriConverter(change.uri), change.options);\r\n                }\r\n                else if (ls.TextDocumentEdit.is(change)) {\r\n                    result.set(_uriConverter(change.textDocument.uri), asTextEdits(change.edits));\r\n                }\r\n                else {\r\n                    console.error(`Unknown workspace edit change received:\\n${JSON.stringify(change, undefined, 4)}`);\r\n                }\r\n            });\r\n        }\r\n        else if (item.changes) {\r\n            Object.keys(item.changes).forEach(key => {\r\n                result.set(_uriConverter(key), asTextEdits(item.changes[key]));\r\n            });\r\n        }\r\n        return result;\r\n    }\r\n    function asDocumentLink(item) {\r\n        let range = asRange(item.range);\r\n        let target = item.target ? asUri(item.target) : undefined;\r\n        // target must be optional in DocumentLink\r\n        let link = new protocolDocumentLink_1.default(range, target);\r\n        if (item.data !== void 0 && item.data !== null) {\r\n            link.data = item.data;\r\n        }\r\n        return link;\r\n    }\r\n    function asDocumentLinks(items) {\r\n        if (!items) {\r\n            return undefined;\r\n        }\r\n        return items.map(asDocumentLink);\r\n    }\r\n    function asColor(color) {\r\n        return new code.Color(color.red, color.green, color.blue, color.alpha);\r\n    }\r\n    function asColorInformation(ci) {\r\n        return new code.ColorInformation(asRange(ci.range), asColor(ci.color));\r\n    }\r\n    function asColorInformations(colorInformation) {\r\n        if (Array.isArray(colorInformation)) {\r\n            return colorInformation.map(asColorInformation);\r\n        }\r\n        return undefined;\r\n    }\r\n    function asColorPresentation(cp) {\r\n        let presentation = new code.ColorPresentation(cp.label);\r\n        presentation.additionalTextEdits = asTextEdits(cp.additionalTextEdits);\r\n        if (cp.textEdit) {\r\n            presentation.textEdit = asTextEdit(cp.textEdit);\r\n        }\r\n        return presentation;\r\n    }\r\n    function asColorPresentations(colorPresentations) {\r\n        if (Array.isArray(colorPresentations)) {\r\n            return colorPresentations.map(asColorPresentation);\r\n        }\r\n        return undefined;\r\n    }\r\n    function asFoldingRangeKind(kind) {\r\n        if (kind) {\r\n            switch (kind) {\r\n                case ls.FoldingRangeKind.Comment:\r\n                    return code.FoldingRangeKind.Comment;\r\n                case ls.FoldingRangeKind.Imports:\r\n                    return code.FoldingRangeKind.Imports;\r\n                case ls.FoldingRangeKind.Region:\r\n                    return code.FoldingRangeKind.Region;\r\n            }\r\n        }\r\n        return void 0;\r\n    }\r\n    function asFoldingRange(r) {\r\n        return new code.FoldingRange(r.startLine, r.endLine, asFoldingRangeKind(r.kind));\r\n    }\r\n    function asFoldingRanges(foldingRanges) {\r\n        if (Array.isArray(foldingRanges)) {\r\n            return foldingRanges.map(asFoldingRange);\r\n        }\r\n        return void 0;\r\n    }\r\n    function asSelectionRange(selectionRange) {\r\n        return new code.SelectionRange(asRange(selectionRange.range), selectionRange.parent ? asSelectionRange(selectionRange.parent) : undefined);\r\n    }\r\n    function asSelectionRanges(selectionRanges) {\r\n        if (!Array.isArray(selectionRanges)) {\r\n            return [];\r\n        }\r\n        let result = [];\r\n        for (let range of selectionRanges) {\r\n            result.push(asSelectionRange(range));\r\n        }\r\n        return result;\r\n    }\r\n    return {\r\n        asUri,\r\n        asDiagnostics,\r\n        asDiagnostic,\r\n        asRange,\r\n        asPosition,\r\n        asDiagnosticSeverity,\r\n        asDiagnosticTag,\r\n        asHover,\r\n        asCompletionResult,\r\n        asCompletionItem,\r\n        asTextEdit,\r\n        asTextEdits,\r\n        asSignatureHelp,\r\n        asSignatureInformations,\r\n        asSignatureInformation,\r\n        asParameterInformations,\r\n        asParameterInformation,\r\n        asDeclarationResult,\r\n        asDefinitionResult,\r\n        asLocation,\r\n        asReferences,\r\n        asDocumentHighlights,\r\n        asDocumentHighlight,\r\n        asDocumentHighlightKind,\r\n        asSymbolKind,\r\n        asSymbolInformations,\r\n        asSymbolInformation,\r\n        asDocumentSymbols,\r\n        asDocumentSymbol,\r\n        asCommand,\r\n        asCommands,\r\n        asCodeAction,\r\n        asCodeActionKind,\r\n        asCodeActionKinds,\r\n        asCodeLens,\r\n        asCodeLenses,\r\n        asWorkspaceEdit,\r\n        asDocumentLink,\r\n        asDocumentLinks,\r\n        asFoldingRangeKind,\r\n        asFoldingRange,\r\n        asFoldingRanges,\r\n        asColor,\r\n        asColorInformation,\r\n        asColorInformations,\r\n        asColorPresentation,\r\n        asColorPresentations,\r\n        asSelectionRange,\r\n        asSelectionRanges\r\n    };\r\n}\r\nexports.createConverter = createConverter;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst code = require(\"vscode\");\r\nclass ProtocolDocumentLink extends code.DocumentLink {\r\n    constructor(range, target) {\r\n        super(range, target);\r\n    }\r\n}\r\nexports.default = ProtocolDocumentLink;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst vscode_1 = require(\"vscode\");\r\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\r\nconst client_1 = require(\"./client\");\r\nfunction ensure(target, key) {\r\n    if (target[key] === void 0) {\r\n        target[key] = {};\r\n    }\r\n    return target[key];\r\n}\r\nclass TypeDefinitionFeature extends client_1.TextDocumentFeature {\r\n    constructor(client) {\r\n        super(client, vscode_languageserver_protocol_1.TypeDefinitionRequest.type);\r\n    }\r\n    fillClientCapabilities(capabilites) {\r\n        ensure(ensure(capabilites, 'textDocument'), 'typeDefinition').dynamicRegistration = true;\r\n        let typeDefinitionSupport = ensure(ensure(capabilites, 'textDocument'), 'typeDefinition');\r\n        typeDefinitionSupport.dynamicRegistration = true;\r\n        typeDefinitionSupport.linkSupport = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        let [id, options] = this.getRegistration(documentSelector, capabilities.typeDefinitionProvider);\r\n        if (!id || !options) {\r\n            return;\r\n        }\r\n        this.register(this.messages, { id: id, registerOptions: options });\r\n    }\r\n    registerLanguageProvider(options) {\r\n        let client = this._client;\r\n        let provideTypeDefinition = (document, position, token) => {\r\n            return client.sendRequest(vscode_languageserver_protocol_1.TypeDefinitionRequest.type, client.code2ProtocolConverter.asTextDocumentPositionParams(document, position), token).then(client.protocol2CodeConverter.asDefinitionResult, (error) => {\r\n                client.logFailedRequest(vscode_languageserver_protocol_1.TypeDefinitionRequest.type, error);\r\n                return Promise.resolve(null);\r\n            });\r\n        };\r\n        let middleware = client.clientOptions.middleware;\r\n        return vscode_1.languages.registerTypeDefinitionProvider(options.documentSelector, {\r\n            provideTypeDefinition: (document, position, token) => {\r\n                return middleware.provideTypeDefinition\r\n                    ? middleware.provideTypeDefinition(document, position, token, provideTypeDefinition)\r\n                    : provideTypeDefinition(document, position, token);\r\n            }\r\n        });\r\n    }\r\n}\r\nexports.TypeDefinitionFeature = TypeDefinitionFeature;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nclass Delayer {\r\n    constructor(defaultDelay) {\r\n        this.defaultDelay = defaultDelay;\r\n        this.timeout = undefined;\r\n        this.completionPromise = undefined;\r\n        this.onSuccess = undefined;\r\n        this.task = undefined;\r\n    }\r\n    trigger(task, delay = this.defaultDelay) {\r\n        this.task = task;\r\n        if (delay >= 0) {\r\n            this.cancelTimeout();\r\n        }\r\n        if (!this.completionPromise) {\r\n            this.completionPromise = new Promise((resolve) => {\r\n                this.onSuccess = resolve;\r\n            }).then(() => {\r\n                this.completionPromise = undefined;\r\n                this.onSuccess = undefined;\r\n                var result = this.task();\r\n                this.task = undefined;\r\n                return result;\r\n            });\r\n        }\r\n        if (delay >= 0 || this.timeout === void 0) {\r\n            this.timeout = setTimeout(() => {\r\n                this.timeout = undefined;\r\n                this.onSuccess(undefined);\r\n            }, delay >= 0 ? delay : this.defaultDelay);\r\n        }\r\n        return this.completionPromise;\r\n    }\r\n    forceDelivery() {\r\n        if (!this.completionPromise) {\r\n            return undefined;\r\n        }\r\n        this.cancelTimeout();\r\n        let result = this.task();\r\n        this.completionPromise = undefined;\r\n        this.onSuccess = undefined;\r\n        this.task = undefined;\r\n        return result;\r\n    }\r\n    isTriggered() {\r\n        return this.timeout !== void 0;\r\n    }\r\n    cancel() {\r\n        this.cancelTimeout();\r\n        this.completionPromise = undefined;\r\n    }\r\n    cancelTimeout() {\r\n        if (this.timeout !== void 0) {\r\n            clearTimeout(this.timeout);\r\n            this.timeout = undefined;\r\n        }\r\n    }\r\n}\r\nexports.Delayer = Delayer;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nfunction boolean(value) {\r\n    return value === true || value === false;\r\n}\r\nexports.boolean = boolean;\r\nfunction string(value) {\r\n    return typeof value === 'string' || value instanceof String;\r\n}\r\nexports.string = string;\r\nfunction number(value) {\r\n    return typeof value === 'number' || value instanceof Number;\r\n}\r\nexports.number = number;\r\nfunction error(value) {\r\n    return value instanceof Error;\r\n}\r\nexports.error = error;\r\nfunction func(value) {\r\n    return typeof value === 'function';\r\n}\r\nexports.func = func;\r\nfunction array(value) {\r\n    return Array.isArray(value);\r\n}\r\nexports.array = array;\r\nfunction stringArray(value) {\r\n    return array(value) && value.every(elem => string(elem));\r\n}\r\nexports.stringArray = stringArray;\r\nfunction typedArray(value, check) {\r\n    return Array.isArray(value) && value.every(check);\r\n}\r\nexports.typedArray = typedArray;\r\nfunction thenable(value) {\r\n    return value && func(value.then);\r\n}\r\nexports.thenable = thenable;\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nclass ValueUUID {\r\n    constructor(_value) {\r\n        this._value = _value;\r\n        // empty\r\n    }\r\n    asHex() {\r\n        return this._value;\r\n    }\r\n    equals(other) {\r\n        return this.asHex() === other.asHex();\r\n    }\r\n}\r\nclass V4UUID extends ValueUUID {\r\n    constructor() {\r\n        super([\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            '-',\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            '-',\r\n            '4',\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            '-',\r\n            V4UUID._oneOf(V4UUID._timeHighBits),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            '-',\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n        ].join(''));\r\n    }\r\n    static _oneOf(array) {\r\n        return array[Math.floor(array.length * Math.random())];\r\n    }\r\n    static _randomHex() {\r\n        return V4UUID._oneOf(V4UUID._chars);\r\n    }\r\n}\r\nV4UUID._chars = ['0', '1', '2', '3', '4', '5', '6', '6', '7', '8', '9', 'a', 'b', 'c', 'd', 'e', 'f'];\r\nV4UUID._timeHighBits = ['8', '9', 'a', 'b'];\r\n/**\r\n * An empty UUID that contains only zeros.\r\n */\r\nexports.empty = new ValueUUID('00000000-0000-0000-0000-000000000000');\r\nfunction v4() {\r\n    return new V4UUID();\r\n}\r\nexports.v4 = v4;\r\nconst _UUIDPattern = /^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;\r\nfunction isUUID(value) {\r\n    return _UUIDPattern.test(value);\r\n}\r\nexports.isUUID = isUUID;\r\n/**\r\n * Parses a UUID that is of the format xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx.\r\n * @param value A uuid string.\r\n */\r\nfunction parse(value) {\r\n    if (!isUUID(value)) {\r\n        throw new Error('invalid uuid');\r\n    }\r\n    return new ValueUUID(value);\r\n}\r\nexports.parse = parse;\r\nfunction generateUuid() {\r\n    return v4().asHex();\r\n}\r\nexports.generateUuid = generateUuid;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst UUID = require(\"./utils/uuid\");\r\nconst vscode_1 = require(\"vscode\");\r\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\r\nfunction access(target, key) {\r\n    if (target === void 0) {\r\n        return undefined;\r\n    }\r\n    return target[key];\r\n}\r\nclass WorkspaceFoldersFeature {\r\n    constructor(_client) {\r\n        this._client = _client;\r\n        this._listeners = new Map();\r\n    }\r\n    get messages() {\r\n        return vscode_languageserver_protocol_1.DidChangeWorkspaceFoldersNotification.type;\r\n    }\r\n    fillInitializeParams(params) {\r\n        let folders = vscode_1.workspace.workspaceFolders;\r\n        if (folders === void 0) {\r\n            params.workspaceFolders = null;\r\n        }\r\n        else {\r\n            params.workspaceFolders = folders.map(folder => this.asProtocol(folder));\r\n        }\r\n    }\r\n    fillClientCapabilities(capabilities) {\r\n        capabilities.workspace = capabilities.workspace || {};\r\n        capabilities.workspace.workspaceFolders = true;\r\n    }\r\n    initialize(capabilities) {\r\n        let client = this._client;\r\n        client.onRequest(vscode_languageserver_protocol_1.WorkspaceFoldersRequest.type, (token) => {\r\n            let workspaceFolders = () => {\r\n                let folders = vscode_1.workspace.workspaceFolders;\r\n                if (folders === void 0) {\r\n                    return null;\r\n                }\r\n                let result = folders.map((folder) => {\r\n                    return this.asProtocol(folder);\r\n                });\r\n                return result;\r\n            };\r\n            let middleware = client.clientOptions.middleware.workspace;\r\n            return middleware && middleware.workspaceFolders\r\n                ? middleware.workspaceFolders(token, workspaceFolders)\r\n                : workspaceFolders(token);\r\n        });\r\n        let value = access(access(access(capabilities, 'workspace'), 'workspaceFolders'), 'changeNotifications');\r\n        let id;\r\n        if (typeof value === 'string') {\r\n            id = value;\r\n        }\r\n        else if (value === true) {\r\n            id = UUID.generateUuid();\r\n        }\r\n        if (id) {\r\n            this.register(this.messages, {\r\n                id: id,\r\n                registerOptions: undefined\r\n            });\r\n        }\r\n    }\r\n    register(_message, data) {\r\n        let id = data.id;\r\n        let client = this._client;\r\n        let disposable = vscode_1.workspace.onDidChangeWorkspaceFolders((event) => {\r\n            let didChangeWorkspaceFolders = (event) => {\r\n                let params = {\r\n                    event: {\r\n                        added: event.added.map(folder => this.asProtocol(folder)),\r\n                        removed: event.removed.map(folder => this.asProtocol(folder))\r\n                    }\r\n                };\r\n                this._client.sendNotification(vscode_languageserver_protocol_1.DidChangeWorkspaceFoldersNotification.type, params);\r\n            };\r\n            let middleware = client.clientOptions.middleware.workspace;\r\n            middleware && middleware.didChangeWorkspaceFolders\r\n                ? middleware.didChangeWorkspaceFolders(event, didChangeWorkspaceFolders)\r\n                : didChangeWorkspaceFolders(event);\r\n        });\r\n        this._listeners.set(id, disposable);\r\n    }\r\n    unregister(id) {\r\n        let disposable = this._listeners.get(id);\r\n        if (disposable === void 0) {\r\n            return;\r\n        }\r\n        this._listeners.delete(id);\r\n        disposable.dispose();\r\n    }\r\n    dispose() {\r\n        for (let disposable of this._listeners.values()) {\r\n            disposable.dispose();\r\n        }\r\n        this._listeners.clear();\r\n    }\r\n    asProtocol(workspaceFolder) {\r\n        if (workspaceFolder === void 0) {\r\n            return null;\r\n        }\r\n        return { uri: this._client.code2ProtocolConverter.asUri(workspaceFolder.uri), name: workspaceFolder.name };\r\n    }\r\n}\r\nexports.WorkspaceFoldersFeature = WorkspaceFoldersFeature;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nfunction __export(m) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst vscode_jsonrpc_1 = require(\"vscode-jsonrpc\");\r\nexports.ErrorCodes = vscode_jsonrpc_1.ErrorCodes;\r\nexports.ResponseError = vscode_jsonrpc_1.ResponseError;\r\nexports.CancellationToken = vscode_jsonrpc_1.CancellationToken;\r\nexports.CancellationTokenSource = vscode_jsonrpc_1.CancellationTokenSource;\r\nexports.Disposable = vscode_jsonrpc_1.Disposable;\r\nexports.Event = vscode_jsonrpc_1.Event;\r\nexports.Emitter = vscode_jsonrpc_1.Emitter;\r\nexports.Trace = vscode_jsonrpc_1.Trace;\r\nexports.TraceFormat = vscode_jsonrpc_1.TraceFormat;\r\nexports.SetTraceNotification = vscode_jsonrpc_1.SetTraceNotification;\r\nexports.LogTraceNotification = vscode_jsonrpc_1.LogTraceNotification;\r\nexports.RequestType = vscode_jsonrpc_1.RequestType;\r\nexports.RequestType0 = vscode_jsonrpc_1.RequestType0;\r\nexports.NotificationType = vscode_jsonrpc_1.NotificationType;\r\nexports.NotificationType0 = vscode_jsonrpc_1.NotificationType0;\r\nexports.MessageReader = vscode_jsonrpc_1.MessageReader;\r\nexports.MessageWriter = vscode_jsonrpc_1.MessageWriter;\r\nexports.ConnectionStrategy = vscode_jsonrpc_1.ConnectionStrategy;\r\nexports.StreamMessageReader = vscode_jsonrpc_1.StreamMessageReader;\r\nexports.StreamMessageWriter = vscode_jsonrpc_1.StreamMessageWriter;\r\nexports.IPCMessageReader = vscode_jsonrpc_1.IPCMessageReader;\r\nexports.IPCMessageWriter = vscode_jsonrpc_1.IPCMessageWriter;\r\nexports.createClientPipeTransport = vscode_jsonrpc_1.createClientPipeTransport;\r\nexports.createServerPipeTransport = vscode_jsonrpc_1.createServerPipeTransport;\r\nexports.generateRandomPipeName = vscode_jsonrpc_1.generateRandomPipeName;\r\nexports.createClientSocketTransport = vscode_jsonrpc_1.createClientSocketTransport;\r\nexports.createServerSocketTransport = vscode_jsonrpc_1.createServerSocketTransport;\r\nexports.ProgressType = vscode_jsonrpc_1.ProgressType;\r\n__export(require(\"vscode-languageserver-types\"));\r\n__export(require(\"./protocol\"));\r\nconst callHierarchy = require(\"./protocol.callHierarchy.proposed\");\r\nconst st = require(\"./protocol.sematicTokens.proposed\");\r\nvar Proposed;\r\n(function (Proposed) {\r\n    let CallHierarchyPrepareRequest;\r\n    (function (CallHierarchyPrepareRequest) {\r\n        CallHierarchyPrepareRequest.method = callHierarchy.CallHierarchyPrepareRequest.method;\r\n        CallHierarchyPrepareRequest.type = callHierarchy.CallHierarchyPrepareRequest.type;\r\n    })(CallHierarchyPrepareRequest = Proposed.CallHierarchyPrepareRequest || (Proposed.CallHierarchyPrepareRequest = {}));\r\n    let CallHierarchyIncomingCallsRequest;\r\n    (function (CallHierarchyIncomingCallsRequest) {\r\n        CallHierarchyIncomingCallsRequest.method = callHierarchy.CallHierarchyIncomingCallsRequest.method;\r\n        CallHierarchyIncomingCallsRequest.type = callHierarchy.CallHierarchyIncomingCallsRequest.type;\r\n    })(CallHierarchyIncomingCallsRequest = Proposed.CallHierarchyIncomingCallsRequest || (Proposed.CallHierarchyIncomingCallsRequest = {}));\r\n    let CallHierarchyOutgoingCallsRequest;\r\n    (function (CallHierarchyOutgoingCallsRequest) {\r\n        CallHierarchyOutgoingCallsRequest.method = callHierarchy.CallHierarchyOutgoingCallsRequest.method;\r\n        CallHierarchyOutgoingCallsRequest.type = callHierarchy.CallHierarchyOutgoingCallsRequest.type;\r\n    })(CallHierarchyOutgoingCallsRequest = Proposed.CallHierarchyOutgoingCallsRequest || (Proposed.CallHierarchyOutgoingCallsRequest = {}));\r\n    Proposed.SemanticTokenTypes = st.SemanticTokenTypes;\r\n    Proposed.SemanticTokenModifiers = st.SemanticTokenModifiers;\r\n    Proposed.SemanticTokens = st.SemanticTokens;\r\n    let SemanticTokensRequest;\r\n    (function (SemanticTokensRequest) {\r\n        SemanticTokensRequest.method = st.SemanticTokensRequest.method;\r\n        SemanticTokensRequest.type = st.SemanticTokensRequest.type;\r\n    })(SemanticTokensRequest = Proposed.SemanticTokensRequest || (Proposed.SemanticTokensRequest = {}));\r\n    let SemanticTokensEditsRequest;\r\n    (function (SemanticTokensEditsRequest) {\r\n        SemanticTokensEditsRequest.method = st.SemanticTokensEditsRequest.method;\r\n        SemanticTokensEditsRequest.type = st.SemanticTokensEditsRequest.type;\r\n    })(SemanticTokensEditsRequest = Proposed.SemanticTokensEditsRequest || (Proposed.SemanticTokensEditsRequest = {}));\r\n    let SemanticTokensRangeRequest;\r\n    (function (SemanticTokensRangeRequest) {\r\n        SemanticTokensRangeRequest.method = st.SemanticTokensRangeRequest.method;\r\n        SemanticTokensRangeRequest.type = st.SemanticTokensRangeRequest.type;\r\n    })(SemanticTokensRangeRequest = Proposed.SemanticTokensRangeRequest || (Proposed.SemanticTokensRangeRequest = {}));\r\n})(Proposed = exports.Proposed || (exports.Proposed = {}));\r\nfunction createProtocolConnection(reader, writer, logger, strategy) {\r\n    return vscode_jsonrpc_1.createMessageConnection(reader, writer, logger, strategy);\r\n}\r\nexports.createProtocolConnection = createProtocolConnection;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst vscode_jsonrpc_1 = require(\"vscode-jsonrpc\");\r\nclass ProtocolRequestType0 extends vscode_jsonrpc_1.RequestType0 {\r\n    constructor(method) {\r\n        super(method);\r\n    }\r\n}\r\nexports.ProtocolRequestType0 = ProtocolRequestType0;\r\nclass ProtocolRequestType extends vscode_jsonrpc_1.RequestType {\r\n    constructor(method) {\r\n        super(method);\r\n    }\r\n}\r\nexports.ProtocolRequestType = ProtocolRequestType;\r\nclass ProtocolNotificationType extends vscode_jsonrpc_1.NotificationType {\r\n    constructor(method) {\r\n        super(method);\r\n    }\r\n}\r\nexports.ProtocolNotificationType = ProtocolNotificationType;\r\nclass ProtocolNotificationType0 extends vscode_jsonrpc_1.NotificationType0 {\r\n    constructor(method) {\r\n        super(method);\r\n    }\r\n}\r\nexports.ProtocolNotificationType0 = ProtocolNotificationType0;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) TypeFox and others. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst messages_1 = require(\"./messages\");\r\n/**\r\n * A request to result a `CallHierarchyItem` in a document at a given position.\r\n * Can be used as an input to a incoming or outgoing call hierarchy.\r\n *\r\n * @since 3.16.0 - Proposed state\r\n */\r\nvar CallHierarchyPrepareRequest;\r\n(function (CallHierarchyPrepareRequest) {\r\n    CallHierarchyPrepareRequest.method = 'textDocument/prepareCallHierarchy';\r\n    CallHierarchyPrepareRequest.type = new messages_1.ProtocolRequestType(CallHierarchyPrepareRequest.method);\r\n})(CallHierarchyPrepareRequest = exports.CallHierarchyPrepareRequest || (exports.CallHierarchyPrepareRequest = {}));\r\n/**\r\n * A request to resolve the incoming calls for a given `CallHierarchyItem`.\r\n *\r\n * @since 3.16.0 - Proposed state\r\n */\r\nvar CallHierarchyIncomingCallsRequest;\r\n(function (CallHierarchyIncomingCallsRequest) {\r\n    CallHierarchyIncomingCallsRequest.method = 'callHierarchy/incomingCalls';\r\n    CallHierarchyIncomingCallsRequest.type = new messages_1.ProtocolRequestType(CallHierarchyIncomingCallsRequest.method);\r\n})(CallHierarchyIncomingCallsRequest = exports.CallHierarchyIncomingCallsRequest || (exports.CallHierarchyIncomingCallsRequest = {}));\r\n/**\r\n * A request to resolve the outgoing calls for a given `CallHierarchyItem`.\r\n *\r\n * @since 3.16.0 - Proposed state\r\n */\r\nvar CallHierarchyOutgoingCallsRequest;\r\n(function (CallHierarchyOutgoingCallsRequest) {\r\n    CallHierarchyOutgoingCallsRequest.method = 'callHierarchy/outgoingCalls';\r\n    CallHierarchyOutgoingCallsRequest.type = new messages_1.ProtocolRequestType(CallHierarchyOutgoingCallsRequest.method);\r\n})(CallHierarchyOutgoingCallsRequest = exports.CallHierarchyOutgoingCallsRequest || (exports.CallHierarchyOutgoingCallsRequest = {}));\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst vscode_jsonrpc_1 = require(\"vscode-jsonrpc\");\r\nconst messages_1 = require(\"./messages\");\r\n/**\r\n * A request to list all color symbols found in a given text document. The request's\r\n * parameter is of type [DocumentColorParams](#DocumentColorParams) the\r\n * response is of type [ColorInformation[]](#ColorInformation) or a Thenable\r\n * that resolves to such.\r\n */\r\nvar DocumentColorRequest;\r\n(function (DocumentColorRequest) {\r\n    DocumentColorRequest.method = 'textDocument/documentColor';\r\n    DocumentColorRequest.type = new messages_1.ProtocolRequestType(DocumentColorRequest.method);\r\n    /** @deprecated Use DocumentColorRequest.type */\r\n    DocumentColorRequest.resultType = new vscode_jsonrpc_1.ProgressType();\r\n})(DocumentColorRequest = exports.DocumentColorRequest || (exports.DocumentColorRequest = {}));\r\n/**\r\n * A request to list all presentation for a color. The request's\r\n * parameter is of type [ColorPresentationParams](#ColorPresentationParams) the\r\n * response is of type [ColorInformation[]](#ColorInformation) or a Thenable\r\n * that resolves to such.\r\n */\r\nvar ColorPresentationRequest;\r\n(function (ColorPresentationRequest) {\r\n    ColorPresentationRequest.type = new messages_1.ProtocolRequestType('textDocument/colorPresentation');\r\n})(ColorPresentationRequest = exports.ColorPresentationRequest || (exports.ColorPresentationRequest = {}));\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst messages_1 = require(\"./messages\");\r\n/**\r\n * The 'workspace/configuration' request is sent from the server to the client to fetch a certain\r\n * configuration setting.\r\n *\r\n * This pull model replaces the old push model were the client signaled configuration change via an\r\n * event. If the server still needs to react to configuration changes (since the server caches the\r\n * result of `workspace/configuration` requests) the server should register for an empty configuration\r\n * change event and empty the cache if such an event is received.\r\n */\r\nvar ConfigurationRequest;\r\n(function (ConfigurationRequest) {\r\n    ConfigurationRequest.type = new messages_1.ProtocolRequestType('workspace/configuration');\r\n})(ConfigurationRequest = exports.ConfigurationRequest || (exports.ConfigurationRequest = {}));\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst vscode_jsonrpc_1 = require(\"vscode-jsonrpc\");\r\nconst messages_1 = require(\"./messages\");\r\n// @ts-ignore: to avoid inlining LocatioLink as dynamic import\r\nlet __noDynamicImport;\r\n/**\r\n * A request to resolve the type definition locations of a symbol at a given text\r\n * document position. The request's parameter is of type [TextDocumentPositioParams]\r\n * (#TextDocumentPositionParams) the response is of type [Declaration](#Declaration)\r\n * or a typed array of [DeclarationLink](#DeclarationLink) or a Thenable that resolves\r\n * to such.\r\n */\r\nvar DeclarationRequest;\r\n(function (DeclarationRequest) {\r\n    DeclarationRequest.method = 'textDocument/declaration';\r\n    DeclarationRequest.type = new messages_1.ProtocolRequestType(DeclarationRequest.method);\r\n    /** @deprecated Use DeclarationRequest.type */\r\n    DeclarationRequest.resultType = new vscode_jsonrpc_1.ProgressType();\r\n})(DeclarationRequest = exports.DeclarationRequest || (exports.DeclarationRequest = {}));\r\n","\"use strict\";\r\n/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst vscode_jsonrpc_1 = require(\"vscode-jsonrpc\");\r\nconst messages_1 = require(\"./messages\");\r\n/**\r\n * Enum of known range kinds\r\n */\r\nvar FoldingRangeKind;\r\n(function (FoldingRangeKind) {\r\n    /**\r\n     * Folding range for a comment\r\n     */\r\n    FoldingRangeKind[\"Comment\"] = \"comment\";\r\n    /**\r\n     * Folding range for a imports or includes\r\n     */\r\n    FoldingRangeKind[\"Imports\"] = \"imports\";\r\n    /**\r\n     * Folding range for a region (e.g. `#region`)\r\n     */\r\n    FoldingRangeKind[\"Region\"] = \"region\";\r\n})(FoldingRangeKind = exports.FoldingRangeKind || (exports.FoldingRangeKind = {}));\r\n/**\r\n * A request to provide folding ranges in a document. The request's\r\n * parameter is of type [FoldingRangeParams](#FoldingRangeParams), the\r\n * response is of type [FoldingRangeList](#FoldingRangeList) or a Thenable\r\n * that resolves to such.\r\n */\r\nvar FoldingRangeRequest;\r\n(function (FoldingRangeRequest) {\r\n    FoldingRangeRequest.method = 'textDocument/foldingRange';\r\n    FoldingRangeRequest.type = new messages_1.ProtocolRequestType(FoldingRangeRequest.method);\r\n    /** @deprecated Use FoldingRangeRequest.type */\r\n    FoldingRangeRequest.resultType = new vscode_jsonrpc_1.ProgressType();\r\n})(FoldingRangeRequest = exports.FoldingRangeRequest || (exports.FoldingRangeRequest = {}));\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst vscode_jsonrpc_1 = require(\"vscode-jsonrpc\");\r\nconst messages_1 = require(\"./messages\");\r\n// @ts-ignore: to avoid inlining LocatioLink as dynamic import\r\nlet __noDynamicImport;\r\n/**\r\n * A request to resolve the implementation locations of a symbol at a given text\r\n * document position. The request's parameter is of type [TextDocumentPositioParams]\r\n * (#TextDocumentPositionParams) the response is of type [Definition](#Definition) or a\r\n * Thenable that resolves to such.\r\n */\r\nvar ImplementationRequest;\r\n(function (ImplementationRequest) {\r\n    ImplementationRequest.method = 'textDocument/implementation';\r\n    ImplementationRequest.type = new messages_1.ProtocolRequestType(ImplementationRequest.method);\r\n    /** @deprecated Use ImplementationRequest.type */\r\n    ImplementationRequest.resultType = new vscode_jsonrpc_1.ProgressType();\r\n})(ImplementationRequest = exports.ImplementationRequest || (exports.ImplementationRequest = {}));\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst Is = require(\"./utils/is\");\r\nconst vscode_jsonrpc_1 = require(\"vscode-jsonrpc\");\r\nconst messages_1 = require(\"./messages\");\r\nconst protocol_implementation_1 = require(\"./protocol.implementation\");\r\nexports.ImplementationRequest = protocol_implementation_1.ImplementationRequest;\r\nconst protocol_typeDefinition_1 = require(\"./protocol.typeDefinition\");\r\nexports.TypeDefinitionRequest = protocol_typeDefinition_1.TypeDefinitionRequest;\r\nconst protocol_workspaceFolders_1 = require(\"./protocol.workspaceFolders\");\r\nexports.WorkspaceFoldersRequest = protocol_workspaceFolders_1.WorkspaceFoldersRequest;\r\nexports.DidChangeWorkspaceFoldersNotification = protocol_workspaceFolders_1.DidChangeWorkspaceFoldersNotification;\r\nconst protocol_configuration_1 = require(\"./protocol.configuration\");\r\nexports.ConfigurationRequest = protocol_configuration_1.ConfigurationRequest;\r\nconst protocol_colorProvider_1 = require(\"./protocol.colorProvider\");\r\nexports.DocumentColorRequest = protocol_colorProvider_1.DocumentColorRequest;\r\nexports.ColorPresentationRequest = protocol_colorProvider_1.ColorPresentationRequest;\r\nconst protocol_foldingRange_1 = require(\"./protocol.foldingRange\");\r\nexports.FoldingRangeRequest = protocol_foldingRange_1.FoldingRangeRequest;\r\nconst protocol_declaration_1 = require(\"./protocol.declaration\");\r\nexports.DeclarationRequest = protocol_declaration_1.DeclarationRequest;\r\nconst protocol_selectionRange_1 = require(\"./protocol.selectionRange\");\r\nexports.SelectionRangeRequest = protocol_selectionRange_1.SelectionRangeRequest;\r\nconst protocol_progress_1 = require(\"./protocol.progress\");\r\nexports.WorkDoneProgress = protocol_progress_1.WorkDoneProgress;\r\nexports.WorkDoneProgressCreateRequest = protocol_progress_1.WorkDoneProgressCreateRequest;\r\nexports.WorkDoneProgressCancelNotification = protocol_progress_1.WorkDoneProgressCancelNotification;\r\n// @ts-ignore: to avoid inlining LocatioLink as dynamic import\r\nlet __noDynamicImport;\r\n/**\r\n * The DocumentFilter namespace provides helper functions to work with\r\n * [DocumentFilter](#DocumentFilter) literals.\r\n */\r\nvar DocumentFilter;\r\n(function (DocumentFilter) {\r\n    function is(value) {\r\n        const candidate = value;\r\n        return Is.string(candidate.language) || Is.string(candidate.scheme) || Is.string(candidate.pattern);\r\n    }\r\n    DocumentFilter.is = is;\r\n})(DocumentFilter = exports.DocumentFilter || (exports.DocumentFilter = {}));\r\n/**\r\n * The DocumentSelector namespace provides helper functions to work with\r\n * [DocumentSelector](#DocumentSelector)s.\r\n */\r\nvar DocumentSelector;\r\n(function (DocumentSelector) {\r\n    function is(value) {\r\n        if (!Array.isArray(value)) {\r\n            return false;\r\n        }\r\n        for (let elem of value) {\r\n            if (!Is.string(elem) && !DocumentFilter.is(elem)) {\r\n                return false;\r\n            }\r\n        }\r\n        return true;\r\n    }\r\n    DocumentSelector.is = is;\r\n})(DocumentSelector = exports.DocumentSelector || (exports.DocumentSelector = {}));\r\n/**\r\n * The `client/registerCapability` request is sent from the server to the client to register a new capability\r\n * handler on the client side.\r\n */\r\nvar RegistrationRequest;\r\n(function (RegistrationRequest) {\r\n    RegistrationRequest.type = new messages_1.ProtocolRequestType('client/registerCapability');\r\n})(RegistrationRequest = exports.RegistrationRequest || (exports.RegistrationRequest = {}));\r\n/**\r\n * The `client/unregisterCapability` request is sent from the server to the client to unregister a previously registered capability\r\n * handler on the client side.\r\n */\r\nvar UnregistrationRequest;\r\n(function (UnregistrationRequest) {\r\n    UnregistrationRequest.type = new messages_1.ProtocolRequestType('client/unregisterCapability');\r\n})(UnregistrationRequest = exports.UnregistrationRequest || (exports.UnregistrationRequest = {}));\r\nvar ResourceOperationKind;\r\n(function (ResourceOperationKind) {\r\n    /**\r\n     * Supports creating new files and folders.\r\n     */\r\n    ResourceOperationKind.Create = 'create';\r\n    /**\r\n     * Supports renaming existing files and folders.\r\n     */\r\n    ResourceOperationKind.Rename = 'rename';\r\n    /**\r\n     * Supports deleting existing files and folders.\r\n     */\r\n    ResourceOperationKind.Delete = 'delete';\r\n})(ResourceOperationKind = exports.ResourceOperationKind || (exports.ResourceOperationKind = {}));\r\nvar FailureHandlingKind;\r\n(function (FailureHandlingKind) {\r\n    /**\r\n     * Applying the workspace change is simply aborted if one of the changes provided\r\n     * fails. All operations executed before the failing operation stay executed.\r\n     */\r\n    FailureHandlingKind.Abort = 'abort';\r\n    /**\r\n     * All operations are executed transactional. That means they either all\r\n     * succeed or no changes at all are applied to the workspace.\r\n     */\r\n    FailureHandlingKind.Transactional = 'transactional';\r\n    /**\r\n     * If the workspace edit contains only textual file changes they are executed transactional.\r\n     * If resource changes (create, rename or delete file) are part of the change the failure\r\n     * handling startegy is abort.\r\n     */\r\n    FailureHandlingKind.TextOnlyTransactional = 'textOnlyTransactional';\r\n    /**\r\n     * The client tries to undo the operations already executed. But there is no\r\n     * guarantee that this is succeeding.\r\n     */\r\n    FailureHandlingKind.Undo = 'undo';\r\n})(FailureHandlingKind = exports.FailureHandlingKind || (exports.FailureHandlingKind = {}));\r\n/**\r\n * The StaticRegistrationOptions namespace provides helper functions to work with\r\n * [StaticRegistrationOptions](#StaticRegistrationOptions) literals.\r\n */\r\nvar StaticRegistrationOptions;\r\n(function (StaticRegistrationOptions) {\r\n    function hasId(value) {\r\n        const candidate = value;\r\n        return candidate && Is.string(candidate.id) && candidate.id.length > 0;\r\n    }\r\n    StaticRegistrationOptions.hasId = hasId;\r\n})(StaticRegistrationOptions = exports.StaticRegistrationOptions || (exports.StaticRegistrationOptions = {}));\r\n/**\r\n * The TextDocumentRegistrationOptions namespace provides helper functions to work with\r\n * [TextDocumentRegistrationOptions](#TextDocumentRegistrationOptions) literals.\r\n */\r\nvar TextDocumentRegistrationOptions;\r\n(function (TextDocumentRegistrationOptions) {\r\n    function is(value) {\r\n        const candidate = value;\r\n        return candidate && (candidate.documentSelector === null || DocumentSelector.is(candidate.documentSelector));\r\n    }\r\n    TextDocumentRegistrationOptions.is = is;\r\n})(TextDocumentRegistrationOptions = exports.TextDocumentRegistrationOptions || (exports.TextDocumentRegistrationOptions = {}));\r\n/**\r\n * The WorkDoneProgressOptions namespace provides helper functions to work with\r\n * [WorkDoneProgressOptions](#WorkDoneProgressOptions) literals.\r\n */\r\nvar WorkDoneProgressOptions;\r\n(function (WorkDoneProgressOptions) {\r\n    function is(value) {\r\n        const candidate = value;\r\n        return Is.objectLiteral(candidate) && (candidate.workDoneProgress === undefined || Is.boolean(candidate.workDoneProgress));\r\n    }\r\n    WorkDoneProgressOptions.is = is;\r\n    function hasWorkDoneProgress(value) {\r\n        const candidate = value;\r\n        return candidate && Is.boolean(candidate.workDoneProgress);\r\n    }\r\n    WorkDoneProgressOptions.hasWorkDoneProgress = hasWorkDoneProgress;\r\n})(WorkDoneProgressOptions = exports.WorkDoneProgressOptions || (exports.WorkDoneProgressOptions = {}));\r\n/**\r\n * The initialize request is sent from the client to the server.\r\n * It is sent once as the request after starting up the server.\r\n * The requests parameter is of type [InitializeParams](#InitializeParams)\r\n * the response if of type [InitializeResult](#InitializeResult) of a Thenable that\r\n * resolves to such.\r\n */\r\nvar InitializeRequest;\r\n(function (InitializeRequest) {\r\n    InitializeRequest.type = new messages_1.ProtocolRequestType('initialize');\r\n})(InitializeRequest = exports.InitializeRequest || (exports.InitializeRequest = {}));\r\n/**\r\n * Known error codes for an `InitializeError`;\r\n */\r\nvar InitializeError;\r\n(function (InitializeError) {\r\n    /**\r\n     * If the protocol version provided by the client can't be handled by the server.\r\n     * @deprecated This initialize error got replaced by client capabilities. There is\r\n     * no version handshake in version 3.0x\r\n     */\r\n    InitializeError.unknownProtocolVersion = 1;\r\n})(InitializeError = exports.InitializeError || (exports.InitializeError = {}));\r\n/**\r\n * The intialized notification is sent from the client to the\r\n * server after the client is fully initialized and the server\r\n * is allowed to send requests from the server to the client.\r\n */\r\nvar InitializedNotification;\r\n(function (InitializedNotification) {\r\n    InitializedNotification.type = new messages_1.ProtocolNotificationType('initialized');\r\n})(InitializedNotification = exports.InitializedNotification || (exports.InitializedNotification = {}));\r\n//---- Shutdown Method ----\r\n/**\r\n * A shutdown request is sent from the client to the server.\r\n * It is sent once when the client decides to shutdown the\r\n * server. The only notification that is sent after a shutdown request\r\n * is the exit event.\r\n */\r\nvar ShutdownRequest;\r\n(function (ShutdownRequest) {\r\n    ShutdownRequest.type = new messages_1.ProtocolRequestType0('shutdown');\r\n})(ShutdownRequest = exports.ShutdownRequest || (exports.ShutdownRequest = {}));\r\n//---- Exit Notification ----\r\n/**\r\n * The exit event is sent from the client to the server to\r\n * ask the server to exit its process.\r\n */\r\nvar ExitNotification;\r\n(function (ExitNotification) {\r\n    ExitNotification.type = new messages_1.ProtocolNotificationType0('exit');\r\n})(ExitNotification = exports.ExitNotification || (exports.ExitNotification = {}));\r\n/**\r\n * The configuration change notification is sent from the client to the server\r\n * when the client's configuration has changed. The notification contains\r\n * the changed configuration as defined by the language client.\r\n */\r\nvar DidChangeConfigurationNotification;\r\n(function (DidChangeConfigurationNotification) {\r\n    DidChangeConfigurationNotification.type = new messages_1.ProtocolNotificationType('workspace/didChangeConfiguration');\r\n})(DidChangeConfigurationNotification = exports.DidChangeConfigurationNotification || (exports.DidChangeConfigurationNotification = {}));\r\n//---- Message show and log notifications ----\r\n/**\r\n * The message type\r\n */\r\nvar MessageType;\r\n(function (MessageType) {\r\n    /**\r\n     * An error message.\r\n     */\r\n    MessageType.Error = 1;\r\n    /**\r\n     * A warning message.\r\n     */\r\n    MessageType.Warning = 2;\r\n    /**\r\n     * An information message.\r\n     */\r\n    MessageType.Info = 3;\r\n    /**\r\n     * A log message.\r\n     */\r\n    MessageType.Log = 4;\r\n})(MessageType = exports.MessageType || (exports.MessageType = {}));\r\n/**\r\n * The show message notification is sent from a server to a client to ask\r\n * the client to display a particular message in the user interface.\r\n */\r\nvar ShowMessageNotification;\r\n(function (ShowMessageNotification) {\r\n    ShowMessageNotification.type = new messages_1.ProtocolNotificationType('window/showMessage');\r\n})(ShowMessageNotification = exports.ShowMessageNotification || (exports.ShowMessageNotification = {}));\r\n/**\r\n * The show message request is sent from the server to the client to show a message\r\n * and a set of options actions to the user.\r\n */\r\nvar ShowMessageRequest;\r\n(function (ShowMessageRequest) {\r\n    ShowMessageRequest.type = new messages_1.ProtocolRequestType('window/showMessageRequest');\r\n})(ShowMessageRequest = exports.ShowMessageRequest || (exports.ShowMessageRequest = {}));\r\n/**\r\n * The log message notification is sent from the server to the client to ask\r\n * the client to log a particular message.\r\n */\r\nvar LogMessageNotification;\r\n(function (LogMessageNotification) {\r\n    LogMessageNotification.type = new messages_1.ProtocolNotificationType('window/logMessage');\r\n})(LogMessageNotification = exports.LogMessageNotification || (exports.LogMessageNotification = {}));\r\n//---- Telemetry notification\r\n/**\r\n * The telemetry event notification is sent from the server to the client to ask\r\n * the client to log telemetry data.\r\n */\r\nvar TelemetryEventNotification;\r\n(function (TelemetryEventNotification) {\r\n    TelemetryEventNotification.type = new messages_1.ProtocolNotificationType('telemetry/event');\r\n})(TelemetryEventNotification = exports.TelemetryEventNotification || (exports.TelemetryEventNotification = {}));\r\n/**\r\n * Defines how the host (editor) should sync\r\n * document changes to the language server.\r\n */\r\nvar TextDocumentSyncKind;\r\n(function (TextDocumentSyncKind) {\r\n    /**\r\n     * Documents should not be synced at all.\r\n     */\r\n    TextDocumentSyncKind.None = 0;\r\n    /**\r\n     * Documents are synced by always sending the full content\r\n     * of the document.\r\n     */\r\n    TextDocumentSyncKind.Full = 1;\r\n    /**\r\n     * Documents are synced by sending the full content on open.\r\n     * After that only incremental updates to the document are\r\n     * send.\r\n     */\r\n    TextDocumentSyncKind.Incremental = 2;\r\n})(TextDocumentSyncKind = exports.TextDocumentSyncKind || (exports.TextDocumentSyncKind = {}));\r\n/**\r\n * The document open notification is sent from the client to the server to signal\r\n * newly opened text documents. The document's truth is now managed by the client\r\n * and the server must not try to read the document's truth using the document's\r\n * uri. Open in this sense means it is managed by the client. It doesn't necessarily\r\n * mean that its content is presented in an editor. An open notification must not\r\n * be sent more than once without a corresponding close notification send before.\r\n * This means open and close notification must be balanced and the max open count\r\n * is one.\r\n */\r\nvar DidOpenTextDocumentNotification;\r\n(function (DidOpenTextDocumentNotification) {\r\n    DidOpenTextDocumentNotification.method = 'textDocument/didOpen';\r\n    DidOpenTextDocumentNotification.type = new messages_1.ProtocolNotificationType(DidOpenTextDocumentNotification.method);\r\n})(DidOpenTextDocumentNotification = exports.DidOpenTextDocumentNotification || (exports.DidOpenTextDocumentNotification = {}));\r\n/**\r\n * The document change notification is sent from the client to the server to signal\r\n * changes to a text document.\r\n */\r\nvar DidChangeTextDocumentNotification;\r\n(function (DidChangeTextDocumentNotification) {\r\n    DidChangeTextDocumentNotification.method = 'textDocument/didChange';\r\n    DidChangeTextDocumentNotification.type = new messages_1.ProtocolNotificationType(DidChangeTextDocumentNotification.method);\r\n})(DidChangeTextDocumentNotification = exports.DidChangeTextDocumentNotification || (exports.DidChangeTextDocumentNotification = {}));\r\n/**\r\n * The document close notification is sent from the client to the server when\r\n * the document got closed in the client. The document's truth now exists where\r\n * the document's uri points to (e.g. if the document's uri is a file uri the\r\n * truth now exists on disk). As with the open notification the close notification\r\n * is about managing the document's content. Receiving a close notification\r\n * doesn't mean that the document was open in an editor before. A close\r\n * notification requires a previous open notification to be sent.\r\n */\r\nvar DidCloseTextDocumentNotification;\r\n(function (DidCloseTextDocumentNotification) {\r\n    DidCloseTextDocumentNotification.method = 'textDocument/didClose';\r\n    DidCloseTextDocumentNotification.type = new messages_1.ProtocolNotificationType(DidCloseTextDocumentNotification.method);\r\n})(DidCloseTextDocumentNotification = exports.DidCloseTextDocumentNotification || (exports.DidCloseTextDocumentNotification = {}));\r\n/**\r\n * The document save notification is sent from the client to the server when\r\n * the document got saved in the client.\r\n */\r\nvar DidSaveTextDocumentNotification;\r\n(function (DidSaveTextDocumentNotification) {\r\n    DidSaveTextDocumentNotification.method = 'textDocument/didSave';\r\n    DidSaveTextDocumentNotification.type = new messages_1.ProtocolNotificationType(DidSaveTextDocumentNotification.method);\r\n})(DidSaveTextDocumentNotification = exports.DidSaveTextDocumentNotification || (exports.DidSaveTextDocumentNotification = {}));\r\n/**\r\n * Represents reasons why a text document is saved.\r\n */\r\nvar TextDocumentSaveReason;\r\n(function (TextDocumentSaveReason) {\r\n    /**\r\n     * Manually triggered, e.g. by the user pressing save, by starting debugging,\r\n     * or by an API call.\r\n     */\r\n    TextDocumentSaveReason.Manual = 1;\r\n    /**\r\n     * Automatic after a delay.\r\n     */\r\n    TextDocumentSaveReason.AfterDelay = 2;\r\n    /**\r\n     * When the editor lost focus.\r\n     */\r\n    TextDocumentSaveReason.FocusOut = 3;\r\n})(TextDocumentSaveReason = exports.TextDocumentSaveReason || (exports.TextDocumentSaveReason = {}));\r\n/**\r\n * A document will save notification is sent from the client to the server before\r\n * the document is actually saved.\r\n */\r\nvar WillSaveTextDocumentNotification;\r\n(function (WillSaveTextDocumentNotification) {\r\n    WillSaveTextDocumentNotification.method = 'textDocument/willSave';\r\n    WillSaveTextDocumentNotification.type = new messages_1.ProtocolNotificationType(WillSaveTextDocumentNotification.method);\r\n})(WillSaveTextDocumentNotification = exports.WillSaveTextDocumentNotification || (exports.WillSaveTextDocumentNotification = {}));\r\n/**\r\n * A document will save request is sent from the client to the server before\r\n * the document is actually saved. The request can return an array of TextEdits\r\n * which will be applied to the text document before it is saved. Please note that\r\n * clients might drop results if computing the text edits took too long or if a\r\n * server constantly fails on this request. This is done to keep the save fast and\r\n * reliable.\r\n */\r\nvar WillSaveTextDocumentWaitUntilRequest;\r\n(function (WillSaveTextDocumentWaitUntilRequest) {\r\n    WillSaveTextDocumentWaitUntilRequest.method = 'textDocument/willSaveWaitUntil';\r\n    WillSaveTextDocumentWaitUntilRequest.type = new messages_1.ProtocolRequestType(WillSaveTextDocumentWaitUntilRequest.method);\r\n})(WillSaveTextDocumentWaitUntilRequest = exports.WillSaveTextDocumentWaitUntilRequest || (exports.WillSaveTextDocumentWaitUntilRequest = {}));\r\n/**\r\n * The watched files notification is sent from the client to the server when\r\n * the client detects changes to file watched by the language client.\r\n */\r\nvar DidChangeWatchedFilesNotification;\r\n(function (DidChangeWatchedFilesNotification) {\r\n    DidChangeWatchedFilesNotification.type = new messages_1.ProtocolNotificationType('workspace/didChangeWatchedFiles');\r\n})(DidChangeWatchedFilesNotification = exports.DidChangeWatchedFilesNotification || (exports.DidChangeWatchedFilesNotification = {}));\r\n/**\r\n * The file event type\r\n */\r\nvar FileChangeType;\r\n(function (FileChangeType) {\r\n    /**\r\n     * The file got created.\r\n     */\r\n    FileChangeType.Created = 1;\r\n    /**\r\n     * The file got changed.\r\n     */\r\n    FileChangeType.Changed = 2;\r\n    /**\r\n     * The file got deleted.\r\n     */\r\n    FileChangeType.Deleted = 3;\r\n})(FileChangeType = exports.FileChangeType || (exports.FileChangeType = {}));\r\nvar WatchKind;\r\n(function (WatchKind) {\r\n    /**\r\n     * Interested in create events.\r\n     */\r\n    WatchKind.Create = 1;\r\n    /**\r\n     * Interested in change events\r\n     */\r\n    WatchKind.Change = 2;\r\n    /**\r\n     * Interested in delete events\r\n     */\r\n    WatchKind.Delete = 4;\r\n})(WatchKind = exports.WatchKind || (exports.WatchKind = {}));\r\n/**\r\n * Diagnostics notification are sent from the server to the client to signal\r\n * results of validation runs.\r\n */\r\nvar PublishDiagnosticsNotification;\r\n(function (PublishDiagnosticsNotification) {\r\n    PublishDiagnosticsNotification.type = new messages_1.ProtocolNotificationType('textDocument/publishDiagnostics');\r\n})(PublishDiagnosticsNotification = exports.PublishDiagnosticsNotification || (exports.PublishDiagnosticsNotification = {}));\r\n/**\r\n * How a completion was triggered\r\n */\r\nvar CompletionTriggerKind;\r\n(function (CompletionTriggerKind) {\r\n    /**\r\n     * Completion was triggered by typing an identifier (24x7 code\r\n     * complete), manual invocation (e.g Ctrl+Space) or via API.\r\n     */\r\n    CompletionTriggerKind.Invoked = 1;\r\n    /**\r\n     * Completion was triggered by a trigger character specified by\r\n     * the `triggerCharacters` properties of the `CompletionRegistrationOptions`.\r\n     */\r\n    CompletionTriggerKind.TriggerCharacter = 2;\r\n    /**\r\n     * Completion was re-triggered as current completion list is incomplete\r\n     */\r\n    CompletionTriggerKind.TriggerForIncompleteCompletions = 3;\r\n})(CompletionTriggerKind = exports.CompletionTriggerKind || (exports.CompletionTriggerKind = {}));\r\n/**\r\n * Request to request completion at a given text document position. The request's\r\n * parameter is of type [TextDocumentPosition](#TextDocumentPosition) the response\r\n * is of type [CompletionItem[]](#CompletionItem) or [CompletionList](#CompletionList)\r\n * or a Thenable that resolves to such.\r\n *\r\n * The request can delay the computation of the [`detail`](#CompletionItem.detail)\r\n * and [`documentation`](#CompletionItem.documentation) properties to the `completionItem/resolve`\r\n * request. However, properties that are needed for the initial sorting and filtering, like `sortText`,\r\n * `filterText`, `insertText`, and `textEdit`, must not be changed during resolve.\r\n */\r\nvar CompletionRequest;\r\n(function (CompletionRequest) {\r\n    CompletionRequest.method = 'textDocument/completion';\r\n    CompletionRequest.type = new messages_1.ProtocolRequestType(CompletionRequest.method);\r\n    /** @deprecated Use CompletionRequest.type */\r\n    CompletionRequest.resultType = new vscode_jsonrpc_1.ProgressType();\r\n})(CompletionRequest = exports.CompletionRequest || (exports.CompletionRequest = {}));\r\n/**\r\n * Request to resolve additional information for a given completion item.The request's\r\n * parameter is of type [CompletionItem](#CompletionItem) the response\r\n * is of type [CompletionItem](#CompletionItem) or a Thenable that resolves to such.\r\n */\r\nvar CompletionResolveRequest;\r\n(function (CompletionResolveRequest) {\r\n    CompletionResolveRequest.method = 'completionItem/resolve';\r\n    CompletionResolveRequest.type = new messages_1.ProtocolRequestType(CompletionResolveRequest.method);\r\n})(CompletionResolveRequest = exports.CompletionResolveRequest || (exports.CompletionResolveRequest = {}));\r\n/**\r\n * Request to request hover information at a given text document position. The request's\r\n * parameter is of type [TextDocumentPosition](#TextDocumentPosition) the response is of\r\n * type [Hover](#Hover) or a Thenable that resolves to such.\r\n */\r\nvar HoverRequest;\r\n(function (HoverRequest) {\r\n    HoverRequest.method = 'textDocument/hover';\r\n    HoverRequest.type = new messages_1.ProtocolRequestType(HoverRequest.method);\r\n})(HoverRequest = exports.HoverRequest || (exports.HoverRequest = {}));\r\n/**\r\n * How a signature help was triggered.\r\n *\r\n * @since 3.15.0\r\n */\r\nvar SignatureHelpTriggerKind;\r\n(function (SignatureHelpTriggerKind) {\r\n    /**\r\n     * Signature help was invoked manually by the user or by a command.\r\n     */\r\n    SignatureHelpTriggerKind.Invoked = 1;\r\n    /**\r\n     * Signature help was triggered by a trigger character.\r\n     */\r\n    SignatureHelpTriggerKind.TriggerCharacter = 2;\r\n    /**\r\n     * Signature help was triggered by the cursor moving or by the document content changing.\r\n     */\r\n    SignatureHelpTriggerKind.ContentChange = 3;\r\n})(SignatureHelpTriggerKind = exports.SignatureHelpTriggerKind || (exports.SignatureHelpTriggerKind = {}));\r\nvar SignatureHelpRequest;\r\n(function (SignatureHelpRequest) {\r\n    SignatureHelpRequest.method = 'textDocument/signatureHelp';\r\n    SignatureHelpRequest.type = new messages_1.ProtocolRequestType(SignatureHelpRequest.method);\r\n})(SignatureHelpRequest = exports.SignatureHelpRequest || (exports.SignatureHelpRequest = {}));\r\n/**\r\n * A request to resolve the definition location of a symbol at a given text\r\n * document position. The request's parameter is of type [TextDocumentPosition]\r\n * (#TextDocumentPosition) the response is of either type [Definition](#Definition)\r\n * or a typed array of [DefinitionLink](#DefinitionLink) or a Thenable that resolves\r\n * to such.\r\n */\r\nvar DefinitionRequest;\r\n(function (DefinitionRequest) {\r\n    DefinitionRequest.method = 'textDocument/definition';\r\n    DefinitionRequest.type = new messages_1.ProtocolRequestType(DefinitionRequest.method);\r\n    /** @deprecated Use DefinitionRequest.type */\r\n    DefinitionRequest.resultType = new vscode_jsonrpc_1.ProgressType();\r\n})(DefinitionRequest = exports.DefinitionRequest || (exports.DefinitionRequest = {}));\r\n/**\r\n * A request to resolve project-wide references for the symbol denoted\r\n * by the given text document position. The request's parameter is of\r\n * type [ReferenceParams](#ReferenceParams) the response is of type\r\n * [Location[]](#Location) or a Thenable that resolves to such.\r\n */\r\nvar ReferencesRequest;\r\n(function (ReferencesRequest) {\r\n    ReferencesRequest.method = 'textDocument/references';\r\n    ReferencesRequest.type = new messages_1.ProtocolRequestType(ReferencesRequest.method);\r\n    /** @deprecated Use ReferencesRequest.type */\r\n    ReferencesRequest.resultType = new vscode_jsonrpc_1.ProgressType();\r\n})(ReferencesRequest = exports.ReferencesRequest || (exports.ReferencesRequest = {}));\r\n/**\r\n * Request to resolve a [DocumentHighlight](#DocumentHighlight) for a given\r\n * text document position. The request's parameter is of type [TextDocumentPosition]\r\n * (#TextDocumentPosition) the request response is of type [DocumentHighlight[]]\r\n * (#DocumentHighlight) or a Thenable that resolves to such.\r\n */\r\nvar DocumentHighlightRequest;\r\n(function (DocumentHighlightRequest) {\r\n    DocumentHighlightRequest.method = 'textDocument/documentHighlight';\r\n    DocumentHighlightRequest.type = new messages_1.ProtocolRequestType(DocumentHighlightRequest.method);\r\n    /** @deprecated Use DocumentHighlightRequest.type */\r\n    DocumentHighlightRequest.resultType = new vscode_jsonrpc_1.ProgressType();\r\n})(DocumentHighlightRequest = exports.DocumentHighlightRequest || (exports.DocumentHighlightRequest = {}));\r\n/**\r\n * A request to list all symbols found in a given text document. The request's\r\n * parameter is of type [TextDocumentIdentifier](#TextDocumentIdentifier) the\r\n * response is of type [SymbolInformation[]](#SymbolInformation) or a Thenable\r\n * that resolves to such.\r\n */\r\nvar DocumentSymbolRequest;\r\n(function (DocumentSymbolRequest) {\r\n    DocumentSymbolRequest.method = 'textDocument/documentSymbol';\r\n    DocumentSymbolRequest.type = new messages_1.ProtocolRequestType(DocumentSymbolRequest.method);\r\n    /** @deprecated Use DocumentSymbolRequest.type */\r\n    DocumentSymbolRequest.resultType = new vscode_jsonrpc_1.ProgressType();\r\n})(DocumentSymbolRequest = exports.DocumentSymbolRequest || (exports.DocumentSymbolRequest = {}));\r\n/**\r\n * A request to provide commands for the given text document and range.\r\n */\r\nvar CodeActionRequest;\r\n(function (CodeActionRequest) {\r\n    CodeActionRequest.method = 'textDocument/codeAction';\r\n    CodeActionRequest.type = new messages_1.ProtocolRequestType(CodeActionRequest.method);\r\n    /** @deprecated Use CodeActionRequest.type */\r\n    CodeActionRequest.resultType = new vscode_jsonrpc_1.ProgressType();\r\n})(CodeActionRequest = exports.CodeActionRequest || (exports.CodeActionRequest = {}));\r\n/**\r\n * A request to list project-wide symbols matching the query string given\r\n * by the [WorkspaceSymbolParams](#WorkspaceSymbolParams). The response is\r\n * of type [SymbolInformation[]](#SymbolInformation) or a Thenable that\r\n * resolves to such.\r\n */\r\nvar WorkspaceSymbolRequest;\r\n(function (WorkspaceSymbolRequest) {\r\n    WorkspaceSymbolRequest.method = 'workspace/symbol';\r\n    WorkspaceSymbolRequest.type = new messages_1.ProtocolRequestType(WorkspaceSymbolRequest.method);\r\n    /** @deprecated Use WorkspaceSymbolRequest.type */\r\n    WorkspaceSymbolRequest.resultType = new vscode_jsonrpc_1.ProgressType();\r\n})(WorkspaceSymbolRequest = exports.WorkspaceSymbolRequest || (exports.WorkspaceSymbolRequest = {}));\r\n/**\r\n * A request to provide code lens for the given text document.\r\n */\r\nvar CodeLensRequest;\r\n(function (CodeLensRequest) {\r\n    CodeLensRequest.type = new messages_1.ProtocolRequestType('textDocument/codeLens');\r\n    /** @deprecated Use CodeLensRequest.type */\r\n    CodeLensRequest.resultType = new vscode_jsonrpc_1.ProgressType();\r\n})(CodeLensRequest = exports.CodeLensRequest || (exports.CodeLensRequest = {}));\r\n/**\r\n * A request to resolve a command for a given code lens.\r\n */\r\nvar CodeLensResolveRequest;\r\n(function (CodeLensResolveRequest) {\r\n    CodeLensResolveRequest.type = new messages_1.ProtocolRequestType('codeLens/resolve');\r\n})(CodeLensResolveRequest = exports.CodeLensResolveRequest || (exports.CodeLensResolveRequest = {}));\r\n/**\r\n * A request to provide document links\r\n */\r\nvar DocumentLinkRequest;\r\n(function (DocumentLinkRequest) {\r\n    DocumentLinkRequest.method = 'textDocument/documentLink';\r\n    DocumentLinkRequest.type = new messages_1.ProtocolRequestType(DocumentLinkRequest.method);\r\n    /** @deprecated Use DocumentLinkRequest.type */\r\n    DocumentLinkRequest.resultType = new vscode_jsonrpc_1.ProgressType();\r\n})(DocumentLinkRequest = exports.DocumentLinkRequest || (exports.DocumentLinkRequest = {}));\r\n/**\r\n * Request to resolve additional information for a given document link. The request's\r\n * parameter is of type [DocumentLink](#DocumentLink) the response\r\n * is of type [DocumentLink](#DocumentLink) or a Thenable that resolves to such.\r\n */\r\nvar DocumentLinkResolveRequest;\r\n(function (DocumentLinkResolveRequest) {\r\n    DocumentLinkResolveRequest.type = new messages_1.ProtocolRequestType('documentLink/resolve');\r\n})(DocumentLinkResolveRequest = exports.DocumentLinkResolveRequest || (exports.DocumentLinkResolveRequest = {}));\r\n/**\r\n * A request to to format a whole document.\r\n */\r\nvar DocumentFormattingRequest;\r\n(function (DocumentFormattingRequest) {\r\n    DocumentFormattingRequest.method = 'textDocument/formatting';\r\n    DocumentFormattingRequest.type = new messages_1.ProtocolRequestType(DocumentFormattingRequest.method);\r\n})(DocumentFormattingRequest = exports.DocumentFormattingRequest || (exports.DocumentFormattingRequest = {}));\r\n/**\r\n * A request to to format a range in a document.\r\n */\r\nvar DocumentRangeFormattingRequest;\r\n(function (DocumentRangeFormattingRequest) {\r\n    DocumentRangeFormattingRequest.method = 'textDocument/rangeFormatting';\r\n    DocumentRangeFormattingRequest.type = new messages_1.ProtocolRequestType(DocumentRangeFormattingRequest.method);\r\n})(DocumentRangeFormattingRequest = exports.DocumentRangeFormattingRequest || (exports.DocumentRangeFormattingRequest = {}));\r\n/**\r\n * A request to format a document on type.\r\n */\r\nvar DocumentOnTypeFormattingRequest;\r\n(function (DocumentOnTypeFormattingRequest) {\r\n    DocumentOnTypeFormattingRequest.method = 'textDocument/onTypeFormatting';\r\n    DocumentOnTypeFormattingRequest.type = new messages_1.ProtocolRequestType(DocumentOnTypeFormattingRequest.method);\r\n})(DocumentOnTypeFormattingRequest = exports.DocumentOnTypeFormattingRequest || (exports.DocumentOnTypeFormattingRequest = {}));\r\n/**\r\n * A request to rename a symbol.\r\n */\r\nvar RenameRequest;\r\n(function (RenameRequest) {\r\n    RenameRequest.method = 'textDocument/rename';\r\n    RenameRequest.type = new messages_1.ProtocolRequestType(RenameRequest.method);\r\n})(RenameRequest = exports.RenameRequest || (exports.RenameRequest = {}));\r\n/**\r\n * A request to test and perform the setup necessary for a rename.\r\n */\r\nvar PrepareRenameRequest;\r\n(function (PrepareRenameRequest) {\r\n    PrepareRenameRequest.method = 'textDocument/prepareRename';\r\n    PrepareRenameRequest.type = new messages_1.ProtocolRequestType(PrepareRenameRequest.method);\r\n})(PrepareRenameRequest = exports.PrepareRenameRequest || (exports.PrepareRenameRequest = {}));\r\n/**\r\n * A request send from the client to the server to execute a command. The request might return\r\n * a workspace edit which the client will apply to the workspace.\r\n */\r\nvar ExecuteCommandRequest;\r\n(function (ExecuteCommandRequest) {\r\n    ExecuteCommandRequest.type = new messages_1.ProtocolRequestType('workspace/executeCommand');\r\n})(ExecuteCommandRequest = exports.ExecuteCommandRequest || (exports.ExecuteCommandRequest = {}));\r\n/**\r\n * A request sent from the server to the client to modified certain resources.\r\n */\r\nvar ApplyWorkspaceEditRequest;\r\n(function (ApplyWorkspaceEditRequest) {\r\n    ApplyWorkspaceEditRequest.type = new messages_1.ProtocolRequestType('workspace/applyEdit');\r\n})(ApplyWorkspaceEditRequest = exports.ApplyWorkspaceEditRequest || (exports.ApplyWorkspaceEditRequest = {}));\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst vscode_jsonrpc_1 = require(\"vscode-jsonrpc\");\r\nconst messages_1 = require(\"./messages\");\r\nvar WorkDoneProgress;\r\n(function (WorkDoneProgress) {\r\n    WorkDoneProgress.type = new vscode_jsonrpc_1.ProgressType();\r\n})(WorkDoneProgress = exports.WorkDoneProgress || (exports.WorkDoneProgress = {}));\r\n/**\r\n * The `window/workDoneProgress/create` request is sent from the server to the client to initiate progress\r\n * reporting from the server.\r\n */\r\nvar WorkDoneProgressCreateRequest;\r\n(function (WorkDoneProgressCreateRequest) {\r\n    WorkDoneProgressCreateRequest.type = new messages_1.ProtocolRequestType('window/workDoneProgress/create');\r\n})(WorkDoneProgressCreateRequest = exports.WorkDoneProgressCreateRequest || (exports.WorkDoneProgressCreateRequest = {}));\r\n/**\r\n * The `window/workDoneProgress/cancel` notification is sent from  the client to the server to cancel a progress\r\n * initiated on the server side.\r\n */\r\nvar WorkDoneProgressCancelNotification;\r\n(function (WorkDoneProgressCancelNotification) {\r\n    WorkDoneProgressCancelNotification.type = new messages_1.ProtocolNotificationType('window/workDoneProgress/cancel');\r\n})(WorkDoneProgressCancelNotification = exports.WorkDoneProgressCancelNotification || (exports.WorkDoneProgressCancelNotification = {}));\r\n","\"use strict\";\r\n/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst vscode_jsonrpc_1 = require(\"vscode-jsonrpc\");\r\nconst messages_1 = require(\"./messages\");\r\n/**\r\n * A request to provide selection ranges in a document. The request's\r\n * parameter is of type [SelectionRangeParams](#SelectionRangeParams), the\r\n * response is of type [SelectionRange[]](#SelectionRange[]) or a Thenable\r\n * that resolves to such.\r\n */\r\nvar SelectionRangeRequest;\r\n(function (SelectionRangeRequest) {\r\n    SelectionRangeRequest.method = 'textDocument/selectionRange';\r\n    SelectionRangeRequest.type = new messages_1.ProtocolRequestType(SelectionRangeRequest.method);\r\n    /** @deprecated  Use SelectionRangeRequest.type */\r\n    SelectionRangeRequest.resultType = new vscode_jsonrpc_1.ProgressType();\r\n})(SelectionRangeRequest = exports.SelectionRangeRequest || (exports.SelectionRangeRequest = {}));\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst messages_1 = require(\"./messages\");\r\n/**\r\n * A set of predefined token types. This set is not fixed\r\n * an clients can specify additional token types via the\r\n * corresponding client capabilities.\r\n *\r\n * @since 3.16.0 - Proposed state\r\n */\r\nvar SemanticTokenTypes;\r\n(function (SemanticTokenTypes) {\r\n    SemanticTokenTypes[\"comment\"] = \"comment\";\r\n    SemanticTokenTypes[\"keyword\"] = \"keyword\";\r\n    SemanticTokenTypes[\"string\"] = \"string\";\r\n    SemanticTokenTypes[\"number\"] = \"number\";\r\n    SemanticTokenTypes[\"regexp\"] = \"regexp\";\r\n    SemanticTokenTypes[\"operator\"] = \"operator\";\r\n    SemanticTokenTypes[\"namespace\"] = \"namespace\";\r\n    SemanticTokenTypes[\"type\"] = \"type\";\r\n    SemanticTokenTypes[\"struct\"] = \"struct\";\r\n    SemanticTokenTypes[\"class\"] = \"class\";\r\n    SemanticTokenTypes[\"interface\"] = \"interface\";\r\n    SemanticTokenTypes[\"enum\"] = \"enum\";\r\n    SemanticTokenTypes[\"typeParameter\"] = \"typeParameter\";\r\n    SemanticTokenTypes[\"function\"] = \"function\";\r\n    SemanticTokenTypes[\"member\"] = \"member\";\r\n    SemanticTokenTypes[\"property\"] = \"property\";\r\n    SemanticTokenTypes[\"macro\"] = \"macro\";\r\n    SemanticTokenTypes[\"variable\"] = \"variable\";\r\n    SemanticTokenTypes[\"parameter\"] = \"parameter\";\r\n    SemanticTokenTypes[\"label\"] = \"label\";\r\n})(SemanticTokenTypes = exports.SemanticTokenTypes || (exports.SemanticTokenTypes = {}));\r\n/**\r\n * A set of predefined token modifiers. This set is not fixed\r\n * an clients can specify additional token types via the\r\n * corresponding client capabilities.\r\n *\r\n * @since 3.16.0 - Proposed state\r\n */\r\nvar SemanticTokenModifiers;\r\n(function (SemanticTokenModifiers) {\r\n    SemanticTokenModifiers[\"documentation\"] = \"documentation\";\r\n    SemanticTokenModifiers[\"declaration\"] = \"declaration\";\r\n    SemanticTokenModifiers[\"definition\"] = \"definition\";\r\n    SemanticTokenModifiers[\"reference\"] = \"reference\";\r\n    SemanticTokenModifiers[\"static\"] = \"static\";\r\n    SemanticTokenModifiers[\"abstract\"] = \"abstract\";\r\n    SemanticTokenModifiers[\"deprecated\"] = \"deprecated\";\r\n    SemanticTokenModifiers[\"async\"] = \"async\";\r\n    SemanticTokenModifiers[\"volatile\"] = \"volatile\";\r\n    SemanticTokenModifiers[\"readonly\"] = \"readonly\";\r\n})(SemanticTokenModifiers = exports.SemanticTokenModifiers || (exports.SemanticTokenModifiers = {}));\r\n/**\r\n * @since 3.16.0 - Proposed state\r\n */\r\nvar SemanticTokens;\r\n(function (SemanticTokens) {\r\n    function is(value) {\r\n        const candidate = value;\r\n        return candidate !== undefined && (candidate.resultId === undefined || typeof candidate.resultId === 'string') &&\r\n            Array.isArray(candidate.data) && (candidate.data.length === 0 || typeof candidate.data[0] === 'number');\r\n    }\r\n    SemanticTokens.is = is;\r\n})(SemanticTokens = exports.SemanticTokens || (exports.SemanticTokens = {}));\r\n/**\r\n * @since 3.16.0 - Proposed state\r\n */\r\nvar SemanticTokensRequest;\r\n(function (SemanticTokensRequest) {\r\n    SemanticTokensRequest.method = 'textDocument/semanticTokens';\r\n    SemanticTokensRequest.type = new messages_1.ProtocolRequestType(SemanticTokensRequest.method);\r\n})(SemanticTokensRequest = exports.SemanticTokensRequest || (exports.SemanticTokensRequest = {}));\r\n/**\r\n * @since 3.16.0 - Proposed state\r\n */\r\nvar SemanticTokensEditsRequest;\r\n(function (SemanticTokensEditsRequest) {\r\n    SemanticTokensEditsRequest.method = 'textDocument/semanticTokens/edits';\r\n    SemanticTokensEditsRequest.type = new messages_1.ProtocolRequestType(SemanticTokensEditsRequest.method);\r\n})(SemanticTokensEditsRequest = exports.SemanticTokensEditsRequest || (exports.SemanticTokensEditsRequest = {}));\r\n/**\r\n * @since 3.16.0 - Proposed state\r\n */\r\nvar SemanticTokensRangeRequest;\r\n(function (SemanticTokensRangeRequest) {\r\n    SemanticTokensRangeRequest.method = 'textDocument/semanticTokens/range';\r\n    SemanticTokensRangeRequest.type = new messages_1.ProtocolRequestType(SemanticTokensRangeRequest.method);\r\n})(SemanticTokensRangeRequest = exports.SemanticTokensRangeRequest || (exports.SemanticTokensRangeRequest = {}));\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst vscode_jsonrpc_1 = require(\"vscode-jsonrpc\");\r\nconst messages_1 = require(\"./messages\");\r\n// @ts-ignore: to avoid inlining LocatioLink as dynamic import\r\nlet __noDynamicImport;\r\n/**\r\n * A request to resolve the type definition locations of a symbol at a given text\r\n * document position. The request's parameter is of type [TextDocumentPositioParams]\r\n * (#TextDocumentPositionParams) the response is of type [Definition](#Definition) or a\r\n * Thenable that resolves to such.\r\n */\r\nvar TypeDefinitionRequest;\r\n(function (TypeDefinitionRequest) {\r\n    TypeDefinitionRequest.method = 'textDocument/typeDefinition';\r\n    TypeDefinitionRequest.type = new messages_1.ProtocolRequestType(TypeDefinitionRequest.method);\r\n    /** @deprecated Use TypeDefinitionRequest.type */\r\n    TypeDefinitionRequest.resultType = new vscode_jsonrpc_1.ProgressType();\r\n})(TypeDefinitionRequest = exports.TypeDefinitionRequest || (exports.TypeDefinitionRequest = {}));\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst messages_1 = require(\"./messages\");\r\n/**\r\n * The `workspace/workspaceFolders` is sent from the server to the client to fetch the open workspace folders.\r\n */\r\nvar WorkspaceFoldersRequest;\r\n(function (WorkspaceFoldersRequest) {\r\n    WorkspaceFoldersRequest.type = new messages_1.ProtocolRequestType0('workspace/workspaceFolders');\r\n})(WorkspaceFoldersRequest = exports.WorkspaceFoldersRequest || (exports.WorkspaceFoldersRequest = {}));\r\n/**\r\n * The `workspace/didChangeWorkspaceFolders` notification is sent from the client to the server when the workspace\r\n * folder configuration changes.\r\n */\r\nvar DidChangeWorkspaceFoldersNotification;\r\n(function (DidChangeWorkspaceFoldersNotification) {\r\n    DidChangeWorkspaceFoldersNotification.type = new messages_1.ProtocolNotificationType('workspace/didChangeWorkspaceFolders');\r\n})(DidChangeWorkspaceFoldersNotification = exports.DidChangeWorkspaceFoldersNotification || (exports.DidChangeWorkspaceFoldersNotification = {}));\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nfunction boolean(value) {\r\n    return value === true || value === false;\r\n}\r\nexports.boolean = boolean;\r\nfunction string(value) {\r\n    return typeof value === 'string' || value instanceof String;\r\n}\r\nexports.string = string;\r\nfunction number(value) {\r\n    return typeof value === 'number' || value instanceof Number;\r\n}\r\nexports.number = number;\r\nfunction error(value) {\r\n    return value instanceof Error;\r\n}\r\nexports.error = error;\r\nfunction func(value) {\r\n    return typeof value === 'function';\r\n}\r\nexports.func = func;\r\nfunction array(value) {\r\n    return Array.isArray(value);\r\n}\r\nexports.array = array;\r\nfunction stringArray(value) {\r\n    return array(value) && value.every(elem => string(elem));\r\n}\r\nexports.stringArray = stringArray;\r\nfunction typedArray(value, check) {\r\n    return Array.isArray(value) && value.every(check);\r\n}\r\nexports.typedArray = typedArray;\r\nfunction objectLiteral(value) {\r\n    // Strictly speaking class instances pass this check as well. Since the LSP\r\n    // doesn't use classes we ignore this for now. If we do we need to add something\r\n    // like this: `Object.getPrototypeOf(Object.getPrototypeOf(x)) === null`\r\n    return value !== null && typeof value === 'object';\r\n}\r\nexports.objectLiteral = objectLiteral;\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst events_1 = require(\"./events\");\r\nconst Is = require(\"./is\");\r\nvar CancellationToken;\r\n(function (CancellationToken) {\r\n    CancellationToken.None = Object.freeze({\r\n        isCancellationRequested: false,\r\n        onCancellationRequested: events_1.Event.None\r\n    });\r\n    CancellationToken.Cancelled = Object.freeze({\r\n        isCancellationRequested: true,\r\n        onCancellationRequested: events_1.Event.None\r\n    });\r\n    function is(value) {\r\n        let candidate = value;\r\n        return candidate && (candidate === CancellationToken.None\r\n            || candidate === CancellationToken.Cancelled\r\n            || (Is.boolean(candidate.isCancellationRequested) && !!candidate.onCancellationRequested));\r\n    }\r\n    CancellationToken.is = is;\r\n})(CancellationToken = exports.CancellationToken || (exports.CancellationToken = {}));\r\nconst shortcutEvent = Object.freeze(function (callback, context) {\r\n    let handle = setTimeout(callback.bind(context), 0);\r\n    return { dispose() { clearTimeout(handle); } };\r\n});\r\nclass MutableToken {\r\n    constructor() {\r\n        this._isCancelled = false;\r\n    }\r\n    cancel() {\r\n        if (!this._isCancelled) {\r\n            this._isCancelled = true;\r\n            if (this._emitter) {\r\n                this._emitter.fire(undefined);\r\n                this.dispose();\r\n            }\r\n        }\r\n    }\r\n    get isCancellationRequested() {\r\n        return this._isCancelled;\r\n    }\r\n    get onCancellationRequested() {\r\n        if (this._isCancelled) {\r\n            return shortcutEvent;\r\n        }\r\n        if (!this._emitter) {\r\n            this._emitter = new events_1.Emitter();\r\n        }\r\n        return this._emitter.event;\r\n    }\r\n    dispose() {\r\n        if (this._emitter) {\r\n            this._emitter.dispose();\r\n            this._emitter = undefined;\r\n        }\r\n    }\r\n}\r\nclass CancellationTokenSource {\r\n    get token() {\r\n        if (!this._token) {\r\n            // be lazy and create the token only when\r\n            // actually needed\r\n            this._token = new MutableToken();\r\n        }\r\n        return this._token;\r\n    }\r\n    cancel() {\r\n        if (!this._token) {\r\n            // save an object by returning the default\r\n            // cancelled token when cancellation happens\r\n            // before someone asks for the token\r\n            this._token = CancellationToken.Cancelled;\r\n        }\r\n        else {\r\n            this._token.cancel();\r\n        }\r\n    }\r\n    dispose() {\r\n        if (!this._token) {\r\n            // ensure to initialize with an empty token if we had none\r\n            this._token = CancellationToken.None;\r\n        }\r\n        else if (this._token instanceof MutableToken) {\r\n            // actually dispose\r\n            this._token.dispose();\r\n        }\r\n    }\r\n}\r\nexports.CancellationTokenSource = CancellationTokenSource;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar Disposable;\r\n(function (Disposable) {\r\n    function create(func) {\r\n        return {\r\n            dispose: func\r\n        };\r\n    }\r\n    Disposable.create = create;\r\n})(Disposable = exports.Disposable || (exports.Disposable = {}));\r\nvar Event;\r\n(function (Event) {\r\n    const _disposable = { dispose() { } };\r\n    Event.None = function () { return _disposable; };\r\n})(Event = exports.Event || (exports.Event = {}));\r\nclass CallbackList {\r\n    add(callback, context = null, bucket) {\r\n        if (!this._callbacks) {\r\n            this._callbacks = [];\r\n            this._contexts = [];\r\n        }\r\n        this._callbacks.push(callback);\r\n        this._contexts.push(context);\r\n        if (Array.isArray(bucket)) {\r\n            bucket.push({ dispose: () => this.remove(callback, context) });\r\n        }\r\n    }\r\n    remove(callback, context = null) {\r\n        if (!this._callbacks) {\r\n            return;\r\n        }\r\n        var foundCallbackWithDifferentContext = false;\r\n        for (var i = 0, len = this._callbacks.length; i < len; i++) {\r\n            if (this._callbacks[i] === callback) {\r\n                if (this._contexts[i] === context) {\r\n                    // callback & context match => remove it\r\n                    this._callbacks.splice(i, 1);\r\n                    this._contexts.splice(i, 1);\r\n                    return;\r\n                }\r\n                else {\r\n                    foundCallbackWithDifferentContext = true;\r\n                }\r\n            }\r\n        }\r\n        if (foundCallbackWithDifferentContext) {\r\n            throw new Error('When adding a listener with a context, you should remove it with the same context');\r\n        }\r\n    }\r\n    invoke(...args) {\r\n        if (!this._callbacks) {\r\n            return [];\r\n        }\r\n        var ret = [], callbacks = this._callbacks.slice(0), contexts = this._contexts.slice(0);\r\n        for (var i = 0, len = callbacks.length; i < len; i++) {\r\n            try {\r\n                ret.push(callbacks[i].apply(contexts[i], args));\r\n            }\r\n            catch (e) {\r\n                // eslint-disable-next-line no-console\r\n                console.error(e);\r\n            }\r\n        }\r\n        return ret;\r\n    }\r\n    isEmpty() {\r\n        return !this._callbacks || this._callbacks.length === 0;\r\n    }\r\n    dispose() {\r\n        this._callbacks = undefined;\r\n        this._contexts = undefined;\r\n    }\r\n}\r\nclass Emitter {\r\n    constructor(_options) {\r\n        this._options = _options;\r\n    }\r\n    /**\r\n     * For the public to allow to subscribe\r\n     * to events from this Emitter\r\n     */\r\n    get event() {\r\n        if (!this._event) {\r\n            this._event = (listener, thisArgs, disposables) => {\r\n                if (!this._callbacks) {\r\n                    this._callbacks = new CallbackList();\r\n                }\r\n                if (this._options && this._options.onFirstListenerAdd && this._callbacks.isEmpty()) {\r\n                    this._options.onFirstListenerAdd(this);\r\n                }\r\n                this._callbacks.add(listener, thisArgs);\r\n                let result;\r\n                result = {\r\n                    dispose: () => {\r\n                        this._callbacks.remove(listener, thisArgs);\r\n                        result.dispose = Emitter._noop;\r\n                        if (this._options && this._options.onLastListenerRemove && this._callbacks.isEmpty()) {\r\n                            this._options.onLastListenerRemove(this);\r\n                        }\r\n                    }\r\n                };\r\n                if (Array.isArray(disposables)) {\r\n                    disposables.push(result);\r\n                }\r\n                return result;\r\n            };\r\n        }\r\n        return this._event;\r\n    }\r\n    /**\r\n     * To be kept private to fire an event to\r\n     * subscribers\r\n     */\r\n    fire(event) {\r\n        if (this._callbacks) {\r\n            this._callbacks.invoke.call(this._callbacks, event);\r\n        }\r\n    }\r\n    dispose() {\r\n        if (this._callbacks) {\r\n            this._callbacks.dispose();\r\n            this._callbacks = undefined;\r\n        }\r\n    }\r\n}\r\nexports.Emitter = Emitter;\r\nEmitter._noop = function () { };\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nfunction boolean(value) {\r\n    return value === true || value === false;\r\n}\r\nexports.boolean = boolean;\r\nfunction string(value) {\r\n    return typeof value === 'string' || value instanceof String;\r\n}\r\nexports.string = string;\r\nfunction number(value) {\r\n    return typeof value === 'number' || value instanceof Number;\r\n}\r\nexports.number = number;\r\nfunction error(value) {\r\n    return value instanceof Error;\r\n}\r\nexports.error = error;\r\nfunction func(value) {\r\n    return typeof value === 'function';\r\n}\r\nexports.func = func;\r\nfunction array(value) {\r\n    return Array.isArray(value);\r\n}\r\nexports.array = array;\r\nfunction stringArray(value) {\r\n    return array(value) && value.every(elem => string(elem));\r\n}\r\nexports.stringArray = stringArray;\r\n","\"use strict\";\r\n/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar Touch;\r\n(function (Touch) {\r\n    Touch.None = 0;\r\n    Touch.First = 1;\r\n    Touch.Last = 2;\r\n})(Touch = exports.Touch || (exports.Touch = {}));\r\nclass LinkedMap {\r\n    constructor() {\r\n        this._map = new Map();\r\n        this._head = undefined;\r\n        this._tail = undefined;\r\n        this._size = 0;\r\n    }\r\n    clear() {\r\n        this._map.clear();\r\n        this._head = undefined;\r\n        this._tail = undefined;\r\n        this._size = 0;\r\n    }\r\n    isEmpty() {\r\n        return !this._head && !this._tail;\r\n    }\r\n    get size() {\r\n        return this._size;\r\n    }\r\n    has(key) {\r\n        return this._map.has(key);\r\n    }\r\n    get(key) {\r\n        const item = this._map.get(key);\r\n        if (!item) {\r\n            return undefined;\r\n        }\r\n        return item.value;\r\n    }\r\n    set(key, value, touch = Touch.None) {\r\n        let item = this._map.get(key);\r\n        if (item) {\r\n            item.value = value;\r\n            if (touch !== Touch.None) {\r\n                this.touch(item, touch);\r\n            }\r\n        }\r\n        else {\r\n            item = { key, value, next: undefined, previous: undefined };\r\n            switch (touch) {\r\n                case Touch.None:\r\n                    this.addItemLast(item);\r\n                    break;\r\n                case Touch.First:\r\n                    this.addItemFirst(item);\r\n                    break;\r\n                case Touch.Last:\r\n                    this.addItemLast(item);\r\n                    break;\r\n                default:\r\n                    this.addItemLast(item);\r\n                    break;\r\n            }\r\n            this._map.set(key, item);\r\n            this._size++;\r\n        }\r\n    }\r\n    delete(key) {\r\n        const item = this._map.get(key);\r\n        if (!item) {\r\n            return false;\r\n        }\r\n        this._map.delete(key);\r\n        this.removeItem(item);\r\n        this._size--;\r\n        return true;\r\n    }\r\n    shift() {\r\n        if (!this._head && !this._tail) {\r\n            return undefined;\r\n        }\r\n        if (!this._head || !this._tail) {\r\n            throw new Error('Invalid list');\r\n        }\r\n        const item = this._head;\r\n        this._map.delete(item.key);\r\n        this.removeItem(item);\r\n        this._size--;\r\n        return item.value;\r\n    }\r\n    forEach(callbackfn, thisArg) {\r\n        let current = this._head;\r\n        while (current) {\r\n            if (thisArg) {\r\n                callbackfn.bind(thisArg)(current.value, current.key, this);\r\n            }\r\n            else {\r\n                callbackfn(current.value, current.key, this);\r\n            }\r\n            current = current.next;\r\n        }\r\n    }\r\n    forEachReverse(callbackfn, thisArg) {\r\n        let current = this._tail;\r\n        while (current) {\r\n            if (thisArg) {\r\n                callbackfn.bind(thisArg)(current.value, current.key, this);\r\n            }\r\n            else {\r\n                callbackfn(current.value, current.key, this);\r\n            }\r\n            current = current.previous;\r\n        }\r\n    }\r\n    values() {\r\n        let result = [];\r\n        let current = this._head;\r\n        while (current) {\r\n            result.push(current.value);\r\n            current = current.next;\r\n        }\r\n        return result;\r\n    }\r\n    keys() {\r\n        let result = [];\r\n        let current = this._head;\r\n        while (current) {\r\n            result.push(current.key);\r\n            current = current.next;\r\n        }\r\n        return result;\r\n    }\r\n    /* JSON RPC run on es5 which has no Symbol.iterator\r\n    public keys(): IterableIterator<K> {\r\n        let current = this._head;\r\n        let iterator: IterableIterator<K> = {\r\n            [Symbol.iterator]() {\r\n                return iterator;\r\n            },\r\n            next():IteratorResult<K> {\r\n                if (current) {\r\n                    let result = { value: current.key, done: false };\r\n                    current = current.next;\r\n                    return result;\r\n                } else {\r\n                    return { value: undefined, done: true };\r\n                }\r\n            }\r\n        };\r\n        return iterator;\r\n    }\r\n\r\n    public values(): IterableIterator<V> {\r\n        let current = this._head;\r\n        let iterator: IterableIterator<V> = {\r\n            [Symbol.iterator]() {\r\n                return iterator;\r\n            },\r\n            next():IteratorResult<V> {\r\n                if (current) {\r\n                    let result = { value: current.value, done: false };\r\n                    current = current.next;\r\n                    return result;\r\n                } else {\r\n                    return { value: undefined, done: true };\r\n                }\r\n            }\r\n        };\r\n        return iterator;\r\n    }\r\n    */\r\n    addItemFirst(item) {\r\n        // First time Insert\r\n        if (!this._head && !this._tail) {\r\n            this._tail = item;\r\n        }\r\n        else if (!this._head) {\r\n            throw new Error('Invalid list');\r\n        }\r\n        else {\r\n            item.next = this._head;\r\n            this._head.previous = item;\r\n        }\r\n        this._head = item;\r\n    }\r\n    addItemLast(item) {\r\n        // First time Insert\r\n        if (!this._head && !this._tail) {\r\n            this._head = item;\r\n        }\r\n        else if (!this._tail) {\r\n            throw new Error('Invalid list');\r\n        }\r\n        else {\r\n            item.previous = this._tail;\r\n            this._tail.next = item;\r\n        }\r\n        this._tail = item;\r\n    }\r\n    removeItem(item) {\r\n        if (item === this._head && item === this._tail) {\r\n            this._head = undefined;\r\n            this._tail = undefined;\r\n        }\r\n        else if (item === this._head) {\r\n            this._head = item.next;\r\n        }\r\n        else if (item === this._tail) {\r\n            this._tail = item.previous;\r\n        }\r\n        else {\r\n            const next = item.next;\r\n            const previous = item.previous;\r\n            if (!next || !previous) {\r\n                throw new Error('Invalid list');\r\n            }\r\n            next.previous = previous;\r\n            previous.next = next;\r\n        }\r\n    }\r\n    touch(item, touch) {\r\n        if (!this._head || !this._tail) {\r\n            throw new Error('Invalid list');\r\n        }\r\n        if ((touch !== Touch.First && touch !== Touch.Last)) {\r\n            return;\r\n        }\r\n        if (touch === Touch.First) {\r\n            if (item === this._head) {\r\n                return;\r\n            }\r\n            const next = item.next;\r\n            const previous = item.previous;\r\n            // Unlink the item\r\n            if (item === this._tail) {\r\n                // previous must be defined since item was not head but is tail\r\n                // So there are more than on item in the map\r\n                previous.next = undefined;\r\n                this._tail = previous;\r\n            }\r\n            else {\r\n                // Both next and previous are not undefined since item was neither head nor tail.\r\n                next.previous = previous;\r\n                previous.next = next;\r\n            }\r\n            // Insert the node at head\r\n            item.previous = undefined;\r\n            item.next = this._head;\r\n            this._head.previous = item;\r\n            this._head = item;\r\n        }\r\n        else if (touch === Touch.Last) {\r\n            if (item === this._tail) {\r\n                return;\r\n            }\r\n            const next = item.next;\r\n            const previous = item.previous;\r\n            // Unlink the item.\r\n            if (item === this._head) {\r\n                // next must be defined since item was not tail but is head\r\n                // So there are more than on item in the map\r\n                next.previous = undefined;\r\n                this._head = next;\r\n            }\r\n            else {\r\n                // Both next and previous are not undefined since item was neither head nor tail.\r\n                next.previous = previous;\r\n                previous.next = next;\r\n            }\r\n            item.next = undefined;\r\n            item.previous = this._tail;\r\n            this._tail.next = item;\r\n            this._tail = item;\r\n        }\r\n    }\r\n}\r\nexports.LinkedMap = LinkedMap;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n/// <reference path=\"../typings/thenable.d.ts\" />\r\n'use strict';\r\nfunction __export(m) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst Is = require(\"./is\");\r\nconst messages_1 = require(\"./messages\");\r\nexports.RequestType = messages_1.RequestType;\r\nexports.RequestType0 = messages_1.RequestType0;\r\nexports.RequestType1 = messages_1.RequestType1;\r\nexports.RequestType2 = messages_1.RequestType2;\r\nexports.RequestType3 = messages_1.RequestType3;\r\nexports.RequestType4 = messages_1.RequestType4;\r\nexports.RequestType5 = messages_1.RequestType5;\r\nexports.RequestType6 = messages_1.RequestType6;\r\nexports.RequestType7 = messages_1.RequestType7;\r\nexports.RequestType8 = messages_1.RequestType8;\r\nexports.RequestType9 = messages_1.RequestType9;\r\nexports.ResponseError = messages_1.ResponseError;\r\nexports.ErrorCodes = messages_1.ErrorCodes;\r\nexports.NotificationType = messages_1.NotificationType;\r\nexports.NotificationType0 = messages_1.NotificationType0;\r\nexports.NotificationType1 = messages_1.NotificationType1;\r\nexports.NotificationType2 = messages_1.NotificationType2;\r\nexports.NotificationType3 = messages_1.NotificationType3;\r\nexports.NotificationType4 = messages_1.NotificationType4;\r\nexports.NotificationType5 = messages_1.NotificationType5;\r\nexports.NotificationType6 = messages_1.NotificationType6;\r\nexports.NotificationType7 = messages_1.NotificationType7;\r\nexports.NotificationType8 = messages_1.NotificationType8;\r\nexports.NotificationType9 = messages_1.NotificationType9;\r\nconst messageReader_1 = require(\"./messageReader\");\r\nexports.MessageReader = messageReader_1.MessageReader;\r\nexports.StreamMessageReader = messageReader_1.StreamMessageReader;\r\nexports.IPCMessageReader = messageReader_1.IPCMessageReader;\r\nexports.SocketMessageReader = messageReader_1.SocketMessageReader;\r\nconst messageWriter_1 = require(\"./messageWriter\");\r\nexports.MessageWriter = messageWriter_1.MessageWriter;\r\nexports.StreamMessageWriter = messageWriter_1.StreamMessageWriter;\r\nexports.IPCMessageWriter = messageWriter_1.IPCMessageWriter;\r\nexports.SocketMessageWriter = messageWriter_1.SocketMessageWriter;\r\nconst events_1 = require(\"./events\");\r\nexports.Disposable = events_1.Disposable;\r\nexports.Event = events_1.Event;\r\nexports.Emitter = events_1.Emitter;\r\nconst cancellation_1 = require(\"./cancellation\");\r\nexports.CancellationTokenSource = cancellation_1.CancellationTokenSource;\r\nexports.CancellationToken = cancellation_1.CancellationToken;\r\nconst linkedMap_1 = require(\"./linkedMap\");\r\n__export(require(\"./pipeSupport\"));\r\n__export(require(\"./socketSupport\"));\r\nvar CancelNotification;\r\n(function (CancelNotification) {\r\n    CancelNotification.type = new messages_1.NotificationType('$/cancelRequest');\r\n})(CancelNotification || (CancelNotification = {}));\r\nvar ProgressNotification;\r\n(function (ProgressNotification) {\r\n    ProgressNotification.type = new messages_1.NotificationType('$/progress');\r\n})(ProgressNotification || (ProgressNotification = {}));\r\nclass ProgressType {\r\n    constructor() {\r\n    }\r\n}\r\nexports.ProgressType = ProgressType;\r\nexports.NullLogger = Object.freeze({\r\n    error: () => { },\r\n    warn: () => { },\r\n    info: () => { },\r\n    log: () => { }\r\n});\r\nvar Trace;\r\n(function (Trace) {\r\n    Trace[Trace[\"Off\"] = 0] = \"Off\";\r\n    Trace[Trace[\"Messages\"] = 1] = \"Messages\";\r\n    Trace[Trace[\"Verbose\"] = 2] = \"Verbose\";\r\n})(Trace = exports.Trace || (exports.Trace = {}));\r\n(function (Trace) {\r\n    function fromString(value) {\r\n        if (!Is.string(value)) {\r\n            return Trace.Off;\r\n        }\r\n        value = value.toLowerCase();\r\n        switch (value) {\r\n            case 'off':\r\n                return Trace.Off;\r\n            case 'messages':\r\n                return Trace.Messages;\r\n            case 'verbose':\r\n                return Trace.Verbose;\r\n            default:\r\n                return Trace.Off;\r\n        }\r\n    }\r\n    Trace.fromString = fromString;\r\n    function toString(value) {\r\n        switch (value) {\r\n            case Trace.Off:\r\n                return 'off';\r\n            case Trace.Messages:\r\n                return 'messages';\r\n            case Trace.Verbose:\r\n                return 'verbose';\r\n            default:\r\n                return 'off';\r\n        }\r\n    }\r\n    Trace.toString = toString;\r\n})(Trace = exports.Trace || (exports.Trace = {}));\r\nvar TraceFormat;\r\n(function (TraceFormat) {\r\n    TraceFormat[\"Text\"] = \"text\";\r\n    TraceFormat[\"JSON\"] = \"json\";\r\n})(TraceFormat = exports.TraceFormat || (exports.TraceFormat = {}));\r\n(function (TraceFormat) {\r\n    function fromString(value) {\r\n        value = value.toLowerCase();\r\n        if (value === 'json') {\r\n            return TraceFormat.JSON;\r\n        }\r\n        else {\r\n            return TraceFormat.Text;\r\n        }\r\n    }\r\n    TraceFormat.fromString = fromString;\r\n})(TraceFormat = exports.TraceFormat || (exports.TraceFormat = {}));\r\nvar SetTraceNotification;\r\n(function (SetTraceNotification) {\r\n    SetTraceNotification.type = new messages_1.NotificationType('$/setTraceNotification');\r\n})(SetTraceNotification = exports.SetTraceNotification || (exports.SetTraceNotification = {}));\r\nvar LogTraceNotification;\r\n(function (LogTraceNotification) {\r\n    LogTraceNotification.type = new messages_1.NotificationType('$/logTraceNotification');\r\n})(LogTraceNotification = exports.LogTraceNotification || (exports.LogTraceNotification = {}));\r\nvar ConnectionErrors;\r\n(function (ConnectionErrors) {\r\n    /**\r\n     * The connection is closed.\r\n     */\r\n    ConnectionErrors[ConnectionErrors[\"Closed\"] = 1] = \"Closed\";\r\n    /**\r\n     * The connection got disposed.\r\n     */\r\n    ConnectionErrors[ConnectionErrors[\"Disposed\"] = 2] = \"Disposed\";\r\n    /**\r\n     * The connection is already in listening mode.\r\n     */\r\n    ConnectionErrors[ConnectionErrors[\"AlreadyListening\"] = 3] = \"AlreadyListening\";\r\n})(ConnectionErrors = exports.ConnectionErrors || (exports.ConnectionErrors = {}));\r\nclass ConnectionError extends Error {\r\n    constructor(code, message) {\r\n        super(message);\r\n        this.code = code;\r\n        Object.setPrototypeOf(this, ConnectionError.prototype);\r\n    }\r\n}\r\nexports.ConnectionError = ConnectionError;\r\nvar ConnectionStrategy;\r\n(function (ConnectionStrategy) {\r\n    function is(value) {\r\n        let candidate = value;\r\n        return candidate && Is.func(candidate.cancelUndispatched);\r\n    }\r\n    ConnectionStrategy.is = is;\r\n})(ConnectionStrategy = exports.ConnectionStrategy || (exports.ConnectionStrategy = {}));\r\nvar ConnectionState;\r\n(function (ConnectionState) {\r\n    ConnectionState[ConnectionState[\"New\"] = 1] = \"New\";\r\n    ConnectionState[ConnectionState[\"Listening\"] = 2] = \"Listening\";\r\n    ConnectionState[ConnectionState[\"Closed\"] = 3] = \"Closed\";\r\n    ConnectionState[ConnectionState[\"Disposed\"] = 4] = \"Disposed\";\r\n})(ConnectionState || (ConnectionState = {}));\r\nfunction _createMessageConnection(messageReader, messageWriter, logger, strategy) {\r\n    let sequenceNumber = 0;\r\n    let notificationSquenceNumber = 0;\r\n    let unknownResponseSquenceNumber = 0;\r\n    const version = '2.0';\r\n    let starRequestHandler = undefined;\r\n    let requestHandlers = Object.create(null);\r\n    let starNotificationHandler = undefined;\r\n    let notificationHandlers = Object.create(null);\r\n    let progressHandlers = new Map();\r\n    let timer;\r\n    let messageQueue = new linkedMap_1.LinkedMap();\r\n    let responsePromises = Object.create(null);\r\n    let requestTokens = Object.create(null);\r\n    let trace = Trace.Off;\r\n    let traceFormat = TraceFormat.Text;\r\n    let tracer;\r\n    let state = ConnectionState.New;\r\n    let errorEmitter = new events_1.Emitter();\r\n    let closeEmitter = new events_1.Emitter();\r\n    let unhandledNotificationEmitter = new events_1.Emitter();\r\n    let unhandledProgressEmitter = new events_1.Emitter();\r\n    let disposeEmitter = new events_1.Emitter();\r\n    function createRequestQueueKey(id) {\r\n        return 'req-' + id.toString();\r\n    }\r\n    function createResponseQueueKey(id) {\r\n        if (id === null) {\r\n            return 'res-unknown-' + (++unknownResponseSquenceNumber).toString();\r\n        }\r\n        else {\r\n            return 'res-' + id.toString();\r\n        }\r\n    }\r\n    function createNotificationQueueKey() {\r\n        return 'not-' + (++notificationSquenceNumber).toString();\r\n    }\r\n    function addMessageToQueue(queue, message) {\r\n        if (messages_1.isRequestMessage(message)) {\r\n            queue.set(createRequestQueueKey(message.id), message);\r\n        }\r\n        else if (messages_1.isResponseMessage(message)) {\r\n            queue.set(createResponseQueueKey(message.id), message);\r\n        }\r\n        else {\r\n            queue.set(createNotificationQueueKey(), message);\r\n        }\r\n    }\r\n    function cancelUndispatched(_message) {\r\n        return undefined;\r\n    }\r\n    function isListening() {\r\n        return state === ConnectionState.Listening;\r\n    }\r\n    function isClosed() {\r\n        return state === ConnectionState.Closed;\r\n    }\r\n    function isDisposed() {\r\n        return state === ConnectionState.Disposed;\r\n    }\r\n    function closeHandler() {\r\n        if (state === ConnectionState.New || state === ConnectionState.Listening) {\r\n            state = ConnectionState.Closed;\r\n            closeEmitter.fire(undefined);\r\n        }\r\n        // If the connection is disposed don't sent close events.\r\n    }\r\n    function readErrorHandler(error) {\r\n        errorEmitter.fire([error, undefined, undefined]);\r\n    }\r\n    function writeErrorHandler(data) {\r\n        errorEmitter.fire(data);\r\n    }\r\n    messageReader.onClose(closeHandler);\r\n    messageReader.onError(readErrorHandler);\r\n    messageWriter.onClose(closeHandler);\r\n    messageWriter.onError(writeErrorHandler);\r\n    function triggerMessageQueue() {\r\n        if (timer || messageQueue.size === 0) {\r\n            return;\r\n        }\r\n        timer = setImmediate(() => {\r\n            timer = undefined;\r\n            processMessageQueue();\r\n        });\r\n    }\r\n    function processMessageQueue() {\r\n        if (messageQueue.size === 0) {\r\n            return;\r\n        }\r\n        let message = messageQueue.shift();\r\n        try {\r\n            if (messages_1.isRequestMessage(message)) {\r\n                handleRequest(message);\r\n            }\r\n            else if (messages_1.isNotificationMessage(message)) {\r\n                handleNotification(message);\r\n            }\r\n            else if (messages_1.isResponseMessage(message)) {\r\n                handleResponse(message);\r\n            }\r\n            else {\r\n                handleInvalidMessage(message);\r\n            }\r\n        }\r\n        finally {\r\n            triggerMessageQueue();\r\n        }\r\n    }\r\n    let callback = (message) => {\r\n        try {\r\n            // We have received a cancellation message. Check if the message is still in the queue\r\n            // and cancel it if allowed to do so.\r\n            if (messages_1.isNotificationMessage(message) && message.method === CancelNotification.type.method) {\r\n                let key = createRequestQueueKey(message.params.id);\r\n                let toCancel = messageQueue.get(key);\r\n                if (messages_1.isRequestMessage(toCancel)) {\r\n                    let response = strategy && strategy.cancelUndispatched ? strategy.cancelUndispatched(toCancel, cancelUndispatched) : cancelUndispatched(toCancel);\r\n                    if (response && (response.error !== void 0 || response.result !== void 0)) {\r\n                        messageQueue.delete(key);\r\n                        response.id = toCancel.id;\r\n                        traceSendingResponse(response, message.method, Date.now());\r\n                        messageWriter.write(response);\r\n                        return;\r\n                    }\r\n                }\r\n            }\r\n            addMessageToQueue(messageQueue, message);\r\n        }\r\n        finally {\r\n            triggerMessageQueue();\r\n        }\r\n    };\r\n    function handleRequest(requestMessage) {\r\n        if (isDisposed()) {\r\n            // we return here silently since we fired an event when the\r\n            // connection got disposed.\r\n            return;\r\n        }\r\n        function reply(resultOrError, method, startTime) {\r\n            let message = {\r\n                jsonrpc: version,\r\n                id: requestMessage.id\r\n            };\r\n            if (resultOrError instanceof messages_1.ResponseError) {\r\n                message.error = resultOrError.toJson();\r\n            }\r\n            else {\r\n                message.result = resultOrError === void 0 ? null : resultOrError;\r\n            }\r\n            traceSendingResponse(message, method, startTime);\r\n            messageWriter.write(message);\r\n        }\r\n        function replyError(error, method, startTime) {\r\n            let message = {\r\n                jsonrpc: version,\r\n                id: requestMessage.id,\r\n                error: error.toJson()\r\n            };\r\n            traceSendingResponse(message, method, startTime);\r\n            messageWriter.write(message);\r\n        }\r\n        function replySuccess(result, method, startTime) {\r\n            // The JSON RPC defines that a response must either have a result or an error\r\n            // So we can't treat undefined as a valid response result.\r\n            if (result === void 0) {\r\n                result = null;\r\n            }\r\n            let message = {\r\n                jsonrpc: version,\r\n                id: requestMessage.id,\r\n                result: result\r\n            };\r\n            traceSendingResponse(message, method, startTime);\r\n            messageWriter.write(message);\r\n        }\r\n        traceReceivedRequest(requestMessage);\r\n        let element = requestHandlers[requestMessage.method];\r\n        let type;\r\n        let requestHandler;\r\n        if (element) {\r\n            type = element.type;\r\n            requestHandler = element.handler;\r\n        }\r\n        let startTime = Date.now();\r\n        if (requestHandler || starRequestHandler) {\r\n            let cancellationSource = new cancellation_1.CancellationTokenSource();\r\n            let tokenKey = String(requestMessage.id);\r\n            requestTokens[tokenKey] = cancellationSource;\r\n            try {\r\n                let handlerResult;\r\n                if (requestMessage.params === void 0 || (type !== void 0 && type.numberOfParams === 0)) {\r\n                    handlerResult = requestHandler\r\n                        ? requestHandler(cancellationSource.token)\r\n                        : starRequestHandler(requestMessage.method, cancellationSource.token);\r\n                }\r\n                else if (Is.array(requestMessage.params) && (type === void 0 || type.numberOfParams > 1)) {\r\n                    handlerResult = requestHandler\r\n                        ? requestHandler(...requestMessage.params, cancellationSource.token)\r\n                        : starRequestHandler(requestMessage.method, ...requestMessage.params, cancellationSource.token);\r\n                }\r\n                else {\r\n                    handlerResult = requestHandler\r\n                        ? requestHandler(requestMessage.params, cancellationSource.token)\r\n                        : starRequestHandler(requestMessage.method, requestMessage.params, cancellationSource.token);\r\n                }\r\n                let promise = handlerResult;\r\n                if (!handlerResult) {\r\n                    delete requestTokens[tokenKey];\r\n                    replySuccess(handlerResult, requestMessage.method, startTime);\r\n                }\r\n                else if (promise.then) {\r\n                    promise.then((resultOrError) => {\r\n                        delete requestTokens[tokenKey];\r\n                        reply(resultOrError, requestMessage.method, startTime);\r\n                    }, error => {\r\n                        delete requestTokens[tokenKey];\r\n                        if (error instanceof messages_1.ResponseError) {\r\n                            replyError(error, requestMessage.method, startTime);\r\n                        }\r\n                        else if (error && Is.string(error.message)) {\r\n                            replyError(new messages_1.ResponseError(messages_1.ErrorCodes.InternalError, `Request ${requestMessage.method} failed with message: ${error.message}`), requestMessage.method, startTime);\r\n                        }\r\n                        else {\r\n                            replyError(new messages_1.ResponseError(messages_1.ErrorCodes.InternalError, `Request ${requestMessage.method} failed unexpectedly without providing any details.`), requestMessage.method, startTime);\r\n                        }\r\n                    });\r\n                }\r\n                else {\r\n                    delete requestTokens[tokenKey];\r\n                    reply(handlerResult, requestMessage.method, startTime);\r\n                }\r\n            }\r\n            catch (error) {\r\n                delete requestTokens[tokenKey];\r\n                if (error instanceof messages_1.ResponseError) {\r\n                    reply(error, requestMessage.method, startTime);\r\n                }\r\n                else if (error && Is.string(error.message)) {\r\n                    replyError(new messages_1.ResponseError(messages_1.ErrorCodes.InternalError, `Request ${requestMessage.method} failed with message: ${error.message}`), requestMessage.method, startTime);\r\n                }\r\n                else {\r\n                    replyError(new messages_1.ResponseError(messages_1.ErrorCodes.InternalError, `Request ${requestMessage.method} failed unexpectedly without providing any details.`), requestMessage.method, startTime);\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            replyError(new messages_1.ResponseError(messages_1.ErrorCodes.MethodNotFound, `Unhandled method ${requestMessage.method}`), requestMessage.method, startTime);\r\n        }\r\n    }\r\n    function handleResponse(responseMessage) {\r\n        if (isDisposed()) {\r\n            // See handle request.\r\n            return;\r\n        }\r\n        if (responseMessage.id === null) {\r\n            if (responseMessage.error) {\r\n                logger.error(`Received response message without id: Error is: \\n${JSON.stringify(responseMessage.error, undefined, 4)}`);\r\n            }\r\n            else {\r\n                logger.error(`Received response message without id. No further error information provided.`);\r\n            }\r\n        }\r\n        else {\r\n            let key = String(responseMessage.id);\r\n            let responsePromise = responsePromises[key];\r\n            traceReceivedResponse(responseMessage, responsePromise);\r\n            if (responsePromise) {\r\n                delete responsePromises[key];\r\n                try {\r\n                    if (responseMessage.error) {\r\n                        let error = responseMessage.error;\r\n                        responsePromise.reject(new messages_1.ResponseError(error.code, error.message, error.data));\r\n                    }\r\n                    else if (responseMessage.result !== void 0) {\r\n                        responsePromise.resolve(responseMessage.result);\r\n                    }\r\n                    else {\r\n                        throw new Error('Should never happen.');\r\n                    }\r\n                }\r\n                catch (error) {\r\n                    if (error.message) {\r\n                        logger.error(`Response handler '${responsePromise.method}' failed with message: ${error.message}`);\r\n                    }\r\n                    else {\r\n                        logger.error(`Response handler '${responsePromise.method}' failed unexpectedly.`);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n    function handleNotification(message) {\r\n        if (isDisposed()) {\r\n            // See handle request.\r\n            return;\r\n        }\r\n        let type = undefined;\r\n        let notificationHandler;\r\n        if (message.method === CancelNotification.type.method) {\r\n            notificationHandler = (params) => {\r\n                let id = params.id;\r\n                let source = requestTokens[String(id)];\r\n                if (source) {\r\n                    source.cancel();\r\n                }\r\n            };\r\n        }\r\n        else {\r\n            let element = notificationHandlers[message.method];\r\n            if (element) {\r\n                notificationHandler = element.handler;\r\n                type = element.type;\r\n            }\r\n        }\r\n        if (notificationHandler || starNotificationHandler) {\r\n            try {\r\n                traceReceivedNotification(message);\r\n                if (message.params === void 0 || (type !== void 0 && type.numberOfParams === 0)) {\r\n                    notificationHandler ? notificationHandler() : starNotificationHandler(message.method);\r\n                }\r\n                else if (Is.array(message.params) && (type === void 0 || type.numberOfParams > 1)) {\r\n                    notificationHandler ? notificationHandler(...message.params) : starNotificationHandler(message.method, ...message.params);\r\n                }\r\n                else {\r\n                    notificationHandler ? notificationHandler(message.params) : starNotificationHandler(message.method, message.params);\r\n                }\r\n            }\r\n            catch (error) {\r\n                if (error.message) {\r\n                    logger.error(`Notification handler '${message.method}' failed with message: ${error.message}`);\r\n                }\r\n                else {\r\n                    logger.error(`Notification handler '${message.method}' failed unexpectedly.`);\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            unhandledNotificationEmitter.fire(message);\r\n        }\r\n    }\r\n    function handleInvalidMessage(message) {\r\n        if (!message) {\r\n            logger.error('Received empty message.');\r\n            return;\r\n        }\r\n        logger.error(`Received message which is neither a response nor a notification message:\\n${JSON.stringify(message, null, 4)}`);\r\n        // Test whether we find an id to reject the promise\r\n        let responseMessage = message;\r\n        if (Is.string(responseMessage.id) || Is.number(responseMessage.id)) {\r\n            let key = String(responseMessage.id);\r\n            let responseHandler = responsePromises[key];\r\n            if (responseHandler) {\r\n                responseHandler.reject(new Error('The received response has neither a result nor an error property.'));\r\n            }\r\n        }\r\n    }\r\n    function traceSendingRequest(message) {\r\n        if (trace === Trace.Off || !tracer) {\r\n            return;\r\n        }\r\n        if (traceFormat === TraceFormat.Text) {\r\n            let data = undefined;\r\n            if (trace === Trace.Verbose && message.params) {\r\n                data = `Params: ${JSON.stringify(message.params, null, 4)}\\n\\n`;\r\n            }\r\n            tracer.log(`Sending request '${message.method} - (${message.id})'.`, data);\r\n        }\r\n        else {\r\n            logLSPMessage('send-request', message);\r\n        }\r\n    }\r\n    function traceSendingNotification(message) {\r\n        if (trace === Trace.Off || !tracer) {\r\n            return;\r\n        }\r\n        if (traceFormat === TraceFormat.Text) {\r\n            let data = undefined;\r\n            if (trace === Trace.Verbose) {\r\n                if (message.params) {\r\n                    data = `Params: ${JSON.stringify(message.params, null, 4)}\\n\\n`;\r\n                }\r\n                else {\r\n                    data = 'No parameters provided.\\n\\n';\r\n                }\r\n            }\r\n            tracer.log(`Sending notification '${message.method}'.`, data);\r\n        }\r\n        else {\r\n            logLSPMessage('send-notification', message);\r\n        }\r\n    }\r\n    function traceSendingResponse(message, method, startTime) {\r\n        if (trace === Trace.Off || !tracer) {\r\n            return;\r\n        }\r\n        if (traceFormat === TraceFormat.Text) {\r\n            let data = undefined;\r\n            if (trace === Trace.Verbose) {\r\n                if (message.error && message.error.data) {\r\n                    data = `Error data: ${JSON.stringify(message.error.data, null, 4)}\\n\\n`;\r\n                }\r\n                else {\r\n                    if (message.result) {\r\n                        data = `Result: ${JSON.stringify(message.result, null, 4)}\\n\\n`;\r\n                    }\r\n                    else if (message.error === void 0) {\r\n                        data = 'No result returned.\\n\\n';\r\n                    }\r\n                }\r\n            }\r\n            tracer.log(`Sending response '${method} - (${message.id})'. Processing request took ${Date.now() - startTime}ms`, data);\r\n        }\r\n        else {\r\n            logLSPMessage('send-response', message);\r\n        }\r\n    }\r\n    function traceReceivedRequest(message) {\r\n        if (trace === Trace.Off || !tracer) {\r\n            return;\r\n        }\r\n        if (traceFormat === TraceFormat.Text) {\r\n            let data = undefined;\r\n            if (trace === Trace.Verbose && message.params) {\r\n                data = `Params: ${JSON.stringify(message.params, null, 4)}\\n\\n`;\r\n            }\r\n            tracer.log(`Received request '${message.method} - (${message.id})'.`, data);\r\n        }\r\n        else {\r\n            logLSPMessage('receive-request', message);\r\n        }\r\n    }\r\n    function traceReceivedNotification(message) {\r\n        if (trace === Trace.Off || !tracer || message.method === LogTraceNotification.type.method) {\r\n            return;\r\n        }\r\n        if (traceFormat === TraceFormat.Text) {\r\n            let data = undefined;\r\n            if (trace === Trace.Verbose) {\r\n                if (message.params) {\r\n                    data = `Params: ${JSON.stringify(message.params, null, 4)}\\n\\n`;\r\n                }\r\n                else {\r\n                    data = 'No parameters provided.\\n\\n';\r\n                }\r\n            }\r\n            tracer.log(`Received notification '${message.method}'.`, data);\r\n        }\r\n        else {\r\n            logLSPMessage('receive-notification', message);\r\n        }\r\n    }\r\n    function traceReceivedResponse(message, responsePromise) {\r\n        if (trace === Trace.Off || !tracer) {\r\n            return;\r\n        }\r\n        if (traceFormat === TraceFormat.Text) {\r\n            let data = undefined;\r\n            if (trace === Trace.Verbose) {\r\n                if (message.error && message.error.data) {\r\n                    data = `Error data: ${JSON.stringify(message.error.data, null, 4)}\\n\\n`;\r\n                }\r\n                else {\r\n                    if (message.result) {\r\n                        data = `Result: ${JSON.stringify(message.result, null, 4)}\\n\\n`;\r\n                    }\r\n                    else if (message.error === void 0) {\r\n                        data = 'No result returned.\\n\\n';\r\n                    }\r\n                }\r\n            }\r\n            if (responsePromise) {\r\n                let error = message.error ? ` Request failed: ${message.error.message} (${message.error.code}).` : '';\r\n                tracer.log(`Received response '${responsePromise.method} - (${message.id})' in ${Date.now() - responsePromise.timerStart}ms.${error}`, data);\r\n            }\r\n            else {\r\n                tracer.log(`Received response ${message.id} without active response promise.`, data);\r\n            }\r\n        }\r\n        else {\r\n            logLSPMessage('receive-response', message);\r\n        }\r\n    }\r\n    function logLSPMessage(type, message) {\r\n        if (!tracer || trace === Trace.Off) {\r\n            return;\r\n        }\r\n        const lspMessage = {\r\n            isLSPMessage: true,\r\n            type,\r\n            message,\r\n            timestamp: Date.now()\r\n        };\r\n        tracer.log(lspMessage);\r\n    }\r\n    function throwIfClosedOrDisposed() {\r\n        if (isClosed()) {\r\n            throw new ConnectionError(ConnectionErrors.Closed, 'Connection is closed.');\r\n        }\r\n        if (isDisposed()) {\r\n            throw new ConnectionError(ConnectionErrors.Disposed, 'Connection is disposed.');\r\n        }\r\n    }\r\n    function throwIfListening() {\r\n        if (isListening()) {\r\n            throw new ConnectionError(ConnectionErrors.AlreadyListening, 'Connection is already listening');\r\n        }\r\n    }\r\n    function throwIfNotListening() {\r\n        if (!isListening()) {\r\n            throw new Error('Call listen() first.');\r\n        }\r\n    }\r\n    function undefinedToNull(param) {\r\n        if (param === void 0) {\r\n            return null;\r\n        }\r\n        else {\r\n            return param;\r\n        }\r\n    }\r\n    function computeMessageParams(type, params) {\r\n        let result;\r\n        let numberOfParams = type.numberOfParams;\r\n        switch (numberOfParams) {\r\n            case 0:\r\n                result = null;\r\n                break;\r\n            case 1:\r\n                result = undefinedToNull(params[0]);\r\n                break;\r\n            default:\r\n                result = [];\r\n                for (let i = 0; i < params.length && i < numberOfParams; i++) {\r\n                    result.push(undefinedToNull(params[i]));\r\n                }\r\n                if (params.length < numberOfParams) {\r\n                    for (let i = params.length; i < numberOfParams; i++) {\r\n                        result.push(null);\r\n                    }\r\n                }\r\n                break;\r\n        }\r\n        return result;\r\n    }\r\n    let connection = {\r\n        sendNotification: (type, ...params) => {\r\n            throwIfClosedOrDisposed();\r\n            let method;\r\n            let messageParams;\r\n            if (Is.string(type)) {\r\n                method = type;\r\n                switch (params.length) {\r\n                    case 0:\r\n                        messageParams = null;\r\n                        break;\r\n                    case 1:\r\n                        messageParams = params[0];\r\n                        break;\r\n                    default:\r\n                        messageParams = params;\r\n                        break;\r\n                }\r\n            }\r\n            else {\r\n                method = type.method;\r\n                messageParams = computeMessageParams(type, params);\r\n            }\r\n            let notificationMessage = {\r\n                jsonrpc: version,\r\n                method: method,\r\n                params: messageParams\r\n            };\r\n            traceSendingNotification(notificationMessage);\r\n            messageWriter.write(notificationMessage);\r\n        },\r\n        onNotification: (type, handler) => {\r\n            throwIfClosedOrDisposed();\r\n            if (Is.func(type)) {\r\n                starNotificationHandler = type;\r\n            }\r\n            else if (handler) {\r\n                if (Is.string(type)) {\r\n                    notificationHandlers[type] = { type: undefined, handler };\r\n                }\r\n                else {\r\n                    notificationHandlers[type.method] = { type, handler };\r\n                }\r\n            }\r\n        },\r\n        onProgress: (_type, token, handler) => {\r\n            if (progressHandlers.has(token)) {\r\n                throw new Error(`Progress handler for token ${token} already registered`);\r\n            }\r\n            progressHandlers.set(token, handler);\r\n            return {\r\n                dispose: () => {\r\n                    progressHandlers.delete(token);\r\n                }\r\n            };\r\n        },\r\n        sendProgress: (_type, token, value) => {\r\n            connection.sendNotification(ProgressNotification.type, { token, value });\r\n        },\r\n        onUnhandledProgress: unhandledProgressEmitter.event,\r\n        sendRequest: (type, ...params) => {\r\n            throwIfClosedOrDisposed();\r\n            throwIfNotListening();\r\n            let method;\r\n            let messageParams;\r\n            let token = undefined;\r\n            if (Is.string(type)) {\r\n                method = type;\r\n                switch (params.length) {\r\n                    case 0:\r\n                        messageParams = null;\r\n                        break;\r\n                    case 1:\r\n                        // The cancellation token is optional so it can also be undefined.\r\n                        if (cancellation_1.CancellationToken.is(params[0])) {\r\n                            messageParams = null;\r\n                            token = params[0];\r\n                        }\r\n                        else {\r\n                            messageParams = undefinedToNull(params[0]);\r\n                        }\r\n                        break;\r\n                    default:\r\n                        const last = params.length - 1;\r\n                        if (cancellation_1.CancellationToken.is(params[last])) {\r\n                            token = params[last];\r\n                            if (params.length === 2) {\r\n                                messageParams = undefinedToNull(params[0]);\r\n                            }\r\n                            else {\r\n                                messageParams = params.slice(0, last).map(value => undefinedToNull(value));\r\n                            }\r\n                        }\r\n                        else {\r\n                            messageParams = params.map(value => undefinedToNull(value));\r\n                        }\r\n                        break;\r\n                }\r\n            }\r\n            else {\r\n                method = type.method;\r\n                messageParams = computeMessageParams(type, params);\r\n                let numberOfParams = type.numberOfParams;\r\n                token = cancellation_1.CancellationToken.is(params[numberOfParams]) ? params[numberOfParams] : undefined;\r\n            }\r\n            let id = sequenceNumber++;\r\n            let result = new Promise((resolve, reject) => {\r\n                let requestMessage = {\r\n                    jsonrpc: version,\r\n                    id: id,\r\n                    method: method,\r\n                    params: messageParams\r\n                };\r\n                let responsePromise = { method: method, timerStart: Date.now(), resolve, reject };\r\n                traceSendingRequest(requestMessage);\r\n                try {\r\n                    messageWriter.write(requestMessage);\r\n                }\r\n                catch (e) {\r\n                    // Writing the message failed. So we need to reject the promise.\r\n                    responsePromise.reject(new messages_1.ResponseError(messages_1.ErrorCodes.MessageWriteError, e.message ? e.message : 'Unknown reason'));\r\n                    responsePromise = null;\r\n                }\r\n                if (responsePromise) {\r\n                    responsePromises[String(id)] = responsePromise;\r\n                }\r\n            });\r\n            if (token) {\r\n                token.onCancellationRequested(() => {\r\n                    connection.sendNotification(CancelNotification.type, { id });\r\n                });\r\n            }\r\n            return result;\r\n        },\r\n        onRequest: (type, handler) => {\r\n            throwIfClosedOrDisposed();\r\n            if (Is.func(type)) {\r\n                starRequestHandler = type;\r\n            }\r\n            else if (handler) {\r\n                if (Is.string(type)) {\r\n                    requestHandlers[type] = { type: undefined, handler };\r\n                }\r\n                else {\r\n                    requestHandlers[type.method] = { type, handler };\r\n                }\r\n            }\r\n        },\r\n        trace: (_value, _tracer, sendNotificationOrTraceOptions) => {\r\n            let _sendNotification = false;\r\n            let _traceFormat = TraceFormat.Text;\r\n            if (sendNotificationOrTraceOptions !== void 0) {\r\n                if (Is.boolean(sendNotificationOrTraceOptions)) {\r\n                    _sendNotification = sendNotificationOrTraceOptions;\r\n                }\r\n                else {\r\n                    _sendNotification = sendNotificationOrTraceOptions.sendNotification || false;\r\n                    _traceFormat = sendNotificationOrTraceOptions.traceFormat || TraceFormat.Text;\r\n                }\r\n            }\r\n            trace = _value;\r\n            traceFormat = _traceFormat;\r\n            if (trace === Trace.Off) {\r\n                tracer = undefined;\r\n            }\r\n            else {\r\n                tracer = _tracer;\r\n            }\r\n            if (_sendNotification && !isClosed() && !isDisposed()) {\r\n                connection.sendNotification(SetTraceNotification.type, { value: Trace.toString(_value) });\r\n            }\r\n        },\r\n        onError: errorEmitter.event,\r\n        onClose: closeEmitter.event,\r\n        onUnhandledNotification: unhandledNotificationEmitter.event,\r\n        onDispose: disposeEmitter.event,\r\n        dispose: () => {\r\n            if (isDisposed()) {\r\n                return;\r\n            }\r\n            state = ConnectionState.Disposed;\r\n            disposeEmitter.fire(undefined);\r\n            let error = new Error('Connection got disposed.');\r\n            Object.keys(responsePromises).forEach((key) => {\r\n                responsePromises[key].reject(error);\r\n            });\r\n            responsePromises = Object.create(null);\r\n            requestTokens = Object.create(null);\r\n            messageQueue = new linkedMap_1.LinkedMap();\r\n            // Test for backwards compatibility\r\n            if (Is.func(messageWriter.dispose)) {\r\n                messageWriter.dispose();\r\n            }\r\n            if (Is.func(messageReader.dispose)) {\r\n                messageReader.dispose();\r\n            }\r\n        },\r\n        listen: () => {\r\n            throwIfClosedOrDisposed();\r\n            throwIfListening();\r\n            state = ConnectionState.Listening;\r\n            messageReader.listen(callback);\r\n        },\r\n        inspect: () => {\r\n            // eslint-disable-next-line no-console\r\n            console.log('inspect');\r\n        }\r\n    };\r\n    connection.onNotification(LogTraceNotification.type, (params) => {\r\n        if (trace === Trace.Off || !tracer) {\r\n            return;\r\n        }\r\n        tracer.log(params.message, trace === Trace.Verbose ? params.verbose : undefined);\r\n    });\r\n    connection.onNotification(ProgressNotification.type, (params) => {\r\n        const handler = progressHandlers.get(params.token);\r\n        if (handler) {\r\n            handler(params.value);\r\n        }\r\n        else {\r\n            unhandledProgressEmitter.fire(params);\r\n        }\r\n    });\r\n    return connection;\r\n}\r\nfunction isMessageReader(value) {\r\n    return value.listen !== void 0 && value.read === void 0;\r\n}\r\nfunction isMessageWriter(value) {\r\n    return value.write !== void 0 && value.end === void 0;\r\n}\r\nfunction createMessageConnection(input, output, logger, strategy) {\r\n    if (!logger) {\r\n        logger = exports.NullLogger;\r\n    }\r\n    let reader = isMessageReader(input) ? input : new messageReader_1.StreamMessageReader(input);\r\n    let writer = isMessageWriter(output) ? output : new messageWriter_1.StreamMessageWriter(output);\r\n    return _createMessageConnection(reader, writer, logger, strategy);\r\n}\r\nexports.createMessageConnection = createMessageConnection;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst events_1 = require(\"./events\");\r\nconst Is = require(\"./is\");\r\nlet DefaultSize = 8192;\r\nlet CR = Buffer.from('\\r', 'ascii')[0];\r\nlet LF = Buffer.from('\\n', 'ascii')[0];\r\nlet CRLF = '\\r\\n';\r\nclass MessageBuffer {\r\n    constructor(encoding = 'utf8') {\r\n        this.encoding = encoding;\r\n        this.index = 0;\r\n        this.buffer = Buffer.allocUnsafe(DefaultSize);\r\n    }\r\n    append(chunk) {\r\n        var toAppend = chunk;\r\n        if (typeof (chunk) === 'string') {\r\n            var str = chunk;\r\n            var bufferLen = Buffer.byteLength(str, this.encoding);\r\n            toAppend = Buffer.allocUnsafe(bufferLen);\r\n            toAppend.write(str, 0, bufferLen, this.encoding);\r\n        }\r\n        if (this.buffer.length - this.index >= toAppend.length) {\r\n            toAppend.copy(this.buffer, this.index, 0, toAppend.length);\r\n        }\r\n        else {\r\n            var newSize = (Math.ceil((this.index + toAppend.length) / DefaultSize) + 1) * DefaultSize;\r\n            if (this.index === 0) {\r\n                this.buffer = Buffer.allocUnsafe(newSize);\r\n                toAppend.copy(this.buffer, 0, 0, toAppend.length);\r\n            }\r\n            else {\r\n                this.buffer = Buffer.concat([this.buffer.slice(0, this.index), toAppend], newSize);\r\n            }\r\n        }\r\n        this.index += toAppend.length;\r\n    }\r\n    tryReadHeaders() {\r\n        let result = undefined;\r\n        let current = 0;\r\n        while (current + 3 < this.index && (this.buffer[current] !== CR || this.buffer[current + 1] !== LF || this.buffer[current + 2] !== CR || this.buffer[current + 3] !== LF)) {\r\n            current++;\r\n        }\r\n        // No header / body separator found (e.g CRLFCRLF)\r\n        if (current + 3 >= this.index) {\r\n            return result;\r\n        }\r\n        result = Object.create(null);\r\n        let headers = this.buffer.toString('ascii', 0, current).split(CRLF);\r\n        headers.forEach((header) => {\r\n            let index = header.indexOf(':');\r\n            if (index === -1) {\r\n                throw new Error('Message header must separate key and value using :');\r\n            }\r\n            let key = header.substr(0, index);\r\n            let value = header.substr(index + 1).trim();\r\n            result[key] = value;\r\n        });\r\n        let nextStart = current + 4;\r\n        this.buffer = this.buffer.slice(nextStart);\r\n        this.index = this.index - nextStart;\r\n        return result;\r\n    }\r\n    tryReadContent(length) {\r\n        if (this.index < length) {\r\n            return null;\r\n        }\r\n        let result = this.buffer.toString(this.encoding, 0, length);\r\n        let nextStart = length;\r\n        this.buffer.copy(this.buffer, 0, nextStart);\r\n        this.index = this.index - nextStart;\r\n        return result;\r\n    }\r\n    get numberOfBytes() {\r\n        return this.index;\r\n    }\r\n}\r\nvar MessageReader;\r\n(function (MessageReader) {\r\n    function is(value) {\r\n        let candidate = value;\r\n        return candidate && Is.func(candidate.listen) && Is.func(candidate.dispose) &&\r\n            Is.func(candidate.onError) && Is.func(candidate.onClose) && Is.func(candidate.onPartialMessage);\r\n    }\r\n    MessageReader.is = is;\r\n})(MessageReader = exports.MessageReader || (exports.MessageReader = {}));\r\nclass AbstractMessageReader {\r\n    constructor() {\r\n        this.errorEmitter = new events_1.Emitter();\r\n        this.closeEmitter = new events_1.Emitter();\r\n        this.partialMessageEmitter = new events_1.Emitter();\r\n    }\r\n    dispose() {\r\n        this.errorEmitter.dispose();\r\n        this.closeEmitter.dispose();\r\n    }\r\n    get onError() {\r\n        return this.errorEmitter.event;\r\n    }\r\n    fireError(error) {\r\n        this.errorEmitter.fire(this.asError(error));\r\n    }\r\n    get onClose() {\r\n        return this.closeEmitter.event;\r\n    }\r\n    fireClose() {\r\n        this.closeEmitter.fire(undefined);\r\n    }\r\n    get onPartialMessage() {\r\n        return this.partialMessageEmitter.event;\r\n    }\r\n    firePartialMessage(info) {\r\n        this.partialMessageEmitter.fire(info);\r\n    }\r\n    asError(error) {\r\n        if (error instanceof Error) {\r\n            return error;\r\n        }\r\n        else {\r\n            return new Error(`Reader received error. Reason: ${Is.string(error.message) ? error.message : 'unknown'}`);\r\n        }\r\n    }\r\n}\r\nexports.AbstractMessageReader = AbstractMessageReader;\r\nclass StreamMessageReader extends AbstractMessageReader {\r\n    constructor(readable, encoding = 'utf8') {\r\n        super();\r\n        this.readable = readable;\r\n        this.buffer = new MessageBuffer(encoding);\r\n        this._partialMessageTimeout = 10000;\r\n    }\r\n    set partialMessageTimeout(timeout) {\r\n        this._partialMessageTimeout = timeout;\r\n    }\r\n    get partialMessageTimeout() {\r\n        return this._partialMessageTimeout;\r\n    }\r\n    listen(callback) {\r\n        this.nextMessageLength = -1;\r\n        this.messageToken = 0;\r\n        this.partialMessageTimer = undefined;\r\n        this.callback = callback;\r\n        this.readable.on('data', (data) => {\r\n            this.onData(data);\r\n        });\r\n        this.readable.on('error', (error) => this.fireError(error));\r\n        this.readable.on('close', () => this.fireClose());\r\n    }\r\n    onData(data) {\r\n        this.buffer.append(data);\r\n        while (true) {\r\n            if (this.nextMessageLength === -1) {\r\n                let headers = this.buffer.tryReadHeaders();\r\n                if (!headers) {\r\n                    return;\r\n                }\r\n                let contentLength = headers['Content-Length'];\r\n                if (!contentLength) {\r\n                    throw new Error('Header must provide a Content-Length property.');\r\n                }\r\n                let length = parseInt(contentLength);\r\n                if (isNaN(length)) {\r\n                    throw new Error('Content-Length value must be a number.');\r\n                }\r\n                this.nextMessageLength = length;\r\n                // Take the encoding form the header. For compatibility\r\n                // treat both utf-8 and utf8 as node utf8\r\n            }\r\n            var msg = this.buffer.tryReadContent(this.nextMessageLength);\r\n            if (msg === null) {\r\n                /** We haven't received the full message yet. */\r\n                this.setPartialMessageTimer();\r\n                return;\r\n            }\r\n            this.clearPartialMessageTimer();\r\n            this.nextMessageLength = -1;\r\n            this.messageToken++;\r\n            var json = JSON.parse(msg);\r\n            this.callback(json);\r\n        }\r\n    }\r\n    clearPartialMessageTimer() {\r\n        if (this.partialMessageTimer) {\r\n            clearTimeout(this.partialMessageTimer);\r\n            this.partialMessageTimer = undefined;\r\n        }\r\n    }\r\n    setPartialMessageTimer() {\r\n        this.clearPartialMessageTimer();\r\n        if (this._partialMessageTimeout <= 0) {\r\n            return;\r\n        }\r\n        this.partialMessageTimer = setTimeout((token, timeout) => {\r\n            this.partialMessageTimer = undefined;\r\n            if (token === this.messageToken) {\r\n                this.firePartialMessage({ messageToken: token, waitingTime: timeout });\r\n                this.setPartialMessageTimer();\r\n            }\r\n        }, this._partialMessageTimeout, this.messageToken, this._partialMessageTimeout);\r\n    }\r\n}\r\nexports.StreamMessageReader = StreamMessageReader;\r\nclass IPCMessageReader extends AbstractMessageReader {\r\n    constructor(process) {\r\n        super();\r\n        this.process = process;\r\n        let eventEmitter = this.process;\r\n        eventEmitter.on('error', (error) => this.fireError(error));\r\n        eventEmitter.on('close', () => this.fireClose());\r\n    }\r\n    listen(callback) {\r\n        this.process.on('message', callback);\r\n    }\r\n}\r\nexports.IPCMessageReader = IPCMessageReader;\r\nclass SocketMessageReader extends StreamMessageReader {\r\n    constructor(socket, encoding = 'utf-8') {\r\n        super(socket, encoding);\r\n    }\r\n}\r\nexports.SocketMessageReader = SocketMessageReader;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst events_1 = require(\"./events\");\r\nconst Is = require(\"./is\");\r\nlet ContentLength = 'Content-Length: ';\r\nlet CRLF = '\\r\\n';\r\nvar MessageWriter;\r\n(function (MessageWriter) {\r\n    function is(value) {\r\n        let candidate = value;\r\n        return candidate && Is.func(candidate.dispose) && Is.func(candidate.onClose) &&\r\n            Is.func(candidate.onError) && Is.func(candidate.write);\r\n    }\r\n    MessageWriter.is = is;\r\n})(MessageWriter = exports.MessageWriter || (exports.MessageWriter = {}));\r\nclass AbstractMessageWriter {\r\n    constructor() {\r\n        this.errorEmitter = new events_1.Emitter();\r\n        this.closeEmitter = new events_1.Emitter();\r\n    }\r\n    dispose() {\r\n        this.errorEmitter.dispose();\r\n        this.closeEmitter.dispose();\r\n    }\r\n    get onError() {\r\n        return this.errorEmitter.event;\r\n    }\r\n    fireError(error, message, count) {\r\n        this.errorEmitter.fire([this.asError(error), message, count]);\r\n    }\r\n    get onClose() {\r\n        return this.closeEmitter.event;\r\n    }\r\n    fireClose() {\r\n        this.closeEmitter.fire(undefined);\r\n    }\r\n    asError(error) {\r\n        if (error instanceof Error) {\r\n            return error;\r\n        }\r\n        else {\r\n            return new Error(`Writer received error. Reason: ${Is.string(error.message) ? error.message : 'unknown'}`);\r\n        }\r\n    }\r\n}\r\nexports.AbstractMessageWriter = AbstractMessageWriter;\r\nclass StreamMessageWriter extends AbstractMessageWriter {\r\n    constructor(writable, encoding = 'utf8') {\r\n        super();\r\n        this.writable = writable;\r\n        this.encoding = encoding;\r\n        this.errorCount = 0;\r\n        this.writable.on('error', (error) => this.fireError(error));\r\n        this.writable.on('close', () => this.fireClose());\r\n    }\r\n    write(msg) {\r\n        let json = JSON.stringify(msg);\r\n        let contentLength = Buffer.byteLength(json, this.encoding);\r\n        let headers = [\r\n            ContentLength, contentLength.toString(), CRLF,\r\n            CRLF\r\n        ];\r\n        try {\r\n            // Header must be written in ASCII encoding\r\n            this.writable.write(headers.join(''), 'ascii');\r\n            // Now write the content. This can be written in any encoding\r\n            this.writable.write(json, this.encoding);\r\n            this.errorCount = 0;\r\n        }\r\n        catch (error) {\r\n            this.errorCount++;\r\n            this.fireError(error, msg, this.errorCount);\r\n        }\r\n    }\r\n}\r\nexports.StreamMessageWriter = StreamMessageWriter;\r\nclass IPCMessageWriter extends AbstractMessageWriter {\r\n    constructor(process) {\r\n        super();\r\n        this.process = process;\r\n        this.errorCount = 0;\r\n        this.queue = [];\r\n        this.sending = false;\r\n        let eventEmitter = this.process;\r\n        eventEmitter.on('error', (error) => this.fireError(error));\r\n        eventEmitter.on('close', () => this.fireClose);\r\n    }\r\n    write(msg) {\r\n        if (!this.sending && this.queue.length === 0) {\r\n            // See https://github.com/nodejs/node/issues/7657\r\n            this.doWriteMessage(msg);\r\n        }\r\n        else {\r\n            this.queue.push(msg);\r\n        }\r\n    }\r\n    doWriteMessage(msg) {\r\n        try {\r\n            if (this.process.send) {\r\n                this.sending = true;\r\n                this.process.send(msg, undefined, undefined, (error) => {\r\n                    this.sending = false;\r\n                    if (error) {\r\n                        this.errorCount++;\r\n                        this.fireError(error, msg, this.errorCount);\r\n                    }\r\n                    else {\r\n                        this.errorCount = 0;\r\n                    }\r\n                    if (this.queue.length > 0) {\r\n                        this.doWriteMessage(this.queue.shift());\r\n                    }\r\n                });\r\n            }\r\n        }\r\n        catch (error) {\r\n            this.errorCount++;\r\n            this.fireError(error, msg, this.errorCount);\r\n        }\r\n    }\r\n}\r\nexports.IPCMessageWriter = IPCMessageWriter;\r\nclass SocketMessageWriter extends AbstractMessageWriter {\r\n    constructor(socket, encoding = 'utf8') {\r\n        super();\r\n        this.socket = socket;\r\n        this.queue = [];\r\n        this.sending = false;\r\n        this.encoding = encoding;\r\n        this.errorCount = 0;\r\n        this.socket.on('error', (error) => this.fireError(error));\r\n        this.socket.on('close', () => this.fireClose());\r\n    }\r\n    dispose() {\r\n        super.dispose();\r\n        this.socket.destroy();\r\n    }\r\n    write(msg) {\r\n        if (!this.sending && this.queue.length === 0) {\r\n            // See https://github.com/nodejs/node/issues/7657\r\n            this.doWriteMessage(msg);\r\n        }\r\n        else {\r\n            this.queue.push(msg);\r\n        }\r\n    }\r\n    doWriteMessage(msg) {\r\n        let json = JSON.stringify(msg);\r\n        let contentLength = Buffer.byteLength(json, this.encoding);\r\n        let headers = [\r\n            ContentLength, contentLength.toString(), CRLF,\r\n            CRLF\r\n        ];\r\n        try {\r\n            // Header must be written in ASCII encoding\r\n            this.sending = true;\r\n            this.socket.write(headers.join(''), 'ascii', (error) => {\r\n                if (error) {\r\n                    this.handleError(error, msg);\r\n                }\r\n                try {\r\n                    // Now write the content. This can be written in any encoding\r\n                    this.socket.write(json, this.encoding, (error) => {\r\n                        this.sending = false;\r\n                        if (error) {\r\n                            this.handleError(error, msg);\r\n                        }\r\n                        else {\r\n                            this.errorCount = 0;\r\n                        }\r\n                        if (this.queue.length > 0) {\r\n                            this.doWriteMessage(this.queue.shift());\r\n                        }\r\n                    });\r\n                }\r\n                catch (error) {\r\n                    this.handleError(error, msg);\r\n                }\r\n            });\r\n        }\r\n        catch (error) {\r\n            this.handleError(error, msg);\r\n        }\r\n    }\r\n    handleError(error, msg) {\r\n        this.errorCount++;\r\n        this.fireError(error, msg, this.errorCount);\r\n    }\r\n}\r\nexports.SocketMessageWriter = SocketMessageWriter;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst is = require(\"./is\");\r\n/**\r\n * Predefined error codes.\r\n */\r\nvar ErrorCodes;\r\n(function (ErrorCodes) {\r\n    // Defined by JSON RPC\r\n    ErrorCodes.ParseError = -32700;\r\n    ErrorCodes.InvalidRequest = -32600;\r\n    ErrorCodes.MethodNotFound = -32601;\r\n    ErrorCodes.InvalidParams = -32602;\r\n    ErrorCodes.InternalError = -32603;\r\n    ErrorCodes.serverErrorStart = -32099;\r\n    ErrorCodes.serverErrorEnd = -32000;\r\n    ErrorCodes.ServerNotInitialized = -32002;\r\n    ErrorCodes.UnknownErrorCode = -32001;\r\n    // Defined by the protocol.\r\n    ErrorCodes.RequestCancelled = -32800;\r\n    ErrorCodes.ContentModified = -32801;\r\n    // Defined by VSCode library.\r\n    ErrorCodes.MessageWriteError = 1;\r\n    ErrorCodes.MessageReadError = 2;\r\n})(ErrorCodes = exports.ErrorCodes || (exports.ErrorCodes = {}));\r\n/**\r\n * An error object return in a response in case a request\r\n * has failed.\r\n */\r\nclass ResponseError extends Error {\r\n    constructor(code, message, data) {\r\n        super(message);\r\n        this.code = is.number(code) ? code : ErrorCodes.UnknownErrorCode;\r\n        this.data = data;\r\n        Object.setPrototypeOf(this, ResponseError.prototype);\r\n    }\r\n    toJson() {\r\n        return {\r\n            code: this.code,\r\n            message: this.message,\r\n            data: this.data,\r\n        };\r\n    }\r\n}\r\nexports.ResponseError = ResponseError;\r\n/**\r\n * An abstract implementation of a MessageType.\r\n */\r\nclass AbstractMessageType {\r\n    constructor(_method, _numberOfParams) {\r\n        this._method = _method;\r\n        this._numberOfParams = _numberOfParams;\r\n    }\r\n    get method() {\r\n        return this._method;\r\n    }\r\n    get numberOfParams() {\r\n        return this._numberOfParams;\r\n    }\r\n}\r\nexports.AbstractMessageType = AbstractMessageType;\r\n/**\r\n * Classes to type request response pairs\r\n *\r\n * The type parameter RO will be removed in the next major version\r\n * of the JSON RPC library since it is a LSP concept and doesn't\r\n * belong here. For now it is tagged as default never.\r\n */\r\nclass RequestType0 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 0);\r\n    }\r\n}\r\nexports.RequestType0 = RequestType0;\r\nclass RequestType extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 1);\r\n    }\r\n}\r\nexports.RequestType = RequestType;\r\nclass RequestType1 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 1);\r\n    }\r\n}\r\nexports.RequestType1 = RequestType1;\r\nclass RequestType2 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 2);\r\n    }\r\n}\r\nexports.RequestType2 = RequestType2;\r\nclass RequestType3 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 3);\r\n    }\r\n}\r\nexports.RequestType3 = RequestType3;\r\nclass RequestType4 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 4);\r\n    }\r\n}\r\nexports.RequestType4 = RequestType4;\r\nclass RequestType5 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 5);\r\n    }\r\n}\r\nexports.RequestType5 = RequestType5;\r\nclass RequestType6 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 6);\r\n    }\r\n}\r\nexports.RequestType6 = RequestType6;\r\nclass RequestType7 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 7);\r\n    }\r\n}\r\nexports.RequestType7 = RequestType7;\r\nclass RequestType8 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 8);\r\n    }\r\n}\r\nexports.RequestType8 = RequestType8;\r\nclass RequestType9 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 9);\r\n    }\r\n}\r\nexports.RequestType9 = RequestType9;\r\n/**\r\n * The type parameter RO will be removed in the next major version\r\n * of the JSON RPC library since it is a LSP concept and doesn't\r\n * belong here. For now it is tagged as default never.\r\n */\r\nclass NotificationType extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 1);\r\n        this._ = undefined;\r\n    }\r\n}\r\nexports.NotificationType = NotificationType;\r\nclass NotificationType0 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 0);\r\n    }\r\n}\r\nexports.NotificationType0 = NotificationType0;\r\nclass NotificationType1 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 1);\r\n    }\r\n}\r\nexports.NotificationType1 = NotificationType1;\r\nclass NotificationType2 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 2);\r\n    }\r\n}\r\nexports.NotificationType2 = NotificationType2;\r\nclass NotificationType3 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 3);\r\n    }\r\n}\r\nexports.NotificationType3 = NotificationType3;\r\nclass NotificationType4 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 4);\r\n    }\r\n}\r\nexports.NotificationType4 = NotificationType4;\r\nclass NotificationType5 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 5);\r\n    }\r\n}\r\nexports.NotificationType5 = NotificationType5;\r\nclass NotificationType6 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 6);\r\n    }\r\n}\r\nexports.NotificationType6 = NotificationType6;\r\nclass NotificationType7 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 7);\r\n    }\r\n}\r\nexports.NotificationType7 = NotificationType7;\r\nclass NotificationType8 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 8);\r\n    }\r\n}\r\nexports.NotificationType8 = NotificationType8;\r\nclass NotificationType9 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 9);\r\n    }\r\n}\r\nexports.NotificationType9 = NotificationType9;\r\n/**\r\n * Tests if the given message is a request message\r\n */\r\nfunction isRequestMessage(message) {\r\n    let candidate = message;\r\n    return candidate && is.string(candidate.method) && (is.string(candidate.id) || is.number(candidate.id));\r\n}\r\nexports.isRequestMessage = isRequestMessage;\r\n/**\r\n * Tests if the given message is a notification message\r\n */\r\nfunction isNotificationMessage(message) {\r\n    let candidate = message;\r\n    return candidate && is.string(candidate.method) && message.id === void 0;\r\n}\r\nexports.isNotificationMessage = isNotificationMessage;\r\n/**\r\n * Tests if the given message is a response message\r\n */\r\nfunction isResponseMessage(message) {\r\n    let candidate = message;\r\n    return candidate && (candidate.result !== void 0 || !!candidate.error) && (is.string(candidate.id) || is.number(candidate.id) || candidate.id === null);\r\n}\r\nexports.isResponseMessage = isResponseMessage;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst path_1 = require(\"path\");\r\nconst os_1 = require(\"os\");\r\nconst crypto_1 = require(\"crypto\");\r\nconst net_1 = require(\"net\");\r\nconst messageReader_1 = require(\"./messageReader\");\r\nconst messageWriter_1 = require(\"./messageWriter\");\r\nfunction generateRandomPipeName() {\r\n    const randomSuffix = crypto_1.randomBytes(21).toString('hex');\r\n    if (process.platform === 'win32') {\r\n        return `\\\\\\\\.\\\\pipe\\\\vscode-jsonrpc-${randomSuffix}-sock`;\r\n    }\r\n    else {\r\n        // Mac/Unix: use socket file\r\n        return path_1.join(os_1.tmpdir(), `vscode-${randomSuffix}.sock`);\r\n    }\r\n}\r\nexports.generateRandomPipeName = generateRandomPipeName;\r\nfunction createClientPipeTransport(pipeName, encoding = 'utf-8') {\r\n    let connectResolve;\r\n    let connected = new Promise((resolve, _reject) => {\r\n        connectResolve = resolve;\r\n    });\r\n    return new Promise((resolve, reject) => {\r\n        let server = net_1.createServer((socket) => {\r\n            server.close();\r\n            connectResolve([\r\n                new messageReader_1.SocketMessageReader(socket, encoding),\r\n                new messageWriter_1.SocketMessageWriter(socket, encoding)\r\n            ]);\r\n        });\r\n        server.on('error', reject);\r\n        server.listen(pipeName, () => {\r\n            server.removeListener('error', reject);\r\n            resolve({\r\n                onConnected: () => { return connected; }\r\n            });\r\n        });\r\n    });\r\n}\r\nexports.createClientPipeTransport = createClientPipeTransport;\r\nfunction createServerPipeTransport(pipeName, encoding = 'utf-8') {\r\n    const socket = net_1.createConnection(pipeName);\r\n    return [\r\n        new messageReader_1.SocketMessageReader(socket, encoding),\r\n        new messageWriter_1.SocketMessageWriter(socket, encoding)\r\n    ];\r\n}\r\nexports.createServerPipeTransport = createServerPipeTransport;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst net_1 = require(\"net\");\r\nconst messageReader_1 = require(\"./messageReader\");\r\nconst messageWriter_1 = require(\"./messageWriter\");\r\nfunction createClientSocketTransport(port, encoding = 'utf-8') {\r\n    let connectResolve;\r\n    let connected = new Promise((resolve, _reject) => {\r\n        connectResolve = resolve;\r\n    });\r\n    return new Promise((resolve, reject) => {\r\n        let server = net_1.createServer((socket) => {\r\n            server.close();\r\n            connectResolve([\r\n                new messageReader_1.SocketMessageReader(socket, encoding),\r\n                new messageWriter_1.SocketMessageWriter(socket, encoding)\r\n            ]);\r\n        });\r\n        server.on('error', reject);\r\n        server.listen(port, '127.0.0.1', () => {\r\n            server.removeListener('error', reject);\r\n            resolve({\r\n                onConnected: () => { return connected; }\r\n            });\r\n        });\r\n    });\r\n}\r\nexports.createClientSocketTransport = createClientSocketTransport;\r\nfunction createServerSocketTransport(port, encoding = 'utf-8') {\r\n    const socket = net_1.createConnection(port, '127.0.0.1');\r\n    return [\r\n        new messageReader_1.SocketMessageReader(socket, encoding),\r\n        new messageWriter_1.SocketMessageWriter(socket, encoding)\r\n    ];\r\n}\r\nexports.createServerSocketTransport = createServerSocketTransport;\r\n"],"sourceRoot":""}