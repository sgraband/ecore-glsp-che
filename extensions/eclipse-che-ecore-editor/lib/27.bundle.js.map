{"version":3,"sources":["webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/src/browser/typescript-callhierarchy-service.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/src/browser/typescript-client-contribution.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/src/browser/typescript-frontend-contribution.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/src/browser/typescript-frontend-module.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/src/browser/typescript-keybinding-contexts.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/src/browser/typescript-preferences.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/src/common/index.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/src/common/typescript-version-service.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/application-package/src/environment.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/callhierarchy/src/browser/callhierarchy-context.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/callhierarchy/src/browser/callhierarchy-contribution.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/callhierarchy/src/browser/callhierarchy-frontend-module.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/callhierarchy/src/browser/callhierarchy-service-impl.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/callhierarchy/src/browser/callhierarchy-service.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/callhierarchy/src/browser/callhierarchy-tree/callhierarchy-tree-container.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/callhierarchy/src/browser/callhierarchy-tree/callhierarchy-tree-model.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/callhierarchy/src/browser/callhierarchy-tree/callhierarchy-tree-widget.tsx","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/callhierarchy/src/browser/callhierarchy-tree/callhierarchy-tree.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/callhierarchy/src/browser/callhierarchy-tree/index.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/callhierarchy/src/browser/callhierarchy.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/callhierarchy/src/browser/current-editor-access.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/callhierarchy/src/browser/index.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/callhierarchy/src/browser/utils.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/callhierarchy/src/browser/style/index.css?68c4","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/core/src/browser/about-dialog.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/core/src/browser/browser.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/core/src/browser/color-registry.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/core/src/browser/common-frontend-contribution.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/core/src/browser/context-key-service.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/core/src/browser/context-menu-renderer.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/core/src/browser/core-preferences.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/core/src/browser/dialogs.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/core/src/browser/diff-uris.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/core/src/browser/endpoint.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/core/src/browser/frontend-application-config-provider.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/core/src/browser/frontend-application-state.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/core/src/browser/frontend-application.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/core/src/browser/icon-theme-service.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/core/src/browser/index.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/core/src/browser/keybinding.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/core/src/browser/keyboard/browser-keyboard-frontend-contribution.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/core/src/browser/keyboard/browser-keyboard-layout-provider.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/core/src/browser/keyboard/index.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/core/src/browser/keyboard/keyboard-layout-service.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/core/src/browser/keyboard/keys.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/core/src/browser/keys.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/core/src/browser/label-parser.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/core/src/browser/label-provider.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/core/src/browser/messaging/index.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/core/src/browser/messaging/ws-connection-provider.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/core/src/browser/mime-service.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/core/src/browser/navigatable.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/core/src/browser/opener-service.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/core/src/browser/preferences/index.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/core/src/browser/preferences/preference-configurations.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/core/src/browser/preferences/preference-contribution.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/core/src/browser/preferences/preference-provider.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/core/src/browser/preferences/preference-proxy.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/core/src/browser/preferences/preference-scope.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/core/src/browser/preferences/preference-service.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/core/src/browser/progress-bar.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/core/src/browser/progress-location-service.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/core/src/browser/quick-open/index.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/core/src/browser/quick-open/prefix-quick-open-service.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/core/src/browser/quick-open/quick-command-contribution.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/core/src/browser/quick-open/quick-command-service.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/core/src/browser/quick-open/quick-input-service.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/core/src/browser/quick-open/quick-open-action-provider.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/core/src/browser/quick-open/quick-open-frontend-contribution.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/core/src/browser/quick-open/quick-open-model.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/core/src/browser/quick-open/quick-open-service.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/core/src/browser/quick-open/quick-pick-service.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/core/src/browser/quick-open/quick-title-bar.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/core/src/browser/quick-view-service.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/core/src/browser/resource-context-key.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/core/src/browser/saveable.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/core/src/browser/shell/application-shell.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/core/src/browser/shell/index.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/core/src/browser/shell/shell-layout-restorer.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/core/src/browser/shell/side-panel-handler.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/core/src/browser/shell/side-panel-toolbar.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/core/src/browser/shell/split-panels.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/core/src/browser/shell/tab-bar-toolbar.tsx","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/core/src/browser/shell/tab-bars.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/core/src/browser/shell/theia-dock-panel.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/core/src/browser/shell/view-contribution.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/core/src/browser/status-bar/index.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/core/src/browser/status-bar/status-bar.tsx","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/core/src/browser/storage-service.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/core/src/browser/theming.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/core/src/browser/tree/fuzzy-search.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/core/src/browser/tree/index.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/core/src/browser/tree/search-box-debounce.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/core/src/browser/tree/search-box.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/core/src/browser/tree/tree-container.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/core/src/browser/tree/tree-decorator.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/core/src/browser/tree/tree-expansion.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/core/src/browser/tree/tree-iterator.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/core/src/browser/tree/tree-model.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/core/src/browser/tree/tree-navigation.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/core/src/browser/tree/tree-search.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/core/src/browser/tree/tree-selection-impl.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/core/src/browser/tree/tree-selection-state.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/core/src/browser/tree/tree-selection.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/core/src/browser/tree/tree-widget-selection.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/core/src/browser/tree/tree-widget.tsx","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/core/src/browser/tree/tree.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/core/src/browser/view-container.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/core/src/browser/widget-decoration.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/core/src/browser/widget-manager.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/core/src/browser/widget-open-handler.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/core/src/browser/widgets/index.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/core/src/browser/widgets/react-renderer.tsx","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/core/src/browser/widgets/react-widget.tsx","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/core/src/browser/widgets/widget.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/core/src/browser/window/window-service.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/core/src/common/application-error.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/core/src/common/application-protocol.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/core/src/common/cancellation.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/core/src/common/command.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/core/src/common/contribution-provider.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/core/src/common/disposable.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/core/src/common/event.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/core/src/common/index.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/core/src/common/keybinding.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/core/src/common/keyboard/keyboard-layout-provider.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/core/src/common/logger-protocol.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/core/src/common/logger-watcher.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/core/src/common/logger.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/core/src/common/lsp-types.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/core/src/common/menu.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/core/src/common/message-service-protocol.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/core/src/common/message-service.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/core/src/common/messaging/connection-error-handler.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/core/src/common/messaging/handler.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/core/src/common/messaging/index.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/core/src/common/messaging/proxy-factory.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/core/src/common/messaging/web-socket-channel.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/core/src/common/objects.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/core/src/common/os.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/core/src/common/path.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/core/src/common/preferences/preference-schema.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/core/src/common/preferences/preference-scope.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/core/src/common/progress-service-protocol.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/core/src/common/progress-service.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/core/src/common/promise-util.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/core/src/common/quick-open-model.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/core/src/common/quick-open-service.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/core/src/common/quick-pick-service.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/core/src/common/reference.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/core/src/common/resource.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/core/src/common/selection-command-handler.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/core/src/common/selection-service.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/core/src/common/selection.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/core/src/common/strings.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/core/src/common/types.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/core/src/common/uri-command-handler.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/core/src/common/uri.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/core/src/browser/icons/CollapseAll.svg","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/core/src/browser/icons/CollapseAll_inverse.svg","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/core/src/browser/icons/Refresh.svg","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/core/src/browser/icons/Refresh_inverse.svg","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/core/src/browser/icons/add-inverse.svg","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/core/src/browser/icons/add.svg","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/core/src/browser/icons/case-sensitive-dark.svg","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/core/src/browser/icons/case-sensitive.svg","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/core/src/browser/icons/circle-bright.svg","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/core/src/browser/icons/circle-dark.svg","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/core/src/browser/icons/clear-search-results-dark.svg","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/core/src/browser/icons/clear-search-results.svg","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/core/src/browser/icons/close-all-bright.svg","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/core/src/browser/icons/close-all-dark.svg","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/core/src/browser/icons/close-bright.svg","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/core/src/browser/icons/close-dark.svg","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/core/src/browser/icons/collapse.svg","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/core/src/browser/icons/edit-json-dark.svg","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/core/src/browser/icons/edit-json.svg","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/core/src/browser/icons/expand.svg","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/core/src/browser/icons/open-change-bright.svg","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/core/src/browser/icons/open-change-dark.svg","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/core/src/browser/icons/open-file-bright.svg","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/core/src/browser/icons/open-file-dark.svg","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/core/src/browser/icons/preview-bright.svg","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/core/src/browser/icons/preview-dark.svg","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/core/src/browser/icons/regex-dark.svg","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/core/src/browser/icons/regex.svg","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/core/src/browser/icons/remove-all-inverse.svg","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/core/src/browser/icons/remove-all.svg","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/core/src/browser/icons/replace-all-inverse.svg","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/core/src/browser/icons/replace-all.svg","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/core/src/browser/icons/replace-inverse.svg","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/core/src/browser/icons/replace.svg","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/core/src/browser/icons/spinner.gif","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/core/src/browser/icons/whole-word-dark.svg","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/core/src/browser/icons/whole-word.svg","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/core/src/browser/style/variables-bright.useable.css?61dc","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/core/src/browser/style/variables-dark.useable.css?43de","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/editor/src/browser/decorations/editor-decoration-style.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/editor/src/browser/decorations/editor-decoration.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/editor/src/browser/decorations/editor-decorator.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/editor/src/browser/decorations/index.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/editor/src/browser/diff-navigator.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/editor/src/browser/editor-command.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/editor/src/browser/editor-contribution.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/editor/src/browser/editor-frontend-module.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/editor/src/browser/editor-keybinding-contexts.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/editor/src/browser/editor-keybinding.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/editor/src/browser/editor-manager.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/editor/src/browser/editor-menu.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/editor/src/browser/editor-navigation-contribution.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/editor/src/browser/editor-preferences.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/editor/src/browser/editor-quick-open-service.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/editor/src/browser/editor-variable-contribution.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/editor/src/browser/editor-widget-factory.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/editor/src/browser/editor-widget.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/editor/src/browser/editor.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/editor/src/browser/index.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/editor/src/browser/navigation/navigation-location-service.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/editor/src/browser/navigation/navigation-location-similarity.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/editor/src/browser/navigation/navigation-location-updater.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/editor/src/browser/navigation/navigation-location.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/editor/src/browser/semantic-highlight/semantic-highlighting-service.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/editor/src/browser/supported-encodings.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/filesystem/src/browser/download/file-download-command-contribution.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/filesystem/src/browser/download/file-download-service.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/filesystem/src/browser/file-dialog/file-dialog-container.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/filesystem/src/browser/file-dialog/file-dialog-model.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/filesystem/src/browser/file-dialog/file-dialog-service.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/filesystem/src/browser/file-dialog/file-dialog-tree-filters-renderer.tsx","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/filesystem/src/browser/file-dialog/file-dialog-tree.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/filesystem/src/browser/file-dialog/file-dialog-widget.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/filesystem/src/browser/file-dialog/file-dialog.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/filesystem/src/browser/file-dialog/index.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/filesystem/src/browser/file-resource.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/filesystem/src/browser/file-selection.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/filesystem/src/browser/file-tree/file-tree-container.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/filesystem/src/browser/file-tree/file-tree-model.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/filesystem/src/browser/file-tree/file-tree-widget.tsx","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/filesystem/src/browser/file-tree/file-tree.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/filesystem/src/browser/file-tree/index.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/filesystem/src/browser/file-upload-service.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/filesystem/src/browser/filesystem-frontend-contribution.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/filesystem/src/browser/filesystem-preferences.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/filesystem/src/browser/filesystem-watcher.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/filesystem/src/browser/index.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/filesystem/src/browser/location/index.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/filesystem/src/browser/location/location-renderer.tsx","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/filesystem/src/common/filesystem-utils.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/filesystem/src/common/filesystem-watcher-protocol.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/filesystem/src/common/filesystem.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/filesystem/src/common/index.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/languages/src/browser/index.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/languages/src/browser/language-client-contribution.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/languages/src/browser/language-client-factory.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/languages/src/browser/language-client-provider-impl.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/languages/src/browser/language-client-provider.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/languages/src/browser/language-client-services.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/languages/src/browser/language-resource-context-key.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/languages/src/browser/languages-frontend-contribution.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/languages/src/browser/languages-frontend-module.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/languages/src/browser/semantic-highlighting/semantic-highlighting-feature.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/languages/src/browser/semantic-highlighting/semantic-highlighting-protocol.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/languages/src/browser/typehierarchy/typehierarchy-feature.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/languages/src/browser/typehierarchy/typehierarchy-protocol.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/languages/src/browser/window-impl.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/languages/src/browser/workspace-symbols.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/languages/src/common/index.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/languages/src/common/language-contribution.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/languages/src/common/language-selector/glob.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/languages/src/common/language-selector/index.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/languages/src/common/language-selector/language-selector.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/languages/src/common/language-selector/paths.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/languages/src/common/language-selector/strings.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/monaco/lib/browser/monaco-editor-model.js","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/monaco/lib/browser/monaco-editor.js","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/monaco/src/browser/monaco-text-model-service.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/output/src/browser/output-contribution.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/output/src/browser/output-widget.tsx","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/output/src/common/output-channel.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/output/src/common/output-preferences.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/output/src/browser/style/output.css?c7ae","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/variable-resolver/src/browser/index.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/variable-resolver/src/browser/variable-quick-open-service.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/variable-resolver/src/browser/variable-resolver-service.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/variable-resolver/src/browser/variable.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/workspace/src/browser/diff-service.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/workspace/src/browser/index.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/workspace/src/browser/quick-open-workspace.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/workspace/src/browser/workspace-commands.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/workspace/src/browser/workspace-compare-handler.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/workspace/src/browser/workspace-delete-handler.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/workspace/src/browser/workspace-duplicate-handler.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/workspace/src/browser/workspace-frontend-contribution.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/workspace/src/browser/workspace-frontend-module.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/workspace/src/browser/workspace-input-dialog.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/workspace/src/browser/workspace-preferences.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/workspace/src/browser/workspace-service.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/workspace/src/browser/workspace-storage-service.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/workspace/src/browser/workspace-uri-contribution.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/workspace/src/browser/workspace-utils.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/workspace/src/browser/workspace-variable-contribution.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/workspace/src/common/index.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/workspace/src/common/utils.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/workspace/src/common/workspace-protocol.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/monaco-languageclient/src/connection.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/monaco-languageclient/src/console-window.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/monaco-languageclient/src/disposable.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/monaco-languageclient/src/index.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/monaco-languageclient/src/monaco-commands.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/monaco-languageclient/src/monaco-converter.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/monaco-languageclient/src/monaco-diagnostic-collection.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/monaco-languageclient/src/monaco-language-client.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/monaco-languageclient/src/monaco-languages.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/monaco-languageclient/src/monaco-services.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/monaco-languageclient/src/monaco-workspace.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/monaco-languageclient/src/services.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/uuid/index.js","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/uuid/lib/bytesToUuid.js","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/uuid/lib/rng-browser.js","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/uuid/v1.js","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/uuid/v4.js","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/vscode-jsonrpc/lib/cancellation.js","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/vscode-jsonrpc/lib/events.js","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/vscode-jsonrpc/lib/is.js","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/vscode-jsonrpc/lib/linkedMap.js","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/vscode-jsonrpc/lib/main.js","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/vscode-jsonrpc/lib/messageReader.js","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/vscode-jsonrpc/lib/messageWriter.js","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/vscode-jsonrpc/lib/messages.js","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/vscode-jsonrpc/lib/pipeSupport.js","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/vscode-jsonrpc/lib/socketSupport.js","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/vscode-languageclient/lib/client.js","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/vscode-languageclient/lib/codeConverter.js","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/vscode-languageclient/lib/colorProvider.js","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/vscode-languageclient/lib/configuration.js","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/vscode-languageclient/lib/declaration.js","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/vscode-languageclient/lib/foldingRange.js","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/vscode-languageclient/lib/implementation.js","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/vscode-languageclient/lib/progressPart.js","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/vscode-languageclient/lib/protocolCodeLens.js","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/vscode-languageclient/lib/protocolCompletionItem.js","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/vscode-languageclient/lib/protocolConverter.js","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/vscode-languageclient/lib/protocolDocumentLink.js","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/vscode-languageclient/lib/typeDefinition.js","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/vscode-languageclient/lib/utils/async.js","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/vscode-languageclient/lib/utils/is.js","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/vscode-languageclient/lib/utils/uuid.js","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/vscode-languageclient/lib/workspaceFolders.js","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/vscode-uri/lib/esm/index.js","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/vscode-ws-jsonrpc/src/connection.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/vscode-ws-jsonrpc/src/disposable.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/vscode-ws-jsonrpc/src/index.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/vscode-ws-jsonrpc/src/logger.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/vscode-ws-jsonrpc/src/socket/connection.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/vscode-ws-jsonrpc/src/socket/index.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/vscode-ws-jsonrpc/src/socket/reader.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/vscode-ws-jsonrpc/src/socket/writer.ts","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/base64-arraybuffer/lib/base64-arraybuffer.js","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/callhierarchy/src/browser/style/index.css","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/core/src/browser/style/variables-bright.useable.css","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/core/src/browser/style/variables-dark.useable.css","webpack:////home/simon/Documents/Workspaces/EclipseSource/ecore-glsp-che/client/node_modules/@theia/typescript/node_modules/@theia/output/src/browser/style/output.css","webpack:///../src/commands.ts"],"names":["Object","defineProperty","exports","value","events_1","require","Is","CancellationToken","None","freeze","isCancellationRequested","onCancellationRequested","Event","Cancelled","is","candidate","shortcutEvent","callback","context","handle","setTimeout","bind","dispose","clearTimeout","MutableToken","_isCancelled","_emitter","fire","undefined","Emitter","event","CancellationTokenSource","_token","cancel","Disposable","create","func","_disposable","CallbackList","bucket","_callbacks","_contexts","push","Array","isArray","remove","foundCallbackWithDifferentContext","i","len","length","splice","Error","ret","callbacks","slice","contexts","args","apply","e","console","error","_options","invoke","call","_event","listener","thisArgs","disposables","onFirstListenerAdd","isEmpty","add","result","_noop","onLastListenerRemove","boolean","string","String","number","Number","array","stringArray","every","elem","Touch","First","Last","LinkedMap","_map","Map","_head","_tail","_size","clear","key","has","item","get","touch","next","previous","addItemLast","addItemFirst","set","removeItem","callbackfn","thisArg","current","__export","m","p","hasOwnProperty","messages_1","RequestType","RequestType0","RequestType1","RequestType2","RequestType3","RequestType4","RequestType5","RequestType6","RequestType7","RequestType8","RequestType9","ResponseError","ErrorCodes","NotificationType","NotificationType0","NotificationType1","NotificationType2","NotificationType3","NotificationType4","NotificationType5","NotificationType6","NotificationType7","NotificationType8","NotificationType9","messageReader_1","MessageReader","StreamMessageReader","IPCMessageReader","SocketMessageReader","messageWriter_1","MessageWriter","StreamMessageWriter","IPCMessageWriter","SocketMessageWriter","cancellation_1","linkedMap_1","CancelNotification","type","ProgressNotification","ProgressType","_","NullLogger","warn","info","log","Trace","fromString","toLowerCase","Off","Messages","Verbose","toString","TraceFormat","JSON","Text","SetTraceNotification","LogTraceNotification","ConnectionErrors","ConnectionError","code","message","setPrototypeOf","prototype","ConnectionStrategy","cancelUndispatched","ConnectionState","_createMessageConnection","messageReader","messageWriter","logger","strategy","sequenceNumber","notificationSquenceNumber","unknownResponseSquenceNumber","version","starRequestHandler","requestHandlers","starNotificationHandler","notificationHandlers","progressHandlers","timer","messageQueue","responsePromises","requestTokens","trace","traceFormat","tracer","state","New","errorEmitter","closeEmitter","unhandledNotificationEmitter","unhandledProgressEmitter","disposeEmitter","createRequestQueueKey","id","createResponseQueueKey","createNotificationQueueKey","addMessageToQueue","queue","isRequestMessage","isResponseMessage","_message","isListening","Listening","isClosed","Closed","isDisposed","Disposed","closeHandler","readErrorHandler","writeErrorHandler","data","onClose","onError","triggerMessageQueue","size","setImmediate","processMessageQueue","shift","handleRequest","isNotificationMessage","handleNotification","handleResponse","handleInvalidMessage","method","params","toCancel","response","traceSendingResponse","Date","now","write","requestMessage","reply","resultOrError","startTime","jsonrpc","toJson","replyError","replySuccess","traceReceivedRequest","element","requestHandler","handler","cancellationSource","tokenKey","handlerResult","numberOfParams","token","promise","then","InternalError","MethodNotFound","responseMessage","stringify","responsePromise","traceReceivedResponse","reject","resolve","notificationHandler","source","traceReceivedNotification","responseHandler","traceSendingRequest","logLSPMessage","traceSendingNotification","timerStart","lspMessage","isLSPMessage","timestamp","throwIfClosedOrDisposed","throwIfListening","AlreadyListening","throwIfNotListening","undefinedToNull","param","computeMessageParams","connection","sendNotification","messageParams","notificationMessage","onNotification","onProgress","_type","sendProgress","onUnhandledProgress","sendRequest","last","map","Promise","MessageWriteError","onRequest","_value","_tracer","sendNotificationOrTraceOptions","_sendNotification","_traceFormat","onUnhandledNotification","onDispose","keys","forEach","listen","inspect","verbose","isMessageReader","read","isMessageWriter","end","createMessageConnection","input","output","reader","writer","DefaultSize","CR","Buffer","from","LF","CRLF","MessageBuffer","encoding","index","buffer","allocUnsafe","chunk","toAppend","str","bufferLen","byteLength","copy","newSize","Math","ceil","concat","headers","split","header","indexOf","substr","trim","nextStart","onPartialMessage","AbstractMessageReader","partialMessageEmitter","asError","readable","_partialMessageTimeout","nextMessageLength","messageToken","partialMessageTimer","on","onData","fireError","fireClose","append","tryReadHeaders","contentLength","parseInt","isNaN","msg","tryReadContent","setPartialMessageTimer","clearPartialMessageTimer","json","parse","timeout","firePartialMessage","waitingTime","process","eventEmitter","socket","ContentLength","AbstractMessageWriter","count","writable","errorCount","join","sending","doWriteMessage","send","destroy","handleError","ParseError","InvalidRequest","InvalidParams","serverErrorStart","serverErrorEnd","ServerNotInitialized","UnknownErrorCode","RequestCancelled","ContentModified","MessageReadError","AbstractMessageType","_method","_numberOfParams","path_1","os_1","crypto_1","net_1","generateRandomPipeName","randomSuffix","randomBytes","platform","tmpdir","createClientPipeTransport","pipeName","connectResolve","connected","_reject","server","createServer","close","removeListener","onConnected","createServerPipeTransport","createConnection","createClientSocketTransport","port","createServerSocketTransport","vscode_1","vscode_languageserver_protocol_1","c2p","p2c","async_1","UUID","progressPart_1","ConsoleLogger","errorHandler","createProtocolConnection","defaultTraceOptions","initialize","InitializeRequest","shutdown","ShutdownRequest","exit","ExitNotification","onLogMessage","LogMessageNotification","onShowMessage","ShowMessageNotification","onTelemetry","TelemetryEventNotification","didChangeConfiguration","DidChangeConfigurationNotification","didChangeWatchedFiles","DidChangeWatchedFilesNotification","didOpenTextDocument","DidOpenTextDocumentNotification","didChangeTextDocument","DidChangeTextDocumentNotification","didCloseTextDocument","DidCloseTextDocumentNotification","didSaveTextDocument","DidSaveTextDocumentNotification","onDiagnostics","PublishDiagnosticsNotification","ErrorAction","CloseAction","DefaultErrorHandler","name","restarts","_error","Continue","Shutdown","Restart","diff","window","showErrorMessage","DoNotRestart","RevealOutputChannelOn","State","ClientState","SupportedSymbolKinds","SymbolKind","File","Module","Namespace","Package","Class","Method","Property","Field","Constructor","Enum","Interface","Function","Variable","Constant","Boolean","Key","Null","EnumMember","Struct","Operator","TypeParameter","SupportedCompletionItemKinds","CompletionItemKind","Unit","Value","Keyword","Snippet","Color","Reference","Folder","ensure","target","DynamicFeature","register","unregister","messages","DocumentNotifiactions","_client","_middleware","_createParams","_selectorFilter","_selectors","registerOptions","documentSelector","_listener","values","notificationSent","_data","selectors","textDocument","selector","languages","match","DidOpenTextDocumentFeature","client","_syncedDocuments","workspace","onDidOpenTextDocument","clientOptions","middleware","didOpen","code2ProtocolConverter","asOpenTextDocumentParams","textDocumentFilter","capabilities","dynamicRegistration","textDocumentSyncOptions","resolvedTextDocumentSync","openClose","generateUuid","textDocuments","uri","DidCloseTextDocumentFeature","onDidCloseTextDocument","didClose","asCloseTextDocumentParams","DidChangeTextDocumentFeature","_changeData","_forcingDelivery","change","TextDocumentSyncKind","assign","syncKind","onDidChangeTextDocument","contentChanges","changeData","document","Incremental","asChangeTextDocumentParams","didChange","Full","_changeDelayer","forceDelivery","delayer","trigger","Delayer","WillSaveFeature","onWillSaveTextDocument","WillSaveTextDocumentNotification","willSave","willSaveEvent","asWillSaveTextDocumentParams","WillSaveWaitUntilFeature","willSaveWaitUntil","WillSaveTextDocumentWaitUntilRequest","edits","vEdits","protocol2CodeConverter","asTextEdits","waitUntil","DidSaveTextDocumentFeature","onDidSaveTextDocument","didSave","asSaveTextDocumentParams","_includeText","save","includeText","FileSystemWatcherFeature","_notifyFileEvent","_watchers","_capabilities","_documentSelector","watchers","disposeables","watcher","globPattern","watchCreate","watchChange","watchDelete","kind","WatchKind","Create","Change","Delete","fileSystemWatcher","createFileSystemWatcher","hookListeners","fileSystemWatchers","listeners","onDidCreate","resource","asUri","FileChangeType","Created","onDidChange","Changed","onDidDelete","Deleted","disposable","TextDocumentFeature","_providers","provider","registerLanguageProvider","capability","TextDocumentRegistrationOptions","StaticRegistrationOptions","hasId","WorkDoneProgressOptions","options","WorkspaceFeature","CompletionItemFeature","CompletionRequest","capabilites","completion","contextSupport","completionItem","snippetSupport","commitCharactersSupport","documentationFormat","MarkupKind","Markdown","PlainText","deprecatedSupport","preselectSupport","completionItemKind","valueSet","getRegistrationOptions","completionProvider","triggerCharacters","provideCompletionItems","position","asCompletionParams","asCompletionResult","logFailedRequest","resolveCompletionItem","CompletionResolveRequest","asCompletionItem","registerCompletionItemProvider","provideCompletionItem","resolveProvider","HoverFeature","HoverRequest","hoverCapability","contentFormat","hoverProvider","provideHover","asTextDocumentPositionParams","asHover","registerHoverProvider","SignatureHelpFeature","SignatureHelpRequest","config","signatureInformation","parameterInformation","labelOffsetSupport","signatureHelpProvider","providerSignatureHelp","asSignatureHelp","registerSignatureHelpProvider","provideSignatureHelp","DefinitionFeature","DefinitionRequest","definitionSupport","linkSupport","definitionProvider","provideDefinition","asDefinitionResult","registerDefinitionProvider","ReferencesFeature","ReferencesRequest","referencesProvider","providerReferences","asReferenceParams","asReferences","registerReferenceProvider","provideReferences","DocumentHighlightFeature","DocumentHighlightRequest","documentHighlightProvider","provideDocumentHighlights","asDocumentHighlights","registerDocumentHighlightProvider","DocumentSymbolFeature","DocumentSymbolRequest","symbolCapabilities","symbolKind","hierarchicalDocumentSymbolSupport","documentSymbolProvider","provideDocumentSymbols","asDocumentSymbolParams","DocumentSymbol","asDocumentSymbols","asSymbolInformations","registerDocumentSymbolProvider","WorkspaceSymbolFeature","WorkspaceSymbolRequest","workspaceSymbolProvider","workDoneProgress","provideWorkspaceSymbols","query","registerWorkspaceSymbolProvider","CodeActionFeature","CodeActionRequest","cap","codeActionLiteralSupport","codeActionKind","CodeActionKind","Empty","QuickFix","Refactor","RefactorExtract","RefactorInline","RefactorRewrite","Source","SourceOrganizeImports","codeActionProvider","provideCodeActions","range","asTextDocumentIdentifier","asRange","asCodeActionContext","Command","asCommand","asCodeAction","registerCodeActionsProvider","codeActionKinds","providedCodeActionKinds","asCodeActionKinds","CodeLensFeature","CodeLensRequest","codeLensProvider","provideCodeLenses","asCodeLensParams","asCodeLenses","resolveCodeLens","codeLens","CodeLensResolveRequest","asCodeLens","registerCodeLensProvider","DocumentFormattingFeature","DocumentFormattingRequest","documentFormattingProvider","provideDocumentFormattingEdits","asFormattingOptions","registerDocumentFormattingEditProvider","DocumentRangeFormattingFeature","DocumentRangeFormattingRequest","documentRangeFormattingProvider","provideDocumentRangeFormattingEdits","registerDocumentRangeFormattingEditProvider","DocumentOnTypeFormattingFeature","DocumentOnTypeFormattingRequest","documentOnTypeFormattingProvider","moreTriggerCharacter","provideOnTypeFormattingEdits","ch","asPosition","registerOnTypeFormattingEditProvider","firstTriggerCharacter","RenameFeature","RenameRequest","rename","prepareSupport","renameProvider","prepareProvider","provideRenameEdits","newName","asWorkspaceEdit","prepareRename","PrepareRenameRequest","Range","placeholder","registerRenameProvider","DocumentLinkFeature","DocumentLinkRequest","documentLinkProvider","provideDocumentLinks","asDocumentLinkParams","asDocumentLinks","resolveDocumentLink","link","DocumentLinkResolveRequest","asDocumentLink","registerDocumentLinkProvider","ConfigurationFeature","_listeners","section","synchronize","configurationSection","onDidChangeConfiguration","sections","affected","some","affectsConfiguration","settings","extractSettingsInformation","getMiddleware","ensurePath","path","obj","workspaceFolder","getConfiguration","ExecuteCommandFeature","_commands","executeCommandProvider","commands","command","registerCommand","arguments","ExecuteCommandRequest","MessageTransports","OnReady","_resolve","_used","BaseLanguageClient","_features","_method2Message","_dynamicFeatures","_id","_name","_clientOptions","diagnosticCollectionName","outputChannelName","revealOutputChannelOn","stdioEncoding","initializationOptions","initializationFailedHandler","progressOnInitialization","uriConverters","Initial","_connectionPromise","_resolvedConnection","_initializeResult","outputChannel","_outputChannel","_disposeOutputChannel","_traceOutputChannel","traceOutputChannel","_diagnostics","_fileEvents","_fileEventDelayer","_onReady","_onReadyCallbacks","_onStop","_telemetryEmitter","_stateChangeEmitter","messageOrDataObject","logTrace","logObjectTrace","_c2p","createConverter","code2Protocol","_p2c","protocol2Code","registerBuiltinFeatures","Running","Starting","Stopped","isConnectionActive","forceDocumentSync","responseError","stack","appendLine","toLocaleTimeString","data2String","Info","showNotificationMessage","Warn","showInformationMessage","show","Stopping","isUsed","createDiagnosticCollection","resolveConnection","MessageType","Warning","showWarningMessage","ShowMessageRequest","messageFunc","actions","StartFailed","needsStop","stop","refreshTrace","initOption","rootPath","fsPath","_clientGetRootPath","initParams","processId","pid","rootUri","Uri","file","computeClientCapabilities","_trace","workspaceFolders","fillInitializeParams","part","ProgressPart","workDoneToken","doInitialize","done","textDocumentSync","handleDiagnostics","RegistrationRequest","handleRegistrationRequest","UnregistrationRequest","handleUnregistrationRequest","ApplyWorkspaceEditRequest","handleApplyWorkspaceEdit","InitializedNotification","hookFileEvents","hookConfigurationChanged","initializeFeatures","retry","title","folders","folder","scheme","cleanUp","cleanUpChannel","channel","diagnostics","onReady","changes","asDiagnostics","setDiagnostics","handleConnectionError","handleConnectionClosed","createMessageTransports","transports","action","closed","start","traceConfig","_connection","fileEvents","registerRaw","features","feature","registerFeature","notifyFileEvent","applyEdit","workspaceEdit","documentChanges","resourceOperations","ResourceOperationKind","Rename","failureHandling","FailureHandlingKind","TextOnlyTransactional","relatedInformation","tagSupport","fillClientCapabilities","registrations","registration","unregisterations","unregistration","edit","openTextDocuments","versionMismatch","TextDocumentEdit","applied","_state","oldState","getPublicState","newState","createOutputChannel","proto","protocolCompletionItem_1","protocolCodeLens_1","protocolDocumentLink_1","uriConverter","nullConverter","_uriConverter","asVersionedTextDocumentIdentifier","languageId","text","getText","isTextDocumentChangeEvent","isTextDocument","arg","line","character","rangeLength","includeContent","asTextDocumentSaveReason","reason","TextDocumentSaveReason","Manual","AfterDelay","FocusOut","asWorkerPosition","asTriggerKind","triggerKind","CompletionTriggerKind","TriggerCharacter","TriggerForIncompleteCompletions","Invoked","triggerCharacter","asPositions","asDiagnosticSeverity","DiagnosticSeverity","Information","Hint","asDiagnosticTags","tags","tag","converted","asDiagnosticTag","DiagnosticTag","Unnecessary","Deprecated","asDiagnostic","Diagnostic","severity","items","asDocumentation","format","documentation","asCompletionItemKind","original","label","protocolItem","detail","filterText","fillPrimaryInsertText","originalItemKind","sortText","additionalTextEdits","commitCharacters","preselect","deprecated","InsertTextFormat","textEdit","newText","insertText","SnippetString","insertTextFormat","fromEdit","asTextEdit","includeDeclaration","only","CodeActionContext","CodeLens","tabSize","insertSpaces","DocumentLink","client_1","ColorProviderFeature","DocumentColorRequest","getRegistration","colorProvider","provideColorPresentations","color","requestParams","ColorPresentationRequest","asColorPresentations","provideDocumentColors","asColorInformations","registerColorProvider","red","green","blue","alpha","colorInformation","ci","ColorInformation","asColor","colorPresentations","cp","presentation","ColorPresentation","configuration","ConfigurationRequest","scopeUri","lastIndexOf","DeclarationFeature","DeclarationRequest","declarationSupport","declarationProvider","provideDeclaration","asDeclarationResult","registerDeclarationProvider","FoldingRangeFeature","FoldingRangeRequest","rangeLimit","lineFoldingOnly","foldingRangeProvider","provideFoldingRanges","asFoldingRanges","registerFoldingRangeProvider","FoldingRangeKind","Comment","Imports","Region","foldingRanges","r","FoldingRange","startLine","endLine","asFoldingRangeKind","ImplementationFeature","ImplementationRequest","implementationSupport","implementationProvider","provideImplementation","registerImplementationProvider","__awaiter","_arguments","P","generator","fulfilled","step","rejected","_reported","Proposed","WorkDoneProgress","begin","report","location","cancellable","ProgressLocation","Notification","Window","withProgress","progress","cancellationToken","_progress","_infinite","percentage","_cancellationToken","WorkDoneProgressCancelNotification","max","min","delta","increment","ProtocolCodeLens","ProtocolCompletionItem","CompletionItem","ls","CodeBlock","language","diagnostic","asRelatedInformation","asDiagnosticRelatedInformation","information","DiagnosticRelatedInformation","asLocation","Position","asHoverContent","MarkdownString","appendCodeblock","appendMarkdown","appendText","hover","Hover","contents","list","CompletionList","isIncomplete","asCompletionInsertText","itemKind","TextEdit","SignatureHelp","activeSignature","activeParameter","signatures","asSignatureInformations","asSignatureInformation","SignatureInformation","parameters","asParameterInformations","asParameterInformation","ParameterInformation","Location","asLocationResult","asLocationLink","targetUri","targetRange","targetSelectionRange","originSelectionRange","LocationLink","links","locations","asDocumentHighlight","DocumentHighlight","asDocumentHighlightKind","DocumentHighlightKind","Read","Write","asSymbolInformation","asSymbolKind","SymbolInformation","containerName","asDocumentSymbol","selectionRange","children","child","asCommands","kindMapping","asCodeActionKind","parts","CodeAction","WorkspaceEdit","CreateFile","createFile","RenameFile","renameFile","oldUri","newUri","DeleteFile","deleteFile","asColorInformation","asColorPresentation","asFoldingRange","asSelectionRange","SelectionRange","parent","asSelectionRanges","selectionRanges","ProtocolDocumentLink","TypeDefinitionFeature","TypeDefinitionRequest","typeDefinitionSupport","typeDefinitionProvider","provideTypeDefinition","registerTypeDefinitionProvider","defaultDelay","completionPromise","onSuccess","task","delay","cancelTimeout","typedArray","check","thenable","ValueUUID","other","asHex","V4UUID","_randomHex","_oneOf","_timeHighBits","floor","random","_chars","empty","v4","_UUIDPattern","isUUID","test","access","WorkspaceFoldersFeature","asProtocol","WorkspaceFoldersRequest","onDidChangeWorkspaceFolders","didChangeWorkspaceFolders","added","removed","DidChangeWorkspaceFoldersNotification"],"mappings":"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AE,GAAG,EAAE,UAAG,CAAC,KAAK,EAAE;IACvB,GAAG,EAAE,EAAE,GAAG,EAAE,UAAG,CAAC,KAAK,EAAE,KAAK,EAAE,IAAI,EAAE;IACpC,GAAG,EAAE,EAAE,GAAG,EAAE,UAAG,CAAC,KAAK,EAAE;IACvB,GAAG,EAAE,EAAE,GAAG,EAAE,UAAG,CAAC,KAAK,EAAE,KAAK,EAAE,IAAI,EAAE;IACpC,GAAG,EAAE,EAAE,GAAG,EAAE,UAAG,CAAC,KAAK,EAAE;IACvB,GAAG,EAAE,EAAE,GAAG,EAAE,UAAG,CAAC,KAAK,EAAE,KAAK,EAAE,IAAI,EAAE;IACpC,GAAG,EAAE,EAAE,GAAG,EAAE,UAAG,CAAC,KAAK,EAAE;IACvB,GAAG,EAAE,EAAE,GAAG,EAAE,UAAG,CAAC,KAAK,EAAE,KAAK,EAAE,IAAI,EAAE;IACpC,GAAG,EAAE,EAAE,GAAG,EAAE,UAAG,CAAC,KAAK,EAAE;IACvB,GAAG,EAAE,EAAE,GAAG,EAAE,UAAG,CAAC,KAAK,EAAE,KAAK,EAAE,IAAI,EAAE;IACpC,GAAG,EAAE,EAAE,GAAG,EAAE,UAAG,CAAC,KAAK,EAAE;IACvB,GAAG,EAAE,EAAE,GAAG,EAAE,UAAG,CAAC,KAAK,EAAE,KAAK,EAAE,IAAI,EAAE;IACpC,GAAG,EAAE,EAAE,GAAG,EAAE,UAAG,CAAC,KAAK,EAAE;IACvB,GAAG,EAAE,EAAE,GAAG,EAAE,UAAG,CAAC,KAAK,EAAE,KAAK,EAAE,IAAI,EAAE;IACpC,GAAG,EAAE,EAAE,GAAG,EAAE,UAAG,CAAC,KAAK,EAAE;IACvB,GAAG,EAAE,EAAE,GAAG,EAAE,UAAG,CAAC,KAAK,EAAE,KAAK,EAAE,IAAI,EAAE;IACpC,GAAG,EAAE,EAAE,GAAG,EAAE,UAAG,CAAC,KAAK,EAAE;IACvB,GAAG,EAAE,EAAE,GAAG,EAAE,UAAG,CAAC,KAAK,EAAE,KAAK,EAAE,IAAI,EAAE;IACpC,GAAG,EAAE,EAAE,GAAG,EAAE,UAAG,CAAC,KAAK,EAAE;IACvB,GAAG,EAAE,EAAE,GAAG,EAAE,UAAG,CAAC,KAAK,EAAE,KAAK,EAAE,IAAI,EAAE;IACpC,GAAG,EAAE,EAAE,GAAG,EAAE,UAAG,CAAC,KAAK,EAAE;IACvB,GAAG,EAAE,EAAE,GAAG,EAAE,UAAG,CAAC,KAAK,EAAE,KAAK,EAAE,IAAI,EAAE;IACpC,GAAG,EAAE,EAAE,GAAG,EAAE,UAAG,CAAC,KAAK,EAAE;IACvB,GAAG,EAAE,EAAE,GAAG,EAAE,UAAG,CAAC,KAAK,EAAE,KAAK,EAAE,IAAI,EAAE;IACpC,GAAG,EAAE,EAAE,GAAG,EAAE,UAAG,CAAC,KAAK,EAAE;IACvB,GAAG,EAAE,EAAE,GAAG,EAAE,UAAG,CAAC,KAAK,EAAE,KAAK,EAAE,IAAI,EAAE;IACpC,GAAG,EAAE,EAAE,GAAG,EAAE,UAAG,CAAC,KAAK,EAAE;IACvB,GAAG,EAAE,EAAE,GAAG,EAAE,UAAG,CAAC,KAAK,EAAE,KAAK,EAAE,IAAI,EAAE;IACpC,GAAG,EAAE,EAAE,GAAG,EAAE,UAAG,CAAC,KAAK,EAAE;IACvB,GAAG,EAAE,EAAE,GAAG,EAAE,UAAG,CAAC,KAAK,EAAE,KAAK,EAAE,IAAI,EAAE;IACpC,GAAG,EAAE,EAAE,GAAG,EAAE,UAAG,CAAC,KAAK,EAAE;IACvB,GAAG,EAAE,EAAE,GAAG,EAAE,UAAG,CAAC,KAAK,EAAE,KAAK,EAAE,IAAI,EAAE;IACpC,GAAG,EAAE,EAAE,GAAG,EAAE,UAAG,CAAC,KAAK,EAAE;IACvB,GAAG,EAAE,EAAE,GAAG,EAAE,UAAG,CAAC,KAAK,EAAE,KAAK,EAAE,IAAI,EAAE;IACpC,GAAG,EAAE,EAAE,GAAG,EAAE,UAAG,CAAC,KAAK,EAAE;IACvB,GAAG,EAAE,EAAE,GAAG,EAAE,UAAG,CAAC,KAAK,EAAE,KAAK,EAAE,IAAI,EAAE;IACpC,GAAG,EAAE,EAAE,GAAG,EAAE,UAAG,CAAC,KAAK,EAAE;IACvB,GAAG,EAAE,EAAE,GAAG,EAAE,UAAG,CAAC,KAAK,EAAE,KAAK,EAAE,IAAI,EAAE;IACpC,GAAG,EAAE,EAAE,GAAG,EAAE,UAAG,CAAC,KAAK,EAAE;IACvB,GAAG,EAAE,EAAE,GAAG,EAAE,UAAG,CAAC,KAAK,EAA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;;;;;;;;AC3ND,qCAAqC,wqB;;;;;;;;;;;ACArC,qCAAqC,wqB;;;;;;;;;;;ACArC,qCAAqC,olD;;;;;;;;;;;ACArC,qCAAqC,olD;;;;;;;;;;;ACArC,qCAAqC,46B;;;;;;;;;;;ACArC,qCAAqC,46B;;;;;;;;;;;ACArC,qCAAqC,gmF;;;;;;;;;;;ACArC,qCAAqC,gmF;;;;;;;;;;;ACArC,qCAAqC,wkB;;;;;;;;;;;ACArC,qCAAqC,wkB;;;;;;;;;;;ACArC,qCAAqC,4jC;;;;;;;;;;;ACArC,qCAAqC,4jC;;;;;;;;;;;ACArC,qCAAqC,4qB;;;;;;;;;;;ACArC,qCAAqC,orB;;;;;;;;;;;ACArC,qCAAqC,ooB;;;;;;;;;;;ACArC,qCAAqC,ooB;;;;;;;;;;;ACArC,qCAAqC,4e;;;;;;;;;;;ACArC,qCAAqC,g9H;;;;;;;;;;;ACArC,qCAAqC,g9H;;;;;;;;;;;ACArC,qCAAqC,od;;;;;;;;;;;ACArC,qCAAqC,ouC;;;;;;;;;;;ACArC,qCAAqC,ouC;;;;;;;;;;;ACArC,qCAAqC,goB;;;;;;;;;;;ACArC,qCAAqC,goB;;;;;;;;;;;ACArC,qCAAqC,o8C;;;;;;;;;;;ACArC,qCAAqC,o8C;;;;;;;;;;;ACArC,qCAAqC,gkC;;;;;;;;;;;ACArC,qCAAqC,gkC;;;;;;;;;;;ACArC,qCAAqC,onC;;;;;;;;;;;ACArC,qCAAqC,wnC;;;;;;;;;;;ACArC,qCAAqC,wpC;;;;;;;;;;;ACArC,qCAAqC,wpC;;;;;;;;;;;ACArC,qCAAqC,4nC;;;;;;;;;;;ACArC,qCAAqC,4nC;;;;;;;;;;;ACArC,iBAAiB,qBAAuB,0C;;;;;;;;;;;ACAxC,qCAAqC,ojG;;;;;;;;;;;ACArC,qCAAqC,ojG;;;;;;;;;;;ACArC;AACA;AACA,cAAc,mBAAO,CAAC,+NAA8E;AACpG,eAAe,0BAA0B,mBAAmB;AAC5D;;AAEA,4CAA4C,QAAS;AACrD;;AAEA;AACA;AACA,YAAY,mBAAO,CAAC,+GAAwD;AAC5E;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,GAA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;AACjG,kCAAkC,MAAM,iCAAiC,EAAE,YAAY,WAAW,EAAE;AACpG,+BAA+B,iEAAiE,uBAAuB,EAAE,4BAA4B;AACrJ;AACA,KAAK;AACL;AACA;AACA,aAAa,6BAA6B,0BAA0B,aAAa,EAAE,qBAAqB;AACxG,gBAAgB,qDAAqD,oEAAoE,aAAa,EAAE;AACxJ,sBAAsB,sBAAsB,qBAAqB,GAAG;AACpE;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC;AACvC,kCAAkC,SAAS;AAC3C,kCAAkC,WAAW,UAAU;AACvD,yCAAyC,cAAc;AACvD;AACA,6GAA6G,OAAO,UAAU;AAC9H,gFAAgF,iBAAiB,OAAO;AACxG,wDAAwD,gBAAgB,QAAQ,OAAO;AACvF,8CAA8C,gBAAgB,gBAAgB,OAAO;AACrF;AACA,iCAAiC;AACjC;AACA;AACA,SAAS,YAAY,aAAa,OAAO,EAAE,UAAU,WAAW;AAChE,mCAAmC,SAAS;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,MAAM,gBAAgB;AACzC;AACA;AACA;AACA;AACA,iBAAiB,sBAAsB;AACvC;AACA;AACA;AACA;AACA,4BAA4B,sBAAsB;AAClD;AACA;AACA,8CAA8C,cAAc;AAC5D,uCAAuC,mBAAO,CAAC,qGAAgC;AAC/E;AACA,aAAa,mBAAO,CAAC,sGAAa;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oFAAoF,kCAAkC,EAAE;AACxH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,2CAA2C,oCAAoC,EAAE;AACjF,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gFAAgF,0CAA0C,EAAE;AAC5H;AACA,mFAAmF,qBAAqB,EAAE;AAC1G;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,+EAA+E;AAC/E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS,EAAE,EAAE;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4DAA4D,4BAA4B,EAAE;AAC1F,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8DAA8D,iCAAiC;AAC/F;AACA;AACA,yBAAyB;AACzB;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yEAAyE,+BAA+B;AACxG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B,2BAA2B;AAC1D,qCAAqC,uDAAuD,EAAE;AAC9F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kEAAkE,uDAAuD,EAAE;AAC3H,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA,wCAAwC,kDAAkD;AAC1F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kFAAkF,+CAA+C,qEAAqE,EAAE;AACxM;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2FAA2F;AAC3F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6CAA6C;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6CAA6C;AAC7C;AACA;AACA;AACA,6BAA6B;AAC7B,yBAAyB,EAAE,EAAE;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA,+C;;;;;;;;;;;;ACvjBa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc,gBAAgB,sCAAsC,iBAAiB,EAAE;AACvF,6BAA6B,uDAAuD;AACpF;AACA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD;AACA;AACA,gDAAgD,OAAO;AACvD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4CAA4C,QAAQ;AACpD;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC,oCAAoC;AACvE;AACA;AACA;AACA,mCAAmC,MAAM,6BAA6B,EAAE,YAAY,WAAW,EAAE;AACjG,kCAAkC,MAAM,iCAAiC,EAAE,YAAY,WAAW,EAAE;AACpG,+BAA+B,iEAAiE,uBAAuB,EAAE,4BAA4B;AACrJ;AACA,KAAK;AACL;AACA;AACA,aAAa,6BAA6B,0BAA0B,aAAa,EAAE,qBAAqB;AACxG,gBAAgB,qDAAqD,oEAAoE,aAAa,EAAE;AACxJ,sBAAsB,sBAAsB,qBAAqB,GAAG;AACpE;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC;AACvC,kCAAkC,SAAS;AAC3C,kCAAkC,WAAW,UAAU;AACvD,yCAAyC,cAAc;AACvD;AACA,6GAA6G,OAAO,UAAU;AAC9H,gFAAgF,iBAAiB,OAAO;AACxG,wDAAwD,gBAAgB,QAAQ,OAAO;AACvF,8CAA8C,gBAAgB,gBAAgB,OAAO;AACrF;AACA,iCAAiC;AACjC;AACA;AACA,SAAS,YAAY,aAAa,OAAO,EAAE,UAAU,WAAW;AAChE,mCAAmC,SAAS;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB;AACpB;AACA;AACA;AACA,8CAA8C,cAAc;AAC5D,kBAAkB,mBAAO,CAAC,gEAAW;AACrC,8BAA8B,mBAAO,CAAC,mHAAuB;AAC7D,iBAAiB,mBAAO,CAAC,8EAAoB;AAC7C,4BAA4B,mBAAO,CAAC,qJAA6C;AACjF,eAAe,mBAAO,CAAC,iHAAwB;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC,sDAAsD,EAAE;AAC3F;AACA;AACA;AACA;AACA,mCAAmC,sDAAsD,EAAE;AAC3F;AACA;AACA;AACA,wEAAwE,YAAY,aAAa,gBAAgB;AACjH;AACA;AACA;AACA;AACA;AACA,aAAa,EAAE;AACf;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,6EAA6E,wBAAwB,EAAE;AACvG,qEAAqE,wBAAwB,EAAE;AAC/F;AACA;AACA,wDAAwD,mGAAmG;AAC3J,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,mCAAmC,aAAa,oQAAoQ;AACpT;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,oEAAoE,iCAAiC,EAAE;AACvG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA,iCAAiC,YAAY,sBAAsB;AACnE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC,YAAY,gBAAgB;AAC7D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC,gBAAgB;AACvD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gEAAgE,oBAAoB,eAAe,6CAA6C,GAAG,EAAE;AACrJ;AACA;AACA;AACA,0CAA0C,8BAA8B,2BAA2B,EAAE;AACrG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA,iBAAiB;AACjB;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA,mEAAmE,UAAU;AAC7E;AACA;AACA;AACA;AACA,uBAAuB,QAAQ,gBAAgB;AAC/C;AACA;AACA;AACA;AACA,qBAAqB,0BAA0B;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA,6CAA6C,eAAe,EAAE,uBAAuB,YAAY,EAAE;AACnG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yDAAyD,uCAAuC,EAAE;AAClG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,CAAC,mEAAmE;AACpE;AACA,yC;;;;;;;;;;;;;ACtnBA;;;;;;;;;;;;;;kFAckF;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAElF,wGAA+C;AAC/C,uKAA6F;AAC7F,qJAA6C;AAC7C,yIAA2E;AAC3E,6JAAsF;AACtF,mLAA0D;AAG1D;IADA;QAAA,iBA+FC;QA5FsB,YAAO,GAAG,IAAI,0BAAmB,C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AAjB;;AAoEA,IAAY,mBAAZ;;AAAA,WAAY,mBAAZ,EAA+B;AAC3B;AACA;AACA;AACH,CAJD,EAAY,mBAAmB,GAAnB,8DAAmB,EAAnB,CAAZ,E;;;;;;;;;;;AC7NA,SAAS,mBAAO,CAAC,0EAAM;AACvB,SAAS,mBAAO,CAAC,0EAAM;;AAEvB;AACA;AACA;;AAEA;;;;;;;;;;;;ACPA;AACA;AACA;AACA;AACA;AACA,eAAe,SAAS;AACxB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;;;;;;ACzBA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,iCAAiC;;AAEjC;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;;AAEA;AACA,sBAAsB,QAAQ;AAC9B;AACA;AACA;;AAEA;AACA;AACA;;;;;;;;;;;;ACjCA,UAAU,mBAAO,CAAC,4FAAW;AAC7B,kBAAkB,mBAAO,CAAC,oGAAmB;;AAE7C;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,mCAAmC;AACnC;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA,iBAAiB,OAAO;AACxB;AACA;;AAEA;AACA;;AAEA;;;;;;;;;;;;AC5GA,UAAU,mBAAO,CAAC,4FAAW;AAC7B,kBAAkB,mBAAO,CAAC,oGAAmB;;AAE7C;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;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sC,iBAAiB,EAAE;AACnF,yBAAyB,uDAAuD;AAChF;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6DAA6D,iJAAiJ;AAC9M,gBAAgB;AAChB,8DAA8D,0BAA0B,cAAc,YAAY,SAAS,aAAa,UAAU,gBAAgB,aAAa,EAAE;AACjL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC,iBAAiB;AAClD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sEAAsE,YAAY;AAClF;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC,iBAAiB;AAClD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sCAAsC,sBAAsB;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACc,kEAAG,EAAC;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA,sCAAsC,sBAAsB;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA,0BAA0B;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB,2BAA2B;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB,mBAAmB;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mFAAmF;AACnF;AACA;AACA;AACA;AACA;AACA,6EAA6E;AAC7E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;AC1kBA;;AACA;;AAEA,gBAAuB,OAAvB,EAIC;AAAA,MACW,SADX,GACuC,OADvC,CACW,SADX;AAAA,MACsB,YADtB,GACuC,OADvC,CACsB,YADtB;AAEG,MAAM,MAAM,GAAG,OAAO,CAAC,MAAR,IAAkB,IAAI,sBAAJ,EAAjC;;AACA,WAAS,CAAC,MAAV,GAAmB,YAAK;AACpB,QAAM,MAAM,GAAG,QAAQ,CAAC,SAAD,CAAvB;AACA,QAAM,UAAU,GAAG,mCAA0B,MAA1B,EAAkC,MAAlC,CAAnB;AACA,gBAAY,CAAC,UAAD,CAAZ;AACH,GAJD;AAKH;;AAZD;;AAcA,kB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","file":"27.bundle.js","sourcesContent":["/********************************************************************************\n * Copyright (C) 2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { injectable } from 'inversify';\nimport { AbstractDefaultCallHierarchyService, ExtendedDocumentSymbol } from '@theia/callhierarchy/lib/browser/callhierarchy-service-impl';\nimport { CallHierarchyContext } from '@theia/callhierarchy/lib/browser/callhierarchy-context';\nimport { TYPESCRIPT_LANGUAGE_ID } from '../common';\nimport { SymbolInformation, Range, Location, DocumentSymbol } from 'vscode-languageserver-types';\nimport * as utils from '@theia/callhierarchy/lib/browser/utils';\n\n@injectable()\nexport class TypeScriptCallHierarchyService extends AbstractDefaultCallHierarchyService {\n\n    readonly languageId: string = TYPESCRIPT_LANGUAGE_ID;\n\n    /**\n     * Finds the symbol that encloses the definition range of a caller.\n     *\n     * In the case of typescript, a method's definition and all its override definitions\n     * are returned as a reference as well. As these are not calls they have to be filtered.\n     * We also just want ot see the top-most caller symbol.\n     */\n    async getEnclosingCallerSymbol(reference: Location, context: CallHierarchyContext): Promise<ExtendedDocumentSymbol | SymbolInformation | undefined> {\n        const allSymbols = await context.getAllSymbols(reference.uri);\n        if (allSymbols.length === 0) {\n            return undefined;\n        }\n        if (DocumentSymbol.is(allSymbols[0])) {\n            return this.getEnclosingRootSymbol(reference, context);\n        }\n        const symbols = (allSymbols as SymbolInformation[]).filter(s => this.isCallable(s));\n        let bestMatch: SymbolInformation | undefined = undefined;\n        let bestRange: Range | undefined = undefined;\n        for (const candidate of symbols) {\n            const candidateRange = candidate.location.range;\n            if (utils.containsRange(candidateRange, reference.range)) {\n                // as opposed to default, find the topmost (earliest) symbol\n                if (!bestMatch || utils.startsAfter(bestRange!, candidateRange)) {\n                    bestMatch = candidate;\n                    bestRange = candidateRange;\n                }\n            }\n        }\n        if (bestMatch) {\n            // filter references that are in fact definitions\n            const nameLocation = await this.getSymbolNameLocation(bestMatch, context);\n            if (!nameLocation || utils.isSame(nameLocation, reference)) {\n                return undefined;\n            }\n        }\n        return bestMatch;\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2017 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { injectable, inject, postConstruct } from 'inversify';\nimport URI from '@theia/core/lib/common/uri';\nimport { Emitter, Event } from '@theia/core/lib/common/event';\nimport { Deferred } from '@theia/core/lib/common/promise-util';\nimport { PreferenceService, PreferenceScope } from '@theia/core/lib/browser/preferences';\nimport { BaseLanguageClientContribution, Workspace, Languages, LanguageClientFactory, ILanguageClient, State } from '@theia/languages/lib/browser';\nimport { WorkspaceService } from '@theia/workspace/lib/browser';\nimport { WorkspaceVariableContribution } from '@theia/workspace/lib/browser/workspace-variable-contribution';\nimport { TypeScriptInitializationOptions, TypeScriptInitializeResult } from 'typescript-language-server/lib/ts-protocol';\nimport {\n    TYPESCRIPT_LANGUAGE_ID, TYPESCRIPT_LANGUAGE_NAME, TYPESCRIPT_REACT_LANGUAGE_ID, JAVASCRIPT_LANGUAGE_ID, JAVASCRIPT_REACT_LANGUAGE_ID, TypescriptStartParams\n} from '../common';\nimport { TypescriptPreferences } from './typescript-preferences';\nimport { TypescriptVersion, TypescriptVersionService, TypescriptVersionOptions } from '../common/typescript-version-service';\n\n@injectable()\nexport class TypeScriptClientContribution extends BaseLanguageClientContribution {\n\n    readonly id = TYPESCRIPT_LANGUAGE_ID;\n    readonly name = TYPESCRIPT_LANGUAGE_NAME;\n\n    @inject(WorkspaceService)\n    protected readonly workspaceService: WorkspaceService;\n\n    @inject(WorkspaceVariableContribution)\n    protected readonly workspaceVariables: WorkspaceVariableContribution;\n\n    @inject(TypescriptPreferences)\n    protected readonly preferences: TypescriptPreferences;\n\n    @inject(PreferenceService)\n    protected readonly preferenceService: PreferenceService;\n\n    @inject(TypescriptVersionService)\n    protected readonly versionService: TypescriptVersionService;\n\n    protected readonly onDidChangeVersionEmitter = new Emitter<TypescriptVersion | undefined>();\n    readonly onDidChangeVersion: Event<TypescriptVersion | undefined> = this.onDidChangeVersionEmitter.event;\n\n    constructor(\n        @inject(Workspace) protected readonly workspace: Workspace,\n        @inject(Languages) protected readonly languages: Languages,\n        @inject(LanguageClientFactory) protected readonly languageClientFactory: LanguageClientFactory\n    ) {\n        super(workspace, languages, languageClientFactory);\n    }\n\n    @postConstruct()\n    protected init(): void {\n        this.preferences.onPreferenceChanged(e => {\n            if (e.preferenceName === 'typescript.server.log') {\n                this.restart();\n            }\n        });\n        this.onDidChangeVersion(() => this.restart());\n    }\n\n    protected _version: TypescriptVersion | undefined;\n    get version(): TypescriptVersion | undefined {\n        return this._version;\n    }\n    async setVersion(raw: TypescriptVersion | undefined): Promise<void> {\n        const version = await this.validateVersion(raw);\n        if (TypescriptVersion.equals(this._version, version)) {\n            return;\n        }\n        this._version = version;\n        if (version && version.qualifier === 'Workspace') {\n            const tsdkPath = this.workspaceVariables.getWorkspaceRelativePath(new URI(version.uri));\n            if (tsdkPath) {\n                this.preferenceService.set('typescript.tsdk', tsdkPath, PreferenceScope.Workspace);\n            }\n        }\n        this.onDidChangeVersionEmitter.fire(this._version);\n    }\n\n    protected async getStartParameters(): Promise<TypescriptStartParams> {\n        await this.restored.promise;\n        const { version } = this;\n        await this.setVersion(version);\n        return { version };\n    }\n\n    protected get documentSelector(): string[] {\n        return [\n            TYPESCRIPT_LANGUAGE_ID,\n            TYPESCRIPT_REACT_LANGUAGE_ID,\n            JAVASCRIPT_LANGUAGE_ID,\n            JAVASCRIPT_REACT_LANGUAGE_ID\n        ];\n    }\n\n    protected get workspaceContains(): string[] {\n        // FIXME requires https://github.com/eclipse-theia/theia/issues/2359\n        // return [\n        //     \"**/tsconfig.json\",\n        //     \"**/jsconfig.json\",\n        //     \"**/tsconfig.*.json\",\n        //     \"**/jsconfig.*.json\"\n        // ];\n        return [\n            'tsconfig.json',\n            'jsconfig.json'\n        ];\n    }\n\n    protected get initializationOptions(): Partial<TypeScriptInitializationOptions> {\n        const options: Partial<TypeScriptInitializationOptions> = {};\n        const logVerbosity = this.preferences['typescript.server.log'];\n        if (logVerbosity !== 'off') {\n            options.logVerbosity = logVerbosity;\n        }\n        return options;\n    }\n\n    protected _logFileUri: URI | undefined;\n    get logFileUri(): URI | undefined {\n        return this._logFileUri;\n    }\n    protected onReady(languageClient: ILanguageClient): void {\n        if (languageClient.initializeResult) {\n            const initializeResult = languageClient.initializeResult as TypeScriptInitializeResult;\n            this._logFileUri = initializeResult.logFileUri !== undefined ? new URI(initializeResult.logFileUri) : undefined;\n        }\n        languageClient.onDidChangeState(({ newState }) => {\n            if (newState === State.Stopped) {\n                this._logFileUri = undefined;\n            }\n        });\n        super.onReady(languageClient);\n    }\n\n    protected async validateVersion(candidate: TypescriptVersion | undefined): Promise<TypescriptVersion | undefined> {\n        const versions = await this.getVersions();\n        if (candidate && versions.some(version => TypescriptVersion.equals(candidate, version))) {\n            return candidate;\n        }\n        return versions.find(version => version.qualifier === 'Workspace') || versions[0];\n    }\n    async getVersions(): Promise<TypescriptVersion[]> {\n        await Promise.all([this.preferences.ready, this.workspace.ready]);\n        return this.versionService.getVersions(this.versionOptions);\n    }\n    protected get versionOptions(): TypescriptVersionOptions {\n        return {\n            workspaceFolders: this.workspaceService.tryGetRoots().map(({ uri }) => uri),\n            localTsdk: this.preferences['typescript.tsdk']\n        };\n    }\n\n    store(): TypescriptContributionData {\n        return {\n            version: this._version\n        };\n    }\n\n    protected readonly restored = new Deferred();\n    async restore(data: TypescriptContributionData | undefined): Promise<void> {\n        try {\n            if (!this._version) {\n                await this.setVersion(data && data.version);\n            }\n        } finally {\n            this.restored.resolve();\n        }\n    }\n\n}\nexport interface TypescriptContributionData {\n    version?: TypescriptVersion\n}\n","/********************************************************************************\n * Copyright (C) 2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { injectable, inject, postConstruct } from 'inversify';\nimport * as tsp from 'typescript/lib/protocol';\nimport { Commands } from 'typescript-language-server/lib/commands';\nimport {\n    QuickPickService, KeybindingRegistry, KeybindingContribution, QuickPickItem, StorageService, LabelProvider, FrontendApplicationContribution, StatusBar, StatusBarAlignment\n} from '@theia/core/lib/browser';\nimport { ExecuteCommandRequest } from '@theia/languages/lib/browser';\nimport { FileSystemWatcher, FileMoveEvent } from '@theia/filesystem/lib/browser';\nimport { EditorManager, EditorWidget, EDITOR_CONTEXT_MENU, TextEditor } from '@theia/editor/lib/browser';\nimport { CommandContribution, CommandRegistry, Command, MenuModelRegistry, MenuContribution, DisposableCollection } from '@theia/core/lib/common';\nimport { MonacoEditor } from '@theia/monaco/lib/browser/monaco-editor';\nimport { TYPESCRIPT_LANGUAGE_ID, TS_JS_LANGUAGES } from '../common';\nimport { TypeScriptClientContribution, TypescriptContributionData } from './typescript-client-contribution';\nimport { TypeScriptKeybindingContexts } from './typescript-keybinding-contexts';\nimport { TypescriptVersion } from '../common/typescript-version-service';\nimport URI from '@theia/core/lib/common/uri';\n\nexport namespace TypeScriptCommands {\n    export const applyCompletionCodeAction: Command = {\n        id: Commands.APPLY_COMPLETION_CODE_ACTION\n    };\n    // TODO: get rid of me when https://github.com/TypeFox/monaco-languageclient/issues/104 is resolved\n    export const organizeImports: Command = {\n        category: 'TypeScript',\n        label: 'Organize Imports',\n        id: 'typescript.edit.organizeImports'\n    };\n    export const openServerLog: Command = {\n        category: 'TypeScript',\n        label: 'Open Server Log',\n        id: 'typescript.server.openLog'\n    };\n    export const selectVersion: Command = {\n        category: 'TypeScript',\n        label: 'Select Version',\n        id: 'typescript.selectVersion'\n    };\n}\n\n@injectable()\nexport class TypeScriptFrontendContribution implements FrontendApplicationContribution, CommandContribution, MenuContribution, KeybindingContribution {\n\n    @inject(StatusBar)\n    protected readonly statusBar: StatusBar;\n\n    @inject(EditorManager)\n    protected readonly editorManager: EditorManager;\n\n    @inject(QuickPickService)\n    protected readonly quickPickService: QuickPickService;\n\n    @inject(TypeScriptClientContribution)\n    protected readonly clientContribution: TypeScriptClientContribution;\n\n    @inject(FileSystemWatcher)\n    protected readonly fileSystemWatcher: FileSystemWatcher;\n\n    @inject(LabelProvider)\n    protected readonly labelProvider: LabelProvider;\n\n    @inject(StorageService)\n    protected readonly storage: StorageService;\n\n    @postConstruct()\n    protected init(): void {\n        this.fileSystemWatcher.onDidMove(event => this.renameFile(event));\n    }\n\n    onStart(): void {\n        this.restore();\n        this.updateStatusBar();\n        this.editorManager.onCurrentEditorChanged(() => this.updateStatusBar());\n        this.clientContribution.onDidChangeVersion(() => this.updateStatusBar());\n    }\n\n    onStop(): void {\n        this.store();\n    }\n\n    registerCommands(commands: CommandRegistry): void {\n        commands.registerCommand(TypeScriptCommands.applyCompletionCodeAction, {\n            execute: async (file: string, codeActions: tsp.CodeAction[]) => {\n                const codeAction = await this.pickCodeAction(codeActions);\n                return codeAction && this.applyCodeAction(codeAction);\n            }\n        });\n        commands.registerCommand(TypeScriptCommands.organizeImports, {\n            execute: () => this.organizeImports(),\n            isEnabled: () => !!this.currentEditor,\n            isVisible: () => !!this.currentEditor\n        });\n        commands.registerCommand(TypeScriptCommands.openServerLog, {\n            execute: () => this.openServerLog(),\n            isEnabled: () => !!this.clientContribution.logFileUri,\n            isVisible: () => !!this.clientContribution.logFileUri\n        });\n        commands.registerCommand(TypeScriptCommands.selectVersion, {\n            execute: () => this.selectVersion()\n        });\n    }\n\n    registerMenus(menus: MenuModelRegistry): void {\n        menus.registerMenuAction([...EDITOR_CONTEXT_MENU, '1_modification'], {\n            commandId: TypeScriptCommands.organizeImports.id,\n            label: 'Organize Imports'\n        });\n    }\n\n    registerKeybindings(keybindings: KeybindingRegistry): void {\n        keybindings.registerKeybinding({\n            command: TypeScriptCommands.organizeImports.id,\n            context: TypeScriptKeybindingContexts.typescriptEditorTextFocus,\n            keybinding: 'shift+alt+o'\n        });\n    }\n\n    openServerLog(): void {\n        const logFileUri = this.clientContribution.logFileUri;\n        if (logFileUri) {\n            this.editorManager.open(logFileUri);\n        }\n    }\n\n    organizeImports(): void {\n        const editor = MonacoEditor.get(this.currentEditor);\n        if (editor) {\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            const action = editor.getControl().getAction('editor.action.organizeImports') as any;\n            // workaround isSupported check\n            action._run();\n        }\n    }\n\n    get currentEditor(): EditorWidget | undefined {\n        const { currentEditor } = this.editorManager;\n        if (currentEditor && currentEditor.editor.document.languageId === TYPESCRIPT_LANGUAGE_ID) {\n            return currentEditor;\n        }\n        return undefined;\n    }\n\n    protected pickCodeAction(codeActions: tsp.CodeAction[]): Promise<tsp.CodeAction | undefined> {\n        return this.quickPickService.show<tsp.CodeAction>(codeActions.map(value => ({\n            label: value.description,\n            value\n        }), {\n            placeholder: 'Select code action to apply'\n        }));\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    protected async applyCodeAction(codeAction: tsp.CodeAction): Promise<any> {\n        const client = await this.clientContribution.languageClient;\n        return client.sendRequest(ExecuteCommandRequest.type, {\n            command: Commands.APPLY_CODE_ACTION,\n            arguments: [codeAction]\n        });\n    }\n\n    protected async renameFile({ sourceUri, targetUri }: FileMoveEvent): Promise<void> {\n        const client = await this.clientContribution.languageClient;\n        return client.sendRequest(ExecuteCommandRequest.type, {\n            command: Commands.APPLY_RENAME_FILE,\n            arguments: [{\n                sourceUri: sourceUri.toString(),\n                targetUri: targetUri.toString()\n            }]\n        });\n    }\n\n    protected async selectVersion(): Promise<void> {\n        const items: QuickPickItem<TypescriptVersion>[] = [];\n        const currentVersion = this.clientContribution.version;\n        let currentItem: QuickPickItem<TypescriptVersion> | undefined;\n        for (const version of await this.clientContribution.getVersions()) {\n            const item: QuickPickItem<TypescriptVersion> = {\n                label: `Use ${version.qualifier} Version`,\n                description: version.version,\n                detail: this.labelProvider.getLongName(new URI(version.uri)),\n                value: version\n            };\n            if (!currentItem && TypescriptVersion.equals(version, currentVersion)) {\n                currentItem = item;\n            }\n            items.push(item);\n        }\n        if (!currentItem) {\n            currentItem = items[0];\n        }\n        if (currentItem) {\n            currentItem.label = ' ' + currentItem.label;\n        }\n        const selectedVersion = await this.quickPickService.show(items, {\n            placeholder: 'Select the TypeScript version used for JavaScript and TypeScript language features'\n        });\n        if (selectedVersion) {\n            this.clientContribution.setVersion(selectedVersion);\n        }\n    }\n\n    protected storageKey = 'typescript.contribution';\n    protected async restore(): Promise<void> {\n        const data = await this.storage.getData<TypescriptContributionData>(this.storageKey);\n        await this.clientContribution.restore(data);\n    }\n    protected async store(): Promise<void> {\n        const data = this.clientContribution.store();\n        await this.storage.setData(this.storageKey, data);\n    }\n\n    protected readonly toDisposeOnCurrentEditorChanged = new DisposableCollection();\n    protected updateStatusBar(): void {\n        this.toDisposeOnCurrentEditorChanged.dispose();\n\n        const widget = this.editorManager.currentEditor;\n        const editor = widget && widget.editor;\n        this.updateVersionStatus(editor);\n        if (editor) {\n            this.toDisposeOnCurrentEditorChanged.push(\n                editor.onLanguageChanged(() => this.updateVersionStatus(editor))\n            );\n        }\n    }\n    protected updateVersionStatus(editor: TextEditor | undefined): void {\n        const version = this.clientContribution.version;\n        const languageId = editor && editor.document.languageId;\n        if (!languageId || !TS_JS_LANGUAGES.has(languageId) || !version) {\n            this.statusBar.removeElement('editor-ts-version');\n            return;\n        }\n        this.statusBar.setElement('editor-ts-version', {\n            text: version.version,\n            alignment: StatusBarAlignment.RIGHT,\n            priority: 0.9,\n            command: TypeScriptCommands.selectVersion.id\n        });\n    }\n\n}\n","/********************************************************************************\n * Copyright (C) 2018 TypeFox, Ericsson and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { ContainerModule } from 'inversify';\nimport { CommandContribution, MenuContribution } from '@theia/core/lib/common';\nimport { KeybindingContext, KeybindingContribution, WebSocketConnectionProvider, FrontendApplicationContribution } from '@theia/core/lib/browser';\nimport { LanguageClientContribution } from '@theia/languages/lib/browser';\nimport { CallHierarchyService } from '@theia/callhierarchy/lib/browser';\nimport { TypeScriptClientContribution } from './typescript-client-contribution';\nimport { TypeScriptCallHierarchyService } from './typescript-callhierarchy-service';\nimport { TypeScriptFrontendContribution } from './typescript-frontend-contribution';\nimport { TypeScriptEditorTextFocusContext } from './typescript-keybinding-contexts';\nimport { bindTypescriptPreferences } from './typescript-preferences';\nimport { TypescriptVersionService, typescriptVersionPath } from '../common/typescript-version-service';\n\nexport default new ContainerModule(bind => {\n    bindTypescriptPreferences(bind);\n\n    bind(TypescriptVersionService).toDynamicValue(({ container }) =>\n        WebSocketConnectionProvider.createProxy(container, typescriptVersionPath)\n    ).inSingletonScope();\n    bind(TypeScriptClientContribution).toSelf().inSingletonScope();\n    bind(LanguageClientContribution).toService(TypeScriptClientContribution);\n\n    bind(TypeScriptCallHierarchyService).toSelf().inSingletonScope();\n    bind(CallHierarchyService).toService(TypeScriptCallHierarchyService);\n\n    bind(TypeScriptFrontendContribution).toSelf().inSingletonScope();\n    bind(CommandContribution).toService(TypeScriptFrontendContribution);\n    bind(MenuContribution).toService(TypeScriptFrontendContribution);\n    bind(KeybindingContribution).toService(TypeScriptFrontendContribution);\n    bind(FrontendApplicationContribution).toService(TypeScriptFrontendContribution);\n\n    bind(KeybindingContext).to(TypeScriptEditorTextFocusContext).inSingletonScope();\n});\n","/********************************************************************************\n * Copyright (C) 2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { injectable } from 'inversify';\nimport { EditorTextFocusContext, EditorWidget } from '@theia/editor/lib/browser';\nimport { TYPESCRIPT_LANGUAGE_ID } from '../common';\n\nexport namespace TypeScriptKeybindingContexts {\n    export const typescriptEditorTextFocus = 'typescriptEditorTextFocus';\n}\n\n@injectable()\nexport class TypeScriptEditorTextFocusContext extends EditorTextFocusContext {\n\n    readonly id: string = TypeScriptKeybindingContexts.typescriptEditorTextFocus;\n\n    protected canHandle(widget: EditorWidget): boolean {\n        return super.canHandle(widget) && widget.editor.document.languageId === TYPESCRIPT_LANGUAGE_ID;\n    }\n\n}\n","/********************************************************************************\n * Copyright (C) 2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { interfaces } from 'inversify';\nimport {\n    createPreferenceProxy,\n    PreferenceProxy,\n    PreferenceService,\n    PreferenceContribution,\n    PreferenceSchema,\n    PreferenceChangeEvent\n} from '@theia/core/lib/browser/preferences';\n\nexport const typescriptPreferenceSchema: PreferenceSchema = {\n    'type': 'object',\n    'properties': {\n        'typescript.server.log': {\n            'type': 'string',\n            'enum': [\n                'off',\n                'terse',\n                'normal',\n                'verbose'\n            ],\n            'default': 'off',\n            // eslint-disable-next-line max-len\n            'description': 'Enables logging of the TS server to a file. This log can be used to diagnose TS Server issues. The log may contain file paths, source code, and other potentially sensitive information from your project.'\n        },\n        'typescript.tsdk': {\n            'type': [\n                'string',\n                'null'\n            ],\n            // eslint-disable-next-line no-null/no-null\n            'default': null,\n            'description': 'Specifies the folder path containing the tsserver and lib*.d.ts files to use.',\n            'scope': 'window'\n        }\n    }\n};\n\nexport interface TypescriptConfiguration {\n    'typescript.server.log': 'off' | 'terse' | 'normal' | 'verbose'\n    'typescript.tsdk'?: string\n}\nexport type TypescriptPreferenceChange = PreferenceChangeEvent<TypescriptConfiguration>;\n\nexport const TypescriptPreferences = Symbol('TypescriptPreferences');\nexport type TypescriptPreferences = PreferenceProxy<TypescriptConfiguration>;\n\nexport function createTypescriptPreferences(preferences: PreferenceService): TypescriptPreferences {\n    return createPreferenceProxy(preferences, typescriptPreferenceSchema);\n}\n\nexport function bindTypescriptPreferences(bind: interfaces.Bind): void {\n    bind(TypescriptPreferences).toDynamicValue(ctx => {\n        const preferences = ctx.container.get<PreferenceService>(PreferenceService);\n        return createTypescriptPreferences(preferences);\n    }).inSingletonScope();\n\n    bind(PreferenceContribution).toConstantValue({ schema: typescriptPreferenceSchema });\n}\n","/********************************************************************************\n * Copyright (C) 2017 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { TypescriptVersion } from './typescript-version-service';\n\nexport const TYPESCRIPT_LANGUAGE_ID = 'typescript';\nexport const TYPESCRIPT_LANGUAGE_NAME = 'TypeScript';\n\nexport const TYPESCRIPT_REACT_LANGUAGE_ID = 'typescriptreact';\nexport const TYPESCRIPT_REACT_LANGUAGE_NAME = 'TypeScript React';\n\nexport const JAVASCRIPT_LANGUAGE_ID = 'javascript';\nexport const JAVASCRIPT_LANGUAGE_NAME = 'JavaScript';\n\nexport const JAVASCRIPT_REACT_LANGUAGE_ID = 'javascriptreact';\nexport const JAVASCRIPT_REACT_LANGUAGE_NAME = 'JavaScript React';\n\nexport const JSX_TAGS_LANGUAGE_ID = 'jsx-tags';\n\nexport const TS_JS_LANGUAGES = new Set([\n    TYPESCRIPT_LANGUAGE_ID,\n    TYPESCRIPT_REACT_LANGUAGE_ID,\n    JAVASCRIPT_LANGUAGE_ID,\n    JAVASCRIPT_REACT_LANGUAGE_ID,\n    JSX_TAGS_LANGUAGE_ID\n]);\n\nexport interface TypescriptStartParams {\n    version?: TypescriptVersion\n}\n","/********************************************************************************\n * Copyright (C) 2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nexport const typescriptVersionPath = '/services/ts-version';\n\nexport type TypescriptVersionQualifier = 'Bundled' | 'Workspace';\nexport interface TypescriptVersion {\n    uri: string\n    version: string\n    qualifier: TypescriptVersionQualifier\n}\nexport namespace TypescriptVersion {\n    export function equals(one: TypescriptVersion | undefined, another: TypescriptVersion | undefined): boolean {\n        return JSON.stringify({ version: one }) === JSON.stringify({ version: another });\n    }\n}\n\nexport interface TypescriptVersionOptions {\n    workspaceFolders: string[]\n    localTsdk?: string\n}\n\nexport const TypescriptVersionService = Symbol('TypescriptVersionService');\nexport interface TypescriptVersionService {\n    getVersions(options: TypescriptVersionOptions): Promise<TypescriptVersion[]>\n}\n","/********************************************************************************\n * Copyright (C) 2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nconst isElectron: () => boolean = require('is-electron');\n\n/**\n * The electron specific environment.\n */\nclass ElectronEnv {\n\n    /**\n     * Environment variable that can be accessed on the `process` to check if running in electron or not.\n     */\n    readonly THEIA_ELECTRON_VERSION = 'THEIA_ELECTRON_VERSION';\n\n    /**\n     * `true` if running in electron. Otherwise, `false`.\n     *\n     * Can be called from both the `main` and the render process. Also works for forked cluster workers.\n     */\n    is(): boolean {\n        // When forking a new process from the cluster, we can rely neither on `process.versions` nor `process.argv`.\n        // Se we look into the `process.env` as well. `is-electron` does not do it for us.\n        return isElectron() || typeof process !== 'undefined' && typeof process.env === 'object' && !!process.env.THEIA_ELECTRON_VERSION;\n    }\n\n    /**\n     * `true` if running in Electron in development mode. Otherwise, `false`.\n     *\n     * Cannot be used from the browser. From the browser, it is always `false`.\n     */\n    isDevMode(): boolean {\n        return this.is()\n            && typeof process !== 'undefined'\n            // `defaultApp` does not exist on the Node.js API, but on electron (`electron.d.ts`).\n            && ((process as any).defaultApp || /node_modules[/]electron[/]/.test(process.execPath)); // eslint-disable-line @typescript-eslint/no-explicit-any\n    }\n\n    /**\n     * Creates and return with a new environment object which always contains the `ELECTRON_RUN_AS_NODE: 1` property pair.\n     * This should be used to `spawn` and `fork` a new Node.js process from the Node.js shipped with Electron. Otherwise, a new Electron\n     * process will be spawned which [has side-effects](https://github.com/eclipse-theia/theia/issues/5385).\n     *\n     * If called from the backend and the `env` argument is not defined, it falls back to `process.env` such as Node.js behaves\n     * with the [`SpawnOptions`](https://nodejs.org/api/child_process.html#child_process_child_process_spawn_command_args_options).\n     * If `env` is defined, it will be shallow-copied.\n     *\n     * Calling this function from the frontend does not make any sense, hence throw an error.\n     */\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    runAsNodeEnv(env?: any): any & { ELECTRON_RUN_AS_NODE: 1 } {\n        if (typeof process === 'undefined') {\n            throw new Error(\"'process' cannot be undefined.\");\n        }\n        return {\n            ...(env === undefined ? process.env : env),\n            ELECTRON_RUN_AS_NODE: 1\n        };\n    }\n\n}\n\nconst electron = new ElectronEnv();\nconst environment: Readonly<{ electron: ElectronEnv }> = { electron };\nexport { environment };\n","/********************************************************************************\n * Copyright (C) 2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { ILanguageClient } from '@theia/languages/lib/browser';\nimport {\n    ReferencesRequest, DocumentSymbolRequest, DefinitionRequest, TextDocumentPositionParams,\n    TextDocumentIdentifier, SymbolInformation, Location, Position, DocumentSymbol, ReferenceParams, LocationLink, DocumentUri\n} from 'monaco-languageclient/lib/services';\nimport * as utils from './utils';\nimport { ILogger, Disposable } from '@theia/core';\nimport { MonacoTextModelService } from '@theia/monaco/lib/browser/monaco-text-model-service';\nimport URI from '@theia/core/lib/common/uri';\n\nexport class CallHierarchyContext implements Disposable {\n\n    protected readonly symbolCache = new Map<string, DocumentSymbol[] | SymbolInformation[]>();\n    protected readonly disposables: Disposable[] = [];\n\n    constructor(protected readonly languageClient: ILanguageClient,\n        protected readonly textModelService: MonacoTextModelService,\n        protected readonly logger: ILogger) { }\n\n    async getAllSymbols(uri: string): Promise<DocumentSymbol[] | SymbolInformation[]> {\n        const cachedSymbols = this.symbolCache.get(uri);\n        if (cachedSymbols) {\n            return cachedSymbols;\n        }\n        const result = await this.languageClient.sendRequest(DocumentSymbolRequest.type, {\n            textDocument: TextDocumentIdentifier.create(uri)\n        });\n        const symbols = (result || []) as DocumentSymbol[] | SymbolInformation[];\n        this.symbolCache.set(uri, symbols);\n        return symbols;\n    }\n\n    // tslint:disable-next-line:typedef\n    async getEditorModelReference(uri: string) {\n        const model = await this.textModelService.createModelReference(new URI(uri));\n        this.disposables.push(model);\n        return model;\n    }\n\n    async getDefinitionLocation(uri: DocumentUri, position: Position): Promise<Location | undefined> {\n\n        // Definition can be null\n        // eslint-disable-next-line no-null/no-null\n        let locations: Location | Location[] | LocationLink[] | null = null;\n        try {\n            locations = await this.languageClient.sendRequest(DefinitionRequest.type, <TextDocumentPositionParams>{\n                position: position,\n                textDocument: { uri }\n            });\n        } catch (error) {\n            this.logger.error(`Error from definitions request: ${uri}#${position.line}/${position.character}`, error);\n        }\n        if (!locations) {\n            return undefined;\n        }\n        const targetLocation = Array.isArray(locations) ? locations[0] : locations;\n        return LocationLink.is(targetLocation) ? {\n            uri: targetLocation.targetUri,\n            range: targetLocation.targetSelectionRange\n        } : targetLocation;\n    }\n\n    async getCallerReferences(definition: Location): Promise<Location[]> {\n        try {\n            const references = await this.languageClient.sendRequest(ReferencesRequest.type, <ReferenceParams>{\n                context: {\n                    includeDeclaration: false // TODO find out, why definitions are still contained\n                },\n                position: {\n                    line: definition.range.start.line,\n                    character: definition.range.start.character\n                },\n                textDocument: {\n                    uri: definition.uri\n                }\n            });\n            const uniqueReferences = utils.filterUnique(references);\n            const filteredReferences = utils.filterSame(uniqueReferences, definition);\n            return filteredReferences;\n        } catch (error) {\n            this.logger.error('Error from references request', error);\n            return [];\n        }\n    }\n\n    dispose(): void {\n        this.disposables.forEach(element => {\n            element.dispose();\n        });\n        this.symbolCache.clear();\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { injectable, inject } from 'inversify';\nimport { MenuModelRegistry, Command, CommandRegistry } from '@theia/core/lib/common';\nimport { AbstractViewContribution, OpenViewArguments, KeybindingRegistry } from '@theia/core/lib/browser';\nimport { EDITOR_CONTEXT_MENU } from '@theia/editor/lib/browser';\nimport { CallHierarchyTreeWidget } from './callhierarchy-tree/callhierarchy-tree-widget';\nimport { CALLHIERARCHY_ID } from './callhierarchy';\nimport { CurrentEditorAccess } from './current-editor-access';\nimport { CallHierarchyServiceProvider } from './callhierarchy-service';\nimport URI from '@theia/core/lib/common/uri';\n\nexport const CALL_HIERARCHY_TOGGLE_COMMAND_ID = 'callhierachy:toggle';\nexport const CALL_HIERARCHY_LABEL = 'Call Hierarchy';\n\nexport namespace CallHierarchyCommands {\n    export const OPEN: Command = {\n        id: 'callhierarchy:open',\n        label: 'Open Call Hierarchy'\n    };\n}\n\n@injectable()\nexport class CallHierarchyContribution extends AbstractViewContribution<CallHierarchyTreeWidget> {\n\n    @inject(CurrentEditorAccess) protected readonly editorAccess: CurrentEditorAccess;\n    @inject(CallHierarchyServiceProvider) protected readonly callHierarchyServiceProvider: CallHierarchyServiceProvider;\n    constructor() {\n        super({\n            widgetId: CALLHIERARCHY_ID,\n            widgetName: CALL_HIERARCHY_LABEL,\n            defaultWidgetOptions: {\n                area: 'bottom'\n            },\n            toggleCommandId: CALL_HIERARCHY_TOGGLE_COMMAND_ID,\n            toggleKeybinding: 'ctrlcmd+shift+f1'\n        });\n    }\n\n    protected isCallHierarchyAvailable(): boolean {\n        const selection = this.editorAccess.getSelection();\n        const languageId = this.editorAccess.getLanguageId();\n        return !!selection && !!languageId && !!this.callHierarchyServiceProvider.get(languageId, new URI(selection.uri));\n    }\n\n    async openView(args?: Partial<OpenViewArguments>): Promise<CallHierarchyTreeWidget> {\n        const widget = await super.openView(args);\n        const selection = this.editorAccess.getSelection();\n        const languageId = this.editorAccess.getLanguageId();\n        widget.initializeModel(selection, languageId);\n        return widget;\n    }\n\n    registerCommands(commands: CommandRegistry): void {\n        commands.registerCommand(CallHierarchyCommands.OPEN, {\n            execute: () => this.openView({\n                toggle: false,\n                activate: true\n            }),\n            isEnabled: this.isCallHierarchyAvailable.bind(this)\n        });\n        super.registerCommands(commands);\n    }\n\n    registerMenus(menus: MenuModelRegistry): void {\n        const menuPath = [...EDITOR_CONTEXT_MENU, 'navigation'];\n        menus.registerMenuAction(menuPath, {\n            commandId: CallHierarchyCommands.OPEN.id,\n            label: CALL_HIERARCHY_LABEL\n        });\n        super.registerMenus(menus);\n    }\n\n    registerKeybindings(keybindings: KeybindingRegistry): void {\n        super.registerKeybindings(keybindings);\n        keybindings.registerKeybinding({\n            command: CallHierarchyCommands.OPEN.id,\n            keybinding: 'ctrlcmd+f1'\n        });\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { CallHierarchyContribution } from './callhierarchy-contribution';\nimport { bindContributionProvider } from '@theia/core/lib/common';\nimport { CallHierarchyService, CallHierarchyServiceProvider } from './callhierarchy-service';\nimport { WidgetFactory, bindViewContribution } from '@theia/core/lib/browser';\nimport { CALLHIERARCHY_ID } from './callhierarchy';\nimport { createHierarchyTreeWidget } from './callhierarchy-tree';\nimport { CurrentEditorAccess } from './current-editor-access';\n\nimport { ContainerModule } from 'inversify';\n\nimport '../../src/browser/style/index.css';\n\nexport default new ContainerModule(bind => {\n    bind(CurrentEditorAccess).toSelf().inSingletonScope();\n\n    bindContributionProvider(bind, CallHierarchyService);\n    bind(CallHierarchyServiceProvider).to(CallHierarchyServiceProvider).inSingletonScope();\n\n    bindViewContribution(bind, CallHierarchyContribution);\n\n    bind(WidgetFactory).toDynamicValue(context => ({\n        id: CALLHIERARCHY_ID,\n        createWidget: () => createHierarchyTreeWidget(context.container)\n    }));\n});\n","/********************************************************************************\n * Copyright (C) 2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { injectable, inject } from 'inversify';\nimport { LanguageSelector } from '@theia/languages/lib/common/language-selector';\nimport { LanguageClientProvider } from '@theia/languages/lib/browser/language-client-provider';\nimport {\n    SymbolInformation, Location, Position, Range, SymbolKind, DocumentSymbol, DocumentUri\n} from 'monaco-languageclient/lib/services';\nimport * as utils from './utils';\nimport { Definition, Caller } from './callhierarchy';\nimport { CallHierarchyService } from './callhierarchy-service';\nimport { ILogger } from '@theia/core';\nimport { MonacoTextModelService } from '@theia/monaco/lib/browser/monaco-text-model-service';\nimport { CallHierarchyContext } from './callhierarchy-context';\n\nexport type ExtendedDocumentSymbol = DocumentSymbol & Location & { containerName: string };\n\n@injectable()\nexport abstract class AbstractDefaultCallHierarchyService implements CallHierarchyService {\n    @inject(LanguageClientProvider) readonly languageClientProvider: LanguageClientProvider;\n    @inject(ILogger) readonly logger: ILogger;\n    @inject(MonacoTextModelService) readonly textModelService: MonacoTextModelService;\n\n    abstract get languageId(): string;\n\n    get selector(): LanguageSelector {\n        return this.languageId;\n    }\n\n    /**\n     * Returns root definition of caller hierarchy.\n     */\n    public async getRootDefinition(uri: DocumentUri, position: Position): Promise<Definition | undefined> {\n        return this.withContext(async services => {\n            const definitionLocation = await services.getDefinitionLocation(uri, position);\n            if (!definitionLocation) {\n                return undefined;\n            }\n            const definitionSymbol = await this.getEnclosingRootSymbol(definitionLocation, services);\n            if (!definitionSymbol) {\n                return undefined;\n            }\n            return this.toDefinition(definitionSymbol, services);\n        });\n    }\n\n    /**\n     * Returns next level of caller definitions.\n     */\n    public async getCallers(definition: Definition): Promise<Caller[] | undefined> {\n        return this.withContext(async services => {\n            const callerReferences = await services.getCallerReferences(definition.location);\n            const callers = this.createCallers(callerReferences, services);\n            return callers;\n        });\n    }\n\n    protected async withContext<T>(lambda: (context: CallHierarchyContext) => Promise<T>): Promise<T | undefined> {\n        try {\n            const context = await this.createContext();\n            if (context) {\n                const result = await lambda.call(this, context);\n                context.dispose();\n                return result;\n            }\n        } catch (error) {\n            this.logger.error('Error getting language client', error);\n        }\n        return undefined;\n    }\n\n    protected async createContext(): Promise<CallHierarchyContext | undefined> {\n        const languageClient = await this.languageClientProvider.getLanguageClient(this.languageId);\n        if (!languageClient) {\n            this.logger.error('No language client with ID ' + this.languageId);\n            return undefined;\n        } else {\n            return new CallHierarchyContext(languageClient, this.textModelService, this.logger);\n        }\n    }\n\n    /**\n     * Creates callers for given references and method symbols.\n     */\n    protected async createCallers(callerReferences: Location[], context: CallHierarchyContext): Promise<Caller[]> {\n        const result: Caller[] = [];\n        const caller2references = new Map<ExtendedDocumentSymbol | SymbolInformation, Location[]>();\n        for (const reference of callerReferences) {\n            const callerSymbol = await this.getEnclosingCallerSymbol(reference, context);\n            if (callerSymbol) {\n                const references = caller2references.get(callerSymbol);\n                if (references) {\n                    references.push(reference);\n                } else {\n                    caller2references.set(callerSymbol, [reference]);\n                }\n            }\n        }\n        for (const callerSymbol of caller2references.keys()) {\n            const locations = caller2references.get(callerSymbol);\n            if (locations) {\n                const definition = await this.toDefinition(callerSymbol, context);\n                if (definition) {\n                    const caller = this.toCaller(definition, locations);\n                    result.push(caller);\n                }\n            }\n        }\n        return result;\n    }\n\n    protected toCaller(def: Definition, references: Location[]): Caller {\n        return <Caller>{ callerDefinition: def, references: references.map(ref => ref.range) };\n    }\n\n    protected async toDefinition(symbol: ExtendedDocumentSymbol | SymbolInformation, context: CallHierarchyContext): Promise<Definition | undefined> {\n        const location = await this.getSymbolNameLocation(symbol, context);\n        if (!location) {\n            return undefined;\n        }\n        const symbolName = symbol.name;\n        const symbolKind = symbol.kind;\n        const containerName = symbol.containerName;\n        const selectionRange = location.range;\n        return { location, selectionRange, symbolName, symbolKind, containerName };\n    }\n    /**\n     * Override this to configure the callables of your language.\n     */\n    protected isCallable(symbol: DocumentSymbol | SymbolInformation): boolean {\n        switch (symbol.kind) {\n            case SymbolKind.Constant:\n            case SymbolKind.Constructor:\n            case SymbolKind.Field:\n            case SymbolKind.Function:\n            case SymbolKind.Method:\n            case SymbolKind.Property:\n            case SymbolKind.Variable:\n                return true;\n            default:\n                return false;\n        }\n    }\n\n    /**\n     * Finds the symbol that encloses the definition range of the root element\n     *\n     * As symbols can be nested, we are looking for the one with the smallest region.\n     * As we only check regions that contain the definition, that is the one with the\n     * latest start position.\n     */\n    protected async getEnclosingRootSymbol(definition: Location, context: CallHierarchyContext): Promise<ExtendedDocumentSymbol | SymbolInformation | undefined> {\n        const allSymbols = await context.getAllSymbols(definition.uri);\n        if (allSymbols.length === 0) {\n            return undefined;\n        }\n        if (DocumentSymbol.is(allSymbols[0])) {\n            const symbols = (allSymbols as DocumentSymbol[]);\n            const containsDefinition = (symbol: DocumentSymbol) => utils.containsRange(symbol.range, definition.range);\n            for (const symbol of symbols) {\n                let containerName = definition.uri.split('/').pop();\n                let candidate = containsDefinition(symbol) ? symbol : undefined;\n                outer: while (candidate) {\n                    const children = candidate.children || [];\n                    for (const child of children) {\n                        if (containsDefinition(child)) {\n                            containerName = candidate.name;\n                            candidate = child;\n                            continue outer;\n                        }\n                    }\n                    break;\n                }\n                if (candidate) {\n                    return <ExtendedDocumentSymbol>{ uri: definition.uri, containerName, ...candidate };\n                }\n            }\n            return undefined;\n        } else {\n            const symbols = (allSymbols as SymbolInformation[]).filter(s => this.isCallable(s));\n            let bestMatch: SymbolInformation | undefined = undefined;\n            let bestRange: Range | undefined = undefined;\n            for (const candidate of symbols) {\n                const candidateRange = candidate.location.range;\n                if (utils.containsRange(candidateRange, definition.range)) {\n                    if (!bestMatch || utils.startsAfter(candidateRange, bestRange!)) {\n                        bestMatch = candidate;\n                        bestRange = candidateRange;\n                    }\n                }\n            }\n            return bestMatch;\n        }\n    }\n\n    /**\n     * Finds the symbol that encloses the reference range of a caller\n     */\n    protected async getEnclosingCallerSymbol(reference: Location, context: CallHierarchyContext): Promise<ExtendedDocumentSymbol | SymbolInformation | undefined> {\n        return this.getEnclosingRootSymbol(reference, context);\n    }\n\n    /**\n     * Finds the location of its name within a symbol's location.\n     */\n    protected async getSymbolNameLocation(symbol: ExtendedDocumentSymbol | SymbolInformation, context: CallHierarchyContext): Promise<Location | undefined> {\n        const symbolLocation: Location = DocumentSymbol.is(symbol) ? symbol : symbol.location;\n        const model = await context.getEditorModelReference(symbolLocation.uri);\n        let position = new monaco.Position(\n            symbolLocation.range.start.line + 1,\n            symbolLocation.range.start.character + 1\n        );\n        const endPosition = new monaco.Position(\n            symbolLocation.range.end.line + 1,\n            symbolLocation.range.end.character + 1\n        );\n        do {\n            const word = model.object.textEditorModel.getWordAtPosition(position);\n            if (word && word.word === symbol.name) {\n                const range = Range.create(\n                    Position.create(position.lineNumber - 1, position.column - 1),\n                    Position.create(position.lineNumber - 1, position.column - 1 + symbol.name.length));\n                return Location.create(symbolLocation.uri, range);\n            }\n            const delta = (word) ? word.word.length + 1 : 1;\n            position = model.object.textEditorModel.modifyPosition(position, delta);\n        } while (position.isBefore(endPosition));\n        return undefined;\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { injectable, inject, named, postConstruct } from 'inversify';\nimport { Position, DocumentUri } from 'vscode-languageserver-types';\nimport { Definition, Caller, Callee } from './callhierarchy';\nimport { ContributionProvider } from '@theia/core/lib/common';\nimport { LanguageSelector, score } from '@theia/languages/lib/common/language-selector';\nimport URI from '@theia/core/lib/common/uri';\nimport { Disposable } from '@theia/core/lib/common';\nimport { CancellationToken } from '@theia/core';\n\nexport const CallHierarchyService = Symbol('CallHierarchyService');\n\nexport interface CallHierarchyService {\n\n    readonly selector: LanguageSelector;\n\n    getRootDefinition(uri: DocumentUri, position: Position, cancellationToken: CancellationToken): Promise<Definition | undefined>\n    getCallers(definition: Definition, cancellationToken: CancellationToken): Promise<Caller[] | undefined>\n    getCallees?(definition: Definition, cancellationToken: CancellationToken): Promise<Callee[] | undefined>\n}\n\n@injectable()\nexport class CallHierarchyServiceProvider {\n\n    @inject(ContributionProvider) @named(CallHierarchyService)\n    protected readonly contributions: ContributionProvider<CallHierarchyService>;\n\n    private services: CallHierarchyService[] = [];\n\n    @postConstruct()\n    init(): void {\n        this.services = this.services.concat(this.contributions.getContributions());\n    }\n\n    get(languageId: string, uri: URI): CallHierarchyService | undefined {\n\n        return this.services.sort(\n            (left, right) =>\n                score(right.selector, uri.scheme, uri.path.toString(), languageId, true) - score(left.selector, uri.scheme, uri.path.toString(), languageId, true))[0];\n    }\n\n    add(service: CallHierarchyService): Disposable {\n        this.services.push(service);\n        const that = this;\n        return {\n            dispose: () => {\n                that.remove(service);\n            }\n        };\n    }\n\n    private remove(service: CallHierarchyService): boolean {\n        const length = this.services.length;\n        this.services = this.services.filter(value => value !== service);\n        return length !== this.services.length;\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { interfaces, Container } from 'inversify';\nimport { createTreeContainer, Tree, TreeImpl, TreeModel, TreeModelImpl, TreeWidget } from '@theia/core/lib/browser';\nimport { CallHierarchyTree } from './callhierarchy-tree';\nimport { CallHierarchyTreeModel } from './callhierarchy-tree-model';\nimport { CallHierarchyTreeWidget } from './callhierarchy-tree-widget';\n\nfunction createHierarchyTreeContainer(parent: interfaces.Container): Container {\n    const child = createTreeContainer(parent);\n\n    child.unbind(TreeImpl);\n    child.bind(CallHierarchyTree).toSelf();\n    child.rebind(Tree).toService(CallHierarchyTree);\n\n    child.unbind(TreeModelImpl);\n    child.bind(CallHierarchyTreeModel).toSelf();\n    child.rebind(TreeModel).toService(CallHierarchyTreeModel);\n\n    child.bind(CallHierarchyTreeWidget).toSelf();\n    child.rebind(TreeWidget).toService(CallHierarchyTreeWidget);\n\n    return child;\n}\n\nexport function createHierarchyTreeWidget(parent: interfaces.Container): CallHierarchyTreeWidget {\n    return createHierarchyTreeContainer(parent).get<CallHierarchyTreeWidget>(CallHierarchyTreeWidget);\n}\n","/********************************************************************************\n * Copyright (C) 2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { injectable, inject } from 'inversify';\nimport { TreeModelImpl, TreeNode } from '@theia/core/lib/browser';\nimport { CallHierarchyTree, DefinitionNode } from './callhierarchy-tree';\nimport { CallHierarchyServiceProvider } from '../callhierarchy-service';\nimport { Position } from 'vscode-languageserver-types';\nimport URI from '@theia/core/lib/common/uri';\nimport { CancellationTokenSource } from '@theia/core/lib/common/cancellation';\n\n@injectable()\nexport class CallHierarchyTreeModel extends TreeModelImpl {\n\n    private _languageId: string | undefined;\n\n    @inject(CallHierarchyTree) protected readonly tree: CallHierarchyTree;\n    @inject(CallHierarchyServiceProvider) protected readonly callHierarchyServiceProvider: CallHierarchyServiceProvider;\n\n    getTree(): CallHierarchyTree {\n        return this.tree;\n    }\n\n    get languageId(): string | undefined {\n        return this._languageId;\n    }\n\n    async initializeCallHierarchy(languageId: string | undefined, uri: string | undefined, position: Position | undefined): Promise<void> {\n        this.tree.root = undefined;\n        this.tree.callHierarchyService = undefined;\n        this._languageId = languageId;\n        if (languageId && uri && position) {\n            const callHierarchyService = this.callHierarchyServiceProvider.get(languageId, new URI(uri));\n            if (callHierarchyService) {\n                this.tree.callHierarchyService = callHierarchyService;\n                const cancellationSource = new CancellationTokenSource();\n                const rootDefinition = await callHierarchyService.getRootDefinition(uri, position, cancellationSource.token);\n                if (rootDefinition) {\n                    const rootNode = DefinitionNode.create(rootDefinition, undefined);\n                    this.tree.root = rootNode;\n                }\n            }\n        }\n    }\n\n    protected doOpenNode(node: TreeNode): void {\n        // do nothing (in particular do not expand the node)\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { injectable, inject } from 'inversify';\nimport {\n    ContextMenuRenderer, TreeWidget, NodeProps, TreeProps, TreeNode,\n    TreeModel, DockPanel\n} from '@theia/core/lib/browser';\nimport { LabelProvider } from '@theia/core/lib/browser/label-provider';\nimport { DefinitionNode, CallerNode } from './callhierarchy-tree';\nimport { CallHierarchyTreeModel } from './callhierarchy-tree-model';\nimport { CALLHIERARCHY_ID, Definition, Caller } from '../callhierarchy';\nimport URI from '@theia/core/lib/common/uri';\nimport { Location, Range, SymbolKind, DocumentUri } from 'vscode-languageserver-types';\nimport { EditorManager } from '@theia/editor/lib/browser';\nimport * as React from 'react';\n\nexport const HIERARCHY_TREE_CLASS = 'theia-CallHierarchyTree';\nexport const DEFINITION_NODE_CLASS = 'theia-CallHierarchyTreeNode';\nexport const DEFINITION_ICON_CLASS = 'theia-CallHierarchyTreeNodeIcon';\n\n@injectable()\nexport class CallHierarchyTreeWidget extends TreeWidget {\n\n    constructor(\n        @inject(TreeProps) readonly props: TreeProps,\n        @inject(CallHierarchyTreeModel) readonly model: CallHierarchyTreeModel,\n        @inject(ContextMenuRenderer) contextMenuRenderer: ContextMenuRenderer,\n        @inject(LabelProvider) protected readonly labelProvider: LabelProvider,\n        @inject(EditorManager) readonly editorManager: EditorManager\n    ) {\n        super(props, model, contextMenuRenderer);\n\n        this.id = CALLHIERARCHY_ID;\n        this.title.label = 'Call Hierarchy';\n        this.title.caption = 'Call Hierarchy';\n        this.title.iconClass = 'fa call-hierarchy-tab-icon';\n        this.title.closable = true;\n        this.addClass(HIERARCHY_TREE_CLASS);\n        this.toDispose.push(this.model.onSelectionChanged(selection => {\n            const node = selection[0];\n            if (node) {\n                this.openEditor(node, true);\n            }\n        }));\n        this.toDispose.push(this.model.onOpenNode((node: TreeNode) => {\n            this.openEditor(node, false);\n        }));\n        this.toDispose.push(\n            this.labelProvider.onDidChange(() => this.update())\n        );\n    }\n\n    initializeModel(selection: Location | undefined, languageId: string | undefined): void {\n        this.model.initializeCallHierarchy(languageId, selection ? selection.uri : undefined, selection ? selection.range.start : undefined);\n    }\n\n    protected createNodeClassNames(node: TreeNode, props: NodeProps): string[] {\n        const classNames = super.createNodeClassNames(node, props);\n        if (DefinitionNode.is(node)) {\n            classNames.push(DEFINITION_NODE_CLASS);\n        }\n        return classNames;\n    }\n\n    protected createNodeAttributes(node: TreeNode, props: NodeProps): React.Attributes & React.HTMLAttributes<HTMLElement> {\n        const elementAttrs = super.createNodeAttributes(node, props);\n        return {\n            ...elementAttrs,\n        };\n    }\n\n    protected renderTree(model: TreeModel): React.ReactNode {\n        return super.renderTree(model)\n            || <div className='theia-widget-noInfo'>No callers have been detected.</div>;\n    }\n\n    protected renderCaption(node: TreeNode, props: NodeProps): React.ReactNode {\n        if (DefinitionNode.is(node)) {\n            return this.decorateDefinitionCaption(node.definition);\n        }\n        if (CallerNode.is(node)) {\n            return this.decorateCallerCaption(node.caller);\n        }\n        return 'caption';\n    }\n\n    protected decorateDefinitionCaption(definition: Definition): React.ReactNode {\n        const containerName = definition.containerName;\n        const symbol = definition.symbolName;\n        const location = this.labelProvider.getName(new URI(definition.location.uri));\n        const container = (containerName) ? containerName + '  ' + location : location;\n        return <div className='definitionNode'>\n            <div className={'symbol-icon ' + this.toIconClass(definition.symbolKind)}></div>\n            <div className='definitionNode-content'>\n                <span className='symbol'>\n                    {symbol}\n                </span>\n                <span className='container'>\n                    {container}\n                </span>\n            </div>\n        </div>;\n    }\n\n    protected decorateCallerCaption(caller: Caller): React.ReactNode {\n        const definition = caller.callerDefinition;\n        const containerName = definition.containerName;\n        const symbol = definition.symbolName;\n        const referenceCount = caller.references.length;\n        const location = this.labelProvider.getName(new URI(definition.location.uri));\n        const container = (containerName) ? containerName + '  ' + location : location;\n        return <div className='definitionNode'>\n            <div className={'symbol-icon ' + this.toIconClass(definition.symbolKind)}></div>\n            <div className='definitionNode-content'>\n                <span className='symbol'>\n                    {symbol}\n                </span>\n                <span className='referenceCount'>\n                    {(referenceCount > 1) ? `[${referenceCount}]` : ''}\n                </span>\n                <span className='container'>\n                    {container}\n                </span>\n            </div>\n        </div>;\n    }\n\n    // tslint:disable-next-line:typedef\n    protected toIconClass(symbolKind: number) {\n        switch (symbolKind) {\n            case SymbolKind.File: return 'file';\n            case SymbolKind.Module: return 'module';\n            case SymbolKind.Namespace: return 'namespace';\n            case SymbolKind.Package: return 'package';\n            case SymbolKind.Class: return 'class';\n            case SymbolKind.Method: return 'method';\n            case SymbolKind.Property: return 'property';\n            case SymbolKind.Field: return 'field';\n            case SymbolKind.Constructor: return 'constructor';\n            case SymbolKind.Enum: return 'enum';\n            case SymbolKind.Interface: return 'interface';\n            case SymbolKind.Function: return 'function';\n            case SymbolKind.Variable: return 'variable';\n            case SymbolKind.Constant: return 'constant';\n            case SymbolKind.String: return 'string';\n            case SymbolKind.Number: return 'number';\n            case SymbolKind.Boolean: return 'boolean';\n            case SymbolKind.Array: return 'array';\n            default: return 'unknown';\n        }\n    }\n\n    private openEditor(node: TreeNode, keepFocus: boolean): void {\n\n        if (DefinitionNode.is(node)) {\n            const def = node.definition;\n            this.doOpenEditor(node.definition.location.uri, def.selectionRange ? def.selectionRange : def.location.range, keepFocus);\n        }\n        if (CallerNode.is(node)) {\n            this.doOpenEditor(node.caller.callerDefinition.location.uri, node.caller.references[0], keepFocus);\n        }\n    }\n\n    private doOpenEditor(uri: DocumentUri, range: Range, keepFocus: boolean): void {\n        this.editorManager.open(\n            new URI(uri), {\n                mode: keepFocus ? 'reveal' : 'activate',\n                selection: range\n            }\n        ).then(editorWidget => {\n            if (editorWidget.parent instanceof DockPanel) {\n                editorWidget.parent.selectWidget(editorWidget);\n            }\n        });\n    }\n\n    storeState(): object {\n        const callHierarchyService = this.model.getTree().callHierarchyService;\n        if (this.model.root && callHierarchyService) {\n            return {\n                root: this.deflateForStorage(this.model.root),\n                languageId: this.model.languageId,\n            };\n        } else {\n            return {};\n        }\n    }\n\n    restoreState(oldState: object): void {\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        if ((oldState as any).root && (oldState as any).languageId) {\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            const root = this.inflateFromStorage((oldState as any).root) as DefinitionNode;\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            this.model.initializeCallHierarchy((oldState as any).languageId, root.definition.location.uri, root.definition.location.range.start);\n        }\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { injectable } from 'inversify';\nimport { TreeNode, CompositeTreeNode, SelectableTreeNode, ExpandableTreeNode, TreeImpl } from '@theia/core/lib/browser';\n\nimport { Definition, Caller } from '../callhierarchy';\nimport { CallHierarchyService } from '../callhierarchy-service';\n\nimport { Md5 } from 'ts-md5/dist/md5';\nimport { CancellationTokenSource } from '@theia/core/lib/common/cancellation';\n\n@injectable()\nexport class CallHierarchyTree extends TreeImpl {\n\n    protected _callHierarchyService: CallHierarchyService | undefined;\n\n    set callHierarchyService(callHierarchyService: CallHierarchyService | undefined) {\n        this._callHierarchyService = callHierarchyService;\n    }\n\n    get callHierarchyService(): CallHierarchyService | undefined {\n        return this._callHierarchyService;\n    }\n\n    async resolveChildren(parent: CompositeTreeNode): Promise<TreeNode[]> {\n        if (!this.callHierarchyService) {\n            return Promise.resolve([]);\n        }\n        if (parent.children.length > 0) {\n            return Promise.resolve([...parent.children]);\n        }\n        let definition: Definition | undefined;\n        if (DefinitionNode.is(parent)) {\n            definition = parent.definition;\n        } else if (CallerNode.is(parent)) {\n            definition = parent.caller.callerDefinition;\n        }\n        if (definition) {\n            const cancellationSource = new CancellationTokenSource();\n            const callers = await this.callHierarchyService.getCallers(definition, cancellationSource.token);\n            if (!callers) {\n                return Promise.resolve([]);\n            }\n            return this.toNodes(callers, parent);\n        }\n        return Promise.resolve([]);\n    }\n\n    protected toNodes(callers: Caller[], parent: CompositeTreeNode): TreeNode[] {\n        return callers.map(caller => this.toNode(caller, parent));\n    }\n\n    protected toNode(caller: Caller, parent: CompositeTreeNode | undefined): TreeNode {\n        return CallerNode.create(caller, parent as TreeNode);\n    }\n}\n\nexport interface DefinitionNode extends SelectableTreeNode, ExpandableTreeNode {\n    definition: Definition;\n}\n\nexport namespace DefinitionNode {\n    export function is(node: TreeNode | undefined): node is DefinitionNode {\n        return !!node && 'definition' in node;\n    }\n\n    export function create(definition: Definition, parent: TreeNode | undefined): DefinitionNode {\n        const name = definition.symbolName;\n        const id = createId(definition, parent);\n        return <DefinitionNode>{\n            id, definition, name, parent,\n            visible: true,\n            children: [],\n            expanded: false,\n            selected: false,\n        };\n    }\n}\n\nexport interface CallerNode extends SelectableTreeNode, ExpandableTreeNode {\n    caller: Caller;\n}\n\nexport namespace CallerNode {\n    export function is(node: TreeNode | undefined): node is CallerNode {\n        return !!node && 'caller' in node;\n    }\n\n    export function create(caller: Caller, parent: TreeNode | undefined): CallerNode {\n        const callerDefinition = caller.callerDefinition;\n        const name = callerDefinition.symbolName;\n        const id = createId(callerDefinition, parent);\n        return <CallerNode>{\n            id, caller, name, parent,\n            visible: true,\n            children: [],\n            expanded: false,\n            selected: false,\n        };\n    }\n}\n\nfunction createId(definition: Definition, parent: TreeNode | undefined): string {\n    const idPrefix = (parent) ? parent.id + '/' : '';\n    const id = idPrefix + Md5.hashStr(JSON.stringify(definition));\n    return id;\n}\n","/********************************************************************************\n * Copyright (C) 2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nexport * from './callhierarchy-tree';\nexport * from './callhierarchy-tree-model';\nexport * from './callhierarchy-tree-widget';\nexport * from './callhierarchy-tree-container';\n","/********************************************************************************\n * Copyright (C) 2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { Range, SymbolKind, Location } from 'vscode-languageserver-types';\n\nexport const CALLHIERARCHY_ID = 'callhierarchy';\n\nexport interface Definition {\n    location: Location,\n    selectionRange: Range,\n    symbolName: string,\n    symbolKind: SymbolKind,\n    containerName: string | undefined\n}\n\nexport interface Caller {\n    callerDefinition: Definition,\n    references: Range[]\n}\n\nexport interface Callee {\n    calleeDefinition: Definition,\n    references: Range[]\n}\n","/********************************************************************************\n * Copyright (C) 2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { injectable, inject } from 'inversify';\nimport { EditorManager, TextEditor } from '@theia/editor/lib/browser';\nimport { Location } from 'vscode-languageserver-types';\n\n@injectable()\nexport class CurrentEditorAccess {\n\n    @inject(EditorManager) protected readonly editorManager: EditorManager;\n\n    getSelection(): Location | undefined {\n        const activeEditor = this.getCurrentEditor();\n        if (!activeEditor) {\n            return;\n        }\n        const range = activeEditor.selection;\n        const uri = activeEditor.uri.toString();\n        return <Location>{ range, uri };\n    }\n\n    getLanguageId(): string | undefined {\n        const activeEditor = this.getCurrentEditor();\n        if (!activeEditor) {\n            return;\n        }\n        return activeEditor.document.languageId;\n    }\n\n    protected getCurrentEditor(): TextEditor | undefined {\n        const activeEditor = this.editorManager.currentEditor;\n        if (activeEditor) {\n            return activeEditor.editor;\n        }\n        return undefined;\n    }\n\n}\n","/********************************************************************************\n * Copyright (C) 2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nexport * from './callhierarchy';\nexport * from './callhierarchy-contribution';\nexport * from './callhierarchy-frontend-module';\nexport * from './callhierarchy-service';\n","/********************************************************************************\n * Copyright (C) 2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { Location, Range, Position } from 'vscode-languageserver-types';\n\n/**\n * Test if `otherRange` is in `range`. If the ranges are equal, will return true.\n */\nexport function containsRange(range: Range, otherRange: Range): boolean {\n    if (otherRange.start.line < range.start.line || otherRange.end.line < range.start.line) {\n        return false;\n    }\n    if (otherRange.start.line > range.end.line || otherRange.end.line > range.end.line) {\n        return false;\n    }\n    if (otherRange.start.line === range.start.line && otherRange.start.character < range.start.character) {\n        return false;\n    }\n    if (otherRange.end.line === range.end.line && otherRange.end.character > range.end.character) {\n        return false;\n    }\n    return true;\n}\n\nexport function containsPosition(range: Range, position: Position): boolean {\n    return comparePosition(range.start, position) >= 0 && comparePosition(range.end, position) <= 0;\n}\n\nfunction sameStart(a: Range, b: Range): boolean {\n    const pos1 = a.start;\n    const pos2 = b.start;\n    return pos1.line === pos2.line\n        && pos1.character === pos2.character;\n}\n\nexport function filterSame(locations: Location[], definition: Location): Location[] {\n    return locations.filter(candidate => candidate.uri !== definition.uri\n        || !sameStart(candidate.range, definition.range)\n    );\n}\n\nexport function comparePosition(left: Position, right: Position): number {\n    const diff = right.line - left.line;\n    if (diff !== 0) {\n        return diff;\n    }\n    return right.character - left.character;\n}\n\nexport function filterUnique(locations: Location[] | null): Location[] {\n    if (!locations) {\n        return [];\n    }\n    const result: Location[] = [];\n    const set = new Set<string>();\n    for (const location of locations) {\n        const json = JSON.stringify(location);\n        if (!set.has(json)) {\n            set.add(json);\n            result.push(location);\n        }\n    }\n    return result;\n}\n\nexport function startsAfter(a: Range, b: Range): boolean {\n    if (a.start.line > b.start.line) {\n        return true;\n    }\n    if (a.start.line === b.start.line) {\n        if (a.start.character > b.start.character) {\n            return true;\n        }\n        if (a.start.character === b.start.character) {\n            if (a.end.line > b.end.line) {\n                return true;\n            }\n        }\n    }\n    return false;\n}\n\nexport function isSame(a: Location, b: Location): boolean {\n    return a.uri === b.uri\n        && a.range.start.line === b.range.start.line\n        && a.range.end.line === b.range.end.line\n        && a.range.start.character === b.range.start.character\n        && a.range.end.character === b.range.end.character;\n}\n","\nvar content = require(\"!!../../../../../../../../css-loader/index.js!./index.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../../../../../style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../../../../../css-loader/index.js!./index.css\", function() {\n\t\tvar newContent = require(\"!!../../../../../../../../css-loader/index.js!./index.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","/********************************************************************************\n * Copyright (C) 2018 Ericsson and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { inject, injectable, postConstruct } from 'inversify';\nimport { AbstractDialog, DialogProps } from './dialogs';\nimport { ApplicationServer, ExtensionInfo } from '../common/application-protocol';\n\nexport const ABOUT_CONTENT_CLASS = 'theia-aboutDialog';\nexport const ABOUT_EXTENSIONS_CLASS = 'theia-aboutExtensions';\n\n@injectable()\nexport class AboutDialogProps extends DialogProps {\n}\n\n@injectable()\nexport class AboutDialog extends AbstractDialog<void> {\n\n    protected readonly okButton: HTMLButtonElement;\n\n    @inject(ApplicationServer)\n    protected readonly appServer: ApplicationServer;\n\n    constructor(\n        @inject(AboutDialogProps) protected readonly props: AboutDialogProps\n    ) {\n        super({\n            title: props.title\n        });\n    }\n\n    @postConstruct()\n    protected async init(): Promise<void> {\n        const messageNode = document.createElement('div');\n        messageNode.classList.add(ABOUT_CONTENT_CLASS);\n\n        const applicationInfo = await this.appServer.getApplicationInfo();\n\n        if (applicationInfo) {\n            const applicationInfoTitle = document.createElement('h3');\n            applicationInfoTitle.textContent = `${applicationInfo.name} ${applicationInfo.version}`;\n            messageNode.appendChild(applicationInfoTitle);\n        }\n\n        const extensionInfoTitle = document.createElement('h3');\n        extensionInfoTitle.textContent = 'List of extensions';\n        messageNode.appendChild(extensionInfoTitle);\n\n        const extensionInfoContent = document.createElement('ul');\n        extensionInfoContent.classList.add(ABOUT_EXTENSIONS_CLASS);\n        messageNode.appendChild(extensionInfoContent);\n\n        const extensionsInfos: ExtensionInfo[] = await this.appServer.getExtensionsInfos();\n\n        extensionsInfos\n            .sort((a: ExtensionInfo, b: ExtensionInfo) => a.name.toLowerCase().localeCompare(b.name.toLowerCase()))\n            .forEach((extension: ExtensionInfo) => {\n                const extensionInfo = document.createElement('li');\n                extensionInfo.textContent = extension.name + ' ' + extension.version;\n                extensionInfoContent.appendChild(extensionInfo);\n            });\n        messageNode.setAttribute('style', 'flex: 1 100%; padding-bottom: calc(var(--theia-ui-padding)*3);');\n        this.contentNode.appendChild(messageNode);\n        this.appendAcceptButton('Ok');\n    }\n\n    get value(): undefined { return undefined; }\n\n}\n","/********************************************************************************\n * Copyright (C) 2017 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nconst userAgent = typeof navigator !== 'undefined' ? navigator.userAgent : '';\n\nexport const isIE = (userAgent.indexOf('Trident') >= 0);\nexport const isEdge = (userAgent.indexOf('Edge/') >= 0);\nexport const isEdgeOrIE = isIE || isEdge;\n\nexport const isOpera = (userAgent.indexOf('Opera') >= 0);\nexport const isFirefox = (userAgent.indexOf('Firefox') >= 0);\nexport const isWebKit = (userAgent.indexOf('AppleWebKit') >= 0);\nexport const isChrome = (userAgent.indexOf('Chrome') >= 0);\nexport const isSafari = (userAgent.indexOf('Chrome') === -1) && (userAgent.indexOf('Safari') >= 0);\nexport const isIPad = (userAgent.indexOf('iPad') >= 0);\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport const isNative = typeof (window as any).process !== 'undefined';\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport const isBasicWasmSupported = typeof (window as any).WebAssembly !== 'undefined';\n\n/**\n * Resolves after the next animation frame if no parameter is given,\n * or after the given number of animation frames.\n */\nexport function animationFrame(n: number = 1): Promise<void> {\n    return new Promise(resolve => {\n        function frameFunc(): void {\n            if (n <= 0) {\n                resolve();\n            } else {\n                n--;\n                requestAnimationFrame(frameFunc);\n            }\n        }\n        frameFunc();\n    });\n}\n\n/**\n * Parse a magnitude value (e.g. width, height, left, top) from a CSS attribute value.\n * Returns the given default value (or undefined) if the value cannot be determined,\n * e.g. because it is a relative value like `50%` or `auto`.\n */\nexport function parseCssMagnitude(value: string | null, defaultValue: number): number;\nexport function parseCssMagnitude(value: string | null, defaultValue?: number): number | undefined {\n    if (value) {\n        let parsed: number;\n        if (value.endsWith('px')) {\n            parsed = parseFloat(value.substring(0, value.length - 2));\n        } else {\n            parsed = parseFloat(value);\n        }\n        if (!isNaN(parsed)) {\n            return parsed;\n        }\n    }\n    return defaultValue;\n}\n\n/**\n * Parse the number of milliseconds from a CSS time value.\n * Returns the given default value (or undefined) if the value cannot be determined.\n */\nexport function parseCssTime(time: string | null, defaultValue: number): number;\nexport function parseCssTime(time: string | null, defaultValue?: number): number | undefined {\n    if (time) {\n        let parsed: number;\n        if (time.endsWith('ms')) {\n            parsed = parseFloat(time.substring(0, time.length - 2));\n        } else if (time.endsWith('s')) {\n            parsed = parseFloat(time.substring(0, time.length - 1)) * 1000;\n        } else {\n            parsed = parseFloat(time);\n        }\n        if (!isNaN(parsed)) {\n            return parsed;\n        }\n    }\n    return defaultValue;\n}\n\ninterface ElementScroll {\n    left: number\n    top: number\n    maxLeft: number\n    maxTop: number\n}\n\nfunction getMonacoEditorScroll(elem: HTMLElement): ElementScroll | undefined {\n    const linesContent = elem.querySelector('.lines-content') as HTMLElement;\n    const viewLines = elem.querySelector('.view-lines') as HTMLElement;\n    // eslint-disable-next-line no-null/no-null\n    if (linesContent === null || viewLines === null) {\n        return undefined;\n    }\n    const linesContentStyle = linesContent.style;\n    const elemStyle = elem.style;\n    const viewLinesStyle = viewLines.style;\n    return {\n        left: -parseCssMagnitude(linesContentStyle.left, 0),\n        top: -parseCssMagnitude(linesContentStyle.top, 0),\n        maxLeft: parseCssMagnitude(viewLinesStyle.width, 0) - parseCssMagnitude(elemStyle.width, 0),\n        maxTop: parseCssMagnitude(viewLinesStyle.height, 0) - parseCssMagnitude(elemStyle.height, 0)\n    };\n}\n\n/**\n * Prevent browser back/forward navigation of a mouse wheel event.\n */\nexport function preventNavigation(event: WheelEvent): void {\n    const { currentTarget, deltaX, deltaY } = event;\n    const absDeltaX = Math.abs(deltaX);\n    const absDeltaY = Math.abs(deltaY);\n    let elem = event.target as Element | null;\n\n    while (elem && elem !== currentTarget) {\n        let scroll: ElementScroll | undefined;\n        if (elem.classList.contains('monaco-scrollable-element')) {\n            scroll = getMonacoEditorScroll(elem as HTMLElement);\n        } else {\n            scroll = {\n                left: elem.scrollLeft,\n                top: elem.scrollTop,\n                maxLeft: elem.scrollWidth - elem.clientWidth,\n                maxTop: elem.scrollHeight - elem.clientHeight\n            };\n        }\n        if (scroll) {\n            const scrollH = scroll.maxLeft > 0 && (deltaX < 0 && scroll.left > 0 || deltaX > 0 && scroll.left < scroll.maxLeft);\n            const scrollV = scroll.maxTop > 0 && (deltaY < 0 && scroll.top > 0 || deltaY > 0 && scroll.top < scroll.maxTop);\n            if (scrollH && scrollV || scrollH && absDeltaX > absDeltaY || scrollV && absDeltaY > absDeltaX) {\n                // The event is consumed by the scrollable child element\n                return;\n            }\n        }\n        elem = elem.parentElement;\n    }\n\n    event.preventDefault();\n    event.stopPropagation();\n}\n","/********************************************************************************\n * Copyright (C) 2019 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { injectable } from 'inversify';\nimport { DisposableCollection, Disposable } from '../common/disposable';\nimport { Emitter } from '../common/event';\n\n/**\n * Either be a reference to an existing color or a color value as a hex string, rgba, or hsla.\n */\nexport type Color = string | RGBA | HSLA | ColorTransformation;\nexport namespace Color {\n    export function rgba(r: number, g: number, b: number, a: number = 1): Color {\n        return { r, g, b, a };\n    }\n    export function hsla(h: number, s: number, l: number, a: number = 1): Color {\n        return { h, s, l, a };\n    }\n    export const white = rgba(255, 255, 255, 1);\n    export const black = rgba(0, 0, 0, 1);\n    export function transparent(v: string, f: number): ColorTransformation {\n        return { v, f, kind: 'transparent' };\n    }\n    export function lighten(v: string, f: number): ColorTransformation {\n        return { v, f, kind: 'lighten' };\n    }\n    export function darken(v: string, f: number): ColorTransformation {\n        return { v, f, kind: 'darken' };\n    }\n}\nexport interface ColorTransformation {\n    kind: 'transparent' | 'lighten' | 'darken'\n    v: string\n    f: number\n}\nexport interface RGBA {\n    /**\n     * Red: integer in [0-255]\n     */\n    readonly r: number;\n\n    /**\n     * Green: integer in [0-255]\n     */\n    readonly g: number;\n\n    /**\n     * Blue: integer in [0-255]\n     */\n    readonly b: number;\n\n    /**\n     * Alpha: float in [0-1]\n     */\n    readonly a: number;\n}\nexport interface HSLA {\n    /**\n     * Hue: integer in [0, 360]\n     */\n    readonly h: number;\n    /**\n     * Saturation: float in [0, 1]\n     */\n    readonly s: number;\n    /**\n     * Luminosity: float in [0, 1]\n     */\n    readonly l: number;\n    /**\n     * Alpha: float in [0, 1]\n     */\n    readonly a: number;\n}\n\nexport interface ColorDefaults {\n    light?: Color\n    dark?: Color\n    hc?: Color\n}\n\nexport interface ColorDefinition {\n    id: string\n    defaults?: ColorDefaults\n    description: string\n}\n\nexport interface ColorCssVariable {\n    name: string\n    value: string\n}\n\n/**\n * It should be implemented by an extension, e.g. by the monaco extension.\n */\n@injectable()\nexport class ColorRegistry {\n\n    protected readonly onDidChangeEmitter = new Emitter<void>();\n    readonly onDidChange = this.onDidChangeEmitter.event;\n    protected fireDidChange(): void {\n        this.onDidChangeEmitter.fire(undefined);\n    }\n\n    *getColors(): IterableIterator<string> { }\n\n    getCurrentCssVariable(id: string): ColorCssVariable | undefined {\n        const value = this.getCurrentColor(id);\n        if (!value) {\n            return undefined;\n        }\n        const name = this.toCssVariableName(id);\n        return { name, value };\n    }\n\n    toCssVariableName(id: string, prefix = 'theia'): string {\n        return `--${prefix}-${id.replace(/\\./g, '-')}`;\n    }\n\n    getCurrentColor(id: string): string | undefined {\n        return undefined;\n    }\n\n    register(...definitions: ColorDefinition[]): Disposable {\n        const result = new DisposableCollection(...definitions.map(definition => this.doRegister(definition)));\n        this.fireDidChange();\n        return result;\n    }\n\n    protected doRegister(definition: ColorDefinition): Disposable {\n        return Disposable.NULL;\n    }\n\n}\n","/********************************************************************************\n * Copyright (C) 2017 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\n/* eslint-disable max-len, @typescript-eslint/indent */\n\nimport debounce = require('lodash.debounce');\nimport { injectable, inject, postConstruct } from 'inversify';\nimport { TabBar, Widget, Title } from '@phosphor/widgets';\nimport { MAIN_MENU_BAR, MenuContribution, MenuModelRegistry } from '../common/menu';\nimport { KeybindingContribution, KeybindingRegistry } from './keybinding';\nimport { FrontendApplicationContribution } from './frontend-application';\nimport { CommandContribution, CommandRegistry, Command } from '../common/command';\nimport { UriAwareCommandHandler } from '../common/uri-command-handler';\nimport { SelectionService } from '../common/selection-service';\nimport { MessageService } from '../common/message-service';\nimport { OpenerService, open } from '../browser/opener-service';\nimport { ApplicationShell } from './shell/application-shell';\nimport { SHELL_TABBAR_CONTEXT_MENU } from './shell/tab-bars';\nimport { AboutDialog } from './about-dialog';\nimport * as browser from './browser';\nimport URI from '../common/uri';\nimport { ContextKeyService } from './context-key-service';\nimport { OS, isOSX, isWindows } from '../common/os';\nimport { ResourceContextKey } from './resource-context-key';\nimport { UriSelection } from '../common/selection';\nimport { StorageService } from './storage-service';\nimport { Navigatable } from './navigatable';\nimport { QuickViewService } from './quick-view-service';\nimport { PrefixQuickOpenService, QuickOpenItem, QuickOpenMode, QuickOpenService, QuickOpenGroupItem } from './quick-open';\nimport { environment } from '@theia/application-package/lib/environment';\nimport { IconThemeService } from './icon-theme-service';\nimport { ColorContribution } from './color-application-contribution';\nimport { ColorRegistry, Color } from './color-registry';\nimport { CorePreferences } from './core-preferences';\nimport { ThemeService } from './theming';\nimport { PreferenceService, PreferenceScope } from './preferences';\n\nexport namespace CommonMenus {\n\n    export const FILE = [...MAIN_MENU_BAR, '1_file'];\n    export const FILE_NEW = [...FILE, '1_new'];\n    export const FILE_OPEN = [...FILE, '2_open'];\n    export const FILE_SAVE = [...FILE, '3_save'];\n    export const FILE_AUTOSAVE = [...FILE, '4_autosave'];\n    export const FILE_SETTINGS = [...FILE, '5_settings'];\n    export const FILE_SETTINGS_SUBMENU = [...FILE_SETTINGS, '1_settings_submenu'];\n    export const FILE_SETTINGS_SUBMENU_OPEN = [...FILE_SETTINGS_SUBMENU, '1_settings_submenu_open'];\n    export const FILE_SETTINGS_SUBMENU_THEME = [...FILE_SETTINGS_SUBMENU, '2_settings_submenu_theme'];\n    export const FILE_CLOSE = [...FILE, '6_close'];\n\n    export const EDIT = [...MAIN_MENU_BAR, '2_edit'];\n    export const EDIT_UNDO = [...EDIT, '1_undo'];\n    export const EDIT_CLIPBOARD = [...EDIT, '2_clipboard'];\n    export const EDIT_FIND = [...EDIT, '3_find'];\n\n    export const VIEW = [...MAIN_MENU_BAR, '4_view'];\n    export const VIEW_PRIMARY = [...VIEW, '0_primary'];\n    export const VIEW_VIEWS = [...VIEW, '1_views'];\n    export const VIEW_LAYOUT = [...VIEW, '2_layout'];\n    export const VIEW_TOGGLE = [...VIEW, '3_toggle'];\n\n    // last menu item\n    export const HELP = [...MAIN_MENU_BAR, '9_help'];\n\n}\n\nexport namespace CommonCommands {\n\n    const FILE_CATEGORY = 'File';\n    const VIEW_CATEGORY = 'View';\n\n    export const OPEN: Command = {\n        id: 'core.open',\n        category: FILE_CATEGORY,\n        label: 'Open',\n    };\n\n    export const CUT: Command = {\n        id: 'core.cut',\n        label: 'Cut'\n    };\n    export const COPY: Command = {\n        id: 'core.copy',\n        label: 'Copy'\n    };\n    export const PASTE: Command = {\n        id: 'core.paste',\n        label: 'Paste'\n    };\n\n    export const UNDO: Command = {\n        id: 'core.undo',\n        label: 'Undo'\n    };\n    export const REDO: Command = {\n        id: 'core.redo',\n        label: 'Redo'\n    };\n\n    export const FIND: Command = {\n        id: 'core.find',\n        label: 'Find'\n    };\n    export const REPLACE: Command = {\n        id: 'core.replace',\n        label: 'Replace'\n    };\n\n    export const NEXT_TAB: Command = {\n        id: 'core.nextTab',\n        category: VIEW_CATEGORY,\n        label: 'Switch to Next Tab'\n    };\n    export const PREVIOUS_TAB: Command = {\n        id: 'core.previousTab',\n        category: VIEW_CATEGORY,\n        label: 'Switch to Previous Tab'\n    };\n    export const CLOSE_TAB: Command = {\n        id: 'core.close.tab',\n        category: VIEW_CATEGORY,\n        label: 'Close Tab'\n    };\n    export const CLOSE_OTHER_TABS: Command = {\n        id: 'core.close.other.tabs',\n        category: VIEW_CATEGORY,\n        label: 'Close Other Tabs'\n    };\n    export const CLOSE_RIGHT_TABS: Command = {\n        id: 'core.close.right.tabs',\n        category: VIEW_CATEGORY,\n        label: 'Close Tabs to the Right'\n    };\n    export const CLOSE_ALL_TABS: Command = {\n        id: 'core.close.all.tabs',\n        category: VIEW_CATEGORY,\n        label: 'Close All Tabs'\n    };\n    export const COLLAPSE_PANEL: Command = {\n        id: 'core.collapse.tab',\n        category: VIEW_CATEGORY,\n        label: 'Collapse Side Panel'\n    };\n    export const COLLAPSE_ALL_PANELS: Command = {\n        id: 'core.collapse.all.tabs',\n        category: VIEW_CATEGORY,\n        label: 'Collapse All Side Panels'\n    };\n    export const TOGGLE_BOTTOM_PANEL: Command = {\n        id: 'core.toggle.bottom.panel',\n        category: VIEW_CATEGORY,\n        label: 'Toggle Bottom Panel'\n    };\n    export const TOGGLE_MAXIMIZED: Command = {\n        id: 'core.toggleMaximized',\n        category: VIEW_CATEGORY,\n        label: 'Toggle Maximized'\n    };\n    export const OPEN_VIEW: Command = {\n        id: 'core.openView',\n        category: VIEW_CATEGORY,\n        label: 'Open View...'\n    };\n\n    export const SAVE: Command = {\n        id: 'core.save',\n        category: FILE_CATEGORY,\n        label: 'Save',\n    };\n    export const SAVE_ALL: Command = {\n        id: 'core.saveAll',\n        category: FILE_CATEGORY,\n        label: 'Save All',\n    };\n\n    export const AUTO_SAVE: Command = {\n        id: 'textEditor.commands.autosave',\n        category: FILE_CATEGORY,\n        label: 'Auto Save',\n    };\n\n    export const QUIT: Command = {\n        id: 'core.quit',\n        label: 'Quit'\n    };\n\n    export const ABOUT_COMMAND: Command = {\n        id: 'core.about',\n        label: 'About'\n    };\n\n    export const OPEN_PREFERENCES: Command = {\n        id: 'preferences:open',\n        category: 'Settings',\n        label: 'Open Preferences',\n    };\n\n    export const SELECT_COLOR_THEME: Command = {\n        id: 'workbench.action.selectTheme',\n        label: 'Color Theme',\n        category: 'Preferences'\n    };\n    export const SELECT_ICON_THEME: Command = {\n        id: 'workbench.action.selectIconTheme',\n        label: 'File Icon Theme',\n        category: 'Preferences'\n    };\n\n}\n\nexport const supportCut = browser.isNative || document.queryCommandSupported('cut');\nexport const supportCopy = browser.isNative || document.queryCommandSupported('copy');\n// Chrome incorrectly returns true for document.queryCommandSupported('paste')\n// when the paste feature is available but the calling script has insufficient\n// privileges to actually perform the action\nexport const supportPaste = browser.isNative || (!browser.isChrome && document.queryCommandSupported('paste'));\n\nexport const RECENT_COMMANDS_STORAGE_KEY = 'commands';\n\n@injectable()\nexport class CommonFrontendContribution implements FrontendApplicationContribution, MenuContribution, CommandContribution, KeybindingContribution, ColorContribution {\n\n    constructor(\n        @inject(ApplicationShell) protected readonly shell: ApplicationShell,\n        @inject(SelectionService) protected readonly selectionService: SelectionService,\n        @inject(MessageService) protected readonly messageService: MessageService,\n        @inject(OpenerService) protected readonly openerService: OpenerService,\n        @inject(AboutDialog) protected readonly aboutDialog: AboutDialog\n    ) { }\n\n    @inject(ContextKeyService)\n    protected readonly contextKeyService: ContextKeyService;\n\n    @inject(ResourceContextKey)\n    protected readonly resourceContextKey: ResourceContextKey;\n\n    @inject(CommandRegistry)\n    protected readonly commandRegistry: CommandRegistry;\n\n    @inject(StorageService)\n    protected readonly storageService: StorageService;\n\n    @inject(QuickViewService)\n    protected readonly quickView: QuickViewService;\n\n    @inject(PrefixQuickOpenService)\n    protected readonly quickOpen: PrefixQuickOpenService;\n\n    @inject(IconThemeService)\n    protected readonly iconThemes: IconThemeService;\n\n    @inject(ThemeService)\n    protected readonly themeService: ThemeService;\n\n    @inject(QuickOpenService)\n    protected readonly quickOpenService: QuickOpenService;\n\n    @inject(CorePreferences)\n    protected readonly preferences: CorePreferences;\n\n    @inject(PreferenceService)\n    protected readonly preferenceService: PreferenceService;\n\n    @postConstruct()\n    protected init(): void {\n        this.contextKeyService.createKey<boolean>('isLinux', OS.type() === OS.Type.Linux);\n        this.contextKeyService.createKey<boolean>('isMac', OS.type() === OS.Type.OSX);\n        this.contextKeyService.createKey<boolean>('isWindows', OS.type() === OS.Type.Windows);\n\n        this.initResourceContextKeys();\n        this.registerCtrlWHandling();\n\n        this.updateStyles();\n        this.updateThemeFromPreference('workbench.colorTheme');\n        this.updateThemeFromPreference('workbench.iconTheme');\n        this.preferences.onPreferenceChanged(e => {\n            if (e.preferenceName === 'workbench.editor.highlightModifiedTabs') {\n                this.updateStyles();\n            } else if (e.preferenceName === 'workbench.colorTheme' || e.preferenceName === 'workbench.iconTheme') {\n                this.updateThemeFromPreference(e.preferenceName);\n            }\n        });\n        this.themeService.onThemeChange(() => this.updateThemePreference('workbench.colorTheme'));\n        this.iconThemes.onDidChangeCurrent(() => this.updateThemePreference('workbench.iconTheme'));\n    }\n\n    protected updateStyles(): void {\n        document.body.classList.remove('theia-editor-highlightModifiedTabs');\n        if (this.preferences['workbench.editor.highlightModifiedTabs']) {\n            document.body.classList.add('theia-editor-highlightModifiedTabs');\n        }\n    }\n\n    protected updateThemePreference(preferenceName: 'workbench.colorTheme' | 'workbench.iconTheme'): void {\n        const inspect = this.preferenceService.inspect<string>(preferenceName);\n        const workspaceValue = inspect && inspect.workspaceValue;\n        const userValue = inspect && inspect.globalValue;\n        const value = workspaceValue || userValue;\n        const newValue = preferenceName === 'workbench.colorTheme' ? this.themeService.getCurrentTheme().id : this.iconThemes.current;\n        if (newValue !== value) {\n            const scope = workspaceValue !== undefined ? PreferenceScope.Workspace : PreferenceScope.User;\n            this.preferenceService.set(preferenceName, newValue, scope);\n        }\n    }\n\n    protected updateThemeFromPreference(preferenceName: 'workbench.colorTheme' | 'workbench.iconTheme'): void {\n        const value = this.preferences[preferenceName];\n        if (value !== undefined) {\n            if (preferenceName === 'workbench.colorTheme') {\n                if (!value) {\n                    this.themeService.reset();\n                } else {\n                    this.themeService.setCurrentTheme(value);\n                }\n            } else {\n                this.iconThemes.current = value || 'none';\n            }\n        }\n    }\n\n    onStart(): void {\n        this.storageService.getData<{ recent: Command[] }>(RECENT_COMMANDS_STORAGE_KEY, { recent: [] })\n            .then(tasks => this.commandRegistry.recent = tasks.recent);\n    }\n\n    onStop(): void {\n        const recent = this.commandRegistry.recent;\n        this.storageService.setData<{ recent: Command[] }>(RECENT_COMMANDS_STORAGE_KEY, { recent });\n    }\n\n    protected initResourceContextKeys(): void {\n        const updateContextKeys = () => {\n            const selection = this.selectionService.selection;\n            const resourceUri = Navigatable.is(selection) && selection.getResourceUri() || UriSelection.getUri(selection);\n            this.resourceContextKey.set(resourceUri);\n        };\n        updateContextKeys();\n        this.selectionService.onSelectionChanged(updateContextKeys);\n    }\n\n    registerMenus(registry: MenuModelRegistry): void {\n        registry.registerSubmenu(CommonMenus.FILE, 'File');\n        registry.registerSubmenu(CommonMenus.EDIT, 'Edit');\n        registry.registerSubmenu(CommonMenus.VIEW, 'View');\n        registry.registerSubmenu(CommonMenus.HELP, 'Help');\n\n        registry.registerMenuAction(CommonMenus.FILE_SAVE, {\n            commandId: CommonCommands.SAVE.id\n        });\n        registry.registerMenuAction(CommonMenus.FILE_SAVE, {\n            commandId: CommonCommands.SAVE_ALL.id\n        });\n\n        registry.registerMenuAction(CommonMenus.FILE_AUTOSAVE, {\n            commandId: CommonCommands.AUTO_SAVE.id\n        });\n\n        registry.registerSubmenu(CommonMenus.FILE_SETTINGS_SUBMENU, 'Settings');\n\n        registry.registerMenuAction(CommonMenus.EDIT_UNDO, {\n            commandId: CommonCommands.UNDO.id,\n            order: '0'\n        });\n        registry.registerMenuAction(CommonMenus.EDIT_UNDO, {\n            commandId: CommonCommands.REDO.id,\n            order: '1'\n        });\n\n        registry.registerMenuAction(CommonMenus.EDIT_FIND, {\n            commandId: CommonCommands.FIND.id,\n            order: '0'\n        });\n        registry.registerMenuAction(CommonMenus.EDIT_FIND, {\n            commandId: CommonCommands.REPLACE.id,\n            order: '1'\n        });\n\n        registry.registerMenuAction(CommonMenus.EDIT_CLIPBOARD, {\n            commandId: CommonCommands.CUT.id,\n            order: '0'\n        });\n        registry.registerMenuAction(CommonMenus.EDIT_CLIPBOARD, {\n            commandId: CommonCommands.COPY.id,\n            order: '1'\n        });\n        registry.registerMenuAction(CommonMenus.EDIT_CLIPBOARD, {\n            commandId: CommonCommands.PASTE.id,\n            order: '2'\n        });\n\n        registry.registerMenuAction(CommonMenus.VIEW_LAYOUT, {\n            commandId: CommonCommands.TOGGLE_BOTTOM_PANEL.id,\n            order: '0'\n        });\n        registry.registerMenuAction(CommonMenus.VIEW_LAYOUT, {\n            commandId: CommonCommands.COLLAPSE_ALL_PANELS.id,\n            order: '1'\n        });\n\n        registry.registerMenuAction(SHELL_TABBAR_CONTEXT_MENU, {\n            commandId: CommonCommands.CLOSE_TAB.id,\n            label: 'Close',\n            order: '0'\n        });\n        registry.registerMenuAction(SHELL_TABBAR_CONTEXT_MENU, {\n            commandId: CommonCommands.CLOSE_OTHER_TABS.id,\n            label: 'Close Others',\n            order: '1'\n        });\n        registry.registerMenuAction(SHELL_TABBAR_CONTEXT_MENU, {\n            commandId: CommonCommands.CLOSE_RIGHT_TABS.id,\n            label: 'Close to the Right',\n            order: '2'\n        });\n        registry.registerMenuAction(SHELL_TABBAR_CONTEXT_MENU, {\n            commandId: CommonCommands.CLOSE_ALL_TABS.id,\n            label: 'Close All',\n            order: '3'\n        });\n        registry.registerMenuAction(SHELL_TABBAR_CONTEXT_MENU, {\n            commandId: CommonCommands.COLLAPSE_PANEL.id,\n            label: 'Collapse',\n            order: '4'\n        });\n        registry.registerMenuAction(SHELL_TABBAR_CONTEXT_MENU, {\n            commandId: CommonCommands.TOGGLE_MAXIMIZED.id,\n            label: 'Toggle Maximized',\n            order: '5'\n        });\n        registry.registerMenuAction(CommonMenus.HELP, {\n            commandId: CommonCommands.ABOUT_COMMAND.id,\n            label: 'About',\n            order: '9'\n        });\n\n        registry.registerMenuAction(CommonMenus.VIEW_PRIMARY, {\n            commandId: CommonCommands.OPEN_VIEW.id\n        });\n\n        registry.registerMenuAction(CommonMenus.FILE_SETTINGS_SUBMENU_THEME, {\n            commandId: CommonCommands.SELECT_COLOR_THEME.id\n        });\n        registry.registerMenuAction(CommonMenus.FILE_SETTINGS_SUBMENU_THEME, {\n            commandId: CommonCommands.SELECT_ICON_THEME.id\n        });\n    }\n\n    registerCommands(commandRegistry: CommandRegistry): void {\n        commandRegistry.registerCommand(CommonCommands.OPEN, new UriAwareCommandHandler<URI[]>(this.selectionService, {\n            execute: uris => uris.map(uri => open(this.openerService, uri)),\n        }, { multi: true }));\n        commandRegistry.registerCommand(CommonCommands.CUT, {\n            execute: () => {\n                if (supportCut) {\n                    document.execCommand('cut');\n                } else {\n                    this.messageService.warn(\"Please use the browser's cut command or shortcut.\");\n                }\n            }\n        });\n        commandRegistry.registerCommand(CommonCommands.COPY, {\n            execute: () => {\n                if (supportCopy) {\n                    document.execCommand('copy');\n                } else {\n                    this.messageService.warn(\"Please use the browser's copy command or shortcut.\");\n                }\n            }\n        });\n        commandRegistry.registerCommand(CommonCommands.PASTE, {\n            execute: () => {\n                if (supportPaste) {\n                    document.execCommand('paste');\n                } else {\n                    this.messageService.warn(\"Please use the browser's paste command or shortcut.\");\n                }\n            }\n        });\n\n        commandRegistry.registerCommand(CommonCommands.UNDO);\n        commandRegistry.registerCommand(CommonCommands.REDO);\n\n        commandRegistry.registerCommand(CommonCommands.FIND);\n        commandRegistry.registerCommand(CommonCommands.REPLACE);\n\n        commandRegistry.registerCommand(CommonCommands.NEXT_TAB, {\n            isEnabled: () => this.shell.currentTabBar !== undefined,\n            execute: () => this.shell.activateNextTab()\n        });\n        commandRegistry.registerCommand(CommonCommands.PREVIOUS_TAB, {\n            isEnabled: () => this.shell.currentTabBar !== undefined,\n            execute: () => this.shell.activatePreviousTab()\n        });\n        commandRegistry.registerCommand(CommonCommands.CLOSE_TAB, {\n            isEnabled: (event?: Event) => this.findTabBar(event) !== undefined,\n            execute: (event?: Event) => {\n                const tabBar = this.findTabBar(event)!;\n                const currentTitle = this.findTitle(tabBar, event);\n                this.shell.closeTabs(tabBar, (title, index) => title === currentTitle);\n            }\n        });\n        commandRegistry.registerCommand(CommonCommands.CLOSE_OTHER_TABS, {\n            isEnabled: (event?: Event) => {\n                const tabBar = this.findTabBar(event);\n                return tabBar !== undefined && tabBar.titles.length > 1;\n            },\n            execute: (event?: Event) => {\n                const tabBar = this.findTabBar(event)!;\n                const currentTitle = this.findTitle(tabBar, event);\n                const area = this.shell.getAreaFor(tabBar)!;\n                this.shell.closeTabs(area, (title, index) => title !== currentTitle);\n            }\n        });\n        commandRegistry.registerCommand(CommonCommands.CLOSE_RIGHT_TABS, {\n            isEnabled: (event?: Event) => {\n                const tabBar = this.findTabBar(event);\n                return tabBar !== undefined && tabBar.currentIndex < tabBar.titles.length - 1;\n            },\n            isVisible: (event?: Event) => {\n                const area = this.findTabArea(event);\n                return area !== undefined && area !== 'left' && area !== 'right';\n            },\n            execute: (event?: Event) => {\n                const tabBar = this.findTabBar(event)!;\n                const currentIndex = tabBar.currentIndex;\n                this.shell.closeTabs(tabBar, (title, index) => index > currentIndex);\n            }\n        });\n        commandRegistry.registerCommand(CommonCommands.CLOSE_ALL_TABS, {\n            isEnabled: (event?: Event) => {\n                if (event) {\n                    return this.findTabBar(event) !== undefined;\n                } else {\n                    return this.shell.mainAreaTabBars.find(tb => tb.titles.length > 0) !== undefined;\n                }\n            },\n            execute: (event?: Event) => {\n                if (event) {\n                    this.shell.closeTabs(this.findTabArea(event)!);\n                } else {\n                    this.shell.closeTabs('main');\n                }\n            }\n        });\n        commandRegistry.registerCommand(CommonCommands.COLLAPSE_PANEL, {\n            isEnabled: (event?: Event) => ApplicationShell.isSideArea(this.findTabArea(event)),\n            isVisible: (event?: Event) => ApplicationShell.isSideArea(this.findTabArea(event)),\n            execute: (event?: Event) => {\n                this.shell.collapsePanel(this.findTabArea(event)!);\n            }\n        });\n        commandRegistry.registerCommand(CommonCommands.COLLAPSE_ALL_PANELS, {\n            execute: () => {\n                this.shell.collapsePanel('left');\n                this.shell.collapsePanel('right');\n                this.shell.collapsePanel('bottom');\n            }\n        });\n        commandRegistry.registerCommand(CommonCommands.TOGGLE_BOTTOM_PANEL, {\n            isEnabled: () => this.shell.getWidgets('bottom').length > 0,\n            execute: () => {\n                if (this.shell.isExpanded('bottom')) {\n                    this.shell.collapsePanel('bottom');\n                } else {\n                    this.shell.expandPanel('bottom');\n                }\n            }\n        });\n        commandRegistry.registerCommand(CommonCommands.TOGGLE_MAXIMIZED, {\n            isEnabled: () => this.shell.canToggleMaximized(),\n            isVisible: () => this.shell.canToggleMaximized(),\n            execute: () => this.shell.toggleMaximized()\n        });\n\n        commandRegistry.registerCommand(CommonCommands.SAVE, {\n            execute: () => this.shell.save()\n        });\n        commandRegistry.registerCommand(CommonCommands.SAVE_ALL, {\n            execute: () => this.shell.saveAll()\n        });\n        commandRegistry.registerCommand(CommonCommands.ABOUT_COMMAND, {\n            execute: () => this.openAbout()\n        });\n\n        commandRegistry.registerCommand(CommonCommands.OPEN_VIEW, {\n            execute: () => this.quickOpen.open(this.quickView.prefix)\n        });\n\n        commandRegistry.registerCommand(CommonCommands.SELECT_COLOR_THEME, {\n            execute: () => this.selectColorTheme()\n        });\n        commandRegistry.registerCommand(CommonCommands.SELECT_ICON_THEME, {\n            execute: () => this.selectIconTheme()\n        });\n    }\n\n    private findTabBar(event?: Event): TabBar<Widget> | undefined {\n        if (event && event.target) {\n            const tabBar = this.shell.findWidgetForElement(event.target as HTMLElement);\n            if (tabBar instanceof TabBar) {\n                return tabBar;\n            }\n        }\n        return this.shell.currentTabBar;\n    }\n\n    private findTabArea(event?: Event): ApplicationShell.Area | undefined {\n        const tabBar = this.findTabBar(event);\n        if (tabBar) {\n            return this.shell.getAreaFor(tabBar);\n        }\n        return this.shell.currentTabArea;\n    }\n\n    private findTitle(tabBar: TabBar<Widget>, event?: Event): Title<Widget> | undefined {\n        if (event && event.target) {\n            let tabNode: HTMLElement | null = event.target as HTMLElement;\n            while (tabNode && !tabNode.classList.contains('p-TabBar-tab')) {\n                tabNode = tabNode.parentElement;\n            }\n            if (tabNode && tabNode.title) {\n                const title = tabBar.titles.find(t => t.label === tabNode!.title);\n                if (title) {\n                    return title;\n                }\n            }\n        }\n        return tabBar.currentTitle || undefined;\n    }\n\n    private isElectron(): boolean {\n        return environment.electron.is();\n    }\n\n    registerKeybindings(registry: KeybindingRegistry): void {\n        if (supportCut) {\n            registry.registerKeybinding({\n                command: CommonCommands.CUT.id,\n                keybinding: 'ctrlcmd+x'\n            });\n        }\n        if (supportCopy) {\n            registry.registerKeybinding({\n                command: CommonCommands.COPY.id,\n                keybinding: 'ctrlcmd+c'\n            });\n        }\n        if (supportPaste) {\n            registry.registerKeybinding({\n                command: CommonCommands.PASTE.id,\n                keybinding: 'ctrlcmd+v'\n            });\n        }\n        registry.registerKeybindings(\n            // Edition\n            {\n                command: CommonCommands.UNDO.id,\n                keybinding: 'ctrlcmd+z'\n            },\n            {\n                command: CommonCommands.REDO.id,\n                keybinding: 'ctrlcmd+shift+z'\n            },\n            {\n                command: CommonCommands.FIND.id,\n                keybinding: 'ctrlcmd+f'\n            },\n            {\n                command: CommonCommands.REPLACE.id,\n                keybinding: 'ctrlcmd+alt+f'\n            },\n            // Tabs\n            {\n                command: CommonCommands.NEXT_TAB.id,\n                keybinding: 'ctrlcmd+tab'\n            },\n            {\n                command: CommonCommands.NEXT_TAB.id,\n                keybinding: 'ctrlcmd+alt+d'\n            },\n            {\n                command: CommonCommands.PREVIOUS_TAB.id,\n                keybinding: 'ctrlcmd+shift+tab'\n            },\n            {\n                command: CommonCommands.PREVIOUS_TAB.id,\n                keybinding: 'ctrlcmd+alt+a'\n            },\n            {\n                command: CommonCommands.CLOSE_TAB.id,\n                keybinding: (!this.isElectron() ? 'alt+w' : (isWindows ? 'ctrl+f4' : 'ctrlcmd+w'))\n            },\n            {\n                command: CommonCommands.CLOSE_OTHER_TABS.id,\n                keybinding: 'ctrlcmd+alt+t'\n            },\n            {\n                command: CommonCommands.CLOSE_ALL_TABS.id,\n                keybinding: this.isElectron() ? 'ctrlCmd+k ctrlCmd+w' : 'alt+shift+w'\n            },\n            // Panels\n            {\n                command: CommonCommands.COLLAPSE_PANEL.id,\n                keybinding: 'alt+c'\n            },\n            {\n                command: CommonCommands.TOGGLE_BOTTOM_PANEL.id,\n                keybinding: 'ctrlcmd+j',\n            },\n            {\n                command: CommonCommands.COLLAPSE_ALL_PANELS.id,\n                keybinding: 'alt+shift+c',\n            },\n            {\n                command: CommonCommands.TOGGLE_MAXIMIZED.id,\n                keybinding: 'ctrl+m',\n            },\n            // Saving\n            {\n                command: CommonCommands.SAVE.id,\n                keybinding: 'ctrlcmd+s'\n            },\n            {\n                command: CommonCommands.SAVE_ALL.id,\n                keybinding: 'ctrlcmd+alt+s'\n            },\n            // Theming\n            {\n                command: CommonCommands.SELECT_COLOR_THEME.id,\n                keybinding: 'ctrlcmd+k ctrlcmd+t'\n            }\n        );\n    }\n\n    protected async openAbout(): Promise<void> {\n        this.aboutDialog.open();\n    }\n\n    protected shouldPreventClose = false;\n\n    /**\n     * registers event listener which make sure that\n     * window doesn't get closed if CMD/CTRL W is pressed.\n     * Too many users have that in their muscle memory.\n     * Chrome doesn't let us rebind or prevent default the keybinding, so this\n     * at least doesn't close the window immediately.\n     */\n    protected registerCtrlWHandling(): void {\n        function isCtrlCmd(event: KeyboardEvent): boolean {\n            return (isOSX && event.metaKey) || (!isOSX && event.ctrlKey);\n        }\n\n        window.document.addEventListener('keydown', event => {\n            this.shouldPreventClose = isCtrlCmd(event) && event.code === 'KeyW';\n        });\n\n        window.document.addEventListener('keyup', () => {\n            this.shouldPreventClose = false;\n        });\n    }\n\n    onWillStop(): true | undefined {\n        try {\n            if (this.shouldPreventClose || this.shell.canSaveAll()) {\n                return true;\n            }\n        } finally {\n            this.shouldPreventClose = false;\n        }\n    }\n\n    protected selectIconTheme(): void {\n        let resetTo: string | undefined = this.iconThemes.current;\n        const previewTheme = debounce((id: string) => this.iconThemes.current = id, 200);\n\n        let items: (QuickOpenItem & { id: string })[] = [];\n        for (const iconTheme of this.iconThemes.definitions) {\n            const item = Object.assign(new QuickOpenItem({\n                label: iconTheme.label,\n                description: iconTheme.description,\n                run: (mode: QuickOpenMode) => {\n                    if (mode === QuickOpenMode.OPEN) {\n                        resetTo = undefined;\n                    }\n                    previewTheme(iconTheme.id);\n                    return true;\n                }\n            }), { id: iconTheme.id });\n            items.push(item);\n        }\n        items = items.sort((a, b) => {\n            if (a.id === 'none') {\n                return -1;\n            }\n            return a.getLabel()!.localeCompare(b.getLabel()!);\n        });\n        this.quickOpenService.open({\n            onType: (_, accept) => accept(items)\n        }, {\n                placeholder: 'Select File Icon Theme',\n                fuzzyMatchLabel: true,\n                selectIndex: () => items.findIndex(item => item.id === this.iconThemes.current),\n                onClose: () => {\n                    if (resetTo) {\n                        previewTheme.cancel();\n                        this.iconThemes.current = resetTo;\n                    }\n                }\n            });\n    }\n\n    protected selectColorTheme(): void {\n        let resetTo: string | undefined = this.themeService.getCurrentTheme().id;\n        const previewTheme = debounce((id: string) => this.themeService.setCurrentTheme(id), 200);\n\n        type ThemeQuickOpenItem = QuickOpenItem & { id: string };\n        const itemsByTheme: { light: ThemeQuickOpenItem[], dark: ThemeQuickOpenItem[], hc: ThemeQuickOpenItem[] } = { light: [], dark: [], hc: [] };\n        for (const theme of this.themeService.getThemes().sort((a, b) => a.label.localeCompare(b.label))) {\n            const themeItems = itemsByTheme[theme.type];\n            const groupLabel = themeItems.length === 0 ? (theme.type === 'hc' ? 'high contrast' : theme.type) + ' themes' : undefined;\n            themeItems.push(Object.assign(new QuickOpenGroupItem({\n                label: theme.label,\n                description: theme.description,\n                run: (mode: QuickOpenMode) => {\n                    if (mode === QuickOpenMode.OPEN) {\n                        resetTo = undefined;\n                    }\n                    previewTheme(theme.id);\n                    return true;\n                },\n                groupLabel,\n                showBorder: !!groupLabel && theme.type !== 'light'\n            }), { id: theme.id }));\n        }\n        const items = [...itemsByTheme.light, ...itemsByTheme.dark, ...itemsByTheme.hc];\n        this.quickOpenService.open({\n            onType: (_, accept) => accept(items)\n        }, {\n                placeholder: 'Select Color Theme (Up/Down Keys to Preview)',\n                fuzzyMatchLabel: true,\n                selectIndex: () => {\n                    const current = this.themeService.getCurrentTheme().id;\n                    return items.findIndex(item => item.id === current);\n                },\n                onClose: () => {\n                    if (resetTo) {\n                        previewTheme.cancel();\n                        this.themeService.setCurrentTheme(resetTo);\n                    }\n                }\n            });\n    }\n\n    registerColors(colors: ColorRegistry): void {\n        colors.register(\n            // Base Colors should be aligned with https://code.visualstudio.com/api/references/theme-color#base-colors\n            // if not yet contributed by Monaco, check runtime css variables to learn\n            { id: 'selection.background', defaults: { dark: '#217daf', light: '#c0dbf1' }, description: 'Overall border color for focused elements. This color is only used if not overridden by a component.' },\n            { id: 'icon.foreground', defaults: { dark: '#C5C5C5', light: '#424242', hc: '#FFFFFF' }, description: 'The default color for icons in the workbench.' },\n\n            // Window border colors should be aligned with https://code.visualstudio.com/api/references/theme-color#window-border\n            {\n                id: 'window.activeBorder', defaults: {\n                    hc: 'contrastBorder'\n                }, description: 'The color used for the border of the window when it is active.'\n            },\n            {\n                id: 'window.inactiveBorder', defaults: {\n                    hc: 'contrastBorder'\n                },\n                description: 'The color used for the border of the window when it is inactive.'\n            },\n\n            // Buttons should be aligned with https://code.visualstudio.com/api/references/theme-color#button-control\n            // if not yet contributed by Monaco, check runtime css variables to learn\n            { id: 'button.foreground', defaults: { dark: Color.white, light: Color.white, hc: Color.white }, description: 'Button foreground color.' },\n            { id: 'button.background', defaults: { dark: '#0E639C', light: '#007ACC' }, description: 'Button background color.' },\n            { id: 'button.hoverBackground', defaults: { dark: Color.lighten('button.background', 0.2), light: Color.darken('button.background', 0.2) }, description: 'Button background color when hovering.' },\n\n            // Activity Bar colors should be aligned with https://code.visualstudio.com/api/references/theme-color#activity-bar\n            {\n                id: 'activityBar.background', defaults: {\n                    dark: '#333333',\n                    light: '#2C2C2C',\n                    hc: '#000000'\n                }, description: 'Activity bar background color. The activity bar is showing on the far left or right and allows to switch between views of the side bar.'\n            }, {\n                id: 'activityBar.foreground', defaults: {\n                    dark: Color.white,\n                    light: Color.white,\n                    hc: Color.white\n                }, description: 'Activity bar item foreground color when it is active. The activity bar is showing on the far left or right and allows to switch between views of the side bar.',\n            }, {\n                id: 'activityBar.inactiveForeground', defaults: {\n                    dark: Color.transparent('activityBar.foreground', 0.4),\n                    light: Color.transparent('activityBar.foreground', 0.4),\n                    hc: Color.white\n                }, description: 'Activity bar item foreground color when it is inactive. The activity bar is showing on the far left or right and allows to switch between views of the side bar.'\n            },\n            {\n                id: 'activityBar.border', defaults: {\n                    hc: 'contrastBorder'\n                }, description: 'Activity bar border color separating to the side bar. The activity bar is showing on the far left or right and allows to switch between views of the side bar.'\n            },\n            {\n                id: 'activityBar.activeBorder', defaults: {\n                    dark: 'activityBar.foreground',\n                    light: 'activityBar.foreground',\n                }, description: 'Activity bar border color for the active item. The activity bar is showing on the far left or right and allows to switch between views of the side bar.'\n            },\n            {\n                id: 'activityBar.activeFocusBorder',\n                description: 'Activity bar focus border color for the active item. The activity bar is showing on the far left or right and allows to switch between views of the side bar.'\n            },\n            { id: 'activityBar.activeBackground', description: 'Activity bar background color for the active item. The activity bar is showing on the far left or right and allows to switch between views of the side bar.' },\n            {\n                id: 'activityBar.dropBackground', defaults: {\n                    dark: Color.transparent('#ffffff', 0.12),\n                    light: Color.transparent('#ffffff', 0.12),\n                    hc: Color.transparent('#ffffff', 0.12),\n                }, description: 'Drag and drop feedback color for the activity bar items. The color should have transparency so that the activity bar entries can still shine through. The activity bar is showing on the far left or right and allows to switch between views of the side bar.'\n            },\n            {\n                id: 'activityBarBadge.background', defaults: {\n                    dark: '#007ACC',\n                    light: '#007ACC',\n                    hc: '#000000'\n                }, description: 'Activity notification badge background color. The activity bar is showing on the far left or right and allows to switch between views of the side bar.'\n            },\n            {\n                id: 'activityBarBadge.foreground', defaults: {\n                    dark: Color.white,\n                    light: Color.white,\n                    hc: Color.white\n                }, description: 'Activity notification badge foreground color. The activity bar is showing on the far left or right and allows to switch between views of the side bar.'\n            },\n\n            // Input control colors should be aligned with https://code.visualstudio.com/api/references/theme-color#input-control\n            // if not yet contributed by Monaco, check runtime css variables to learn\n            { id: 'input.border', defaults: { hc: 'contrastBorder' }, description: 'Input box border.' },\n            { id: 'inputValidation.errorForeground', defaults: { dark: 'errorForeground', light: 'errorForeground', hc: 'errorForeground' }, description: 'Input validation foreground color for error severity.' },\n            { id: 'inputValidation.infoForeground', description: 'Input validation foreground color for information severity.' },\n            { id: 'inputValidation.warningForeground', description: 'Input validation foreground color for warning severity.' },\n\n            // Side Bar should be aligned with https://code.visualstudio.com/api/references/theme-color#side-bar\n            // if not yet contributed by Monaco, check runtime css variables to learn\n            { id: 'sideBar.background', defaults: { dark: '#252526', light: '#F3F3F3', hc: '#000000' }, description: 'Side bar background color. The side bar is the container for views like explorer and search.' },\n            { id: 'sideBar.foreground', description: 'Side bar foreground color. The side bar is the container for views like explorer and search.' },\n            { id: 'sideBarSectionHeader.background', defaults: { dark: '#80808033', light: '#80808033' }, description: 'Side bar section header background color. The side bar is the container for views like explorer and search.' },\n            { id: 'sideBarSectionHeader.foreground', description: 'Side bar foreground color. The side bar is the container for views like explorer and search.' },\n            { id: 'sideBarSectionHeader.border', defaults: { hc: '#6FC3DF' }, description: 'Side bar section header border color. The side bar is the container for views like explorer and search.' },\n\n            // Lists and Trees colors should be aligned with https://code.visualstudio.com/api/references/theme-color#lists-and-trees\n            // if not yet contributed by Monaco, check runtime css variables to learn.\n            // TODO: Following are not yet supported/no respective elements in theia:\n            // list.focusBackground, list.focusForeground, list.inactiveFocusBackground, list.filterMatchBorder,\n            // list.dropBackground, listFilterWidget.outline, listFilterWidget.noMatchesOutline, tree.indentGuidesStroke\n            // list.invalidItemForeground,\n            // list.warningForeground, list.errorForeground => tree node needs an respective class\n            { id: 'list.activeSelectionBackground', defaults: { dark: '#094771', light: '#0074E8' }, description: 'List/Tree background color for the selected item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.' },\n            { id: 'list.activeSelectionForeground', defaults: { dark: '#FFF', light: '#FFF' }, description: 'List/Tree foreground color for the selected item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.' },\n            { id: 'list.inactiveSelectionBackground', defaults: { dark: '#37373D', light: '#E4E6F1' }, description: 'List/Tree background color for the selected item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.' },\n            { id: 'list.inactiveSelectionForeground', description: 'List/Tree foreground color for the selected item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.' },\n            { id: 'list.hoverBackground', defaults: { dark: '#2A2D2E', light: '#F0F0F0' }, description: 'List/Tree background when hovering over items using the mouse.' },\n            { id: 'list.hoverForeground', description: 'List/Tree foreground when hovering over items using the mouse.' },\n            { id: 'list.filterMatchBackground', defaults: { dark: 'editor.findMatchHighlightBackground', light: 'editor.findMatchHighlightBackground' }, description: 'Background color of the filtered match.' },\n\n            // Editor Group & Tabs colors should be aligned with https://code.visualstudio.com/api/references/theme-color#editor-groups-tabs\n            {\n                id: 'editorGroup.border',\n                defaults: {\n                    dark: '#444444',\n                    light: '#E7E7E7',\n                    hc: 'contrastBorder'\n                },\n                description: 'Color to separate multiple editor groups from each other. Editor groups are the containers of editors.'\n            },\n            {\n                id: 'editorGroup.dropBackground',\n                defaults: {\n                    dark: Color.transparent('#53595D', 0.5),\n                    light: Color.transparent('#2677CB', 0.18)\n                },\n                description: 'Background color when dragging editors around. The color should have transparency so that the editor contents can still shine through.'\n            },\n            {\n                id: 'editorGroupHeader.tabsBackground',\n                defaults: {\n                    dark: '#252526',\n                    light: '#F3F3F3'\n                },\n                description: 'Background color of the editor group title header when tabs are enabled. Editor groups are the containers of editors.'\n            },\n            {\n                id: 'editorGroupHeader.tabsBorder',\n                defaults: {\n                    hc: 'contrastBorder'\n                },\n                description: 'Border color of the editor group title header when tabs are enabled. Editor groups are the containers of editors.'\n            },\n            {\n                id: 'tab.activeBackground',\n                defaults: {\n                    dark: 'editor.background',\n                    light: 'editor.background',\n                    hc: 'editor.background'\n                },\n                description: 'Active tab background color. Tabs are the containers for editors in the editor area. Multiple tabs can be opened in one editor group. There can be multiple editor groups.'\n            },\n            {\n                id: 'tab.unfocusedActiveBackground',\n                defaults: {\n                    dark: 'tab.activeBackground',\n                    light: 'tab.activeBackground',\n                    hc: 'tab.activeBackground'\n                },\n                description: 'Active tab background color in an unfocused group. Tabs are the containers for editors in the editor area. Multiple tabs can be opened in one editor group. There can be multiple editor groups.'\n            },\n            {\n                id: 'tab.inactiveBackground',\n                defaults: {\n                    dark: '#2D2D2D',\n                    light: '#ECECEC'\n                },\n                description: 'Inactive tab background color. Tabs are the containers for editors in the editor area. Multiple tabs can be opened in one editor group. There can be multiple editor groups.'\n            },\n            {\n                id: 'tab.activeForeground',\n                defaults: {\n                    dark: Color.white,\n                    light: '#333333',\n                    hc: Color.white\n                }, description: 'Active tab foreground color in an active group. Tabs are the containers for editors in the editor area. Multiple tabs can be opened in one editor group. There can be multiple editor groups.'\n            },\n            {\n                id: 'tab.inactiveForeground', defaults: {\n                    dark: Color.transparent('tab.activeForeground', 0.5),\n                    light: Color.transparent('tab.activeForeground', 0.7),\n                    hc: Color.white\n                }, description: 'Inactive tab foreground color in an active group. Tabs are the containers for editors in the editor area. Multiple tabs can be opened in one editor group. There can be multiple editor groups.'\n            },\n            {\n                id: 'tab.unfocusedActiveForeground', defaults: {\n                    dark: Color.transparent('tab.activeForeground', 0.5),\n                    light: Color.transparent('tab.activeForeground', 0.7),\n                    hc: Color.white\n                }, description: 'Active tab foreground color in an unfocused group. Tabs are the containers for editors in the editor area. Multiple tabs can be opened in one editor group. There can be multiple editor groups.'\n            },\n            {\n                id: 'tab.unfocusedInactiveForeground', defaults: {\n                    dark: Color.transparent('tab.inactiveForeground', 0.5),\n                    light: Color.transparent('tab.inactiveForeground', 0.5),\n                    hc: Color.white\n                }, description: 'Inactive tab foreground color in an unfocused group. Tabs are the containers for editors in the editor area. Multiple tabs can be opened in one editor group. There can be multiple editor groups.'\n            },\n            {\n                id: 'tab.border', defaults: {\n                    dark: '#252526',\n                    light: '#F3F3F3',\n                    hc: 'contrastBorder'\n                }, description: 'Border to separate tabs from each other. Tabs are the containers for editors in the editor area. Multiple tabs can be opened in one editor group. There can be multiple editor groups.'\n            },\n            {\n                id: 'tab.activeBorder',\n                description: 'Border on the bottom of an active tab. Tabs are the containers for editors in the editor area. Multiple tabs can be opened in one editor group. There can be multiple editor groups.'\n            },\n            {\n                id: 'tab.unfocusedActiveBorder',\n                defaults: {\n                    dark: Color.transparent('tab.activeBorder', 0.5),\n                    light: Color.transparent('tab.activeBorder', 0.7)\n                },\n                description: 'Border on the bottom of an active tab in an unfocused group. Tabs are the containers for editors in the editor area. Multiple tabs can be opened in one editor group. There can be multiple editor groups.'\n            },\n            {\n                id: 'tab.activeBorderTop',\n                defaults: {\n                    dark: 'focusBorder',\n                    light: 'focusBorder'\n                },\n                description: 'Border to the top of an active tab. Tabs are the containers for editors in the editor area. Multiple tabs can be opened in one editor group. There can be multiple editor groups.'\n            },\n            {\n                id: 'tab.unfocusedActiveBorderTop', defaults: {\n                    dark: Color.transparent('tab.activeBorderTop', 0.5),\n                    light: Color.transparent('tab.activeBorderTop', 0.7)\n                }, description: 'Border to the top of an active tab in an unfocused group. Tabs are the containers for editors in the editor area. Multiple tabs can be opened in one editor group. There can be multiple editor groups.'\n            },\n            {\n                id: 'tab.hoverBackground',\n                description: 'Tab background color when hovering. Tabs are the containers for editors in the editor area. Multiple tabs can be opened in one editor group. There can be multiple editor groups.'\n            }, {\n                id: 'tab.unfocusedHoverBackground', defaults: {\n                    dark: Color.transparent('tab.hoverBackground', 0.5),\n                    light: Color.transparent('tab.hoverBackground', 0.7)\n                }, description: 'Tab background color in an unfocused group when hovering. Tabs are the containers for editors in the editor area. Multiple tabs can be opened in one editor group. There can be multiple editor groups.'\n            },\n            {\n                id: 'tab.hoverBorder',\n                description: 'Border to highlight tabs when hovering. Tabs are the containers for editors in the editor area. Multiple tabs can be opened in one editor group. There can be multiple editor groups.'\n            }, {\n                id: 'tab.unfocusedHoverBorder', defaults: {\n                    dark: Color.transparent('tab.hoverBorder', 0.5),\n                    light: Color.transparent('tab.hoverBorder', 0.7)\n                }, description: 'Border to highlight tabs in an unfocused group when hovering. Tabs are the containers for editors in the editor area. Multiple tabs can be opened in one editor group. There can be multiple editor groups.'\n            },\n            {\n                id: 'tab.activeModifiedBorder', defaults: {\n                    dark: '#3399CC',\n                    light: '#33AAEE'\n                }, description: 'Border on the top of modified (dirty) active tabs in an active group. Tabs are the containers for editors in the editor area. Multiple tabs can be opened in one editor group. There can be multiple editor groups.'\n            },\n            {\n                id: 'tab.inactiveModifiedBorder', defaults: {\n                    dark: Color.transparent('tab.activeModifiedBorder', 0.5),\n                    light: Color.transparent('tab.activeModifiedBorder', 0.5),\n                    hc: Color.white\n                }, description: 'Border on the top of modified (dirty) inactive tabs in an active group. Tabs are the containers for editors in the editor area. Multiple tabs can be opened in one editor group. There can be multiple editor groups.'\n            },\n            {\n                id: 'tab.unfocusedActiveModifiedBorder', defaults: {\n                    dark: Color.transparent('tab.activeModifiedBorder', 0.5),\n                    light: Color.transparent('tab.activeModifiedBorder', 0.7),\n                    hc: Color.white\n                }, description: 'Border on the top of modified (dirty) active tabs in an unfocused group. Tabs are the containers for editors in the editor area. Multiple tabs can be opened in one editor group. There can be multiple editor groups.'\n            },\n            {\n                id: 'tab.unfocusedInactiveModifiedBorder', defaults: {\n                    dark: Color.transparent('tab.inactiveModifiedBorder', 0.5),\n                    light: Color.transparent('tab.inactiveModifiedBorder', 0.5),\n                    hc: Color.white\n                }, description: 'Border on the top of modified (dirty) inactive tabs in an unfocused group. Tabs are the containers for editors in the editor area. Multiple tabs can be opened in one editor group. There can be multiple editor groups.'\n            },\n\n            // Status bar colors should be aligned with https://code.visualstudio.com/api/references/theme-color#status-bar-colors\n            // Not yet supported:\n            // statusBarItem.prominentForeground, statusBarItem.prominentBackground, statusBarItem.prominentHoverBackground\n            {\n                id: 'statusBar.foreground', defaults: {\n                    dark: '#FFFFFF',\n                    light: '#FFFFFF',\n                    hc: '#FFFFFF'\n                }, description: 'Status bar foreground color when a workspace is opened. The status bar is shown in the bottom of the window.'\n            },\n            {\n                id: 'statusBar.background', defaults: {\n                    dark: '#007ACC',\n                    light: '#007ACC'\n                }, description: 'Status bar background color when a workspace is opened. The status bar is shown in the bottom of the window.'\n            },\n            {\n                id: 'statusBar.noFolderForeground', defaults: {\n                    dark: 'statusBar.foreground',\n                    light: 'statusBar.foreground',\n                    hc: 'statusBar.foreground'\n                }, description: 'Status bar foreground color when no folder is opened. The status bar is shown in the bottom of the window.'\n            },\n            {\n                id: 'statusBar.noFolderBackground', defaults: {\n                    dark: '#68217A',\n                    light: '#68217A'\n                }, description: 'Status bar background color when no folder is opened. The status bar is shown in the bottom of the window.'\n            },\n            {\n                id: 'statusBar.border', defaults: {\n                    hc: 'contrastBorder'\n                }, description: 'Status bar border color separating to the sidebar and editor. The status bar is shown in the bottom of the window.'\n            },\n            {\n                id: 'statusBar.noFolderBorder', defaults: {\n                    dark: 'statusBar.border',\n                    light: 'statusBar.border',\n                    hc: 'statusBar.border'\n                }, description: 'Status bar border color separating to the sidebar and editor when no folder is opened. The status bar is shown in the bottom of the window.'\n            },\n            {\n                id: 'statusBarItem.activeBackground', defaults: {\n                    dark: Color.rgba(255, 255, 255, 0.18),\n                    light: Color.rgba(255, 255, 255, 0.18),\n                    hc: Color.rgba(255, 255, 255, 0.18)\n                }, description: 'Status bar item background color when clicking. The status bar is shown in the bottom of the window.'\n            },\n            {\n                id: 'statusBarItem.hoverBackground', defaults: {\n                    dark: Color.rgba(255, 255, 255, 0.12),\n                    light: Color.rgba(255, 255, 255, 0.12),\n                    hc: Color.rgba(255, 255, 255, 0.12)\n                }, description: 'Status bar item background color when hovering. The status bar is shown in the bottom of the window.'\n            },\n\n            // Quickinput colors should be aligned with https://code.visualstudio.com/api/references/theme-color#quick-picker\n            // if not yet contributed by Monaco, check runtime css variables to learn.\n            {\n                id: 'quickInput.background', defaults: {\n                    dark: 'sideBar.background',\n                    light: 'sideBar.background',\n                    hc: 'sideBar.background'\n                }, description: 'Quick Input background color. The Quick Input widget is the container for views like the color theme picker.'\n            },\n            {\n                id: 'quickInput.foreground', defaults: {\n                    dark: 'sideBar.foreground',\n                    light: 'sideBar.foreground',\n                    hc: 'sideBar.foreground'\n                }, description: 'Quick Input foreground color. The Quick Input widget is the container for views like the color theme picker.'\n            },\n\n            // Panel colors should be aligned with https://code.visualstudio.com/api/references/theme-color#panel-colors\n            {\n                id: 'panel.background', defaults: {\n                    dark: 'editor.background', light: 'editor.background', hc: 'editor.background'\n                }, description: 'Panel background color. Panels are shown below the editor area and contain views like output and integrated terminal.'\n            },\n            {\n                id: 'panel.border', defaults: {\n                    dark: Color.transparent('#808080', 0.35), light: Color.transparent('#808080', 0.35), hc: 'contrastBorder'\n                }, description: 'Panel border color to separate the panel from the editor. Panels are shown below the editor area and contain views like output and integrated terminal.'\n            },\n            {\n                id: 'panel.dropBackground', defaults: {\n                    dark: Color.rgba(255, 255, 255, 0.12), light: Color.transparent('#2677CB', 0.18), hc: Color.rgba(255, 255, 255, 0.12)\n                }, description: 'Drag and drop feedback color for the panel title items. The color should have transparency so that the panel entries can still shine through. Panels are shown below the editor area and contain views like output and integrated terminal.'\n            },\n            {\n                id: 'panelTitle.activeForeground', defaults: {\n                    dark: '#E7E7E7', light: '#424242', hc: Color.white\n                }, description: 'Title color for the active panel. Panels are shown below the editor area and contain views like output and integrated terminal.'\n            },\n            {\n                id: 'panelTitle.inactiveForeground', defaults: {\n                    dark: Color.transparent('panelTitle.activeForeground', 0.6), light: Color.transparent('panelTitle.activeForeground', 0.75), hc: Color.white\n                }, description: 'Title color for the inactive panel. Panels are shown below the editor area and contain views like output and integrated terminal.'\n            },\n            {\n                id: 'panelTitle.activeBorder', defaults: {\n                    dark: 'panelTitle.activeForeground', light: 'panelTitle.activeForeground', hc: 'contrastBorder'\n                }, description: 'Border color for the active panel title. Panels are shown below the editor area and contain views like output and integrated terminal.'\n            },\n            {\n                id: 'panelInput.border', defaults: { light: '#ddd' },\n                description: 'Input box border for inputs in the panel.'\n            },\n            {\n                id: 'imagePreview.border', defaults: {\n                    dark: Color.transparent('#808080', 0.35), light: Color.transparent('#808080', 0.35), hc: 'contrastBorder'\n                }, description: 'Border color for image in image preview.'\n            },\n\n            // Title Bar colors should be aligned with https://code.visualstudio.com/api/references/theme-color#title-bar-colors\n            {\n                id: 'titleBar.activeForeground', defaults: {\n                    dark: '#CCCCCC',\n                    light: '#333333',\n                    hc: '#FFFFFF'\n                }, description: 'Title bar foreground when the window is active. Note that this color is currently only supported on macOS.'\n            },\n            {\n                id: 'titleBar.inactiveForeground', defaults: {\n                    dark: Color.transparent('titleBar.activeForeground', 0.6),\n                    light: Color.transparent('titleBar.activeForeground', 0.6)\n                }, description: 'Title bar foreground when the window is inactive. Note that this color is currently only supported on macOS.'\n            }, {\n                id: 'titleBar.activeBackground', defaults: {\n                    dark: '#3C3C3C',\n                    light: '#DDDDDD',\n                    hc: '#000000'\n                }, description: 'Title bar background when the window is active. Note that this color is currently only supported on macOS.'\n            }, {\n                id: 'titleBar.inactiveBackground', defaults: {\n                    dark: Color.transparent('titleBar.activeBackground', 0.6),\n                    light: Color.transparent('titleBar.activeBackground', 0.6)\n                }, description: 'Title bar background when the window is inactive. Note that this color is currently only supported on macOS.'\n            }, {\n                id: 'titleBar.border', defaults: {\n                    hc: 'contrastBorder'\n                }, description: 'Title bar border color. Note that this color is currently only supported on macOS.'\n            },\n\n            // Menu Bar colors should be aligned with https://code.visualstudio.com/api/references/theme-color#menu-bar-colors\n            {\n                id: 'menubar.selectionForeground', defaults: {\n                    dark: 'titleBar.activeForeground',\n                    light: 'titleBar.activeForeground',\n                    hc: 'titleBar.activeForeground'\n                }, description: 'Foreground color of the selected menu item in the menubar.'\n            }, {\n                id: 'menubar.selectionBackground', defaults: {\n                    dark: Color.transparent('#ffffff', 0.1),\n                    light: Color.transparent('#000000', 0.1)\n                }, description: 'Background color of the selected menu item in the menubar.'\n            }, {\n                id: 'menubar.selectionBorder', defaults: {\n                    hc: 'activeContrastBorder'\n                }, description: 'Border color of the selected menu item in the menubar.'\n            },\n            {\n                id: 'menu.border', defaults: {\n                    hc: 'contrastBorder'\n                }, description: 'Border color of menus.'\n            }, {\n                id: 'menu.foreground', defaults: {\n                    dark: 'dropdown.foreground', light: 'foreground', hc: 'dropdown.foreground'\n                },\n                description: 'Foreground color of menu items.'\n            }, {\n                id: 'menu.background', defaults: {\n                    dark: 'dropdown.background', light: 'dropdown.background', hc: 'dropdown.background'\n                }, description: 'Background color of menu items.'\n            }, {\n                id: 'menu.selectionForeground', defaults: {\n                    dark: 'list.activeSelectionForeground', light: 'list.activeSelectionForeground', hc: 'list.activeSelectionForeground'\n                }, description: 'Foreground color of the selected menu item in menus.'\n            },\n            {\n                id: 'menu.selectionBackground', defaults:\n                    { dark: 'list.activeSelectionBackground', light: 'list.activeSelectionBackground', hc: 'list.activeSelectionBackground' },\n                description: 'Background color of the selected menu item in menus.'\n            },\n            {\n                id: 'menu.selectionBorder', defaults: {\n                    hc: 'activeContrastBorder'\n                }, description: 'Border color of the selected menu item in menus.'\n            },\n            {\n                id: 'menu.separatorBackground', defaults: {\n                    dark: '#BBBBBB', light: '#888888', hc: 'contrastBorder'\n                },\n                description: 'Color of a separator menu item in menus.'\n            },\n\n            // Welcome Page colors should be aligned with https://code.visualstudio.com/api/references/theme-color#welcome-page\n            { id: 'welcomePage.background', description: 'Background color for the Welcome page.' },\n            { id: 'welcomePage.buttonBackground', defaults: { dark: Color.rgba(0, 0, 0, .2), light: Color.rgba(0, 0, 0, .04), hc: Color.black }, description: 'Background color for the buttons on the Welcome page.' },\n            { id: 'welcomePage.buttonHoverBackground', defaults: { dark: Color.rgba(200, 235, 255, .072), light: Color.rgba(0, 0, 0, .10) }, description: 'Hover background color for the buttons on the Welcome page.' },\n            { id: 'walkThrough.embeddedEditorBackground', defaults: { dark: Color.rgba(0, 0, 0, .4), light: '#f4f4f4' }, description: 'Background color for the embedded editors on the Interactive Playground.' },\n\n            // Settings Editor colors should be aligned with https://code.visualstudio.com/api/references/theme-color#settings-editor-colors\n            {\n                id: 'settings.headerForeground', defaults: {\n                    light: '#444444', dark: '#e7e7e7', hc: '#ffffff'\n                }, description: 'The foreground color for a section header or active title.'\n            }, {\n                id: 'settings.modifiedItemIndicator', defaults: {\n                    light: Color.rgba(102, 175, 224),\n                    dark: Color.rgba(12, 125, 157),\n                    hc: Color.rgba(0, 73, 122)\n                }, description: 'The color of the modified setting indicator.'\n            }, {\n                id: 'settings.dropdownBackground', defaults:\n                    { dark: 'dropdown.background', light: 'dropdown.background', hc: 'dropdown.background' },\n                description: 'Settings editor dropdown background.'\n            }, {\n                id: 'settings.dropdownForeground', defaults: {\n                    dark: 'dropdown.foreground', light: 'dropdown.foreground', hc: 'dropdown.foreground'\n                }, description: 'Settings editor dropdown foreground.'\n            },\n            {\n                id: 'settings.dropdownBorder', defaults: {\n                    dark: 'dropdown.border', light: 'dropdown.border', hc: 'dropdown.border'\n                }, description: 'Settings editor dropdown border.'\n            },\n            {\n                id: 'settings.dropdownListBorder', defaults: {\n                    dark: 'editorWidget.border', light: 'editorWidget.border', hc: 'editorWidget.border'\n                }, description: 'Settings editor dropdown list border. This surrounds the options and separates the options from the description.'\n            },\n            {\n                id: 'settings.checkboxBackground', defaults: {\n                    dark: 'checkbox.background', light: 'checkbox.background', hc: 'checkbox.background'\n                }, description: 'Settings editor checkbox background.'\n            }, {\n                id: 'settings.checkboxForeground', defaults: {\n                    dark: 'checkbox.foreground', light: 'checkbox.foreground', hc: 'checkbox.foreground'\n                }, description: 'Settings editor checkbox foreground.'\n            }, {\n                id: 'settings.checkboxBorder', defaults:\n                {\n                    dark: 'checkbox.border', light: 'checkbox.border', hc: 'checkbox.border'\n                }, description: 'Settings editor checkbox border.'\n            }, {\n                id: 'settings.textInputBackground', defaults: {\n                    dark: 'input.background', light: 'input.background', hc: 'input.background'\n                }, description: 'Settings editor text input box background.'\n            }, {\n                id: 'settings.textInputForeground', defaults: {\n                    dark: 'input.foreground', light: 'input.foreground', hc: 'input.foreground'\n                }, description: 'Settings editor text input box foreground.'\n            }, {\n                id: 'settings.textInputBorder', defaults: {\n                    dark: 'input.border', light: 'input.border', hc: 'input.border'\n                }, description: 'Settings editor text input box border.'\n            }, {\n                id: 'settings.numberInputBackground', defaults: {\n                    dark: 'input.background', light: 'input.background', hc: 'input.background'\n                }, description: 'Settings editor number input box background.'\n            }, {\n                id: 'settings.numberInputForeground', defaults: {\n                    dark: 'input.foreground', light: 'input.foreground', hc: 'input.foreground'\n                }, description: 'Settings editor number input box foreground.'\n            },\n            {\n                id: 'settings.numberInputBorder', defaults: {\n                    dark: 'input.border', light: 'input.border', hc: 'input.border'\n                }, description: 'Settings editor number input box border.'\n            },\n\n            // Theia Variable colors\n            {\n                id: 'variable.name.color', defaults: {\n                    dark: '#C586C0',\n                    light: '#9B46B0',\n                    hc: '#C586C0'\n                },\n                description: 'Color of a variable name.'\n            },\n            {\n                id: 'variable.value.color', defaults: {\n                    dark: Color.rgba(204, 204, 204, 0.6),\n                    light: Color.rgba(108, 108, 108, 0.8),\n                    hc: Color.rgba(204, 204, 204, 0.6)\n                },\n                description: 'Color of a variable value.'\n            },\n            {\n                id: 'variable.number.variable.color', defaults: {\n                    dark: '#B5CEA8',\n                    light: '#09885A',\n                    hc: '#B5CEA8'\n                },\n                description: 'Value color of a number variable'\n            },\n            {\n                id: 'variable.boolean.variable.color', defaults: {\n                    dark: '#4E94CE',\n                    light: '#0000FF',\n                    hc: '#4E94CE'\n                },\n                description: 'Value color of a boolean variable'\n            },\n            {\n                id: 'variable.string.variable.color', defaults: {\n                    dark: '#CE9178',\n                    light: '#A31515',\n                    hc: '#CE9178'\n                },\n                description: 'Value color of a string variable'\n            },\n\n            // Theia ANSI colors\n            {\n                id: 'ansi.black.color', defaults: {\n                    dark: '#A0A0A0',\n                    light: Color.rgba(128, 128, 128),\n                    hc: '#A0A0A0'\n                },\n                description: 'ANSI black color'\n            },\n            {\n                id: 'ansi.red.color', defaults: {\n                    dark: '#A74747',\n                    light: '#BE1717',\n                    hc: '#A74747'\n                },\n                description: 'ANSI red color'\n            },\n            {\n                id: 'ansi.green.color', defaults: {\n                    dark: '#348F34',\n                    light: '#338A2F',\n                    hc: '#348F34'\n                },\n                description: 'ANSI green color'\n            },\n            {\n                id: 'ansi.yellow.color', defaults: {\n                    dark: '#5F4C29',\n                    light: '#BEB817',\n                    hc: '#5F4C29'\n                },\n                description: 'ANSI yellow color'\n            },\n            {\n                id: 'ansi.blue.color', defaults: {\n                    dark: '#6286BB',\n                    light: Color.rgba(0, 0, 139),\n                    hc: '#6286BB'\n                },\n                description: 'ANSI blue color'\n            },\n            {\n                id: 'ansi.magenta.color', defaults: {\n                    dark: '#914191',\n                    light: Color.rgba(139, 0, 139),\n                    hc: '#914191'\n                },\n                description: 'ANSI magenta color'\n            },\n            {\n                id: 'ansi.cyan.color', defaults: {\n                    dark: '#218D8D',\n                    light: Color.rgba(0, 139, 139),\n                    hc: '#218D8D'\n                },\n                description: 'ANSI cyan color'\n            },\n            {\n                id: 'ansi.white.color', defaults: {\n                    dark: '#707070',\n                    light: '#BDBDBD',\n                    hc: '#707070'\n                },\n                description: 'ANSI white color'\n            },\n\n            // Theia defaults\n            // Base\n            {\n                id: 'errorBackground',\n                defaults: {\n                    dark: 'inputValidation.errorBackground',\n                    light: 'inputValidation.errorBackground',\n                    hc: 'inputValidation.errorBackground'\n                }, description: 'Background color of error widgets (like alerts or notifications).'\n            },\n            {\n                id: 'successBackground',\n                defaults: {\n                    dark: 'editorGutter.addedBackground',\n                    light: 'editorGutter.addedBackground',\n                    hc: 'editorGutter.addedBackground'\n                }, description: 'Background color of success widgets (like alerts or notifications).'\n            },\n            {\n                id: 'warningBackground',\n                defaults: {\n                    dark: 'editorWarning.foreground',\n                    light: 'editorWarning.foreground',\n                    hc: 'editorWarning.border'\n                }, description: 'Background color of warning widgets (like alerts or notifications).'\n            },\n            {\n                id: 'warningForeground',\n                defaults: {\n                    dark: 'inputValidation.warningBackground',\n                    light: 'inputValidation.warningBackground',\n                    hc: 'inputValidation.warningBackground'\n                }, description: 'Foreground color of warning widgets (like alerts or notifications).'\n            },\n            // Statusbar\n            {\n                id: 'statusBar.offlineBackground',\n                defaults: {\n                    dark: 'editorWarning.foreground',\n                    light: 'editorWarning.foreground',\n                    hc: 'editorWarning.foreground'\n                }, description: 'Background of hovered statusbar item in case the theia server is offline.'\n            },\n            {\n                id: 'statusBar.offlineForeground',\n                defaults: {\n                    dark: 'editor.background',\n                    light: 'editor.background',\n                    hc: 'editor.background'\n                }, description: 'Background of hovered statusbar item in case the theia server is offline.'\n            },\n            {\n                id: 'statusBarItem.offlineHoverBackground',\n                defaults: {\n                    dark: Color.lighten('statusBar.offlineBackground', 0.4),\n                    light: Color.lighten('statusBar.offlineBackground', 0.4),\n                    hc: Color.lighten('statusBar.offlineBackground', 0.4)\n                }, description: 'Background of hovered statusbar item in case the theia server is offline.'\n            },\n            {\n                id: 'statusBarItem.offlineActiveBackground',\n                defaults: {\n                    dark: Color.lighten('statusBar.offlineBackground', 0.6),\n                    light: Color.lighten('statusBar.offlineBackground', 0.6),\n                    hc: Color.lighten('statusBar.offlineBackground', 0.6)\n                }, description: 'Background of active statusbar item in case the theia server is offline.'\n            },\n            // Buttons\n            {\n                id: 'secondaryButton.foreground',\n                defaults: {\n                    dark: 'dropdown.foreground',\n                    light: 'dropdown.foreground',\n                    hc: 'dropdown.foreground'\n                }, description: 'Foreground color of secondary buttons.'\n            },\n            {\n                id: 'secondaryButton.disabledForeground',\n                defaults: {\n                    dark: Color.transparent('secondaryButton.foreground', 0.5),\n                    light: Color.transparent('secondaryButton.foreground', 0.5),\n                    hc: Color.transparent('secondaryButton.foreground', 0.5),\n                }, description: 'Foreground color of secondary buttons.'\n            },\n            {\n                id: 'secondaryButton.background',\n                defaults: {\n                    dark: Color.lighten('dropdown.background', 0.5),\n                    light: Color.lighten('dropdown.background', 0.5)\n                }, description: 'Background color of secondary buttons.'\n            },\n            {\n                id: 'secondaryButton.hoverBackground',\n                defaults: {\n                    dark: Color.lighten('secondaryButton.background', 0.2),\n                    light: Color.lighten('secondaryButton.background', 0.2)\n                }, description: 'Background color when hovering secondary buttons.'\n            },\n            {\n                id: 'secondaryButton.disabledBackground',\n                defaults: {\n                    dark: Color.transparent('secondaryButton.background', 0.6),\n                    light: Color.transparent('secondaryButton.background', 0.6)\n                }, description: 'Background color when hovering secondary buttons.'\n            },\n            {\n                id: 'button.disabledForeground',\n                defaults: {\n                    dark: Color.transparent('button.foreground', 0.5),\n                    light: Color.transparent('button.foreground', 0.5),\n                    hc: Color.transparent('button.foreground', 0.5)\n                }, description: 'Foreground color of secondary buttons.'\n            },\n            {\n                id: 'button.disabledBackground',\n                defaults: {\n                    dark: Color.transparent('button.background', 0.5),\n                    light: Color.transparent('button.background', 0.5)\n                }, description: 'Background color of secondary buttons.'\n            }\n        );\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2019 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { injectable } from 'inversify';\nimport { Emitter } from '../common/event';\n\nexport interface ContextKey<T> {\n    set(value: T | undefined): void;\n    reset(): void;\n    get(): T | undefined;\n}\n\nexport namespace ContextKey {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    export const None: ContextKey<any> = Object.freeze({\n        set: () => { },\n        reset: () => { },\n        get: () => undefined\n    });\n}\n\nexport interface ContextKeyChangeEvent {\n    affects(keys: Set<string>): boolean;\n}\n\n@injectable()\nexport class ContextKeyService {\n\n    protected readonly onDidChangeEmitter = new Emitter<ContextKeyChangeEvent>();\n    readonly onDidChange = this.onDidChangeEmitter.event;\n    protected fireDidChange(event: ContextKeyChangeEvent): void {\n        this.onDidChangeEmitter.fire(event);\n    }\n\n    createKey<T>(key: string, defaultValue: T | undefined): ContextKey<T> {\n        return ContextKey.None;\n    }\n    /**\n     * It should be implemented by an extension, e.g. by the monaco extension.\n     */\n    match(expression: string, context?: HTMLElement): boolean {\n        return true;\n    }\n\n    /**\n     * It should be implemented by an extension, e.g. by the monaco extension.\n     */\n    parseKeys(expression: string): Set<string> {\n        return new Set<string>();\n    }\n\n}\n","/********************************************************************************\n * Copyright (C) 2017 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\n/* eslint-disable @typescript-eslint/no-explicit-any */\n\nimport { MenuPath } from '../common/menu';\n\nexport type Anchor = MouseEvent | { x: number, y: number };\n\nexport function toAnchor(anchor: HTMLElement | { x: number, y: number }): Anchor {\n    return anchor instanceof HTMLElement ? { x: anchor.offsetLeft, y: anchor.offsetTop } : anchor;\n}\n\nexport const ContextMenuRenderer = Symbol('ContextMenuRenderer');\nexport interface ContextMenuRenderer {\n    render(options: RenderContextMenuOptions): void;\n    /** @deprecated since 0.7.2 pass `RenderContextMenuOptions` instead */\n    render(menuPath: MenuPath, anchor: Anchor, onHide?: () => void): void;\n}\n\nexport interface RenderContextMenuOptions {\n    menuPath: MenuPath\n    anchor: Anchor\n    args?: any[]\n    onHide?: () => void\n}\nexport namespace RenderContextMenuOptions {\n    export function resolve(arg: MenuPath | RenderContextMenuOptions, anchor?: Anchor, onHide?: () => void): RenderContextMenuOptions {\n        let menuPath: MenuPath;\n        let args: any[];\n        if (Array.isArray(arg)) {\n            menuPath = arg;\n            args = [anchor!];\n        } else {\n            menuPath = arg.menuPath;\n            anchor = arg.anchor;\n            onHide = arg.onHide;\n            args = arg.args ? [...arg.args, anchor] : [anchor];\n        }\n        return {\n            menuPath,\n            anchor: anchor!,\n            onHide,\n            args\n        };\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2018 Google and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { interfaces } from 'inversify';\nimport { createPreferenceProxy, PreferenceProxy, PreferenceService, PreferenceContribution, PreferenceSchema } from './preferences';\n\nexport const corePreferenceSchema: PreferenceSchema = {\n    'type': 'object',\n    properties: {\n        'workbench.list.openMode': {\n            type: 'string',\n            enum: [\n                'singleClick',\n                'doubleClick'\n            ],\n            default: 'singleClick',\n            description: 'Controls how to open items in trees using the mouse.'\n        },\n        'workbench.editor.highlightModifiedTabs': {\n            'type': 'boolean',\n            'description': 'Controls whether a top border is drawn on modified (dirty) editor tabs or not.',\n            'default': false\n        },\n        'application.confirmExit': {\n            type: 'string',\n            enum: [\n                'never',\n                'ifRequired',\n                'always',\n            ],\n            default: 'ifRequired',\n            description: 'When to confirm before closing the application window.',\n        },\n        'workbench.commandPalette.history': {\n            type: 'number',\n            default: 50,\n            minimum: 0,\n            description: 'Controls the number of recently used commands to keep in history for the command palette. Set to 0 to disable command history.'\n        },\n        'workbench.colorTheme': {\n            type: 'string',\n            description: 'Specifies the color theme used in the workbench.'\n        },\n        'workbench.iconTheme': {\n            type: ['string', 'null'],\n            description: \"Specifies the icon theme used in the workbench or 'null' to not show any file icons.\"\n        }\n    }\n};\n\nexport interface CoreConfiguration {\n    'application.confirmExit': 'never' | 'ifRequired' | 'always';\n    'workbench.list.openMode': 'singleClick' | 'doubleClick';\n    'workbench.commandPalette.history': number;\n    'workbench.editor.highlightModifiedTabs': boolean;\n    'workbench.colorTheme'?: string;\n    'workbench.iconTheme'?: string | null;\n}\n\nexport const CorePreferences = Symbol('CorePreferences');\nexport type CorePreferences = PreferenceProxy<CoreConfiguration>;\n\nexport function createCorePreferences(preferences: PreferenceService): CorePreferences {\n    return createPreferenceProxy(preferences, corePreferenceSchema);\n}\n\nexport function bindCorePreferences(bind: interfaces.Bind): void {\n    bind(CorePreferences).toDynamicValue(ctx => {\n        const preferences = ctx.container.get<PreferenceService>(PreferenceService);\n        return createCorePreferences(preferences);\n    }).inSingletonScope();\n    bind(PreferenceContribution).toConstantValue({ schema: corePreferenceSchema });\n}\n","/********************************************************************************\n * Copyright (C) 2017 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { injectable, inject } from 'inversify';\nimport { Disposable, MaybePromise, CancellationTokenSource } from '../common';\nimport { Key } from './keyboard/keys';\nimport { Widget, BaseWidget, Message, addKeyListener } from './widgets';\nimport { FrontendApplicationContribution } from './frontend-application';\n\n@injectable()\nexport class DialogProps {\n    readonly title: string;\n}\n\nexport type DialogMode = 'open' | 'preview';\n\nexport type DialogError = string | boolean | {\n    message: string\n    result: boolean\n};\nexport namespace DialogError {\n    export function getResult(error: DialogError): boolean {\n        if (typeof error === 'string') {\n            return !error.length;\n        }\n        if (typeof error === 'boolean') {\n            return error;\n        }\n        return error.result;\n    }\n    export function getMessage(error: DialogError): string {\n        if (typeof error === 'string') {\n            return error;\n        }\n        if (typeof error === 'boolean') {\n            return '';\n        }\n        return error.message;\n    }\n}\n\n@injectable()\nexport class DialogOverlayService implements FrontendApplicationContribution {\n\n    protected static INSTANCE: DialogOverlayService;\n\n    static get(): DialogOverlayService {\n        return DialogOverlayService.INSTANCE;\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    protected readonly dialogs: AbstractDialog<any>[] = [];\n\n    constructor() {\n        addKeyListener(document.body, Key.ENTER, e => this.handleEnter(e));\n        addKeyListener(document.body, Key.ESCAPE, e => this.handleEscape(e));\n    }\n\n    initialize(): void {\n        DialogOverlayService.INSTANCE = this;\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    protected get currentDialog(): AbstractDialog<any> | undefined {\n        return this.dialogs[0];\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    push(dialog: AbstractDialog<any>): Disposable {\n        this.dialogs.unshift(dialog);\n        return Disposable.create(() => {\n            const index = this.dialogs.indexOf(dialog);\n            if (index > -1) {\n                this.dialogs.splice(index, 1);\n            }\n        });\n    }\n\n    protected handleEscape(event: KeyboardEvent): boolean | void {\n        const dialog = this.currentDialog;\n        if (dialog) {\n            return dialog['handleEscape'](event);\n        }\n        return false;\n    }\n\n    protected handleEnter(event: KeyboardEvent): boolean | void {\n        const dialog = this.currentDialog;\n        if (dialog) {\n            return dialog['handleEnter'](event);\n        }\n        return false;\n    }\n\n}\n\n@injectable()\nexport abstract class AbstractDialog<T> extends BaseWidget {\n\n    protected readonly titleNode: HTMLDivElement;\n    protected readonly contentNode: HTMLDivElement;\n    protected readonly closeCrossNode: HTMLElement;\n    protected readonly controlPanel: HTMLDivElement;\n    protected readonly errorMessageNode: HTMLDivElement;\n\n    protected resolve: undefined | ((value: T | undefined) => void);\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    protected reject: undefined | ((reason: any) => void);\n\n    protected closeButton: HTMLButtonElement | undefined;\n    protected acceptButton: HTMLButtonElement | undefined;\n\n    protected activeElement: HTMLElement | undefined;\n\n    constructor(\n        @inject(DialogProps) protected readonly props: DialogProps\n    ) {\n        super();\n        this.id = 'theia-dialog-shell';\n        this.addClass('dialogOverlay');\n        this.toDispose.push(Disposable.create(() => {\n            if (this.reject) {\n                Widget.detach(this);\n            }\n        }));\n        const container = document.createElement('div');\n        container.classList.add('dialogBlock');\n        this.node.appendChild(container);\n\n        const titleContentNode = document.createElement('div');\n        titleContentNode.classList.add('dialogTitle');\n        container.appendChild(titleContentNode);\n\n        this.titleNode = document.createElement('div');\n        this.titleNode.textContent = props.title;\n        titleContentNode.appendChild(this.titleNode);\n\n        this.closeCrossNode = document.createElement('i');\n        this.closeCrossNode.classList.add('fa');\n        this.closeCrossNode.classList.add('fa-times');\n        this.closeCrossNode.classList.add('closeButton');\n        titleContentNode.appendChild(this.closeCrossNode);\n\n        this.contentNode = document.createElement('div');\n        this.contentNode.classList.add('dialogContent');\n        container.appendChild(this.contentNode);\n\n        this.controlPanel = document.createElement('div');\n        this.controlPanel.classList.add('dialogControl');\n        container.appendChild(this.controlPanel);\n\n        this.errorMessageNode = document.createElement('div');\n        this.errorMessageNode.classList.add('error');\n        this.errorMessageNode.setAttribute('style', 'flex: 2');\n        this.controlPanel.appendChild(this.errorMessageNode);\n\n        this.update();\n    }\n\n    protected appendCloseButton(text: string = 'Cancel'): HTMLButtonElement {\n        this.closeButton = this.createButton(text);\n        this.controlPanel.appendChild(this.closeButton);\n        this.closeButton.classList.add('secondary');\n        return this.closeButton;\n    }\n\n    protected appendAcceptButton(text: string = 'OK'): HTMLButtonElement {\n        this.acceptButton = this.createButton(text);\n        this.controlPanel.appendChild(this.acceptButton);\n        this.acceptButton.classList.add('main');\n        return this.acceptButton;\n    }\n\n    protected createButton(text: string): HTMLButtonElement {\n        const button = document.createElement('button');\n        button.classList.add('theia-button');\n        button.textContent = text;\n        return button;\n    }\n\n    protected onAfterAttach(msg: Message): void {\n        super.onAfterAttach(msg);\n        if (this.closeButton) {\n            this.addCloseAction(this.closeButton, 'click');\n        }\n        if (this.acceptButton) {\n            this.addAcceptAction(this.acceptButton, 'click');\n        }\n        this.addCloseAction(this.closeCrossNode, 'click');\n        // TODO: use DI always to create dialog instances\n        this.toDisposeOnDetach.push(DialogOverlayService.get().push(this));\n    }\n\n    protected handleEscape(event: KeyboardEvent): boolean | void {\n        this.close();\n    }\n\n    protected handleEnter(event: KeyboardEvent): boolean | void {\n        if (event.target instanceof HTMLTextAreaElement) {\n            return false;\n        }\n        this.accept();\n    }\n\n    protected onActivateRequest(msg: Message): void {\n        super.onActivateRequest(msg);\n        if (this.acceptButton) {\n            this.acceptButton.focus();\n        }\n    }\n\n    open(): Promise<T | undefined> {\n        if (this.resolve) {\n            return Promise.reject(new Error('The dialog is already opened.'));\n        }\n        this.activeElement = window.document.activeElement as HTMLElement;\n        return new Promise<T | undefined>((resolve, reject) => {\n            this.resolve = resolve;\n            this.reject = reject;\n            this.toDisposeOnDetach.push(Disposable.create(() => {\n                this.resolve = undefined;\n                this.reject = undefined;\n            }));\n\n            Widget.attach(this, document.body);\n            this.activate();\n        });\n    }\n\n    close(): void {\n        if (this.resolve) {\n            if (this.activeElement) {\n                this.activeElement.focus({ preventScroll: true });\n            }\n            this.resolve(undefined);\n        }\n        this.activeElement = undefined;\n        super.close();\n    }\n    protected onUpdateRequest(msg: Message): void {\n        super.onUpdateRequest(msg);\n        this.validate();\n    }\n\n    protected validateCancellationSource = new CancellationTokenSource();\n    protected async validate(): Promise<void> {\n        if (!this.resolve) {\n            return;\n        }\n        this.validateCancellationSource.cancel();\n        this.validateCancellationSource = new CancellationTokenSource();\n        const token = this.validateCancellationSource.token;\n        const value = this.value;\n        const error = await this.isValid(value, 'preview');\n        if (token.isCancellationRequested) {\n            return;\n        }\n        this.setErrorMessage(error);\n    }\n\n    protected acceptCancellationSource = new CancellationTokenSource();\n    protected async accept(): Promise<void> {\n        if (!this.resolve) {\n            return;\n        }\n        this.acceptCancellationSource.cancel();\n        this.acceptCancellationSource = new CancellationTokenSource();\n        const token = this.acceptCancellationSource.token;\n        const value = this.value;\n        const error = await this.isValid(value, 'open');\n        if (token.isCancellationRequested) {\n            return;\n        }\n        if (!DialogError.getResult(error)) {\n            this.setErrorMessage(error);\n        } else {\n            this.resolve(value);\n            Widget.detach(this);\n        }\n    }\n\n    abstract get value(): T;\n\n    /**\n     * Return a string of zero-length or true if valid.\n     */\n    protected isValid(value: T, mode: DialogMode): MaybePromise<DialogError> {\n        return '';\n    }\n\n    protected setErrorMessage(error: DialogError): void {\n        if (this.acceptButton) {\n            this.acceptButton.disabled = !DialogError.getResult(error);\n        }\n        this.errorMessageNode.innerText = DialogError.getMessage(error);\n    }\n\n    protected addCloseAction<K extends keyof HTMLElementEventMap>(element: HTMLElement, ...additionalEventTypes: K[]): void {\n        this.addKeyListener(element, Key.ENTER, () => this.close(), ...additionalEventTypes);\n    }\n\n    protected addAcceptAction<K extends keyof HTMLElementEventMap>(element: HTMLElement, ...additionalEventTypes: K[]): void {\n        this.addKeyListener(element, Key.ENTER, () => this.accept(), ...additionalEventTypes);\n    }\n\n}\n\n@injectable()\nexport class ConfirmDialogProps extends DialogProps {\n    readonly msg: string | HTMLElement;\n    readonly cancel?: string;\n    readonly ok?: string;\n}\n\nexport class ConfirmDialog extends AbstractDialog<boolean> {\n\n    protected confirmed = true;\n\n    constructor(\n        @inject(ConfirmDialogProps) protected readonly props: ConfirmDialogProps\n    ) {\n        super(props);\n\n        this.contentNode.appendChild(this.createMessageNode(this.props.msg));\n        this.appendCloseButton(props.cancel);\n        this.appendAcceptButton(props.ok);\n    }\n\n    protected onCloseRequest(msg: Message): void {\n        super.onCloseRequest(msg);\n        this.confirmed = false;\n        this.accept();\n    }\n\n    get value(): boolean {\n        return this.confirmed;\n    }\n\n    protected createMessageNode(msg: string | HTMLElement): HTMLElement {\n        if (typeof msg === 'string') {\n            const messageNode = document.createElement('div');\n            messageNode.textContent = msg;\n            return messageNode;\n        }\n        return msg;\n    }\n\n}\n\n@injectable()\nexport class SingleTextInputDialogProps extends DialogProps {\n    readonly confirmButtonLabel?: string;\n    readonly initialValue?: string;\n    readonly initialSelectionRange?: {\n        start: number\n        end: number\n        direction?: 'forward' | 'backward' | 'none'\n    };\n    readonly validate?: (input: string, mode: DialogMode) => MaybePromise<DialogError>;\n}\n\nexport class SingleTextInputDialog extends AbstractDialog<string> {\n\n    protected readonly inputField: HTMLInputElement;\n\n    constructor(\n        @inject(SingleTextInputDialogProps) protected readonly props: SingleTextInputDialogProps\n    ) {\n        super(props);\n\n        this.inputField = document.createElement('input');\n        this.inputField.type = 'text';\n        this.inputField.className = 'theia-input';\n        this.inputField.setAttribute('style', 'flex: 0;');\n        this.inputField.value = props.initialValue || '';\n        if (props.initialSelectionRange) {\n            this.inputField.setSelectionRange(\n                props.initialSelectionRange.start,\n                props.initialSelectionRange.end,\n                props.initialSelectionRange.direction\n            );\n        } else {\n            this.inputField.select();\n        }\n        this.contentNode.appendChild(this.inputField);\n\n        this.appendAcceptButton(props.confirmButtonLabel);\n    }\n\n    get value(): string {\n        return this.inputField.value;\n    }\n\n    protected isValid(value: string, mode: DialogMode): MaybePromise<DialogError> {\n        if (this.props.validate) {\n            return this.props.validate(value, mode);\n        }\n        return super.isValid(value, mode);\n    }\n\n    protected onAfterAttach(msg: Message): void {\n        super.onAfterAttach(msg);\n        this.addUpdateListener(this.inputField, 'input');\n    }\n\n    protected onActivateRequest(msg: Message): void {\n        this.inputField.focus();\n    }\n\n    protected handleEnter(event: KeyboardEvent): boolean | void {\n        if (event.target instanceof HTMLInputElement) {\n            return super.handleEnter(event);\n        }\n        return false;\n    }\n\n}\n","/********************************************************************************\n * Copyright (C) 2017 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { injectable, inject } from 'inversify';\nimport URI from '../common/uri';\nimport { LabelProviderContribution, LabelProvider, DidChangeLabelEvent } from './label-provider';\n\nexport namespace DiffUris {\n\n    export const DIFF_SCHEME = 'diff';\n\n    export function encode(left: URI, right: URI, label?: string): URI {\n        const diffUris = [\n            left.toString(),\n            right.toString()\n        ];\n\n        const diffUriStr = JSON.stringify(diffUris);\n\n        return new URI().withScheme(DIFF_SCHEME).withPath(label || '').withQuery(diffUriStr);\n    }\n\n    export function decode(uri: URI): URI[] {\n        if (uri.scheme !== DIFF_SCHEME) {\n            throw new Error((`The URI must have scheme \"diff\". The URI was: ${uri}.`));\n        }\n        const diffUris: string[] = JSON.parse(uri.query);\n        return diffUris.map(s => new URI(s));\n    }\n\n    export function isDiffUri(uri: URI): boolean {\n        return uri.scheme === DIFF_SCHEME;\n    }\n\n}\n\n@injectable()\nexport class DiffUriLabelProviderContribution implements LabelProviderContribution {\n\n    constructor(@inject(LabelProvider) protected labelProvider: LabelProvider) { }\n\n    canHandle(element: object): number {\n        if (element instanceof URI && DiffUris.isDiffUri(element)) {\n            return 20;\n        }\n        return 0;\n    }\n\n    getLongName(uri: URI): string {\n        const label = uri.path.toString();\n        if (label) {\n            return label;\n        }\n        const [left, right] = DiffUris.decode(uri);\n        const leftLongName = this.labelProvider.getLongName(left);\n        const rightLongName = this.labelProvider.getLongName(right);\n        if (leftLongName === rightLongName) {\n            return leftLongName;\n        }\n        return `${leftLongName}  ${rightLongName}`;\n    }\n\n    getName(uri: URI): string {\n        const label = uri.path.toString();\n        if (label) {\n            return label;\n        }\n        const [left, right] = DiffUris.decode(uri);\n\n        if (left.path.toString() === right.path.toString() && left.query && right.query) {\n            return `${left.displayName}: ${left.query}  ${right.query}`;\n        } else {\n            let title;\n            if (left.path.toString() !== right.path.toString() && left.displayName !== uri.displayName) {\n                title = `${uri.displayName}: `;\n            } else {\n                title = '';\n            }\n\n            const leftLongName = this.labelProvider.getName(left);\n            const rightLongName = this.labelProvider.getName(right);\n            if (leftLongName === rightLongName) {\n                return leftLongName;\n            }\n            return `${title}${leftLongName}  ${rightLongName}`;\n        }\n    }\n\n    getIcon(uri: URI): string {\n        return 'fa fa-columns';\n    }\n\n    affects(diffUri: URI, event: DidChangeLabelEvent): boolean {\n        for (const uri of DiffUris.decode(diffUri)) {\n            if (event.affects(uri)) {\n                return true;\n            }\n        }\n        return false;\n    }\n\n}\n","/********************************************************************************\n * Copyright (C) 2017 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport URI from '../common/uri';\n\n/**\n * An endpoint provides URLs for http and ws, based on configuration and defaults.\n */\nexport class Endpoint {\n    static readonly PROTO_HTTPS: string = 'https:';\n    static readonly PROTO_HTTP: string = 'http:';\n    static readonly PROTO_WS: string = 'ws:';\n    static readonly PROTO_WSS: string = 'wss:';\n    static readonly PROTO_FILE: string = 'file:';\n\n    constructor(\n        protected readonly options: Endpoint.Options = {},\n        protected readonly location: Endpoint.Location = window.location\n    ) { }\n\n    getWebSocketUrl(): URI {\n        return new URI(`${this.wsScheme}//${this.host}${this.pathname}${this.path}`);\n    }\n\n    getRestUrl(): URI {\n        return new URI(`${this.httpScheme}//${this.host}${this.pathname}${this.path}`);\n    }\n\n    protected get pathname(): string {\n        if (this.location.protocol === Endpoint.PROTO_FILE) {\n            return '';\n        }\n        if (this.location.pathname === '/') {\n            return '';\n        }\n        if (this.location.pathname.endsWith('/')) {\n            return this.location.pathname.substr(0, this.location.pathname.length - 1);\n        }\n        return this.location.pathname;\n    }\n\n    protected get host(): string {\n        if (this.options.host) {\n            return this.options.host;\n        }\n        if (this.location.host) {\n            return this.location.host;\n        }\n        return 'localhost:' + this.port;\n    }\n\n    protected get port(): string {\n        return this.getSearchParam('port', '3000');\n    }\n\n    protected getSearchParam(name: string, defaultValue: string): string {\n        const search = this.location.search;\n        if (!search) {\n            return defaultValue;\n        }\n        return search.substr(1).split('&')\n            .filter(value => value.startsWith(name + '='))\n            .map(value => {\n                const encoded = value.substr(name.length + 1);\n                return decodeURIComponent(encoded);\n            })[0] || defaultValue;\n    }\n\n    protected get wsScheme(): string {\n        if (this.options.wsScheme) {\n            return this.options.wsScheme;\n        }\n        return this.httpScheme === Endpoint.PROTO_HTTPS ? Endpoint.PROTO_WSS : Endpoint.PROTO_WS;\n    }\n\n    /**\n     * The HTTP/HTTPS scheme of the endpoint, or the user defined one.\n     * See: `Endpoint.Options.httpScheme`.\n     */\n    get httpScheme(): string {\n        if (this.options.httpScheme) {\n            return this.options.httpScheme;\n        }\n        if (this.location.protocol === Endpoint.PROTO_HTTP ||\n            this.location.protocol === Endpoint.PROTO_HTTPS) {\n            return this.location.protocol;\n        }\n        return Endpoint.PROTO_HTTP;\n    }\n\n    protected get path(): string {\n        if (this.options.path) {\n            if (this.options.path.startsWith('/')) {\n                return this.options.path;\n            } else {\n                return '/' + this.options.path;\n            }\n        }\n        return this.options.path || '';\n    }\n}\n\nexport namespace Endpoint {\n    export class Options {\n        host?: string;\n        wsScheme?: string;\n        httpScheme?: string;\n        path?: string;\n    }\n\n    // Necessary for running tests with dependency on TS lib on node\n    // FIXME figure out how to mock with ts-node\n    export class Location {\n        host: string;\n        pathname: string;\n        search: string;\n        protocol: string;\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { FrontendApplicationConfig } from '@theia/application-package/lib/application-props';\n\nexport class FrontendApplicationConfigProvider {\n\n    private static KEY = Symbol('FrontendApplicationConfigProvider');\n\n    static get(): FrontendApplicationConfig {\n        const config = FrontendApplicationConfigProvider.doGet();\n        if (config === undefined) {\n            throw new Error('The configuration is not set. Did you call FrontendApplicationConfigProvider#set?');\n        }\n        return config;\n    }\n\n    static set(config: FrontendApplicationConfig): void {\n        if (FrontendApplicationConfigProvider.doGet() !== undefined) {\n            throw new Error('The configuration is already set.');\n        }\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        const globalObject = window as any;\n        const key = FrontendApplicationConfigProvider.KEY;\n        globalObject[key] = config;\n    }\n\n    private static doGet(): FrontendApplicationConfig | undefined {\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        const globalObject = window as any;\n        const key = FrontendApplicationConfigProvider.KEY;\n        return globalObject[key];\n    }\n\n}\n","/********************************************************************************\n * Copyright (C) 2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { injectable, inject } from 'inversify';\nimport { Emitter, Event } from '../common/event';\nimport { Deferred } from '../common/promise-util';\nimport { ILogger } from '../common/logger';\n\nexport type FrontendApplicationState =\n    'init'\n    | 'started_contributions'\n    | 'attached_shell'\n    | 'initialized_layout'\n    | 'ready'\n    | 'closing_window';\n\n@injectable()\nexport class FrontendApplicationStateService {\n\n    @inject(ILogger)\n    protected readonly logger: ILogger;\n\n    private _state: FrontendApplicationState = 'init';\n\n    protected deferred: { [state: string]: Deferred<void> } = {};\n    protected readonly stateChanged = new Emitter<FrontendApplicationState>();\n\n    get state(): FrontendApplicationState {\n        return this._state;\n    }\n\n    set state(state: FrontendApplicationState) {\n        if (state !== this._state) {\n            if (this.deferred[this._state] === undefined) {\n                this.deferred[this._state] = new Deferred();\n            }\n            const oldState = this._state;\n            this._state = state;\n            if (this.deferred[state] === undefined) {\n                this.deferred[state] = new Deferred();\n            }\n            this.deferred[state].resolve();\n            this.logger.info(`Changed application state from '${oldState}' to '${this._state}'.`);\n            this.stateChanged.fire(state);\n        }\n    }\n\n    get onStateChanged(): Event<FrontendApplicationState> {\n        return this.stateChanged.event;\n    }\n\n    reachedState(state: FrontendApplicationState): Promise<void> {\n        if (this.deferred[state] === undefined) {\n            this.deferred[state] = new Deferred();\n        }\n        return this.deferred[state].promise;\n    }\n\n    reachedAnyState(...states: FrontendApplicationState[]): Promise<void> {\n        return Promise.race(states.map(s => this.reachedState(s)));\n    }\n\n}\n","/********************************************************************************\n * Copyright (C) 2017 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { inject, injectable, named } from 'inversify';\nimport { ContributionProvider, CommandRegistry, MenuModelRegistry, ILogger, isOSX } from '../common';\nimport { MaybePromise } from '../common/types';\nimport { KeybindingRegistry } from './keybinding';\nimport { Widget } from './widgets';\nimport { ApplicationShell } from './shell/application-shell';\nimport { ShellLayoutRestorer, ApplicationShellLayoutMigrationError } from './shell/shell-layout-restorer';\nimport { FrontendApplicationStateService } from './frontend-application-state';\nimport { preventNavigation, parseCssTime, animationFrame } from './browser';\nimport { CorePreferences } from './core-preferences';\n\n/**\n * Clients can implement to get a callback for contributing widgets to a shell on start.\n */\nexport const FrontendApplicationContribution = Symbol('FrontendApplicationContribution');\nexport interface FrontendApplicationContribution {\n\n    /**\n     * Called on application startup before configure is called.\n     */\n    initialize?(): void;\n\n    /**\n     * Called before commands, key bindings and menus are initialized.\n     * Should return a promise if it runs asynchronously.\n     */\n    configure?(app: FrontendApplication): MaybePromise<void>;\n\n    /**\n     * Called when the application is started. The application shell is not attached yet when this method runs.\n     * Should return a promise if it runs asynchronously.\n     */\n    onStart?(app: FrontendApplication): MaybePromise<void>;\n\n    /**\n     * Called on `beforeunload` event, right before the window closes.\n     * Return `true` in order to prevent exit.\n     * Note: No async code allowed, this function has to run on one tick.\n     */\n    onWillStop?(app: FrontendApplication): boolean | void;\n\n    /**\n     * Called when an application is stopped or unloaded.\n     *\n     * Note that this is implemented using `window.beforeunload` which doesn't allow any asynchronous code anymore.\n     * I.e. this is the last tick.\n     */\n    onStop?(app: FrontendApplication): void;\n\n    /**\n     * Called after the application shell has been attached in case there is no previous workbench layout state.\n     * Should return a promise if it runs asynchronously.\n     */\n    initializeLayout?(app: FrontendApplication): MaybePromise<void>;\n\n    /**\n     * An event is emitted when a layout is initialized, but before the shell is attached.\n     */\n    onDidInitializeLayout?(app: FrontendApplication): MaybePromise<void>;\n}\n\n/**\n * Default frontend contribution that can be extended by clients if they do not want to implement any of the\n * methods from the interface but still want to contribute to the frontend application.\n */\n@injectable()\nexport abstract class DefaultFrontendApplicationContribution implements FrontendApplicationContribution {\n\n    initialize(): void {\n        // NOOP\n    }\n\n}\n\n@injectable()\nexport class FrontendApplication {\n\n    @inject(CorePreferences)\n    protected readonly corePreferences: CorePreferences;\n\n    constructor(\n        @inject(CommandRegistry) protected readonly commands: CommandRegistry,\n        @inject(MenuModelRegistry) protected readonly menus: MenuModelRegistry,\n        @inject(KeybindingRegistry) protected readonly keybindings: KeybindingRegistry,\n        @inject(ILogger) protected readonly logger: ILogger,\n        @inject(ShellLayoutRestorer) protected readonly layoutRestorer: ShellLayoutRestorer,\n        @inject(ContributionProvider) @named(FrontendApplicationContribution)\n        protected readonly contributions: ContributionProvider<FrontendApplicationContribution>,\n        @inject(ApplicationShell) protected readonly _shell: ApplicationShell,\n        @inject(FrontendApplicationStateService) protected readonly stateService: FrontendApplicationStateService\n    ) { }\n\n    get shell(): ApplicationShell {\n        return this._shell;\n    }\n\n    /**\n     * Start the frontend application.\n     *\n     * Start up consists of the following steps:\n     * - start frontend contributions\n     * - attach the application shell to the host element\n     * - initialize the application shell layout\n     * - reveal the application shell if it was hidden by a startup indicator\n     */\n    async start(): Promise<void> {\n        await this.startContributions();\n        this.stateService.state = 'started_contributions';\n\n        const host = await this.getHost();\n        this.attachShell(host);\n        await animationFrame();\n        this.stateService.state = 'attached_shell';\n\n        await this.initializeLayout();\n        this.stateService.state = 'initialized_layout';\n        await this.fireOnDidInitializeLayout();\n\n        await this.revealShell(host);\n        this.registerEventListeners();\n        this.stateService.state = 'ready';\n    }\n\n    /**\n     * Return a promise to the host element to which the application shell is attached.\n     */\n    protected getHost(): Promise<HTMLElement> {\n        if (document.body) {\n            return Promise.resolve(document.body);\n        }\n        return new Promise<HTMLElement>(resolve =>\n            window.addEventListener('load', () => resolve(document.body), { once: true })\n        );\n    }\n\n    /**\n     * Return an HTML element that indicates the startup phase, e.g. with an animation or a splash screen.\n     */\n    protected getStartupIndicator(host: HTMLElement): HTMLElement | undefined {\n        const startupElements = host.getElementsByClassName('theia-preload');\n        return startupElements.length === 0 ? undefined : startupElements[0] as HTMLElement;\n    }\n\n    /* vvv HOTFIX begin vvv\n     *\n     * This is a hotfix against issues eclipse/theia#6459 and gitpod-io/gitpod#875 .\n     * It should be reverted after Theia was updated to the newer Monaco.\n     */\n    protected inComposition = false;\n    /**\n     * Register composition related event listeners.\n     */\n    protected registerCompositionEventListeners(): void {\n        window.document.addEventListener('compositionstart', event => {\n            this.inComposition = true;\n        });\n        window.document.addEventListener('compositionend', event => {\n            this.inComposition = false;\n        });\n    }\n    /* ^^^ HOTFIX end ^^^ */\n\n    /**\n     * Register global event listeners.\n     */\n    protected registerEventListeners(): void {\n        this.registerCompositionEventListeners(); /* Hotfix. See above. */\n\n        window.addEventListener('beforeunload', () => {\n            this.stateService.state = 'closing_window';\n            this.layoutRestorer.storeLayout(this);\n            this.stopContributions();\n        });\n        window.addEventListener('resize', () => this.shell.update());\n        document.addEventListener('keydown', event => {\n            if (this.inComposition !== true) {\n                this.keybindings.run(event);\n            }\n        }, true);\n        document.addEventListener('touchmove', event => { event.preventDefault(); }, { passive: false });\n        // Prevent forward/back navigation by scrolling in OS X\n        if (isOSX) {\n            document.body.addEventListener('wheel', preventNavigation, { passive: false });\n        }\n        // Prevent the default browser behavior when dragging and dropping files into the window.\n        window.addEventListener('dragover', event => {\n            event.preventDefault();\n        }, false);\n        window.addEventListener('drop', event => {\n            event.preventDefault();\n        }, false);\n\n    }\n\n    /**\n     * Attach the application shell to the host element. If a startup indicator is present, the shell is\n     * inserted before that indicator so it is not visible yet.\n     */\n    protected attachShell(host: HTMLElement): void {\n        const ref = this.getStartupIndicator(host);\n        Widget.attach(this.shell, host, ref);\n    }\n\n    /**\n     * If a startup indicator is present, it is first hidden with the `theia-hidden` CSS class and then\n     * removed after a while. The delay until removal is taken from the CSS transition duration.\n     */\n    protected revealShell(host: HTMLElement): Promise<void> {\n        const startupElem = this.getStartupIndicator(host);\n        if (startupElem) {\n            return new Promise(resolve => {\n                window.requestAnimationFrame(() => {\n                    startupElem.classList.add('theia-hidden');\n                    const preloadStyle = window.getComputedStyle(startupElem);\n                    const transitionDuration = parseCssTime(preloadStyle.transitionDuration, 0);\n                    window.setTimeout(() => {\n                        const parent = startupElem.parentElement;\n                        if (parent) {\n                            parent.removeChild(startupElem);\n                        }\n                        resolve();\n                    }, transitionDuration);\n                });\n            });\n        } else {\n            return Promise.resolve();\n        }\n    }\n\n    /**\n     * Initialize the shell layout either using the layout restorer service or, if no layout has\n     * been stored, by creating the default layout.\n     */\n    protected async initializeLayout(): Promise<void> {\n        if (!await this.restoreLayout()) {\n            // Fallback: Create the default shell layout\n            await this.createDefaultLayout();\n        }\n        await this.shell.pendingUpdates;\n    }\n\n    /**\n     * Try to restore the shell layout from the storage service. Resolves to `true` if successful.\n     */\n    protected async restoreLayout(): Promise<boolean> {\n        try {\n            return await this.layoutRestorer.restoreLayout(this);\n        } catch (error) {\n            if (ApplicationShellLayoutMigrationError.is(error)) {\n                console.warn(error.message);\n                console.info('Initializing the default layout instead...');\n            } else {\n                console.error('Could not restore layout', error);\n            }\n            return false;\n        }\n    }\n\n    /**\n     * Let the frontend application contributions initialize the shell layout. Override this\n     * method in order to create an application-specific custom layout.\n     */\n    protected async createDefaultLayout(): Promise<void> {\n        for (const contribution of this.contributions.getContributions()) {\n            if (contribution.initializeLayout) {\n                await this.measure(contribution.constructor.name + '.initializeLayout',\n                    () => contribution.initializeLayout!(this)\n                );\n            }\n        }\n    }\n\n    protected async fireOnDidInitializeLayout(): Promise<void> {\n        for (const contribution of this.contributions.getContributions()) {\n            if (contribution.onDidInitializeLayout) {\n                await this.measure(contribution.constructor.name + '.onDidInitializeLayout',\n                    () => contribution.onDidInitializeLayout!(this)\n                );\n            }\n        }\n    }\n\n    /**\n     * Initialize and start the frontend application contributions.\n     */\n    protected async startContributions(): Promise<void> {\n        for (const contribution of this.contributions.getContributions()) {\n            if (contribution.initialize) {\n                try {\n                    contribution.initialize();\n                } catch (error) {\n                    this.logger.error('Could not initialize contribution', error);\n                }\n            }\n        }\n\n        for (const contribution of this.contributions.getContributions()) {\n            if (contribution.configure) {\n                try {\n                    await contribution.configure(this);\n                } catch (error) {\n                    this.logger.error('Could not configure contribution', error);\n                }\n            }\n        }\n\n        /**\n         * FIXME:\n         * - decouple commands & menus\n         * - consider treat commands, keybindings and menus as frontend application contributions\n         */\n        this.commands.onStart();\n        await this.keybindings.onStart();\n        this.menus.onStart();\n        for (const contribution of this.contributions.getContributions()) {\n            if (contribution.onStart) {\n                try {\n                    await this.measure(contribution.constructor.name + '.onStart',\n                        () => contribution.onStart!(this)\n                    );\n                } catch (error) {\n                    this.logger.error('Could not start contribution', error);\n                }\n            }\n        }\n    }\n\n    /**\n     * Stop the frontend application contributions. This is called when the window is unloaded.\n     */\n    protected stopContributions(): void {\n        this.logger.info('>>> Stopping contributions....');\n        for (const contribution of this.contributions.getContributions()) {\n            if (contribution.onStop) {\n                try {\n                    contribution.onStop(this);\n                } catch (error) {\n                    this.logger.error('Could not stop contribution', error);\n                }\n            }\n        }\n        this.logger.info('<<< All contributions have been stopped.');\n    }\n\n    protected async measure<T>(name: string, fn: () => MaybePromise<T>): Promise<T> {\n        const startMark = name + '-start';\n        const endMark = name + '-end';\n        performance.mark(startMark);\n        const result = await fn();\n        performance.mark(endMark);\n        performance.measure(name, startMark, endMark);\n        for (const item of performance.getEntriesByName(name)) {\n            if (item.duration > 100) {\n                console.warn(item.name + ' is slow, took: ' + item.duration.toFixed(1) + ' ms');\n            } else {\n                console.debug(item.name + ' took ' + item.duration.toFixed(1) + ' ms');\n            }\n        }\n        performance.clearMeasures(name);\n        return result;\n    }\n\n}\n","/********************************************************************************\n * Copyright (C) 2019 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { injectable, inject, postConstruct } from 'inversify';\nimport { Emitter } from '../common/event';\nimport { Disposable, DisposableCollection } from '../common/disposable';\nimport { LabelProviderContribution, DidChangeLabelEvent } from './label-provider';\n\nexport interface IconThemeDefinition {\n    readonly id: string\n    readonly label: string\n    readonly description?: string\n    readonly hasFileIcons?: boolean;\n    readonly hasFolderIcons?: boolean;\n    readonly hidesExplorerArrows?: boolean;\n}\n\nexport interface IconTheme extends IconThemeDefinition {\n    activate(): Disposable;\n}\n\n@injectable()\nexport class NoneIconTheme implements IconTheme, LabelProviderContribution {\n\n    readonly id = 'none';\n    readonly label = 'None';\n    readonly description = 'Disable file icons';\n    readonly hasFileIcons = true;\n    readonly hasFolderIcons = true;\n\n    protected readonly onDidChangeEmitter = new Emitter<DidChangeLabelEvent>();\n    readonly onDidChange = this.onDidChangeEmitter.event;\n\n    protected readonly toDeactivate = new DisposableCollection();\n\n    activate(): Disposable {\n        if (this.toDeactivate.disposed) {\n            this.toDeactivate.push(Disposable.create(() => this.fireDidChange()));\n            this.fireDidChange();\n        }\n        return this.toDeactivate;\n    }\n\n    protected fireDidChange(): void {\n        this.onDidChangeEmitter.fire({ affects: () => true });\n    }\n\n    canHandle(): number {\n        if (this.toDeactivate.disposed) {\n            return 0;\n        }\n        return Number.MAX_SAFE_INTEGER;\n    }\n\n    getIcon(): string {\n        return '';\n    }\n\n}\n\n@injectable()\nexport class IconThemeService {\n\n    protected readonly onDidChangeEmitter = new Emitter<void>();\n    readonly onDidChange = this.onDidChangeEmitter.event;\n\n    protected readonly _iconThemes = new Map<string, IconTheme>();\n    get ids(): IterableIterator<string> {\n        return this._iconThemes.keys();\n    }\n    get definitions(): IterableIterator<IconThemeDefinition> {\n        return this._iconThemes.values();\n    }\n    getDefinition(id: string): IconThemeDefinition | undefined {\n        return this._iconThemes.get(id);\n    }\n\n    @inject(NoneIconTheme)\n    protected readonly noneIconTheme: NoneIconTheme;\n\n    protected readonly onDidChangeCurrentEmitter = new Emitter<string>();\n    readonly onDidChangeCurrent = this.onDidChangeCurrentEmitter.event;\n\n    protected _default: IconTheme;\n\n    protected readonly toDeactivate = new DisposableCollection();\n\n    @postConstruct()\n    protected init(): void {\n        this._default = this.noneIconTheme;\n        this.register(this.noneIconTheme);\n    }\n\n    register(iconTheme: IconTheme): Disposable {\n        if (this._iconThemes.has(iconTheme.id)) {\n            console.warn(new Error(`Icon theme '${iconTheme.id}' has already been registered, skipping.`));\n            return Disposable.NULL;\n        }\n        this._iconThemes.set(iconTheme.id, iconTheme);\n        this.onDidChangeEmitter.fire(undefined);\n        if (this.toDeactivate.disposed\n            && window.localStorage.getItem('iconTheme') === iconTheme.id) {\n            this.setCurrent(iconTheme);\n        }\n        return Disposable.create(() => this.unregister(iconTheme.id));\n    }\n\n    unregister(id: string): IconTheme | undefined {\n        const iconTheme = this._iconThemes.get(id);\n        if (!iconTheme) {\n            return undefined;\n        }\n        this._iconThemes.delete(id);\n        if (this._default === iconTheme) {\n            this._default = this.noneIconTheme;\n        }\n        if (window.localStorage.getItem('iconTheme') === id) {\n            window.localStorage.removeItem('iconTheme');\n            this.onDidChangeCurrentEmitter.fire(this._default.id);\n        }\n        this.onDidChangeEmitter.fire(undefined);\n        return iconTheme;\n    }\n\n    get current(): string {\n        return this.getCurrent().id;\n    }\n\n    set current(id: string) {\n        const newCurrent = this._iconThemes.get(id) || this._default;\n        if (this.getCurrent().id !== newCurrent.id) {\n            this.setCurrent(newCurrent);\n        }\n    }\n\n    protected getCurrent(): IconTheme {\n        const id = window.localStorage.getItem('iconTheme');\n        return id && this._iconThemes.get(id) || this._default;\n    }\n\n    protected setCurrent(current: IconTheme): void {\n        window.localStorage.setItem('iconTheme', current.id);\n        this.toDeactivate.dispose();\n        this.toDeactivate.push(current.activate());\n        this.onDidChangeCurrentEmitter.fire(current.id);\n    }\n\n    get default(): string {\n        return this._default.id;\n    }\n\n    set default(id: string) {\n        const newDefault = this._iconThemes.get(id) || this.noneIconTheme;\n        if (this._default.id === newDefault.id) {\n            return;\n        }\n        this._default = newDefault;\n        if (!window.localStorage.getItem('iconTheme')) {\n            this.onDidChangeCurrentEmitter.fire(newDefault.id);\n        }\n    }\n\n    protected load(): string | undefined {\n        return window.localStorage.getItem('iconTheme') || undefined;\n    }\n\n}\n","/********************************************************************************\n * Copyright (C) 2017 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nexport * from './shell';\nexport * from './frontend-application';\nexport * from './keyboard';\nexport * from './opener-service';\nexport * from './browser';\nexport * from './context-menu-renderer';\nexport * from './widgets';\nexport * from './dialogs';\nexport * from './tree';\nexport * from './messaging';\nexport * from './endpoint';\nexport * from './common-frontend-contribution';\nexport * from './quick-open';\nexport * from './widget-manager';\nexport * from './saveable';\nexport * from './storage-service';\nexport * from './preferences';\nexport * from './keybinding';\nexport * from './status-bar';\nexport * from './label-provider';\nexport * from './widget-open-handler';\nexport * from './navigatable';\nexport * from './diff-uris';\nexport * from './core-preferences';\nexport * from './view-container';\n","/********************************************************************************\n * Copyright (C) 2017 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { injectable, inject, named } from 'inversify';\nimport { isOSX } from '../common/os';\nimport { Emitter, Event } from '../common/event';\nimport { CommandRegistry } from '../common/command';\nimport { Disposable, DisposableCollection } from '../common/disposable';\nimport { KeyCode, KeySequence, Key } from './keyboard/keys';\nimport { KeyboardLayoutService } from './keyboard/keyboard-layout-service';\nimport { ContributionProvider } from '../common/contribution-provider';\nimport { ILogger } from '../common/logger';\nimport { StatusBarAlignment, StatusBar } from './status-bar/status-bar';\nimport { ContextKeyService } from './context-key-service';\nimport * as common from '../common/keybinding';\n\nexport enum KeybindingScope {\n    DEFAULT,\n    DEFAULT_OVERRIDING,\n    USER,\n    WORKSPACE,\n    END\n}\nexport namespace KeybindingScope {\n    export const length = KeybindingScope.END - KeybindingScope.DEFAULT;\n}\n\n/**\n * @deprecated import from `@theia/core/lib/common/keybinding` instead\n */\nexport type Keybinding = common.Keybinding;\nexport const Keybinding = common.Keybinding;\n\nexport interface ResolvedKeybinding extends Keybinding {\n    /**\n     * The KeyboardLayoutService may transform the `keybinding` depending on the\n     * user's keyboard layout. This property holds the transformed keybinding that\n     * should be used in the UI. The value is undefined if the KeyboardLayoutService\n     * has not been called yet to resolve the keybinding.\n     */\n    resolved?: KeyCode[];\n}\n\nexport interface ScopedKeybinding extends Keybinding {\n    /** Current keybinding scope */\n    scope?: KeybindingScope;\n}\n\nexport const KeybindingContribution = Symbol('KeybindingContribution');\n/**\n * Representation of a keybinding contribution.\n */\nexport interface KeybindingContribution {\n    /**\n     * Registers keybindings.\n     * @param keybindings the keybinding registry.\n     */\n    registerKeybindings(keybindings: KeybindingRegistry): void;\n}\n\nexport const KeybindingContext = Symbol('KeybindingContext');\nexport interface KeybindingContext {\n    /**\n     * The unique ID of the current context.\n     */\n    readonly id: string;\n\n    isEnabled(arg: Keybinding): boolean;\n}\nexport namespace KeybindingContexts {\n\n    export const NOOP_CONTEXT: KeybindingContext = {\n        id: 'noop.keybinding.context',\n        isEnabled: () => true\n    };\n\n    export const DEFAULT_CONTEXT: KeybindingContext = {\n        id: 'default.keybinding.context',\n        isEnabled: () => false\n    };\n}\n\n@injectable()\nexport class KeybindingRegistry {\n\n    static readonly PASSTHROUGH_PSEUDO_COMMAND = 'passthrough';\n    protected keySequence: KeySequence = [];\n\n    protected readonly contexts: { [id: string]: KeybindingContext } = {};\n    protected readonly keymaps: Keybinding[][] = [...Array(KeybindingScope.length)].map(() => []);\n\n    @inject(KeyboardLayoutService)\n    protected readonly keyboardLayoutService: KeyboardLayoutService;\n\n    @inject(ContributionProvider) @named(KeybindingContext)\n    protected readonly contextProvider: ContributionProvider<KeybindingContext>;\n\n    @inject(CommandRegistry)\n    protected readonly commandRegistry: CommandRegistry;\n\n    @inject(ContributionProvider) @named(KeybindingContribution)\n    protected readonly contributions: ContributionProvider<KeybindingContribution>;\n\n    @inject(StatusBar)\n    protected readonly statusBar: StatusBar;\n\n    @inject(ILogger)\n    protected readonly logger: ILogger;\n\n    @inject(ContextKeyService)\n    protected readonly whenContextService: ContextKeyService;\n\n    async onStart(): Promise<void> {\n        await this.keyboardLayoutService.initialize();\n        this.keyboardLayoutService.onKeyboardLayoutChanged(newLayout => {\n            this.clearResolvedKeybindings();\n            this.keybindingsChanged.fire(undefined);\n        });\n        this.registerContext(KeybindingContexts.NOOP_CONTEXT);\n        this.registerContext(KeybindingContexts.DEFAULT_CONTEXT);\n        this.registerContext(...this.contextProvider.getContributions());\n        for (const contribution of this.contributions.getContributions()) {\n            contribution.registerKeybindings(this);\n        }\n    }\n\n    protected keybindingsChanged = new Emitter<void>();\n\n    /**\n     * Event that is fired when the resolved keybindings change due to a different keyboard layout\n     * or when a new keymap is being set\n     */\n    get onKeybindingsChanged(): Event<void> {\n        return this.keybindingsChanged.event;\n    }\n\n    /**\n     * Registers the keybinding context arguments into the application. Fails when an already registered\n     * context is being registered.\n     *\n     * @param contexts the keybinding contexts to register into the application.\n     */\n    protected registerContext(...contexts: KeybindingContext[]): void {\n        for (const context of contexts) {\n            const { id } = context;\n            if (this.contexts[id]) {\n                this.logger.error(`A keybinding context with ID ${id} is already registered.`);\n            } else {\n                this.contexts[id] = context;\n            }\n        }\n    }\n\n    /**\n     * Register a default keybinding to the registry.\n     *\n     * @param binding\n     * @param override Override existed keybinding\n     */\n    registerKeybinding(binding: Keybinding, override?: boolean): Disposable {\n        return this.doRegisterKeybinding(binding, !!override ? KeybindingScope.DEFAULT_OVERRIDING : undefined);\n    }\n\n    /**\n     * Register default keybindings to the registry\n     *\n     * @param bindings\n     */\n    registerKeybindings(...bindings: Keybinding[]): Disposable {\n        return this.doRegisterKeybindings(bindings, KeybindingScope.DEFAULT);\n    }\n\n    /**\n     * Unregister keybinding from the registry\n     *\n     * @param binding\n     */\n    unregisterKeybinding(binding: Keybinding): void;\n    /**\n     * Unregister keybinding from the registry\n     *\n     * @param key\n     */\n    unregisterKeybinding(key: string): void;\n    unregisterKeybinding(keyOrBinding: Keybinding | string): void {\n        const key = Keybinding.is(keyOrBinding) ? keyOrBinding.keybinding : keyOrBinding;\n        const keymap = this.keymaps[KeybindingScope.DEFAULT];\n        const bindings = keymap.filter(el => el.keybinding === key);\n\n        bindings.forEach(binding => {\n            const idx = keymap.indexOf(binding);\n            if (idx >= 0) {\n                keymap.splice(idx, 1);\n            }\n        });\n    }\n\n    protected doRegisterKeybindings(bindings: Keybinding[], scope: KeybindingScope = KeybindingScope.DEFAULT): Disposable {\n        const toDispose = new DisposableCollection();\n        for (const binding of bindings) {\n            toDispose.push(this.doRegisterKeybinding(binding, scope));\n        }\n        return toDispose;\n    }\n\n    protected doRegisterKeybinding(binding: Keybinding, scope: KeybindingScope = KeybindingScope.DEFAULT): Disposable {\n        try {\n            this.resolveKeybinding(binding);\n            if (this.containsKeybinding(this.keymaps[scope], binding) && scope !== KeybindingScope.DEFAULT_OVERRIDING) {\n                throw new Error(`\"${binding.keybinding}\" is in collision with something else [scope:${scope}]`);\n            }\n            this.keymaps[scope].push(binding);\n            return Disposable.create(() => {\n                const index = this.keymaps[scope].indexOf(binding);\n                if (index !== -1) {\n                    this.keymaps[scope].splice(index, 1);\n                }\n            });\n        } catch (error) {\n            this.logger.warn(`Could not register keybinding:\\n  ${Keybinding.stringify(binding)}\\n${error}`);\n            return Disposable.NULL;\n        }\n    }\n\n    /**\n     * Ensure that the `resolved` property of the given binding is set by calling the KeyboardLayoutService.\n     */\n    resolveKeybinding(binding: ResolvedKeybinding): KeyCode[] {\n        if (!binding.resolved) {\n            const sequence = KeySequence.parse(binding.keybinding);\n            binding.resolved = sequence.map(code => this.keyboardLayoutService.resolveKeyCode(code));\n        }\n        return binding.resolved;\n    }\n\n    /**\n     * Clear all `resolved` properties of registered keybindings so the KeyboardLayoutService is called\n     * again to resolve them. This is necessary when the user's keyboard layout has changed.\n     */\n    protected clearResolvedKeybindings(): void {\n        for (let i = KeybindingScope.DEFAULT; i < KeybindingScope.END; i++) {\n            const bindings = this.keymaps[i];\n            for (let j = 0; j < bindings.length; j++) {\n                const binding = bindings[j] as ResolvedKeybinding;\n                binding.resolved = undefined;\n            }\n        }\n    }\n\n    /**\n     * Checks for keySequence collisions in a list of Keybindings\n     *\n     * @param bindings the keybinding reference list\n     * @param binding the keybinding to test collisions for\n     */\n    containsKeybinding(bindings: Keybinding[], binding: Keybinding): boolean {\n        const bindingKeySequence = this.resolveKeybinding(binding);\n        const collisions = this.getKeySequenceCollisions(bindings, bindingKeySequence)\n            .filter(b => b.context === binding.context && !b.when && !binding.when);\n\n        if (collisions.full.length > 0) {\n            this.logger.warn('Collided keybinding is ignored; ',\n                Keybinding.stringify(binding), ' collided with ',\n                collisions.full.map(b => Keybinding.stringify(b)).join(', '));\n            return true;\n        }\n        if (collisions.partial.length > 0) {\n            this.logger.warn('Shadowing keybinding is ignored; ',\n                Keybinding.stringify(binding), ' shadows ',\n                collisions.partial.map(b => Keybinding.stringify(b)).join(', '));\n            return true;\n        }\n        if (collisions.shadow.length > 0) {\n            this.logger.warn('Shadowed keybinding is ignored; ',\n                Keybinding.stringify(binding), ' would be shadowed by ',\n                collisions.shadow.map(b => Keybinding.stringify(b)).join(', '));\n            return true;\n        }\n        return false;\n    }\n\n    containsKeybindingInScope(binding: Keybinding, scope = KeybindingScope.USER): boolean {\n        return this.containsKeybinding(this.keymaps[scope], binding);\n    }\n\n    /**\n     * Return a user visible representation of a keybinding.\n     */\n    acceleratorFor(keybinding: Keybinding, separator: string = ' '): string[] {\n        const bindingKeySequence = this.resolveKeybinding(keybinding);\n        return this.acceleratorForSequence(bindingKeySequence, separator);\n    }\n\n    /**\n     * Return a user visible representation of a key sequence.\n     */\n    acceleratorForSequence(keySequence: KeySequence, separator: string = ' '): string[] {\n        return keySequence.map(keyCode => this.acceleratorForKeyCode(keyCode, separator));\n    }\n\n    /**\n     * Return a user visible representation of a key code (a key with modifiers).\n     */\n    acceleratorForKeyCode(keyCode: KeyCode, separator: string = ' '): string {\n        const keyCodeResult = [];\n        if (keyCode.meta && isOSX) {\n            keyCodeResult.push('Cmd');\n        }\n        if (keyCode.ctrl) {\n            keyCodeResult.push('Ctrl');\n        }\n        if (keyCode.alt) {\n            keyCodeResult.push('Alt');\n        }\n        if (keyCode.shift) {\n            keyCodeResult.push('Shift');\n        }\n        if (keyCode.key) {\n            keyCodeResult.push(this.acceleratorForKey(keyCode.key));\n        }\n        return keyCodeResult.join(separator);\n    }\n\n    /**\n     * Return a user visible representation of a single key.\n     */\n    acceleratorForKey(key: Key): string {\n        if (isOSX) {\n            if (key === Key.ARROW_LEFT) {\n                return '';\n            }\n            if (key === Key.ARROW_RIGHT) {\n                return '';\n            }\n            if (key === Key.ARROW_UP) {\n                return '';\n            }\n            if (key === Key.ARROW_DOWN) {\n                return '';\n            }\n        }\n        const keyString = this.keyboardLayoutService.getKeyboardCharacter(key);\n        if (key.keyCode >= Key.KEY_A.keyCode && key.keyCode <= Key.KEY_Z.keyCode ||\n            key.keyCode >= Key.F1.keyCode && key.keyCode <= Key.F24.keyCode) {\n            return keyString.toUpperCase();\n        } else if (keyString.length > 1) {\n            return keyString.charAt(0).toUpperCase() + keyString.slice(1);\n        } else {\n            return keyString;\n        }\n    }\n\n    /**\n     * Finds collisions for a binding inside a list of bindings (error-free)\n     *\n     * @param bindings the reference bindings\n     * @param binding the binding to match\n     */\n    protected getKeybindingCollisions(bindings: Keybinding[], binding: Keybinding): KeybindingRegistry.KeybindingsResult {\n        const result = new KeybindingRegistry.KeybindingsResult();\n        try {\n            const bindingKeySequence = this.resolveKeybinding(binding);\n            result.merge(this.getKeySequenceCollisions(bindings, bindingKeySequence));\n        } catch (error) {\n            this.logger.warn(error);\n        }\n        return result;\n    }\n\n    /**\n     * Finds collisions for a key sequence inside a list of bindings (error-free)\n     *\n     * @param bindings the reference bindings\n     * @param candidate the sequence to match\n     */\n    protected getKeySequenceCollisions(bindings: Keybinding[], candidate: KeySequence): KeybindingRegistry.KeybindingsResult {\n        const result = new KeybindingRegistry.KeybindingsResult();\n        for (const binding of bindings) {\n            try {\n                const bindingKeySequence = this.resolveKeybinding(binding);\n                const compareResult = KeySequence.compare(candidate, bindingKeySequence);\n                switch (compareResult) {\n                    case KeySequence.CompareResult.FULL: {\n                        result.full.push(binding);\n                        break;\n                    }\n                    case KeySequence.CompareResult.PARTIAL: {\n                        result.partial.push(binding);\n                        break;\n                    }\n                    case KeySequence.CompareResult.SHADOW: {\n                        result.shadow.push(binding);\n                        break;\n                    }\n                }\n            } catch (error) {\n                this.logger.warn(error);\n            }\n        }\n        return result;\n    }\n\n    /**\n     * Get the lists of keybindings matching fully or partially matching a KeySequence.\n     * The lists are sorted by priority (see #sortKeybindingsByPriority).\n     *\n     * @param keySequence The key sequence for which we are looking for keybindings.\n     */\n    getKeybindingsForKeySequence(keySequence: KeySequence): KeybindingRegistry.KeybindingsResult {\n        const result = new KeybindingRegistry.KeybindingsResult();\n\n        for (let scope = KeybindingScope.END; --scope >= KeybindingScope.DEFAULT;) {\n            const matches = this.getKeySequenceCollisions(this.keymaps[scope], keySequence);\n\n            matches.full = matches.full.filter(\n                binding => this.getKeybindingCollisions(result.full, binding).full.length === 0);\n            matches.partial = matches.partial.filter(\n                binding => this.getKeybindingCollisions(result.partial, binding).partial.length === 0);\n\n            if (scope === KeybindingScope.DEFAULT_OVERRIDING) {\n                matches.full.reverse();\n                matches.partial.reverse();\n            }\n            matches.full.forEach(binding => binding.scope = scope);\n            matches.partial.forEach(binding => binding.scope = scope);\n            result.merge(matches);\n        }\n        this.sortKeybindingsByPriority(result.full);\n        this.sortKeybindingsByPriority(result.partial);\n        return result;\n    }\n\n    /**\n     * Get the keybindings associated to commandId.\n     *\n     * @param commandId The ID of the command for which we are looking for keybindings.\n     */\n    getKeybindingsForCommand(commandId: string): ScopedKeybinding[] {\n        const result: ScopedKeybinding[] = [];\n\n        for (let scope = KeybindingScope.END - 1; scope >= KeybindingScope.DEFAULT; scope--) {\n            this.keymaps[scope].forEach(binding => {\n                const command = this.commandRegistry.getCommand(binding.command);\n                if (command) {\n                    if (command.id === commandId) {\n                        result.push({ ...binding, scope });\n                    }\n                }\n            });\n\n            if (result.length > 0) {\n                return result;\n            }\n        }\n        return result;\n    }\n\n    /**\n     * Returns a list of keybindings for a command in a specific scope\n     * @param scope specific scope to look for\n     * @param commandId unique id of the command\n     */\n    getScopedKeybindingsForCommand(scope: KeybindingScope, commandId: string): Keybinding[] {\n        const result: Keybinding[] = [];\n\n        if (scope >= KeybindingScope.END) {\n            return [];\n        }\n\n        this.keymaps[scope].forEach(binding => {\n            const command = this.commandRegistry.getCommand(binding.command);\n            if (command && command.id === commandId) {\n                result.push(binding);\n            }\n        });\n        return result;\n    }\n\n    /**\n     * Sort keybindings in-place, in order of priority.\n     *\n     * The only criterion right now is that a keybinding with a context has\n     * more priority than a keybinding with no context.\n     *\n     * @param keybindings Array of keybindings to be sorted in-place.\n     */\n    private sortKeybindingsByPriority(keybindings: Keybinding[]): void {\n        keybindings.sort((a: Keybinding, b: Keybinding): number => {\n\n            let acontext: KeybindingContext | undefined;\n            if (a.context) {\n                acontext = this.contexts[a.context];\n            }\n\n            let bcontext: KeybindingContext | undefined;\n            if (b.context) {\n                bcontext = this.contexts[b.context];\n            }\n\n            if (acontext && !bcontext) {\n                return -1;\n            }\n\n            if (!acontext && bcontext) {\n                return 1;\n            }\n\n            return 0;\n        });\n    }\n\n    protected isActive(binding: Keybinding): boolean {\n        /* Pseudo commands like \"passthrough\" are always active (and not found\n           in the command registry).  */\n        if (this.isPseudoCommand(binding.command)) {\n            return true;\n        }\n\n        const command = this.commandRegistry.getCommand(binding.command);\n        return !!command && !!this.commandRegistry.getActiveHandler(command.id);\n    }\n\n    /**\n     * Tries to execute a keybinding.\n     *\n     * @param binding to execute\n     * @param event keyboard event.\n     */\n    protected executeKeyBinding(binding: Keybinding, event: KeyboardEvent): void {\n        if (this.isPseudoCommand(binding.command)) {\n            /* Don't do anything, let the event propagate.  */\n        } else {\n            const command = this.commandRegistry.getCommand(binding.command);\n            if (command) {\n                const commandHandler = this.commandRegistry.getActiveHandler(command.id, binding.args);\n\n                if (commandHandler) {\n                    commandHandler.execute(binding.args);\n                }\n\n                /* Note that if a keybinding is in context but the command is\n                   not active we still stop the processing here.  */\n                event.preventDefault();\n                event.stopPropagation();\n            }\n        }\n    }\n\n    /**\n     * Only execute if it has no context (global context) or if we're in that context.\n     */\n    protected isEnabled(binding: Keybinding, event: KeyboardEvent): boolean {\n        const context = binding.context && this.contexts[binding.context];\n        if (context && !context.isEnabled(binding)) {\n            return false;\n        }\n        if (binding.when && !this.whenContextService.match(binding.when, <HTMLElement>event.target)) {\n            return false;\n        }\n        return true;\n    }\n\n    /**\n     * Run the command matching to the given keyboard event.\n     */\n    run(event: KeyboardEvent): void {\n        if (event.defaultPrevented) {\n            return;\n        }\n\n        const keyCode = KeyCode.createKeyCode(event);\n        /* Keycode is only a modifier, next keycode will be modifier + key.\n           Ignore this one.  */\n        if (keyCode.isModifierOnly()) {\n            return;\n        }\n\n        this.keyboardLayoutService.validateKeyCode(keyCode);\n        this.keySequence.push(keyCode);\n        const bindings = this.getKeybindingsForKeySequence(this.keySequence);\n        const full = bindings.full.find(binding => this.isEnabled(binding, event));\n        const partial = bindings.partial.find(binding => (!full || binding.scope! > full.scope!) && this.isEnabled(binding, event));\n        if (partial) {\n            /* Accumulate the keysequence */\n            event.preventDefault();\n            event.stopPropagation();\n\n            this.statusBar.setElement('keybinding-status', {\n                text: `(${this.acceleratorForSequence(this.keySequence, '+')}) was pressed, waiting for more keys`,\n                alignment: StatusBarAlignment.LEFT,\n                priority: 2\n            });\n        } else {\n            if (full) {\n                this.executeKeyBinding(full, event);\n            }\n            this.keySequence = [];\n            this.statusBar.removeElement('keybinding-status');\n        }\n    }\n\n    /**\n     * Return true of string a pseudo-command id, in other words a command id\n     * that has a special meaning and that we won't find in the command\n     * registry.\n     *\n     * @param commandId commandId to test\n     */\n    isPseudoCommand(commandId: string): boolean {\n        return commandId === KeybindingRegistry.PASSTHROUGH_PSEUDO_COMMAND;\n    }\n\n    setKeymap(scope: KeybindingScope, bindings: Keybinding[]): void {\n        this.resetKeybindingsForScope(scope);\n        this.toResetKeymap.set(scope, this.doRegisterKeybindings(bindings, scope));\n        this.keybindingsChanged.fire(undefined);\n    }\n\n    protected readonly toResetKeymap = new Map<KeybindingScope, Disposable>();\n\n    /**\n     * Reset keybindings for a specific scope\n     * @param scope scope to reset the keybindings for\n     */\n    resetKeybindingsForScope(scope: KeybindingScope): void {\n        const toReset = this.toResetKeymap.get(scope);\n        if (toReset) {\n            toReset.dispose();\n        }\n    }\n\n    /**\n     * Reset keybindings for all scopes(only leaves the default keybindings mapped)\n     */\n    resetKeybindings(): void {\n        for (let i = KeybindingScope.DEFAULT + 1; i < KeybindingScope.END; i++) {\n            this.keymaps[i] = [];\n        }\n    }\n}\n\nexport namespace KeybindingRegistry {\n    export class KeybindingsResult {\n        full: ScopedKeybinding[] = [];\n        partial: ScopedKeybinding[] = [];\n        shadow: ScopedKeybinding[] = [];\n\n        /**\n         * Merge two results together inside `this`\n         *\n         * @param other the other KeybindingsResult to merge with\n         * @return this\n         */\n        merge(other: KeybindingsResult): KeybindingsResult {\n            this.full.push(...other.full);\n            this.partial.push(...other.partial);\n            this.shadow.push(...other.shadow);\n            return this;\n        }\n\n        /**\n         * Returns a new filtered KeybindingsResult\n         *\n         * @param fn callback filter on the results\n         * @return filtered new result\n         */\n        filter(fn: (binding: Keybinding) => boolean): KeybindingsResult {\n            const result = new KeybindingsResult();\n            result.full = this.full.filter(fn);\n            result.partial = this.partial.filter(fn);\n            result.shadow = this.shadow.filter(fn);\n            return result;\n        }\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2019 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { inject, injectable } from 'inversify';\nimport { isOSX } from '../../common/os';\nimport { CommandContribution, CommandRegistry, Command } from '../../common/command';\nimport { QuickPickService, QuickPickItem } from '../../common/quick-pick-service';\nimport { BrowserKeyboardLayoutProvider, KeyboardLayoutData } from './browser-keyboard-layout-provider';\n\nexport namespace KeyboardCommands {\n\n    const KEYBOARD_CATEGORY = 'Keyboard';\n\n    export const CHOOSE_KEYBOARD_LAYOUT: Command = {\n        id: 'core.keyboard.choose',\n        category: KEYBOARD_CATEGORY,\n        label: 'Choose Keyboard Layout',\n    };\n\n}\n\n@injectable()\nexport class BrowserKeyboardFrontendContribution implements CommandContribution {\n\n    @inject(BrowserKeyboardLayoutProvider)\n    protected readonly layoutProvider: BrowserKeyboardLayoutProvider;\n\n    @inject(QuickPickService)\n    protected readonly quickPickService: QuickPickService;\n\n    registerCommands(commandRegistry: CommandRegistry): void {\n        commandRegistry.registerCommand(KeyboardCommands.CHOOSE_KEYBOARD_LAYOUT, {\n            execute: () => this.chooseLayout()\n        });\n    }\n\n    protected async chooseLayout(): Promise<KeyboardLayoutData | undefined> {\n        const current = this.layoutProvider.currentLayoutData;\n        const autodetect: QuickPickItem<'autodetect'> = {\n            label: 'Auto-detect',\n            description: this.layoutProvider.currentLayoutSource !== 'user-choice' ? `(current: ${current.name})` : undefined,\n            detail: 'Try to detect the keyboard layout from browser information and pressed keys.',\n            value: 'autodetect'\n        };\n        const pcLayouts = this.layoutProvider.allLayoutData\n            .filter(layout => layout.hardware === 'pc')\n            .sort((a, b) => compare(a.name, b.name))\n            .map(layout => this.toQuickPickValue(layout, current === layout));\n        const macLayouts = this.layoutProvider.allLayoutData\n            .filter(layout => layout.hardware === 'mac')\n            .sort((a, b) => compare(a.name, b.name))\n            .map(layout => this.toQuickPickValue(layout, current === layout));\n        let layouts: QuickPickItem<KeyboardLayoutData | 'autodetect'>[];\n        if (isOSX) {\n            layouts = [\n                autodetect,\n                { type: 'separator', label: 'Mac Keyboards' }, ...macLayouts,\n                { type: 'separator', label: 'PC Keyboards' }, ...pcLayouts\n            ];\n        } else {\n            layouts = [\n                autodetect,\n                { type: 'separator', label: 'PC Keyboards' }, ...pcLayouts,\n                { type: 'separator', label: 'Mac Keyboards' }, ...macLayouts\n            ];\n        }\n        const chosen = await this.quickPickService.show(layouts, { placeholder: 'Choose a keyboard layout' });\n        if (chosen) {\n            return this.layoutProvider.setLayoutData(chosen);\n        }\n    }\n\n    protected toQuickPickValue(layout: KeyboardLayoutData, isCurrent: boolean): QuickPickItem<KeyboardLayoutData> {\n        return {\n            label: layout.name,\n            description: `${layout.hardware === 'mac' ? 'Mac' : 'PC'} (${layout.language})${isCurrent ? ' - current layout' : ''}`,\n            value: layout\n        };\n    }\n\n}\n\nfunction compare(a: string, b: string): number {\n    if (a < b) {\n        return -1;\n    }\n    if (a > b) {\n        return 1;\n    }\n    return 0;\n}\n","/********************************************************************************\n * Copyright (C) 2019 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { injectable, postConstruct, inject } from 'inversify';\nimport { IKeyboardLayoutInfo } from 'native-keymap';\nimport { isOSX } from '../../common/os';\nimport { Emitter, Event } from '../../common/event';\nimport { ILogger } from '../../common/logger';\nimport { Deferred } from '../../common/promise-util';\nimport {\n    NativeKeyboardLayout, KeyboardLayoutProvider, KeyboardLayoutChangeNotifier, KeyValidator, KeyValidationInput\n} from '../../common/keyboard/keyboard-layout-provider';\nimport { LocalStorageService } from '../storage-service';\n\nexport type KeyboardLayoutSource = 'navigator.keyboard' | 'user-choice' | 'pressed-keys';\n\n@injectable()\nexport class BrowserKeyboardLayoutProvider implements KeyboardLayoutProvider, KeyboardLayoutChangeNotifier, KeyValidator {\n\n    @inject(ILogger)\n    protected readonly logger: ILogger;\n\n    @inject(LocalStorageService)\n    protected readonly storageService: LocalStorageService;\n\n    protected readonly initialized = new Deferred();\n    protected readonly nativeLayoutChanged = new Emitter<NativeKeyboardLayout>();\n\n    get onDidChangeNativeLayout(): Event<NativeKeyboardLayout> {\n        return this.nativeLayoutChanged.event;\n    }\n\n    protected readonly tester = new KeyboardTester(loadAllLayouts());\n    protected source: KeyboardLayoutSource = 'pressed-keys';\n    protected currentLayout: KeyboardLayoutData = DEFAULT_LAYOUT_DATA;\n\n    get allLayoutData(): KeyboardLayoutData[] {\n        return this.tester.candidates.slice();\n    }\n\n    get currentLayoutData(): KeyboardLayoutData {\n        return this.currentLayout;\n    }\n\n    get currentLayoutSource(): KeyboardLayoutSource {\n        return this.source;\n    }\n\n    @postConstruct()\n    protected async initialize(): Promise<void> {\n        await this.loadState();\n        const keyboard = (navigator as NavigatorExtension).keyboard;\n        if (keyboard && keyboard.addEventListener) {\n            keyboard.addEventListener('layoutchange', async () => {\n                const newLayout = await this.getNativeLayout();\n                this.nativeLayoutChanged.fire(newLayout);\n            });\n        }\n        this.initialized.resolve();\n    }\n\n    async getNativeLayout(): Promise<NativeKeyboardLayout> {\n        await this.initialized.promise;\n        if (this.source === 'user-choice') {\n            return this.currentLayout.raw;\n        }\n        const [layout, source] = await this.autodetect();\n        this.setCurrent(layout, source);\n        return layout.raw;\n    }\n\n    /**\n     * Set user-chosen keyboard layout data.\n     */\n    async setLayoutData(layout: KeyboardLayoutData | 'autodetect'): Promise<KeyboardLayoutData> {\n        if (layout === 'autodetect') {\n            if (this.source === 'user-choice') {\n                const [newLayout, source] = await this.autodetect();\n                this.setCurrent(newLayout, source);\n                this.nativeLayoutChanged.fire(newLayout.raw);\n                return newLayout;\n            }\n            return this.currentLayout;\n        } else {\n            if (this.source !== 'user-choice' || layout !== this.currentLayout) {\n                this.setCurrent(layout, 'user-choice');\n                this.nativeLayoutChanged.fire(layout.raw);\n            }\n            return layout;\n        }\n    }\n\n    /**\n     * Test all known keyboard layouts with the given combination of pressed key and\n     * produced character. Matching layouts have their score increased (see class\n     * KeyboardTester). If this leads to a change of the top-scoring layout, a layout\n     * change event is fired.\n     */\n    validateKey(keyCode: KeyValidationInput): void {\n        if (this.source !== 'pressed-keys') {\n            return;\n        }\n        const accepted = this.tester.updateScores(keyCode);\n        if (!accepted) {\n            return;\n        }\n        const layout = this.selectLayout();\n        if (layout !== this.currentLayout && layout !== DEFAULT_LAYOUT_DATA) {\n            this.setCurrent(layout, 'pressed-keys');\n            this.nativeLayoutChanged.fire(layout.raw);\n        }\n    }\n\n    protected setCurrent(layout: KeyboardLayoutData, source: KeyboardLayoutSource): void {\n        this.currentLayout = layout;\n        this.source = source;\n        this.saveState();\n        if (this.tester.inputCount && (source === 'pressed-keys' || source === 'navigator.keyboard')) {\n            const from = source === 'pressed-keys' ? 'pressed keys' : 'browser API';\n            const hardware = layout.hardware === 'mac' ? 'Mac' : 'PC';\n            this.logger.info(`Detected keyboard layout from ${from}: ${layout.name} (${hardware})`);\n        }\n    }\n\n    protected async autodetect(): Promise<[KeyboardLayoutData, KeyboardLayoutSource]> {\n        const keyboard = (navigator as NavigatorExtension).keyboard;\n        if (keyboard && keyboard.getLayoutMap) {\n            try {\n                const layoutMap = await keyboard.getLayoutMap();\n                this.testLayoutMap(layoutMap);\n                return [this.selectLayout(), 'navigator.keyboard'];\n            } catch (error) {\n                this.logger.warn('Failed to obtain keyboard layout map.', error);\n            }\n        }\n        return [this.selectLayout(), 'pressed-keys'];\n    }\n\n    /**\n     * @param layoutMap a keyboard layout map according to https://wicg.github.io/keyboard-map/\n     */\n    protected testLayoutMap(layoutMap: KeyboardLayoutMap): void {\n        this.tester.reset();\n        for (const [code, key] of layoutMap.entries()) {\n            this.tester.updateScores({ code, character: key });\n        }\n    }\n\n    /**\n     * Select a layout based on the current tester state and the operating system\n     * and language detected from the browser.\n     */\n    protected selectLayout(): KeyboardLayoutData {\n        const candidates = this.tester.candidates;\n        const scores = this.tester.scores;\n        const topScore = this.tester.topScore;\n        const language = navigator.language;\n        let matchingOScount = 0;\n        let topScoringCount = 0;\n        for (let i = 0; i < candidates.length; i++) {\n            if (scores[i] === topScore) {\n                const candidate = candidates[i];\n                if (osMatches(candidate.hardware)) {\n                    if (language && language.startsWith(candidate.language)) {\n                        return candidate;\n                    }\n                    matchingOScount++;\n                }\n                topScoringCount++;\n            }\n        }\n        if (matchingOScount >= 1) {\n            return candidates.find((c, i) => scores[i] === topScore && osMatches(c.hardware))!;\n        }\n        if (topScoringCount >= 1) {\n            return candidates.find((_, i) => scores[i] === topScore)!;\n        }\n        return DEFAULT_LAYOUT_DATA;\n    }\n\n    protected saveState(): Promise<void> {\n        const data: LayoutProviderState = {\n            tester: this.tester.getState(),\n            source: this.source,\n            currentLayout: this.currentLayout !== DEFAULT_LAYOUT_DATA ? getLayoutId(this.currentLayout) : undefined\n        };\n        return this.storageService.setData('keyboard', data);\n    }\n\n    protected async loadState(): Promise<void> {\n        const data = await this.storageService.getData<LayoutProviderState>('keyboard');\n        if (data) {\n            this.tester.setState(data.tester || {});\n            this.source = data.source || 'pressed-keys';\n            if (data.currentLayout) {\n                const layout = this.tester.candidates.find(c => getLayoutId(c) === data.currentLayout);\n                if (layout) {\n                    this.currentLayout = layout;\n                }\n            } else {\n                this.currentLayout = DEFAULT_LAYOUT_DATA;\n            }\n        }\n    }\n\n}\n\nexport interface KeyboardLayoutData {\n    name: string;\n    hardware: 'pc' | 'mac';\n    language: string;\n    raw: NativeKeyboardLayout;\n}\n\nfunction osMatches(hardware: 'pc' | 'mac'): boolean {\n    return isOSX ? hardware === 'mac' : hardware === 'pc';\n}\n\n/**\n * This is the fallback keyboard layout selected when nothing else matches.\n * It has an empty mapping, so user inputs are handled like with a standard US keyboard.\n */\nexport const DEFAULT_LAYOUT_DATA: KeyboardLayoutData = {\n    name: 'US',\n    hardware: isOSX ? 'mac' : 'pc',\n    language: 'en',\n    raw: {\n        info: {} as IKeyboardLayoutInfo,\n        mapping: {}\n    }\n};\n\nexport interface LayoutProviderState {\n    tester?: KeyboardTesterState;\n    source?: KeyboardLayoutSource;\n    currentLayout?: string;\n}\n\nexport interface KeyboardTesterState {\n    scores?: { [id: string]: number };\n    topScore?: number;\n    testedInputs?: { [key: string]: string }\n}\n\n/**\n * Holds score values for all known keyboard layouts. Scores are updated\n * by comparing key codes with the corresponding character produced by\n * the user's keyboard.\n */\nexport class KeyboardTester {\n\n    readonly scores: number[];\n    topScore: number = 0;\n\n    private readonly testedInputs = new Map<string, string>();\n\n    get inputCount(): number {\n        return this.testedInputs.size;\n    }\n\n    constructor(readonly candidates: KeyboardLayoutData[]) {\n        this.scores = this.candidates.map(() => 0);\n    }\n\n    reset(): void {\n        for (let i = 0; i < this.scores.length; i++) {\n            this.scores[i] = 0;\n        }\n        this.topScore = 0;\n        this.testedInputs.clear();\n    }\n\n    updateScores(input: KeyValidationInput): boolean {\n        let property: 'value' | 'withShift' | 'withAltGr' | 'withShiftAltGr';\n        if (input.shiftKey && input.altKey) {\n            property = 'withShiftAltGr';\n        } else if (input.shiftKey) {\n            property = 'withShift';\n        } else if (input.altKey) {\n            property = 'withAltGr';\n        } else {\n            property = 'value';\n        }\n        const inputKey = `${input.code}.${property}`;\n        if (this.testedInputs.has(inputKey)) {\n            if (this.testedInputs.get(inputKey) === input.character) {\n                return false;\n            } else {\n                // The same input keystroke leads to a different character:\n                // probably a keyboard layout change, so forget all previous scores\n                this.reset();\n            }\n        }\n\n        const scores = this.scores;\n        for (let i = 0; i < this.candidates.length; i++) {\n            scores[i] += this.testCandidate(this.candidates[i], input, property);\n            if (scores[i] > this.topScore) {\n                this.topScore = scores[i];\n            }\n        }\n        this.testedInputs.set(inputKey, input.character);\n        return true;\n    }\n\n    protected testCandidate(candidate: KeyboardLayoutData, input: KeyValidationInput,\n        property: 'value' | 'withShift' | 'withAltGr' | 'withShiftAltGr'): number {\n        const keyMapping = candidate.raw.mapping[input.code];\n        if (keyMapping && keyMapping[property]) {\n            return keyMapping[property] === input.character ? 1 : 0;\n        } else {\n            return 0;\n        }\n    }\n\n    getState(): KeyboardTesterState {\n        const scores: { [id: string]: number } = {};\n        for (let i = 0; i < this.scores.length; i++) {\n            scores[getLayoutId(this.candidates[i])] = this.scores[i];\n        }\n        const testedInputs: { [key: string]: string } = {};\n        for (const [key, character] of this.testedInputs.entries()) {\n            testedInputs[key] = character;\n        }\n        return {\n            scores,\n            topScore: this.topScore,\n            testedInputs\n        };\n    }\n\n    setState(state: KeyboardTesterState): void {\n        this.reset();\n        if (state.scores) {\n            const layoutIds = this.candidates.map(getLayoutId);\n            for (const id in state.scores) {\n                if (state.scores.hasOwnProperty(id)) {\n                    const index = layoutIds.indexOf(id);\n                    if (index > 0) {\n                        this.scores[index] = state.scores[id];\n                    }\n                }\n            }\n        }\n        if (state.topScore) {\n            this.topScore = state.topScore;\n        }\n        if (state.testedInputs) {\n            for (const key in state.testedInputs) {\n                if (state.testedInputs.hasOwnProperty(key)) {\n                    this.testedInputs.set(key, state.testedInputs[key]);\n                }\n            }\n        }\n    }\n\n}\n\n/**\n * API specified by https://wicg.github.io/keyboard-map/\n */\ninterface NavigatorExtension extends Navigator {\n    keyboard: Keyboard;\n}\n\ninterface Keyboard {\n    getLayoutMap(): Promise<KeyboardLayoutMap>;\n    addEventListener(type: 'layoutchange', listener: EventListenerOrEventListenerObject): void;\n}\n\ntype KeyboardLayoutMap = Map<string, string>;\n\nfunction getLayoutId(layout: KeyboardLayoutData): string {\n    return `${layout.language}-${layout.name.replace(' ', '_')}-${layout.hardware}`;\n}\n\n/**\n * Keyboard layout files are expected to have the following name scheme:\n *     `language-name-hardware.json`\n *\n * - `language`: A language subtag according to IETF BCP 47\n * - `name`:     Display name of the keyboard layout (without dashes)\n * - `hardware`: `pc` or `mac`\n */\nfunction loadLayout(fileName: string): KeyboardLayoutData {\n    const [language, name, hardware] = fileName.split('-');\n    return {\n        name: name.replace('_', ' '),\n        hardware: hardware as 'pc' | 'mac',\n        language,\n        raw: require('../../../src/common/keyboard/layouts/' + fileName + '.json')\n    };\n}\n\nfunction loadAllLayouts(): KeyboardLayoutData[] {\n    // The order of keyboard layouts is relevant for autodetection. Layouts with\n    // lower index have a higher chance of being selected.\n    // The current ordering approach is to sort by estimated number of developers\n    // in the respective country (taken from the Stack Overflow Developer Survey),\n    // but keeping all layouts of the same language together.\n    return [\n        'en-US-pc',\n        'en-US-mac',\n        'en-Dvorak-pc',\n        'en-Dvorak-mac',\n        'en-Dvorak_Lefthanded-pc',\n        'en-Dvorak_Lefthanded-mac',\n        'en-Dvorak_Righthanded-pc',\n        'en-Dvorak_Righthanded-mac',\n        'en-Colemak-mac',\n        'en-British-pc',\n        'en-British-mac',\n        'de-German-pc',\n        'de-German-mac',\n        'de-Swiss_German-pc',\n        'de-Swiss_German-mac',\n        'fr-French-pc',\n        'fr-French-mac',\n        'fr-Canadian_French-pc',\n        'fr-Canadian_French-mac',\n        'fr-Swiss_French-pc',\n        'fr-Swiss_French-mac',\n        'fr-Bepo-pc',\n        'pt-Portuguese-pc',\n        'pt-Portuguese-mac',\n        'pt-Brazilian-mac',\n        'pl-Polish-pc',\n        'pl-Polish-mac',\n        'nl-Dutch-pc',\n        'nl-Dutch-mac',\n        'es-Spanish-pc',\n        'es-Spanish-mac',\n        'it-Italian-pc',\n        'it-Italian-mac',\n        'sv-Swedish-pc',\n        'sv-Swedish-mac',\n        'tr-Turkish_Q-pc',\n        'tr-Turkish_Q-mac',\n        'cs-Czech-pc',\n        'cs-Czech-mac',\n        'ro-Romanian-pc',\n        'ro-Romanian-mac',\n        'da-Danish-pc',\n        'da-Danish-mac',\n        'nb-Norwegian-pc',\n        'nb-Norwegian-mac',\n        'hu-Hungarian-pc',\n        'hu-Hungarian-mac'\n    ].map(loadLayout);\n}\n","/********************************************************************************\n * Copyright (C) 2019 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nexport * from './keys';\nexport * from './keyboard-layout-service';\nexport * from './browser-keyboard-layout-provider';\nexport * from './browser-keyboard-frontend-contribution';\n","/********************************************************************************\n * Copyright (C) 2019 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { injectable, inject, optional } from 'inversify';\nimport { IWindowsKeyMapping } from 'native-keymap';\nimport { isWindows } from '../../common/os';\nimport {\n    NativeKeyboardLayout, KeyboardLayoutProvider, KeyboardLayoutChangeNotifier, KeyValidator\n} from '../../common/keyboard/keyboard-layout-provider';\nimport { Emitter, Event } from '../../common/event';\nimport { KeyCode, Key } from './keys';\n\nexport interface KeyboardLayout {\n    /**\n     * Mapping of standard US keyboard keys to the actual key codes to use.\n     * See `KeyboardLayoutService.getCharacterIndex` for the index computation.\n     */\n    readonly key2KeyCode: KeyCode[];\n    /**\n     * Mapping of KeyboardEvent codes to the characters shown on the user's keyboard\n     * for the respective keys.\n     */\n    readonly code2Character: { [code: string]: string };\n}\n\n@injectable()\nexport class KeyboardLayoutService {\n\n    @inject(KeyboardLayoutProvider)\n    protected readonly layoutProvider: KeyboardLayoutProvider;\n\n    @inject(KeyboardLayoutChangeNotifier)\n    protected readonly layoutChangeNotifier: KeyboardLayoutChangeNotifier;\n\n    @inject(KeyValidator) @optional()\n    protected readonly keyValidator?: KeyValidator;\n\n    private currentLayout?: KeyboardLayout;\n\n    protected updateLayout(newLayout: NativeKeyboardLayout): KeyboardLayout {\n        const transformed = this.transformNativeLayout(newLayout);\n        this.currentLayout = transformed;\n        this.keyboardLayoutChanged.fire(transformed);\n        return transformed;\n    }\n\n    protected keyboardLayoutChanged = new Emitter<KeyboardLayout>();\n\n    get onKeyboardLayoutChanged(): Event<KeyboardLayout> {\n        return this.keyboardLayoutChanged.event;\n    }\n\n    async initialize(): Promise<void> {\n        this.layoutChangeNotifier.onDidChangeNativeLayout(newLayout => this.updateLayout(newLayout));\n        const initialLayout = await this.layoutProvider.getNativeLayout();\n        this.updateLayout(initialLayout);\n    }\n\n    /**\n     * Resolve a KeyCode of a keybinding using the current keyboard layout.\n     * If no keyboard layout has been detected or the layout does not contain the\n     * key used in the KeyCode, the KeyCode is returned unchanged.\n     */\n    resolveKeyCode(inCode: KeyCode): KeyCode {\n        const layout = this.currentLayout;\n        if (layout && inCode.key) {\n            for (let shift = 0; shift <= 1; shift++) {\n                const index = this.getCharacterIndex(inCode.key, !!shift);\n                const mappedCode = layout.key2KeyCode[index];\n                if (mappedCode) {\n                    const transformed = this.transformKeyCode(inCode, mappedCode, !!shift);\n                    if (transformed) {\n                        return transformed;\n                    }\n                }\n            }\n        }\n        return inCode;\n    }\n\n    /**\n     * Return the character shown on the user's keyboard for the given key.\n     * Use this to determine UI representations of keybindings.\n     */\n    getKeyboardCharacter(key: Key): string {\n        const layout = this.currentLayout;\n        if (layout) {\n            const value = layout.code2Character[key.code];\n            if (value) {\n                return value;\n            }\n        }\n        return key.easyString;\n    }\n\n    /**\n     * Called when a KeyboardEvent is processed by the KeybindingRegistry.\n     * The KeyValidator may trigger a keyboard layout change.\n     */\n    validateKeyCode(keyCode: KeyCode): void {\n        if (this.keyValidator && keyCode.key && keyCode.character) {\n            this.keyValidator.validateKey({\n                code: keyCode.key.code,\n                character: keyCode.character,\n                shiftKey: keyCode.shift,\n                ctrlKey: keyCode.ctrl,\n                altKey: keyCode.alt\n            });\n        }\n    }\n\n    protected transformKeyCode(inCode: KeyCode, mappedCode: KeyCode, keyNeedsShift: boolean): KeyCode | undefined {\n        if (!inCode.shift && keyNeedsShift) {\n            return undefined;\n        }\n        if (mappedCode.alt && (inCode.alt || inCode.ctrl || inCode.shift && !keyNeedsShift)) {\n            return undefined;\n        }\n        return new KeyCode({\n            key: mappedCode.key,\n            meta: inCode.meta,\n            ctrl: inCode.ctrl || mappedCode.alt,\n            shift: inCode.shift && !keyNeedsShift || mappedCode.shift,\n            alt: inCode.alt || mappedCode.alt\n        });\n    }\n\n    protected transformNativeLayout(nativeLayout: NativeKeyboardLayout): KeyboardLayout {\n        const key2KeyCode: KeyCode[] = new Array(2 * (Key.MAX_KEY_CODE + 1));\n        const code2Character: { [code: string]: string } = {};\n        const mapping = nativeLayout.mapping;\n        for (const code in mapping) {\n            if (mapping.hasOwnProperty(code)) {\n                const keyMapping = mapping[code];\n                const mappedKey = Key.getKey(code);\n                if (mappedKey && this.shouldIncludeKey(code)) {\n                    if (isWindows) {\n                        this.addWindowsKeyMapping(key2KeyCode, mappedKey, (keyMapping as IWindowsKeyMapping).vkey, keyMapping.value);\n                    } else {\n                        if (keyMapping.value) {\n                            this.addKeyMapping(key2KeyCode, mappedKey, keyMapping.value, false, false);\n                        }\n                        if (keyMapping.withShift) {\n                            this.addKeyMapping(key2KeyCode, mappedKey, keyMapping.withShift, true, false);\n                        }\n                        if (keyMapping.withAltGr) {\n                            this.addKeyMapping(key2KeyCode, mappedKey, keyMapping.withAltGr, false, true);\n                        }\n                        if (keyMapping.withShiftAltGr) {\n                            this.addKeyMapping(key2KeyCode, mappedKey, keyMapping.withShiftAltGr, true, true);\n                        }\n                    }\n                }\n                if (keyMapping.value) {\n                    code2Character[code] = keyMapping.value;\n                }\n            }\n        }\n        return { key2KeyCode, code2Character };\n    }\n\n    protected shouldIncludeKey(code: string): boolean {\n        // Exclude all numpad keys because they produce values that are already found elsewhere on the keyboard.\n        // This can cause problems, e.g. if `Numpad3` maps to `PageDown` then commands bound to `PageDown` would\n        // be resolved to `Digit3` (`Numpad3` is associated with `Key.DIGIT3`), effectively blocking the user\n        // from typing `3` in an editor.\n        return !code.startsWith('Numpad');\n    }\n\n    private addKeyMapping(key2KeyCode: KeyCode[], mappedKey: Key, value: string, shift: boolean, alt: boolean): void {\n        const key = VALUE_TO_KEY[value];\n        if (key) {\n            const index = this.getCharacterIndex(key.key, key.shift);\n            if (key2KeyCode[index] === undefined) {\n                key2KeyCode[index] = new KeyCode({\n                    key: mappedKey,\n                    shift,\n                    alt,\n                    character: value\n                });\n            }\n        }\n    }\n\n    private addWindowsKeyMapping(key2KeyCode: KeyCode[], mappedKey: Key, vkey: string, value: string): void {\n        const key = VKEY_TO_KEY[vkey];\n        if (key) {\n            const index = this.getCharacterIndex(key);\n            if (key2KeyCode[index] === undefined) {\n                key2KeyCode[index] = new KeyCode({\n                    key: mappedKey,\n                    character: value\n                });\n            }\n        }\n    }\n\n    protected getCharacterIndex(key: Key, shift?: boolean): number {\n        if (shift) {\n            return Key.MAX_KEY_CODE + key.keyCode + 1;\n        } else {\n            return key.keyCode;\n        }\n    }\n\n}\n\n/**\n * Mapping of character values to the corresponding keys on a standard US keyboard layout.\n */\nconst VALUE_TO_KEY: { [value: string]: { key: Key, shift?: boolean } } = {\n    '`': { key: Key.BACKQUOTE },\n    '~': { key: Key.BACKQUOTE, shift: true },\n    '1': { key: Key.DIGIT1 },\n    '!': { key: Key.DIGIT1, shift: true },\n    '2': { key: Key.DIGIT2 },\n    '@': { key: Key.DIGIT2, shift: true },\n    '3': { key: Key.DIGIT3 },\n    '#': { key: Key.DIGIT3, shift: true },\n    '4': { key: Key.DIGIT4 },\n    '$': { key: Key.DIGIT4, shift: true },\n    '5': { key: Key.DIGIT5 },\n    '%': { key: Key.DIGIT5, shift: true },\n    '6': { key: Key.DIGIT6 },\n    '^': { key: Key.DIGIT6, shift: true },\n    '7': { key: Key.DIGIT7 },\n    '&': { key: Key.DIGIT7, shift: true },\n    '8': { key: Key.DIGIT8 },\n    '*': { key: Key.DIGIT8, shift: true },\n    '9': { key: Key.DIGIT9 },\n    '(': { key: Key.DIGIT9, shift: true },\n    '0': { key: Key.DIGIT0 },\n    ')': { key: Key.DIGIT0, shift: true },\n    '-': { key: Key.MINUS },\n    '_': { key: Key.MINUS, shift: true },\n    '=': { key: Key.EQUAL },\n    '+': { key: Key.EQUAL, shift: true },\n\n    'a': { key: Key.KEY_A },\n    'A': { key: Key.KEY_A, shift: true },\n    'b': { key: Key.KEY_B },\n    'B': { key: Key.KEY_B, shift: true },\n    'c': { key: Key.KEY_C },\n    'C': { key: Key.KEY_C, shift: true },\n    'd': { key: Key.KEY_D },\n    'D': { key: Key.KEY_D, shift: true },\n    'e': { key: Key.KEY_E },\n    'E': { key: Key.KEY_E, shift: true },\n    'f': { key: Key.KEY_F },\n    'F': { key: Key.KEY_F, shift: true },\n    'g': { key: Key.KEY_G },\n    'G': { key: Key.KEY_G, shift: true },\n    'h': { key: Key.KEY_H },\n    'H': { key: Key.KEY_H, shift: true },\n    'i': { key: Key.KEY_I },\n    'I': { key: Key.KEY_I, shift: true },\n    'j': { key: Key.KEY_J },\n    'J': { key: Key.KEY_J, shift: true },\n    'k': { key: Key.KEY_K },\n    'K': { key: Key.KEY_K, shift: true },\n    'l': { key: Key.KEY_L },\n    'L': { key: Key.KEY_L, shift: true },\n    'm': { key: Key.KEY_M },\n    'M': { key: Key.KEY_M, shift: true },\n    'n': { key: Key.KEY_N },\n    'N': { key: Key.KEY_N, shift: true },\n    'o': { key: Key.KEY_O },\n    'O': { key: Key.KEY_O, shift: true },\n    'p': { key: Key.KEY_P },\n    'P': { key: Key.KEY_P, shift: true },\n    'q': { key: Key.KEY_Q },\n    'Q': { key: Key.KEY_Q, shift: true },\n    'r': { key: Key.KEY_R },\n    'R': { key: Key.KEY_R, shift: true },\n    's': { key: Key.KEY_S },\n    'S': { key: Key.KEY_S, shift: true },\n    't': { key: Key.KEY_T },\n    'T': { key: Key.KEY_T, shift: true },\n    'u': { key: Key.KEY_U },\n    'U': { key: Key.KEY_U, shift: true },\n    'v': { key: Key.KEY_V },\n    'V': { key: Key.KEY_V, shift: true },\n    'w': { key: Key.KEY_W },\n    'W': { key: Key.KEY_W, shift: true },\n    'x': { key: Key.KEY_X },\n    'X': { key: Key.KEY_X, shift: true },\n    'y': { key: Key.KEY_Y },\n    'Y': { key: Key.KEY_Y, shift: true },\n    'z': { key: Key.KEY_Z },\n    'Z': { key: Key.KEY_Z, shift: true },\n\n    '[': { key: Key.BRACKET_LEFT },\n    '{': { key: Key.BRACKET_LEFT, shift: true },\n    ']': { key: Key.BRACKET_RIGHT },\n    '}': { key: Key.BRACKET_RIGHT, shift: true },\n    ';': { key: Key.SEMICOLON },\n    ':': { key: Key.SEMICOLON, shift: true },\n    \"'\": { key: Key.QUOTE },\n    '\"': { key: Key.QUOTE, shift: true },\n    ',': { key: Key.COMMA },\n    '<': { key: Key.COMMA, shift: true },\n    '.': { key: Key.PERIOD },\n    '>': { key: Key.PERIOD, shift: true },\n    '/': { key: Key.SLASH },\n    '?': { key: Key.SLASH, shift: true },\n    '\\\\': { key: Key.BACKSLASH },\n    '|': { key: Key.BACKSLASH, shift: true },\n\n    '\\t': { key: Key.TAB },\n    '\\r': { key: Key.ENTER },\n    '\\n': { key: Key.ENTER },\n    ' ': { key: Key.SPACE },\n};\n\n/**\n * Mapping of Windows Virtual Keys to the corresponding keys on a standard US keyboard layout.\n */\nconst VKEY_TO_KEY: { [value: string]: Key } = {\n    VK_SHIFT: Key.SHIFT_LEFT,\n    VK_LSHIFT: Key.SHIFT_LEFT,\n    VK_RSHIFT: Key.SHIFT_RIGHT,\n    VK_CONTROL: Key.CONTROL_LEFT,\n    VK_LCONTROL: Key.CONTROL_LEFT,\n    VK_RCONTROL: Key.CONTROL_RIGHT,\n    VK_MENU: Key.ALT_LEFT,\n    VK_COMMAND: Key.OS_LEFT,\n    VK_LWIN: Key.OS_LEFT,\n    VK_RWIN: Key.OS_RIGHT,\n\n    VK_0: Key.DIGIT0,\n    VK_1: Key.DIGIT1,\n    VK_2: Key.DIGIT2,\n    VK_3: Key.DIGIT3,\n    VK_4: Key.DIGIT4,\n    VK_5: Key.DIGIT5,\n    VK_6: Key.DIGIT6,\n    VK_7: Key.DIGIT7,\n    VK_8: Key.DIGIT8,\n    VK_9: Key.DIGIT9,\n    VK_A: Key.KEY_A,\n    VK_B: Key.KEY_B,\n    VK_C: Key.KEY_C,\n    VK_D: Key.KEY_D,\n    VK_E: Key.KEY_E,\n    VK_F: Key.KEY_F,\n    VK_G: Key.KEY_G,\n    VK_H: Key.KEY_H,\n    VK_I: Key.KEY_I,\n    VK_J: Key.KEY_J,\n    VK_K: Key.KEY_K,\n    VK_L: Key.KEY_L,\n    VK_M: Key.KEY_M,\n    VK_N: Key.KEY_N,\n    VK_O: Key.KEY_O,\n    VK_P: Key.KEY_P,\n    VK_Q: Key.KEY_Q,\n    VK_R: Key.KEY_R,\n    VK_S: Key.KEY_S,\n    VK_T: Key.KEY_T,\n    VK_U: Key.KEY_U,\n    VK_V: Key.KEY_V,\n    VK_W: Key.KEY_W,\n    VK_X: Key.KEY_X,\n    VK_Y: Key.KEY_Y,\n    VK_Z: Key.KEY_Z,\n\n    VK_OEM_1: Key.SEMICOLON,\n    VK_OEM_2: Key.SLASH,\n    VK_OEM_3: Key.BACKQUOTE,\n    VK_OEM_4: Key.BRACKET_LEFT,\n    VK_OEM_5: Key.BACKSLASH,\n    VK_OEM_6: Key.BRACKET_RIGHT,\n    VK_OEM_7: Key.QUOTE,\n    VK_OEM_PLUS: Key.EQUAL,\n    VK_OEM_COMMA: Key.COMMA,\n    VK_OEM_MINUS: Key.MINUS,\n    VK_OEM_PERIOD: Key.PERIOD,\n\n    VK_F1: Key.F1,\n    VK_F2: Key.F2,\n    VK_F3: Key.F3,\n    VK_F4: Key.F4,\n    VK_F5: Key.F5,\n    VK_F6: Key.F6,\n    VK_F7: Key.F7,\n    VK_F8: Key.F8,\n    VK_F9: Key.F9,\n    VK_F10: Key.F10,\n    VK_F11: Key.F11,\n    VK_F12: Key.F12,\n    VK_F13: Key.F13,\n    VK_F14: Key.F14,\n    VK_F15: Key.F15,\n    VK_F16: Key.F16,\n    VK_F17: Key.F17,\n    VK_F18: Key.F18,\n    VK_F19: Key.F19,\n\n    VK_BACK: Key.BACKSPACE,\n    VK_TAB: Key.TAB,\n    VK_RETURN: Key.ENTER,\n    VK_CAPITAL: Key.CAPS_LOCK,\n    VK_ESCAPE: Key.ESCAPE,\n    VK_SPACE: Key.SPACE,\n    VK_PRIOR: Key.PAGE_UP,\n    VK_NEXT: Key.PAGE_DOWN,\n    VK_END: Key.END,\n    VK_HOME: Key.HOME,\n    VK_INSERT: Key.INSERT,\n    VK_DELETE: Key.DELETE,\n    VK_LEFT: Key.ARROW_LEFT,\n    VK_UP: Key.ARROW_UP,\n    VK_RIGHT: Key.ARROW_RIGHT,\n    VK_DOWN: Key.ARROW_DOWN,\n\n    VK_NUMLOCK: Key.NUM_LOCK,\n    VK_NUMPAD0: Key.DIGIT0,\n    VK_NUMPAD1: Key.DIGIT1,\n    VK_NUMPAD2: Key.DIGIT2,\n    VK_NUMPAD3: Key.DIGIT3,\n    VK_NUMPAD4: Key.DIGIT4,\n    VK_NUMPAD5: Key.DIGIT5,\n    VK_NUMPAD6: Key.DIGIT6,\n    VK_NUMPAD7: Key.DIGIT7,\n    VK_NUMPAD8: Key.DIGIT8,\n    VK_NUMPAD9: Key.DIGIT9,\n    VK_MULTIPLY: Key.MULTIPLY,\n    VK_ADD: Key.ADD,\n    VK_SUBTRACT: Key.SUBTRACT,\n    VK_DECIMAL: Key.DECIMAL,\n    VK_DIVIDE: Key.DIVIDE\n};\n","/********************************************************************************\n * Copyright (C) 2017-2019 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { isOSX } from '../../common/os';\n\nexport type KeySequence = KeyCode[];\nexport namespace KeySequence {\n\n    export function equals(a: KeySequence, b: KeySequence): boolean {\n        if (a.length !== b.length) {\n            return false;\n        }\n\n        for (let i = 0; i < a.length; i++) {\n            if (!a[i].equals(b[i])) {\n                return false;\n            }\n        }\n        return true;\n    }\n\n    export enum CompareResult {\n        NONE = 0,\n        PARTIAL,\n        SHADOW,\n        FULL\n    }\n\n    /* Compares two KeySequences, returns:\n     * FULL if the KeySequences are the same.\n     * PARTIAL if the KeySequence a part of b.\n     * SHADOW if the KeySequence b part of a.\n     * NONE if the KeySequences are not the same at all.\n     */\n    export function compare(a: KeySequence, b: KeySequence): CompareResult {\n        let first = a;\n        let second = b;\n        let shadow = false;\n\n        if (b.length < a.length) {\n            first = b;\n            second = a;\n            shadow = true;\n        }\n\n        for (let i = 0; i < first.length; i++) {\n            if (first[i].equals(second[i]) === false) {\n                return KeySequence.CompareResult.NONE;\n            }\n        }\n        if (first.length < second.length) {\n            if (shadow === false) {\n                return KeySequence.CompareResult.PARTIAL;\n            } else {\n                return KeySequence.CompareResult.SHADOW;\n            }\n        }\n        return KeySequence.CompareResult.FULL;\n    }\n\n    export function parse(keybinding: string): KeySequence {\n        const keyCodes = [];\n        const rawKeyCodes = keybinding.trim().split(/\\s+/g);\n        for (const rawKeyCode of rawKeyCodes) {\n            const keyCode = KeyCode.parse(rawKeyCode);\n            if (keyCode !== undefined) {\n                keyCodes.push(keyCode);\n            }\n        }\n        return keyCodes;\n    }\n}\n\n/**\n * The key sequence for this binding. This key sequence should consist of one or more key strokes. Key strokes\n * consist of one or more keys held down at the same time. This should be zero or more modifier keys, and zero or one other key.\n * Since `M2+M3+<Key>` (Alt+Shift+<Key>) is reserved on MacOS X for writing special characters, such bindings are commonly\n * undefined for platform MacOS X and redefined as `M1+M3+<Key>`. The rule applies on the `M3+M2+<Key>` sequence.\n */\nexport interface Keystroke {\n    readonly first?: Key;\n    readonly modifiers?: KeyModifier[];\n}\n\nexport interface KeyCodeSchema {\n    key?: Partial<Key>;\n    ctrl?: boolean;\n    shift?: boolean;\n    alt?: boolean;\n    meta?: boolean;\n    character?: string;\n}\n\n/**\n * Representation of a pressed key combined with key modifiers.\n */\nexport class KeyCode {\n\n    public readonly key: Key | undefined;\n    public readonly ctrl: boolean;\n    public readonly shift: boolean;\n    public readonly alt: boolean;\n    public readonly meta: boolean;\n    public readonly character: string | undefined;\n\n    public constructor(schema: KeyCodeSchema) {\n        const key = schema.key;\n        if (key) {\n            if (key.code && key.keyCode && key.easyString) {\n                this.key = key as Key;\n            } else if (key.code) {\n                this.key = Key.getKey(key.code);\n            } else if (key.keyCode) {\n                this.key = Key.getKey(key.keyCode);\n            }\n        }\n        this.ctrl = !!schema.ctrl;\n        this.shift = !!schema.shift;\n        this.alt = !!schema.alt;\n        this.meta = !!schema.meta;\n        this.character = schema.character;\n    }\n\n    /**\n     * Return true if this KeyCode only contains modifiers.\n     */\n    public isModifierOnly(): boolean {\n        return this.key === undefined;\n    }\n\n    /**\n     * Return true if the given KeyCode is equal to this one.\n     */\n    equals(other: KeyCode): boolean {\n        if (this.key && (!other.key || this.key.code !== other.key.code) || !this.key && other.key) {\n            return false;\n        }\n        return this.ctrl === other.ctrl && this.alt === other.alt && this.shift === other.shift && this.meta === other.meta;\n    }\n\n    /*\n     * Return a keybinding string compatible with the `Keybinding.keybinding` property.\n     */\n    toString(): string {\n        const result = [];\n        if (this.meta) {\n            result.push(SpecialCases.META);\n        }\n        if (this.shift) {\n            result.push(Key.SHIFT_LEFT.easyString);\n        }\n        if (this.alt) {\n            result.push(Key.ALT_LEFT.easyString);\n        }\n        if (this.ctrl) {\n            result.push(Key.CONTROL_LEFT.easyString);\n        }\n        if (this.key) {\n            result.push(this.key.easyString);\n        }\n        return result.join('+');\n    }\n\n    /**\n     * Create a KeyCode from one of several input types.\n     */\n    public static createKeyCode(input: KeyboardEvent | Keystroke | KeyCodeSchema | string): KeyCode {\n        if (typeof input === 'string') {\n            const parts = input.split('+');\n            if (!KeyCode.isModifierString(parts[0])) {\n                return KeyCode.createKeyCode({\n                    first: Key.getKey(parts[0]),\n                    modifiers: parts.slice(1) as KeyModifier[]\n                });\n            }\n            return KeyCode.createKeyCode({ modifiers: parts as KeyModifier[] });\n        } else if (KeyCode.isKeyboardEvent(input)) {\n            const key = KeyCode.toKey(input);\n            return new KeyCode({\n                key: Key.isModifier(key.code) ? undefined : key,\n                meta: isOSX && input.metaKey,\n                shift: input.shiftKey,\n                alt: input.altKey,\n                ctrl: input.ctrlKey,\n                character: KeyCode.toCharacter(input)\n            });\n        } else if ((input as Keystroke).first || (input as Keystroke).modifiers) {\n            const keystroke = input as Keystroke;\n            const schema: KeyCodeSchema = {\n                key: keystroke.first\n            };\n            if (keystroke.modifiers) {\n                if (isOSX) {\n                    schema.meta = keystroke.modifiers.some(mod => mod === KeyModifier.CtrlCmd);\n                    schema.ctrl = keystroke.modifiers.some(mod => mod === KeyModifier.MacCtrl);\n                } else {\n                    schema.meta = false;\n                    schema.ctrl = keystroke.modifiers.some(mod => mod === KeyModifier.CtrlCmd);\n                }\n                schema.shift = keystroke.modifiers.some(mod => mod === KeyModifier.Shift);\n                schema.alt = keystroke.modifiers.some(mod => mod === KeyModifier.Alt);\n            }\n            return new KeyCode(schema);\n        } else {\n            return new KeyCode(input as KeyCodeSchema);\n        }\n    }\n\n    private static keybindings: { [key: string]: KeyCode } = {};\n\n    /* Reset the key hashmap, this is for testing purposes.  */\n    public static resetKeyBindings(): void {\n        KeyCode.keybindings = {};\n    }\n\n    /**\n     * Parses a string and returns a KeyCode object.\n     * @param keybinding String representation of a keybinding\n     */\n    public static parse(keybinding: string): KeyCode {\n        if (KeyCode.keybindings[keybinding]) {\n            return KeyCode.keybindings[keybinding];\n        }\n\n        const schema: KeyCodeSchema = {};\n        const keys = [];\n        let currentKey = '';\n        for (const character of keybinding.trim().toLowerCase()) {\n            if (currentKey && (character === '-' || character === '+')) {\n                keys.push(currentKey);\n                currentKey = '';\n            } else if (character !== '+') {\n                currentKey += character;\n            }\n        }\n        if (currentKey) {\n            keys.push(currentKey);\n        }\n        /* If duplicates i.e ctrl+ctrl+a or alt+alt+b or b+alt+b it is invalid */\n        if (keys.length !== new Set(keys).size) {\n            throw new Error(`Can't parse keybinding ${keybinding} Duplicate modifiers`);\n        }\n\n        for (let keyString of keys) {\n            if (SPECIAL_ALIASES[keyString] !== undefined) {\n                keyString = SPECIAL_ALIASES[keyString];\n            }\n            const key = EASY_TO_KEY[keyString];\n\n            /* meta only works on macOS */\n            if (keyString === SpecialCases.META) {\n                if (isOSX) {\n                    schema.meta = true;\n                } else {\n                    throw new Error(`Can't parse keybinding ${keybinding} meta is for OSX only`);\n                }\n                /* ctrlcmd for M1 keybindings that work on both macOS and other platforms */\n            } else if (keyString === SpecialCases.CTRLCMD) {\n                if (isOSX) {\n                    schema.meta = true;\n                } else {\n                    schema.ctrl = true;\n                }\n            } else if (Key.isKey(key)) {\n                if (Key.isModifier(key.code)) {\n                    if (key.code === Key.CONTROL_LEFT.code || key.code === Key.CONTROL_RIGHT.code) {\n                        schema.ctrl = true;\n                    } else if (key.code === Key.SHIFT_LEFT.code || key.code === Key.SHIFT_RIGHT.code) {\n                        schema.shift = true;\n                    } else if (key.code === Key.ALT_LEFT.code || key.code === Key.ALT_RIGHT.code) {\n                        schema.alt = true;\n                    }\n                } else {\n                    schema.key = key;\n                }\n            } else {\n                throw new Error(`Unrecognized key '${keyString}' in '${keybinding}'`);\n            }\n        }\n\n        KeyCode.keybindings[keybinding] = new KeyCode(schema);\n        return KeyCode.keybindings[keybinding];\n    }\n\n}\n\nexport namespace KeyCode {\n\n    /**\n     * Determines a `true` of `false` value for the key code argument.\n     */\n    export type Predicate = (keyCode: KeyCode) => boolean;\n\n    /*\n     * Return true if the string is a modifier M1 to M4.\n     */\n    export function isModifierString(key: string): boolean {\n        return key === KeyModifier.CtrlCmd\n            || key === KeyModifier.Shift\n            || key === KeyModifier.Alt\n            || key === KeyModifier.MacCtrl;\n    }\n\n    /**\n     * Different scopes have different execution environments. This means that they have different built-ins\n     * (different global object, different constructors, etc.). This may result in unexpected results. For instance,\n     * `[] instanceof window.frames[0].Array` will return `false`, because `Array.prototype !== window.frames[0].Array`\n     * and arrays inherit from the former.\n     * See: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/instanceof\n     *\n     * Note: just add another check if the current `event.type` checking is insufficient.\n     */\n    export function isKeyboardEvent(event: object & { readonly type?: string }): event is KeyboardEvent {\n        if (typeof KeyboardEvent === 'undefined') { // This can happen in tests\n            return false;\n        }\n        if (event instanceof KeyboardEvent) {\n            return true;\n        }\n        const { type } = event;\n        if (type) {\n            return type === 'keypress' || type === 'keydown' || type === 'keyup';\n        }\n        return false;\n    }\n\n    /**\n     * Determine the pressed key of a keyboard event. This key should correspond to the physical key according\n     * to a standard US keyboard layout. International keyboard layouts are handled by `KeyboardLayoutService`.\n     *\n     * `keyIdentifier` is used to access this deprecated field:\n     * https://developer.mozilla.org/en-US/docs/Web/API/KeyboardEvent/keyIdentifier\n     */\n    export function toKey(event: KeyboardEvent): Key {\n        const code = event.code;\n        if (code) {\n            if (isOSX) {\n                // https://github.com/eclipse-theia/theia/issues/4986\n                const char = event.key;\n                if (code === 'IntlBackslash' && (char === '`' || char === '~')) {\n                    return Key.BACKQUOTE;\n                } else if (code === 'Backquote' && (char === '' || char === '')) {\n                    return Key.INTL_BACKSLASH;\n                }\n            }\n            const key = Key.getKey(code);\n            if (key) {\n                return key;\n            }\n        }\n\n        // tslint:disable-next-line: deprecation\n        const keyCode = event.keyCode;\n        if (keyCode) {\n            const key = Key.getKey(keyCode);\n            if (key) {\n                return key;\n            }\n        }\n\n        const keyIdentifier = (event as KeyboardEvent & { keyIdentifier?: string }).keyIdentifier;\n        if (keyIdentifier) {\n            const key = Key.getKey(keyIdentifier);\n            if (key) {\n                return key;\n            }\n        }\n        throw new Error(`Cannot get key code from the keyboard event: ${event}.`);\n    }\n\n    /**\n     * Determine the actual printable character that is generated from a pressed key.\n     * If the key does not correspond to a printable character, `undefined` is returned.\n     * The result may be altered by modifier keys.\n     */\n    export function toCharacter(event: KeyboardEvent): string | undefined {\n        const key = event.key;\n        // Use the key property if it contains exactly one unicode character\n        if (key && Array.from(key).length === 1) {\n            return key;\n        }\n        const charCode = event.charCode;\n        // Use the charCode property if it does not correspond to a unicode control character\n        if (charCode && charCode > 0x1f && !(charCode >= 0x80 && charCode <= 0x9f)) {\n            return String.fromCharCode(charCode);\n        }\n        return undefined;\n    }\n\n}\n\nexport enum KeyModifier {\n    /**\n     * M1 is the COMMAND key on MacOS X, and the CTRL key on most other platforms.\n     */\n    CtrlCmd = 'M1',\n    /**\n     * M2 is the SHIFT key.\n     */\n    Shift = 'M2',\n    /**\n     * M3 is the Option key on MacOS X, and the ALT key on most other platforms.\n     */\n    Alt = 'M3',\n    /**\n     * M4 is the CTRL key on MacOS X, and is undefined on other platforms.\n     */\n    MacCtrl = 'M4'\n}\n\nexport namespace KeyModifier {\n    /**\n     * The CTRL key, independently of the platform.\n     * _Note:_ In general `KeyModifier.CtrlCmd` should be preferred over this constant.\n     */\n    export const CTRL: KeyModifier.MacCtrl | KeyModifier.CtrlCmd = isOSX ? KeyModifier.MacCtrl : KeyModifier.CtrlCmd;\n    /**\n     * An alias for the SHIFT key (`KeyModifier.Shift`).\n     */\n    export const SHIFT: KeyModifier.Shift = KeyModifier.Shift;\n\n    /**\n     * `true` if the argument represents a modifier. Otherwise, `false`.\n     */\n    export function isModifier(key: string | undefined): boolean {\n        if (key) {\n            switch (key) {\n                case 'M1': // Fall through.\n                case 'M2': // Fall through.\n                case 'M3': // Fall through.\n                case 'M4': return true;\n                default: return false;\n            }\n        }\n        return false;\n    }\n}\n\nexport interface Key {\n    readonly code: string;\n    readonly keyCode: number;\n    readonly easyString: string;\n}\n\nconst CODE_TO_KEY: { [code: string]: Key } = {};\nconst KEY_CODE_TO_KEY: { [keyCode: number]: Key } = {};\nconst EASY_TO_KEY: { [code: string]: Key } = {}; // From 'ctrl' to Key structure\nconst MODIFIERS: Key[] = [];\n\nconst SPECIAL_ALIASES: { [index: string]: string } = {\n    'option': 'alt',\n    'command': 'meta',\n    'cmd': 'meta',\n    'return': 'enter',\n    'esc': 'escape',\n    'mod': 'ctrl',\n    'ins': 'insert',\n    'del': 'delete',\n    'control': 'ctrl',\n};\n\nexport namespace SpecialCases {\n    export const META = 'meta';\n    export const CTRLCMD = 'ctrlcmd';\n}\n\nexport namespace Key {\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    export function isKey(arg: any): arg is Key {\n        return typeof arg === 'object' && ('code' in arg) && ('keyCode' in arg);\n    }\n\n    export function getKey(arg: string | number): Key | undefined {\n        if (typeof arg === 'number') {\n            return KEY_CODE_TO_KEY[arg];\n        } else {\n            return CODE_TO_KEY[arg];\n        }\n    }\n\n    export function isModifier(arg: string | number): boolean {\n        if (typeof arg === 'number') {\n            return MODIFIERS.find(key => key.keyCode === arg) !== undefined;\n        }\n        return MODIFIERS.find(key => key.code === arg) !== undefined;\n    }\n\n    export function equals(key: Key, keyCode: KeyCode): boolean {\n        return !!keyCode.key && key.keyCode === keyCode.key.keyCode;\n    }\n\n    export const BACKSPACE: Key = { code: 'Backspace', keyCode: 8, easyString: 'backspace' };\n    export const TAB: Key = { code: 'Tab', keyCode: 9, easyString: 'tab' };\n    export const ENTER: Key = { code: 'Enter', keyCode: 13, easyString: 'enter' };\n    export const ESCAPE: Key = { code: 'Escape', keyCode: 27, easyString: 'escape' };\n    export const SPACE: Key = { code: 'Space', keyCode: 32, easyString: 'space' };\n    export const PAGE_UP: Key = { code: 'PageUp', keyCode: 33, easyString: 'pageup' };\n    export const PAGE_DOWN: Key = { code: 'PageDown', keyCode: 34, easyString: 'pagedown' };\n    export const END: Key = { code: 'End', keyCode: 35, easyString: 'end' };\n    export const HOME: Key = { code: 'Home', keyCode: 36, easyString: 'home' };\n    export const ARROW_LEFT: Key = { code: 'ArrowLeft', keyCode: 37, easyString: 'left' };\n    export const ARROW_UP: Key = { code: 'ArrowUp', keyCode: 38, easyString: 'up' };\n    export const ARROW_RIGHT: Key = { code: 'ArrowRight', keyCode: 39, easyString: 'right' };\n    export const ARROW_DOWN: Key = { code: 'ArrowDown', keyCode: 40, easyString: 'down' };\n    export const INSERT: Key = { code: 'Insert', keyCode: 45, easyString: 'insert' };\n    export const DELETE: Key = { code: 'Delete', keyCode: 46, easyString: 'delete' };\n\n    export const SHIFT_LEFT: Key = { code: 'ShiftLeft', keyCode: 16, easyString: 'shift' };\n    export const SHIFT_RIGHT: Key = { code: 'ShiftRight', keyCode: 16, easyString: 'shift' };\n    export const CONTROL_LEFT: Key = { code: 'ControlLeft', keyCode: 17, easyString: 'ctrl' };\n    export const CONTROL_RIGHT: Key = { code: 'ControlRight', keyCode: 17, easyString: 'ctrl' };\n    export const ALT_LEFT: Key = { code: 'AltLeft', keyCode: 18, easyString: 'alt' };\n    export const ALT_RIGHT: Key = { code: 'AltRight', keyCode: 18, easyString: 'alt' };\n    export const CAPS_LOCK: Key = { code: 'CapsLock', keyCode: 20, easyString: 'capslock' };\n    export const OS_LEFT: Key = { code: 'OSLeft', keyCode: 91, easyString: 'super' };\n    export const OS_RIGHT: Key = { code: 'OSRight', keyCode: 92, easyString: 'super' };\n\n    export const DIGIT0: Key = { code: 'Digit0', keyCode: 48, easyString: '0' };\n    export const DIGIT1: Key = { code: 'Digit1', keyCode: 49, easyString: '1' };\n    export const DIGIT2: Key = { code: 'Digit2', keyCode: 50, easyString: '2' };\n    export const DIGIT3: Key = { code: 'Digit3', keyCode: 51, easyString: '3' };\n    export const DIGIT4: Key = { code: 'Digit4', keyCode: 52, easyString: '4' };\n    export const DIGIT5: Key = { code: 'Digit5', keyCode: 53, easyString: '5' };\n    export const DIGIT6: Key = { code: 'Digit6', keyCode: 54, easyString: '6' };\n    export const DIGIT7: Key = { code: 'Digit7', keyCode: 55, easyString: '7' };\n    export const DIGIT8: Key = { code: 'Digit8', keyCode: 56, easyString: '8' };\n    export const DIGIT9: Key = { code: 'Digit9', keyCode: 57, easyString: '9' };\n\n    export const KEY_A: Key = { code: 'KeyA', keyCode: 65, easyString: 'a' };\n    export const KEY_B: Key = { code: 'KeyB', keyCode: 66, easyString: 'b' };\n    export const KEY_C: Key = { code: 'KeyC', keyCode: 67, easyString: 'c' };\n    export const KEY_D: Key = { code: 'KeyD', keyCode: 68, easyString: 'd' };\n    export const KEY_E: Key = { code: 'KeyE', keyCode: 69, easyString: 'e' };\n    export const KEY_F: Key = { code: 'KeyF', keyCode: 70, easyString: 'f' };\n    export const KEY_G: Key = { code: 'KeyG', keyCode: 71, easyString: 'g' };\n    export const KEY_H: Key = { code: 'KeyH', keyCode: 72, easyString: 'h' };\n    export const KEY_I: Key = { code: 'KeyI', keyCode: 73, easyString: 'i' };\n    export const KEY_J: Key = { code: 'KeyJ', keyCode: 74, easyString: 'j' };\n    export const KEY_K: Key = { code: 'KeyK', keyCode: 75, easyString: 'k' };\n    export const KEY_L: Key = { code: 'KeyL', keyCode: 76, easyString: 'l' };\n    export const KEY_M: Key = { code: 'KeyM', keyCode: 77, easyString: 'm' };\n    export const KEY_N: Key = { code: 'KeyN', keyCode: 78, easyString: 'n' };\n    export const KEY_O: Key = { code: 'KeyO', keyCode: 79, easyString: 'o' };\n    export const KEY_P: Key = { code: 'KeyP', keyCode: 80, easyString: 'p' };\n    export const KEY_Q: Key = { code: 'KeyQ', keyCode: 81, easyString: 'q' };\n    export const KEY_R: Key = { code: 'KeyR', keyCode: 82, easyString: 'r' };\n    export const KEY_S: Key = { code: 'KeyS', keyCode: 83, easyString: 's' };\n    export const KEY_T: Key = { code: 'KeyT', keyCode: 84, easyString: 't' };\n    export const KEY_U: Key = { code: 'KeyU', keyCode: 85, easyString: 'u' };\n    export const KEY_V: Key = { code: 'KeyV', keyCode: 86, easyString: 'v' };\n    export const KEY_W: Key = { code: 'KeyW', keyCode: 87, easyString: 'w' };\n    export const KEY_X: Key = { code: 'KeyX', keyCode: 88, easyString: 'x' };\n    export const KEY_Y: Key = { code: 'KeyY', keyCode: 89, easyString: 'y' };\n    export const KEY_Z: Key = { code: 'KeyZ', keyCode: 90, easyString: 'z' };\n\n    export const MULTIPLY: Key = { code: 'NumpadMultiply', keyCode: 106, easyString: 'multiply' };\n    export const ADD: Key = { code: 'NumpadAdd', keyCode: 107, easyString: 'add' };\n    export const DECIMAL: Key = { code: 'NumpadDecimal', keyCode: 108, easyString: 'decimal' };\n    export const SUBTRACT: Key = { code: 'NumpadSubtract', keyCode: 109, easyString: 'subtract' };\n    export const DIVIDE: Key = { code: 'NumpadDivide', keyCode: 111, easyString: 'divide' };\n\n    export const F1: Key = { code: 'F1', keyCode: 112, easyString: 'f1' };\n    export const F2: Key = { code: 'F2', keyCode: 113, easyString: 'f2' };\n    export const F3: Key = { code: 'F3', keyCode: 114, easyString: 'f3' };\n    export const F4: Key = { code: 'F4', keyCode: 115, easyString: 'f4' };\n    export const F5: Key = { code: 'F5', keyCode: 116, easyString: 'f5' };\n    export const F6: Key = { code: 'F6', keyCode: 117, easyString: 'f6' };\n    export const F7: Key = { code: 'F7', keyCode: 118, easyString: 'f7' };\n    export const F8: Key = { code: 'F8', keyCode: 119, easyString: 'f8' };\n    export const F9: Key = { code: 'F9', keyCode: 120, easyString: 'f9' };\n    export const F10: Key = { code: 'F10', keyCode: 121, easyString: 'f10' };\n    export const F11: Key = { code: 'F11', keyCode: 122, easyString: 'f11' };\n    export const F12: Key = { code: 'F12', keyCode: 123, easyString: 'f12' };\n    export const F13: Key = { code: 'F13', keyCode: 124, easyString: 'f13' };\n    export const F14: Key = { code: 'F14', keyCode: 125, easyString: 'f14' };\n    export const F15: Key = { code: 'F15', keyCode: 126, easyString: 'f15' };\n    export const F16: Key = { code: 'F16', keyCode: 127, easyString: 'f16' };\n    export const F17: Key = { code: 'F17', keyCode: 128, easyString: 'f17' };\n    export const F18: Key = { code: 'F18', keyCode: 129, easyString: 'f18' };\n    export const F19: Key = { code: 'F19', keyCode: 130, easyString: 'f19' };\n    export const F20: Key = { code: 'F20', keyCode: 131, easyString: 'f20' };\n    export const F21: Key = { code: 'F21', keyCode: 132, easyString: 'f21' };\n    export const F22: Key = { code: 'F22', keyCode: 133, easyString: 'f22' };\n    export const F23: Key = { code: 'F23', keyCode: 134, easyString: 'f23' };\n    export const F24: Key = { code: 'F24', keyCode: 135, easyString: 'f24' };\n\n    export const NUM_LOCK: Key = { code: 'NumLock', keyCode: 144, easyString: 'numlock' };\n    export const SEMICOLON: Key = { code: 'Semicolon', keyCode: 186, easyString: ';' };\n    export const EQUAL: Key = { code: 'Equal', keyCode: 187, easyString: '=' };\n    export const COMMA: Key = { code: 'Comma', keyCode: 188, easyString: ',' };\n    export const MINUS: Key = { code: 'Minus', keyCode: 189, easyString: '-' };\n    export const PERIOD: Key = { code: 'Period', keyCode: 190, easyString: '.' };\n    export const SLASH: Key = { code: 'Slash', keyCode: 191, easyString: '/' };\n    export const BACKQUOTE: Key = { code: 'Backquote', keyCode: 192, easyString: '`' };\n    export const INTL_RO: Key = { code: 'IntlRo', keyCode: 193, easyString: 'intlro' };\n    export const BRACKET_LEFT: Key = { code: 'BracketLeft', keyCode: 219, easyString: '[' };\n    export const BACKSLASH: Key = { code: 'Backslash', keyCode: 220, easyString: '\\\\' };\n    export const BRACKET_RIGHT: Key = { code: 'BracketRight', keyCode: 221, easyString: ']' };\n    export const QUOTE: Key = { code: 'Quote', keyCode: 222, easyString: '\\'' };\n    export const INTL_BACKSLASH: Key = { code: 'IntlBackslash', keyCode: 229, easyString: 'intlbackslash' };\n    export const INTL_YEN: Key = { code: 'IntlYen', keyCode: 255, easyString: 'intlyen' };\n\n    export const MAX_KEY_CODE = INTL_YEN.keyCode;\n\n}\n\n/* -------------------- Initialize the static key mappings -------------------- */\n(() => {\n    // Set the default key mappings from the constants in the Key namespace\n    Object.keys(Key).map(prop => Reflect.get(Key, prop)).filter(key => Key.isKey(key)).forEach(key => {\n        CODE_TO_KEY[key.code] = key;\n        KEY_CODE_TO_KEY[key.keyCode] = key;\n        EASY_TO_KEY[key.easyString] = key;\n    });\n\n    // Set additional key mappings\n    CODE_TO_KEY['Numpad0'] = Key.DIGIT0;\n    KEY_CODE_TO_KEY[96] = Key.DIGIT0;\n    CODE_TO_KEY['Numpad1'] = Key.DIGIT1;\n    KEY_CODE_TO_KEY[97] = Key.DIGIT1;\n    CODE_TO_KEY['Numpad2'] = Key.DIGIT2;\n    KEY_CODE_TO_KEY[98] = Key.DIGIT2;\n    CODE_TO_KEY['Numpad3'] = Key.DIGIT3;\n    KEY_CODE_TO_KEY[99] = Key.DIGIT3;\n    CODE_TO_KEY['Numpad4'] = Key.DIGIT4;\n    KEY_CODE_TO_KEY[100] = Key.DIGIT4;\n    CODE_TO_KEY['Numpad5'] = Key.DIGIT5;\n    KEY_CODE_TO_KEY[101] = Key.DIGIT5;\n    CODE_TO_KEY['Numpad6'] = Key.DIGIT6;\n    KEY_CODE_TO_KEY[102] = Key.DIGIT6;\n    CODE_TO_KEY['Numpad7'] = Key.DIGIT7;\n    KEY_CODE_TO_KEY[103] = Key.DIGIT7;\n    CODE_TO_KEY['Numpad8'] = Key.DIGIT8;\n    KEY_CODE_TO_KEY[104] = Key.DIGIT8;\n    CODE_TO_KEY['Numpad9'] = Key.DIGIT9;\n    KEY_CODE_TO_KEY[105] = Key.DIGIT9;\n    CODE_TO_KEY['NumpadEnter'] = Key.ENTER;\n    CODE_TO_KEY['NumpadEqual'] = Key.EQUAL;\n    CODE_TO_KEY['MetaLeft'] = Key.OS_LEFT;   // Chrome, Safari\n    KEY_CODE_TO_KEY[224] = Key.OS_LEFT;      // Firefox on Mac\n    CODE_TO_KEY['MetaRight'] = Key.OS_RIGHT; // Chrome, Safari\n    KEY_CODE_TO_KEY[93] = Key.OS_RIGHT;      // Chrome, Safari, Edge\n    KEY_CODE_TO_KEY[225] = Key.ALT_RIGHT;    // Linux\n    KEY_CODE_TO_KEY[110] = Key.DECIMAL;      // Mac, Windows\n    KEY_CODE_TO_KEY[59] = Key.SEMICOLON;     // Firefox\n    KEY_CODE_TO_KEY[61] = Key.EQUAL;         // Firefox\n    KEY_CODE_TO_KEY[173] = Key.MINUS;        // Firefox\n    KEY_CODE_TO_KEY[226] = Key.BACKSLASH;    // Chrome, Edge on Windows\n    KEY_CODE_TO_KEY[60] = Key.BACKSLASH;     // Firefox on Linux\n\n    // Set the modifier keys\n    MODIFIERS.push(...[Key.ALT_LEFT, Key.ALT_RIGHT, Key.CONTROL_LEFT, Key.CONTROL_RIGHT, Key.OS_LEFT, Key.OS_RIGHT, Key.SHIFT_LEFT, Key.SHIFT_RIGHT]);\n})();\n\nexport type KeysOrKeyCodes = Key | KeyCode | (Key | KeyCode)[];\nexport namespace KeysOrKeyCodes {\n\n    export const toKeyCode = (keyOrKeyCode: Key | KeyCode) =>\n        keyOrKeyCode instanceof KeyCode ? keyOrKeyCode : KeyCode.createKeyCode({ first: keyOrKeyCode });\n\n    export const toKeyCodes = (keysOrKeyCodes: KeysOrKeyCodes) => {\n        if (keysOrKeyCodes instanceof KeyCode) {\n            return [keysOrKeyCodes];\n        } else if (Array.isArray(keysOrKeyCodes)) {\n            return keysOrKeyCodes.slice().map(toKeyCode);\n        }\n        return [toKeyCode(keysOrKeyCodes)];\n    };\n\n}\n","/********************************************************************************\n * Copyright (C) 2019 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\n// Reexporting here for backwards compatibility.\n// Please import from '@theia/core/lib/browser' or '@theia/core/lib/browser/keyboard' instead of this module.\n// This module might be removed in future releases.\nimport { KeySequence, Keystroke, KeyCode, KeyModifier, Key, SpecialCases, KeysOrKeyCodes } from './keyboard/keys';\nexport { KeySequence, Keystroke, KeyCode, KeyModifier, Key, SpecialCases, KeysOrKeyCodes };\n","/********************************************************************************\n * Copyright (C) 2017 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { injectable } from 'inversify';\n\nexport interface LabelIcon {\n    name: string;\n    animation?: string;\n}\n\nexport namespace LabelIcon {\n    export function is(val: object): val is LabelIcon {\n        return 'name' in val;\n    }\n}\n\nexport type LabelPart = string | LabelIcon;\n\n@injectable()\nexport class LabelParser {\n\n    /**\n     * Returns an array with parts of the given text.\n     * These parts are of type LabelPart which can be either a string or a LabelIcon.\n     * For splitting up the giving text the parser follows this rule:\n     * The text gets parsed for the following pattern: $(iconName~iconAnimation).\n     * If the parser finds such pattern a new LabelIcon object\n     * { name: 'iconName', animation: 'iconAnimation'} is added to the returned array.\n     * iconName can be for instance the name of an icon of e.g. FontAwesome and the (optional) iconAnimation\n     * the name of an animation class which must be supported by the particular icon toolkit.\n     *\n     * Every string before, between or after such icon patterns gets also added to the array\n     * before, between or after the related LabelIcon.\n     *\n     * @param text - the label text to parse\n     */\n    parse(text: string): LabelPart[] {\n        const parserArray: LabelPart[] = [];\n        let arrPointer = 0;\n        let potentialIcon = '';\n\n        for (let idx = 0; idx < text.length; idx++) {\n            const char = text.charAt(idx);\n            parserArray[arrPointer] = parserArray[arrPointer] || '';\n            if (potentialIcon === '') {\n                if (char === '$') {\n                    potentialIcon += char;\n                } else {\n                    parserArray[arrPointer] += char;\n                }\n            } else if (potentialIcon === '$') {\n                if (char === '(') {\n                    potentialIcon += char;\n                } else {\n                    parserArray[arrPointer] += potentialIcon + char;\n                    potentialIcon = '';\n                }\n            } else {\n                if (char === ')') {\n                    const iconClassArr = potentialIcon.substring(2, potentialIcon.length).split('~');\n                    if (parserArray[arrPointer] !== '') {\n                        arrPointer++;\n                    }\n                    parserArray[arrPointer] = { name: iconClassArr[0], animation: iconClassArr[1] };\n                    arrPointer++;\n                    potentialIcon = '';\n                } else {\n                    potentialIcon += char;\n                }\n            }\n        }\n\n        if (potentialIcon !== '') {\n            parserArray[arrPointer] += potentialIcon;\n        }\n\n        return parserArray;\n    }\n\n}\n","/********************************************************************************\n * Copyright (C) 2017 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { inject, injectable, named } from 'inversify';\nimport * as fileIcons from 'file-icons-js';\nimport URI from '../common/uri';\nimport { ContributionProvider } from '../common/contribution-provider';\nimport { Prioritizeable } from '../common/types';\nimport { Event, Emitter } from '../common';\nimport { FrontendApplicationContribution } from './frontend-application';\n\n/**\n * @internal don't export it, use `LabelProvider.folderIcon` instead.\n */\nconst DEFAULT_FOLDER_ICON = 'fa fa-folder';\n/**\n * @internal don't export it, use `LabelProvider.fileIcon` instead.\n */\nconst DEFAULT_FILE_ICON = 'fa fa-file';\n\n/**\n * Internal folder icon class for the default (File Icons) theme.\n *\n * @deprecated Use `LabelProvider.folderIcon` to get a folder icon class for the current icon theme.\n */\nexport const FOLDER_ICON = DEFAULT_FOLDER_ICON;\n/**\n * Internal file icon class for the default (File Icons) theme.\n *\n * @deprecated Use `LabelProvider.fileIcon` to get a file icon class for the current icon theme.\n */\nexport const FILE_ICON = DEFAULT_FILE_ICON;\n\nexport const LabelProviderContribution = Symbol('LabelProviderContribution');\nexport interface LabelProviderContribution {\n\n    /**\n     * whether this contribution can handle the given element and with what priority.\n     * All contributions are ordered by the returned number if greater than zero. The highest number wins.\n     * If two or more contributions return the same positive number one of those will be used. It is undefined which one.\n     */\n    canHandle(element: object): number;\n\n    /**\n     * returns an icon class for the given element.\n     */\n    getIcon?(element: object): string | undefined;\n\n    /**\n     * returns a short name for the given element.\n     */\n    getName?(element: object): string | undefined;\n\n    /**\n     * returns a long name for the given element.\n     */\n    getLongName?(element: object): string | undefined;\n\n    /**\n     * Emit when something has changed that may result in this label provider returning a different\n     * value for one or more properties (name, icon etc).\n     */\n    readonly onDidChange?: Event<DidChangeLabelEvent>;\n\n    /**\n     * Check whether the given element is affected by the given change event.\n     * Contributions delegating to the label provider can use this hook\n     * to perfrom a recursive check.\n     */\n    affects?(element: object, event: DidChangeLabelEvent): boolean;\n\n}\n\nexport interface DidChangeLabelEvent {\n    affects(element: object): boolean;\n}\n\nexport interface URIIconReference {\n    kind: 'uriIconReference';\n    id: 'file' | 'folder';\n    uri?: URI\n}\nexport namespace URIIconReference {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    export function is(element: any | undefined): element is URIIconReference {\n        return !!element && typeof element === 'object' && 'kind' in element && element['kind'] === 'uriIconReference';\n    }\n    export function create(id: URIIconReference['id'], uri?: URI): URIIconReference {\n        return { kind: 'uriIconReference', id, uri };\n    }\n}\n\n@injectable()\nexport class DefaultUriLabelProviderContribution implements LabelProviderContribution {\n\n    canHandle(element: object): number {\n        if (element instanceof URI || URIIconReference.is(element)) {\n            return 1;\n        }\n        return 0;\n    }\n\n    getIcon(element: URI | URIIconReference): string {\n        if (URIIconReference.is(element) && element.id === 'folder') {\n            return this.defaultFolderIcon;\n        }\n        const uri = URIIconReference.is(element) ? element.uri : element;\n        const iconClass = uri && this.getFileIcon(uri);\n        return iconClass || this.defaultFileIcon;\n    }\n\n    get defaultFolderIcon(): string {\n        return DEFAULT_FOLDER_ICON;\n    }\n\n    get defaultFileIcon(): string {\n        return DEFAULT_FILE_ICON;\n    }\n\n    protected getFileIcon(uri: URI): string | undefined {\n        const fileIcon = fileIcons.getClassWithColor(uri.displayName);\n        if (!fileIcon) {\n            return undefined;\n        }\n        return fileIcon + ' theia-file-icons-js';\n    }\n\n    getName(element: URI | URIIconReference): string | undefined {\n        const uri = this.getUri(element);\n        return uri && uri.displayName;\n    }\n\n    getLongName(element: URI | URIIconReference): string | undefined {\n        const uri = this.getUri(element);\n        return uri && uri.path.toString();\n    }\n\n    protected getUri(element: URI | URIIconReference): URI | undefined {\n        return URIIconReference.is(element) ? element.uri : element;\n    }\n}\n\n@injectable()\nexport class LabelProvider implements FrontendApplicationContribution {\n\n    protected readonly onDidChangeEmitter = new Emitter<DidChangeLabelEvent>();\n\n    @inject(ContributionProvider) @named(LabelProviderContribution)\n    protected readonly contributionProvider: ContributionProvider<LabelProviderContribution>;\n\n    /**\n     * Start listening to contributions.\n     *\n     * Don't call this method directly!\n     * It's called by the frontend application during initialization.\n     */\n    initialize(): void {\n        const contributions = this.contributionProvider.getContributions();\n        for (const eventContribution of contributions) {\n            if (eventContribution.onDidChange) {\n                eventContribution.onDidChange(event => {\n                    this.onDidChangeEmitter.fire({\n                        // TODO check eventContribution.canHandle as well\n                        affects: element => this.affects(element, event)\n                    });\n                });\n            }\n        }\n    }\n\n    protected affects(element: object, event: DidChangeLabelEvent): boolean {\n        if (event.affects(element)) {\n            return true;\n        }\n        for (const contribution of this.findContribution(element)) {\n            if (contribution.affects && contribution.affects(element, event)) {\n                return true;\n            }\n        }\n        return false;\n    }\n\n    get onDidChange(): Event<DidChangeLabelEvent> {\n        return this.onDidChangeEmitter.event;\n    }\n\n    /**\n     * Return a default file icon for the current icon theme.\n     */\n    get fileIcon(): string {\n        return this.getIcon(URIIconReference.create('file'));\n    }\n\n    /**\n     * Return a default folder icon for the current icon theme.\n     */\n    get folderIcon(): string {\n        return this.getIcon(URIIconReference.create('folder'));\n    }\n\n    getIcon(element: object): string {\n        const contributions = this.findContribution(element);\n        for (const contribution of contributions) {\n            const value = contribution.getIcon && contribution.getIcon(element);\n            if (value === undefined) {\n                continue;\n            }\n            return value;\n        }\n        return '';\n    }\n\n    getName(element: object): string {\n        const contributions = this.findContribution(element);\n        for (const contribution of contributions) {\n            const value = contribution.getName && contribution.getName(element);\n            if (value === undefined) {\n                continue;\n            }\n            return value;\n        }\n        return '<unknown>';\n    }\n\n    getLongName(element: object): string {\n        const contributions = this.findContribution(element);\n        for (const contribution of contributions) {\n            const value = contribution.getLongName && contribution.getLongName(element);\n            if (value === undefined) {\n                continue;\n            }\n            return value;\n        }\n        return '';\n    }\n\n    protected findContribution(element: object): LabelProviderContribution[] {\n        const prioritized = Prioritizeable.prioritizeAllSync(this.contributionProvider.getContributions(), contrib =>\n            contrib.canHandle(element)\n        );\n        return prioritized.map(c => c.value);\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nexport * from './ws-connection-provider';\n","/********************************************************************************\n * Copyright (C) 2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { injectable, interfaces, decorate, unmanaged } from 'inversify';\nimport { createWebSocketConnection, Logger, ConsoleLogger } from 'vscode-ws-jsonrpc/lib';\nimport { ConnectionHandler, JsonRpcProxyFactory, JsonRpcProxy, Emitter, Event } from '../../common';\nimport { WebSocketChannel } from '../../common/messaging/web-socket-channel';\nimport { Endpoint } from '../endpoint';\nimport ReconnectingWebSocket from 'reconnecting-websocket';\n\ndecorate(injectable(), JsonRpcProxyFactory);\ndecorate(unmanaged(), JsonRpcProxyFactory, 0);\n\nexport interface WebSocketOptions {\n    /**\n     * True by default.\n     */\n    reconnecting?: boolean;\n}\n\n@injectable()\nexport class WebSocketConnectionProvider {\n\n    /**\n     * Create a proxy object to remote interface of T type\n     * over a web socket connection for the given path and proxy factory.\n     */\n    static createProxy<T extends object>(container: interfaces.Container, path: string, factory: JsonRpcProxyFactory<T>): JsonRpcProxy<T>;\n    /**\n     * Create a proxy object to remote interface of T type\n     * over a web socket connection for the given path.\n     *\n     * An optional target can be provided to handle\n     * notifications and requests from a remote side.\n     */\n    static createProxy<T extends object>(container: interfaces.Container, path: string, target?: object): JsonRpcProxy<T>;\n    static createProxy<T extends object>(container: interfaces.Container, path: string, arg?: object): JsonRpcProxy<T> {\n        return container.get(WebSocketConnectionProvider).createProxy<T>(path, arg);\n    }\n\n    protected channelIdSeq = 0;\n    protected readonly socket: ReconnectingWebSocket;\n    protected readonly channels = new Map<number, WebSocketChannel>();\n\n    protected readonly onIncomingMessageActivityEmitter: Emitter<void> = new Emitter();\n    public onIncomingMessageActivity: Event<void> = this.onIncomingMessageActivityEmitter.event;\n\n    constructor() {\n        const url = this.createWebSocketUrl(WebSocketChannel.wsPath);\n        const socket = this.createWebSocket(url);\n        socket.onerror = console.error;\n        socket.onclose = ({ code, reason }) => {\n            for (const channel of [...this.channels.values()]) {\n                channel.close(code, reason);\n            }\n        };\n        socket.onmessage = ({ data }) => {\n            const message: WebSocketChannel.Message = JSON.parse(data);\n            const channel = this.channels.get(message.id);\n            if (channel) {\n                channel.handleMessage(message);\n            } else {\n                console.error('The ws channel does not exist', message.id);\n            }\n            this.onIncomingMessageActivityEmitter.fire(undefined);\n        };\n        this.socket = socket;\n    }\n\n    /**\n     * Create a proxy object to remote interface of T type\n     * over a web socket connection for the given path and proxy factory.\n     */\n    createProxy<T extends object>(path: string, factory: JsonRpcProxyFactory<T>): JsonRpcProxy<T>;\n    /**\n     * Create a proxy object to remote interface of T type\n     * over a web socket connection for the given path.\n     *\n     * An optional target can be provided to handle\n     * notifications and requests from a remote side.\n     */\n    createProxy<T extends object>(path: string, target?: object): JsonRpcProxy<T>;\n    createProxy<T extends object>(path: string, arg?: object): JsonRpcProxy<T> {\n        const factory = arg instanceof JsonRpcProxyFactory ? arg : new JsonRpcProxyFactory<T>(arg);\n        this.listen({\n            path,\n            onConnection: c => factory.listen(c)\n        });\n        return factory.createProxy();\n    }\n\n    /**\n     * Install a connection handler for the given path.\n     */\n    listen(handler: ConnectionHandler, options?: WebSocketOptions): void {\n        this.openChannel(handler.path, channel => {\n            const connection = createWebSocketConnection(channel, this.createLogger());\n            connection.onDispose(() => channel.close());\n            handler.onConnection(connection);\n        }, options);\n    }\n\n    openChannel(path: string, handler: (channel: WebSocketChannel) => void, options?: WebSocketOptions): void {\n        if (this.socket.readyState === WebSocket.OPEN) {\n            this.doOpenChannel(path, handler, options);\n        } else {\n            const openChannel = () => {\n                this.socket.removeEventListener('open', openChannel);\n                this.openChannel(path, handler, options);\n            };\n            this.socket.addEventListener('open', openChannel);\n        }\n    }\n\n    protected doOpenChannel(path: string, handler: (channel: WebSocketChannel) => void, options?: WebSocketOptions): void {\n        const id = this.channelIdSeq++;\n        const channel = this.createChannel(id);\n        this.channels.set(id, channel);\n        channel.onClose(() => {\n            if (this.channels.delete(channel.id)) {\n                const { reconnecting } = { reconnecting: true, ...options };\n                if (reconnecting) {\n                    this.openChannel(path, handler, options);\n                }\n            } else {\n                console.error('The ws channel does not exist', channel.id);\n            }\n        });\n        channel.onOpen(() => handler(channel));\n        channel.open(path);\n    }\n\n    protected createChannel(id: number): WebSocketChannel {\n        return new WebSocketChannel(id, content => {\n            if (this.socket.readyState < WebSocket.CLOSING) {\n                this.socket.send(content);\n            }\n        });\n    }\n\n    protected createLogger(): Logger {\n        return new ConsoleLogger();\n    }\n\n    /**\n     * Creates a websocket URL to the current location\n     */\n    protected createWebSocketUrl(path: string): string {\n        const endpoint = new Endpoint({ path });\n        return endpoint.getWebSocketUrl().toString();\n    }\n\n    /**\n     * Creates a web socket for the given url\n     */\n    protected createWebSocket(url: string): ReconnectingWebSocket {\n        return new ReconnectingWebSocket(url, undefined, {\n            maxReconnectionDelay: 10000,\n            minReconnectionDelay: 1000,\n            reconnectionDelayGrowFactor: 1.3,\n            connectionTimeout: 10000,\n            maxRetries: Infinity,\n            debug: false\n        });\n    }\n\n}\n","/********************************************************************************\n * Copyright (C) 2019 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { injectable } from 'inversify';\n\nexport interface MimeAssociation {\n    readonly id: string;\n    readonly filepattern: string;\n}\n\n@injectable()\nexport class MimeService {\n    // should be overridden by an implementation\n    setAssociations(associations: MimeAssociation[]): void {\n        /* no-op by default */\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport URI from '../common/uri';\nimport { MaybeArray } from '../common/types';\nimport { Widget, BaseWidget } from './widgets';\nimport { WidgetOpenHandler, WidgetOpenerOptions } from './widget-open-handler';\n\n/**\n * `Navigatable` provides an access to an URI of an underlying instance of `Resource`.\n */\nexport interface Navigatable {\n    /**\n     * Return an underlying resource URI.\n     */\n    getResourceUri(): URI | undefined;\n    /**\n     * Creates a new URI to which this navigatable should moved based on the given target resource URI.\n     */\n    createMoveToUri(resourceUri: URI): URI | undefined;\n}\n\nexport namespace Navigatable {\n    export function is(arg: Object | undefined): arg is Navigatable {\n        return !!arg && 'getResourceUri' in arg && 'createMoveToUri' in arg;\n    }\n}\n\nexport type NavigatableWidget = BaseWidget & Navigatable;\nexport namespace NavigatableWidget {\n    export function is(arg: Object | undefined): arg is NavigatableWidget {\n        return arg instanceof BaseWidget && Navigatable.is(arg);\n    }\n    export function* getAffected<T extends Widget>(\n        widgets: IterableIterator<T> | ArrayLike<T>,\n        context: MaybeArray<URI>\n    ): IterableIterator<[URI, T & NavigatableWidget]> {\n        const uris = Array.isArray(context) ? context : [context];\n        return get(widgets, resourceUri => uris.some(uri => uri.isEqualOrParent(resourceUri)));\n    }\n    export function* get<T extends Widget>(\n        widgets: IterableIterator<T> | ArrayLike<T>,\n        filter: (resourceUri: URI) => boolean = () => true\n    ): IterableIterator<[URI, T & NavigatableWidget]> {\n        for (const widget of widgets) {\n            if (NavigatableWidget.is(widget)) {\n                const resourceUri = widget.getResourceUri();\n                if (resourceUri && filter(resourceUri)) {\n                    yield [resourceUri, widget];\n                }\n            }\n        }\n    }\n}\n\nexport interface NavigatableWidgetOptions {\n    kind: 'navigatable',\n    uri: string\n}\nexport namespace NavigatableWidgetOptions {\n    export function is(arg: Object | undefined): arg is NavigatableWidgetOptions {\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        return !!arg && 'kind' in arg && (arg as any).kind === 'navigatable';\n    }\n}\n\nexport abstract class NavigatableWidgetOpenHandler<W extends NavigatableWidget> extends WidgetOpenHandler<W> {\n\n    protected createWidgetOptions(uri: URI, options?: WidgetOpenerOptions): NavigatableWidgetOptions {\n        return {\n            kind: 'navigatable',\n            uri: this.serializeUri(uri)\n        };\n    }\n\n    protected serializeUri(uri: URI): string {\n        if (uri.scheme === 'file') {\n            return uri.withoutFragment().normalizePath().toString();\n        } else {\n            return uri.withoutFragment().toString();\n        }\n    }\n\n}\n","/********************************************************************************\n * Copyright (C) 2017 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { named, injectable, inject } from 'inversify';\nimport URI from '../common/uri';\nimport { ContributionProvider, Prioritizeable, MaybePromise } from '../common';\n\nexport interface OpenerOptions {\n}\n\nexport const OpenHandler = Symbol('OpenHandler');\n/**\n * `OpenHandler` should be implemented to provide a new opener.\n */\nexport interface OpenHandler {\n    /**\n     * A unique id of this handler.\n     */\n    readonly id: string;\n    /**\n     * A human-readable name of this handler.\n     */\n    readonly label?: string;\n    /**\n     * A css icon class of this handler.\n     */\n    readonly iconClass?: string;\n    /**\n     * Test whether this handler can open the given URI for given options.\n     * Return a nonzero number if this handler can open; otherwise it cannot.\n     * Never reject.\n     *\n     * A returned value indicating a priority of this handler.\n     */\n    canHandle(uri: URI, options?: OpenerOptions): MaybePromise<number>;\n    /**\n     * Open a widget for the given URI and options.\n     * Resolve to an opened widget or undefined, e.g. if a page is opened.\n     * Never reject if `canHandle` return a positive number; otherwise should reject.\n     */\n    open(uri: URI, options?: OpenerOptions): MaybePromise<object | undefined>;\n}\n\nexport const OpenerService = Symbol('OpenerService');\n/**\n * `OpenerService` provide an access to existing openers.\n */\nexport interface OpenerService {\n    /**\n     * Return all registered openers.\n     * Never reject.\n     */\n    getOpeners(): Promise<OpenHandler[]>;\n    /**\n     * Return all openers able to open the given URI for given options\n     * ordered according their priority.\n     * Never reject.\n     */\n    getOpeners(uri: URI, options?: OpenerOptions): Promise<OpenHandler[]>;\n    /**\n     * Return an opener with the higher priority for the given URI.\n     * Reject if such does not exist.\n     */\n    getOpener(uri: URI, options?: OpenerOptions): Promise<OpenHandler>;\n}\n\nexport async function open(openerService: OpenerService, uri: URI, options?: OpenerOptions): Promise<object | undefined> {\n    const opener = await openerService.getOpener(uri, options);\n    return opener.open(uri, options);\n}\n\n@injectable()\nexport class DefaultOpenerService implements OpenerService {\n\n    constructor(\n        @inject(ContributionProvider) @named(OpenHandler)\n        protected readonly handlersProvider: ContributionProvider<OpenHandler>\n    ) { }\n\n    async getOpener(uri: URI, options?: OpenerOptions): Promise<OpenHandler> {\n        const handlers = await this.prioritize(uri, options);\n        if (handlers.length >= 1) {\n            return handlers[0];\n        }\n        return Promise.reject(new Error(`There is no opener for ${uri}.`));\n    }\n\n    async getOpeners(uri?: URI, options?: OpenerOptions): Promise<OpenHandler[]> {\n        return uri ? this.prioritize(uri, options) : this.getHandlers();\n    }\n\n    protected async prioritize(uri: URI, options?: OpenerOptions): Promise<OpenHandler[]> {\n        const prioritized = await Prioritizeable.prioritizeAll(this.getHandlers(), async handler => {\n            try {\n                return await handler.canHandle(uri, options);\n            } catch {\n                return 0;\n            }\n        });\n        return prioritized.map(p => p.value);\n    }\n\n    protected getHandlers(): OpenHandler[] {\n        return this.handlersProvider.getContributions();\n    }\n\n}\n","/********************************************************************************\n * Copyright (C) 2017 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nexport * from './preference-service';\nexport * from './preference-proxy';\nexport * from './preference-contribution';\nexport * from './preference-provider';\nexport * from './preference-scope';\n","/********************************************************************************\n * Copyright (C) 2019 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { injectable, inject, named, interfaces } from 'inversify';\nimport URI from '../../common/uri';\nimport { ContributionProvider, bindContributionProvider } from '../../common/contribution-provider';\n\nexport const PreferenceConfiguration = Symbol('PreferenceConfiguration');\nexport interface PreferenceConfiguration {\n    name: string;\n}\n\nexport function bindPreferenceConfigurations(bind: interfaces.Bind): void {\n    bindContributionProvider(bind, PreferenceConfiguration);\n    bind(PreferenceConfigurations).toSelf().inSingletonScope();\n}\n\n@injectable()\nexport class PreferenceConfigurations {\n\n    @inject(ContributionProvider) @named(PreferenceConfiguration)\n    protected readonly provider: ContributionProvider<PreferenceConfiguration>;\n\n    /* prefer Theia over VS Code by default */\n    getPaths(): string[] {\n        return ['.theia', '.vscode'];\n    }\n\n    getConfigName(): string {\n        return 'settings';\n    }\n\n    protected sectionNames: string[] | undefined;\n    getSectionNames(): string[] {\n        if (!this.sectionNames) {\n            this.sectionNames = this.provider.getContributions().map(p => p.name);\n        }\n        return this.sectionNames;\n    }\n\n    isSectionName(name: string): boolean {\n        return this.getSectionNames().indexOf(name) !== -1;\n    }\n\n    isSectionUri(configUri: URI | undefined): boolean {\n        return !!configUri && this.isSectionName(this.getName(configUri));\n    }\n\n    isConfigUri(configUri: URI | undefined): boolean {\n        return !!configUri && this.getName(configUri) === this.getConfigName();\n    }\n\n    getName(configUri: URI): string {\n        return configUri.path.name;\n    }\n\n    getPath(configUri: URI): string {\n        return configUri.parent.path.base;\n    }\n\n    createUri(folder: URI, configPath: string = this.getPaths()[0], configName: string = this.getConfigName()): URI {\n        return folder.resolve(configPath).resolve(configName + '.json');\n    }\n\n}\n","/********************************************************************************\n * Copyright (C) 2018 Ericsson and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport * as Ajv from 'ajv';\nimport { inject, injectable, interfaces, named, postConstruct } from 'inversify';\nimport { ContributionProvider, bindContributionProvider, escapeRegExpCharacters, Emitter, Event, Disposable } from '../../common';\nimport { PreferenceScope } from './preference-scope';\nimport { PreferenceProvider, PreferenceProviderDataChange } from './preference-provider';\nimport {\n    PreferenceSchema, PreferenceSchemaProperties, PreferenceDataSchema, PreferenceItem, PreferenceSchemaProperty, PreferenceDataProperty, JsonType\n} from '../../common/preferences/preference-schema';\nimport { FrontendApplicationConfigProvider } from '../frontend-application-config-provider';\nimport { FrontendApplicationConfig } from '@theia/application-package/lib/application-props';\nimport { bindPreferenceConfigurations, PreferenceConfigurations } from './preference-configurations';\nexport { PreferenceSchema, PreferenceSchemaProperties, PreferenceDataSchema, PreferenceItem, PreferenceSchemaProperty, PreferenceDataProperty, JsonType };\nimport { Mutable } from '../../common/types';\n\n/* eslint-disable guard-for-in, @typescript-eslint/no-explicit-any */\n\nexport const PreferenceContribution = Symbol('PreferenceContribution');\nexport interface PreferenceContribution {\n    readonly schema: PreferenceSchema;\n}\n\nexport function bindPreferenceSchemaProvider(bind: interfaces.Bind): void {\n    bindPreferenceConfigurations(bind);\n    bind(PreferenceSchemaProvider).toSelf().inSingletonScope();\n    bindContributionProvider(bind, PreferenceContribution);\n}\n\nexport interface OverridePreferenceName {\n    preferenceName: string\n    overrideIdentifier: string\n}\nexport namespace OverridePreferenceName {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    export function is(arg: any): arg is OverridePreferenceName {\n        return !!arg && typeof arg === 'object' && 'preferenceName' in arg && 'overrideIdentifier' in arg;\n    }\n}\n\nconst OVERRIDE_PROPERTY = '\\\\[(.*)\\\\]$';\nexport const OVERRIDE_PROPERTY_PATTERN = new RegExp(OVERRIDE_PROPERTY);\n\nconst OVERRIDE_PATTERN_WITH_SUBSTITUTION = '\\\\[(${0})\\\\]$';\n\nexport interface FrontendApplicationPreferenceConfig extends FrontendApplicationConfig {\n    preferences: {\n        [preferenceName: string]: any\n    }\n}\nexport namespace FrontendApplicationPreferenceConfig {\n    export function is(config: FrontendApplicationConfig): config is FrontendApplicationPreferenceConfig {\n        return 'preferences' in config && typeof config['preferences'] === 'object';\n    }\n}\n\n@injectable()\nexport class PreferenceSchemaProvider extends PreferenceProvider {\n\n    protected readonly preferences: { [name: string]: any } = {};\n    protected readonly combinedSchema: PreferenceDataSchema = { properties: {}, patternProperties: {} };\n\n    @inject(ContributionProvider) @named(PreferenceContribution)\n    protected readonly preferenceContributions: ContributionProvider<PreferenceContribution>;\n\n    @inject(PreferenceConfigurations)\n    protected readonly configurations: PreferenceConfigurations;\n\n    protected readonly onDidPreferenceSchemaChangedEmitter = new Emitter<void>();\n    readonly onDidPreferenceSchemaChanged: Event<void> = this.onDidPreferenceSchemaChangedEmitter.event;\n    protected fireDidPreferenceSchemaChanged(): void {\n        this.onDidPreferenceSchemaChangedEmitter.fire(undefined);\n    }\n\n    @postConstruct()\n    protected init(): void {\n        this.preferenceContributions.getContributions().forEach(contrib => {\n            this.doSetSchema(contrib.schema);\n        });\n        this.combinedSchema.additionalProperties = false;\n        this._ready.resolve();\n    }\n\n    protected readonly overrideIdentifiers = new Set<string>();\n    registerOverrideIdentifier(overrideIdentifier: string): void {\n        if (this.overrideIdentifiers.has(overrideIdentifier)) {\n            return;\n        }\n        this.overrideIdentifiers.add(overrideIdentifier);\n        this.updateOverridePatternPropertiesKey();\n    }\n\n    protected readonly overridePatternProperties: Required<Pick<PreferenceDataProperty, 'properties' | 'additionalProperties'>> & PreferenceDataProperty = {\n        type: 'object',\n        description: 'Configure editor settings to be overridden for a language.',\n        errorMessage: 'Unknown Identifier. Use language identifiers',\n        properties: {},\n        additionalProperties: false\n    };\n    protected overridePatternPropertiesKey: string | undefined;\n    protected updateOverridePatternPropertiesKey(): void {\n        const oldKey = this.overridePatternPropertiesKey;\n        const newKey = this.computeOverridePatternPropertiesKey();\n        if (oldKey === newKey) {\n            return;\n        }\n        if (oldKey) {\n            delete this.combinedSchema.patternProperties[oldKey];\n        }\n        this.overridePatternPropertiesKey = newKey;\n        if (newKey) {\n            this.combinedSchema.patternProperties[newKey] = this.overridePatternProperties;\n        }\n        this.fireDidPreferenceSchemaChanged();\n    }\n    protected computeOverridePatternPropertiesKey(): string | undefined {\n        let param: string = '';\n        for (const overrideIdentifier of this.overrideIdentifiers.keys()) {\n            if (param.length) {\n                param += '|';\n            }\n            param += new RegExp(escapeRegExpCharacters(overrideIdentifier)).source;\n        }\n        return param.length ? OVERRIDE_PATTERN_WITH_SUBSTITUTION.replace('${0}', param) : undefined;\n    }\n\n    protected doUnsetSchema(changes: PreferenceProviderDataChange[]): PreferenceProviderDataChange[] {\n        const inverseChanges: PreferenceProviderDataChange[] = [];\n        for (const change of changes) {\n            const preferenceName = change.preferenceName;\n            const overridden = this.overriddenPreferenceName(preferenceName);\n            if (overridden) {\n                delete this.overridePatternProperties.properties[`[${overridden.overrideIdentifier}]`];\n                delete this.combinedSchema.properties[`[${overridden.overrideIdentifier}]`];\n            } else {\n                delete this.combinedSchema.properties[preferenceName];\n            }\n            const newValue = change.oldValue;\n            const oldValue = change.newValue;\n            const { scope, domain } = change;\n            const inverseChange: Mutable<PreferenceProviderDataChange> = { preferenceName, oldValue, scope, domain };\n            if (typeof newValue === undefined) {\n                delete this.preferences[preferenceName];\n            } else {\n                inverseChange.newValue = newValue;\n                this.preferences[preferenceName] = newValue;\n            }\n            inverseChanges.push(inverseChange);\n        }\n        return inverseChanges;\n    }\n\n    protected doSetSchema(schema: PreferenceSchema): PreferenceProviderDataChange[] {\n        const ajv = new Ajv();\n        const valid = ajv.validateSchema(schema);\n        if (!valid) {\n            const errors = !!ajv.errors ? ajv.errorsText(ajv.errors) : 'unknown validation error';\n            console.warn('A contributed preference schema has validation issues : ' + errors);\n        }\n        const scope = PreferenceScope.Default;\n        const domain = this.getDomain();\n        const changes: PreferenceProviderDataChange[] = [];\n        const defaultScope = PreferenceSchema.getDefaultScope(schema);\n        const overridable = schema.overridable || false;\n        for (const preferenceName of Object.keys(schema.properties)) {\n            if (this.combinedSchema.properties[preferenceName]) {\n                console.error('Preference name collision detected in the schema for property: ' + preferenceName);\n            } else {\n                const schemaProps = PreferenceDataProperty.fromPreferenceSchemaProperty(schema.properties[preferenceName], defaultScope);\n                if (typeof schemaProps.overridable !== 'boolean' && overridable) {\n                    schemaProps.overridable = true;\n                }\n                if (schemaProps.overridable) {\n                    this.overridePatternProperties.properties[preferenceName] = schemaProps;\n                }\n                this.combinedSchema.properties[preferenceName] = schemaProps;\n\n                const value = schemaProps.defaultValue = this.getDefaultValue(schemaProps, preferenceName);\n                if (this.testOverrideValue(preferenceName, value)) {\n                    for (const overriddenPreferenceName in value) {\n                        const overrideValue = value[overriddenPreferenceName];\n                        const overridePreferenceName = `${preferenceName}.${overriddenPreferenceName}`;\n                        changes.push(this.doSetPreferenceValue(overridePreferenceName, overrideValue, { scope, domain }));\n                    }\n                } else {\n                    changes.push(this.doSetPreferenceValue(preferenceName, value, { scope, domain }));\n                }\n            }\n        }\n        return changes;\n    }\n\n    protected doSetPreferenceValue(preferenceName: string, newValue: any, { scope, domain }: {\n        scope: PreferenceScope,\n        domain?: string[]\n    }): PreferenceProviderDataChange {\n        const oldValue = this.preferences[preferenceName];\n        this.preferences[preferenceName] = newValue;\n        return { preferenceName, oldValue, newValue, scope, domain };\n    }\n\n    /** @deprecated since 0.6.0 pass preferenceName as the second arg */\n    protected getDefaultValue(property: PreferenceItem): any;\n    protected getDefaultValue(property: PreferenceItem, preferenceName: string): any;\n    protected getDefaultValue(property: PreferenceItem, preferenceName?: string): any {\n        const config = FrontendApplicationConfigProvider.get();\n        if (preferenceName && FrontendApplicationPreferenceConfig.is(config) && preferenceName in config.preferences) {\n            return config.preferences[preferenceName];\n        }\n        if (property.defaultValue !== undefined) {\n            return property.defaultValue;\n        }\n        if (property.default !== undefined) {\n            return property.default;\n        }\n        const type = Array.isArray(property.type) ? property.type[0] : property.type;\n        switch (type) {\n            case 'boolean':\n                return false;\n            case 'integer':\n            case 'number':\n                return 0;\n            case 'string':\n                return '';\n            case 'array':\n                return [];\n            case 'object':\n                return {};\n        }\n        // eslint-disable-next-line no-null/no-null\n        return null;\n    }\n\n    getCombinedSchema(): PreferenceDataSchema {\n        return this.combinedSchema;\n    }\n\n    setSchema(schema: PreferenceSchema): Disposable {\n        const changes = this.doSetSchema(schema);\n        if (!changes.length) {\n            return Disposable.NULL;\n        }\n        this.fireDidPreferenceSchemaChanged();\n        this.emitPreferencesChangedEvent(changes);\n        return Disposable.create(() => {\n            const inverseChanges = this.doUnsetSchema(changes);\n            if (!inverseChanges.length) {\n                return;\n            }\n            this.fireDidPreferenceSchemaChanged();\n            this.emitPreferencesChangedEvent(inverseChanges);\n        });\n    }\n\n    getPreferences(): { [name: string]: any } {\n        return this.preferences;\n    }\n\n    async setPreference(): Promise<boolean> {\n        return false;\n    }\n\n    isValidInScope(preferenceName: string, scope: PreferenceScope): boolean {\n        let property;\n        const overridden = this.overriddenPreferenceName(preferenceName);\n        if (overridden) {\n            // try from overridden schema\n            property = this.overridePatternProperties[`[${overridden.overrideIdentifier}]`];\n            property = property && property[overridden.preferenceName];\n            if (!property) {\n                // try from overridden identifier\n                property = this.overridePatternProperties[overridden.preferenceName];\n            }\n            if (!property) {\n                // try from overridden value\n                property = this.combinedSchema.properties[overridden.preferenceName];\n            }\n        } else {\n            property = this.combinedSchema.properties[preferenceName];\n        }\n        return property && property.scope! >= scope;\n    }\n\n    *getPreferenceNames(): IterableIterator<string> {\n        for (const preferenceName in this.combinedSchema.properties) {\n            yield preferenceName;\n            for (const overridePreferenceName of this.getOverridePreferenceNames(preferenceName)) {\n                yield overridePreferenceName;\n            }\n        }\n    }\n\n    *getOverridePreferenceNames(preferenceName: string): IterableIterator<string> {\n        const preference = this.combinedSchema.properties[preferenceName];\n        if (preference && preference.overridable) {\n            for (const overrideIdentifier of this.overrideIdentifiers) {\n                yield this.overridePreferenceName({ preferenceName, overrideIdentifier });\n            }\n        }\n    }\n\n    overridePreferenceName({ preferenceName, overrideIdentifier }: OverridePreferenceName): string {\n        return `[${overrideIdentifier}].${preferenceName}`;\n    }\n    overriddenPreferenceName(name: string): OverridePreferenceName | undefined {\n        const index = name.indexOf('.');\n        if (index === -1) {\n            return undefined;\n        }\n        const matches = name.substr(0, index).match(OVERRIDE_PROPERTY_PATTERN);\n        const overrideIdentifier = matches && matches[1];\n        if (!overrideIdentifier || !this.overrideIdentifiers.has(overrideIdentifier)) {\n            return undefined;\n        }\n        const preferenceName = name.substr(index + 1);\n        return { preferenceName, overrideIdentifier };\n    }\n\n    testOverrideValue(name: string, value: any): value is PreferenceSchemaProperties {\n        return PreferenceSchemaProperties.is(value) && OVERRIDE_PROPERTY_PATTERN.test(name);\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2018 Ericsson and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\n/* eslint-disable @typescript-eslint/no-explicit-any */\n\nimport { injectable } from 'inversify';\nimport { JSONExt, JSONValue } from '@phosphor/coreutils/lib/json';\nimport URI from '../../common/uri';\nimport { Disposable, DisposableCollection, Emitter, Event } from '../../common';\nimport { Deferred } from '../../common/promise-util';\nimport { PreferenceScope } from './preference-scope';\n\nexport interface PreferenceProviderDataChange {\n    readonly preferenceName: string;\n    readonly newValue?: any;\n    readonly oldValue?: any;\n    readonly scope: PreferenceScope;\n    readonly domain?: string[];\n}\n\nexport interface PreferenceProviderDataChanges {\n    [preferenceName: string]: PreferenceProviderDataChange\n}\n\nexport interface PreferenceResolveResult<T> {\n    configUri?: URI\n    value?: T\n}\n\n@injectable()\nexport abstract class PreferenceProvider implements Disposable {\n\n    protected readonly onDidPreferencesChangedEmitter = new Emitter<PreferenceProviderDataChanges>();\n    readonly onDidPreferencesChanged: Event<PreferenceProviderDataChanges> = this.onDidPreferencesChangedEmitter.event;\n\n    protected readonly toDispose = new DisposableCollection();\n\n    protected readonly _ready = new Deferred<void>();\n\n    constructor() {\n        this.toDispose.push(this.onDidPreferencesChangedEmitter);\n    }\n\n    dispose(): void {\n        this.toDispose.dispose();\n    }\n\n    /**\n     * Informs the listeners that one or more preferences of this provider are changed.\n     * The listeners are able to find what was changed from the emitted event.\n     */\n    protected emitPreferencesChangedEvent(changes: PreferenceProviderDataChanges | PreferenceProviderDataChange[]): void {\n        if (Array.isArray(changes)) {\n            const prefChanges: PreferenceProviderDataChanges = {};\n            for (const change of changes) {\n                prefChanges[change.preferenceName] = change;\n            }\n            this.onDidPreferencesChangedEmitter.fire(prefChanges);\n        } else {\n            this.onDidPreferencesChangedEmitter.fire(changes);\n        }\n    }\n\n    get<T>(preferenceName: string, resourceUri?: string): T | undefined {\n        return this.resolve<T>(preferenceName, resourceUri).value;\n    }\n\n    resolve<T>(preferenceName: string, resourceUri?: string): PreferenceResolveResult<T> {\n        const value = this.getPreferences(resourceUri)[preferenceName];\n        if (value !== undefined) {\n            return {\n                value,\n                configUri: this.getConfigUri(resourceUri)\n            };\n        }\n        return {};\n    }\n\n    abstract getPreferences(resourceUri?: string): { [p: string]: any };\n\n    abstract setPreference(key: string, value: any, resourceUri?: string): Promise<boolean>;\n\n    /**\n     * Resolved when the preference provider is ready to provide preferences\n     * It should be resolved by subclasses.\n     */\n    get ready(): Promise<void> {\n        return this._ready.promise;\n    }\n\n    /**\n     * undefined if all belongs\n     */\n    getDomain(): string[] | undefined {\n        return undefined;\n    }\n\n    /**\n     * undefined if cannot be provided for the given resource uri\n     */\n    getConfigUri(resourceUri?: string): URI | undefined {\n        return undefined;\n    }\n\n    static merge(source: JSONValue | undefined, target: JSONValue): JSONValue {\n        if (source === undefined || !JSONExt.isObject(source)) {\n            return JSONExt.deepCopy(target);\n        }\n        if (JSONExt.isPrimitive(target)) {\n            return {};\n        }\n        for (const key of Object.keys(target)) {\n            const value = (target as any)[key];\n            if (key in source) {\n                if (JSONExt.isObject(source[key]) && JSONExt.isObject(value)) {\n                    this.merge(source[key], value);\n                    continue;\n                }\n            }\n            source[key] = JSONExt.deepCopy(value);\n        }\n        return source;\n    }\n\n}\n","/********************************************************************************\n * Copyright (C) 2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\n/* eslint-disable @typescript-eslint/no-explicit-any */\n\nimport { Disposable, Event } from '../../common';\nimport { PreferenceService } from './preference-service';\nimport { PreferenceSchema, OverridePreferenceName } from './preference-contribution';\nimport { PreferenceScope } from './preference-scope';\n\nexport interface PreferenceChangeEvent<T> {\n    readonly preferenceName: keyof T;\n    readonly newValue?: T[keyof T];\n    readonly oldValue?: T[keyof T];\n    affects(resourceUri?: string, overrideIdentifier?: string): boolean;\n}\n\nexport interface PreferenceEventEmitter<T> {\n    readonly onPreferenceChanged: Event<PreferenceChangeEvent<T>>;\n    readonly ready: Promise<void>;\n}\n\nexport interface PreferenceRetrieval<T> {\n    get<K extends keyof T>(preferenceName: K | {\n        preferenceName: K,\n        overrideIdentifier?: string\n    }, defaultValue?: T[K], resourceUri?: string): T[K];\n}\n\nexport type PreferenceProxy<T> = Readonly<T> & Disposable & PreferenceEventEmitter<T> & PreferenceRetrieval<T>;\nexport interface PreferenceProxyOptions {\n    prefix?: string;\n    resourceUri?: string;\n    overrideIdentifier?: string;\n    style?: 'flat' | 'deep' | 'both';\n}\n\nexport function createPreferenceProxy<T>(preferences: PreferenceService, schema: PreferenceSchema, options?: PreferenceProxyOptions): PreferenceProxy<T> {\n    const opts = options || {};\n    const prefix = opts.prefix || '';\n    const style = opts.style || 'flat';\n    const isDeep = style === 'deep' || style === 'both';\n    const isFlat = style === 'both' || style === 'flat';\n    const onPreferenceChanged = (listener: (e: PreferenceChangeEvent<T>) => any, thisArgs?: any, disposables?: Disposable[]) => preferences.onPreferencesChanged(changes => {\n        for (const key of Object.keys(changes)) {\n            const e = changes[key];\n            const overridden = preferences.overriddenPreferenceName(e.preferenceName);\n            const preferenceName: any = overridden ? overridden.preferenceName : e.preferenceName;\n            if (preferenceName.startsWith(prefix) && (!overridden || !opts.overrideIdentifier || overridden.overrideIdentifier === opts.overrideIdentifier)) {\n                if (schema.properties[preferenceName]) {\n                    const { newValue, oldValue } = e;\n                    listener({\n                        newValue, oldValue, preferenceName,\n                        affects: (resourceUri, overrideIdentifier) => {\n                            if (overrideIdentifier !== undefined) {\n                                if (overridden && overridden.overrideIdentifier !== overrideIdentifier) {\n                                    return false;\n                                }\n                            }\n                            return e.affects(resourceUri);\n                        }\n                    });\n                }\n            }\n        }\n    }, thisArgs, disposables);\n\n    const unsupportedOperation = (_: any, __: string) => {\n        throw new Error('Unsupported operation');\n    };\n\n    const getValue: PreferenceRetrieval<any>['get'] = (arg, defaultValue, resourceUri) => {\n        const preferenceName = OverridePreferenceName.is(arg) ?\n            preferences.overridePreferenceName(arg) :\n            <string>arg;\n        return preferences.get(preferenceName, defaultValue, resourceUri || opts.resourceUri);\n    };\n\n    const ownKeys: () => string[] = () => {\n        const properties = [];\n        for (const p of Object.keys(schema.properties)) {\n            if (p.startsWith(prefix)) {\n                const idx = p.indexOf('.', prefix.length);\n                if (idx !== -1 && isDeep) {\n                    const pre = p.substr(prefix.length, idx - prefix.length);\n                    if (properties.indexOf(pre) === -1) {\n                        properties.push(pre);\n                    }\n                }\n                const prop = p.substr(prefix.length);\n                if (isFlat || prop.indexOf('.') === -1) {\n                    properties.push(prop);\n                }\n            }\n        }\n        return properties;\n    };\n\n    const set: (target: any, prop: string, value: any, receiver: any) => boolean = (_, property: string | symbol | number, value: any) => {\n        if (typeof property !== 'string') {\n            throw new Error(`unexpected property: ${String(property)}`);\n        }\n        if (style === 'deep' && property.indexOf('.') !== -1) {\n            return false;\n        }\n        const fullProperty = prefix ? prefix + property : property;\n        if (schema.properties[fullProperty]) {\n            preferences.set(fullProperty, value, PreferenceScope.Default);\n            return true;\n        }\n        const newPrefix = fullProperty + '.';\n        for (const p of Object.keys(schema.properties)) {\n            if (p.startsWith(newPrefix)) {\n                const subProxy: { [k: string]: any } = createPreferenceProxy(preferences, schema, {\n                    prefix: newPrefix,\n                    resourceUri: opts.resourceUri,\n                    overrideIdentifier: opts.overrideIdentifier,\n                    style\n                });\n                for (const k of Object.keys(value)) {\n                    subProxy[k] = value[k];\n                }\n            }\n        }\n        return false;\n    };\n\n    const get: (target: any, prop: string) => any = (_, property: string | symbol | number) => {\n        if (typeof property !== 'string') {\n            throw new Error(`unexpected property: ${String(property)}`);\n        }\n        const fullProperty = prefix ? prefix + property : property;\n        if (isFlat || property.indexOf('.') === -1) {\n            if (schema.properties[fullProperty]) {\n                let value;\n                if (opts.overrideIdentifier) {\n                    value = preferences.get(preferences.overridePreferenceName({\n                        overrideIdentifier: opts.overrideIdentifier,\n                        preferenceName: fullProperty\n                    }), undefined, opts.resourceUri);\n                }\n                if (value === undefined) {\n                    value = preferences.get(fullProperty, undefined, opts.resourceUri);\n                }\n                return value;\n            }\n        }\n        if (property === 'onPreferenceChanged') {\n            return onPreferenceChanged;\n        }\n        if (property === 'dispose') {\n            return () => { /* do nothing */ };\n        }\n        if (property === 'ready') {\n            return preferences.ready;\n        }\n        if (property === 'get') {\n            return getValue;\n        }\n        if (property === 'toJSON') {\n            return toJSON();\n        }\n        if (isDeep) {\n            const newPrefix = fullProperty + '.';\n            for (const p of Object.keys(schema.properties)) {\n                if (p.startsWith(newPrefix)) {\n                    return createPreferenceProxy(preferences, schema, { prefix: newPrefix, resourceUri: opts.resourceUri, overrideIdentifier: opts.overrideIdentifier, style });\n                }\n            }\n        }\n        return undefined;\n    };\n\n    const toJSON = () => {\n        const result: any = {};\n        for (const k of ownKeys()) {\n            result[k] = get(undefined, k);\n        }\n        return result;\n    };\n\n    return new Proxy({}, {\n        get,\n        ownKeys,\n        getOwnPropertyDescriptor: (_, property: string) => {\n            if (ownKeys().indexOf(property) !== -1) {\n                return {\n                    enumerable: true,\n                    configurable: true\n                };\n            }\n            return {};\n        },\n        set,\n        deleteProperty: unsupportedOperation,\n        defineProperty: unsupportedOperation\n    });\n}\n","/********************************************************************************\n * Copyright (C) 2019 Ericsson and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { PreferenceScope } from '../../common/preferences/preference-scope';\nexport { PreferenceScope };\n","/********************************************************************************\n * Copyright (C) 2018 Ericsson and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\n/* eslint-disable @typescript-eslint/no-explicit-any */\n\nimport { injectable, inject, postConstruct } from 'inversify';\nimport { Event, Emitter, DisposableCollection, Disposable, deepFreeze } from '../../common';\nimport { Deferred } from '../../common/promise-util';\nimport { PreferenceProvider, PreferenceProviderDataChange, PreferenceProviderDataChanges, PreferenceResolveResult } from './preference-provider';\nimport { PreferenceSchemaProvider, OverridePreferenceName } from './preference-contribution';\nimport URI from '../../common/uri';\nimport { PreferenceScope } from './preference-scope';\nimport { PreferenceConfigurations } from './preference-configurations';\n\nexport { PreferenceScope };\n\nexport interface PreferenceChange {\n    readonly preferenceName: string;\n    readonly newValue?: any;\n    readonly oldValue?: any;\n    readonly scope: PreferenceScope;\n    affects(resourceUri?: string): boolean;\n}\n\nexport class PreferenceChangeImpl implements PreferenceChange {\n    constructor(\n        private change: PreferenceProviderDataChange\n    ) { }\n\n    get preferenceName(): string {\n        return this.change.preferenceName;\n    }\n    get newValue(): string {\n        return this.change.newValue;\n    }\n    get oldValue(): string {\n        return this.change.oldValue;\n    }\n    get scope(): PreferenceScope {\n        return this.change.scope;\n    }\n\n    // TODO add tests\n    affects(resourceUri?: string): boolean {\n        const resourcePath = resourceUri && new URI(resourceUri).path;\n        const domain = this.change.domain;\n        return !resourcePath || !domain || domain.some(uri => new URI(uri).path.relativity(resourcePath) >= 0);\n    }\n}\n\nexport interface PreferenceChanges {\n    [preferenceName: string]: PreferenceChange\n}\n\nexport const PreferenceService = Symbol('PreferenceService');\nexport interface PreferenceService extends Disposable {\n    readonly ready: Promise<void>;\n    get<T>(preferenceName: string): T | undefined;\n    get<T>(preferenceName: string, defaultValue: T): T;\n    get<T>(preferenceName: string, defaultValue: T, resourceUri?: string): T;\n    get<T>(preferenceName: string, defaultValue?: T, resourceUri?: string): T | undefined;\n    set(preferenceName: string, value: any, scope?: PreferenceScope, resourceUri?: string): Promise<void>;\n    onPreferenceChanged: Event<PreferenceChange>;\n    onPreferencesChanged: Event<PreferenceChanges>;\n\n    inspect<T>(preferenceName: string, resourceUri?: string): {\n        preferenceName: string,\n        defaultValue: T | undefined,\n        globalValue: T | undefined, // User Preference\n        workspaceValue: T | undefined, // Workspace Preference\n        workspaceFolderValue: T | undefined // Folder Preference\n    } | undefined;\n\n    overridePreferenceName(options: OverridePreferenceName): string;\n    overriddenPreferenceName(preferenceName: string): OverridePreferenceName | undefined;\n\n    resolve<T>(preferenceName: string, defaultValue?: T, resourceUri?: string): PreferenceResolveResult<T>;\n}\n\n/**\n * We cannot load providers directly in the case if they depend on `PreferenceService` somehow.\n * It allows to load them lazilly after DI is configured.\n */\nexport const PreferenceProviderProvider = Symbol('PreferenceProviderProvider');\nexport type PreferenceProviderProvider = (scope: PreferenceScope, uri?: URI) => PreferenceProvider;\n\n@injectable()\nexport class PreferenceServiceImpl implements PreferenceService {\n\n    protected readonly onPreferenceChangedEmitter = new Emitter<PreferenceChange>();\n    readonly onPreferenceChanged = this.onPreferenceChangedEmitter.event;\n\n    protected readonly onPreferencesChangedEmitter = new Emitter<PreferenceChanges>();\n    readonly onPreferencesChanged = this.onPreferencesChangedEmitter.event;\n\n    protected readonly toDispose = new DisposableCollection(this.onPreferenceChangedEmitter, this.onPreferencesChangedEmitter);\n\n    @inject(PreferenceSchemaProvider)\n    protected readonly schema: PreferenceSchemaProvider;\n\n    @inject(PreferenceProviderProvider)\n    protected readonly providerProvider: PreferenceProviderProvider;\n\n    @inject(PreferenceConfigurations)\n    protected readonly configurations: PreferenceConfigurations;\n\n    protected readonly preferenceProviders = new Map<PreferenceScope, PreferenceProvider>();\n\n    protected async initializeProviders(): Promise<void> {\n        try {\n            for (const scope of PreferenceScope.getScopes()) {\n                const provider = this.providerProvider(scope);\n                this.preferenceProviders.set(scope, provider);\n                this.toDispose.push(provider.onDidPreferencesChanged(changes =>\n                    this.reconcilePreferences(changes)\n                ));\n                await provider.ready;\n            }\n            this._ready.resolve();\n        } catch (e) {\n            this._ready.reject(e);\n        }\n    }\n\n    @postConstruct()\n    protected init(): void {\n        this.toDispose.push(Disposable.create(() => this._ready.reject(new Error('preference service is disposed'))));\n        this.onPreferenceChanged.maxListeners = 64;\n        this.onPreferencesChanged.maxListeners = 64;\n        this.initializeProviders();\n    }\n\n    dispose(): void {\n        this.toDispose.dispose();\n    }\n\n    protected readonly _ready = new Deferred<void>();\n    get ready(): Promise<void> {\n        return this._ready.promise;\n    }\n\n    protected reconcilePreferences(changes: PreferenceProviderDataChanges): void {\n        const changesToEmit: PreferenceChanges = {};\n        const acceptChange = (change: PreferenceProviderDataChange) =>\n            this.getAffectedPreferenceNames(change, preferenceName =>\n                changesToEmit[preferenceName] = new PreferenceChangeImpl({ ...change, preferenceName })\n            );\n\n        for (const preferenceName of Object.keys(changes)) {\n            let change = changes[preferenceName];\n            if (change.newValue === undefined) {\n                const overridden = this.overriddenPreferenceName(change.preferenceName);\n                if (overridden) {\n                    change = {\n                        ...change, newValue: this.doGet(overridden.preferenceName)\n                    };\n                }\n            }\n            if (this.schema.isValidInScope(preferenceName, PreferenceScope.Folder)) {\n                acceptChange(change);\n                continue;\n            }\n            for (const scope of PreferenceScope.getReversedScopes()) {\n                if (this.schema.isValidInScope(preferenceName, scope)) {\n                    const provider = this.getProvider(scope);\n                    if (provider) {\n                        const value = provider.get(preferenceName);\n                        if (scope > change.scope && value !== undefined) {\n                            // preference defined in a more specific scope\n                            break;\n                        } else if (scope === change.scope && change.newValue !== undefined) {\n                            // preference is changed into something other than `undefined`\n                            acceptChange(change);\n                        } else if (scope < change.scope && change.newValue === undefined && value !== undefined) {\n                            // preference is changed to `undefined`, use the value from a more general scope\n                            change = {\n                                ...change,\n                                newValue: value,\n                                scope\n                            };\n                            acceptChange(change);\n                        }\n                    }\n                } else if (change.newValue === undefined && change.scope === PreferenceScope.Default) {\n                    // preference is removed\n                    acceptChange(change);\n                    break;\n                }\n            }\n        }\n\n        // emit the changes\n        const changedPreferenceNames = Object.keys(changesToEmit);\n        if (changedPreferenceNames.length > 0) {\n            this.onPreferencesChangedEmitter.fire(changesToEmit);\n        }\n        changedPreferenceNames.forEach(preferenceName => this.onPreferenceChangedEmitter.fire(changesToEmit[preferenceName]));\n    }\n    protected getAffectedPreferenceNames(change: PreferenceProviderDataChange, accept: (affectedPreferenceName: string) => void): void {\n        accept(change.preferenceName);\n        for (const overridePreferenceName of this.schema.getOverridePreferenceNames(change.preferenceName)) {\n            if (!this.doHas(overridePreferenceName)) {\n                accept(overridePreferenceName);\n            }\n        }\n    }\n\n    protected getProvider(scope: PreferenceScope): PreferenceProvider | undefined {\n        return this.preferenceProviders.get(scope);\n    }\n\n    has(preferenceName: string, resourceUri?: string): boolean {\n        return this.get(preferenceName, undefined, resourceUri) !== undefined;\n    }\n\n    get<T>(preferenceName: string): T | undefined;\n    get<T>(preferenceName: string, defaultValue: T): T;\n    get<T>(preferenceName: string, defaultValue: T, resourceUri: string): T;\n    get<T>(preferenceName: string, defaultValue?: T, resourceUri?: string): T | undefined;\n    get<T>(preferenceName: string, defaultValue?: T, resourceUri?: string): T | undefined {\n        return this.resolve<T>(preferenceName, defaultValue, resourceUri).value;\n    }\n\n    resolve<T>(preferenceName: string, defaultValue?: T, resourceUri?: string): {\n        configUri?: URI,\n        value?: T\n    } {\n        const { value, configUri } = this.doResolve(preferenceName, defaultValue, resourceUri);\n        if (value === undefined) {\n            const overridden = this.overriddenPreferenceName(preferenceName);\n            if (overridden) {\n                return this.doResolve(overridden.preferenceName, defaultValue, resourceUri);\n            }\n        }\n        return { value, configUri };\n    }\n\n    async set(preferenceName: string, value: any, scope: PreferenceScope | undefined, resourceUri?: string): Promise<void> {\n        const resolvedScope = scope !== undefined ? scope : (!resourceUri ? PreferenceScope.Workspace : PreferenceScope.Folder);\n        if (resolvedScope === PreferenceScope.User && this.configurations.isSectionName(preferenceName.split('.', 1)[0])) {\n            throw new Error(`Unable to write to User Settings because ${preferenceName} does not support for global scope.`);\n        }\n        if (resolvedScope === PreferenceScope.Folder && !resourceUri) {\n            throw new Error('Unable to write to Folder Settings because no resource is provided.');\n        }\n        const provider = this.getProvider(resolvedScope);\n        if (provider && await provider.setPreference(preferenceName, value, resourceUri)) {\n            return;\n        }\n        throw new Error(`Unable to write to ${PreferenceScope.getScopeNames(resolvedScope)[0]} Settings.`);\n    }\n\n    getBoolean(preferenceName: string): boolean | undefined;\n    getBoolean(preferenceName: string, defaultValue: boolean): boolean;\n    getBoolean(preferenceName: string, defaultValue: boolean, resourceUri: string): boolean;\n    getBoolean(preferenceName: string, defaultValue?: boolean, resourceUri?: string): boolean | undefined {\n        const value = resourceUri ? this.get(preferenceName, defaultValue, resourceUri) : this.get(preferenceName, defaultValue);\n        // eslint-disable-next-line no-null/no-null\n        return value !== null && value !== undefined ? !!value : defaultValue;\n    }\n\n    getString(preferenceName: string): string | undefined;\n    getString(preferenceName: string, defaultValue: string): string;\n    getString(preferenceName: string, defaultValue: string, resourceUri: string): string;\n    getString(preferenceName: string, defaultValue?: string, resourceUri?: string): string | undefined {\n        const value = resourceUri ? this.get(preferenceName, defaultValue, resourceUri) : this.get(preferenceName, defaultValue);\n        // eslint-disable-next-line no-null/no-null\n        if (value === null || value === undefined) {\n            return defaultValue;\n        }\n        return value.toString();\n    }\n\n    getNumber(preferenceName: string): number | undefined;\n    getNumber(preferenceName: string, defaultValue: number): number;\n    getNumber(preferenceName: string, defaultValue: number, resourceUri: string): number;\n    getNumber(preferenceName: string, defaultValue?: number, resourceUri?: string): number | undefined {\n        const value = resourceUri ? this.get(preferenceName, defaultValue, resourceUri) : this.get(preferenceName, defaultValue);\n        // eslint-disable-next-line no-null/no-null\n        if (value === null || value === undefined) {\n            return defaultValue;\n        }\n        if (typeof value === 'number') {\n            return value;\n        }\n        return Number(value);\n    }\n\n    inspect<T>(preferenceName: string, resourceUri?: string): {\n        preferenceName: string,\n        defaultValue: T | undefined,\n        globalValue: T | undefined, // User Preference\n        workspaceValue: T | undefined, // Workspace Preference\n        workspaceFolderValue: T | undefined // Folder Preference\n    } | undefined {\n        const defaultValue = this.inspectInScope<T>(preferenceName, PreferenceScope.Default, resourceUri);\n        const globalValue = this.inspectInScope<T>(preferenceName, PreferenceScope.User, resourceUri);\n        const workspaceValue = this.inspectInScope<T>(preferenceName, PreferenceScope.Workspace, resourceUri);\n        const workspaceFolderValue = this.inspectInScope<T>(preferenceName, PreferenceScope.Folder, resourceUri);\n\n        return { preferenceName, defaultValue, globalValue, workspaceValue, workspaceFolderValue };\n    }\n    protected inspectInScope<T>(preferenceName: string, scope: PreferenceScope, resourceUri?: string): T | undefined {\n        const value = this.doInspectInScope<T>(preferenceName, scope, resourceUri);\n        if (value === undefined) {\n            const overridden = this.overriddenPreferenceName(preferenceName);\n            if (overridden) {\n                return this.doInspectInScope(overridden.preferenceName, scope, resourceUri);\n            }\n        }\n        return value;\n    }\n\n    overridePreferenceName(options: OverridePreferenceName): string {\n        return this.schema.overridePreferenceName(options);\n    }\n    overriddenPreferenceName(preferenceName: string): OverridePreferenceName | undefined {\n        return this.schema.overriddenPreferenceName(preferenceName);\n    }\n\n    protected doHas(preferenceName: string, resourceUri?: string): boolean {\n        return this.doGet(preferenceName, undefined, resourceUri) !== undefined;\n    }\n    protected doInspectInScope<T>(preferenceName: string, scope: PreferenceScope, resourceUri?: string): T | undefined {\n        const provider = this.getProvider(scope);\n        return provider && provider.get<T>(preferenceName, resourceUri);\n    }\n    protected doGet<T>(preferenceName: string, defaultValue?: T, resourceUri?: string): T | undefined {\n        return this.doResolve(preferenceName, defaultValue, resourceUri).value;\n    }\n    protected doResolve<T>(preferenceName: string, defaultValue?: T, resourceUri?: string): PreferenceResolveResult<T> {\n        const result: PreferenceResolveResult<T> = {};\n        for (const scope of PreferenceScope.getScopes()) {\n            if (this.schema.isValidInScope(preferenceName, scope)) {\n                const provider = this.getProvider(scope);\n                if (provider) {\n                    const { configUri, value } = provider.resolve<T>(preferenceName, resourceUri);\n                    if (value !== undefined) {\n                        result.configUri = configUri;\n                        result.value = PreferenceProvider.merge(result.value as any, value as any) as any;\n                    }\n                }\n            }\n        }\n        return {\n            configUri: result.configUri,\n            value: result.value !== undefined ? deepFreeze(result.value) : defaultValue\n        };\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2019 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { ProgressLocationEvent } from './progress-location-service';\nimport { DisposableCollection, Disposable } from '../common';\nimport { Event } from '../common/event';\n\nexport class ProgressBar implements Disposable {\n\n    protected readonly toDispose = new DisposableCollection();\n    dispose(): void {\n        this.toDispose.dispose();\n    }\n\n    protected progressBar: HTMLDivElement;\n\n    constructor(protected options: ProgressBar.Options, onProgress: Event<ProgressLocationEvent>) {\n        this.progressBar = document.createElement('div');\n        this.progressBar.className = 'theia-progress-bar';\n        this.progressBar.style.display = 'none';\n        const progressBarContainer = document.createElement('div');\n        progressBarContainer.className = 'theia-progress-bar-container';\n        progressBarContainer.append(this.progressBar);\n        const { container, insertMode } = this.options;\n        if (insertMode === 'prepend') {\n            container.prepend(progressBarContainer);\n        } else {\n            container.append(progressBarContainer);\n        }\n        this.toDispose.pushAll([\n            Disposable.create(() => progressBarContainer.remove()),\n            onProgress(event => this.onProgress(event))\n        ]);\n    }\n\n    protected onProgress(event: ProgressLocationEvent): void {\n        if (this.toDispose.disposed) {\n            return;\n        }\n        this.setVisible(event.show);\n    }\n\n    protected setVisible(visible: boolean): void {\n        this.progressBar.style.display = visible ? 'block' : 'none';\n    }\n\n}\nexport namespace ProgressBar {\n    export interface Options {\n        container: HTMLElement;\n        insertMode: 'append' | 'prepend';\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2019 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { injectable } from 'inversify';\nimport { CancellationToken } from '../common/cancellation';\nimport { ProgressClient } from '../common/progress-service-protocol';\nimport { ProgressMessage, ProgressUpdate } from '../common/message-service-protocol';\nimport { Deferred } from '../common/promise-util';\nimport { Event, Emitter } from '../common/event';\nimport throttle = require('lodash.throttle');\n\nexport interface ProgressLocationEvent {\n    message?: string;\n    show: boolean;\n}\n\n@injectable()\nexport class ProgressLocationService implements ProgressClient {\n\n    protected emitters = new Map<string, Emitter<ProgressLocationEvent>[]>();\n\n    onProgress(locationId: string): Event<ProgressLocationEvent> {\n        const emitter = this.addEmitter(locationId);\n        return emitter.event;\n    }\n    protected addEmitter(locationId: string): Emitter<ProgressLocationEvent> {\n        const emitter = new Emitter<ProgressLocationEvent>();\n        const list = this.emitters.get(locationId) || [];\n        list.push(emitter);\n        this.emitters.set(locationId, list);\n        return emitter;\n    }\n\n    protected readonly progressByLocation = new Map<string, Set<string>>();\n\n    async showProgress(progressId: string, message: ProgressMessage, cancellationToken: CancellationToken): Promise<string | undefined> {\n        const locationId = this.getLocationId(message);\n        const result = new Deferred<string | undefined>();\n        cancellationToken.onCancellationRequested(() => {\n            this.processEvent(progressId, locationId, 'done');\n            result.resolve(ProgressMessage.Cancel);\n        });\n        this.processEvent(progressId, locationId, 'start');\n        return result.promise;\n    }\n    protected processEvent(progressId: string, locationId: string, event: 'start' | 'done'): void {\n        const progressSet = this.progressByLocation.get(locationId) || new Set<string>();\n        if (event === 'start') {\n            progressSet.add(progressId);\n        } else {\n            progressSet.delete(progressId);\n        }\n        this.progressByLocation.set(locationId, progressSet);\n        const show = !!progressSet.size;\n        this.fireEvent(locationId, show);\n    }\n    protected readonly fireEvent = throttle((locationId: string, show: boolean) => {\n        let emitters = this.emitters.get(locationId);\n        if (!emitters) {\n            emitters = [ this.addEmitter(locationId) ];\n        }\n        emitters.forEach(e => e.fire({ show }));\n    }, 250);\n\n    protected getLocationId(message: ProgressMessage): string {\n        return message.options && message.options.location || 'unknownLocation';\n    }\n\n    async reportProgress(progressId: string, update: ProgressUpdate, message: ProgressMessage, cancellationToken: CancellationToken): Promise<void> {\n        /* NOOP */\n    }\n\n}\n","/********************************************************************************\n * Copyright (C) 2017 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nexport * from './quick-open-model';\nexport * from './quick-open-action-provider';\nexport * from './quick-open-service';\nexport * from './quick-pick-service';\nexport * from './quick-input-service';\nexport * from './quick-command-service';\nexport * from './quick-command-contribution';\nexport * from './quick-open-frontend-contribution';\nexport * from './prefix-quick-open-service';\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { injectable, inject } from 'inversify';\nimport { QuickOpenModel, QuickOpenItem, QuickOpenMode } from './quick-open-model';\nimport { QuickOpenService, QuickOpenOptions } from './quick-open-service';\nimport { Disposable, DisposableCollection } from '../../common/disposable';\nimport { ILogger } from '../../common/logger';\nimport { MaybePromise } from '../../common/types';\nimport { QuickOpenActionProvider } from './quick-open-action-provider';\nimport { QuickTitleBar } from './quick-title-bar';\n\nexport const QuickOpenContribution = Symbol('QuickOpenContribution');\n/**\n * The quick open contribution should be implemented to register custom quick open handler.\n */\nexport interface QuickOpenContribution {\n    registerQuickOpenHandlers(handlers: QuickOpenHandlerRegistry): void;\n}\n\n/**\n * A handler allows to call it's quick open model when\n * the handler's prefix is typed in the quick open widget.\n */\nexport interface QuickOpenHandler {\n\n    /**\n     * Prefix to trigger this handler's model.\n     */\n    readonly prefix: string;\n\n    /**\n     * A human-readable description of this handler.\n     */\n    readonly description: string;\n\n    /**\n     * Called immediately when the user's input in\n     * the quick open widget matches this handler's prefix.\n     * Allows to initialize the model with some initial data.\n     */\n    init?(): MaybePromise<void>;\n\n    /**\n     * A model that should be used by the quick open widget when this handler's prefix is used.\n     */\n    getModel(): QuickOpenModel;\n\n    /**\n     * Returns the options which should be used for the quick open widget.\n     * Note, that the `prefix` and `skipPrefix` options are ignored and will be overridden.\n     * The `placeholder` option makes sense for a default handler only since it's used without a prefix in quick open widget.\n     */\n    getOptions(): QuickOpenOptions;\n}\n\n@injectable()\nexport class QuickOpenHandlerRegistry implements Disposable {\n\n    protected readonly handlers: Map<string, QuickOpenHandler> = new Map();\n    protected readonly toDispose = new DisposableCollection();\n    protected defaultHandler: QuickOpenHandler | undefined;\n\n    @inject(ILogger)\n    protected readonly logger: ILogger;\n\n    /**\n     * Register the given handler.\n     * Do nothing if a handler is already registered.\n     * @param handler the handler to register\n     * @param defaultHandler default means that a handler is used when the user's\n     * input in the quick open widget doesn't match any of known prefixes\n     */\n    registerHandler(handler: QuickOpenHandler, defaultHandler: boolean = false): Disposable {\n        if (this.handlers.has(handler.prefix)) {\n            this.logger.warn(`A handler with prefix ${handler.prefix} is already registered.`);\n            return Disposable.NULL;\n        }\n        this.handlers.set(handler.prefix, handler);\n        const disposable = {\n            dispose: () => this.handlers.delete(handler.prefix)\n        };\n        this.toDispose.push(disposable);\n        if (defaultHandler) {\n            this.defaultHandler = handler;\n        }\n        return disposable;\n    }\n\n    getDefaultHandler(): QuickOpenHandler | undefined {\n        return this.defaultHandler;\n    }\n\n    isDefaultHandler(handler: QuickOpenHandler): boolean {\n        return handler === this.getDefaultHandler();\n    }\n\n    /**\n     * Return all registered handlers.\n     */\n    getHandlers(): QuickOpenHandler[] {\n        return [...this.handlers.values()];\n    }\n\n    /**\n     * Return a handler that matches the given text or the default handler if none.\n     */\n    getHandlerOrDefault(text: string): QuickOpenHandler | undefined {\n        for (const handler of this.handlers.values()) {\n            if (text.startsWith(handler.prefix)) {\n                return handler;\n            }\n        }\n        return this.getDefaultHandler();\n    }\n\n    dispose(): void {\n        this.toDispose.dispose();\n    }\n}\n\n/** Prefix-based quick open service. */\n@injectable()\nexport class PrefixQuickOpenService {\n\n    @inject(QuickOpenHandlerRegistry)\n    protected readonly handlers: QuickOpenHandlerRegistry;\n\n    @inject(QuickOpenService)\n    protected readonly quickOpenService: QuickOpenService;\n\n    @inject(QuickTitleBar)\n    protected readonly quickTitleBar: QuickTitleBar;\n\n    /**\n     * Opens a quick open widget with the model that handles the known prefixes.\n     * @param prefix string that may contain a prefix of some of the known quick open handlers.\n     * A default quick open handler will be called if the provided string doesn't match any.\n     * An empty quick open will be opened if there's no default handler registered.\n     */\n    open(prefix: string): void {\n        const handler = this.handlers.getHandlerOrDefault(prefix);\n        this.setCurrentHandler(prefix, handler);\n    }\n\n    protected toDisposeCurrent = new DisposableCollection();\n    protected currentHandler: QuickOpenHandler | undefined;\n\n    protected async setCurrentHandler(prefix: string, handler: QuickOpenHandler | undefined): Promise<void> {\n        if (handler !== this.currentHandler) {\n            this.toDisposeCurrent.dispose();\n            this.currentHandler = handler;\n            this.toDisposeCurrent.push(Disposable.create(() => {\n                const closingHandler = handler && handler.getOptions().onClose;\n                if (closingHandler) {\n                    closingHandler(true);\n                }\n            }));\n        }\n        if (!handler) {\n            this.doOpen();\n            return;\n        }\n        if (handler.init) {\n            await handler.init();\n        }\n        let optionsPrefix = prefix;\n        if (this.handlers.isDefaultHandler(handler) && prefix.startsWith(handler.prefix)) {\n            optionsPrefix = prefix.substr(handler.prefix.length);\n        }\n        const skipPrefix = this.handlers.isDefaultHandler(handler) ? 0 : handler.prefix.length;\n        const handlerOptions = handler.getOptions();\n        this.doOpen({\n            prefix: optionsPrefix,\n            placeholder: \"Type '?' to get help on the actions you can take from here\",\n            skipPrefix,\n            ...handlerOptions\n        });\n    }\n\n    protected doOpen(options?: QuickOpenOptions): void {\n        if (this.quickTitleBar.isAttached) {\n            this.quickTitleBar.hide();\n        }\n        this.quickOpenService.open({\n            onType: (lookFor, acceptor) => this.onType(lookFor, acceptor)\n        }, options);\n    }\n\n    protected onType(lookFor: string, acceptor: (items: QuickOpenItem[], actionProvider?: QuickOpenActionProvider | undefined) => void): void {\n        const handler = this.handlers.getHandlerOrDefault(lookFor);\n        if (handler === undefined) {\n            const items: QuickOpenItem[] = [];\n            items.push(new QuickOpenItem({\n                label: lookFor.length === 0 ? 'No default handler is registered' : `No handlers matches the prefix ${lookFor} and no default handler is registered.`\n            }));\n            acceptor(items);\n        } else if (handler !== this.currentHandler) {\n            this.setCurrentHandler(lookFor, handler);\n        } else {\n            const handlerModel = handler.getModel();\n            const searchValue = this.handlers.isDefaultHandler(handler) ? lookFor : lookFor.substr(handler.prefix.length);\n            handlerModel.onType(searchValue, (items, actionProvider) => acceptor(items, actionProvider));\n        }\n    }\n\n}\n\n@injectable()\nexport class HelpQuickOpenHandler implements QuickOpenHandler, QuickOpenContribution {\n\n    readonly prefix: string = '?';\n    readonly description: string = '';\n    protected items: QuickOpenItem[];\n\n    @inject(QuickOpenHandlerRegistry)\n    protected readonly handlers: QuickOpenHandlerRegistry;\n\n    @inject(PrefixQuickOpenService)\n    protected readonly quickOpenService: PrefixQuickOpenService;\n\n    init(): void {\n        this.items = this.handlers.getHandlers()\n            .filter(handler => handler.prefix !== this.prefix)\n            .sort((a, b) => this.comparePrefix(a.prefix, b.prefix))\n            .map(handler => new QuickOpenItem({\n                label: handler.prefix,\n                description: handler.description,\n                run: (mode: QuickOpenMode) => {\n                    if (mode !== QuickOpenMode.OPEN) {\n                        return false;\n                    }\n                    this.quickOpenService.open(handler.prefix);\n                    return false;\n                }\n            }));\n\n        if (this.items.length === 0) {\n            this.items.push(new QuickOpenItem({\n                label: 'No handlers registered',\n                run: () => false\n            }));\n        }\n    }\n\n    getModel(): QuickOpenModel {\n        return {\n            onType: (lookFor: string, acceptor: (items: QuickOpenItem[]) => void) => {\n                acceptor(this.items);\n            }\n        };\n    }\n\n    getOptions(): QuickOpenOptions {\n        return {};\n    }\n\n    registerQuickOpenHandlers(handlers: QuickOpenHandlerRegistry): void {\n        handlers.registerHandler(this);\n    }\n\n    /**\n     * Compare two prefixes.\n     *\n     * @param a {string} first prefix.\n     * @param b {string} second prefix.\n     */\n    protected comparePrefix(a: string, b: string): number {\n        return a.toLowerCase().localeCompare(b.toLowerCase());\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2017 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { injectable, inject } from 'inversify';\nimport { Command, CommandRegistry, CommandContribution, MenuContribution, MenuModelRegistry } from '../../common';\nimport { KeybindingRegistry, KeybindingContribution } from '../keybinding';\nimport { PrefixQuickOpenService, QuickOpenHandlerRegistry } from './prefix-quick-open-service';\nimport { CommonMenus } from '../common-frontend-contribution';\n\nexport const quickCommand: Command = {\n    id: 'workbench.action.showCommands'\n};\n\nexport const CLEAR_COMMAND_HISTORY: Command = {\n    id: 'clear.command.history',\n    label: 'Clear Command History'\n};\n\n@injectable()\nexport class QuickCommandFrontendContribution implements CommandContribution, KeybindingContribution, MenuContribution {\n\n    @inject(PrefixQuickOpenService)\n    protected readonly quickOpenService: PrefixQuickOpenService;\n\n    @inject(QuickOpenHandlerRegistry) protected readonly quickOpenHandlerRegistry: QuickOpenHandlerRegistry;\n\n    registerCommands(commands: CommandRegistry): void {\n        commands.registerCommand(quickCommand, {\n            execute: () => this.quickOpenService.open('>')\n        });\n        commands.registerCommand(CLEAR_COMMAND_HISTORY, {\n            execute: () => commands.clearCommandHistory(),\n        });\n    }\n\n    registerMenus(menus: MenuModelRegistry): void {\n        menus.registerMenuAction(CommonMenus.VIEW_PRIMARY, {\n            commandId: quickCommand.id,\n            label: 'Find Command...'\n        });\n    }\n\n    registerKeybindings(keybindings: KeybindingRegistry): void {\n        keybindings.registerKeybinding({\n            command: quickCommand.id,\n            keybinding: 'f1'\n        });\n        keybindings.registerKeybinding({\n            command: quickCommand.id,\n            keybinding: 'ctrlcmd+shift+p'\n        });\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2017 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { inject, injectable } from 'inversify';\nimport { Command, CommandRegistry, Disposable } from '../../common';\nimport { Keybinding, KeybindingRegistry } from '../keybinding';\nimport { QuickOpenModel, QuickOpenItem, QuickOpenMode, QuickOpenGroupItem, QuickOpenGroupItemOptions } from './quick-open-model';\nimport { QuickOpenOptions } from './quick-open-service';\nimport { QuickOpenContribution, QuickOpenHandlerRegistry, QuickOpenHandler } from './prefix-quick-open-service';\nimport { ContextKeyService } from '../context-key-service';\nimport { CLEAR_COMMAND_HISTORY } from './quick-command-contribution';\nimport { CorePreferences } from '../core-preferences';\n\n@injectable()\nexport class QuickCommandService implements QuickOpenModel, QuickOpenHandler {\n\n    private items: QuickOpenItem[];\n\n    readonly prefix: string = '>';\n\n    readonly description: string = 'Quick Command';\n\n    // The list of exempted commands not to be displayed in the recently used list.\n    readonly exemptedCommands: Command[] = [\n        CLEAR_COMMAND_HISTORY,\n    ];\n\n    @inject(CommandRegistry)\n    protected readonly commands: CommandRegistry;\n\n    @inject(KeybindingRegistry)\n    protected readonly keybindings: KeybindingRegistry;\n\n    @inject(ContextKeyService)\n    protected readonly contextKeyService: ContextKeyService;\n\n    @inject(CorePreferences)\n    protected readonly corePreferences: CorePreferences;\n\n    protected readonly contexts = new Map<string, string[]>();\n    pushCommandContext(commandId: string, when: string): Disposable {\n        const contexts = this.contexts.get(commandId) || [];\n        contexts.push(when);\n        this.contexts.set(commandId, contexts);\n        return Disposable.create(() => {\n            const index = contexts.indexOf(when);\n            if (index !== -1) {\n                contexts.splice(index, 1);\n            }\n        });\n    }\n\n    /** Initialize this quick open model with the commands. */\n    init(): void {\n        // let's compute the items here to do it in the context of the currently activeElement\n        this.items = [];\n        const { recent, other } = this.getCommands();\n        this.items.push(\n            ...recent.map((command, index) =>\n                new CommandQuickOpenItem(\n                    command,\n                    this.commands,\n                    this.keybindings,\n                    {\n                        groupLabel: index === 0 ? 'recently used' : '',\n                        showBorder: false,\n                    }\n                )\n            ),\n            ...other.map((command, index) =>\n                new CommandQuickOpenItem(\n                    command,\n                    this.commands,\n                    this.keybindings,\n                    {\n                        groupLabel: recent.length <= 0 ? '' : index === 0 ? 'other commands' : '',\n                        showBorder: recent.length <= 0 ? false : index === 0 ? true : false,\n                    }\n                )\n            ),\n        );\n    }\n\n    public onType(lookFor: string, acceptor: (items: QuickOpenItem[]) => void): void {\n        acceptor(this.items);\n    }\n\n    getModel(): QuickOpenModel {\n        return this;\n    }\n\n    getOptions(): QuickOpenOptions {\n        return { fuzzyMatchLabel: true };\n    }\n\n    /**\n     * Get the list of recently used and other commands.\n     *\n     * @returns the list of recently used commands and other commands.\n     */\n    private getCommands(): { recent: Command[], other: Command[] } {\n\n        // Get the list of recent commands.\n        const recentCommands: Command[] = this.commands.recent;\n\n        // Get the list of all valid commands.\n        const allCommands: Command[] = this.getValidCommands(this.commands.commands);\n\n        // Get the max history limit.\n        const limit: number = this.corePreferences['workbench.commandPalette.history'];\n\n        // Build the list of recent commands.\n        const rCommands: Command[] = [];\n        recentCommands.forEach((r: Command) => {\n            // Opt out of displaying the recently used list.\n            if (limit === 0) {\n                return;\n            }\n            // Determine if the command is exempted from display.\n            const exempted: boolean = this.exemptedCommands.some((c: Command) => Command.equals(r, c));\n            // Determine if the command currently exists in the list of all available commands.\n            const exists: boolean = allCommands.some((c: Command) => Command.equals(r, c));\n            // Add the recently used item to the list.\n            if (exists && !exempted && rCommands.length < limit) {\n                rCommands.push(r);\n            }\n        });\n\n        // Build the list of other commands.\n        const oCommands: Command[] = [];\n        allCommands.forEach((a: Command) => {\n            const exists = rCommands.some((c: Command) => Command.equals(a, c));\n            // If the command does not exist in the recently used list, add it to the other list.\n            if (!exists) { oCommands.push(a); }\n        });\n\n        // Normalize the list of recent commands.\n        const recent: Command[] = this.normalize(rCommands);\n\n        // Normalize, and sort the list of other commands.\n        const other: Command[] = this.sort(\n            this.normalize(oCommands)\n        );\n\n        return { recent, other };\n    }\n\n    /**\n     * Normalizes a list of commands.\n     * Normalization includes obtaining commands that have labels and are visible.\n     *\n     * @param commands the list of commands.\n     * @returns the list of normalized commands.\n     */\n    private normalize(commands: Command[]): Command[] {\n        return commands.filter((a: Command) => a.label && this.commands.isVisible(a.id));\n    }\n\n    /**\n     * Sorts a list of commands alphabetically.\n     *\n     * @param commands the list of commands.\n     * @returns the list of sorted commands.\n     */\n    private sort(commands: Command[]): Command[] {\n        return commands.sort((a: Command, b: Command) => Command.compareCommands(a, b));\n    }\n\n    /**\n     * Get the list of valid commands.\n     *\n     * @param commands the list of raw commands.\n     * @returns the list of valid commands.\n     */\n    private getValidCommands(raw: Command[]): Command[] {\n        const valid: Command[] = [];\n        raw.forEach((command: Command) => {\n            if (command.label) {\n                const contexts = this.contexts.get(command.id);\n                if (!contexts || contexts.some(when => this.contextKeyService.match(when))) {\n                    valid.push(command);\n                }\n            }\n        });\n        return valid;\n    }\n\n}\n\nexport class CommandQuickOpenItem extends QuickOpenGroupItem {\n\n    private activeElement: HTMLElement;\n    private hidden: boolean;\n\n    constructor(\n        protected readonly command: Command,\n        protected readonly commands: CommandRegistry,\n        protected readonly keybindings: KeybindingRegistry,\n        protected readonly commandOptions?: QuickOpenGroupItemOptions,\n    ) {\n        super(commandOptions);\n        this.activeElement = window.document.activeElement as HTMLElement;\n        this.hidden = !this.commands.getActiveHandler(this.command.id);\n    }\n\n    getLabel(): string {\n        return (this.command.category)\n            ? `${this.command.category}: ` + this.command.label!\n            : this.command.label!;\n    }\n\n    isHidden(): boolean {\n        return this.hidden;\n    }\n\n    getIconClass(): string | undefined {\n        const toggledHandler = this.commands.getToggledHandler(this.command.id);\n        if (toggledHandler) {\n            return 'fa fa-check';\n        }\n        return super.getIconClass();\n    }\n\n    getKeybinding(): Keybinding | undefined {\n        const bindings = this.keybindings.getKeybindingsForCommand(this.command.id);\n        return bindings ? bindings[0] : undefined;\n    }\n\n    run(mode: QuickOpenMode): boolean {\n        if (mode !== QuickOpenMode.OPEN) {\n            return false;\n        }\n        // allow the quick open widget to close itself\n        setTimeout(() => {\n            // reset focus on the previously active element.\n            this.activeElement.focus({ preventScroll: true });\n            this.commands.executeCommand(this.command.id);\n        }, 50);\n        return true;\n    }\n}\n\n@injectable()\nexport class CommandQuickOpenContribution implements QuickOpenContribution {\n\n    @inject(QuickCommandService)\n    protected readonly commandQuickOpenHandler: QuickCommandService;\n\n    registerQuickOpenHandlers(handlers: QuickOpenHandlerRegistry): void {\n        handlers.registerHandler(this.commandQuickOpenHandler);\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { inject, injectable } from 'inversify';\nimport { QuickOpenService } from './quick-open-service';\nimport { QuickOpenItem, QuickOpenMode } from './quick-open-model';\nimport { Deferred } from '../../common/promise-util';\nimport { MaybePromise } from '../../common/types';\nimport { MessageType } from '../../common/message-service-protocol';\nimport { Emitter, Event } from '../../common/event';\nimport { QuickTitleBar } from './quick-title-bar';\nimport { QuickTitleButton } from '../../common/quick-open-model';\n\nexport interface QuickInputOptions {\n\n    /**\n     * Show the progress indicator if true\n     */\n    busy?: boolean\n\n    /**\n     * Allow user input\n     */\n    enabled?: boolean;\n\n    /**\n     * Current step count\n     */\n    step?: number | undefined\n\n    /**\n     * The title of the input\n     */\n    title?: string | undefined\n\n    /**\n     * Total number of steps\n     */\n    totalSteps?: number | undefined\n\n    /**\n     * Buttons that are displayed on the title panel\n     */\n    buttons?: ReadonlyArray<QuickTitleButton>\n\n    /**\n     * Text for when there is a problem with the current input value\n     */\n    validationMessage?: string | undefined;\n\n    /**\n     * The prefill value.\n     */\n    value?: string;\n\n    /**\n     * The text to display under the input box.\n     */\n    prompt?: string;\n\n    /**\n     * The place holder in the input box to guide the user what to type.\n     */\n    placeHolder?: string;\n\n    /**\n     * Set to `true` to show a password prompt that will not show the typed value.\n     */\n    password?: boolean;\n\n    /**\n     * Set to `true` to keep the input box open when focus moves to another part of the editor or to another window.\n     */\n    ignoreFocusOut?: boolean;\n\n    /**\n     * Selection of the prefilled [`value`](#InputBoxOptions.value). Defined as tuple of two number where the\n     * first is the inclusive start index and the second the exclusive end index. When `undefined` the whole\n     * word will be selected, when empty (start equals end) only the cursor will be set,\n     * otherwise the defined range will be selected.\n     */\n    valueSelection?: [number, number]\n\n    /**\n     * An optional function that will be called to validate input and to give a hint\n     * to the user.\n     *\n     * @param value The current value of the input box.\n     * @return Return `undefined`, or the empty string when 'value' is valid.\n     */\n    validateInput?(value: string): MaybePromise<string | undefined>;\n}\n\n@injectable()\nexport class QuickInputService {\n\n    @inject(QuickOpenService)\n    protected readonly quickOpenService: QuickOpenService;\n\n    @inject(QuickTitleBar)\n    protected readonly quickTitleBar: QuickTitleBar;\n\n    open(options: QuickInputOptions): Promise<string | undefined> {\n        const result = new Deferred<string | undefined>();\n        const prompt = this.createPrompt(options.prompt);\n        let label = prompt;\n        let currentText = '';\n        const validateInput = options && options.validateInput;\n        let initial: boolean = true;\n\n        this.quickOpenService.open({\n            onType: async (lookFor, acceptor) => {\n                let error: string | undefined;\n                if (initial) {\n                    initial = false;\n                } else {\n                    this.onDidChangeValueEmitter.fire(lookFor);\n                    error = validateInput && lookFor !== undefined ? await validateInput(lookFor) : undefined;\n                }\n                label = error || prompt;\n                if (error) {\n                    this.quickOpenService.showDecoration(MessageType.Error);\n                } else {\n                    this.quickOpenService.hideDecoration();\n                }\n                acceptor([new QuickOpenItem({\n                    label,\n                    run: mode => {\n                        if (!error && mode === QuickOpenMode.OPEN) {\n                            result.resolve(currentText);\n                            this.onDidAcceptEmitter.fire(undefined);\n                            this.quickTitleBar.hide();\n                            return true;\n                        }\n                        return false;\n                    }\n                })]);\n                currentText = lookFor;\n            }\n        }, {\n            prefix: options.value,\n            placeholder: options.placeHolder,\n            password: options.password,\n            ignoreFocusOut: options.ignoreFocusOut,\n            enabled: options.enabled,\n            valueSelection: options.valueSelection,\n            onClose: () => {\n                result.resolve(undefined);\n                this.quickTitleBar.hide();\n            }\n        });\n\n        if (options && this.quickTitleBar.shouldShowTitleBar(options.title, options.step)) {\n            this.quickTitleBar.attachTitleBar(this.quickOpenService.widgetNode, options.title, options.step, options.totalSteps, options.buttons);\n        }\n\n        return result.promise;\n    }\n\n    refresh(): void {\n        this.quickOpenService.refresh();\n    }\n\n    protected defaultPrompt = \"Press 'Enter' to confirm your input or 'Escape' to cancel\";\n    protected createPrompt(prompt?: string): string {\n        return prompt ? `${prompt} (${this.defaultPrompt})` : this.defaultPrompt;\n    }\n\n    readonly onDidAcceptEmitter: Emitter<void> = new Emitter();\n    get onDidAccept(): Event<void> {\n        return this.onDidAcceptEmitter.event;\n    }\n\n    readonly onDidChangeValueEmitter: Emitter<string> = new Emitter();\n    get onDidChangeValue(): Event<string> {\n        return this.onDidChangeValueEmitter.event;\n    }\n\n}\n","/********************************************************************************\n * Copyright (C) 2019 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { injectable } from 'inversify';\nimport { QuickOpenItem } from '../../common/quick-open-model';\nimport * as common from '../../common/quick-open-model';\n\n/**\n * @deprecated import from `@theia/core/lib/common/quick-open-model` instead\n */\nexport type QuickOpenActionProvider = common.QuickOpenActionProvider;\n\n/**\n * @deprecated import from `@theia/core/lib/common/quick-open-model` instead\n */\nexport type QuickOpenActionOptions = common.QuickOpenActionOptions;\n\n/**\n * @deprecated import from `@theia/core/lib/common/quick-open-model` instead\n */\nexport type QuickOpenAction = common.QuickOpenAction;\n\n@injectable()\nexport abstract class QuickOpenBaseAction implements QuickOpenAction {\n    constructor(protected options: QuickOpenActionOptions) {\n    }\n\n    get id(): string {\n        return this.options.id;\n    }\n\n    get label(): string {\n        return this.options.label || '';\n    }\n\n    set label(value: string) {\n        this.options.label = value;\n    }\n\n    get tooltip(): string {\n        return this.options.tooltip || '';\n    }\n\n    set tooltip(value: string) {\n        this.options.tooltip = value;\n    }\n\n    get class(): string | undefined {\n        return this.options.class || '';\n    }\n\n    set class(value: string | undefined) {\n        this.options.class = value;\n    }\n\n    get enabled(): boolean {\n        return this.options.enabled || true;\n    }\n\n    set enabled(value: boolean) {\n        this.options.enabled = value;\n    }\n\n    get checked(): boolean {\n        return this.options.checked || false;\n    }\n\n    set checked(value: boolean) {\n        this.options.checked = value;\n    }\n\n    get radio(): boolean {\n        return this.options.radio || false;\n    }\n\n    set radio(value: boolean) {\n        this.options.radio = value;\n    }\n\n    abstract run(item?: QuickOpenItem): PromiseLike<void>;\n\n    dispose(): void { }\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { injectable, inject, named } from 'inversify';\nimport { ContributionProvider } from '../../common';\nimport { FrontendApplicationContribution } from '../frontend-application';\nimport { QuickOpenContribution, QuickOpenHandlerRegistry } from './prefix-quick-open-service';\n\n@injectable()\nexport class QuickOpenFrontendContribution implements FrontendApplicationContribution {\n\n    @inject(QuickOpenHandlerRegistry)\n    protected readonly quickOpenHandlerRegistry: QuickOpenHandlerRegistry;\n\n    @inject(ContributionProvider) @named(QuickOpenContribution)\n    protected readonly contributionProvider: ContributionProvider<QuickOpenContribution>;\n\n    onStart(): void {\n        this.contributionProvider.getContributions().forEach(contrib =>\n            contrib.registerQuickOpenHandlers(this.quickOpenHandlerRegistry)\n        );\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2017 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport * as common from '../../common/quick-open-model';\n\n/**\n * @deprecated import from `@theia/core/lib/common/quick-open-model` instead\n */\nexport type Highlight = common.Highlight;\n\n/**\n * @deprecated import from `@theia/core/lib/common/quick-open-model` instead\n */\nexport type QuickOpenItemOptions = common.QuickOpenItemOptions;\n\n/**\n * @deprecated import from `@theia/core/lib/common/quick-open-model` instead\n */\nexport type QuickOpenGroupItemOptions = common.QuickOpenGroupItemOptions;\n\n/**\n * @deprecated import from `@theia/core/lib/common/quick-open-model` instead\n */\nexport { QuickOpenItem, QuickOpenGroupItem, QuickOpenMode } from '../../common/quick-open-model';\n\n/**\n * @deprecated import from `@theia/core/lib/common/quick-open-model` instead\n */\nexport type QuickOpenModel = common.QuickOpenModel;\n","/********************************************************************************\n * Copyright (C) 2017 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { injectable } from 'inversify';\nimport { QuickOpenModel } from './quick-open-model';\nimport { MessageType } from '../../common/message-service-protocol';\nimport * as common from '../../common/quick-open-service';\n\n/**\n * @deprecated import from `@theia/core/lib/common/quick-open-service` instead\n */\nexport { QuickOpenOptions } from '../../common/quick-open-service';\n\n@injectable()\nexport class QuickOpenService {\n    /**\n     * It should be implemented by an extension, e.g. by the monaco extension.\n     */\n    open(model: QuickOpenModel, options?: common.QuickOpenOptions): void { }\n    hide(reason?: common.QuickOpenHideReason): void { }\n    showDecoration(type: MessageType): void { }\n    hideDecoration(): void { }\n    refresh(): void { }\n\n    /**\n     * Dom node of the QuickOpenWidget\n     */\n    widgetNode: HTMLElement;\n}\n","/********************************************************************************\n * Copyright (C) 2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport * as common from '../../common/quick-pick-service';\n/**\n * @deprecated import from `@theia/core/lib/common/quick-pick-service` instead\n */\nexport const QuickPickService = common.QuickPickService;\n/**\n * @deprecated import from `@theia/core/lib/common/quick-pick-service` instead\n */\nexport type QuickPickService = common.QuickPickService;\n/**\n * @deprecated import from `@theia/core/lib/common/quick-pick-service` instead\n */\nexport type QuickPickOptions = common.QuickPickOptions;\n/**\n * @deprecated import from `@theia/core/lib/common/quick-pick-service` instead\n */\nexport type QuickPickItem<T> = common.QuickPickItem<T>;\n/**\n * @deprecated import from `@theia/core/lib/common/quick-pick-service` instead\n */\nexport type QuickPickSeparator = common.QuickPickSeparator;\n/**\n * @deprecated import from `@theia/core/lib/common/quick-pick-service` instead\n */\nexport type QuickPickValue<T> = common.QuickPickValue<T>;\n","/********************************************************************************\n * Copyright (C) 2019 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { Emitter, Event } from '../../common/event';\nimport { injectable } from 'inversify';\nimport { QuickTitleButton, QuickTitleButtonSide } from '../../common/quick-open-model';\n\n@injectable()\nexport class QuickTitleBar {\n\n    private readonly onDidTriggerButtonEmitter: Emitter<QuickTitleButton>;\n    private _isAttached: boolean;\n\n    private titleElement: HTMLElement;\n    private titleBarContainer: HTMLElement;\n    private attachedNode: HTMLElement | undefined;\n\n    private _title: string | undefined;\n    private _step: number | undefined;\n    private _totalSteps: number | undefined;\n    private _buttons: ReadonlyArray<QuickTitleButton>;\n\n    private tabIndex = 2; // Keep track of the tabIndex for the buttons\n\n    constructor() {\n        this.titleElement = document.createElement('div');\n        this.titleElement.className = QuickTitleBar.Styles.QUICK_TITLE_HEADER;\n\n        this.onDidTriggerButtonEmitter = new Emitter();\n    }\n\n    get onDidTriggerButton(): Event<QuickTitleButton> {\n        return this.onDidTriggerButtonEmitter.event;\n    }\n\n    get isAttached(): boolean {\n        return this._isAttached;\n    }\n\n    set isAttached(isAttached: boolean) {\n        this._isAttached = isAttached;\n    }\n\n    set title(title: string | undefined) {\n        this._title = title;\n        this.updateInnerTitleText();\n    }\n\n    get title(): string | undefined {\n        return this._title;\n    }\n\n    set step(step: number | undefined) {\n        this._step = step;\n        this.updateInnerTitleText();\n    }\n\n    get step(): number | undefined {\n        return this._step;\n    }\n\n    set totalSteps(totalSteps: number | undefined) {\n        this._totalSteps = totalSteps;\n        this.updateInnerTitleText();\n    }\n\n    get totalSteps(): number | undefined {\n        return this._totalSteps;\n    }\n\n    set buttons(buttons: ReadonlyArray<QuickTitleButton> | undefined) {\n        if (buttons === undefined) {\n            this._buttons = [];\n            return;\n        }\n\n        this._buttons = buttons;\n    }\n\n    get buttons(): ReadonlyArray<QuickTitleButton> | undefined {\n        return this._buttons;\n    }\n\n    private updateInnerTitleText(): void {\n        let innerTitle = '';\n\n        if (this.title) {\n            innerTitle = this.title + ' ';\n        }\n\n        if (this.step && this.totalSteps) {\n            innerTitle += `(${this.step}/${this.totalSteps})`;\n        } else if (this.step) {\n            innerTitle += this.step;\n        }\n\n        this.titleElement.innerText = innerTitle;\n    }\n\n    // Left buttons are for the buttons dervied from QuickInputButtons\n    private getLeftButtons(): ReadonlyArray<QuickTitleButton> {\n        if (this._buttons === undefined || this._buttons.length === 0) {\n            return [];\n        }\n        return this._buttons.filter(btn => btn.side === QuickTitleButtonSide.LEFT);\n    }\n\n    private getRightButtons(): ReadonlyArray<QuickTitleButton> {\n        if (this._buttons === undefined || this._buttons.length === 0) {\n            return [];\n        }\n        return this._buttons.filter(btn => btn.side === QuickTitleButtonSide.RIGHT);\n    }\n\n    private createButtonElements(buttons: ReadonlyArray<QuickTitleButton>): HTMLSpanElement[] {\n        return buttons.map(btn => {\n            const spanElement = document.createElement('span');\n            spanElement.className = QuickTitleBar.Styles.QUICK_TITLE_BUTTON;\n            spanElement.tabIndex = 0;\n            if (btn.iconClass) {\n                spanElement.classList.add(...btn.iconClass.split(' '));\n            }\n\n            if (btn.icon !== '') {\n                spanElement.style.backgroundImage = `url(\\'${btn.icon}\\')`;\n            }\n\n            spanElement.classList.add('icon');\n            spanElement.tabIndex = this.tabIndex;\n            spanElement.title = btn.tooltip ? btn.tooltip : '';\n            spanElement.onclick = () => {\n                this.onDidTriggerButtonEmitter.fire(btn);\n            };\n            spanElement.onkeyup = event => {\n                if (event.code === 'Enter') {\n                    spanElement.click();\n                }\n            };\n            this.tabIndex += 1;\n            return spanElement;\n        });\n    }\n\n    private createTitleBarDiv(): HTMLDivElement {\n        const div = document.createElement('div');\n        div.className = QuickTitleBar.Styles.QUICK_TITLE_CONTAINER;\n        div.onclick = event => {\n            event.stopPropagation();\n            event.preventDefault();\n        };\n        return div;\n    }\n\n    private createLeftButtonDiv(): HTMLDivElement {\n        const leftButtonDiv = document.createElement('div'); // Holds all the buttons that get added to the left\n        leftButtonDiv.className = QuickTitleBar.Styles.QUICK_TITLE_LEFT_BAR;\n\n        this.createButtonElements(this.getLeftButtons()).forEach(btn => leftButtonDiv.appendChild(btn));\n        return leftButtonDiv;\n    }\n\n    private createRightButtonDiv(): HTMLDivElement {\n        const rightButtonDiv = document.createElement('div');\n        rightButtonDiv.className = QuickTitleBar.Styles.QUICK_TITLE_RIGHT_BAR;\n\n        this.createButtonElements(this.getRightButtons()).forEach(btn => rightButtonDiv.appendChild(btn));\n        return rightButtonDiv;\n    }\n\n    // eslint-disable-next-line max-len\n    public attachTitleBar(widgetNode: HTMLElement, title: string | undefined, step: number | undefined, totalSteps: number | undefined, buttons: ReadonlyArray<QuickTitleButton> | undefined): void {\n        const div = this.createTitleBarDiv();\n\n        this.updateInnerTitleText();\n\n        this.title = title;\n        this.step = step;\n        this.totalSteps = totalSteps;\n        this.buttons = buttons;\n\n        div.appendChild(this.createLeftButtonDiv());\n        div.appendChild(this.titleElement);\n        div.appendChild(this.createRightButtonDiv());\n\n        if (widgetNode.contains(this.titleBarContainer)) {\n            widgetNode.removeChild(this.titleBarContainer);\n        }\n        widgetNode.prepend(div);\n\n        this.titleBarContainer = div;\n        this.attachedNode = widgetNode;\n        this.isAttached = true;\n    }\n\n    hide(): void {\n        this.title = undefined;\n        this.buttons = undefined;\n        this.step = undefined;\n        this.totalSteps = undefined;\n        this.isAttached = false;\n        if (this.attachedNode && this.attachedNode.contains(this.titleBarContainer)) {\n            this.attachedNode.removeChild(this.titleBarContainer);\n        }\n        this.attachedNode = undefined;\n    }\n\n    shouldShowTitleBar(title: string | undefined, step: number | undefined): boolean {\n        return ((title !== undefined) || (step !== undefined));\n    }\n\n}\n\nexport namespace QuickTitleBar {\n    export namespace Styles {\n        export const QUICK_TITLE_CONTAINER = 'theia-quick-title-container';\n        export const QUICK_TITLE_LEFT_BAR = 'theia-quick-title-left-bar';\n        export const QUICK_TITLE_RIGHT_BAR = 'theia-quick-title-right-bar';\n        export const QUICK_TITLE_HEADER = 'theia-quick-title-header';\n        export const QUICK_TITLE_BUTTON = 'theia-quick-title-button';\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2019 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { injectable } from 'inversify';\nimport { QuickOpenModel, QuickOpenHandler, QuickOpenOptions, QuickOpenItem, QuickOpenMode, QuickOpenContribution, QuickOpenHandlerRegistry } from './quick-open';\nimport { Disposable } from '../common/disposable';\n\nexport interface QuickViewItem {\n    readonly label: string;\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    readonly open: () => any;\n}\n\n@injectable()\nexport class QuickViewService implements QuickOpenModel, QuickOpenHandler, QuickOpenContribution {\n\n    readonly prefix: string = 'view ';\n\n    readonly description: string = 'Open View';\n\n    protected readonly items: QuickOpenItem[] = [];\n\n    registerItem(item: QuickViewItem): Disposable {\n        const quickOpenItem = new QuickOpenItem({\n            label: item.label,\n            run: mode => {\n                if (mode !== QuickOpenMode.OPEN) {\n                    return false;\n                }\n                item.open();\n                return true;\n            }\n        });\n        this.items.push(quickOpenItem);\n        this.items.sort((a, b) => a.getLabel()!.localeCompare(b.getLabel()!));\n        return Disposable.create(() => {\n            const index = this.items.indexOf(quickOpenItem);\n            if (index !== -1) {\n                this.items.splice(index, 1);\n            }\n        });\n    }\n\n    getModel(): QuickOpenModel {\n        return this;\n    }\n\n    getOptions(): QuickOpenOptions {\n        return {\n            skipPrefix: this.prefix.length,\n            fuzzyMatchLabel: true\n        };\n    }\n\n    onType(_: string, acceptor: (items: QuickOpenItem[]) => void): void {\n        acceptor(this.items);\n    }\n\n    registerQuickOpenHandlers(handlers: QuickOpenHandlerRegistry): void {\n        handlers.registerHandler(this);\n    }\n\n}\n","/********************************************************************************\n * Copyright (C) 2019 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { injectable, inject, postConstruct } from 'inversify';\nimport URI from '../common/uri';\nimport Uri from 'vscode-uri';\nimport { ContextKeyService, ContextKey } from './context-key-service';\n\n@injectable()\nexport class ResourceContextKey {\n\n    @inject(ContextKeyService)\n    protected readonly contextKeyService: ContextKeyService;\n\n    protected resource: ContextKey<Uri>;\n    protected resourceSchemeKey: ContextKey<string>;\n    protected resourceFileName: ContextKey<string>;\n    protected resourceExtname: ContextKey<string>;\n    protected resourceLangId: ContextKey<string>;\n\n    @postConstruct()\n    protected init(): void {\n        this.resource = this.contextKeyService.createKey<Uri>('resource', undefined);\n        this.resourceSchemeKey = this.contextKeyService.createKey<string>('resourceScheme', undefined);\n        this.resourceFileName = this.contextKeyService.createKey<string>('resourceFilename', undefined);\n        this.resourceExtname = this.contextKeyService.createKey<string>('resourceExtname', undefined);\n        this.resourceLangId = this.contextKeyService.createKey<string>('resourceLangId', undefined);\n    }\n\n    get(): URI | undefined {\n        const codeUri = this.resource.get();\n        return codeUri && new URI(codeUri);\n    }\n\n    set(resourceUri: URI | undefined): void {\n        this.resource.set(resourceUri && resourceUri['codeUri']);\n        this.resourceSchemeKey.set(resourceUri && resourceUri.scheme);\n        this.resourceFileName.set(resourceUri && resourceUri.path.base);\n        this.resourceExtname.set(resourceUri && resourceUri.path.ext);\n        this.resourceLangId.set(resourceUri && this.getLanguageId(resourceUri));\n    }\n\n    /** should be implemented by subclasses */\n    protected getLanguageId(uri: URI | undefined): string | undefined {\n        return undefined;\n    }\n\n}\n","/********************************************************************************\n * Copyright (C) 2017 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { Widget } from '@phosphor/widgets';\nimport { Message } from '@phosphor/messaging';\nimport { Event, MaybePromise } from '../common';\nimport { Key } from './keyboard/keys';\nimport { AbstractDialog } from './dialogs';\n\nexport interface Saveable {\n    readonly dirty: boolean;\n    readonly onDirtyChanged: Event<void>;\n    readonly autoSave: 'on' | 'off';\n    save(): MaybePromise<void>;\n}\n\nexport interface SaveableSource {\n    readonly saveable: Saveable;\n}\n\nexport namespace Saveable {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    export function isSource(arg: any): arg is SaveableSource {\n        return !!arg && ('saveable' in arg);\n    }\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    export function is(arg: any): arg is Saveable {\n        return !!arg && ('dirty' in arg) && ('onDirtyChanged' in arg);\n    }\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    export function get(arg: any): Saveable | undefined {\n        if (is(arg)) {\n            return arg;\n        }\n        if (isSource(arg)) {\n            return arg.saveable;\n        }\n        return undefined;\n    }\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    export function getDirty(arg: any): Saveable | undefined {\n        const saveable = get(arg);\n        if (saveable && saveable.dirty) {\n            return saveable;\n        }\n        return undefined;\n    }\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    export function isDirty(arg: any): boolean {\n        return !!getDirty(arg);\n    }\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    export async function save(arg: any): Promise<void> {\n        const saveable = get(arg);\n        if (saveable) {\n            await saveable.save();\n        }\n    }\n    export function apply(widget: Widget): SaveableWidget | undefined {\n        if (SaveableWidget.is(widget)) {\n            return widget;\n        }\n        const saveable = Saveable.get(widget);\n        if (!saveable) {\n            return undefined;\n        }\n        setDirty(widget, saveable.dirty);\n        saveable.onDirtyChanged(() => setDirty(widget, saveable.dirty));\n        let closing = false;\n        const closeWithoutSaving = widget.close.bind(widget);\n        return Object.assign(widget, {\n            closeWithoutSaving,\n            close: async () => {\n                if (closing) {\n                    return;\n                }\n                closing = true;\n                try {\n                    const result = await shouldSave(saveable, widget);\n                    if (typeof result === 'boolean') {\n                        if (result) {\n                            await Saveable.save(widget);\n                        }\n                        closeWithoutSaving();\n                    }\n                } finally {\n                    closing = false;\n                }\n            }\n        });\n    }\n    export async function shouldSave(saveable: Saveable, widget: Widget): Promise<boolean | undefined> {\n        if (!saveable.dirty) {\n            return false;\n        }\n\n        if (saveable.autoSave === 'on') {\n            return true;\n        }\n\n        return new ShouldSaveDialog(widget).open();\n    }\n}\n\nexport interface SaveableWidget extends Widget {\n    closeWithoutSaving(): void;\n}\nexport namespace SaveableWidget {\n    export function is(widget: Widget | undefined): widget is SaveableWidget {\n        return !!widget && 'closeWithoutSaving' in widget;\n    }\n    export function getDirty<T extends Widget>(widgets: IterableIterator<T> | ArrayLike<T>): IterableIterator<SaveableWidget & T> {\n        return get(widgets, Saveable.isDirty);\n    }\n    export function* get<T extends Widget>(\n        widgets: IterableIterator<T> | ArrayLike<T>,\n        filter: (widget: T) => boolean = () => true\n    ): IterableIterator<SaveableWidget & T> {\n        for (const widget of widgets) {\n            if (SaveableWidget.is(widget) && filter(widget)) {\n                yield widget;\n            }\n        }\n    }\n}\n\n/**\n * The class name added to the dirty widget's title.\n */\nconst DIRTY_CLASS = 'theia-mod-dirty';\nexport function setDirty(widget: Widget, dirty: boolean): void {\n    const dirtyClass = ` ${DIRTY_CLASS}`;\n    widget.title.className = widget.title.className.replace(dirtyClass, '');\n    if (dirty) {\n        widget.title.className += dirtyClass;\n    }\n}\n\nexport class ShouldSaveDialog extends AbstractDialog<boolean> {\n\n    protected shouldSave = true;\n\n    protected readonly dontSaveButton: HTMLButtonElement;\n\n    constructor(widget: Widget) {\n        super({\n            title: `Do you want to save the changes you made to ${widget.title.label || widget.title.caption}?`\n        });\n\n        const messageNode = document.createElement('div');\n        messageNode.textContent = \"Your changes will be lost if you don't save them.\";\n        messageNode.setAttribute('style', 'flex: 1 100%; padding-bottom: calc(var(--theia-ui-padding)*3);');\n        this.contentNode.appendChild(messageNode);\n        this.dontSaveButton = this.appendDontSaveButton();\n        this.appendCloseButton();\n        this.appendAcceptButton('Save');\n    }\n\n    protected appendDontSaveButton(): HTMLButtonElement {\n        const button = this.createButton(\"Don't save\");\n        this.controlPanel.appendChild(button);\n        button.classList.add('secondary');\n        return button;\n    }\n\n    protected onAfterAttach(msg: Message): void {\n        super.onAfterAttach(msg);\n        this.addKeyListener(this.dontSaveButton, Key.ENTER, () => {\n            this.shouldSave = false;\n            this.accept();\n        }, 'click');\n    }\n\n    get value(): boolean {\n        return this.shouldSave;\n    }\n\n}\n","/********************************************************************************\n * Copyright (C) 2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { injectable, inject, optional, postConstruct } from 'inversify';\nimport { ArrayExt, find, toArray, each } from '@phosphor/algorithm';\nimport { Signal } from '@phosphor/signaling';\nimport {\n    BoxLayout, BoxPanel, DockLayout, DockPanel, FocusTracker, Layout, Panel, SplitLayout,\n    SplitPanel, TabBar, Widget, Title\n} from '@phosphor/widgets';\nimport { Message } from '@phosphor/messaging';\nimport { IDragEvent } from '@phosphor/dragdrop';\nimport { RecursivePartial, MaybePromise, Event as CommonEvent, DisposableCollection, Disposable } from '../../common';\nimport { animationFrame } from '../browser';\nimport { Saveable } from '../saveable';\nimport { StatusBarImpl, StatusBarEntry, StatusBarAlignment } from '../status-bar/status-bar';\nimport { TheiaDockPanel, BOTTOM_AREA_ID, MAIN_AREA_ID } from './theia-dock-panel';\nimport { SidePanelHandler, SidePanel, SidePanelHandlerFactory } from './side-panel-handler';\nimport { TabBarRendererFactory, TabBarRenderer, SHELL_TABBAR_CONTEXT_MENU, ScrollableTabBar, ToolbarAwareTabBar } from './tab-bars';\nimport { SplitPositionHandler, SplitPositionOptions } from './split-panels';\nimport { FrontendApplicationStateService } from '../frontend-application-state';\nimport { TabBarToolbarRegistry, TabBarToolbarFactory, TabBarToolbar } from './tab-bar-toolbar';\nimport { ContextKeyService } from '../context-key-service';\nimport { Emitter } from '../../common/event';\nimport { waitForRevealed, waitForClosed } from '../widgets';\n\n/** The class name added to ApplicationShell instances. */\nconst APPLICATION_SHELL_CLASS = 'theia-ApplicationShell';\n/** The class name added to the main and bottom area panels. */\nconst MAIN_BOTTOM_AREA_CLASS = 'theia-app-centers';\n/** Status bar entry identifier for the bottom panel toggle button. */\nconst BOTTOM_PANEL_TOGGLE_ID = 'bottom-panel-toggle';\n/** The class name added to the main area panel. */\nconst MAIN_AREA_CLASS = 'theia-app-main';\n/** The class name added to the bottom area panel. */\nconst BOTTOM_AREA_CLASS = 'theia-app-bottom';\n\nexport type ApplicationShellLayoutVersion =\n    /** layout versioning is introduced, unversioned layout are not compatible */\n    2.0 |\n    /** view containers are introduced, backward compatible to 2.0 */\n    3.0;\n\n/**\n * When a version is increased, make sure to introduce a migration (ApplicationShellLayoutMigration) to this version.\n */\nexport const applicationShellLayoutVersion: ApplicationShellLayoutVersion = 3.0;\n\nexport const ApplicationShellOptions = Symbol('ApplicationShellOptions');\nexport const DockPanelRendererFactory = Symbol('DockPanelRendererFactory');\nexport interface DockPanelRendererFactory {\n    (): DockPanelRenderer\n}\n\n/**\n * A renderer for dock panels that supports context menus on tabs.\n */\n@injectable()\nexport class DockPanelRenderer implements DockLayout.IRenderer {\n\n    readonly tabBarClasses: string[] = [];\n\n    constructor(\n        @inject(TabBarRendererFactory) protected readonly tabBarRendererFactory: () => TabBarRenderer,\n        @inject(TabBarToolbarRegistry) protected readonly tabBarToolbarRegistry: TabBarToolbarRegistry,\n        @inject(TabBarToolbarFactory) protected readonly tabBarToolbarFactory: () => TabBarToolbar\n    ) { }\n\n    createTabBar(): TabBar<Widget> {\n        const renderer = this.tabBarRendererFactory();\n        const tabBar = new ToolbarAwareTabBar(this.tabBarToolbarRegistry, this.tabBarToolbarFactory, {\n            renderer,\n            // Scroll bar options\n            handlers: ['drag-thumb', 'keyboard', 'wheel', 'touch'],\n            useBothWheelAxes: true,\n            scrollXMarginOffset: 4,\n            suppressScrollY: true\n        });\n        this.tabBarClasses.forEach(c => tabBar.addClass(c));\n        renderer.tabBar = tabBar;\n        renderer.contextMenuPath = SHELL_TABBAR_CONTEXT_MENU;\n        tabBar.currentChanged.connect(this.onCurrentTabChanged, this);\n        return tabBar;\n    }\n\n    createHandle(): HTMLDivElement {\n        return DockPanel.defaultRenderer.createHandle();\n    }\n\n    protected onCurrentTabChanged(sender: ToolbarAwareTabBar, { currentIndex }: TabBar.ICurrentChangedArgs<Widget>): void {\n        if (currentIndex >= 0) {\n            sender.revealTab(currentIndex);\n        }\n    }\n}\n\n/**\n * Data stored while dragging widgets in the shell.\n */\ninterface WidgetDragState {\n    startTime: number;\n    leftExpanded: boolean;\n    rightExpanded: boolean;\n    bottomExpanded: boolean;\n    lastDragOver?: IDragEvent;\n    leaveTimeout?: number;\n}\n\n/**\n * The application shell manages the top-level widgets of the application. Use this class to\n * add, remove, or activate a widget.\n */\n@injectable()\nexport class ApplicationShell extends Widget {\n\n    /**\n     * The dock panel in the main shell area. This is where editors usually go to.\n     */\n    readonly mainPanel: TheiaDockPanel;\n\n    /**\n     * The dock panel in the bottom shell area. In contrast to the main panel, the bottom panel\n     * can be collapsed and expanded.\n     */\n    readonly bottomPanel: TheiaDockPanel;\n\n    /**\n     * Handler for the left side panel. The primary application views go here, such as the\n     * file explorer and the git view.\n     */\n    readonly leftPanelHandler: SidePanelHandler;\n\n    /**\n     * Handler for the right side panel. The secondary application views go here, such as the\n     * outline view.\n     */\n    readonly rightPanelHandler: SidePanelHandler;\n\n    /**\n     * General options for the application shell.\n     */\n    protected options: ApplicationShell.Options;\n\n    /**\n     * The fixed-size panel shown on top. This one usually holds the main menu.\n     */\n    readonly topPanel: Panel;\n\n    /**\n     * The current state of the bottom panel.\n     */\n    protected readonly bottomPanelState: SidePanel.State = {\n        empty: true,\n        expansion: SidePanel.ExpansionState.collapsed,\n        pendingUpdate: Promise.resolve()\n    };\n\n    private readonly tracker = new FocusTracker<Widget>();\n    private dragState?: WidgetDragState;\n\n    @inject(ContextKeyService)\n    protected readonly contextKeyService: ContextKeyService;\n\n    protected readonly onDidAddWidgetEmitter = new Emitter<Widget>();\n    readonly onDidAddWidget = this.onDidAddWidgetEmitter.event;\n    protected fireDidAddWidget(widget: Widget): void {\n        this.onDidAddWidgetEmitter.fire(widget);\n    }\n\n    protected readonly onDidRemoveWidgetEmitter = new Emitter<Widget>();\n    readonly onDidRemoveWidget = this.onDidRemoveWidgetEmitter.event;\n    protected fireDidRemoveWidget(widget: Widget): void {\n        this.onDidRemoveWidgetEmitter.fire(widget);\n    }\n\n    protected readonly onDidChangeActiveWidgetEmitter = new Emitter<FocusTracker.IChangedArgs<Widget>>();\n    readonly onDidChangeActiveWidget = this.onDidChangeActiveWidgetEmitter.event;\n\n    protected readonly onDidChangeCurrentWidgetEmitter = new Emitter<FocusTracker.IChangedArgs<Widget>>();\n    readonly onDidChangeCurrentWidget = this.onDidChangeCurrentWidgetEmitter.event;\n\n    /**\n     * Construct a new application shell.\n     */\n    constructor(\n        @inject(DockPanelRendererFactory) protected dockPanelRendererFactory: () => DockPanelRenderer,\n        @inject(StatusBarImpl) protected readonly statusBar: StatusBarImpl,\n        @inject(SidePanelHandlerFactory) sidePanelHandlerFactory: () => SidePanelHandler,\n        @inject(SplitPositionHandler) protected splitPositionHandler: SplitPositionHandler,\n        @inject(FrontendApplicationStateService) protected readonly applicationStateService: FrontendApplicationStateService,\n        @inject(ApplicationShellOptions) @optional() options: RecursivePartial<ApplicationShell.Options> = {}\n    ) {\n        super(options as Widget.IOptions);\n        this.addClass(APPLICATION_SHELL_CLASS);\n        this.id = 'theia-app-shell';\n\n        // Merge the user-defined application options with the default options\n        this.options = {\n            bottomPanel: {\n                ...ApplicationShell.DEFAULT_OPTIONS.bottomPanel,\n                ...options.bottomPanel || {}\n            },\n            leftPanel: {\n                ...ApplicationShell.DEFAULT_OPTIONS.leftPanel,\n                ...options.leftPanel || {}\n            },\n            rightPanel: {\n                ...ApplicationShell.DEFAULT_OPTIONS.rightPanel,\n                ...options.rightPanel || {}\n            }\n        };\n\n        this.mainPanel = this.createMainPanel();\n        this.topPanel = this.createTopPanel();\n        this.bottomPanel = this.createBottomPanel();\n\n        this.leftPanelHandler = sidePanelHandlerFactory();\n        this.leftPanelHandler.create('left', this.options.leftPanel);\n        this.leftPanelHandler.dockPanel.widgetAdded.connect((_, widget) => this.fireDidAddWidget(widget));\n        this.leftPanelHandler.dockPanel.widgetRemoved.connect((_, widget) => this.fireDidRemoveWidget(widget));\n\n        this.rightPanelHandler = sidePanelHandlerFactory();\n        this.rightPanelHandler.create('right', this.options.rightPanel);\n        this.rightPanelHandler.dockPanel.widgetAdded.connect((_, widget) => this.fireDidAddWidget(widget));\n        this.rightPanelHandler.dockPanel.widgetRemoved.connect((_, widget) => this.fireDidRemoveWidget(widget));\n\n        this.layout = this.createLayout();\n\n        this.tracker.currentChanged.connect(this.onCurrentChanged, this);\n        this.tracker.activeChanged.connect(this.onActiveChanged, this);\n    }\n\n    @postConstruct()\n    protected init(): void {\n        this.initSidebarVisibleKeyContext();\n        this.initFocusKeyContexts();\n    }\n\n    protected initSidebarVisibleKeyContext(): void {\n        const leftSideBarPanel = this.leftPanelHandler.dockPanel;\n        const sidebarVisibleKey = this.contextKeyService.createKey('sidebarVisible', leftSideBarPanel.isVisible);\n        const onAfterShow = leftSideBarPanel['onAfterShow'].bind(leftSideBarPanel);\n        leftSideBarPanel['onAfterShow'] = (msg: Message) => {\n            onAfterShow(msg);\n            sidebarVisibleKey.set(true);\n        };\n        const onAfterHide = leftSideBarPanel['onAfterHide'].bind(leftSideBarPanel);\n        leftSideBarPanel['onAfterHide'] = (msg: Message) => {\n            onAfterHide(msg);\n            sidebarVisibleKey.set(false);\n        };\n    }\n\n    protected initFocusKeyContexts(): void {\n        const sideBarFocus = this.contextKeyService.createKey('sideBarFocus', false);\n        const panelFocus = this.contextKeyService.createKey('panelFocus', false);\n        const updateFocusContextKeys = () => {\n            const area = this.activeWidget && this.getAreaFor(this.activeWidget);\n            sideBarFocus.set(area === 'left');\n            panelFocus.set(area === 'main');\n        };\n        updateFocusContextKeys();\n        this.activeChanged.connect(updateFocusContextKeys);\n    }\n\n    protected onBeforeAttach(msg: Message): void {\n        document.addEventListener('p-dragenter', this, true);\n        document.addEventListener('p-dragover', this, true);\n        document.addEventListener('p-dragleave', this, true);\n        document.addEventListener('p-drop', this, true);\n    }\n\n    protected onAfterDetach(msg: Message): void {\n        document.removeEventListener('p-dragenter', this, true);\n        document.removeEventListener('p-dragover', this, true);\n        document.removeEventListener('p-dragleave', this, true);\n        document.removeEventListener('p-drop', this, true);\n    }\n\n    handleEvent(event: Event): void {\n        switch (event.type) {\n            case 'p-dragenter':\n                this.onDragEnter(event as IDragEvent);\n                break;\n            case 'p-dragover':\n                this.onDragOver(event as IDragEvent);\n                break;\n            case 'p-drop':\n                this.onDrop(event as IDragEvent);\n                break;\n            case 'p-dragleave':\n                this.onDragLeave(event as IDragEvent);\n                break;\n        }\n    }\n\n    protected onDragEnter({ mimeData }: IDragEvent): void {\n        if (!this.dragState) {\n            if (mimeData && mimeData.hasData('application/vnd.phosphor.widget-factory')) {\n                // The drag contains a widget, so we'll track it and expand side panels as needed\n                this.dragState = {\n                    startTime: performance.now(),\n                    leftExpanded: false,\n                    rightExpanded: false,\n                    bottomExpanded: false\n                };\n            }\n        }\n    }\n\n    protected onDragOver(event: IDragEvent): void {\n        const state = this.dragState;\n        if (state) {\n            state.lastDragOver = event;\n            if (state.leaveTimeout) {\n                window.clearTimeout(state.leaveTimeout);\n                state.leaveTimeout = undefined;\n            }\n            const { clientX, clientY } = event;\n            const { offsetLeft, offsetTop, clientWidth, clientHeight } = this.node;\n\n            // Don't expand any side panels right after the drag has started\n            const allowExpansion = performance.now() - state.startTime >= 500;\n            const expLeft = allowExpansion && clientX >= offsetLeft\n                && clientX <= offsetLeft + this.options.leftPanel.expandThreshold;\n            const expRight = allowExpansion && clientX <= offsetLeft + clientWidth\n                && clientX >= offsetLeft + clientWidth - this.options.rightPanel.expandThreshold;\n            const expBottom = allowExpansion && !expLeft && !expRight && clientY <= offsetTop + clientHeight\n                && clientY >= offsetTop + clientHeight - this.options.bottomPanel.expandThreshold;\n            // eslint-disable-next-line no-null/no-null\n            if (expLeft && !state.leftExpanded && this.leftPanelHandler.tabBar.currentTitle === null) {\n                // The mouse cursor is moved close to the left border\n                this.leftPanelHandler.expand();\n                this.leftPanelHandler.state.pendingUpdate.then(() => this.dispatchMouseMove());\n                state.leftExpanded = true;\n            } else if (!expLeft && state.leftExpanded) {\n                // The mouse cursor is moved away from the left border\n                this.leftPanelHandler.collapse();\n                state.leftExpanded = false;\n            }\n            // eslint-disable-next-line no-null/no-null\n            if (expRight && !state.rightExpanded && this.rightPanelHandler.tabBar.currentTitle === null) {\n                // The mouse cursor is moved close to the right border\n                this.rightPanelHandler.expand();\n                this.rightPanelHandler.state.pendingUpdate.then(() => this.dispatchMouseMove());\n                state.rightExpanded = true;\n            } else if (!expRight && state.rightExpanded) {\n                // The mouse cursor is moved away from the right border\n                this.rightPanelHandler.collapse();\n                state.rightExpanded = false;\n            }\n            if (expBottom && !state.bottomExpanded && this.bottomPanel.isHidden) {\n                // The mouse cursor is moved close to the bottom border\n                this.expandBottomPanel();\n                this.bottomPanelState.pendingUpdate.then(() => this.dispatchMouseMove());\n                state.bottomExpanded = true;\n            } else if (!expBottom && state.bottomExpanded) {\n                // The mouse cursor is moved away from the bottom border\n                this.collapseBottomPanel();\n                state.bottomExpanded = false;\n            }\n        }\n    }\n\n    /**\n     * This method is called after a side panel has been expanded while dragging a widget. It fires\n     * a `mousemove` event so that the drag overlay markers are updated correctly in all dock panels.\n     */\n    private dispatchMouseMove(): void {\n        if (this.dragState && this.dragState.lastDragOver) {\n            const { clientX, clientY } = this.dragState.lastDragOver;\n            const event = document.createEvent('MouseEvent');\n            event.initMouseEvent('mousemove', true, true, window, 0, 0, 0,\n                // eslint-disable-next-line no-null/no-null\n                clientX, clientY, false, false, false, false, 0, null);\n            document.dispatchEvent(event);\n        }\n    }\n\n    protected onDrop(event: IDragEvent): void {\n        const state = this.dragState;\n        if (state) {\n            if (state.leaveTimeout) {\n                window.clearTimeout(state.leaveTimeout);\n            }\n            this.dragState = undefined;\n            window.requestAnimationFrame(() => {\n                // Clean up the side panel state in the next frame\n                if (this.leftPanelHandler.dockPanel.isEmpty) {\n                    this.leftPanelHandler.collapse();\n                }\n                if (this.rightPanelHandler.dockPanel.isEmpty) {\n                    this.rightPanelHandler.collapse();\n                }\n                if (this.bottomPanel.isEmpty) {\n                    this.collapseBottomPanel();\n                }\n            });\n        }\n    }\n\n    protected onDragLeave(event: IDragEvent): void {\n        const state = this.dragState;\n        if (state) {\n            state.lastDragOver = undefined;\n            if (state.leaveTimeout) {\n                window.clearTimeout(state.leaveTimeout);\n            }\n            state.leaveTimeout = window.setTimeout(() => {\n                this.dragState = undefined;\n                if (state.leftExpanded || this.leftPanelHandler.dockPanel.isEmpty) {\n                    this.leftPanelHandler.collapse();\n                }\n                if (state.rightExpanded || this.rightPanelHandler.dockPanel.isEmpty) {\n                    this.rightPanelHandler.collapse();\n                }\n                if (state.bottomExpanded || this.bottomPanel.isEmpty) {\n                    this.collapseBottomPanel();\n                }\n            }, 100);\n        }\n    }\n\n    /**\n     * Create the dock panel in the main shell area.\n     */\n    protected createMainPanel(): TheiaDockPanel {\n        const renderer = this.dockPanelRendererFactory();\n        renderer.tabBarClasses.push(MAIN_BOTTOM_AREA_CLASS);\n        renderer.tabBarClasses.push(MAIN_AREA_CLASS);\n        const dockPanel = new TheiaDockPanel({\n            mode: 'multiple-document',\n            renderer,\n            spacing: 0\n        });\n        dockPanel.id = MAIN_AREA_ID;\n        dockPanel.widgetAdded.connect((_, widget) => this.fireDidAddWidget(widget));\n        dockPanel.widgetRemoved.connect((_, widget) => this.fireDidRemoveWidget(widget));\n        return dockPanel;\n    }\n\n    /**\n     * Create the dock panel in the bottom shell area.\n     */\n    protected createBottomPanel(): TheiaDockPanel {\n        const renderer = this.dockPanelRendererFactory();\n        renderer.tabBarClasses.push(MAIN_BOTTOM_AREA_CLASS);\n        renderer.tabBarClasses.push(BOTTOM_AREA_CLASS);\n        const dockPanel = new TheiaDockPanel({\n            mode: 'multiple-document',\n            renderer,\n            spacing: 0\n        });\n        dockPanel.id = BOTTOM_AREA_ID;\n        dockPanel.widgetAdded.connect((sender, widget) => {\n            this.refreshBottomPanelToggleButton();\n        });\n        dockPanel.widgetRemoved.connect((sender, widget) => {\n            if (sender.isEmpty) {\n                this.collapseBottomPanel();\n            }\n            this.refreshBottomPanelToggleButton();\n        }, this);\n        dockPanel.node.addEventListener('p-dragenter', event => {\n            // Make sure that the main panel hides its overlay when the bottom panel is expanded\n            this.mainPanel.overlay.hide(0);\n        });\n        dockPanel.hide();\n        dockPanel.widgetAdded.connect((_, widget) => this.fireDidAddWidget(widget));\n        dockPanel.widgetRemoved.connect((_, widget) => this.fireDidRemoveWidget(widget));\n        return dockPanel;\n    }\n\n    /**\n     * Create the top panel, which is used to hold the main menu.\n     */\n    protected createTopPanel(): Panel {\n        const topPanel = new Panel();\n        topPanel.id = 'theia-top-panel';\n        return topPanel;\n    }\n\n    /**\n     * Create a box layout to assemble the application shell layout.\n     */\n    protected createBoxLayout(widgets: Widget[], stretch?: number[], options?: BoxPanel.IOptions): BoxLayout {\n        const boxLayout = new BoxLayout(options);\n        for (let i = 0; i < widgets.length; i++) {\n            if (stretch !== undefined && i < stretch.length) {\n                BoxPanel.setStretch(widgets[i], stretch[i]);\n            }\n            boxLayout.addWidget(widgets[i]);\n        }\n        return boxLayout;\n    }\n\n    /**\n     * Create a split layout to assemble the application shell layout.\n     */\n    protected createSplitLayout(widgets: Widget[], stretch?: number[], options?: Partial<SplitLayout.IOptions>): SplitLayout {\n        let optParam: SplitLayout.IOptions = { renderer: SplitPanel.defaultRenderer, };\n        if (options) {\n            optParam = { ...optParam, ...options };\n        }\n        const splitLayout = new SplitLayout(optParam);\n        for (let i = 0; i < widgets.length; i++) {\n            if (stretch !== undefined && i < stretch.length) {\n                SplitPanel.setStretch(widgets[i], stretch[i]);\n            }\n            splitLayout.addWidget(widgets[i]);\n        }\n        return splitLayout;\n    }\n\n    /**\n     * Assemble the application shell layout. Override this method in order to change the arrangement\n     * of the main area and the side panels.\n     */\n    protected createLayout(): Layout {\n        const bottomSplitLayout = this.createSplitLayout(\n            [this.mainPanel, this.bottomPanel],\n            [1, 0],\n            { orientation: 'vertical', spacing: 0 }\n        );\n        const panelForBottomArea = new SplitPanel({ layout: bottomSplitLayout });\n        panelForBottomArea.id = 'theia-bottom-split-panel';\n\n        const leftRightSplitLayout = this.createSplitLayout(\n            [this.leftPanelHandler.container, panelForBottomArea, this.rightPanelHandler.container],\n            [0, 1, 0],\n            { orientation: 'horizontal', spacing: 0 }\n        );\n        const panelForSideAreas = new SplitPanel({ layout: leftRightSplitLayout });\n        panelForSideAreas.id = 'theia-left-right-split-panel';\n\n        return this.createBoxLayout(\n            [this.topPanel, panelForSideAreas, this.statusBar],\n            [0, 1, 0],\n            { direction: 'top-to-bottom', spacing: 0 }\n        );\n    }\n\n    /**\n     * Create an object that describes the current shell layout. This object may contain references\n     * to widgets; these need to be transformed before the layout can be serialized.\n     */\n    getLayoutData(): ApplicationShell.LayoutData {\n        return {\n            version: applicationShellLayoutVersion,\n            mainPanel: this.mainPanel.saveLayout(),\n            bottomPanel: {\n                config: this.bottomPanel.saveLayout(),\n                size: this.bottomPanel.isVisible ? this.getBottomPanelSize() : this.bottomPanelState.lastPanelSize,\n                expanded: this.isExpanded('bottom')\n            },\n            leftPanel: this.leftPanelHandler.getLayoutData(),\n            rightPanel: this.rightPanelHandler.getLayoutData(),\n            activeWidgetId: this.activeWidget ? this.activeWidget.id : undefined\n        };\n    }\n\n    /**\n     * Compute the current height of the bottom panel. This implementation assumes that the container\n     * of the bottom panel is a `SplitPanel`.\n     */\n    protected getBottomPanelSize(): number | undefined {\n        const parent = this.bottomPanel.parent;\n        if (parent instanceof SplitPanel && parent.isVisible) {\n            const index = parent.widgets.indexOf(this.bottomPanel) - 1;\n            if (index >= 0) {\n                const handle = parent.handles[index];\n                if (!handle.classList.contains('p-mod-hidden')) {\n                    const parentHeight = parent.node.clientHeight;\n                    return parentHeight - handle.offsetTop;\n                }\n            }\n        }\n    }\n\n    /**\n     * Determine the default size to apply when the bottom panel is expanded for the first time.\n     */\n    protected getDefaultBottomPanelSize(): number | undefined {\n        const parent = this.bottomPanel.parent;\n        if (parent && parent.isVisible) {\n            return parent.node.clientHeight * this.options.bottomPanel.initialSizeRatio;\n        }\n    }\n\n    /**\n     * Apply a shell layout that has been previously created with `getLayoutData`.\n     */\n    async setLayoutData(layoutData: ApplicationShell.LayoutData): Promise<void> {\n        const { mainPanel, bottomPanel, leftPanel, rightPanel, activeWidgetId } = layoutData;\n        if (leftPanel) {\n            this.leftPanelHandler.setLayoutData(leftPanel);\n            await this.registerWithFocusTracker(leftPanel);\n        }\n        if (rightPanel) {\n            this.rightPanelHandler.setLayoutData(rightPanel);\n            await this.registerWithFocusTracker(rightPanel);\n        }\n        // Proceed with the bottom panel once the side panels are set up\n        await Promise.all([this.leftPanelHandler.state.pendingUpdate, this.rightPanelHandler.state.pendingUpdate]);\n        if (bottomPanel) {\n            if (bottomPanel.config) {\n                this.bottomPanel.restoreLayout(bottomPanel.config);\n                await this.registerWithFocusTracker(bottomPanel.config.main);\n            }\n            if (bottomPanel.size) {\n                this.bottomPanelState.lastPanelSize = bottomPanel.size;\n            }\n            if (bottomPanel.expanded) {\n                this.expandBottomPanel();\n            } else {\n                this.collapseBottomPanel();\n            }\n            this.refreshBottomPanelToggleButton();\n        }\n        // Proceed with the main panel once all others are set up\n        await this.bottomPanelState.pendingUpdate;\n        if (mainPanel) {\n            this.mainPanel.restoreLayout(mainPanel);\n            await this.registerWithFocusTracker(mainPanel.main);\n        }\n        if (activeWidgetId) {\n            this.activateWidget(activeWidgetId);\n        }\n    }\n\n    /**\n     * Modify the height of the bottom panel. This implementation assumes that the container of the\n     * bottom panel is a `SplitPanel`.\n     */\n    protected setBottomPanelSize(size: number): Promise<void> {\n        const enableAnimation = this.applicationStateService.state === 'ready';\n        const options: SplitPositionOptions = {\n            side: 'bottom',\n            duration: enableAnimation ? this.options.bottomPanel.expandDuration : 0,\n            referenceWidget: this.bottomPanel\n        };\n        const promise = this.splitPositionHandler.setSidePanelSize(this.bottomPanel, size, options);\n        const result = new Promise<void>(resolve => {\n            // Resolve the resulting promise in any case, regardless of whether resizing was successful\n            promise.then(() => resolve(), () => resolve());\n        });\n        this.bottomPanelState.pendingUpdate = this.bottomPanelState.pendingUpdate.then(() => result);\n        return result;\n    }\n\n    /**\n     * A promise that is resolved when all currently pending updates are done.\n     */\n    get pendingUpdates(): Promise<void> {\n        return Promise.all([\n            this.bottomPanelState.pendingUpdate,\n            this.leftPanelHandler.state.pendingUpdate,\n            this.rightPanelHandler.state.pendingUpdate\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        ]) as Promise<any>;\n    }\n\n    /**\n     * Track all widgets that are referenced by the given layout data.\n     */\n    protected async registerWithFocusTracker(data: DockLayout.ITabAreaConfig | DockLayout.ISplitAreaConfig | SidePanel.LayoutData | null): Promise<void> {\n        if (data) {\n            if (data.type === 'tab-area') {\n                for (const widget of data.widgets) {\n                    if (widget) {\n                        await this.track(widget);\n                    }\n                }\n            } else if (data.type === 'split-area') {\n                for (const child of data.children) {\n                    await this.registerWithFocusTracker(child);\n                }\n            } else if (data.type === 'sidepanel' && data.items) {\n                for (const item of data.items) {\n                    if (item.widget) {\n                        await this.track(item.widget);\n                    }\n                }\n            }\n        }\n    }\n\n    /**\n     * Add a widget to the application shell. The given widget must have a unique `id` property,\n     * which will be used as the DOM id.\n     *\n     * Widgets are removed from the shell by calling their `close` or `dispose` methods.\n     *\n     * Widgets added to the top area are not tracked regarding the _current_ and _active_ states.\n     */\n    async addWidget(widget: Widget, options: Readonly<ApplicationShell.WidgetOptions> = {}): Promise<void> {\n        if (!widget.id) {\n            console.error('Widgets added to the application shell must have a unique id property.');\n            return;\n        }\n        let ref: Widget | undefined = options.ref;\n        let area: ApplicationShell.Area = options.area || 'main';\n        if (!ref && (area === 'main' || area === 'bottom')) {\n            const tabBar = this.getTabBarFor(area);\n            ref = tabBar && tabBar.currentTitle && tabBar.currentTitle.owner || undefined;\n        }\n        // make sure that ref belongs to area\n        area = ref && this.getAreaFor(ref) || area;\n        const addOptions: DockPanel.IAddOptions = {};\n        if (ApplicationShell.isOpenToSideMode(options.mode)) {\n            const areaPanel = area === 'main' ? this.mainPanel : area === 'bottom' ? this.bottomPanel : undefined;\n            const sideRef = areaPanel && ref && (options.mode === 'open-to-left' ?\n                areaPanel.previousTabBarWidget(ref) :\n                areaPanel.nextTabBarWidget(ref));\n            if (sideRef) {\n                addOptions.ref = sideRef;\n            } else {\n                addOptions.ref = ref;\n                addOptions.mode = options.mode === 'open-to-left' ? 'split-left' : 'split-right';\n            }\n        } else {\n            addOptions.ref = ref;\n            addOptions.mode = options.mode;\n        }\n        const sidePanelOptions: SidePanel.WidgetOptions = { rank: options.rank };\n        switch (area) {\n            case 'main':\n                this.mainPanel.addWidget(widget, addOptions);\n                break;\n            case 'top':\n                this.topPanel.addWidget(widget);\n                break;\n            case 'bottom':\n                this.bottomPanel.addWidget(widget, addOptions);\n                break;\n            case 'left':\n                this.leftPanelHandler.addWidget(widget, sidePanelOptions);\n                break;\n            case 'right':\n                this.rightPanelHandler.addWidget(widget, sidePanelOptions);\n                break;\n            default:\n                throw new Error('Unexpected area: ' + options.area);\n        }\n        if (area !== 'top') {\n            await this.track(widget);\n        }\n    }\n\n    /**\n     * The widgets contained in the given shell area.\n     */\n    getWidgets(area: ApplicationShell.Area): Widget[] {\n        switch (area) {\n            case 'main':\n                return toArray(this.mainPanel.widgets());\n            case 'top':\n                return toArray(this.topPanel.widgets);\n            case 'bottom':\n                return toArray(this.bottomPanel.widgets());\n            case 'left':\n                return toArray(this.leftPanelHandler.dockPanel.widgets());\n            case 'right':\n                return toArray(this.rightPanelHandler.dockPanel.widgets());\n            default:\n                throw new Error('Illegal argument: ' + area);\n        }\n    }\n\n    /**\n     * Find the widget that contains the given HTML element. The returned widget may be one\n     * that is managed by the application shell, or one that is embedded in another widget and\n     * not directly managed by the shell, or a tab bar.\n     */\n    findWidgetForElement(element: HTMLElement): Widget | undefined {\n        let widgetNode: HTMLElement | null = element;\n        while (widgetNode && !widgetNode.classList.contains('p-Widget')) {\n            widgetNode = widgetNode.parentElement;\n        }\n        if (widgetNode) {\n            return this.findWidgetForNode(widgetNode, this);\n        }\n        return undefined;\n    }\n\n    private findWidgetForNode(widgetNode: HTMLElement, widget: Widget): Widget | undefined {\n        if (widget.node === widgetNode) {\n            return widget;\n        }\n        let result: Widget | undefined;\n        each(widget.children(), child => {\n            result = this.findWidgetForNode(widgetNode, child);\n            return !result;\n        });\n        return result;\n    }\n\n    /**\n     * The current widget in the application shell. The current widget is the last widget that\n     * was active and not yet closed. See the remarks to `activeWidget` on what _active_ means.\n     */\n    get currentWidget(): Widget | undefined {\n        return this.tracker.currentWidget || undefined;\n    }\n\n    /**\n     * The active widget in the application shell. The active widget is the one that has focus\n     * (either the widget itself or any of its contents).\n     *\n     * _Note:_ Focus is taken by a widget through the `onActivateRequest` method. It is up to the\n     * widget implementation which DOM element will get the focus. The default implementation\n     * does not take any focus; in that case the widget is never returned by this property.\n     */\n    get activeWidget(): Widget | undefined {\n        return this.tracker.activeWidget || undefined;\n    }\n\n    /**\n     * A signal emitted whenever the `currentWidget` property is changed.\n     *\n     * @deprecated since 0.11.0, use `onDidChangeActiveWidget` instead\n     */\n    readonly currentChanged = new Signal<this, FocusTracker.IChangedArgs<Widget>>(this);\n\n    /**\n     * Handle a change to the current widget.\n     */\n    private onCurrentChanged(sender: FocusTracker<Widget>, args: FocusTracker.IChangedArgs<Widget>): void {\n        this.currentChanged.emit(args);\n        this.onDidChangeCurrentWidgetEmitter.fire(args);\n    }\n\n    /**\n     * A signal emitted whenever the `activeWidget` property is changed.\n     *\n     * @deprecated since 0.11.0, use `onDidChangeActiveWidget` instead\n     */\n    readonly activeChanged = new Signal<this, FocusTracker.IChangedArgs<Widget>>(this);\n\n    /**\n     * Handle a change to the active widget.\n     */\n    private onActiveChanged(sender: FocusTracker<Widget>, args: FocusTracker.IChangedArgs<Widget>): void {\n        const { newValue, oldValue } = args;\n        if (oldValue) {\n            let w: Widget | null = oldValue;\n            while (w) {\n                // Remove the mark of the previously active widget\n                w.title.className = w.title.className.replace(' theia-mod-active', '');\n                w = w.parent;\n            }\n            // Reset the z-index to the default\n            // eslint-disable-next-line no-null/no-null\n            this.setZIndex(oldValue.node, null);\n        }\n        if (newValue) {\n            let w: Widget | null = newValue;\n            while (w) {\n                // Mark the tab of the active widget\n                w.title.className += ' theia-mod-active';\n                w = w.parent;\n            }\n            // Reveal the title of the active widget in its tab bar\n            const tabBar = this.getTabBarFor(newValue);\n            if (tabBar instanceof ScrollableTabBar) {\n                const index = tabBar.titles.indexOf(newValue.title);\n                if (index >= 0) {\n                    tabBar.revealTab(index);\n                }\n            }\n            const panel = this.getAreaPanelFor(newValue);\n            if (panel instanceof TheiaDockPanel) {\n                panel.markAsCurrent(newValue.title);\n            }\n            // Set the z-index so elements with `position: fixed` contained in the active widget are displayed correctly\n            this.setZIndex(newValue.node, '1');\n        }\n        this.activeChanged.emit(args);\n        this.onDidChangeActiveWidgetEmitter.fire(args);\n    }\n\n    /**\n     * Set the z-index of the given element and its ancestors to the value `z`.\n     */\n    private setZIndex(element: HTMLElement, z: string | null): void {\n        element.style.zIndex = z;\n        const parent = element.parentElement;\n        if (parent && parent !== this.node) {\n            this.setZIndex(parent, z);\n        }\n    }\n\n    /**\n     * Track the given widget so it is considered in the `current` and `active` state of the shell.\n     */\n    protected async track(widget: Widget): Promise<void> {\n        if (this.tracker.widgets.indexOf(widget) !== -1) {\n            return;\n        }\n        this.tracker.add(widget);\n        this.checkActivation(widget);\n        Saveable.apply(widget);\n        if (ApplicationShell.TrackableWidgetProvider.is(widget)) {\n            for (const toTrack of await widget.getTrackableWidgets()) {\n                await this.track(toTrack);\n            }\n            if (widget.onDidChangeTrackableWidgets) {\n                widget.onDidChangeTrackableWidgets(widgets => widgets.forEach(w => this.track(w)));\n            }\n        }\n    }\n\n    protected toTrackedStack(id: string): Widget[] {\n        const tracked = new Map<string, Widget>(this.tracker.widgets.map(w => [w.id, w] as [string, Widget]));\n        let current = tracked.get(id);\n        const stack: Widget[] = [];\n        while (current) {\n            if (tracked.has(current.id)) {\n                stack.push(current);\n            }\n            current = current.parent || undefined;\n        }\n        return stack;\n    }\n\n    /**\n     * Activate a widget in the application shell. This makes the widget visible and usually\n     * also assigns focus to it.\n     *\n     * _Note:_ Focus is taken by a widget through the `onActivateRequest` method. It is up to the\n     * widget implementation which DOM element will get the focus. The default implementation\n     * does not take any focus.\n     *\n     * @returns the activated widget if it was found\n     */\n    async activateWidget(id: string): Promise<Widget | undefined> {\n        const stack = this.toTrackedStack(id);\n        let current = stack.pop();\n        if (current && !this.doActivateWidget(current.id)) {\n            return undefined;\n        }\n        while (current && stack.length) {\n            const child = stack.pop()!;\n            if (ApplicationShell.TrackableWidgetProvider.is(current) && current.activateWidget) {\n                current = current.activateWidget(child.id);\n            } else {\n                child.activate();\n                current = child;\n            }\n        }\n        if (!current) {\n            return undefined;\n        }\n        await Promise.all([\n            this.waitForActivation(current.id),\n            waitForRevealed(current),\n            this.pendingUpdates\n        ]);\n        return current;\n    }\n\n    waitForActivation(id: string): Promise<void> {\n        if (this.activeWidget && this.activeWidget.id === id) {\n            return Promise.resolve();\n        }\n        return new Promise(resolve => {\n            const toDispose = this.onDidChangeActiveWidget(() => {\n                if (this.activeWidget && this.activeWidget.id === id) {\n                    toDispose.dispose();\n                    resolve();\n                }\n            });\n        });\n    }\n\n    /**\n     * Activate top-level area widget.\n     */\n    protected doActivateWidget(id: string): Widget | undefined {\n        let widget = find(this.mainPanel.widgets(), w => w.id === id);\n        if (widget) {\n            this.mainPanel.activateWidget(widget);\n            return widget;\n        }\n        widget = find(this.bottomPanel.widgets(), w => w.id === id);\n        if (widget) {\n            this.expandBottomPanel();\n            this.bottomPanel.activateWidget(widget);\n            return widget;\n        }\n        widget = this.leftPanelHandler.activate(id);\n        if (widget) {\n            return widget;\n        }\n        widget = this.rightPanelHandler.activate(id);\n        if (widget) {\n            return widget;\n        }\n    }\n\n    /**\n     * Focus is taken by a widget through the `onActivateRequest` method. It is up to the\n     * widget implementation which DOM element will get the focus. The default implementation\n     * of Widget does not take any focus. This method can help finding such problems by logging\n     * a warning in case a widget was explicitly activated, but did not trigger a change of the\n     * `activeWidget` property.\n     */\n    private checkActivation(widget: Widget): Widget {\n        const onActivateRequest = widget['onActivateRequest'].bind(widget);\n        widget['onActivateRequest'] = (msg: Message) => {\n            onActivateRequest(msg);\n            this.assertActivated(widget);\n        };\n        return widget;\n    }\n\n    private readonly activationTimeout = 2000;\n    private readonly toDisposeOnActivationCheck = new DisposableCollection();\n    private assertActivated(widget: Widget): void {\n        this.toDisposeOnActivationCheck.dispose();\n\n        const onDispose = () => this.toDisposeOnActivationCheck.dispose();\n        widget.disposed.connect(onDispose);\n        this.toDisposeOnActivationCheck.push(Disposable.create(() => widget.disposed.disconnect(onDispose)));\n\n        let start = 0;\n        const step: FrameRequestCallback = timestamp => {\n            if (document.activeElement && widget.node.contains(document.activeElement)) {\n                return;\n            }\n            if (!start) {\n                start = timestamp;\n            }\n            const delta = timestamp - start;\n            if (delta < this.activationTimeout) {\n                request = window.requestAnimationFrame(step);\n            } else {\n                console.warn(`Widget was activated, but did not accept focus after ${this.activationTimeout}ms: ${widget.id}`);\n            }\n        };\n        let request = window.requestAnimationFrame(step);\n        this.toDisposeOnActivationCheck.push(Disposable.create(() => window.cancelAnimationFrame(request)));\n    }\n\n    /**\n     * Reveal a widget in the application shell. This makes the widget visible,\n     * but does not activate it.\n     *\n     * @returns the revealed widget if it was found\n     */\n    async revealWidget(id: string): Promise<Widget | undefined> {\n        const stack = this.toTrackedStack(id);\n        let current = stack.pop();\n        if (current && !this.doRevealWidget(current.id)) {\n            return undefined;\n        }\n        while (current && stack.length) {\n            const child = stack.pop()!;\n            if (ApplicationShell.TrackableWidgetProvider.is(current) && current.revealWidget) {\n                current = current.revealWidget(child.id);\n            } else {\n                current = child;\n            }\n        }\n        if (!current) {\n            return undefined;\n        }\n        await Promise.all([\n            waitForRevealed(current),\n            this.pendingUpdates\n        ]);\n        return current;\n    }\n\n    /**\n     * Reveal top-level area widget.\n     */\n    protected doRevealWidget(id: string): Widget | undefined {\n        let widget = find(this.mainPanel.widgets(), w => w.id === id);\n        if (!widget) {\n            widget = find(this.bottomPanel.widgets(), w => w.id === id);\n            if (widget) {\n                this.expandBottomPanel();\n            }\n        }\n        if (widget) {\n            const tabBar = this.getTabBarFor(widget);\n            if (tabBar) {\n                tabBar.currentTitle = widget.title;\n            }\n            return widget;\n        }\n        widget = this.leftPanelHandler.expand(id);\n        if (widget) {\n            return widget;\n        }\n        return this.rightPanelHandler.expand(id);\n    }\n\n    /**\n     * Expand the named side panel area. This makes sure that the panel is visible, even if there\n     * are no widgets in it. If the panel is already visible, nothing happens. If the panel is currently\n     * collapsed (see `collapsePanel`) and it contains widgets, the widgets are revealed that were\n     * visible before it was collapsed.\n     */\n    expandPanel(area: ApplicationShell.Area): void {\n        switch (area) {\n            case 'bottom':\n                this.expandBottomPanel();\n                break;\n            case 'left':\n                this.leftPanelHandler.expand();\n                break;\n            case 'right':\n                this.rightPanelHandler.expand();\n                break;\n            default:\n                throw new Error('Area cannot be expanded: ' + area);\n        }\n    }\n\n    /**\n     * Adjusts the size of the given area in the application shell.\n     *\n     * @param size the desired size of the panel in pixels.\n     * @param area the area to resize.\n     */\n    resize(size: number, area: ApplicationShell.Area): void {\n        switch (area) {\n            case 'bottom':\n                if (this.bottomPanel.isHidden) {\n                    this.bottomPanelState.lastPanelSize = size;\n                } else {\n                    this.setBottomPanelSize(size);\n                }\n                break;\n            case 'left':\n                this.leftPanelHandler.resize(size);\n                break;\n            case 'right':\n                this.rightPanelHandler.resize(size);\n                break;\n            default:\n                throw new Error('Area cannot be resized: ' + area);\n        }\n    }\n\n    /**\n     * Expand the bottom panel. See `expandPanel` regarding the exact behavior.\n     */\n    protected expandBottomPanel(): void {\n        const bottomPanel = this.bottomPanel;\n        if (bottomPanel.isHidden) {\n            let relativeSizes: number[] | undefined;\n            const parent = bottomPanel.parent;\n            if (parent instanceof SplitPanel) {\n                relativeSizes = parent.relativeSizes();\n            }\n            bottomPanel.show();\n            if (relativeSizes && parent instanceof SplitPanel) {\n                // Make sure that the expansion animation starts at the smallest possible size\n                parent.setRelativeSizes(relativeSizes);\n            }\n\n            let size: number | undefined;\n            if (bottomPanel.isEmpty) {\n                bottomPanel.node.style.minHeight = '0';\n                size = this.options.bottomPanel.emptySize;\n            } else if (this.bottomPanelState.lastPanelSize) {\n                size = this.bottomPanelState.lastPanelSize;\n            } else {\n                size = this.getDefaultBottomPanelSize();\n            }\n            if (size) {\n                this.bottomPanelState.expansion = SidePanel.ExpansionState.expanding;\n                this.setBottomPanelSize(size).then(() => {\n                    if (this.bottomPanelState.expansion === SidePanel.ExpansionState.expanding) {\n                        this.bottomPanelState.expansion = SidePanel.ExpansionState.expanded;\n                    }\n                });\n            } else {\n                this.bottomPanelState.expansion = SidePanel.ExpansionState.expanded;\n            }\n        }\n    }\n\n    /**\n     * Collapse the named side panel area. This makes sure that the panel is hidden,\n     * increasing the space that is available for other shell areas.\n     */\n    collapsePanel(area: ApplicationShell.Area): Promise<void> {\n        switch (area) {\n            case 'bottom':\n                return this.collapseBottomPanel();\n            case 'left':\n                return this.leftPanelHandler.collapse();\n            case 'right':\n                return this.rightPanelHandler.collapse();\n            default:\n                throw new Error('Area cannot be collapsed: ' + area);\n        }\n    }\n\n    /**\n     * Collapse the bottom panel. All contained widgets are hidden, but not closed.\n     * They can be restored by calling `expandBottomPanel`.\n     */\n    protected collapseBottomPanel(): Promise<void> {\n        const bottomPanel = this.bottomPanel;\n        if (bottomPanel.isHidden) {\n            return Promise.resolve();\n        }\n        if (this.bottomPanelState.expansion === SidePanel.ExpansionState.expanded) {\n            const size = this.getBottomPanelSize();\n            if (size) {\n                this.bottomPanelState.lastPanelSize = size;\n            }\n        }\n        this.bottomPanelState.expansion = SidePanel.ExpansionState.collapsed;\n        bottomPanel.hide();\n        return animationFrame();\n    }\n\n    /**\n     * Refresh the toggle button for the bottom panel. This implementation creates a status bar entry\n     * and refers to the command `core.toggle.bottom.panel`.\n     */\n    protected refreshBottomPanelToggleButton(): void {\n        if (this.bottomPanel.isEmpty) {\n            this.statusBar.removeElement(BOTTOM_PANEL_TOGGLE_ID);\n        } else {\n            const element: StatusBarEntry = {\n                text: '$(window-maximize)',\n                alignment: StatusBarAlignment.RIGHT,\n                tooltip: 'Toggle Bottom Panel',\n                command: 'core.toggle.bottom.panel',\n                priority: -1000\n            };\n            this.statusBar.setElement(BOTTOM_PANEL_TOGGLE_ID, element);\n        }\n    }\n\n    /**\n     * Check whether the named side panel area is expanded (returns `true`) or collapsed (returns `false`).\n     */\n    isExpanded(area: ApplicationShell.Area): boolean {\n        switch (area) {\n            case 'bottom':\n                return this.bottomPanelState.expansion === SidePanel.ExpansionState.expanded;\n            case 'left':\n                return this.leftPanelHandler.state.expansion === SidePanel.ExpansionState.expanded;\n            case 'right':\n                return this.rightPanelHandler.state.expansion === SidePanel.ExpansionState.expanded;\n            default:\n                return true;\n        }\n    }\n\n    /**\n     * Close all tabs or a selection of tabs in a specific part of the application shell.\n     *\n     * @param tabBarOrArea\n     *      Either the name of a shell area or a `TabBar` that is contained in such an area.\n     * @param filter\n     *      If undefined, all tabs are closed; otherwise only those tabs that match the filter are closed.\n     */\n    closeTabs(tabBarOrArea: TabBar<Widget> | ApplicationShell.Area,\n        filter?: (title: Title<Widget>, index: number) => boolean): void {\n        if (tabBarOrArea === 'main') {\n            this.mainAreaTabBars.forEach(tb => this.closeTabs(tb, filter));\n        } else if (tabBarOrArea === 'bottom') {\n            this.bottomAreaTabBars.forEach(tb => this.closeTabs(tb, filter));\n        } else if (typeof tabBarOrArea === 'string') {\n            const tabBar = this.getTabBarFor(tabBarOrArea);\n            if (tabBar) {\n                this.closeTabs(tabBar, filter);\n            }\n        } else if (tabBarOrArea) {\n            const titles = toArray(tabBarOrArea.titles);\n            for (let i = 0; i < titles.length; i++) {\n                if (filter === undefined || filter(titles[i], i)) {\n                    titles[i].owner.close();\n                }\n            }\n        }\n    }\n\n    async closeWidget(id: string): Promise<Widget | undefined> {\n        const stack = this.toTrackedStack(id);\n        const widget = this.toTrackedStack(id).pop();\n        if (!widget) {\n            return undefined;\n        }\n        widget.close();\n        await Promise.all([\n            waitForClosed(widget),\n            this.pendingUpdates\n        ]);\n        return stack[0] || widget;\n    }\n\n    /**\n     * The shell area name of the currently active tab, or undefined.\n     */\n    get currentTabArea(): ApplicationShell.Area | undefined {\n        const currentWidget = this.currentWidget;\n        if (currentWidget) {\n            return this.getAreaFor(currentWidget);\n        }\n    }\n\n    /**\n     * Determine the name of the shell area where the given widget resides. The result is\n     * undefined if the widget does not reside directly in the shell.\n     */\n    getAreaFor(input: TabBar<Widget> | Widget): ApplicationShell.Area | undefined {\n        if (input instanceof TabBar) {\n            if (find(this.mainPanel.tabBars(), tb => tb === input)) {\n                return 'main';\n            }\n            if (find(this.bottomPanel.tabBars(), tb => tb === input)) {\n                return 'bottom';\n            }\n            if (this.leftPanelHandler.tabBar === input) {\n                return 'left';\n            }\n            if (this.rightPanelHandler.tabBar === input) {\n                return 'right';\n            }\n        }\n        const widget = this.toTrackedStack(input.id).pop();\n        if (!widget) {\n            return undefined;\n        }\n        const title = widget.title;\n        const mainPanelTabBar = this.mainPanel.findTabBar(title);\n        if (mainPanelTabBar) {\n            return 'main';\n        }\n        const bottomPanelTabBar = this.bottomPanel.findTabBar(title);\n        if (bottomPanelTabBar) {\n            return 'bottom';\n        }\n        if (ArrayExt.firstIndexOf(this.leftPanelHandler.tabBar.titles, title) > -1) {\n            return 'left';\n        }\n        if (ArrayExt.firstIndexOf(this.rightPanelHandler.tabBar.titles, title) > -1) {\n            return 'right';\n        }\n        return undefined;\n    }\n\n    protected getAreaPanelFor(input: Widget): DockPanel | undefined {\n        const widget = this.toTrackedStack(input.id).pop();\n        if (!widget) {\n            return undefined;\n        }\n        const title = widget.title;\n        const mainPanelTabBar = this.mainPanel.findTabBar(title);\n        if (mainPanelTabBar) {\n            return this.mainPanel;\n        }\n        const bottomPanelTabBar = this.bottomPanel.findTabBar(title);\n        if (bottomPanelTabBar) {\n            return this.bottomPanel;\n        }\n        if (ArrayExt.firstIndexOf(this.leftPanelHandler.tabBar.titles, title) > -1) {\n            return this.leftPanelHandler.dockPanel;\n        }\n        if (ArrayExt.firstIndexOf(this.rightPanelHandler.tabBar.titles, title) > -1) {\n            return this.rightPanelHandler.dockPanel;\n        }\n        return undefined;\n    }\n\n    /**\n     * Return the tab bar that has the currently active widget, or undefined.\n     */\n    get currentTabBar(): TabBar<Widget> | undefined {\n        const currentWidget = this.currentWidget;\n        if (currentWidget) {\n            return this.getTabBarFor(currentWidget);\n        }\n    }\n\n    /**\n     * Return the tab bar in the given shell area, or the tab bar that has the given widget, or undefined.\n     */\n    getTabBarFor(widgetOrArea: Widget | ApplicationShell.Area): TabBar<Widget> | undefined {\n        if (typeof widgetOrArea === 'string') {\n            switch (widgetOrArea) {\n                case 'main':\n                    return this.mainPanel.currentTabBar;\n                case 'bottom':\n                    return this.bottomPanel.currentTabBar;\n                case 'left':\n                    return this.leftPanelHandler.tabBar;\n                case 'right':\n                    return this.rightPanelHandler.tabBar;\n                default:\n                    throw new Error('Illegal argument: ' + widgetOrArea);\n            }\n        }\n        const widget = this.toTrackedStack(widgetOrArea.id).pop();\n        if (!widget) {\n            return undefined;\n        }\n        const widgetTitle = widget.title;\n        const mainPanelTabBar = this.mainPanel.findTabBar(widgetTitle);\n        if (mainPanelTabBar) {\n            return mainPanelTabBar;\n        }\n        const bottomPanelTabBar = this.bottomPanel.findTabBar(widgetTitle);\n        if (bottomPanelTabBar) {\n            return bottomPanelTabBar;\n        }\n        const leftPanelTabBar = this.leftPanelHandler.tabBar;\n        if (ArrayExt.firstIndexOf(leftPanelTabBar.titles, widgetTitle) > -1) {\n            return leftPanelTabBar;\n        }\n        const rightPanelTabBar = this.rightPanelHandler.tabBar;\n        if (ArrayExt.firstIndexOf(rightPanelTabBar.titles, widgetTitle) > -1) {\n            return rightPanelTabBar;\n        }\n        return undefined;\n    }\n\n    /**\n     * The tab bars contained in the main shell area. If there is no widget in the main area, the\n     * returned array is empty.\n     */\n    get mainAreaTabBars(): TabBar<Widget>[] {\n        return toArray(this.mainPanel.tabBars());\n    }\n\n    /**\n     * The tab bars contained in the bottom shell area. If there is no widget in the bottom area,\n     * the returned array is empty.\n     */\n    get bottomAreaTabBars(): TabBar<Widget>[] {\n        return toArray(this.bottomPanel.tabBars());\n    }\n\n    /**\n     * The tab bars contained in all shell areas.\n     */\n    get allTabBars(): TabBar<Widget>[] {\n        return [...this.mainAreaTabBars, ...this.bottomAreaTabBars, this.leftPanelHandler.tabBar, this.rightPanelHandler.tabBar];\n    }\n\n    /*\n     * Activate the next tab in the current tab bar.\n     */\n    activateNextTab(): void {\n        const current = this.currentTabBar;\n        if (current) {\n            const ci = current.currentIndex;\n            if (ci !== -1) {\n                if (ci < current.titles.length - 1) {\n                    current.currentIndex += 1;\n                    if (current.currentTitle) {\n                        current.currentTitle.owner.activate();\n                    }\n                } else if (ci === current.titles.length - 1) {\n                    const nextBar = this.nextTabBar(current);\n                    nextBar.currentIndex = 0;\n                    if (nextBar.currentTitle) {\n                        nextBar.currentTitle.owner.activate();\n                    }\n                }\n            }\n        }\n    }\n\n    /**\n     * Return the tab bar next to the given tab bar; return the given tab bar if there is no adjacent one.\n     */\n    private nextTabBar(current: TabBar<Widget>): TabBar<Widget> {\n        let bars = toArray(this.bottomPanel.tabBars());\n        let len = bars.length;\n        let ci = ArrayExt.firstIndexOf(bars, current);\n        if (ci < 0) {\n            bars = toArray(this.mainPanel.tabBars());\n            len = bars.length;\n            ci = ArrayExt.firstIndexOf(bars, current);\n        }\n        if (ci >= 0 && ci < len - 1) {\n            return bars[ci + 1];\n        } else if (ci >= 0 && ci === len - 1) {\n            return bars[0];\n        } else {\n            return current;\n        }\n    }\n\n    /*\n     * Activate the previous tab in the current tab bar.\n     */\n    activatePreviousTab(): void {\n        const current = this.currentTabBar;\n        if (current) {\n            const ci = current.currentIndex;\n            if (ci !== -1) {\n                if (ci > 0) {\n                    current.currentIndex -= 1;\n                    if (current.currentTitle) {\n                        current.currentTitle.owner.activate();\n                    }\n                } else if (ci === 0) {\n                    const prevBar = this.previousTabBar(current);\n                    const len = prevBar.titles.length;\n                    prevBar.currentIndex = len - 1;\n                    if (prevBar.currentTitle) {\n                        prevBar.currentTitle.owner.activate();\n                    }\n                }\n            }\n        }\n    }\n\n    /**\n     * Return the tab bar previous to the given tab bar; return the given tab bar if there is no adjacent one.\n     */\n    private previousTabBar(current: TabBar<Widget>): TabBar<Widget> {\n        const bars = toArray(this.mainPanel.tabBars());\n        const len = bars.length;\n        const ci = ArrayExt.firstIndexOf(bars, current);\n        if (ci > 0) {\n            return bars[ci - 1];\n        } else if (ci === 0) {\n            return bars[len - 1];\n        } else {\n            return current;\n        }\n    }\n\n    /**\n     * Test whether the current widget is dirty.\n     */\n    canSave(): boolean {\n        return Saveable.isDirty(this.currentWidget);\n    }\n\n    /**\n     * Save the current widget if it is dirty.\n     */\n    async save(): Promise<void> {\n        await Saveable.save(this.currentWidget);\n    }\n\n    /**\n     * Test whether there is a dirty widget.\n     */\n    canSaveAll(): boolean {\n        return this.tracker.widgets.some(Saveable.isDirty);\n    }\n\n    /**\n     * Save all dirty widgets.\n     */\n    async saveAll(): Promise<void> {\n        await Promise.all(this.tracker.widgets.map(Saveable.save));\n    }\n\n    /**\n     * Returns a snapshot of all tracked widgets to allow async modifications.\n     */\n    get widgets(): ReadonlyArray<Widget> {\n        return [...this.tracker.widgets];\n    }\n\n    canToggleMaximized(): boolean {\n        const area = this.currentWidget && this.getAreaFor(this.currentWidget);\n        return area === 'main' || area === 'bottom';\n    }\n\n    toggleMaximized(): void {\n        const area = this.currentWidget && this.getAreaPanelFor(this.currentWidget);\n        if (area instanceof TheiaDockPanel && (area === this.mainPanel || area === this.bottomPanel)) {\n            area.toggleMaximized();\n        }\n    }\n\n}\n\n/**\n * The namespace for `ApplicationShell` class statics.\n */\nexport namespace ApplicationShell {\n    /**\n     * The areas of the application shell where widgets can reside.\n     */\n    export type Area = 'main' | 'top' | 'left' | 'right' | 'bottom';\n\n    /**\n     * The _side areas_ are those shell areas that can be collapsed and expanded,\n     * i.e. `left`, `right`, and `bottom`.\n     */\n    export function isSideArea(area?: string): area is 'left' | 'right' | 'bottom' {\n        return area === 'left' || area === 'right' || area === 'bottom';\n    }\n\n    /**\n     * General options for the application shell. These are passed on construction and can be modified\n     * through dependency injection (`ApplicationShellOptions` symbol).\n     */\n    export interface Options extends Widget.IOptions {\n        bottomPanel: BottomPanelOptions;\n        leftPanel: SidePanel.Options;\n        rightPanel: SidePanel.Options;\n    }\n\n    export interface BottomPanelOptions extends SidePanel.Options {\n    }\n\n    /**\n     * The default values for application shell options.\n     */\n    export const DEFAULT_OPTIONS = Object.freeze(<Options>{\n        bottomPanel: Object.freeze(<BottomPanelOptions>{\n            emptySize: 140,\n            expandThreshold: 160,\n            expandDuration: 0,\n            initialSizeRatio: 0.382\n        }),\n        leftPanel: Object.freeze(<SidePanel.Options>{\n            emptySize: 140,\n            expandThreshold: 140,\n            expandDuration: 0,\n            initialSizeRatio: 0.191\n        }),\n        rightPanel: Object.freeze(<SidePanel.Options>{\n            emptySize: 140,\n            expandThreshold: 140,\n            expandDuration: 0,\n            initialSizeRatio: 0.191\n        })\n    });\n\n    /**\n     * Whether a widget should be opened to the side tab bar relatively to the reference widget.\n     */\n    export type OpenToSideMode = 'open-to-left' | 'open-to-right';\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    export function isOpenToSideMode(mode: OpenToSideMode | any): mode is OpenToSideMode {\n        return mode === 'open-to-left' || mode === 'open-to-right';\n    }\n\n    /**\n     * Options for adding a widget to the application shell.\n     */\n    export interface WidgetOptions extends SidePanel.WidgetOptions {\n        /**\n         * The area of the application shell where the widget will reside.\n         */\n        area?: Area;\n        /**\n         * The insertion mode for adding the widget.\n         *\n         * The default is `'tab-after'`.\n         */\n        mode?: DockLayout.InsertMode | OpenToSideMode\n        /**\n         * The reference widget for the insert location.\n         *\n         * The default is `undefined`.\n         */\n        ref?: Widget;\n    }\n\n    /**\n     * Data to save and load the application shell layout.\n     */\n    export interface LayoutData {\n        version?: string | ApplicationShellLayoutVersion,\n        mainPanel?: DockPanel.ILayoutConfig;\n        bottomPanel?: BottomPanelLayoutData;\n        leftPanel?: SidePanel.LayoutData;\n        rightPanel?: SidePanel.LayoutData;\n        activeWidgetId?: string;\n    }\n\n    /**\n     * Data to save and load the bottom panel layout.\n     */\n    export interface BottomPanelLayoutData {\n        config?: DockPanel.ILayoutConfig;\n        size?: number;\n        expanded?: boolean;\n    }\n\n    /**\n     * Exposes widgets which activation state should be tracked by shell.\n     */\n    export interface TrackableWidgetProvider {\n        getTrackableWidgets(): MaybePromise<Widget[]>\n        readonly onDidChangeTrackableWidgets?: CommonEvent<Widget[]>\n        /**\n         * Make visible and focus a trackable widget for the given id.\n         * If not implemented then `activate` request will be sent to a child widget directly.\n         */\n        activateWidget?(id: string): Widget | undefined;\n        /**\n         * Make visible a trackable widget for the given id.\n         * If not implemented then a widget should be always visible when an owner is visible.\n         */\n        revealWidget?(id: string): Widget | undefined;\n    }\n\n    export namespace TrackableWidgetProvider {\n        export function is(widget: object | undefined): widget is TrackableWidgetProvider {\n            return !!widget && 'getTrackableWidgets' in widget;\n        }\n    }\n\n}\n","/********************************************************************************\n * Copyright (C) 2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nexport * from './application-shell';\nexport * from './shell-layout-restorer';\nexport * from './side-panel-handler';\nexport * from './split-panels';\nexport * from './tab-bars';\nexport * from './view-contribution';\n","/********************************************************************************\n * Copyright (C) 2017 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { injectable, inject, named } from 'inversify';\nimport { Widget } from '@phosphor/widgets';\nimport { FrontendApplication } from '../frontend-application';\nimport { WidgetManager, WidgetConstructionOptions } from '../widget-manager';\nimport { StorageService } from '../storage-service';\nimport { ILogger } from '../../common/logger';\nimport { CommandContribution, CommandRegistry, Command } from '../../common/command';\nimport { ThemeService } from '../theming';\nimport { ContributionProvider } from '../../common/contribution-provider';\nimport { MaybePromise } from '../../common/types';\nimport { ApplicationShell, applicationShellLayoutVersion, ApplicationShellLayoutVersion } from './application-shell';\n\n/**\n * A contract for widgets that want to store and restore their inner state, between sessions.\n */\nexport interface StatefulWidget {\n\n    /**\n     * Called on unload to store the inner state.\n     */\n    storeState(): object;\n\n    /**\n     * Called when the widget got created by the storage service\n     */\n    restoreState(oldState: object): void;\n}\n\nexport namespace StatefulWidget {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    export function is(arg: any): arg is StatefulWidget {\n        return arg !== undefined && typeof arg['storeState'] === 'function' && typeof arg['restoreState'] === 'function';\n    }\n}\n\nexport interface WidgetDescription {\n    constructionOptions: WidgetConstructionOptions,\n    innerWidgetState?: string | object\n}\n\nexport interface ApplicationShellLayoutMigrationContext {\n    /**\n     * A resolved version of a current layout.\n     */\n    layoutVersion: number\n    /**\n     * A layout to be inflated.\n     */\n    layout: ApplicationShell.LayoutData\n    /**\n     * A parent widget is to be inflated. `undefined` if the application shell\n     */\n    parent?: Widget\n}\n\nexport interface ApplicationShellLayoutMigrationError extends Error {\n    code: 'ApplicationShellLayoutMigrationError'\n}\nexport namespace ApplicationShellLayoutMigrationError {\n    const code: ApplicationShellLayoutMigrationError['code'] = 'ApplicationShellLayoutMigrationError';\n    export function create(message?: string): ApplicationShellLayoutMigrationError {\n        return Object.assign(new Error(\n            `Could not migrate layout to version ${applicationShellLayoutVersion}.` + (message ? '\\n' + message : '')\n        ), { code });\n    }\n    export function is(error: Error | undefined): error is ApplicationShellLayoutMigrationError {\n        return !!error && 'code' in error && error['code'] === code;\n    }\n}\n\nexport const ApplicationShellLayoutMigration = Symbol('ApplicationShellLayoutMigration');\nexport interface ApplicationShellLayoutMigration {\n    /**\n     * A target migration version.\n     */\n    readonly layoutVersion: ApplicationShellLayoutVersion;\n\n    /**\n     * A migration can transform layout before it will be inflated.\n     *\n     * @throws `ApplicationShellLayoutMigrationError` if a layout cannot be migrated,\n     * in this case the default layout will be initialized.\n     */\n    onWillInflateLayout?(context: ApplicationShellLayoutMigrationContext): MaybePromise<void>;\n\n    /**\n     * A migration can transform the given description before it will be inflated.\n     *\n     * @returns a migrated widget description, or `undefined`\n     * @throws `ApplicationShellLayoutMigrationError` if a widget description cannot be migrated,\n     * in this case the default layout will be initialized.\n     */\n    onWillInflateWidget?(desc: WidgetDescription, context: ApplicationShellLayoutMigrationContext): MaybePromise<WidgetDescription | undefined>;\n}\n\nexport const RESET_LAYOUT: Command = {\n    id: 'reset.layout',\n    category: 'View',\n    label: 'Reset Workbench Layout'\n};\n\n@injectable()\nexport class ShellLayoutRestorer implements CommandContribution {\n\n    protected storageKey = 'layout';\n    protected shouldStoreLayout: boolean = true;\n\n    @inject(ContributionProvider) @named(ApplicationShellLayoutMigration)\n    protected readonly migrations: ContributionProvider<ApplicationShellLayoutMigration>;\n\n    constructor(\n        @inject(WidgetManager) protected widgetManager: WidgetManager,\n        @inject(ILogger) protected logger: ILogger,\n        @inject(StorageService) protected storageService: StorageService) { }\n\n    registerCommands(commands: CommandRegistry): void {\n        commands.registerCommand(RESET_LAYOUT, {\n            execute: async () => this.resetLayout()\n        });\n    }\n\n    protected async resetLayout(): Promise<void> {\n        this.logger.info('>>> Resetting layout...');\n        this.shouldStoreLayout = false;\n        this.storageService.setData(this.storageKey, undefined);\n        ThemeService.get().reset(); // Theme service cannot use DI, so the current theme ID is stored elsewhere. Hence the explicit reset.\n        this.logger.info('<<< The layout has been successfully reset.');\n        window.location.reload(true);\n    }\n\n    storeLayout(app: FrontendApplication): void {\n        if (this.shouldStoreLayout) {\n            try {\n                this.logger.info('>>> Storing the layout...');\n                const layoutData = app.shell.getLayoutData();\n                const serializedLayoutData = this.deflate(layoutData);\n                this.storageService.setData(this.storageKey, serializedLayoutData);\n                this.logger.info('<<< The layout has been successfully stored.');\n            } catch (error) {\n                this.storageService.setData(this.storageKey, undefined);\n                this.logger.error('Error during serialization of layout data', error);\n            }\n        }\n    }\n\n    async restoreLayout(app: FrontendApplication): Promise<boolean> {\n        this.logger.info('>>> Restoring the layout state...');\n        const serializedLayoutData = await this.storageService.getData<string>(this.storageKey);\n        if (serializedLayoutData === undefined) {\n            this.logger.info('<<< Nothing to restore.');\n            return false;\n        }\n        const layoutData = await this.inflate(serializedLayoutData);\n        await app.shell.setLayoutData(layoutData);\n        this.logger.info('<<< The layout has been successfully restored.');\n        return true;\n    }\n\n    protected isWidgetProperty(propertyName: string): boolean {\n        return propertyName === 'widget';\n    }\n\n    protected isWidgetsProperty(propertyName: string): boolean {\n        return propertyName === 'widgets';\n    }\n\n    /**\n     * Turns the layout data to a string representation.\n     */\n    protected deflate(data: object): string {\n        return JSON.stringify(data, (property: string, value) => {\n            if (this.isWidgetProperty(property)) {\n                const description = this.convertToDescription(value as Widget);\n                return description;\n            } else if (this.isWidgetsProperty(property)) {\n                const descriptions: WidgetDescription[] = [];\n                for (const widget of (value as Widget[])) {\n                    const description = this.convertToDescription(widget);\n                    if (description) {\n                        descriptions.push(description);\n                    }\n                }\n                return descriptions;\n            }\n            return value;\n        });\n    }\n\n    private convertToDescription(widget: Widget): WidgetDescription | undefined {\n        const desc = this.widgetManager.getDescription(widget);\n        if (desc) {\n            let innerState = undefined;\n            if (StatefulWidget.is(widget)) {\n                innerState = widget.storeState();\n            }\n            return {\n                constructionOptions: desc,\n                innerWidgetState: innerState && this.deflate(innerState)\n            };\n        }\n    }\n\n    /**\n     * Creates the layout data from its string representation.\n     */\n    protected async inflate(layoutData: string): Promise<ApplicationShell.LayoutData> {\n        const parseContext = new ShellLayoutRestorer.ParseContext();\n        const layout = this.parse<ApplicationShell.LayoutData>(layoutData, parseContext);\n\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        let layoutVersion: number | any;\n        try {\n            layoutVersion = 'version' in layout && Number(layout.version);\n        } catch { /* no-op */ }\n        if (typeof layoutVersion !== 'number' || Number.isNaN(layoutVersion)) {\n            throw new Error('could not resolve a layout version');\n        }\n        if (layoutVersion !== applicationShellLayoutVersion) {\n            if (layoutVersion < applicationShellLayoutVersion) {\n                console.warn(`Layout version ${layoutVersion} is behind current layout version ${applicationShellLayoutVersion}, trying to migrate...`);\n            } else {\n                console.warn(`Layout version ${layoutVersion} is ahead current layout version ${applicationShellLayoutVersion}, trying to load anyway...`);\n            }\n            console.info(`Please use '${RESET_LAYOUT.label}' command if the layout looks bogus.`);\n        }\n\n        const migrations = this.migrations.getContributions()\n            .filter(m => m.layoutVersion > layoutVersion && m.layoutVersion <= applicationShellLayoutVersion)\n            .sort((m, m2) => m.layoutVersion - m2.layoutVersion);\n        if (migrations.length) {\n            console.info(`Found ${migrations.length} migrations from layout version ${layoutVersion} to version ${applicationShellLayoutVersion}, migrating...`);\n        }\n\n        const context = { layout, layoutVersion, migrations };\n        await this.fireWillInflateLayout(context);\n        await parseContext.inflate(context);\n        return layout;\n    }\n\n    protected async fireWillInflateLayout(context: ShellLayoutRestorer.InflateContext): Promise<void> {\n        for (const migration of context.migrations) {\n            if (migration.onWillInflateLayout) {\n                // don't catch exceptions, if one migration fails all should fail.\n                await migration.onWillInflateLayout(context);\n            }\n        }\n    }\n\n    protected parse<T>(layoutData: string, parseContext: ShellLayoutRestorer.ParseContext): T {\n        return JSON.parse(layoutData, (property: string, value) => {\n            if (this.isWidgetsProperty(property)) {\n                const widgets: (Widget | undefined)[] = [];\n                const descs = (value as WidgetDescription[]);\n                for (let i = 0; i < descs.length; i++) {\n                    parseContext.push(async context => {\n                        widgets[i] = await this.convertToWidget(descs[i], context);\n                    });\n                }\n                return widgets;\n            } else if (value && typeof value === 'object' && !Array.isArray(value)) {\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                const copy: any = {};\n                for (const p in value) {\n                    if (this.isWidgetProperty(p)) {\n                        parseContext.push(async context => {\n                            copy[p] = await this.convertToWidget(value[p], context);\n                        });\n                    } else {\n                        copy[p] = value[p];\n                    }\n                }\n                return copy;\n            }\n            return value;\n        });\n    }\n\n    protected async fireWillInflateWidget(desc: WidgetDescription, context: ShellLayoutRestorer.InflateContext): Promise<WidgetDescription> {\n        for (const migration of context.migrations) {\n            if (migration.onWillInflateWidget) {\n                // don't catch exceptions, if one migration fails all should fail.\n                const migrated = await migration.onWillInflateWidget(desc, context);\n                if (migrated) {\n                    if (migrated.innerWidgetState && typeof migrated.innerWidgetState !== 'string') {\n                        // in order to inflate nested widgets\n                        migrated.innerWidgetState = JSON.stringify(migrated.innerWidgetState);\n                    }\n                    desc = migrated;\n                }\n            }\n        }\n        return desc;\n    }\n\n    protected async convertToWidget(desc: WidgetDescription, context: ShellLayoutRestorer.InflateContext): Promise<Widget | undefined> {\n        if (!desc.constructionOptions) {\n            return undefined;\n        }\n        try {\n            desc = await this.fireWillInflateWidget(desc, context);\n            const widget = await this.widgetManager.getOrCreateWidget(desc.constructionOptions.factoryId, desc.constructionOptions.options);\n            if (StatefulWidget.is(widget) && desc.innerWidgetState !== undefined) {\n                try {\n                    let oldState: object;\n                    if (typeof desc.innerWidgetState === 'string') {\n                        const parseContext = new ShellLayoutRestorer.ParseContext();\n                        oldState = this.parse(desc.innerWidgetState, parseContext);\n                        await parseContext.inflate({ ...context, parent: widget });\n                    } else {\n                        oldState = desc.innerWidgetState;\n                    }\n                    widget.restoreState(oldState);\n                } catch (e) {\n                    if (ApplicationShellLayoutMigrationError.is(e)) {\n                        throw e;\n                    }\n                    this.logger.warn(`Couldn't restore widget state for ${widget.id}. Error: ${e} `);\n                }\n            }\n            if (widget.isDisposed) {\n                return undefined;\n            }\n            return widget;\n        } catch (e) {\n            if (ApplicationShellLayoutMigrationError.is(e)) {\n                throw e;\n            }\n            this.logger.warn(`Couldn't restore widget for ${desc.constructionOptions.factoryId}. Error: ${e} `);\n            return undefined;\n        }\n    }\n\n}\nexport namespace ShellLayoutRestorer {\n    export class ParseContext {\n        protected readonly toInflate: Inflate[] = [];\n\n        push(toInflate: Inflate): void {\n            this.toInflate.push(toInflate);\n        }\n\n        async inflate(context: InflateContext): Promise<void> {\n            const pending: Promise<void>[] = [];\n            while (this.toInflate.length) {\n                pending.push(this.toInflate.pop()!(context));\n            }\n            await Promise.all(pending);\n        }\n    }\n    export type Inflate = (context: InflateContext) => Promise<void>;\n    export interface InflateContext extends ApplicationShellLayoutMigrationContext {\n        readonly migrations: ApplicationShellLayoutMigration[];\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { injectable, inject } from 'inversify';\nimport { find, map, toArray, some } from '@phosphor/algorithm';\nimport { TabBar, Widget, DockPanel, Title, Panel, BoxPanel, BoxLayout, SplitPanel } from '@phosphor/widgets';\nimport { MimeData } from '@phosphor/coreutils';\nimport { Drag } from '@phosphor/dragdrop';\nimport { AttachedProperty } from '@phosphor/properties';\nimport { TabBarRendererFactory, TabBarRenderer, SHELL_TABBAR_CONTEXT_MENU, SideTabBar } from './tab-bars';\nimport { SplitPositionHandler, SplitPositionOptions } from './split-panels';\nimport { animationFrame } from '../browser';\nimport { FrontendApplicationStateService } from '../frontend-application-state';\nimport { TheiaDockPanel } from './theia-dock-panel';\nimport { SidePanelToolbar } from './side-panel-toolbar';\nimport { TabBarToolbarRegistry, TabBarToolbarFactory, TabBarToolbar } from './tab-bar-toolbar';\nimport { DisposableCollection, Disposable } from '../../common/disposable';\nimport { ContextMenuRenderer } from '../context-menu-renderer';\nimport { MenuPath } from '../../common/menu';\n\n/** The class name added to the left and right area panels. */\nexport const LEFT_RIGHT_AREA_CLASS = 'theia-app-sides';\n\n/** The class name added to collapsed side panels. */\nconst COLLAPSED_CLASS = 'theia-mod-collapsed';\n\nexport const SidePanelHandlerFactory = Symbol('SidePanelHandlerFactory');\n\nexport const SIDE_PANEL_TOOLBAR_CONTEXT_MENU: MenuPath = ['SIDE_PANEL_TOOLBAR_CONTEXT_MENU'];\n\n/**\n * A class which manages a dock panel and a related side bar. This is used for the left and right\n * panel of the application shell.\n */\n@injectable()\nexport class SidePanelHandler {\n\n    /**\n     * A property that can be attached to widgets in order to determine the insertion index\n     * of their title in the tab bar.\n     */\n    protected static readonly rankProperty = new AttachedProperty<Widget, number | undefined>({\n        name: 'sidePanelRank',\n        create: () => undefined\n    });\n\n    /**\n     * The tab bar displays the titles of the widgets in the side panel. Visibility of the widgets\n     * is controlled entirely through tab selection: a widget is revealed by setting the `currentTitle`\n     * accordingly in the tab bar, and the panel is hidden by setting that property to `null`. The\n     * tab bar itself remains visible as long as there is at least one widget.\n     */\n    tabBar: SideTabBar;\n    /**\n     * A tool bar, which displays a title and widget specific command buttons.\n     */\n    toolBar: SidePanelToolbar;\n    /**\n     * The widget container is a dock panel in `single-document` mode, which means that the panel\n     * cannot be split.\n     */\n    dockPanel: TheiaDockPanel;\n    /**\n     * The panel that contains the tab bar and the dock panel. This one is hidden whenever the dock\n     * panel is empty.\n     */\n    container: Panel;\n    /**\n     * The current state of the side panel.\n     */\n    readonly state: SidePanel.State = {\n        empty: true,\n        expansion: SidePanel.ExpansionState.collapsed,\n        pendingUpdate: Promise.resolve()\n    };\n\n    /**\n     * The shell area where the panel is placed. This property should not be modified directly, but\n     * only by calling `create`.\n     */\n    protected side: 'left' | 'right';\n    /**\n     * Options that control the behavior of the side panel.\n     */\n    protected options: SidePanel.Options;\n\n    @inject(TabBarToolbarRegistry) protected tabBarToolBarRegistry: TabBarToolbarRegistry;\n    @inject(TabBarToolbarFactory) protected tabBarToolBarFactory: () => TabBarToolbar;\n    @inject(TabBarRendererFactory) protected tabBarRendererFactory: () => TabBarRenderer;\n    @inject(SplitPositionHandler) protected splitPositionHandler: SplitPositionHandler;\n    @inject(FrontendApplicationStateService) protected readonly applicationStateService: FrontendApplicationStateService;\n\n    @inject(ContextMenuRenderer)\n    protected readonly contextMenuRenderer: ContextMenuRenderer;\n\n    /**\n     * Create the side bar and dock panel widgets.\n     */\n    create(side: 'left' | 'right', options: SidePanel.Options): void {\n        this.side = side;\n        this.options = options;\n        this.tabBar = this.createSideBar();\n        this.toolBar = this.createToolbar();\n        this.dockPanel = this.createSidePanel();\n        this.container = this.createContainer();\n\n        this.refresh();\n    }\n\n    protected createSideBar(): SideTabBar {\n        const side = this.side;\n        const tabBarRenderer = this.tabBarRendererFactory();\n        const sideBar = new SideTabBar({\n            // Tab bar options\n            orientation: side === 'left' || side === 'right' ? 'vertical' : 'horizontal',\n            insertBehavior: 'none',\n            removeBehavior: 'select-previous-tab',\n            allowDeselect: false,\n            tabsMovable: true,\n            renderer: tabBarRenderer,\n            // Scroll bar options\n            handlers: ['drag-thumb', 'keyboard', 'wheel', 'touch'],\n            useBothWheelAxes: true,\n            scrollYMarginOffset: 8,\n            suppressScrollX: true\n        });\n        tabBarRenderer.tabBar = sideBar;\n        tabBarRenderer.contextMenuPath = SHELL_TABBAR_CONTEXT_MENU;\n        sideBar.addClass('theia-app-' + side);\n        sideBar.addClass(LEFT_RIGHT_AREA_CLASS);\n\n        sideBar.tabAdded.connect((sender, { title }) => {\n            const widget = title.owner;\n            if (!some(this.dockPanel.widgets(), w => w === widget)) {\n                this.dockPanel.addWidget(widget);\n            }\n        }, this);\n        sideBar.tabActivateRequested.connect((sender, { title }) => title.owner.activate());\n        sideBar.tabCloseRequested.connect((sender, { title }) => title.owner.close());\n        sideBar.collapseRequested.connect(() => this.collapse(), this);\n        sideBar.currentChanged.connect(this.onCurrentTabChanged, this);\n        sideBar.tabDetachRequested.connect(this.onTabDetachRequested, this);\n        return sideBar;\n    }\n\n    protected createSidePanel(): TheiaDockPanel {\n        const sidePanel = new TheiaDockPanel({\n            mode: 'single-document'\n        });\n        sidePanel.id = 'theia-' + this.side + '-side-panel';\n        sidePanel.addClass('theia-side-panel');\n\n        sidePanel.widgetActivated.connect((sender, widget) => {\n            this.tabBar.currentTitle = widget.title;\n        }, this);\n        sidePanel.widgetAdded.connect(this.onWidgetAdded, this);\n        sidePanel.widgetRemoved.connect(this.onWidgetRemoved, this);\n        return sidePanel;\n    }\n\n    protected createToolbar(): SidePanelToolbar {\n        const toolbar = new SidePanelToolbar(this.tabBarToolBarRegistry, this.tabBarToolBarFactory, this.side);\n        toolbar.onContextMenu(e => this.showContextMenu(e));\n        return toolbar;\n    }\n\n    protected showContextMenu(e: MouseEvent): void {\n        const title = this.tabBar.currentTitle;\n        if (!title) {\n            return;\n        }\n        e.stopPropagation();\n        e.preventDefault();\n\n        this.contextMenuRenderer.render({\n            args: [title.owner],\n            menuPath: SIDE_PANEL_TOOLBAR_CONTEXT_MENU,\n            anchor: e\n        });\n    }\n\n    protected createContainer(): Panel {\n        const contentBox = new BoxLayout({ direction: 'top-to-bottom', spacing: 0 });\n        BoxPanel.setStretch(this.toolBar, 0);\n        contentBox.addWidget(this.toolBar);\n        BoxPanel.setStretch(this.dockPanel, 1);\n        contentBox.addWidget(this.dockPanel);\n        const contentPanel = new BoxPanel({ layout: contentBox });\n\n        const side = this.side;\n        let direction: BoxLayout.Direction;\n        switch (side) {\n            case 'left':\n                direction = 'left-to-right';\n                break;\n            case 'right':\n                direction = 'right-to-left';\n                break;\n            default:\n                throw new Error('Illegal argument: ' + side);\n        }\n        const containerLayout = new BoxLayout({ direction, spacing: 0 });\n        BoxPanel.setStretch(this.tabBar, 0);\n        containerLayout.addWidget(this.tabBar);\n        BoxPanel.setStretch(contentPanel, 1);\n        containerLayout.addWidget(contentPanel);\n        const boxPanel = new BoxPanel({ layout: containerLayout });\n        boxPanel.id = 'theia-' + side + '-content-panel';\n        return boxPanel;\n    }\n\n    /**\n     * Create an object that describes the current side panel layout. This object may contain references\n     * to widgets; these need to be transformed before the layout can be serialized.\n     */\n    getLayoutData(): SidePanel.LayoutData {\n        const currentTitle = this.tabBar.currentTitle;\n        const items = toArray(map(this.tabBar.titles, title => <SidePanel.WidgetItem>{\n            widget: title.owner,\n            rank: SidePanelHandler.rankProperty.get(title.owner),\n            expanded: title === currentTitle\n        }));\n        // eslint-disable-next-line no-null/no-null\n        const size = currentTitle !== null ? this.getPanelSize() : this.state.lastPanelSize;\n        return { type: 'sidepanel', items, size };\n    }\n\n    /**\n     * Apply a side panel layout that has been previously created with `getLayoutData`.\n     */\n    setLayoutData(layoutData: SidePanel.LayoutData): void {\n        // eslint-disable-next-line no-null/no-null\n        this.tabBar.currentTitle = null;\n\n        let currentTitle: Title<Widget> | undefined;\n        if (layoutData.items) {\n            for (const { widget, rank, expanded } of layoutData.items) {\n                if (widget) {\n                    if (rank) {\n                        SidePanelHandler.rankProperty.set(widget, rank);\n                    }\n                    if (expanded) {\n                        currentTitle = widget.title;\n                    }\n                    // Add the widgets directly to the tab bar in the same order as they are stored\n                    this.tabBar.addTab(widget.title);\n                }\n            }\n        }\n        if (layoutData.size) {\n            this.state.lastPanelSize = layoutData.size;\n        }\n\n        // If the layout data contains an expanded item, update the currentTitle property\n        // This implies a refresh through the `currentChanged` signal\n        if (currentTitle) {\n            this.tabBar.currentTitle = currentTitle;\n        } else {\n            this.refresh();\n        }\n    }\n\n    /**\n     * Activate a widget residing in the side panel by ID.\n     *\n     * @returns the activated widget if it was found\n     */\n    activate(id: string): Widget | undefined {\n        const widget = this.expand(id);\n        if (widget) {\n            widget.activate();\n        }\n        return widget;\n    }\n\n    /**\n     * Expand a widget residing in the side panel by ID. If no ID is given and the panel is\n     * currently collapsed, the last active tab of this side panel is expanded. If no tab\n     * was expanded previously, the first one is taken.\n     *\n     * @returns the expanded widget if it was found\n     */\n    expand(id?: string): Widget | undefined {\n        if (id) {\n            const widget = find(this.dockPanel.widgets(), w => w.id === id);\n            if (widget) {\n                this.tabBar.currentTitle = widget.title;\n            }\n            return widget;\n        } else if (this.tabBar.currentTitle) {\n            return this.tabBar.currentTitle.owner;\n        } else if (this.tabBar.titles.length > 0) {\n            let index = this.state.lastActiveTabIndex;\n            if (!index) {\n                index = 0;\n            } else if (index >= this.tabBar.titles.length) {\n                index = this.tabBar.titles.length - 1;\n            }\n            const title = this.tabBar.titles[index];\n            this.tabBar.currentTitle = title;\n            return title.owner;\n        } else {\n            // Reveal the tab bar and dock panel even if there is no widget\n            // The next call to `refreshVisibility` will collapse them again\n            this.state.expansion = SidePanel.ExpansionState.expanding;\n            let relativeSizes: number[] | undefined;\n            const parent = this.container.parent;\n            if (parent instanceof SplitPanel) {\n                relativeSizes = parent.relativeSizes();\n            }\n            this.container.removeClass(COLLAPSED_CLASS);\n            this.container.show();\n            this.tabBar.show();\n            this.dockPanel.node.style.minWidth = '0';\n            this.dockPanel.show();\n            if (relativeSizes && parent instanceof SplitPanel) {\n                // Make sure that the expansion animation starts at zero size\n                parent.setRelativeSizes(relativeSizes);\n            }\n            this.setPanelSize(this.options.emptySize).then(() => {\n                if (this.state.expansion === SidePanel.ExpansionState.expanding) {\n                    this.state.expansion = SidePanel.ExpansionState.expanded;\n                }\n            });\n        }\n    }\n\n    /**\n     * Collapse the sidebar so no items are expanded.\n     */\n    collapse(): Promise<void> {\n        if (this.tabBar.currentTitle) {\n            // eslint-disable-next-line no-null/no-null\n            this.tabBar.currentTitle = null;\n        } else {\n            this.refresh();\n        }\n        return animationFrame();\n    }\n\n    /**\n     * Add a widget and its title to the dock panel and side bar.\n     *\n     * If the widget is already added, it will be moved.\n     */\n    addWidget(widget: Widget, options: SidePanel.WidgetOptions): void {\n        if (options.rank) {\n            SidePanelHandler.rankProperty.set(widget, options.rank);\n        }\n        this.dockPanel.addWidget(widget);\n    }\n\n    // should be a property to preserve fn identity\n    protected updateToolbarTitle = (): void => {\n        const currentTitle = this.tabBar && this.tabBar.currentTitle;\n        this.toolBar.toolbarTitle = currentTitle || undefined;\n    };\n\n    /**\n     * Refresh the visibility of the side bar and dock panel.\n     */\n    refresh(): void {\n        const container = this.container;\n        const parent = container.parent;\n        const tabBar = this.tabBar;\n        const dockPanel = this.dockPanel;\n        const isEmpty = tabBar.titles.length === 0;\n        const currentTitle = tabBar.currentTitle;\n        // eslint-disable-next-line no-null/no-null\n        const hideDockPanel = currentTitle === null;\n        let relativeSizes: number[] | undefined;\n\n        if (hideDockPanel) {\n            container.addClass(COLLAPSED_CLASS);\n            if (this.state.expansion === SidePanel.ExpansionState.expanded && !this.state.empty) {\n                // Update the lastPanelSize property\n                const size = this.getPanelSize();\n                if (size) {\n                    this.state.lastPanelSize = size;\n                }\n            }\n            this.state.expansion = SidePanel.ExpansionState.collapsed;\n        } else {\n            container.removeClass(COLLAPSED_CLASS);\n            let size: number | undefined;\n            if (this.state.expansion !== SidePanel.ExpansionState.expanded) {\n                if (this.state.lastPanelSize) {\n                    size = this.state.lastPanelSize;\n                } else {\n                    size = this.getDefaultPanelSize();\n                }\n            }\n            if (size) {\n                // Restore the panel size to the last known size or the default size\n                this.state.expansion = SidePanel.ExpansionState.expanding;\n                if (parent instanceof SplitPanel) {\n                    relativeSizes = parent.relativeSizes();\n                }\n                this.setPanelSize(size).then(() => {\n                    if (this.state.expansion === SidePanel.ExpansionState.expanding) {\n                        this.state.expansion = SidePanel.ExpansionState.expanded;\n                    }\n                });\n            } else {\n                this.state.expansion = SidePanel.ExpansionState.expanded;\n            }\n        }\n        container.setHidden(isEmpty && hideDockPanel);\n        tabBar.setHidden(isEmpty);\n        dockPanel.setHidden(hideDockPanel);\n        this.state.empty = isEmpty;\n        if (currentTitle) {\n            dockPanel.selectWidget(currentTitle.owner);\n        }\n        if (relativeSizes && parent instanceof SplitPanel) {\n            // Make sure that the expansion animation starts at the smallest possible size\n            parent.setRelativeSizes(relativeSizes);\n        }\n    }\n\n    /**\n     * Sets the size of the side panel.\n     *\n     * @param size the desired size (width) of the panel in pixels.\n     */\n    resize(size: number): void {\n        if (this.dockPanel.isHidden) {\n            this.state.lastPanelSize = size;\n        } else {\n            this.setPanelSize(size);\n        }\n    }\n\n    /**\n     * Compute the current width of the panel. This implementation assumes that the parent of\n     * the panel container is a `SplitPanel`.\n     */\n    protected getPanelSize(): number | undefined {\n        const parent = this.container.parent;\n        if (parent instanceof SplitPanel && parent.isVisible) {\n            const index = parent.widgets.indexOf(this.container);\n            if (this.side === 'left') {\n                const handle = parent.handles[index];\n                if (!handle.classList.contains('p-mod-hidden')) {\n                    return handle.offsetLeft;\n                }\n            } else if (this.side === 'right') {\n                const handle = parent.handles[index - 1];\n                if (!handle.classList.contains('p-mod-hidden')) {\n                    const parentWidth = parent.node.clientWidth;\n                    return parentWidth - handle.offsetLeft;\n                }\n            }\n        }\n    }\n\n    /**\n     * Determine the default size to apply when the panel is expanded for the first time.\n     */\n    protected getDefaultPanelSize(): number | undefined {\n        const parent = this.container.parent;\n        if (parent && parent.isVisible) {\n            return parent.node.clientWidth * this.options.initialSizeRatio;\n        }\n    }\n\n    /**\n     * Modify the width of the panel. This implementation assumes that the parent of the panel\n     * container is a `SplitPanel`.\n     */\n    protected setPanelSize(size: number): Promise<void> {\n        const enableAnimation = this.applicationStateService.state === 'ready';\n        const options: SplitPositionOptions = {\n            side: this.side,\n            duration: enableAnimation ? this.options.expandDuration : 0,\n            referenceWidget: this.dockPanel\n        };\n        const promise = this.splitPositionHandler.setSidePanelSize(this.container, size, options);\n        const result = new Promise<void>(resolve => {\n            // Resolve the resulting promise in any case, regardless of whether resizing was successful\n            promise.then(() => resolve(), () => resolve());\n        });\n        this.state.pendingUpdate = this.state.pendingUpdate.then(() => result);\n        return result;\n    }\n\n    protected readonly toDisposeOnCurrentTabChanged = new DisposableCollection();\n\n    /**\n     * Handle a `currentChanged` signal from the sidebar. The side panel is refreshed so it displays\n     * the new selected widget.\n     */\n    protected onCurrentTabChanged(sender: SideTabBar, { currentTitle, currentIndex }: TabBar.ICurrentChangedArgs<Widget>): void {\n        this.toDisposeOnCurrentTabChanged.dispose();\n        if (currentTitle) {\n            this.updateToolbarTitle();\n            currentTitle.changed.connect(this.updateToolbarTitle);\n            this.toDisposeOnCurrentTabChanged.push(Disposable.create(() => currentTitle.changed.disconnect(this.updateToolbarTitle)));\n        }\n        if (currentIndex >= 0) {\n            this.state.lastActiveTabIndex = currentIndex;\n            sender.revealTab(currentIndex);\n        }\n        this.refresh();\n    }\n\n    /**\n     * Handle a `tabDetachRequested` signal from the sidebar. A drag is started so the widget can be\n     * moved to another application shell area.\n     */\n    protected onTabDetachRequested(sender: SideTabBar,\n        { title, tab, clientX, clientY }: TabBar.ITabDetachRequestedArgs<Widget>): void {\n        // Release the tab bar's hold on the mouse\n        sender.releaseMouse();\n\n        // Clone the selected tab and use that as drag image\n        /* eslint-disable no-null/no-null */\n        const clonedTab = tab.cloneNode(true) as HTMLElement;\n        clonedTab.style.width = null;\n        clonedTab.style.height = null;\n        const label = clonedTab.getElementsByClassName('p-TabBar-tabLabel')[0] as HTMLElement;\n        label.style.width = null;\n        label.style.height = null;\n        /* eslint-enable no-null/no-null */\n\n        // Create and start a drag to move the selected tab to another panel\n        const mimeData = new MimeData();\n        mimeData.setData('application/vnd.phosphor.widget-factory', () => title.owner);\n        const drag = new Drag({\n            mimeData,\n            dragImage: clonedTab,\n            proposedAction: 'move',\n            supportedActions: 'move',\n        });\n\n        tab.classList.add('p-mod-hidden');\n        drag.start(clientX, clientY).then(() => {\n            // The promise is resolved when the drag has ended\n            tab.classList.remove('p-mod-hidden');\n        });\n    }\n\n    /*\n     * Handle the `widgetAdded` signal from the dock panel. The widget's title is inserted into the\n     * tab bar according to the `rankProperty` value that may be attached to the widget.\n     */\n    protected onWidgetAdded(sender: DockPanel, widget: Widget): void {\n        const titles = this.tabBar.titles;\n        if (!find(titles, t => t.owner === widget)) {\n            const rank = SidePanelHandler.rankProperty.get(widget);\n            let index = titles.length;\n            if (rank !== undefined) {\n                for (let i = index - 1; i >= 0; i--) {\n                    const r = SidePanelHandler.rankProperty.get(titles[i].owner);\n                    if (r !== undefined && r > rank) {\n                        index = i;\n                    }\n                }\n            }\n            this.tabBar.insertTab(index, widget.title);\n            this.refresh();\n        }\n    }\n\n    /*\n     * Handle the `widgetRemoved` signal from the dock panel. The widget's title is also removed\n     * from the tab bar.\n     */\n    protected onWidgetRemoved(sender: DockPanel, widget: Widget): void {\n        this.tabBar.removeTab(widget.title);\n        this.refresh();\n    }\n\n}\n\nexport namespace SidePanel {\n    /**\n     * Options that control the behavior of side panels.\n     */\n    export interface Options {\n        /**\n         * When a widget is being dragged and the distance of the mouse cursor to the shell border\n         * is below this threshold, the respective side panel is expanded so the widget can be dropped\n         * into that panel. Set this to `-1` to disable expanding the side panel while dragging.\n         */\n        expandThreshold: number;\n        /**\n         * The duration in milliseconds of the animation shown when a side panel is expanded.\n         * Set this to `0` to disable expansion animation.\n         */\n        expandDuration: number;\n        /**\n         * The ratio of the available shell size to use as initial size for the side panel.\n         */\n        initialSizeRatio: number\n        /**\n         * How large the panel should be when it's expanded and empty.\n         */\n        emptySize: number;\n    }\n\n    /**\n     * The options for adding a widget to a side panel.\n     */\n    export interface WidgetOptions {\n        /**\n         * The rank order of the widget among its siblings.\n         */\n        rank?: number;\n    }\n\n    /**\n     * Data to save and load the layout of a side panel.\n     */\n    export interface LayoutData {\n        type: 'sidepanel',\n        items?: WidgetItem[];\n        size?: number;\n    }\n\n    /**\n     * Data structure used to save and restore the side panel layout.\n     */\n    export interface WidgetItem extends WidgetOptions {\n        /** Can be undefined in case the widget could not be restored. */\n        widget?: Widget;\n        expanded?: boolean;\n    }\n\n    export interface State {\n        /**\n         * Indicates whether the panel is empty.\n         */\n        empty: boolean;\n        /**\n         * Indicates whether the panel is expanded, collapsed, or in a transition between the two.\n         */\n        expansion: ExpansionState;\n        /**\n         * A promise that is resolved when the currently pending side panel updates are done.\n         */\n        pendingUpdate: Promise<void>;\n        /**\n         * The index of the last tab that was selected. When the panel is expanded, it tries to restore\n         * the tab selection to the previous state.\n         */\n        lastActiveTabIndex?: number;\n        /**\n         * The width or height of the panel before it was collapsed. When the panel is expanded, it tries\n         * to restore its size to this value.\n         */\n        lastPanelSize?: number;\n    }\n\n    export enum ExpansionState {\n        collapsed = 'collapsed',\n        expanding = 'expanding',\n        expanded = 'expanded',\n        collapsing = 'collapsing'\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2019 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { Widget, Title } from '@phosphor/widgets';\nimport { TabBarToolbar, TabBarToolbarRegistry, TabBarToolbarFactory } from './tab-bar-toolbar';\nimport { Message } from '@phosphor/messaging';\nimport { BaseWidget } from '../widgets';\nimport { Emitter } from '../../common/event';\n\nexport class SidePanelToolbar extends BaseWidget {\n\n    protected titleContainer: HTMLElement | undefined;\n    private _toolbarTitle: Title<Widget> | undefined;\n    protected toolbar: TabBarToolbar | undefined;\n\n    protected readonly onContextMenuEmitter = new Emitter<MouseEvent>();\n    readonly onContextMenu = this.onContextMenuEmitter.event;\n\n    constructor(\n        protected readonly tabBarToolbarRegistry: TabBarToolbarRegistry,\n        protected readonly tabBarToolbarFactory: TabBarToolbarFactory,\n        protected readonly side: 'left' | 'right') {\n        super();\n        this.toDispose.push(this.onContextMenuEmitter);\n        this.init();\n        this.tabBarToolbarRegistry.onDidChange(() => this.update());\n    }\n\n    protected onBeforeAttach(msg: Message): void {\n        super.onBeforeAttach(msg);\n        if (this.titleContainer) {\n            this.addEventListener(this.titleContainer, 'contextmenu', e => this.onContextMenuEmitter.fire(e));\n        }\n    }\n\n    protected onAfterAttach(msg: Message): void {\n        if (this.toolbar) {\n            if (this.toolbar.isAttached) {\n                Widget.detach(this.toolbar);\n            }\n            Widget.attach(this.toolbar, this.node);\n        }\n        super.onAfterAttach(msg);\n    }\n\n    protected onBeforeDetach(msg: Message): void {\n        if (this.titleContainer) {\n            this.node.removeChild(this.titleContainer);\n        }\n        if (this.toolbar && this.toolbar.isAttached) {\n            Widget.detach(this.toolbar);\n        }\n        super.onBeforeDetach(msg);\n    }\n\n    protected onUpdateRequest(msg: Message): void {\n        super.onUpdateRequest(msg);\n        this.updateToolbar();\n    }\n\n    protected updateToolbar(): void {\n        if (!this.toolbar) {\n            return;\n        }\n        const current = this._toolbarTitle;\n        const widget = current && current.owner || undefined;\n        const items = widget ? this.tabBarToolbarRegistry.visibleItems(widget) : [];\n        this.toolbar.updateItems(items, widget);\n    }\n\n    protected init(): void {\n        this.titleContainer = document.createElement('div');\n        this.titleContainer.classList.add('theia-sidepanel-title');\n        this.titleContainer.classList.add('noWrapInfo');\n        this.titleContainer.classList.add('noselect');\n        this.node.appendChild(this.titleContainer);\n        this.node.classList.add('theia-sidepanel-toolbar');\n        this.node.classList.add(`theia-${this.side}-side-panel`);\n        this.toolbar = this.tabBarToolbarFactory();\n        this.update();\n    }\n\n    set toolbarTitle(title: Title<Widget> | undefined) {\n        if (this.titleContainer && title) {\n            this._toolbarTitle = title;\n            this.titleContainer.innerText = this._toolbarTitle.label;\n            this.titleContainer.title = this._toolbarTitle.caption || this._toolbarTitle.label;\n            this.update();\n        }\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { injectable } from 'inversify';\nimport { SplitPanel, SplitLayout, Widget } from '@phosphor/widgets';\n\nexport interface SplitPositionOptions {\n    /** The side of the side panel that shall be resized. */\n    side?: 'left' | 'right' | 'top' | 'bottom';\n    /** The duration in milliseconds, or 0 for no animation. */\n    duration: number;\n    /** When this widget is hidden, the animation is canceled. */\n    referenceWidget?: Widget;\n}\n\nexport interface MoveEntry extends SplitPositionOptions {\n    parent: SplitPanel;\n    index: number;\n    started: boolean;\n    ended: boolean;\n    targetSize?: number;\n    targetPosition?: number;\n    startPosition?: number;\n    startTime?: number\n    resolve?: (position: number) => void;\n    reject?: (reason: string) => void;\n}\n\n@injectable()\nexport class SplitPositionHandler {\n\n    private readonly splitMoves: MoveEntry[] = [];\n    private currentMoveIndex: number = 0;\n\n    /**\n     * Set the position of a split handle asynchronously. This function makes sure that such movements\n     * are performed one after another in order to prevent the movements from overriding each other.\n     * When resolved, the returned promise yields the final position of the split handle.\n     */\n    setSplitHandlePosition(parent: SplitPanel, index: number, targetPosition: number, options: SplitPositionOptions): Promise<number> {\n        const move: MoveEntry = {\n            ...options,\n            parent, targetPosition, index,\n            started: false,\n            ended: false\n        };\n        return this.moveSplitPos(move);\n    }\n\n    /**\n     * Resize a side panel asynchronously. This function makes sure that such movements are performed\n     * one after another in order to prevent the movements from overriding each other.\n     * When resolved, the returned promise yields the final position of the split handle.\n     */\n    setSidePanelSize(sidePanel: Widget, targetSize: number, options: SplitPositionOptions): Promise<number> {\n        if (targetSize < 0) {\n            return Promise.reject(new Error('Cannot resize to negative value.'));\n        }\n        const parent = sidePanel.parent;\n        if (!(parent instanceof SplitPanel)) {\n            return Promise.reject(new Error('Widget must be contained in a SplitPanel.'));\n        }\n        let index = parent.widgets.indexOf(sidePanel);\n        if (index > 0 && (options.side === 'right' || options.side === 'bottom')) {\n            index--;\n        }\n        const move: MoveEntry = {\n            ...options,\n            parent, targetSize, index,\n            started: false,\n            ended: false\n        };\n        return this.moveSplitPos(move);\n    }\n\n    protected moveSplitPos(move: MoveEntry): Promise<number> {\n        return new Promise<number>((resolve, reject) => {\n            move.resolve = resolve;\n            move.reject = reject;\n            if (this.splitMoves.length === 0) {\n                window.requestAnimationFrame(this.animationFrame.bind(this));\n            }\n            this.splitMoves.push(move);\n        });\n    }\n\n    protected animationFrame(time: number): void {\n        const move = this.splitMoves[this.currentMoveIndex];\n        let rejectedOrResolved = false;\n        if (move.ended || move.referenceWidget && move.referenceWidget.isHidden) {\n            this.splitMoves.splice(this.currentMoveIndex, 1);\n            if (move.startPosition === undefined || move.targetPosition === undefined) {\n                move.reject!('Panel is not visible.');\n            } else {\n                move.resolve!(move.targetPosition);\n            }\n            rejectedOrResolved = true;\n        } else if (!move.started) {\n            this.startMove(move, time);\n            if (move.duration <= 0 || move.startPosition === undefined || move.targetPosition === undefined\n                || move.startPosition === move.targetPosition) {\n                this.endMove(move);\n            }\n        } else {\n            const elapsedTime = time - move.startTime!;\n            if (elapsedTime >= move.duration) {\n                this.endMove(move);\n            } else {\n                const t = elapsedTime / move.duration;\n                const start = move.startPosition || 0;\n                const target = move.targetPosition || 0;\n                const pos = start + (target - start) * t;\n                (move.parent.layout as SplitLayout).moveHandle(move.index, pos);\n            }\n        }\n        if (!rejectedOrResolved) {\n            this.currentMoveIndex++;\n        }\n        if (this.currentMoveIndex >= this.splitMoves.length) {\n            this.currentMoveIndex = 0;\n        }\n        if (this.splitMoves.length > 0) {\n            window.requestAnimationFrame(this.animationFrame.bind(this));\n        }\n    }\n\n    protected startMove(move: MoveEntry, time: number): void {\n        if (move.targetPosition === undefined && move.targetSize !== undefined) {\n            const { clientWidth, clientHeight } = move.parent.node;\n            if (clientWidth && clientHeight) {\n                switch (move.side) {\n                    case 'left':\n                        move.targetPosition = Math.max(Math.min(move.targetSize, clientWidth), 0);\n                        break;\n                    case 'right':\n                        move.targetPosition = Math.max(Math.min(clientWidth - move.targetSize, clientWidth), 0);\n                        break;\n                    case 'top':\n                        move.targetPosition = Math.max(Math.min(move.targetSize, clientHeight), 0);\n                        break;\n                    case 'bottom':\n                        move.targetPosition = Math.max(Math.min(clientHeight - move.targetSize, clientHeight), 0);\n                        break;\n                }\n            }\n        }\n        if (move.startPosition === undefined) {\n            move.startPosition = this.getCurrentPosition(move);\n        }\n        move.startTime = time;\n        move.started = true;\n    }\n\n    protected endMove(move: MoveEntry): void {\n        if (move.targetPosition !== undefined) {\n            (move.parent.layout as SplitLayout).moveHandle(move.index, move.targetPosition);\n        }\n        move.ended = true;\n    }\n\n    protected getCurrentPosition(move: MoveEntry): number | undefined {\n        const layout = move.parent.layout as SplitLayout;\n        let pos: number | null;\n        if (layout.orientation === 'horizontal') {\n            pos = layout.handles[move.index].offsetLeft;\n        } else {\n            pos = layout.handles[move.index].offsetTop;\n        }\n        // eslint-disable-next-line no-null/no-null\n        if (pos !== null) {\n            return pos;\n        } else {\n            return undefined;\n        }\n    }\n\n}\n","/********************************************************************************\n * Copyright (C) 2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport debounce = require('lodash.debounce');\nimport * as React from 'react';\nimport { inject, injectable, named } from 'inversify';\nimport { Widget, ReactWidget } from '../widgets';\nimport { LabelParser, LabelIcon } from '../label-parser';\nimport { ContributionProvider } from '../../common/contribution-provider';\nimport { FrontendApplicationContribution } from '../frontend-application';\nimport { CommandRegistry } from '../../common/command';\nimport { Disposable, DisposableCollection } from '../../common/disposable';\nimport { ContextKeyService } from '../context-key-service';\nimport { Event, Emitter } from '../../common/event';\nimport { ContextMenuRenderer } from '../context-menu-renderer';\nimport { MenuModelRegistry } from '../../common/menu';\n\n/**\n * Factory for instantiating tab-bar toolbars.\n */\nexport const TabBarToolbarFactory = Symbol('TabBarToolbarFactory');\nexport interface TabBarToolbarFactory {\n    (): TabBarToolbar;\n}\n\n/**\n * Tab-bar toolbar widget representing the active [tab-bar toolbar items](TabBarToolbarItem).\n */\n@injectable()\nexport class TabBarToolbar extends ReactWidget {\n\n    protected current: Widget | undefined;\n    protected inline = new Map<string, TabBarToolbarItem | ReactTabBarToolbarItem>();\n    protected more = new Map<string, TabBarToolbarItem>();\n\n    @inject(CommandRegistry)\n    protected readonly commands: CommandRegistry;\n\n    @inject(LabelParser)\n    protected readonly labelParser: LabelParser;\n\n    @inject(MenuModelRegistry)\n    protected readonly menus: MenuModelRegistry;\n\n    @inject(ContextMenuRenderer)\n    protected readonly contextMenuRenderer: ContextMenuRenderer;\n\n    constructor() {\n        super();\n        this.addClass(TabBarToolbar.Styles.TAB_BAR_TOOLBAR);\n        this.hide();\n    }\n\n    updateItems(items: Array<TabBarToolbarItem | ReactTabBarToolbarItem>, current: Widget | undefined): void {\n        this.inline.clear();\n        this.more.clear();\n        for (const item of items.sort(TabBarToolbarItem.PRIORITY_COMPARATOR).reverse()) {\n            if ('render' in item || item.group === undefined || item.group === 'navigation') {\n                this.inline.set(item.id, item);\n            } else {\n                this.more.set(item.id, item);\n            }\n        }\n        this.setCurrent(current);\n        if (!items.length) {\n            this.hide();\n        }\n        this.onRender.push(Disposable.create(() => {\n            if (items.length) {\n                this.show();\n            }\n        }));\n        this.update();\n    }\n\n    protected readonly toDisposeOnSetCurrent = new DisposableCollection();\n    protected setCurrent(current: Widget | undefined): void {\n        this.toDisposeOnSetCurrent.dispose();\n        this.toDispose.push(this.toDisposeOnSetCurrent);\n        this.current = current;\n        if (current) {\n            const resetCurrent = () => {\n                this.setCurrent(undefined);\n                this.update();\n            };\n            current.disposed.connect(resetCurrent);\n            this.toDisposeOnSetCurrent.push(Disposable.create(() =>\n                current.disposed.disconnect(resetCurrent)\n            ));\n        }\n    }\n\n    protected render(): React.ReactNode {\n        return <React.Fragment>\n            {this.renderMore()}\n            {[...this.inline.values()].map(item => TabBarToolbarItem.is(item) ? this.renderItem(item) : item.render(this.current))}\n        </React.Fragment>;\n    }\n\n    protected renderItem(item: TabBarToolbarItem): React.ReactNode {\n        let innerText = '';\n        const classNames = [];\n        if (item.text) {\n            for (const labelPart of this.labelParser.parse(item.text)) {\n                if (typeof labelPart !== 'string' && LabelIcon.is(labelPart)) {\n                    const className = `fa fa-${labelPart.name}${labelPart.animation ? ' fa-' + labelPart.animation : ''}`;\n                    classNames.push(...className.split(' '));\n                } else {\n                    innerText = labelPart;\n                }\n            }\n        }\n        const command = this.commands.getCommand(item.command);\n        const iconClass = (typeof item.icon === 'function' && item.icon()) || item.icon || (command && command.iconClass);\n        if (iconClass) {\n            classNames.push(iconClass);\n        }\n        const tooltip = item.tooltip || (command && command.label);\n        return <div key={item.id} className={`${TabBarToolbar.Styles.TAB_BAR_TOOLBAR_ITEM}${command && this.commandIsEnabled(command.id) ? ' enabled' : ''}`}\n            onMouseDown={this.onMouseDownEvent} onMouseUp={this.onMouseUpEvent} onMouseOut={this.onMouseUpEvent} >\n            <div id={item.id} className={classNames.join(' ')} onClick={this.executeCommand} title={tooltip}>{innerText}</div>\n        </div>;\n    }\n\n    protected renderMore(): React.ReactNode {\n        return !!this.more.size && <div key='__more__' className={TabBarToolbar.Styles.TAB_BAR_TOOLBAR_ITEM + ' enabled'}>\n            <div id='__more__' className='fa fa-ellipsis-h' onClick={this.showMoreContextMenu} title='More Actions...' />\n        </div>;\n    }\n\n    protected showMoreContextMenu = (event: React.MouseEvent) => {\n        event.stopPropagation();\n        event.preventDefault();\n\n        const menuPath = ['TAB_BAR_TOOLBAR_CONTEXT_MENU'];\n        const toDisposeOnHide = new DisposableCollection();\n        for (const [, item] of this.more) {\n            toDisposeOnHide.push(this.menus.registerMenuAction([...menuPath, item.group!], {\n                label: item.tooltip,\n                commandId: item.id,\n                when: item.when\n            }));\n        }\n        this.contextMenuRenderer.render({\n            menuPath,\n            args: [this.current],\n            anchor: event.nativeEvent,\n            onHide: () => toDisposeOnHide.dispose()\n        });\n    };\n\n    shouldHandleMouseEvent(event: MouseEvent): boolean {\n        return event.target instanceof Element && (!!this.inline.get(event.target.id) || event.target.id === '__more__');\n    }\n\n    protected commandIsEnabled(command: string): boolean {\n        return this.commands.isEnabled(command, this.current);\n    }\n\n    protected executeCommand = (e: React.MouseEvent<HTMLElement>) => {\n        e.preventDefault();\n        e.stopPropagation();\n\n        const item = this.inline.get(e.currentTarget.id);\n        if (TabBarToolbarItem.is(item)) {\n            this.commands.executeCommand(item.command, this.current);\n        }\n    };\n\n    protected onMouseDownEvent = (e: React.MouseEvent<HTMLElement>) => {\n        if (e.button === 0) {\n            e.currentTarget.classList.add('active');\n        }\n    };\n\n    protected onMouseUpEvent = (e: React.MouseEvent<HTMLElement>) => {\n        e.currentTarget.classList.remove('active');\n    };\n\n}\n\nexport namespace TabBarToolbar {\n\n    export namespace Styles {\n\n        export const TAB_BAR_TOOLBAR = 'p-TabBar-toolbar';\n        export const TAB_BAR_TOOLBAR_ITEM = 'item';\n\n    }\n\n}\n\n/**\n * Clients should implement this interface if they want to contribute to the tab-bar toolbar.\n */\nexport const TabBarToolbarContribution = Symbol('TabBarToolbarContribution');\n/**\n * Representation of a tabbar toolbar contribution.\n */\nexport interface TabBarToolbarContribution {\n    /**\n     * Registers toolbar items.\n     * @param registry the tabbar toolbar registry.\n     */\n    registerToolbarItems(registry: TabBarToolbarRegistry): void;\n}\n\n/**\n * Representation of an item in the tab\n */\nexport interface TabBarToolbarItem {\n\n    /**\n     * The unique ID of the toolbar item.\n     */\n    readonly id: string;\n\n    /**\n     * The command to execute.\n     */\n    readonly command: string;\n\n    /**\n     * Optional text of the item.\n     *\n     * Shamelessly copied and reused from `status-bar`:\n     *\n     * More details about the available `fontawesome` icons and CSS class names can be hound [here](http://fontawesome.io/icons/).\n     * To set a text with icon use the following pattern in text string:\n     * ```typescript\n     * $(fontawesomeClassName)\n     * ```\n     *\n     * To use animated icons use the following pattern:\n     * ```typescript\n     * $(fontawesomeClassName~typeOfAnimation)\n     * ````\n     * The type of animation can be either `spin` or `pulse`.\n     * Look [here](http://fontawesome.io/examples/#animated) for more information to animated icons.\n     */\n    readonly text?: string;\n\n    /**\n     * Priority among the items. Can be negative. The smaller the number the left-most the item will be placed in the toolbar. It is `0` by default.\n     */\n    readonly priority?: number;\n\n    /**\n     * Optional group for the item. Default `navigation`.\n     * `navigation` group will be inlined, while all the others will be within the `...` dropdown.\n     */\n    readonly group?: string;\n\n    /**\n     * Optional tooltip for the item.\n     */\n    readonly tooltip?: string;\n\n    /**\n     * Optional icon for the item.\n     */\n    readonly icon?: string | (() => string);\n\n    /**\n     * https://code.visualstudio.com/docs/getstarted/keybindings#_when-clause-contexts\n     */\n    readonly when?: string;\n\n    /**\n     * When defined, the container tool-bar will be updated if this event is fired.\n     *\n     * Note: currently, each item of the container toolbar will be re-rendered if any of the items have changed.\n     */\n    readonly onDidChange?: Event<void>;\n\n}\n\n/**\n * Tab-bar toolbar item backed by a `React.ReactNode`.\n * Unlike the `TabBarToolbarItem`, this item is not connected to the command service.\n */\nexport interface ReactTabBarToolbarItem {\n    readonly id: string;\n    render(widget?: Widget): React.ReactNode;\n\n    readonly onDidChange?: Event<void>;\n\n    // For the rest, see `TabBarToolbarItem`.\n    // For conditional visibility.\n    isVisible?(widget: Widget): boolean;\n    readonly when?: string;\n\n    // Ordering and grouping.\n    readonly priority?: number;\n    /**\n     * Optional group for the item. Default `navigation`. Always inlined.\n     */\n    readonly group?: string;\n}\n\nexport namespace TabBarToolbarItem {\n\n    /**\n     * Compares the items by `priority` in ascending. Undefined priorities will be treated as `0`.\n     */\n    export const PRIORITY_COMPARATOR = (left: TabBarToolbarItem, right: TabBarToolbarItem) => {\n        // The navigation group is special as it will always be sorted to the top/beginning of a menu.\n        const compareGroup = (leftGroup: string | undefined = 'navigation', rightGroup: string | undefined = 'navigation') => {\n            if (leftGroup === 'navigation') {\n                return rightGroup === 'navigation' ? 0 : -1;\n            }\n            if (rightGroup === 'navigation') {\n                return leftGroup === 'navigation' ? 0 : 1;\n            }\n            return leftGroup.localeCompare(rightGroup);\n        };\n        const result = compareGroup(left.group, right.group);\n        if (result !== 0) {\n            return result;\n        }\n        return (left.priority || 0) - (right.priority || 0);\n    };\n\n    export function is(arg: Object | undefined): arg is TabBarToolbarItem {\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        return !!arg && 'command' in arg && typeof (arg as any).command === 'string';\n    }\n\n}\n\n/**\n * Main, shared registry for tab-bar toolbar items.\n */\n@injectable()\nexport class TabBarToolbarRegistry implements FrontendApplicationContribution {\n\n    protected items: Map<string, TabBarToolbarItem | ReactTabBarToolbarItem> = new Map();\n\n    @inject(CommandRegistry)\n    protected readonly commandRegistry: CommandRegistry;\n\n    @inject(ContextKeyService)\n    protected readonly contextKeyService: ContextKeyService;\n\n    @inject(ContributionProvider)\n    @named(TabBarToolbarContribution)\n    protected readonly contributionProvider: ContributionProvider<TabBarToolbarContribution>;\n\n    protected readonly onDidChangeEmitter = new Emitter<void>();\n    readonly onDidChange: Event<void> = this.onDidChangeEmitter.event;\n    // debounce in order to avoid to fire more than once in the same tick\n    protected fireOnDidChange = debounce(() => this.onDidChangeEmitter.fire(undefined), 0);\n\n    onStart(): void {\n        const contributions = this.contributionProvider.getContributions();\n        for (const contribution of contributions) {\n            contribution.registerToolbarItems(this);\n        }\n    }\n\n    /**\n     * Registers the given item. Throws an error, if the corresponding command cannot be found or an item has been already registered for the desired command.\n     *\n     * @param item the item to register.\n     */\n    registerItem(item: TabBarToolbarItem | ReactTabBarToolbarItem): Disposable {\n        const { id } = item;\n        if (this.items.has(id)) {\n            throw new Error(`A toolbar item is already registered with the '${id}' ID.`);\n        }\n        this.items.set(id, item);\n        this.fireOnDidChange();\n        const toDispose = new DisposableCollection(\n            Disposable.create(() => this.fireOnDidChange()),\n            Disposable.create(() => this.items.delete(id))\n        );\n        if (item.onDidChange) {\n            toDispose.push(item.onDidChange(() => this.fireOnDidChange()));\n        }\n        return toDispose;\n    }\n\n    /**\n     * Returns an array of tab-bar toolbar items which are visible when the `widget` argument is the current one.\n     *\n     * By default returns with all items where the command is enabled and `item.isVisible` is `true`.\n     */\n    visibleItems(widget: Widget): Array<TabBarToolbarItem | ReactTabBarToolbarItem> {\n        const result = [];\n        for (const item of this.items.values()) {\n            const visible = TabBarToolbarItem.is(item)\n                ? this.commandRegistry.isVisible(item.command, widget)\n                : (!item.isVisible || item.isVisible(widget));\n            if (visible && (!item.when || this.contextKeyService.match(item.when, widget.node))) {\n                result.push(item);\n            }\n        }\n        return result;\n    }\n\n}\n","/********************************************************************************\n * Copyright (C) 2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport PerfectScrollbar from 'perfect-scrollbar';\nimport { TabBar, Title, Widget } from '@phosphor/widgets';\nimport { VirtualElement, h, VirtualDOM, ElementInlineStyle } from '@phosphor/virtualdom';\nimport { Disposable, DisposableCollection, MenuPath, notEmpty } from '../../common';\nimport { ContextMenuRenderer } from '../context-menu-renderer';\nimport { Signal, Slot } from '@phosphor/signaling';\nimport { Message } from '@phosphor/messaging';\nimport { ArrayExt } from '@phosphor/algorithm';\nimport { ElementExt } from '@phosphor/domutils';\nimport { TabBarToolbarRegistry, TabBarToolbar } from './tab-bar-toolbar';\nimport { TheiaDockPanel, MAIN_AREA_ID, BOTTOM_AREA_ID } from './theia-dock-panel';\nimport { WidgetDecoration } from '../widget-decoration';\nimport { TabBarDecoratorService } from './tab-bar-decorator';\nimport { IconThemeService } from '../icon-theme-service';\n\n/** The class name added to hidden content nodes, which are required to render vertical side bars. */\nconst HIDDEN_CONTENT_CLASS = 'theia-TabBar-hidden-content';\n\n/** Menu path for tab bars used throughout the application shell. */\nexport const SHELL_TABBAR_CONTEXT_MENU: MenuPath = ['shell-tabbar-context-menu'];\n\nexport const TabBarRendererFactory = Symbol('TabBarRendererFactory');\n\n/**\n * Size information of DOM elements used for rendering tabs in side bars.\n */\nexport interface SizeData {\n    width: number;\n    height: number;\n}\n\n/**\n * Extension of the rendering data used for tabs in side bars of the application shell.\n */\nexport interface SideBarRenderData extends TabBar.IRenderData<Widget> {\n    labelSize?: SizeData;\n    iconSize?: SizeData;\n    paddingTop?: number;\n    paddingBottom?: number;\n}\n\n/**\n * A tab bar renderer that offers a context menu. In addition, this renderer is able to\n * set an explicit position and size on the icon and label of each tab in a side bar.\n * This is necessary because the elements of side bar tabs are rotated using the CSS\n * `transform` property, disrupting the browser's ability to arrange those elements\n * automatically.\n */\nexport class TabBarRenderer extends TabBar.Renderer {\n\n    /**\n     * The menu path used to render the context menu.\n     */\n    contextMenuPath?: MenuPath;\n\n    protected readonly toDispose = new DisposableCollection();\n\n    // TODO refactor shell, rendered should only receive props with event handlers\n    // events should be handled by clients, like ApplicationShell\n    // right now it is mess: (1) client logic belong to renderer, (2) cyclic dependencies between renderers and clients\n    constructor(\n        protected readonly contextMenuRenderer?: ContextMenuRenderer,\n        protected readonly decoratorService?: TabBarDecoratorService,\n        protected readonly iconThemeService?: IconThemeService\n    ) {\n        super();\n        if (this.decoratorService) {\n            this.toDispose.push(Disposable.create(() => this.resetDecorations()));\n            this.toDispose.push(this.decoratorService);\n            this.toDispose.push(this.decoratorService.onDidChangeDecorations(() => this.resetDecorations()));\n        }\n        if (this.iconThemeService) {\n            this.toDispose.push(this.iconThemeService.onDidChangeCurrent(() => {\n                if (this._tabBar) {\n                    this._tabBar.update();\n                }\n            }));\n        }\n    }\n\n    protected _tabBar?: TabBar<Widget>;\n    protected readonly toDisposeOnTabBar = new DisposableCollection();\n    /**\n     * A reference to the tab bar is required in order to activate it when a context menu\n     * is requested.\n     */\n    set tabBar(tabBar: TabBar<Widget> | undefined) {\n        if (this._tabBar === tabBar) {\n            return;\n        }\n        this.toDisposeOnTabBar.dispose();\n        this.toDispose.push(this.toDisposeOnTabBar);\n        this._tabBar = tabBar;\n        if (tabBar) {\n            const listener: Slot<Widget, TabBar.ITabCloseRequestedArgs<Widget>> = (_, { title }) => this.resetDecorations(title);\n            tabBar.tabCloseRequested.connect(listener);\n            this.toDisposeOnTabBar.push(Disposable.create(() => tabBar.tabCloseRequested.disconnect(listener)));\n        }\n        this.resetDecorations();\n    }\n    get tabBar(): TabBar<Widget> | undefined {\n        return this._tabBar;\n    }\n\n    /**\n     * Render tabs with the default DOM structure, but additionally register a context menu listener.\n     * @param {SideBarRenderData} data Data used to render the tab.\n     * @param {boolean} isInSidePanel An optional check which determines if the tab is in the side-panel.\n     * @returns {VirtualElement} The virtual element of the rendered tab.\n     */\n    renderTab(data: SideBarRenderData, isInSidePanel?: boolean): VirtualElement {\n        const title = data.title;\n        const id = this.createTabId(data.title);\n        const key = this.createTabKey(data);\n        const style = this.createTabStyle(data);\n        const className = this.createTabClass(data);\n        const dataset = this.createTabDataset(data);\n        return h.li(\n            {\n                key, className, id, title: title.caption, style, dataset,\n                oncontextmenu: this.handleContextMenuEvent,\n                ondblclick: this.handleDblClickEvent\n            },\n            h.div(\n                { className: 'theia-tab-icon-label' },\n                this.renderIcon(data, isInSidePanel),\n                this.renderLabel(data, isInSidePanel)\n            ),\n            this.renderCloseIcon(data)\n        );\n    }\n\n    createTabId(title: Title<Widget>): string {\n        return 'shell-tab-' + title.owner.id;\n    }\n\n    /**\n     * If size information is available for the label and icon, set an explicit height on the tab.\n     * The height value also considers padding, which should be derived from CSS settings.\n     */\n    createTabStyle(data: SideBarRenderData): ElementInlineStyle {\n        const zIndex = `${data.zIndex}`;\n        const labelSize = data.labelSize;\n        const iconSize = data.iconSize;\n        let height: string | undefined;\n        if (labelSize || iconSize) {\n            const labelHeight = labelSize ? (this.tabBar && this.tabBar.orientation === 'horizontal' ? labelSize.height : labelSize.width) : 0;\n            const iconHeight = iconSize ? iconSize.height : 0;\n            let paddingTop = data.paddingTop || 0;\n            if (labelHeight > 0 && iconHeight > 0) {\n                // Leave some extra space between icon and label\n                paddingTop = paddingTop * 1.5;\n            }\n            const paddingBottom = data.paddingBottom || 0;\n            height = `${labelHeight + iconHeight + paddingTop + paddingBottom}px`;\n        }\n        return { zIndex, height };\n    }\n\n    /**\n     * If size information is available for the label, set it as inline style.\n     * Tab padding and icon size are also considered in the `top` position.\n     * @param {SideBarRenderData} data Data used to render the tab.\n     * @param {boolean} isInSidePanel An optional check which determines if the tab is in the side-panel.\n     * @returns {VirtualElement} The virtual element of the rendered label.\n     */\n    renderLabel(data: SideBarRenderData, isInSidePanel?: boolean): VirtualElement {\n        const labelSize = data.labelSize;\n        const iconSize = data.iconSize;\n        let width: string | undefined;\n        let height: string | undefined;\n        let top: string | undefined;\n        if (labelSize) {\n            width = `${labelSize.width}px`;\n            height = `${labelSize.height}px`;\n        }\n        if (data.paddingTop || iconSize) {\n            const iconHeight = iconSize ? iconSize.height : 0;\n            let paddingTop = data.paddingTop || 0;\n            if (iconHeight > 0) {\n                // Leave some extra space between icon and label\n                paddingTop = paddingTop * 1.5;\n            }\n            top = `${paddingTop + iconHeight}px`;\n        }\n        const style: ElementInlineStyle = { width, height, top };\n        // No need to check for duplicate labels if the tab is rendered in the side panel (title is not displayed),\n        // or if there are less than two files in the tab bar.\n        if (isInSidePanel || (this.tabBar && this.tabBar.titles.length < 2)) {\n            return h.div({ className: 'p-TabBar-tabLabel', style }, data.title.label);\n        }\n        const originalToDisplayedMap = this.findDuplicateLabels([...this.tabBar!.titles]);\n        const labelDetails: string | undefined = originalToDisplayedMap.get(data.title.caption);\n        if (labelDetails) {\n            return h.div({ className: 'p-TabBar-tabLabelWrapper' },\n                h.div({ className: 'p-TabBar-tabLabel', style }, data.title.label),\n                h.div({ className: 'p-TabBar-tabLabelDetails', style }, labelDetails));\n        }\n        return h.div({ className: 'p-TabBar-tabLabel', style }, data.title.label);\n    }\n\n    protected readonly decorations = new Map<Title<Widget>, WidgetDecoration.Data[]>();\n\n    protected resetDecorations(title?: Title<Widget>): void {\n        if (title) {\n            this.decorations.delete(title);\n        } else {\n            this.decorations.clear();\n        }\n        if (this.tabBar) {\n            this.tabBar.update();\n        }\n    }\n\n    /**\n     * Get all available decorations of a given tab.\n     * @param {string} title The widget title.\n     */\n    protected getDecorations(title: Title<Widget>): WidgetDecoration.Data[] {\n        if (this.tabBar && this.decoratorService) {\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            const owner: { resetTabBarDecorations?: () => void; } & Widget = title.owner;\n            if (!owner.resetTabBarDecorations) {\n                owner.resetTabBarDecorations = () => this.decorations.delete(title);\n                title.owner.disposed.connect(owner.resetTabBarDecorations);\n            }\n\n            const decorations = this.decorations.get(title) || this.decoratorService.getDecorations(title);\n            this.decorations.set(title, decorations);\n            return decorations;\n        }\n        return [];\n    }\n\n    /**\n     * Get the decoration data given the tab URI and the decoration data type.\n     * @param {string} title The title.\n     * @param {K} key The type of the decoration data.\n     */\n    protected getDecorationData<K extends keyof WidgetDecoration.Data>(title: Title<Widget>, key: K): WidgetDecoration.Data[K][] {\n        return this.getDecorations(title).filter(data => data[key] !== undefined).map(data => data[key]);\n\n    }\n\n    /**\n     * Get the class of an icon.\n     * @param {string | string[]} iconName The name of the icon.\n     * @param {string[]} additionalClasses Additional classes of the icon.\n     */\n    private getIconClass(iconName: string | string[], additionalClasses: string[] = []): string {\n        const iconClass = (typeof iconName === 'string') ? ['a', 'fa', `fa-${iconName}`] : ['a'].concat(iconName);\n        return iconClass.concat(additionalClasses).join(' ');\n    }\n\n    /**\n     * Find duplicate labels from the currently opened tabs in the tab bar.\n     * Return the appropriate partial paths that can distinguish the identical labels.\n     *\n     * E.g., a/p/index.ts => a/..., b/p/index.ts => b/...\n     *\n     * To prevent excessively long path displayed, show at maximum three levels from the end by default.\n     * @param {Title<Widget>[]} titles Array of titles in the current tab bar.\n     * @returns {Map<string, string>} A map from each tab's original path to its displayed partial path.\n     */\n    findDuplicateLabels(titles: Title<Widget>[]): Map<string, string> {\n        // Filter from all tabs to group them by the distinct label (file name).\n        // E.g., 'foo.js' => {0 (index) => 'a/b/foo.js', '2 => a/c/foo.js' },\n        //       'bar.js' => {1 => 'a/d/bar.js', ...}\n        const labelGroups = new Map<string, Map<number, string>>();\n        titles.forEach((title, index) => {\n            if (!labelGroups.has(title.label)) {\n                labelGroups.set(title.label, new Map<number, string>());\n            }\n            labelGroups.get(title.label)!.set(index, title.caption);\n        });\n\n        const originalToDisplayedMap = new Map<string, string>();\n        // Parse each group of editors with the same label.\n        labelGroups.forEach(labelGroup => {\n            // Filter to get groups that have duplicates.\n            if (labelGroup.size > 1) {\n                const paths: string[][] = [];\n                let maxPathLength = 0;\n                labelGroup.forEach((pathStr, index) => {\n                    const steps = pathStr.split('/');\n                    maxPathLength = Math.max(maxPathLength, steps.length);\n                    paths[index] = (steps.slice(0, steps.length - 1));\n                    // By default, show at maximum three levels from the end.\n                    let defaultDisplayedPath = steps.slice(-4, -1).join('/');\n                    if (steps.length > 4) {\n                        defaultDisplayedPath = '.../' + defaultDisplayedPath;\n                    }\n                    originalToDisplayedMap.set(pathStr, defaultDisplayedPath);\n                });\n\n                // Iterate through the steps of the path from the left to find the step that can distinguish it.\n                // E.g., ['root', 'foo', 'c'], ['root', 'bar', 'd'] => 'foo', 'bar'\n                let i = 0;\n                while (i < maxPathLength - 1) {\n                    // Store indexes of all paths that have the identical element in each step.\n                    const stepOccurrences = new Map<string, number[]>();\n                    // Compare the current step of all paths\n                    paths.forEach((path, index) => {\n                        const step = path[i];\n                        if (path.length > 0) {\n                            if (i > path.length - 1) {\n                                paths[index] = [];\n                            } else if (!stepOccurrences.has(step)) {\n                                stepOccurrences.set(step, [index]);\n                            } else {\n                                stepOccurrences.get(step)!.push(index);\n                            }\n                        }\n                    });\n                    // Set the displayed path for each tab.\n                    stepOccurrences.forEach((indexArr, displayedPath) => {\n                        if (indexArr.length === 1) {\n                            const originalPath = labelGroup.get(indexArr[0]);\n                            if (originalPath) {\n                                const originalElements = originalPath.split('/');\n                                const displayedElements = displayedPath.split('/');\n                                if (originalElements.slice(-2)[0] !== displayedElements.slice(-1)[0]) {\n                                    displayedPath += '/...';\n                                }\n                                if (originalElements[0] !== displayedElements[0]) {\n                                    displayedPath = '.../' + displayedPath;\n                                }\n                                originalToDisplayedMap.set(originalPath, displayedPath);\n                                paths[indexArr[0]] = [];\n                            }\n                        }\n                    });\n                    i++;\n                }\n            }\n        });\n        return originalToDisplayedMap;\n    }\n\n    /**\n     * If size information is available for the icon, set it as inline style. Tab padding\n     * is also considered in the `top` position.\n     * @param {SideBarRenderData} data Data used to render the tab icon.\n     * @param {boolean} isInSidePanel An optional check which determines if the tab is in the side-panel.\n     */\n    renderIcon(data: SideBarRenderData, inSidePanel?: boolean): VirtualElement {\n        if (!inSidePanel && this.iconThemeService && this.iconThemeService.current === 'none') {\n            return h.div();\n        }\n        let top: string | undefined;\n        if (data.paddingTop) {\n            top = `${data.paddingTop || 0}px`;\n        }\n        const style: ElementInlineStyle = { top };\n        const baseClassName = this.createIconClass(data);\n\n        const overlayIcons: VirtualElement[] = [];\n        const decorationData = this.getDecorationData(data.title, 'iconOverlay');\n\n        // Check if the tab has decoration markers to be rendered on top.\n        if (decorationData.length > 0) {\n            const baseIcon: VirtualElement = h.div({ className: baseClassName, style }, data.title.iconLabel);\n            const wrapperClassName: string = WidgetDecoration.Styles.ICON_WRAPPER_CLASS;\n            const decoratorSizeClassName: string = inSidePanel ? WidgetDecoration.Styles.DECORATOR_SIDEBAR_SIZE_CLASS : WidgetDecoration.Styles.DECORATOR_SIZE_CLASS;\n\n            decorationData\n                .filter(notEmpty)\n                .map(overlay => [overlay.position, overlay] as [WidgetDecoration.IconOverlayPosition, WidgetDecoration.IconOverlay | WidgetDecoration.IconClassOverlay])\n                .forEach(([position, overlay]) => {\n                    const iconAdditionalClasses: string[] = [decoratorSizeClassName, WidgetDecoration.IconOverlayPosition.getStyle(position, inSidePanel)];\n                    const overlayIconStyle = (color?: string) => {\n                        if (color === undefined) {\n                            return {};\n                        }\n                        return { color };\n                    };\n                    // Parse the optional background (if it exists) of the overlay icon.\n                    if (overlay.background) {\n                        const backgroundIconClassName = this.getIconClass(overlay.background.shape, iconAdditionalClasses);\n                        overlayIcons.push(\n                            h.div({ key: data.title.label + '-background', className: backgroundIconClassName, style: overlayIconStyle(overlay.background.color) })\n                        );\n                    }\n                    // Parse the overlay icon.\n                    const overlayIcon = (overlay as WidgetDecoration.IconOverlay).icon || (overlay as WidgetDecoration.IconClassOverlay).iconClass;\n                    const overlayIconClassName = this.getIconClass(overlayIcon, iconAdditionalClasses);\n                    overlayIcons.push(\n                        h.span({ key: data.title.label, className: overlayIconClassName, style: overlayIconStyle(overlay.color) })\n                    );\n                });\n            return h.div({ className: wrapperClassName, style }, [baseIcon, ...overlayIcons]);\n        }\n        return h.div({ className: baseClassName, style }, data.title.iconLabel);\n    }\n\n    protected handleContextMenuEvent = (event: MouseEvent) => {\n        if (this.contextMenuRenderer && this.contextMenuPath && event.currentTarget instanceof HTMLElement) {\n            event.stopPropagation();\n            event.preventDefault();\n\n            if (this.tabBar) {\n                const id = event.currentTarget.id;\n                // eslint-disable-next-line no-null/no-null\n                const title = this.tabBar.titles.find(t => this.createTabId(t) === id) || null;\n                this.tabBar.currentTitle = title;\n                this.tabBar.activate();\n                if (title) {\n                    title.owner.activate();\n                }\n            }\n\n            this.contextMenuRenderer.render(this.contextMenuPath, event);\n        }\n    };\n\n    protected handleDblClickEvent = (event: MouseEvent) => {\n        if (this.tabBar && event.currentTarget instanceof HTMLElement) {\n            const id = event.currentTarget.id;\n            // eslint-disable-next-line no-null/no-null\n            const title = this.tabBar.titles.find(t => this.createTabId(t) === id) || null;\n            const area = title && title.owner.parent;\n            if (area instanceof TheiaDockPanel && (area.id === BOTTOM_AREA_ID || area.id === MAIN_AREA_ID)) {\n                area.toggleMaximized();\n            }\n        }\n    };\n\n}\n\n/**\n * A specialized tab bar for the main and bottom areas.\n */\nexport class ScrollableTabBar extends TabBar<Widget> {\n\n    protected scrollBar?: PerfectScrollbar;\n\n    private scrollBarFactory: () => PerfectScrollbar;\n    private pendingReveal?: Promise<void>;\n\n    constructor(options?: TabBar.IOptions<Widget> & PerfectScrollbar.Options) {\n        super(options);\n        this.scrollBarFactory = () => new PerfectScrollbar(this.scrollbarHost, options);\n    }\n\n    protected onAfterAttach(msg: Message): void {\n        if (!this.scrollBar) {\n            this.scrollBar = this.scrollBarFactory();\n        }\n        super.onAfterAttach(msg);\n    }\n\n    protected onBeforeDetach(msg: Message): void {\n        super.onBeforeDetach(msg);\n        if (this.scrollBar) {\n            this.scrollBar.destroy();\n            this.scrollBar = undefined;\n        }\n    }\n\n    protected onUpdateRequest(msg: Message): void {\n        super.onUpdateRequest(msg);\n        if (this.scrollBar) {\n            this.scrollBar.update();\n        }\n    }\n\n    protected onResize(msg: Widget.ResizeMessage): void {\n        super.onResize(msg);\n        if (this.scrollBar) {\n            if (this.currentIndex >= 0) {\n                this.revealTab(this.currentIndex);\n            }\n            this.scrollBar.update();\n        }\n    }\n\n    /**\n     * Reveal the tab with the given index by moving the scroll bar if necessary.\n     */\n    revealTab(index: number): Promise<void> {\n        if (this.pendingReveal) {\n            // A reveal has already been scheduled\n            return this.pendingReveal;\n        }\n        const result = new Promise<void>((resolve, reject) => {\n            // The tab might not have been created yet, so wait until the next frame\n            window.requestAnimationFrame(() => {\n                const tab = this.contentNode.children[index] as HTMLElement;\n                if (tab && this.isVisible) {\n                    const parent = this.scrollbarHost;\n                    if (this.orientation === 'horizontal') {\n                        const scroll = parent.scrollLeft;\n                        const left = tab.offsetLeft;\n                        if (scroll > left) {\n                            parent.scrollLeft = left;\n                        } else {\n                            const right = left + tab.clientWidth - parent.clientWidth;\n                            if (scroll < right && tab.clientWidth < parent.clientWidth) {\n                                parent.scrollLeft = right;\n                            }\n                        }\n                    } else {\n                        const scroll = parent.scrollTop;\n                        const top = tab.offsetTop;\n                        if (scroll > top) {\n                            parent.scrollTop = top;\n                        } else {\n                            const bottom = top + tab.clientHeight - parent.clientHeight;\n                            if (scroll < bottom && tab.clientHeight < parent.clientHeight) {\n                                parent.scrollTop = bottom;\n                            }\n                        }\n                    }\n                }\n                if (this.pendingReveal === result) {\n                    this.pendingReveal = undefined;\n                }\n                resolve();\n            });\n        });\n        this.pendingReveal = result;\n        return result;\n    }\n\n    protected get scrollbarHost(): HTMLElement {\n        return this.node;\n    }\n\n}\n\n/**\n * Specialized scrollable tab-bar which comes with toolbar support.\n * Instead of the following DOM structure.\n *\n * +-------------------------+\n * |[TAB_0][TAB_1][TAB_2][TAB|\n * +-------------Scrollable--+\n *\n * There is a dedicated HTML element for toolbar which does **not** contained in the scrollable element.\n *\n * +-------------------------+-----------------+\n * |[TAB_0][TAB_1][TAB_2][TAB|         Toolbar |\n * +-------------Scrollable--+-None-Scrollable-+\n *\n */\nexport class ToolbarAwareTabBar extends ScrollableTabBar {\n\n    protected contentContainer: HTMLElement | undefined;\n    protected toolbar: TabBarToolbar | undefined;\n\n    constructor(\n        protected readonly tabBarToolbarRegistry: TabBarToolbarRegistry,\n        protected readonly tabBarToolbarFactory: () => TabBarToolbar,\n        protected readonly options?: TabBar.IOptions<Widget> & PerfectScrollbar.Options) {\n\n        super(options);\n        this.rewireDOM();\n        this.tabBarToolbarRegistry.onDidChange(() => this.update());\n    }\n\n    /**\n     * Overrides the `contentNode` property getter in PhosphorJS' TabBar.\n     */\n    get contentNode(): HTMLUListElement {\n        return this.tabBarContainer.getElementsByClassName(ToolbarAwareTabBar.Styles.TAB_BAR_CONTENT)[0] as HTMLUListElement;\n    }\n\n    /**\n     * Overrides the scrollable host from the parent class.\n     */\n    protected get scrollbarHost(): HTMLElement {\n        return this.tabBarContainer;\n    }\n\n    protected get tabBarContainer(): HTMLElement {\n        return this.node.getElementsByClassName(ToolbarAwareTabBar.Styles.TAB_BAR_CONTENT_CONTAINER)[0] as HTMLElement;\n    }\n\n    protected onAfterAttach(msg: Message): void {\n        if (this.toolbar) {\n            if (this.toolbar.isAttached) {\n                Widget.detach(this.toolbar);\n            }\n            Widget.attach(this.toolbar, this.node);\n        }\n        super.onAfterAttach(msg);\n    }\n\n    protected onBeforeDetach(msg: Message): void {\n        if (this.toolbar && this.toolbar.isAttached) {\n            Widget.detach(this.toolbar);\n        }\n        super.onBeforeDetach(msg);\n    }\n\n    protected onUpdateRequest(msg: Message): void {\n        super.onUpdateRequest(msg);\n        this.updateToolbar();\n    }\n\n    protected updateToolbar(): void {\n        if (!this.toolbar) {\n            return;\n        }\n        const current = this.currentTitle;\n        const widget = current && current.owner || undefined;\n        const items = widget ? this.tabBarToolbarRegistry.visibleItems(widget) : [];\n        this.toolbar.updateItems(items, widget);\n    }\n\n    handleEvent(event: Event): void {\n        if (this.toolbar && event instanceof MouseEvent && this.toolbar.shouldHandleMouseEvent(event)) {\n            // if the mouse event is over the toolbar part don't handle it.\n            return;\n        }\n        super.handleEvent(event);\n    }\n\n    /**\n     * Restructures the DOM defined in PhosphorJS.\n     *\n     * By default the tabs (`li`) are contained in the `this.contentNode` (`ul`) which is wrapped in a `div` (`this.node`).\n     * Instead of this structure, we add a container for the `this.contentNode` and for the toolbar.\n     * The scrollbar will only work for the `ul` part but it does not affect the toolbar, so it can be on the right hand-side.\n     */\n    protected rewireDOM(): void {\n        const contentNode = this.node.getElementsByClassName(ToolbarAwareTabBar.Styles.TAB_BAR_CONTENT)[0];\n        if (!contentNode) {\n            throw new Error(\"'this.node' does not have the content as a direct children with class name 'p-TabBar-content'.\");\n        }\n        this.node.removeChild(contentNode);\n        this.contentContainer = document.createElement('div');\n        this.contentContainer.classList.add(ToolbarAwareTabBar.Styles.TAB_BAR_CONTENT_CONTAINER);\n        this.contentContainer.appendChild(contentNode);\n        this.node.appendChild(this.contentContainer);\n        this.toolbar = this.tabBarToolbarFactory();\n    }\n\n}\n\nexport namespace ToolbarAwareTabBar {\n\n    export namespace Styles {\n\n        export const TAB_BAR_CONTENT = 'p-TabBar-content';\n        export const TAB_BAR_CONTENT_CONTAINER = 'p-TabBar-content-container';\n\n    }\n\n}\n\n/**\n * A specialized tab bar for side areas.\n */\nexport class SideTabBar extends ScrollableTabBar {\n\n    private static readonly DRAG_THRESHOLD = 5;\n\n    /**\n     * Emitted when a tab is added to the tab bar.\n     */\n    readonly tabAdded = new Signal<this, { title: Title<Widget> }>(this);\n    /**\n     * Side panels can be collapsed by clicking on the currently selected tab. This signal is\n     * emitted when the mouse is released on the selected tab without initiating a drag.\n     */\n    readonly collapseRequested = new Signal<this, Title<Widget>>(this);\n\n    private mouseData?: {\n        pressX: number,\n        pressY: number,\n        mouseDownTabIndex: number\n    };\n\n    constructor(options?: TabBar.IOptions<Widget> & PerfectScrollbar.Options) {\n        super(options);\n\n        // Create the hidden content node (see `hiddenContentNode` for explanation)\n        const hiddenContent = document.createElement('ul');\n        hiddenContent.className = HIDDEN_CONTENT_CLASS;\n        this.node.appendChild(hiddenContent);\n    }\n\n    /**\n     * Tab bars of the left and right side panel are arranged vertically by rotating their labels.\n     * Rotation is realized with the CSS `transform` property, which disrupts the browser's ability\n     * to arrange the involved elements automatically. Therefore the elements are arranged explicitly\n     * by the TabBarRenderer using inline `height` and `top` styles. However, the size of labels\n     * must still be computed by the browser, so the rendering is performed in two steps: first the\n     * tab bar is rendered horizontally inside a _hidden content node_, then it is rendered again\n     * vertically inside the proper content node. After the first step, size information is gathered\n     * from all labels so it can be applied during the second step.\n     */\n    get hiddenContentNode(): HTMLUListElement {\n        return this.node.getElementsByClassName(HIDDEN_CONTENT_CLASS)[0] as HTMLUListElement;\n    }\n\n    insertTab(index: number, value: Title<Widget> | Title.IOptions<Widget>): Title<Widget> {\n        const result = super.insertTab(index, value);\n        this.tabAdded.emit({ title: result });\n        return result;\n    }\n\n    protected onAfterAttach(msg: Message): void {\n        super.onAfterAttach(msg);\n        this.renderTabBar();\n    }\n\n    protected onUpdateRequest(msg: Message): void {\n        this.renderTabBar();\n        if (this.scrollBar) {\n            this.scrollBar.update();\n        }\n    }\n\n    /**\n     * Render the tab bar in the _hidden content node_ (see `hiddenContentNode` for explanation),\n     * then gather size information for labels and render it again in the proper content node.\n     */\n    protected renderTabBar(): void {\n        if (this.isAttached) {\n            // Render into the invisible node\n            this.renderTabs(this.hiddenContentNode);\n            // Await a rendering frame\n            window.requestAnimationFrame(() => {\n                const hiddenContent = this.hiddenContentNode;\n                const n = hiddenContent.children.length;\n                const renderData = new Array<Partial<SideBarRenderData>>(n);\n                for (let i = 0; i < n; i++) {\n                    const hiddenTab = hiddenContent.children[i];\n                    // Extract tab padding from the computed style\n                    const tabStyle = window.getComputedStyle(hiddenTab);\n                    const rd: Partial<SideBarRenderData> = {\n                        paddingTop: parseFloat(tabStyle.paddingTop!),\n                        paddingBottom: parseFloat(tabStyle.paddingBottom!)\n                    };\n                    // Extract label size from the DOM\n                    const labelElements = hiddenTab.getElementsByClassName('p-TabBar-tabLabel');\n                    if (labelElements.length === 1) {\n                        const label = labelElements[0];\n                        rd.labelSize = { width: label.clientWidth, height: label.clientHeight };\n                    }\n                    // Extract icon size from the DOM\n                    const iconElements = hiddenTab.getElementsByClassName('p-TabBar-tabIcon');\n                    if (iconElements.length === 1) {\n                        const icon = iconElements[0];\n                        rd.iconSize = { width: icon.clientWidth, height: icon.clientHeight };\n                    }\n                    renderData[i] = rd;\n                }\n                // Render into the visible node\n                this.renderTabs(this.contentNode, renderData);\n            });\n        }\n    }\n\n    /**\n     * Render the tab bar using the given DOM element as host. The optional `renderData` is forwarded\n     * to the TabBarRenderer.\n     */\n    protected renderTabs(host: HTMLElement, renderData?: Partial<SideBarRenderData>[]): void {\n        const titles = this.titles;\n        const n = titles.length;\n        const renderer = this.renderer as TabBarRenderer;\n        const currentTitle = this.currentTitle;\n        const content = new Array<VirtualElement>(n);\n        for (let i = 0; i < n; i++) {\n            const title = titles[i];\n            const current = title === currentTitle;\n            const zIndex = current ? n : n - i - 1;\n            let rd: SideBarRenderData;\n            if (renderData && i < renderData.length) {\n                rd = { title, current, zIndex, ...renderData[i] };\n            } else {\n                rd = { title, current, zIndex };\n            }\n            content[i] = renderer.renderTab(rd, true);\n        }\n        VirtualDOM.render(content, host);\n    }\n\n    /**\n     * The following event processing is used to generate `collapseRequested` signals\n     * when the mouse goes up on the currently selected tab without too much movement\n     * between `mousedown` and `mouseup`. The movement threshold is the same that\n     * is used by the superclass to detect a drag event. The `allowDeselect` option\n     * of the TabBar constructor cannot be used here because it is triggered when the\n     * mouse goes down, and thus collides with dragging.\n     */\n    handleEvent(event: Event): void {\n        switch (event.type) {\n            case 'mousedown':\n                this.onMouseDown(event as MouseEvent);\n                super.handleEvent(event);\n                break;\n            case 'mouseup':\n                super.handleEvent(event);\n                this.onMouseUp(event as MouseEvent);\n                break;\n            case 'mousemove':\n                this.onMouseMove(event as MouseEvent);\n                super.handleEvent(event);\n                break;\n            default:\n                super.handleEvent(event);\n        }\n    }\n\n    private onMouseDown(event: MouseEvent): void {\n        // Check for left mouse button and current mouse status\n        if (event.button !== 0 || this.mouseData) {\n            return;\n        }\n\n        // Check whether the mouse went down on the current tab\n        const tabs = this.contentNode.children;\n        const index = ArrayExt.findFirstIndex(tabs, tab => ElementExt.hitTest(tab, event.clientX, event.clientY));\n        if (index < 0 || index !== this.currentIndex) {\n            return;\n        }\n\n        // Check whether the close button was clicked\n        const icon = tabs[index].querySelector(this.renderer.closeIconSelector);\n        if (icon && icon.contains(event.target as HTMLElement)) {\n            return;\n        }\n\n        this.mouseData = {\n            pressX: event.clientX,\n            pressY: event.clientY,\n            mouseDownTabIndex: index\n        };\n    }\n\n    private onMouseUp(event: MouseEvent): void {\n        // Check for left mouse button and current mouse status\n        if (event.button !== 0 || !this.mouseData) {\n            return;\n        }\n\n        // Check whether the mouse went up on the current tab\n        const mouseDownTabIndex = this.mouseData.mouseDownTabIndex;\n        this.mouseData = undefined;\n        const tabs = this.contentNode.children;\n        const index = ArrayExt.findFirstIndex(tabs, tab => ElementExt.hitTest(tab, event.clientX, event.clientY));\n        if (index < 0 || index !== mouseDownTabIndex) {\n            return;\n        }\n\n        // Collapse the side bar\n        this.collapseRequested.emit(this.titles[index]);\n    }\n\n    private onMouseMove(event: MouseEvent): void {\n        // Check for left mouse button and current mouse status\n        if (event.button !== 0 || !this.mouseData) {\n            return;\n        }\n\n        const data = this.mouseData;\n        const dx = Math.abs(event.clientX - data.pressX);\n        const dy = Math.abs(event.clientY - data.pressY);\n        const threshold = SideTabBar.DRAG_THRESHOLD;\n        if (dx >= threshold || dy >= threshold) {\n            this.mouseData = undefined;\n        }\n    }\n\n}\n","/********************************************************************************\n * Copyright (C) 2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { find, toArray, ArrayExt } from '@phosphor/algorithm';\nimport { TabBar, Widget, DockPanel, Title, DockLayout } from '@phosphor/widgets';\nimport { Signal } from '@phosphor/signaling';\nimport { Disposable, DisposableCollection } from '../../common/disposable';\nimport { MessageLoop } from '../widgets';\n\nconst MAXIMIZED_CLASS = 'theia-maximized';\n\nexport const MAIN_AREA_ID = 'theia-main-content-panel';\nexport const BOTTOM_AREA_ID = 'theia-bottom-content-panel';\n\n/**\n * This specialization of DockPanel adds various events that are used for implementing the\n * side panels of the application shell.\n */\nexport class TheiaDockPanel extends DockPanel {\n\n    /**\n     * Emitted when a widget is added to the panel.\n     */\n    readonly widgetAdded = new Signal<this, Widget>(this);\n    /**\n     * Emitted when a widget is activated by calling `activateWidget`.\n     */\n    readonly widgetActivated = new Signal<this, Widget>(this);\n    /**\n     * Emitted when a widget is removed from the panel.\n     */\n    readonly widgetRemoved = new Signal<this, Widget>(this);\n\n    constructor(options?: DockPanel.IOptions) {\n        super(options);\n        this['_onCurrentChanged'] = (sender: TabBar<Widget>, args: TabBar.ICurrentChangedArgs<Widget>) => {\n            this.markAsCurrent(args.currentTitle || undefined);\n            super['_onCurrentChanged'](sender, args);\n        };\n        this['_onTabActivateRequested'] = (sender: TabBar<Widget>, args: TabBar.ITabActivateRequestedArgs<Widget>) => {\n            this.markAsCurrent(args.title);\n            super['_onTabActivateRequested'](sender, args);\n        };\n    }\n\n    protected _currentTitle: Title<Widget> | undefined;\n    get currentTitle(): Title<Widget> | undefined {\n        return this._currentTitle;\n    }\n\n    get currentTabBar(): TabBar<Widget> | undefined {\n        return this._currentTitle && this.findTabBar(this._currentTitle);\n    }\n\n    findTabBar(title: Title<Widget>): TabBar<Widget> | undefined {\n        return find(this.tabBars(), bar => ArrayExt.firstIndexOf(bar.titles, title) > -1);\n    }\n\n    protected readonly toDisposeOnMarkAsCurrent = new DisposableCollection();\n    markAsCurrent(title: Title<Widget> | undefined): void {\n        this.toDisposeOnMarkAsCurrent.dispose();\n        this._currentTitle = title;\n        if (title) {\n            const resetCurrent = () => this.markAsCurrent(undefined);\n            title.owner.disposed.connect(resetCurrent);\n            this.toDisposeOnMarkAsCurrent.push(Disposable.create(() =>\n                title.owner.disposed.disconnect(resetCurrent)\n            ));\n        }\n    }\n\n    addWidget(widget: Widget, options?: DockPanel.IAddOptions): void {\n        if (this.mode === 'single-document' && widget.parent === this) {\n            return;\n        }\n        super.addWidget(widget, options);\n        this.widgetAdded.emit(widget);\n    }\n\n    activateWidget(widget: Widget): void {\n        super.activateWidget(widget);\n        this.widgetActivated.emit(widget);\n    }\n\n    protected onChildRemoved(msg: Widget.ChildMessage): void {\n        super.onChildRemoved(msg);\n        this.widgetRemoved.emit(msg.child);\n    }\n\n    nextTabBarWidget(widget: Widget): Widget | undefined {\n        const current = this.findTabBar(widget.title);\n        const next = current && this.nextTabBarInPanel(current);\n        return next && next.currentTitle && next.currentTitle.owner || undefined;\n    }\n\n    nextTabBarInPanel(tabBar: TabBar<Widget>): TabBar<Widget> | undefined {\n        const tabBars = toArray(this.tabBars());\n        const index = tabBars.indexOf(tabBar);\n        if (index !== -1) {\n            return tabBars[index + 1];\n        }\n        return undefined;\n    }\n\n    previousTabBarWidget(widget: Widget): Widget | undefined {\n        const current = this.findTabBar(widget.title);\n        const previous = current && this.previousTabBarInPanel(current);\n        return previous && previous.currentTitle && previous.currentTitle.owner || undefined;\n    }\n\n    previousTabBarInPanel(tabBar: TabBar<Widget>): TabBar<Widget> | undefined {\n        const tabBars = toArray(this.tabBars());\n        const index = tabBars.indexOf(tabBar);\n        if (index !== -1) {\n            return tabBars[index - 1];\n        }\n        return undefined;\n    }\n\n    protected readonly toDisposeOnToggleMaximized = new DisposableCollection();\n    toggleMaximized(): void {\n        const areaContainer = this.node.parentElement;\n        if (!areaContainer) {\n            return;\n        }\n        const maximizedElement = this.getMaximizedElement();\n        if (areaContainer === maximizedElement) {\n            this.toDisposeOnToggleMaximized.dispose();\n            return;\n        }\n        if (this.isAttached) {\n            MessageLoop.sendMessage(this, Widget.Msg.BeforeDetach);\n            this.node.remove();\n            MessageLoop.sendMessage(this, Widget.Msg.AfterDetach);\n        }\n        maximizedElement.style.display = 'block';\n        this.addClass(MAXIMIZED_CLASS);\n        MessageLoop.sendMessage(this, Widget.Msg.BeforeAttach);\n        maximizedElement.appendChild(this.node);\n        MessageLoop.sendMessage(this, Widget.Msg.AfterAttach);\n        this.fit();\n        this.toDisposeOnToggleMaximized.push(Disposable.create(() => {\n            maximizedElement.style.display = 'none';\n            this.removeClass(MAXIMIZED_CLASS);\n            if (this.isAttached) {\n                MessageLoop.sendMessage(this, Widget.Msg.BeforeDetach);\n                this.node.remove();\n                MessageLoop.sendMessage(this, Widget.Msg.AfterDetach);\n            }\n            MessageLoop.sendMessage(this, Widget.Msg.BeforeAttach);\n            areaContainer.appendChild(this.node);\n            MessageLoop.sendMessage(this, Widget.Msg.AfterAttach);\n            this.fit();\n        }));\n\n        const layout = this.layout;\n        if (layout instanceof DockLayout) {\n            const onResize = layout['onResize'];\n            layout['onResize'] = () => onResize.bind(layout)(Widget.ResizeMessage.UnknownSize);\n            this.toDisposeOnToggleMaximized.push(Disposable.create(() => layout['onResize'] = onResize));\n        }\n\n        const removedListener = () => {\n            if (!this.widgets().next()) {\n                this.toDisposeOnToggleMaximized.dispose();\n            }\n        };\n        this.widgetRemoved.connect(removedListener);\n        this.toDisposeOnToggleMaximized.push(Disposable.create(() => this.widgetRemoved.disconnect(removedListener)));\n    }\n\n    protected maximizedElement: HTMLElement | undefined;\n    protected getMaximizedElement(): HTMLElement {\n        if (!this.maximizedElement) {\n            this.maximizedElement = document.createElement('div');\n            this.maximizedElement.style.display = 'none';\n            document.body.appendChild(this.maximizedElement);\n        }\n        return this.maximizedElement;\n    }\n\n}\n","/********************************************************************************\n * Copyright (C) 2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { injectable, inject, interfaces } from 'inversify';\nimport { Widget } from '@phosphor/widgets';\nimport {\n    MenuModelRegistry, Command, CommandContribution,\n    MenuContribution, CommandRegistry\n} from '../../common';\nimport { KeybindingContribution, KeybindingRegistry } from '../keybinding';\nimport { WidgetManager } from '../widget-manager';\nimport { CommonMenus } from '../common-frontend-contribution';\nimport { ApplicationShell } from './application-shell';\nimport { QuickViewService } from '../quick-view-service';\n\nexport interface OpenViewArguments extends ApplicationShell.WidgetOptions {\n    toggle?: boolean\n    activate?: boolean;\n    reveal?: boolean;\n}\n\nexport interface ViewContributionOptions {\n    widgetId: string;\n    viewContainerId?: string;\n    widgetName: string;\n    defaultWidgetOptions: ApplicationShell.WidgetOptions;\n    toggleCommandId?: string;\n    toggleKeybinding?: string;\n}\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport function bindViewContribution<T extends AbstractViewContribution<any>>(bind: interfaces.Bind, identifier: interfaces.Newable<T>): interfaces.BindingWhenOnSyntax<T> {\n    const syntax = bind<T>(identifier).toSelf().inSingletonScope();\n    bind(CommandContribution).toService(identifier);\n    bind(KeybindingContribution).toService(identifier);\n    bind(MenuContribution).toService(identifier);\n    return syntax;\n}\n\n/**\n * An abstract superclass for frontend contributions that add a view to the application shell.\n */\n@injectable()\nexport abstract class AbstractViewContribution<T extends Widget> implements CommandContribution, MenuContribution, KeybindingContribution {\n\n    @inject(WidgetManager) protected readonly widgetManager: WidgetManager;\n    @inject(ApplicationShell) protected readonly shell: ApplicationShell;\n\n    @inject(QuickViewService)\n    protected readonly quickView: QuickViewService;\n\n    readonly toggleCommand?: Command;\n\n    constructor(\n        protected readonly options: ViewContributionOptions\n    ) {\n        if (options.toggleCommandId) {\n            this.toggleCommand = {\n                id: options.toggleCommandId,\n                label: 'Toggle ' + this.viewLabel + ' View'\n            };\n        }\n    }\n\n    get viewId(): string {\n        return this.options.widgetId;\n    }\n\n    get viewLabel(): string {\n        return this.options.widgetName;\n    }\n\n    get defaultViewOptions(): ApplicationShell.WidgetOptions {\n        return this.options.defaultWidgetOptions;\n    }\n\n    get widget(): Promise<T> {\n        return this.widgetManager.getOrCreateWidget(this.viewId);\n    }\n\n    tryGetWidget(): T | undefined {\n        return this.widgetManager.tryGetWidget(this.viewId);\n    }\n\n    async openView(args: Partial<OpenViewArguments> = {}): Promise<T> {\n        const shell = this.shell;\n        const widget = await this.widgetManager.getOrCreateWidget(this.options.viewContainerId || this.viewId);\n        const tabBar = shell.getTabBarFor(widget);\n        const area = shell.getAreaFor(widget);\n        if (!tabBar) {\n            // The widget is not attached yet, so add it to the shell\n            const widgetArgs: OpenViewArguments = {\n                ...this.defaultViewOptions,\n                ...args\n            };\n            await shell.addWidget(widget, widgetArgs);\n        } else if (args.toggle && area && shell.isExpanded(area) && tabBar.currentTitle === widget.title) {\n            // The widget is attached and visible, so collapse the containing panel (toggle)\n            switch (area) {\n                case 'left':\n                case 'right':\n                    await shell.collapsePanel(area);\n                    break;\n                case 'bottom':\n                    // Don't collapse the bottom panel if it's currently split\n                    if (shell.bottomAreaTabBars.length === 1) {\n                        await shell.collapsePanel('bottom');\n                    }\n                    break;\n                default:\n                    // The main area cannot be collapsed, so close the widget\n                    await this.closeView();\n            }\n            return this.widget;\n        }\n        if (widget.isAttached && args.activate) {\n            await shell.activateWidget(this.viewId);\n        } else if (widget.isAttached && args.reveal) {\n            await shell.revealWidget(this.viewId);\n        }\n        return this.widget;\n    }\n\n    registerCommands(commands: CommandRegistry): void {\n        if (this.toggleCommand) {\n            commands.registerCommand(this.toggleCommand, {\n                execute: () => this.toggleView()\n            });\n        }\n        this.quickView.registerItem({\n            label: this.viewLabel,\n            open: () => this.openView({ activate: true })\n        });\n    }\n\n    async closeView(): Promise<T | undefined> {\n        const widget = await this.shell.closeWidget(this.viewId);\n        return widget as T | undefined;\n    }\n\n    toggleView(): Promise<T> {\n        return this.openView({\n            toggle: true,\n            activate: true\n        });\n    }\n\n    registerMenus(menus: MenuModelRegistry): void {\n        if (this.toggleCommand) {\n            menus.registerMenuAction(CommonMenus.VIEW_VIEWS, {\n                commandId: this.toggleCommand.id,\n                label: this.viewLabel\n            });\n        }\n    }\n\n    registerKeybindings(keybindings: KeybindingRegistry): void {\n        if (this.toggleCommand && this.options.toggleKeybinding) {\n            keybindings.registerKeybinding({\n                command: this.toggleCommand.id,\n                keybinding: this.options.toggleKeybinding\n            });\n        }\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nexport * from './status-bar';\n","/********************************************************************************\n * Copyright (C) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport * as React from 'react';\nimport { injectable, inject } from 'inversify';\nimport Octicon, { getIconByName } from '@primer/octicons-react';\nimport { CommandService } from '../../common';\nimport { ReactWidget } from '../widgets/react-widget';\nimport { FrontendApplicationStateService } from '../frontend-application-state';\nimport { LabelParser, LabelIcon } from '../label-parser';\n\nexport interface StatusBarEntry {\n    /**\n     * For icons we use octicons and fontawesome icons. octicons take precedence over fontawesome. Get more information and the class names\n     * here: http://fontawesome.io/icons/\n     * To set a text with icon use the following pattern in text string:\n     * $(fontawesomeClassName)\n     * To use animated icons use the following pattern:\n     * $(fontawesomeClassName~typeOfAnimation)\n     * Type of animation can be either spin or pulse.\n     * Look here for more information to animated icons:\n     * http://fontawesome.io/examples/#animated\n     */\n    text: string;\n    alignment: StatusBarAlignment;\n    color?: string;\n    className?: string;\n    tooltip?: string;\n    command?: string;\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    arguments?: any[];\n    priority?: number;\n    onclick?: (e: MouseEvent) => void;\n}\n\nexport enum StatusBarAlignment {\n    LEFT, RIGHT\n}\n\nexport interface StatusBarEntryAttributes {\n    className?: string;\n    title?: string;\n    style?: object;\n    onClick?: (e: MouseEvent) => void;\n}\n\nexport const STATUSBAR_WIDGET_FACTORY_ID = 'statusBar';\n\nexport const StatusBar = Symbol('StatusBar');\n\nexport interface StatusBar {\n    setBackgroundColor(color?: string): Promise<void>;\n    setColor(color?: string): Promise<void>;\n    setElement(id: string, entry: StatusBarEntry): Promise<void>;\n    removeElement(id: string): Promise<void>;\n}\n\n@injectable()\nexport class StatusBarImpl extends ReactWidget implements StatusBar {\n\n    protected backgroundColor: string | undefined;\n    protected color: string | undefined;\n    protected entries: Map<string, StatusBarEntry> = new Map();\n\n    constructor(\n        @inject(CommandService) protected readonly commands: CommandService,\n        @inject(LabelParser) protected readonly entryService: LabelParser,\n        @inject(FrontendApplicationStateService) protected readonly applicationStateService: FrontendApplicationStateService\n    ) {\n        super();\n        delete this.scrollOptions;\n        this.id = 'theia-statusBar';\n        this.addClass('noselect');\n    }\n\n    protected get ready(): Promise<void> {\n        return this.applicationStateService.reachedAnyState('initialized_layout', 'ready');\n    }\n\n    async setElement(id: string, entry: StatusBarEntry): Promise<void> {\n        await this.ready;\n        this.entries.set(id, entry);\n        this.update();\n    }\n\n    async removeElement(id: string): Promise<void> {\n        await this.ready;\n        this.entries.delete(id);\n        this.update();\n    }\n\n    async setBackgroundColor(color?: string): Promise<void> {\n        await this.ready;\n        this.internalSetBackgroundColor(color);\n        this.update();\n    }\n\n    protected internalSetBackgroundColor(color?: string): void {\n        this.backgroundColor = color;\n        // eslint-disable-next-line no-null/no-null\n        this.node.style.backgroundColor = this.backgroundColor ? this.backgroundColor : null;\n    }\n\n    async setColor(color?: string): Promise<void> {\n        await this.ready;\n        this.internalSetColor(color);\n        this.update();\n    }\n\n    protected internalSetColor(color?: string): void {\n        this.color = color;\n    }\n\n    protected render(): JSX.Element {\n        const leftEntries: JSX.Element[] = [];\n        const rightEntries: JSX.Element[] = [];\n        const elements = Array.from(this.entries).sort((left, right) => {\n            const lp = left[1].priority || 0;\n            const rp = right[1].priority || 0;\n            return rp - lp;\n        });\n        elements.forEach(([id, entry]) => {\n            if (entry.alignment === StatusBarAlignment.LEFT) {\n                leftEntries.push(this.renderElement(id, entry));\n            } else {\n                rightEntries.push(this.renderElement(id, entry));\n            }\n        });\n\n        return <React.Fragment>\n            <div className='area left'>{leftEntries}</div>\n            <div className='area right'>{rightEntries}</div>\n        </React.Fragment>;\n    }\n\n    protected onclick(entry: StatusBarEntry): () => void {\n        return () => {\n            if (entry.command) {\n                const args = entry.arguments || [];\n                this.commands.executeCommand(entry.command, ...args);\n            }\n        };\n    }\n\n    protected createAttributes(entry: StatusBarEntry): StatusBarEntryAttributes {\n        const attrs: StatusBarEntryAttributes = {};\n\n        if (entry.command) {\n            attrs.onClick = this.onclick(entry);\n            attrs.className = 'element hasCommand';\n        } else if (entry.onclick) {\n            attrs.onClick = e => {\n                if (entry.onclick) {\n                    entry.onclick(e);\n                }\n            };\n            attrs.className = 'element hasCommand';\n        } else {\n            attrs.className = 'element';\n        }\n\n        if (entry.tooltip) {\n            attrs.title = entry.tooltip;\n        }\n\n        attrs.style = {\n            color: entry.color || this.color\n        };\n\n        if (entry.className) {\n            attrs.className += ' ' + entry.className;\n        }\n\n        return attrs;\n    }\n\n    protected renderElement(id: string, entry: StatusBarEntry): JSX.Element {\n        const childStrings = this.entryService.parse(entry.text);\n        const children: JSX.Element[] = [];\n\n        childStrings.forEach((val, key) => {\n            if (!(typeof val === 'string') && LabelIcon.is(val)) {\n                const octicon = getIconByName(val.name);\n                if (octicon) {\n                    children.push(<span key={key} className={val.animation ? 'fa-' + val.animation : 'fa'}><Octicon icon={octicon} height={12.5} width={12.5} /></span>);\n                } else {\n                    children.push(<span key={key} className={`fa fa-${val.name} ${val.animation ? 'fa-' + val.animation : ''}`}></span>);\n                }\n            } else {\n                children.push(<span key={key}>{val}</span>);\n            }\n        });\n        const elementInnerDiv = <React.Fragment>{children}</React.Fragment>;\n\n        return React.createElement('div', { key: id, ...this.createAttributes(entry) }, elementInnerDiv);\n    }\n\n}\n","/********************************************************************************\n * Copyright (C) 2017 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { inject, injectable, postConstruct } from 'inversify';\nimport { ILogger } from '../common/logger';\nimport { MessageService } from '../common/message-service';\nimport { WindowService } from './window/window-service';\nimport { environment } from '@theia/application-package/lib/environment';\n\nexport const StorageService = Symbol('IStorageService');\n/**\n * The storage service provides an interface to some data storage that allows extensions to keep state among sessions.\n */\nexport interface StorageService {\n\n    /**\n     * Stores the given data under the given key.\n     */\n    setData<T>(key: string, data: T): Promise<void>;\n\n    /**\n     * Returns the data stored for the given key or the provided default value if nothing is stored for the given key.\n     */\n    getData<T>(key: string, defaultValue: T): Promise<T>;\n    getData<T>(key: string): Promise<T | undefined>;\n}\n\ninterface LocalStorage {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    [key: string]: any;\n}\n\n@injectable()\nexport class LocalStorageService implements StorageService {\n    private storage: LocalStorage;\n\n    @inject(ILogger) protected logger: ILogger;\n    @inject(MessageService) protected readonly messageService: MessageService;\n    @inject(WindowService) protected readonly windowService: WindowService;\n\n    @postConstruct()\n    protected init(): void {\n        if (typeof window !== 'undefined' && window.localStorage) {\n            this.storage = window.localStorage;\n            this.testLocalStorage();\n        } else {\n            this.logger.warn(log => log(\"The browser doesn't support localStorage. state will not be persisted across sessions.\"));\n            this.storage = {};\n        }\n    }\n\n    setData<T>(key: string, data?: T): Promise<void> {\n        if (data !== undefined) {\n            try {\n                this.storage[this.prefix(key)] = JSON.stringify(data);\n            } catch (e) {\n                this.showDiskQuotaExceededMessage();\n            }\n        } else {\n            delete this.storage[this.prefix(key)];\n        }\n        return Promise.resolve();\n    }\n\n    getData<T>(key: string, defaultValue?: T): Promise<T | undefined> {\n        const result = this.storage[this.prefix(key)];\n        if (result === undefined) {\n            return Promise.resolve(defaultValue);\n        }\n        return Promise.resolve(JSON.parse(result));\n    }\n\n    protected prefix(key: string): string {\n        if (environment.electron.is()) {\n            return `theia:${key}`;\n        }\n        const pathname = typeof window === 'undefined' ? '' : window.location.pathname;\n        return `theia:${pathname}:${key}`;\n    }\n\n    private async showDiskQuotaExceededMessage(): Promise<void> {\n        const READ_INSTRUCTIONS_ACTION = 'Read Instructions';\n        const CLEAR_STORAGE_ACTION = 'Clear Local Storage';\n        const ERROR_MESSAGE = `Your preferred browser's local storage is almost full.\n        To be able to save your current workspace layout or data, you may need to free up some space.\n        You can refer to Theia's documentation page for instructions on how to manually clean\n        your browser's local storage or choose to clear all.`;\n        this.messageService.warn(ERROR_MESSAGE, READ_INSTRUCTIONS_ACTION, CLEAR_STORAGE_ACTION).then(async selected => {\n            if (READ_INSTRUCTIONS_ACTION === selected) {\n                this.windowService.openNewWindow('https://github.com/eclipse-theia/theia/wiki/Cleaning-Local-Storage', { external: true });\n            } else if (CLEAR_STORAGE_ACTION === selected) {\n                this.clearStorage();\n            }\n        });\n    }\n\n    /**\n     * Verify if there is still some spaces left to save another workspace configuration into the local storage of your browser.\n     * If we are close to the limit, use a dialog to notify the user.\n     */\n    private testLocalStorage(): void {\n        const keyTest = this.prefix('Test');\n        try {\n            this.storage[keyTest] = JSON.stringify(new Array(60000));\n        } catch (error) {\n            this.showDiskQuotaExceededMessage();\n        } finally {\n            this.storage.removeItem(keyTest);\n        }\n    }\n\n    private clearStorage(): void {\n        this.storage.clear();\n    }\n\n}\n","/********************************************************************************\n * Copyright (C) 2017 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { Emitter, Event } from '../common/event';\nimport { Disposable } from '../common/disposable';\nimport { FrontendApplicationConfigProvider } from './frontend-application-config-provider';\n\nexport const ThemeServiceSymbol = Symbol('ThemeService');\n\nexport type ThemeType = 'light' | 'dark' | 'hc';\n\nexport interface Theme {\n    readonly id: string;\n    readonly type: ThemeType;\n    readonly label: string;\n    readonly description?: string;\n    readonly editorTheme?: string;\n    activate(): void;\n    deactivate(): void;\n}\n\nexport interface ThemeChangeEvent {\n    readonly newTheme: Theme;\n    readonly oldTheme?: Theme;\n}\n\nexport class ThemeService {\n\n    private themes: { [id: string]: Theme } = {};\n    private activeTheme: Theme | undefined;\n    private readonly themeChange = new Emitter<ThemeChangeEvent>();\n\n    readonly onThemeChange: Event<ThemeChangeEvent> = this.themeChange.event;\n\n    static get(): ThemeService {\n        const global = window as any; // eslint-disable-line @typescript-eslint/no-explicit-any\n        return global[ThemeServiceSymbol] || new ThemeService();\n    }\n\n    protected constructor(\n        protected _defaultTheme: string | undefined = FrontendApplicationConfigProvider.get().defaultTheme,\n        protected fallbackTheme: string = 'dark'\n    ) {\n        const global = window as any; // eslint-disable-line @typescript-eslint/no-explicit-any\n        global[ThemeServiceSymbol] = this;\n    }\n\n    register(...themes: Theme[]): Disposable {\n        for (const theme of themes) {\n            this.themes[theme.id] = theme;\n        }\n        this.validateActiveTheme();\n        return Disposable.create(() => {\n            for (const theme of themes) {\n                delete this.themes[theme.id];\n            }\n            this.validateActiveTheme();\n        });\n    }\n\n    protected validateActiveTheme(): void {\n        if (!this.activeTheme) {\n            return;\n        }\n        const theme = this.themes[this.activeTheme.id];\n        if (!theme) {\n            this.loadUserTheme();\n        } else if (theme !== this.activeTheme) {\n            this.activeTheme = undefined;\n            this.setCurrentTheme(theme.id);\n        }\n    }\n\n    getThemes(): Theme[] {\n        const result = [];\n        for (const o in this.themes) {\n            if (this.themes.hasOwnProperty(o)) {\n                result.push(this.themes[o]);\n            }\n        }\n        return result;\n    }\n\n    getTheme(themeId: string): Theme {\n        return this.themes[themeId] || this.defaultTheme;\n    }\n\n    startupTheme(): void {\n        const theme = this.getCurrentTheme();\n        theme.activate();\n    }\n\n    loadUserTheme(): void {\n        const theme = this.getCurrentTheme();\n        this.setCurrentTheme(theme.id);\n    }\n\n    setCurrentTheme(themeId: string): void {\n        const newTheme = this.getTheme(themeId);\n        const oldTheme = this.activeTheme;\n        if (oldTheme) {\n            if (oldTheme.id === newTheme.id) {\n                return;\n            }\n            oldTheme.deactivate();\n        }\n        newTheme.activate();\n        this.activeTheme = newTheme;\n        window.localStorage.setItem('theme', themeId);\n        this.themeChange.fire({\n            newTheme, oldTheme\n        });\n    }\n\n    getCurrentTheme(): Theme {\n        const themeId = window.localStorage.getItem('theme') || this.defaultTheme.id;\n        return this.getTheme(themeId);\n    }\n\n    /**\n     * The default theme. If that is not applicable, returns with the fallback theme.\n     */\n    get defaultTheme(): Theme {\n        return this.themes[this._defaultTheme || this.fallbackTheme] || this.themes[this.fallbackTheme];\n    }\n\n    /**\n     * Resets the state to the user's default, or to the fallback theme. Also discards any persisted state in the local storage.\n     */\n    reset(): void {\n        this.setCurrentTheme(this.defaultTheme.id);\n    }\n\n}\n\nexport class BuiltinThemeProvider {\n\n    // Webpack converts these `require` in some Javascript object that wraps the `.css` files\n    static readonly darkCss = require('../../src/browser/style/variables-dark.useable.css');\n    static readonly lightCss = require('../../src/browser/style/variables-bright.useable.css');\n\n    static readonly darkTheme: Theme = {\n        id: 'dark',\n        type: 'dark',\n        label: 'Dark (Theia)',\n        editorTheme: 'dark-theia', // loaded in /packages/monaco/src/browser/textmate/monaco-theme-registry.ts\n        activate(): void {\n            BuiltinThemeProvider.darkCss.use();\n        },\n        deactivate(): void {\n            BuiltinThemeProvider.darkCss.unuse();\n        }\n    };\n\n    static readonly lightTheme: Theme = {\n        id: 'light',\n        type: 'light',\n        label: 'Light (Theia)',\n        editorTheme: 'light-theia', // loaded in /packages/monaco/src/browser/textmate/monaco-theme-registry.ts\n        activate(): void {\n            BuiltinThemeProvider.lightCss.use();\n        },\n        deactivate(): void {\n            BuiltinThemeProvider.lightCss.unuse();\n        }\n    };\n\n    static readonly hcTheme: Theme = {\n        id: 'hc-theia',\n        type: 'hc',\n        label: 'High Contrast (Theia)',\n        editorTheme: 'hc-theia', // loaded in /packages/monaco/src/browser/textmate/monaco-theme-registry.ts\n        activate(): void {\n            BuiltinThemeProvider.darkCss.use();\n        },\n        deactivate(): void {\n            BuiltinThemeProvider.darkCss.unuse();\n        }\n    };\n\n    static readonly themes = [\n        BuiltinThemeProvider.darkTheme,\n        BuiltinThemeProvider.lightTheme,\n        BuiltinThemeProvider.hcTheme\n    ];\n}\n","/********************************************************************************\n * Copyright (C) 2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport * as fuzzy from 'fuzzy';\nimport { injectable } from 'inversify';\n\n@injectable()\nexport class FuzzySearch {\n\n    private static readonly PRE = '\\x01';\n    private static readonly POST = '\\x02';\n\n    /**\n     * Filters the input and returns with an array that contains all items that match the pattern.\n     */\n    async filter<T>(input: FuzzySearch.Input<T>): Promise<FuzzySearch.Match<T>[]> {\n        return fuzzy.filter(input.pattern, input.items.slice(), {\n            pre: FuzzySearch.PRE,\n            post: FuzzySearch.POST,\n            extract: input.transform\n        }).sort(this.sortResults.bind(this)).map(this.mapResult.bind(this));\n    }\n\n    protected sortResults<T>(left: fuzzy.FilterResult<T>, right: fuzzy.FilterResult<T>): number {\n        return left.index - right.index;\n    }\n\n    protected mapResult<T>(result: fuzzy.FilterResult<T>): FuzzySearch.Match<T> {\n        return {\n            item: result.original,\n            ranges: this.mapRanges(result.string)\n        };\n    }\n\n    protected mapRanges(input: string): ReadonlyArray<FuzzySearch.Range> {\n        const copy = input.split('').filter(s => s !== '');\n        const ranges: FuzzySearch.Range[] = [];\n        const validate = (pre: number, post: number) => {\n            if (preIndex > postIndex || (preIndex === -1) !== (postIndex === -1)) {\n                throw new Error(`Error when trying to map ranges. Escaped string was: '${input}. [${[...input].join('|')}]'`);\n            }\n        };\n        let preIndex = copy.indexOf(FuzzySearch.PRE);\n        let postIndex = copy.indexOf(FuzzySearch.POST);\n        validate(preIndex, postIndex);\n        while (preIndex !== -1 && postIndex !== -1) {\n            ranges.push({\n                offset: preIndex,\n                length: postIndex - preIndex - 1\n            });\n            copy.splice(postIndex, 1);\n            copy.splice(preIndex, 1);\n            preIndex = copy.indexOf(FuzzySearch.PRE);\n            postIndex = copy.indexOf(FuzzySearch.POST);\n        }\n        if (ranges.length === 0) {\n            throw new Error(`Unexpected zero ranges for match-string: ${input}.`);\n        }\n        return ranges;\n    }\n\n}\n\n/**\n * Fuzzy searcher.\n */\nexport namespace FuzzySearch {\n\n    /**\n     * A range representing the match region.\n     */\n    export interface Range {\n\n        /**\n         * The zero based offset of the match region.\n         */\n        readonly offset: number;\n\n        /**\n         * The length of the match region.\n         */\n        readonly length: number;\n    }\n\n    /**\n     * A fuzzy search match.\n     */\n    export interface Match<T> {\n\n        /**\n         * The original item.\n         */\n        readonly item: T;\n\n        /**\n         * An array of ranges representing the match regions.\n         */\n        readonly ranges: ReadonlyArray<Range>;\n    }\n\n    /**\n     * The fuzzy search input.\n     */\n    export interface Input<T> {\n\n        /**\n         * The pattern to match.\n         */\n        readonly pattern: string;\n\n        /**\n         * The items to filter based on the `pattern`.\n         */\n        readonly items: ReadonlyArray<T>;\n\n        /**\n         * Function that extracts the string from the inputs which will be used to evaluate the fuzzy matching filter.\n         */\n        readonly transform: (item: T) => string;\n\n    }\n\n}\n","/********************************************************************************\n * Copyright (C) 2017 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nexport * from './tree';\nexport * from './tree-selection';\nexport * from './tree-expansion';\nexport * from './tree-navigation';\nexport * from './tree-iterator';\nexport * from './tree-model';\nexport * from './tree-widget';\nexport * from './tree-container';\nexport * from './tree-decorator';\nexport * from './tree-search';\n","/********************************************************************************\n * Copyright (C) 2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { Event, Emitter } from '../../common/event';\nimport { Disposable, DisposableCollection } from '../../common/disposable';\n\nimport debounce = require('lodash.debounce');\n\n/**\n * Options for the search term debounce.\n */\nexport interface SearchBoxDebounceOptions {\n\n    /**\n     * The delay (in milliseconds) before the debounce notifies clients about its content change.\n     */\n    readonly delay: number;\n\n}\n\nexport namespace SearchBoxDebounceOptions {\n\n    /**\n     * The default debounce option.\n     */\n    export const DEFAULT: SearchBoxDebounceOptions = {\n        delay: 200\n    };\n\n}\n\n/**\n * It notifies the clients, once if the underlying search term has changed after a given amount of delay.\n */\nexport class SearchBoxDebounce implements Disposable {\n\n    protected readonly disposables = new DisposableCollection();\n    protected readonly emitter = new Emitter<string | undefined>();\n    protected readonly handler: () => void;\n\n    protected state: string | undefined;\n\n    constructor(protected readonly options: SearchBoxDebounceOptions) {\n        this.disposables.push(this.emitter);\n        this.handler = debounce(() => this.fireChanged(this.state), this.options.delay).bind(this);\n    }\n\n    append(input: string | undefined): string | undefined {\n        if (input === undefined) {\n            this.reset();\n            return undefined;\n        }\n        if (this.state === undefined) {\n            this.state = input;\n        } else {\n            if (input === '\\b') {\n                this.state = this.state.length === 1 ? '' : this.state.substr(0, this.state.length - 1);\n            } else {\n                this.state += input;\n            }\n        }\n        this.handler();\n        return this.state;\n    }\n\n    get onChanged(): Event<string | undefined> {\n        return this.emitter.event;\n    }\n\n    dispose(): void {\n        this.disposables.dispose();\n    }\n\n    protected fireChanged(value: string | undefined): void {\n        this.emitter.fire(value);\n    }\n\n    protected reset(): void {\n        this.state = undefined;\n        this.fireChanged(undefined);\n    }\n\n}\n","/********************************************************************************\n * Copyright (C) 2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { SearchBoxDebounce, SearchBoxDebounceOptions } from '../tree/search-box-debounce';\nimport { BaseWidget, Message } from '../widgets/widget';\nimport { Emitter, Event } from '../../common/event';\nimport { KeyCode, Key } from '../keyboard/keys';\n\n/**\n * Initializer properties for the search box widget.\n */\nexport interface SearchBoxProps extends SearchBoxDebounceOptions {\n\n    /**\n     * If `true`, the `Previous`, `Next`, and `Close` buttons will be visible. Otherwise, `false`. Defaults to `false`.\n     */\n    readonly showButtons?: boolean;\n\n}\n\nexport namespace SearchBoxProps {\n\n    /**\n     * The default search box widget option.\n     */\n    export const DEFAULT: SearchBoxProps = SearchBoxDebounceOptions.DEFAULT;\n\n}\n\n/**\n * The search box widget.\n */\nexport class SearchBox extends BaseWidget {\n\n    protected static SPECIAL_KEYS = [\n        Key.ESCAPE,\n        Key.BACKSPACE\n    ];\n\n    protected readonly nextEmitter = new Emitter<void>();\n    protected readonly previousEmitter = new Emitter<void>();\n    protected readonly closeEmitter = new Emitter<void>();\n    protected readonly textChangeEmitter = new Emitter<string | undefined>();\n    protected readonly input: HTMLInputElement;\n\n    constructor(protected readonly props: SearchBoxProps,\n        protected readonly debounce: SearchBoxDebounce) {\n\n        super();\n        this.toDispose.pushAll([\n            this.nextEmitter,\n            this.previousEmitter,\n            this.closeEmitter,\n            this.textChangeEmitter,\n            this.debounce,\n            this.debounce.onChanged(data => this.fireTextChange(data))\n        ]);\n        this.hide();\n        this.update();\n        const { input } = this.createContent();\n        this.input = input;\n    }\n\n    get onPrevious(): Event<void> {\n        return this.previousEmitter.event;\n    }\n\n    get onNext(): Event<void> {\n        return this.nextEmitter.event;\n    }\n\n    get onClose(): Event<void> {\n        return this.closeEmitter.event;\n    }\n\n    get onTextChange(): Event<string | undefined> {\n        return this.textChangeEmitter.event;\n    }\n\n    get keyCodePredicate(): KeyCode.Predicate {\n        return this.canHandle.bind(this);\n    }\n\n    protected firePrevious(): void {\n        this.previousEmitter.fire(undefined);\n    }\n\n    protected fireNext(): void {\n        this.nextEmitter.fire(undefined);\n    }\n\n    protected fireClose(): void {\n        this.closeEmitter.fire(undefined);\n    }\n\n    protected fireTextChange(input: string | undefined): void {\n        this.textChangeEmitter.fire(input);\n    }\n\n    handle(event: KeyboardEvent): void {\n        event.preventDefault();\n        const keyCode = KeyCode.createKeyCode(event);\n        if (this.canHandle(keyCode)) {\n            if (Key.equals(Key.ESCAPE, keyCode)) {\n                this.hide();\n            } else {\n                this.show();\n                this.handleKey(keyCode);\n            }\n        }\n    }\n\n    protected handleArrowUp(): void {\n        this.firePrevious();\n    }\n\n    protected handleArrowDown(): void {\n        this.fireNext();\n    }\n\n    onBeforeHide(): void {\n        this.debounce.append(undefined);\n        this.fireClose();\n    }\n\n    protected handleKey(keyCode: KeyCode): void {\n        const character = Key.equals(Key.BACKSPACE, keyCode) ? '\\b' : keyCode.character;\n        const data = this.debounce.append(character);\n        if (data) {\n            this.input.value = data;\n            this.update();\n        } else {\n            this.hide();\n        }\n    }\n\n    protected canHandle(keyCode: KeyCode | undefined): boolean {\n        if (keyCode === undefined) {\n            return false;\n        }\n        const { ctrl, alt, meta } = keyCode;\n        if (ctrl || alt || meta) {\n            return false;\n        }\n        if (keyCode.character || (this.isVisible && SearchBox.SPECIAL_KEYS.some(key => Key.equals(key, keyCode)))) {\n            return true;\n        }\n        return false;\n    }\n\n    protected createContent(): {\n        container: HTMLElement,\n        input: HTMLInputElement,\n        previous: HTMLElement | undefined,\n        next: HTMLElement | undefined,\n        close: HTMLElement | undefined\n    } {\n\n        this.addClass(SearchBox.Styles.SEARCH_BOX);\n\n        const input = document.createElement('input');\n        input.readOnly = false;\n        input.type = 'text';\n        input.onkeydown = ev => this.handle.bind(this)(ev);\n        input.classList.add(\n            'theia-input',\n            SearchBox.Styles.SEARCH_INPUT\n        );\n        this.node.appendChild(input);\n\n        let previous: HTMLElement | undefined;\n        let next: HTMLElement | undefined;\n        let close: HTMLElement | undefined;\n\n        if (!!this.props.showButtons) {\n            previous = document.createElement('div');\n            previous.classList.add(\n                SearchBox.Styles.BUTTON,\n                SearchBox.Styles.BUTTON_PREVIOUS\n            );\n            previous.title = 'Previous (Up)';\n            this.node.appendChild(previous);\n            previous.onclick = () => this.firePrevious.bind(this)();\n\n            next = document.createElement('div');\n            next.classList.add(\n                SearchBox.Styles.BUTTON,\n                SearchBox.Styles.BUTTON_NEXT\n            );\n            next.title = 'Next (Down)';\n            this.node.appendChild(next);\n            next.onclick = () => this.fireNext.bind(this)();\n\n            close = document.createElement('div');\n            close.classList.add(\n                SearchBox.Styles.BUTTON,\n                SearchBox.Styles.BUTTON_CLOSE\n            );\n            close.title = 'Close (Escape)';\n            this.node.appendChild(close);\n            close.onclick = () => this.hide.bind(this)();\n        }\n\n        return {\n            container: this.node,\n            input,\n            previous,\n            next,\n            close\n        };\n\n    }\n\n    protected onAfterAttach(msg: Message): void {\n        super.onAfterAttach(msg);\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        this.addEventListener(this.input, 'selectstart' as any, () => false);\n    }\n\n}\n\nexport namespace SearchBox {\n\n    /**\n     * CSS classes for the search box widget.\n     */\n    export namespace Styles {\n\n        export const SEARCH_BOX = 'theia-search-box';\n        export const SEARCH_INPUT = 'theia-search-input';\n        export const BUTTON = 'theia-search-button';\n        export const BUTTON_PREVIOUS = 'theia-search-button-previous';\n        export const BUTTON_NEXT = 'theia-search-button-next';\n        export const BUTTON_CLOSE = 'theia-search-button-close';\n        export const NON_SELECTABLE = 'theia-non-selectable';\n\n    }\n\n}\n\n/**\n * Search box factory.\n */\nexport const SearchBoxFactory = Symbol('SearchBoxFactory');\nexport interface SearchBoxFactory {\n\n    /**\n     * Creates a new search box with the given initializer properties.\n     */\n    (props: SearchBoxProps): SearchBox;\n\n}\n","/********************************************************************************\n * Copyright (C) 2017 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { interfaces, Container } from 'inversify';\nimport { TreeWidget, TreeProps, defaultTreeProps } from './tree-widget';\nimport { TreeModelImpl, TreeModel } from './tree-model';\nimport { TreeImpl, Tree } from './tree';\nimport { TreeSelectionService } from './tree-selection';\nimport { TreeSelectionServiceImpl } from './tree-selection-impl';\nimport { TreeExpansionService, TreeExpansionServiceImpl } from './tree-expansion';\nimport { TreeNavigationService } from './tree-navigation';\nimport { TreeDecoratorService, NoopTreeDecoratorService } from './tree-decorator';\nimport { TreeSearch } from './tree-search';\nimport { FuzzySearch } from './fuzzy-search';\nimport { SearchBox, SearchBoxFactory, SearchBoxProps } from './search-box';\nimport { SearchBoxDebounce } from './search-box-debounce';\n\nexport function createTreeContainer(parent: interfaces.Container, props?: Partial<TreeProps>): Container {\n    const child = new Container({ defaultScope: 'Singleton' });\n    child.parent = parent;\n\n    child.bind(TreeImpl).toSelf();\n    child.bind(Tree).toService(TreeImpl);\n\n    child.bind(TreeSelectionServiceImpl).toSelf();\n    child.bind(TreeSelectionService).toService(TreeSelectionServiceImpl);\n\n    child.bind(TreeExpansionServiceImpl).toSelf();\n    child.bind(TreeExpansionService).toService(TreeExpansionServiceImpl);\n\n    child.bind(TreeNavigationService).toSelf();\n\n    child.bind(TreeModelImpl).toSelf();\n    child.bind(TreeModel).toService(TreeModelImpl);\n\n    child.bind(TreeWidget).toSelf();\n    child.bind(TreeProps).toConstantValue({\n        ...defaultTreeProps,\n        ...props\n    });\n\n    child.bind(TreeSearch).toSelf().inSingletonScope();\n    child.bind(FuzzySearch).toSelf().inSingletonScope();\n    child.bind(SearchBoxFactory).toFactory(context =>\n        (options: SearchBoxProps) => {\n            const debounce = new SearchBoxDebounce(options);\n            return new SearchBox(options, debounce);\n        }\n    );\n\n    child.bind(TreeDecoratorService).to(NoopTreeDecoratorService).inSingletonScope();\n    return child;\n}\n","/********************************************************************************\n * Copyright (C) 2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { injectable } from 'inversify';\nimport { Tree, TreeNode } from './tree';\nimport { Event, Emitter, Disposable, DisposableCollection, MaybePromise } from '../../common';\nimport { WidgetDecoration } from '../widget-decoration';\n\n/**\n * Tree decorator that can change the look and the style of the tree items within a widget.\n */\nexport interface TreeDecorator {\n\n    /**\n     * The unique identifier of the decorator. Ought to be unique in the application.\n     */\n    readonly id: string;\n\n    /**\n     * Fired when this decorator has calculated all the decoration data for the tree nodes. Keys are the unique identifier of the tree nodes.\n     */\n    readonly onDidChangeDecorations: Event<(tree: Tree) => Map<string, TreeDecoration.Data>>;\n\n    /**\n     * Returns with the current decoration data for the tree argument.\n     *\n     * @param tree the tree to decorate.\n     */\n    decorations(tree: Tree): MaybePromise<Map<string, TreeDecoration.Data>>;\n\n}\n\n/**\n * Decorator service which emits events from all known tree decorators.\n * Keys are the unique tree node IDs and the values\n * are the decoration data collected from all the decorators known by this service.\n */\nexport const TreeDecoratorService = Symbol('TreeDecoratorService');\nexport interface TreeDecoratorService extends Disposable {\n\n    /**\n     * Fired when any of the available tree decorators has changes.\n     */\n    readonly onDidChangeDecorations: Event<void>;\n\n    /**\n     * Returns with the decorators for the tree based on the actual state of this decorator service.\n     */\n    getDecorations(tree: Tree): MaybePromise<Map<string, TreeDecoration.Data[]>>;\n\n    /**\n     * Transforms the decorators argument into an object, so that it can be safely serialized into JSON.\n     */\n    deflateDecorators(decorations: Map<string, TreeDecoration.Data[]>): object;\n\n    /**\n     * Counterpart of the [deflateDecorators](#deflateDecorators) method. Restores the argument into a Map\n     * of tree node IDs and the corresponding decorations data array.\n     */\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    inflateDecorators(state: any): Map<string, TreeDecoration.Data[]>;\n\n}\n\n/**\n * The default tree decorator service. Does nothing at all. One has to rebind to a concrete implementation\n * if decorators have to be supported in the tree widget.\n */\n@injectable()\nexport class NoopTreeDecoratorService implements TreeDecoratorService {\n\n    protected readonly emitter = new Emitter<void>();\n    readonly onDidChangeDecorations = this.emitter.event;\n\n    dispose(): void {\n        this.emitter.dispose();\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    getDecorations(): Map<any, any> {\n        return new Map();\n    }\n\n    deflateDecorators(): object {\n        return {};\n    }\n\n    inflateDecorators(): Map<string, TreeDecoration.Data[]> {\n        return new Map();\n    }\n\n}\n\n/**\n * Abstract decorator service implementation which emits events from all known tree decorators and caches the current state.\n */\n@injectable()\nexport abstract class AbstractTreeDecoratorService implements TreeDecoratorService {\n\n    protected readonly onDidChangeDecorationsEmitter = new Emitter<void>();\n    readonly onDidChangeDecorations = this.onDidChangeDecorationsEmitter.event;\n\n    protected readonly toDispose = new DisposableCollection();\n\n    constructor(protected readonly decorators: ReadonlyArray<TreeDecorator>) {\n        this.toDispose.push(this.onDidChangeDecorationsEmitter);\n        this.toDispose.pushAll(this.decorators.map(decorator =>\n            decorator.onDidChangeDecorations(data =>\n                this.onDidChangeDecorationsEmitter.fire(undefined)\n            ))\n        );\n    }\n\n    dispose(): void {\n        this.toDispose.dispose();\n    }\n\n    async getDecorations(tree: Tree): Promise<Map<string, TreeDecoration.Data[]>> {\n        const changes = new Map();\n        for (const decorator of this.decorators) {\n            for (const [id, data] of (await decorator.decorations(tree)).entries()) {\n                if (changes.has(id)) {\n                    changes.get(id)!.push(data);\n                } else {\n                    changes.set(id, [data]);\n                }\n            }\n        }\n        return changes;\n    }\n\n    deflateDecorators(decorations: Map<string, TreeDecoration.Data[]>): object {\n        // eslint-disable-next-line no-null/no-null\n        const state = Object.create(null);\n        for (const [id, data] of decorations) {\n            state[id] = data;\n        }\n        return state;\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    inflateDecorators(state: any): Map<string, TreeDecoration.Data[]> {\n        const decorators = new Map<string, TreeDecoration.Data[]>();\n        for (const id of Object.keys(state)) {\n            decorators.set(id, state[id]);\n        }\n        return decorators;\n    }\n\n}\n\n/**\n * @deprecated import from `@theia/core/lib/browser/widget-decoration` instead.\n */\nexport import TreeDecoration = WidgetDecoration;\n\nexport interface DecoratedTreeNode extends TreeNode {\n    /**\n     * The additional tree decoration data attached to the tree node itself.\n     */\n    readonly decorationData: TreeDecoration.Data;\n}\nexport namespace DecoratedTreeNode {\n    /**\n     * Type-guard for decorated tree nodes.\n     */\n    export function is(node: TreeNode | undefined): node is DecoratedTreeNode {\n        return !!node && 'decorationData' in node;\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2017 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { injectable, inject, postConstruct } from 'inversify';\nimport { Emitter, Event, Disposable } from '../../common';\nimport { CompositeTreeNode, TreeNode, Tree } from './tree';\n\nexport const TreeExpansionService = Symbol('TreeExpansionService');\n\n/**\n * The tree expandable service.\n */\nexport interface TreeExpansionService extends Disposable {\n    /**\n     * Emit when the node is expanded or collapsed.\n     */\n    readonly onExpansionChanged: Event<Readonly<ExpandableTreeNode>>;\n    /**\n     * Expand a node for the given node id if it is valid and collapsed.\n     * Expanding a node refreshes all its children.\n     *\n     * Return a valid expanded refreshed node or `undefined` if such does not exist.\n     */\n    expandNode(node: Readonly<ExpandableTreeNode>): Promise<Readonly<ExpandableTreeNode> | undefined>;\n    /**\n     * If the given node is valid and expanded then collapse it.\n     *\n     * Return true if a node has been collapsed; otherwise false.\n     */\n    collapseNode(node: Readonly<ExpandableTreeNode>): Promise<boolean>;\n    /**\n     * If the given node is valid then collapse it recursively.\n     *\n     * Return true if a node has been collapsed; otherwise false.\n     */\n    collapseAll(node: Readonly<CompositeTreeNode>): Promise<boolean>;\n    /**\n     * If the given node is invalid then does nothing.\n     * If the given node is collapsed then expand it; otherwise collapse it.\n     */\n    toggleNodeExpansion(node: Readonly<ExpandableTreeNode>): Promise<void>;\n}\n\n/**\n * The expandable tree node.\n */\nexport interface ExpandableTreeNode extends CompositeTreeNode {\n    /**\n     * Test whether this tree node is expanded.\n     */\n    expanded: boolean;\n}\n\nexport namespace ExpandableTreeNode {\n    export function is(node: Object | undefined): node is ExpandableTreeNode {\n        return !!node && CompositeTreeNode.is(node) && 'expanded' in node;\n    }\n\n    export function isExpanded(node: Object | undefined): node is ExpandableTreeNode {\n        return ExpandableTreeNode.is(node) && node.expanded;\n    }\n\n    export function isCollapsed(node: Object | undefined): node is ExpandableTreeNode {\n        return ExpandableTreeNode.is(node) && !node.expanded;\n    }\n}\n\n@injectable()\nexport class TreeExpansionServiceImpl implements TreeExpansionService {\n\n    @inject(Tree) protected readonly tree: Tree;\n    protected readonly onExpansionChangedEmitter = new Emitter<ExpandableTreeNode>();\n\n    @postConstruct()\n    protected init(): void {\n        this.tree.onNodeRefreshed(node => {\n            for (const child of node.children) {\n                if (ExpandableTreeNode.isExpanded(child)) {\n                    node.waitUntil(this.tree.refresh(child));\n                }\n            }\n        });\n    }\n\n    dispose(): void {\n        this.onExpansionChangedEmitter.dispose();\n    }\n\n    get onExpansionChanged(): Event<ExpandableTreeNode> {\n        return this.onExpansionChangedEmitter.event;\n    }\n\n    protected fireExpansionChanged(node: ExpandableTreeNode): void {\n        this.onExpansionChangedEmitter.fire(node);\n    }\n\n    async expandNode(raw: ExpandableTreeNode): Promise<ExpandableTreeNode | undefined> {\n        const node = this.tree.validateNode(raw);\n        if (ExpandableTreeNode.isCollapsed(node)) {\n            return this.doExpandNode(node);\n        }\n        return undefined;\n    }\n\n    protected async doExpandNode(node: ExpandableTreeNode): Promise<ExpandableTreeNode | undefined> {\n        node.expanded = true;\n        const refreshed = await this.tree.refresh(node);\n        if (ExpandableTreeNode.isExpanded(refreshed)) {\n            this.fireExpansionChanged(refreshed);\n            return refreshed;\n        }\n        return undefined;\n    }\n\n    async collapseNode(raw: ExpandableTreeNode): Promise<boolean> {\n        const node = this.tree.validateNode(raw);\n        return this.doCollapseNode(node);\n    }\n\n    async collapseAll(raw: CompositeTreeNode): Promise<boolean> {\n        const node = this.tree.validateNode(raw);\n        return this.doCollapseAll(node);\n    }\n\n    protected doCollapseAll(node: TreeNode | undefined): boolean {\n        let result = false;\n        if (CompositeTreeNode.is(node)) {\n            for (const child of node.children) {\n                result = this.doCollapseAll(child) || result;\n            }\n        }\n        return this.doCollapseNode(node) || result;\n    }\n\n    protected doCollapseNode(node: TreeNode | undefined): boolean {\n        if (!ExpandableTreeNode.isExpanded(node)) {\n            return false;\n        }\n        node.expanded = false;\n        this.fireExpansionChanged(node);\n        return true;\n    }\n\n    async toggleNodeExpansion(node: ExpandableTreeNode): Promise<void> {\n        if (node.expanded) {\n            await this.collapseNode(node);\n        } else {\n            await this.expandNode(node);\n        }\n    }\n\n}\n","/********************************************************************************\n * Copyright (C) 2017 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { TreeNode, CompositeTreeNode } from './tree';\nimport { ExpandableTreeNode } from './tree-expansion';\n\nexport interface TreeIterator extends Iterator<TreeNode> {\n}\n\nexport namespace TreeIterator {\n\n    export interface Options {\n        readonly pruneCollapsed: boolean\n        readonly pruneSiblings: boolean\n    }\n\n    export const DEFAULT_OPTIONS: Options = {\n        pruneCollapsed: false,\n        pruneSiblings: false\n    };\n\n}\n\nexport abstract class AbstractTreeIterator implements TreeIterator, Iterable<TreeNode> {\n\n    protected readonly delegate: IterableIterator<TreeNode>;\n    protected readonly options: TreeIterator.Options;\n\n    constructor(protected readonly root: TreeNode, options?: Partial<TreeIterator.Options>) {\n        this.options = {\n            ...TreeIterator.DEFAULT_OPTIONS,\n            ...options\n        };\n        this.delegate = this.iterator(this.root);\n    }\n\n    // tslint:disable-next-line:typedef\n    [Symbol.iterator]() {\n        return this.delegate;\n    }\n\n    next(): IteratorResult<TreeNode> {\n        return this.delegate.next();\n    }\n\n    protected abstract iterator(node: TreeNode): IterableIterator<TreeNode>;\n\n    protected children(node: TreeNode): TreeNode[] | undefined {\n        if (!CompositeTreeNode.is(node)) {\n            return undefined;\n        }\n        if (this.options.pruneCollapsed && this.isCollapsed(node)) {\n            return undefined;\n        }\n        return node.children.slice();\n    }\n\n    protected isCollapsed(node: TreeNode): boolean {\n        return ExpandableTreeNode.isCollapsed(node);\n    }\n\n    protected isEmpty(nodes: TreeNode[] | undefined): boolean {\n        return nodes === undefined || nodes.length === 0;\n    }\n\n}\n\nexport class DepthFirstTreeIterator extends AbstractTreeIterator {\n\n    protected iterator(root: TreeNode): IterableIterator<TreeNode> {\n        return Iterators.depthFirst(root, this.children.bind(this));\n    }\n\n}\n\nexport class BreadthFirstTreeIterator extends AbstractTreeIterator {\n\n    protected iterator(root: TreeNode): IterableIterator<TreeNode> {\n        return Iterators.breadthFirst(root, this.children.bind(this));\n    }\n\n}\n\n/**\n * This tree iterator visits all nodes from top to bottom considering the following rules.\n *\n * Let assume the following tree:\n * ```\n *   R\n *   |\n *   +---1\n *   |   |\n *   |   +---1.1\n *   |   |\n *   |   +---1.2\n *   |   |\n *   |   +---1.3\n *   |   |    |\n *   |   |    +---1.3.1\n *   |   |    |\n *   |   |    +---1.3.2\n *   |   |\n *   |   +---1.4\n *   |\n *   +---2\n *       |\n *       +---2.1\n * ```\n * When selecting `1.2` as the root, the normal `DepthFirstTreeIterator` would stop on `1.2` as it does not have children,\n * but this iterator will visit the next sibling (`1.3` and `1.4` but **not** `1.1`) nodes. So the expected traversal order will be\n * `1.2`, `1.3`, `1.3.1`, `1.3.2`,  and `1.4` then jumps to `2` and continues with `2.1`.\n */\nexport class TopDownTreeIterator extends AbstractTreeIterator {\n\n    protected iterator(root: TreeNode): IterableIterator<TreeNode> {\n        const doNext = this.doNext.bind(this);\n        return (function* (): IterableIterator<TreeNode> {\n            let next = root;\n            while (next) {\n                yield next;\n                next = doNext(next);\n            }\n        }).bind(this)();\n    }\n\n    protected doNext(node: TreeNode): TreeNode | undefined {\n        return this.findFirstChild(node) || this.findNextSibling(node);\n    }\n\n    protected findFirstChild(node: TreeNode): TreeNode | undefined {\n        return (this.children(node) || [])[0];\n    }\n\n    protected findNextSibling(node: TreeNode | undefined): TreeNode | undefined {\n        if (!node) {\n            return undefined;\n        }\n        if (this.options.pruneSiblings && node === this.root) {\n            return undefined;\n        }\n        if (node.nextSibling) {\n            return node.nextSibling;\n        }\n        return this.findNextSibling(node.parent);\n    }\n\n}\n\n/**\n * Unlike other tree iterators, this does not visit all the nodes, it stops once it reaches the root node\n * while traversing up the tree hierarchy in an inverse pre-order fashion. This is the counterpart of the `TopDownTreeIterator`.\n */\nexport class BottomUpTreeIterator extends AbstractTreeIterator {\n\n    protected iterator(root: TreeNode): IterableIterator<TreeNode> {\n        const doNext = this.doNext.bind(this);\n        return (function* (): IterableIterator<TreeNode> {\n            let next = root;\n            while (next) {\n                yield next;\n                next = doNext(next);\n            }\n        }).bind(this)();\n    }\n\n    protected doNext(node: TreeNode): TreeNode | undefined {\n        const previousSibling = node.previousSibling;\n        const lastChild = this.lastChild(previousSibling);\n        return lastChild || node.parent;\n    }\n\n    protected lastChild(node: TreeNode | undefined): TreeNode | undefined {\n        const children = node ? this.children(node) : [];\n        if (this.isEmpty(children)) {\n            return node;\n        }\n        if (CompositeTreeNode.is(node)) {\n            const lastChild = CompositeTreeNode.getLastChild(node);\n            return this.lastChild(lastChild);\n        }\n        return undefined;\n    }\n\n}\n\nexport namespace Iterators {\n\n    /**\n     * Generator for depth first, pre-order tree traversal iteration.\n     */\n    export function* depthFirst<T>(root: T, children: (node: T) => T[] | undefined, include: (node: T) => boolean = () => true): IterableIterator<T> {\n        const stack: T[] = [];\n        stack.push(root);\n        while (stack.length > 0) {\n            const top = stack.pop()!;\n            yield top;\n            stack.push(...(children(top) || []).filter(include).reverse());\n        }\n    }\n\n    /**\n     * Generator for breadth first tree traversal iteration.\n     */\n    export function* breadthFirst<T>(root: T, children: (node: T) => T[] | undefined, include: (node: T) => boolean = () => true): IterableIterator<T> {\n        const queue: T[] = [];\n        queue.push(root);\n        while (queue.length > 0) {\n            const head = queue.shift()!;\n            yield head;\n            queue.push(...(children(head) || []).filter(include));\n        }\n    }\n\n    /**\n     * Returns with the iterator of the argument.\n     */\n    export function asIterator<T>(elements: ReadonlyArray<T>): IterableIterator<T> {\n        return elements.slice()[Symbol.iterator]();\n    }\n\n    /**\n     * Returns an iterator that cycles indefinitely over the elements of iterable.\n     *  - If `start` is given it starts the iteration from that element. Otherwise, it starts with the first element of the array.\n     *  - If `start` is given, it must contain by the `elements` array. Otherwise, an error will be thrown.\n     *\n     * **Warning**: Typical uses of the resulting iterator may produce an infinite loop. You should use an explicit break.\n     */\n    export function* cycle<T>(elements: ReadonlyArray<T>, start?: T): IterableIterator<T> {\n        const copy = elements.slice();\n        let index = !!start ? copy.indexOf(start) : 0;\n        if (index === -1) {\n            throw new Error(`${start} is not contained in ${copy}.`);\n        }\n        while (true) {\n            yield copy[index];\n            index++;\n            if (index === copy.length) {\n                index = 0;\n            }\n        }\n    }\n\n}\n","/********************************************************************************\n * Copyright (C) 2017 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { inject, injectable, postConstruct } from 'inversify';\nimport { DisposableCollection, Event, Emitter, SelectionProvider, ILogger, WaitUntilEvent } from '../../common';\nimport { Tree, TreeNode, CompositeTreeNode } from './tree';\nimport { TreeSelectionService, SelectableTreeNode, TreeSelection } from './tree-selection';\nimport { TreeExpansionService, ExpandableTreeNode } from './tree-expansion';\nimport { TreeNavigationService } from './tree-navigation';\nimport { TreeIterator, BottomUpTreeIterator, TopDownTreeIterator, Iterators } from './tree-iterator';\nimport { TreeSearch } from './tree-search';\n\n/**\n * The tree model.\n */\nexport const TreeModel = Symbol('TreeModel');\nexport interface TreeModel extends Tree, TreeSelectionService, TreeExpansionService {\n\n    /**\n     * Expands the given node. If the `node` argument is `undefined`, then expands the currently selected tree node.\n     * If multiple tree nodes are selected, expands the most recently selected tree node.\n     */\n    expandNode(node?: Readonly<ExpandableTreeNode>): Promise<Readonly<ExpandableTreeNode> | undefined>;\n\n    /**\n     * Collapses the given node. If the `node` argument is `undefined`, then collapses the currently selected tree node.\n     * If multiple tree nodes are selected, collapses the most recently selected tree node.\n     */\n    collapseNode(node?: Readonly<ExpandableTreeNode>): Promise<boolean>;\n\n    /**\n     * Collapses recursively. If the `node` argument is `undefined`, then collapses the currently selected tree node.\n     * If multiple tree nodes are selected, collapses the most recently selected tree node.\n     */\n    collapseAll(node?: Readonly<CompositeTreeNode>): Promise<boolean>;\n\n    /**\n     * Toggles the expansion state of the given node. If not give, then it toggles the expansion state of the currently selected node.\n     * If multiple nodes are selected, then the most recently selected tree node's expansion state will be toggled.\n     */\n    toggleNodeExpansion(node?: Readonly<ExpandableTreeNode>): Promise<void>;\n\n    /**\n     * Opens the given node or the currently selected on if the argument is `undefined`.\n     * If multiple nodes are selected, open the most recently selected node.\n     */\n    openNode(node?: Readonly<TreeNode> | undefined): void;\n\n    /**\n     * Event when a node should be opened.\n     */\n    readonly onOpenNode: Event<Readonly<TreeNode>>;\n\n    /**\n     * Selects the parent node relatively to the selected taking into account node expansion.\n     */\n    selectParent(): void;\n\n    /**\n     * Navigates to the given node if it is defined. This method accepts both the tree node and its ID as an argument.\n     * Navigation sets a node as a root node and expand it. Resolves to the node if the navigation was successful. Otherwise,\n     * resolves to `undefined`.\n     */\n    navigateTo(nodeOrId: Readonly<TreeNode> | string | undefined): Promise<TreeNode | undefined>;\n    /**\n     * Tests whether it is possible to navigate forward.\n     */\n    canNavigateForward(): boolean;\n\n    /**\n     * Tests whether it is possible to navigate backward.\n     */\n    canNavigateBackward(): boolean;\n\n    /**\n     * Navigates forward.\n     */\n    navigateForward(): Promise<void>;\n    /**\n     * Navigates backward.\n     */\n    navigateBackward(): Promise<void>;\n\n    /**\n     * Selects the previous node relatively to the currently selected one. This method takes the expansion state of the tree into consideration.\n     */\n    selectPrevNode(type?: TreeSelection.SelectionType): void;\n\n    /**\n     * Returns the previous selectable tree node.\n     */\n    getPrevSelectableNode(node?: TreeNode): SelectableTreeNode | undefined;\n\n    /**\n     * Selects the next node relatively to the currently selected one. This method takes the expansion state of the tree into consideration.\n     */\n    selectNextNode(type?: TreeSelection.SelectionType): void;\n\n    /**\n     * Returns the next selectable tree node.\n     */\n    getNextSelectableNode(node?: TreeNode): SelectableTreeNode | undefined;\n\n    /**\n     * Selects the given tree node. Has no effect when the node does not exist in the tree. Discards any previous selection state.\n     */\n    selectNode(node: Readonly<SelectableTreeNode>): void;\n\n    /**\n     * Selects the given node if it was not yet selected, or unselects it if it was. Keeps the previous selection state and updates it\n     * with the current toggle selection.\n     */\n    toggleNode(node: Readonly<SelectableTreeNode>): void;\n\n    /**\n     * Selects a range of tree nodes. The target of the selection range is the argument, the from tree node is the previous selected node.\n     * If no node was selected previously, invoking this method does nothing.\n     */\n    selectRange(node: Readonly<SelectableTreeNode>): void;\n\n}\n\n@injectable()\nexport class TreeModelImpl implements TreeModel, SelectionProvider<ReadonlyArray<Readonly<SelectableTreeNode>>> {\n\n    @inject(ILogger) protected readonly logger: ILogger;\n    @inject(Tree) protected readonly tree: Tree;\n    @inject(TreeSelectionService) protected readonly selectionService: TreeSelectionService;\n    @inject(TreeExpansionService) protected readonly expansionService: TreeExpansionService;\n    @inject(TreeNavigationService) protected readonly navigationService: TreeNavigationService;\n    @inject(TreeSearch) protected readonly treeSearch: TreeSearch;\n\n    protected readonly onChangedEmitter = new Emitter<void>();\n    protected readonly onOpenNodeEmitter = new Emitter<TreeNode>();\n    protected readonly toDispose = new DisposableCollection();\n\n    @postConstruct()\n    protected init(): void {\n        this.toDispose.push(this.tree);\n        this.toDispose.push(this.tree.onChanged(() => this.fireChanged()));\n\n        this.toDispose.push(this.selectionService);\n\n        this.toDispose.push(this.expansionService);\n        this.toDispose.push(this.expansionService.onExpansionChanged(node => {\n            this.fireChanged();\n            this.handleExpansion(node);\n        }));\n\n        this.toDispose.push(this.onOpenNodeEmitter);\n        this.toDispose.push(this.onChangedEmitter);\n        this.toDispose.push(this.treeSearch);\n    }\n\n    dispose(): void {\n        this.toDispose.dispose();\n    }\n\n    protected handleExpansion(node: Readonly<ExpandableTreeNode>): void {\n        this.selectIfAncestorOfSelected(node);\n    }\n\n    /**\n     * Select the given node if it is the ancestor of a selected node.\n     */\n    protected selectIfAncestorOfSelected(node: Readonly<ExpandableTreeNode>): void {\n        if (!node.expanded && [...this.selectedNodes].some(selectedNode => CompositeTreeNode.isAncestor(node, selectedNode))) {\n            if (SelectableTreeNode.isVisible(node)) {\n                this.selectNode(node);\n            }\n        }\n    }\n\n    get root(): TreeNode | undefined {\n        return this.tree.root;\n    }\n\n    set root(root: TreeNode | undefined) {\n        this.tree.root = root;\n    }\n\n    get onChanged(): Event<void> {\n        return this.onChangedEmitter.event;\n    }\n\n    get onOpenNode(): Event<TreeNode> {\n        return this.onOpenNodeEmitter.event;\n    }\n\n    protected fireChanged(): void {\n        this.onChangedEmitter.fire(undefined);\n    }\n\n    get onNodeRefreshed(): Event<Readonly<CompositeTreeNode> & WaitUntilEvent> {\n        return this.tree.onNodeRefreshed;\n    }\n\n    getNode(id: string | undefined): TreeNode | undefined {\n        return this.tree.getNode(id);\n    }\n\n    validateNode(node: TreeNode | undefined): TreeNode | undefined {\n        return this.tree.validateNode(node);\n    }\n\n    async refresh(parent?: Readonly<CompositeTreeNode>): Promise<CompositeTreeNode | undefined> {\n        if (parent) {\n            return this.tree.refresh(parent);\n        }\n        return this.tree.refresh();\n    }\n\n    // tslint:disable-next-line:typedef\n    get selectedNodes() {\n        return this.selectionService.selectedNodes;\n    }\n\n    // tslint:disable-next-line:typedef\n    get onSelectionChanged() {\n        return this.selectionService.onSelectionChanged;\n    }\n\n    get onExpansionChanged(): Event<Readonly<ExpandableTreeNode>> {\n        return this.expansionService.onExpansionChanged;\n    }\n\n    async expandNode(raw?: Readonly<ExpandableTreeNode>): Promise<ExpandableTreeNode | undefined> {\n        for (const node of raw ? [raw] : this.selectedNodes) {\n            if (ExpandableTreeNode.is(node)) {\n                return this.expansionService.expandNode(node);\n            }\n        }\n        return undefined;\n    }\n\n    async collapseNode(raw?: Readonly<ExpandableTreeNode>): Promise<boolean> {\n        for (const node of raw ? [raw] : this.selectedNodes) {\n            if (ExpandableTreeNode.is(node)) {\n                return this.expansionService.collapseNode(node);\n            }\n        }\n        return false;\n    }\n\n    async collapseAll(raw?: Readonly<CompositeTreeNode>): Promise<boolean> {\n        const node = raw || this.selectedNodes[0];\n        if (SelectableTreeNode.is(node)) {\n            this.selectNode(node);\n        }\n        if (CompositeTreeNode.is(node)) {\n            return this.expansionService.collapseAll(node);\n        }\n        return false;\n    }\n\n    async toggleNodeExpansion(raw?: Readonly<ExpandableTreeNode>): Promise<void> {\n        for (const node of raw ? [raw] : this.selectedNodes) {\n            if (ExpandableTreeNode.is(node)) {\n                await this.expansionService.toggleNodeExpansion(node);\n                return;\n            }\n        }\n    }\n\n    selectPrevNode(type: TreeSelection.SelectionType = TreeSelection.SelectionType.DEFAULT): void {\n        const node = this.getPrevSelectableNode();\n        if (node) {\n            this.addSelection({ node, type });\n        }\n    }\n\n    getPrevSelectableNode(node: TreeNode = this.selectedNodes[0]): SelectableTreeNode | undefined {\n        const iterator = this.createBackwardIterator(node);\n        return iterator && this.doGetNextNode(iterator);\n    }\n\n    selectNextNode(type: TreeSelection.SelectionType = TreeSelection.SelectionType.DEFAULT): void {\n        const node = this.getNextSelectableNode();\n        if (node) {\n            this.addSelection({ node, type });\n        }\n    }\n\n    getNextSelectableNode(node: TreeNode = this.selectedNodes[0]): SelectableTreeNode | undefined {\n        const iterator = this.createIterator(node);\n        return iterator && this.doGetNextNode(iterator);\n    }\n\n    protected doGetNextNode(iterator: TreeIterator): SelectableTreeNode | undefined {\n        // Skip the first item. // TODO: clean this up, and skip the first item in a different way without loading everything.\n        iterator.next();\n        let result = iterator.next();\n        while (!result.done && !SelectableTreeNode.isVisible(result.value)) {\n            result = iterator.next();\n        }\n        const node = result.value;\n        if (SelectableTreeNode.isVisible(node)) {\n            return node;\n        }\n        return undefined;\n    }\n\n    protected createBackwardIterator(node: TreeNode | undefined): TreeIterator | undefined {\n        const { filteredNodes } = this.treeSearch;\n        if (filteredNodes.length === 0) {\n            return node ? new BottomUpTreeIterator(node!, { pruneCollapsed: true }) : undefined;\n        }\n        if (node && filteredNodes.indexOf(node) === -1) {\n            return undefined;\n        }\n        return Iterators.cycle(filteredNodes.slice().reverse(), node);\n    }\n\n    protected createIterator(node: TreeNode | undefined): TreeIterator | undefined {\n        const { filteredNodes } = this.treeSearch;\n        if (filteredNodes.length === 0) {\n            return node ? new TopDownTreeIterator(node!, { pruneCollapsed: true }) : undefined;\n        }\n        if (node && filteredNodes.indexOf(node) === -1) {\n            return undefined;\n        }\n        return Iterators.cycle(filteredNodes, node);\n    }\n\n    openNode(raw?: TreeNode | undefined): void {\n        const node = raw || this.selectedNodes[0];\n        if (node) {\n            this.doOpenNode(node);\n            this.onOpenNodeEmitter.fire(node);\n        }\n    }\n\n    protected doOpenNode(node: TreeNode): void {\n        if (ExpandableTreeNode.is(node)) {\n            this.toggleNodeExpansion(node);\n        }\n    }\n\n    selectParent(): void {\n        if (this.selectedNodes.length === 1) {\n            const node = this.selectedNodes[0];\n            const parent = SelectableTreeNode.getVisibleParent(node);\n            if (parent) {\n                this.selectNode(parent);\n            }\n        }\n    }\n\n    async navigateTo(nodeOrId: TreeNode | string | undefined): Promise<TreeNode | undefined> {\n        if (nodeOrId) {\n            const node = typeof nodeOrId === 'string' ? this.getNode(nodeOrId) : nodeOrId;\n            if (node) {\n                this.navigationService.push(node);\n                await this.doNavigate(node);\n                return node;\n            }\n        }\n        return undefined;\n    }\n\n    canNavigateForward(): boolean {\n        return !!this.navigationService.next;\n    }\n\n    canNavigateBackward(): boolean {\n        return !!this.navigationService.prev;\n    }\n\n    async navigateForward(): Promise<void> {\n        const node = this.navigationService.advance();\n        if (node) {\n            await this.doNavigate(node);\n        }\n    }\n\n    async navigateBackward(): Promise<void> {\n        const node = this.navigationService.retreat();\n        if (node) {\n            await this.doNavigate(node);\n        }\n    }\n\n    protected async doNavigate(node: TreeNode): Promise<void> {\n        this.tree.root = node;\n        if (ExpandableTreeNode.is(node)) {\n            await this.expandNode(node);\n        }\n        if (SelectableTreeNode.is(node)) {\n            this.selectNode(node);\n        }\n    }\n\n    addSelection(selectionOrTreeNode: TreeSelection | Readonly<SelectableTreeNode>): void {\n        this.selectionService.addSelection(selectionOrTreeNode);\n    }\n\n    selectNode(node: Readonly<SelectableTreeNode>): void {\n        this.addSelection(node);\n    }\n\n    toggleNode(node: Readonly<SelectableTreeNode>): void {\n        this.addSelection({ node, type: TreeSelection.SelectionType.TOGGLE });\n    }\n\n    selectRange(node: Readonly<SelectableTreeNode>): void {\n        this.addSelection({ node, type: TreeSelection.SelectionType.RANGE });\n    }\n\n    storeState(): TreeModelImpl.State {\n        return {\n            selection: this.selectionService.storeState()\n        };\n    }\n\n    restoreState(state: TreeModelImpl.State): void {\n        if (state.selection) {\n            this.selectionService.restoreState(state.selection);\n        }\n    }\n\n}\nexport namespace TreeModelImpl {\n    export interface State {\n        selection: object\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2017 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { injectable } from 'inversify';\nimport { TreeNode } from './tree';\n\n@injectable()\nexport class TreeNavigationService {\n\n    protected index: number = -1;\n    protected nodes: TreeNode[] = [];\n\n    get next(): TreeNode | undefined {\n        return this.nodes[this.index + 1];\n    }\n\n    get prev(): TreeNode | undefined {\n        return this.nodes[this.index - 1];\n    }\n\n    advance(): TreeNode | undefined {\n        const node = this.next;\n        if (node) {\n            this.index = this.index + 1;\n            return node;\n        }\n        return undefined;\n    }\n\n    retreat(): TreeNode | undefined {\n        const node = this.prev;\n        if (node) {\n            this.index = this.index - 1;\n            return node;\n        }\n        return undefined;\n    }\n\n    push(node: TreeNode): void {\n        this.nodes = this.nodes.slice(0, this.index + 1);\n        this.nodes.push(node);\n        this.index = this.index + 1;\n    }\n\n}\n","/********************************************************************************\n * Copyright (C) 2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { inject, injectable, postConstruct } from 'inversify';\nimport { Disposable, DisposableCollection } from '../../common/disposable';\nimport { Event, Emitter } from '../../common/event';\nimport { Tree, TreeNode } from './tree';\nimport { TreeDecoration } from './tree-decorator';\nimport { FuzzySearch } from './fuzzy-search';\nimport { TopDownTreeIterator } from './tree-iterator';\nimport { LabelProvider } from '../label-provider';\n\n@injectable()\nexport class TreeSearch implements Disposable {\n\n    @inject(Tree)\n    protected readonly tree: Tree;\n\n    @inject(FuzzySearch)\n    protected readonly fuzzySearch: FuzzySearch;\n\n    @inject(LabelProvider)\n    protected readonly labelProvider: LabelProvider;\n\n    protected readonly disposables = new DisposableCollection();\n    protected readonly filteredNodesEmitter = new Emitter<ReadonlyArray<Readonly<TreeNode>>>();\n\n    protected _filterResult: FuzzySearch.Match<TreeNode>[] = [];\n    protected _filteredNodes: ReadonlyArray<Readonly<TreeNode>> = [];\n\n    @postConstruct()\n    protected init(): void {\n        this.disposables.push(this.filteredNodesEmitter);\n    }\n\n    getHighlights(): Map<string, TreeDecoration.CaptionHighlight> {\n        return new Map(this._filterResult.map(m => [m.item.id, this.toCaptionHighlight(m)] as [string, TreeDecoration.CaptionHighlight]));\n    }\n\n    /**\n     * Resolves to all the visible tree nodes that match the search pattern.\n     */\n    async filter(pattern: string | undefined): Promise<ReadonlyArray<Readonly<TreeNode>>> {\n        const { root } = this.tree;\n        if (!pattern || !root) {\n            this._filterResult = [];\n            this._filteredNodes = [];\n            this.fireFilteredNodesChanged(this._filteredNodes);\n            return [];\n        }\n        const items = [...new TopDownTreeIterator(root, { pruneCollapsed: true })];\n        const transform = (node: TreeNode) => this.labelProvider.getName(node);\n        this._filterResult = await this.fuzzySearch.filter({\n            items,\n            pattern,\n            transform\n        });\n        this._filteredNodes = this._filterResult.map(match => match.item);\n        this.fireFilteredNodesChanged(this._filteredNodes);\n        return this._filteredNodes!.slice();\n    }\n\n    /**\n     * Returns with the filtered nodes after invoking the `filter` method.\n     */\n    get filteredNodes(): ReadonlyArray<Readonly<TreeNode>> {\n        return this._filteredNodes.slice();\n    }\n\n    /**\n     * Event that is fired when the filtered nodes have been changed.\n     */\n    get onFilteredNodesChanged(): Event<ReadonlyArray<Readonly<TreeNode>>> {\n        return this.filteredNodesEmitter.event;\n    }\n\n    dispose(): void {\n        this.disposables.dispose();\n    }\n\n    protected fireFilteredNodesChanged(nodes: ReadonlyArray<Readonly<TreeNode>>): void {\n        this.filteredNodesEmitter.fire(nodes);\n    }\n\n    protected toCaptionHighlight(match: FuzzySearch.Match<TreeNode>): TreeDecoration.CaptionHighlight {\n        return {\n            ranges: match.ranges.map(this.mapRange.bind(this))\n        };\n    }\n\n    protected mapRange(range: FuzzySearch.Range): TreeDecoration.CaptionHighlight.Range {\n        const { offset, length } = range;\n        return {\n            offset,\n            length\n        };\n    }\n\n}\n","/********************************************************************************\n * Copyright (C) 2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { injectable, inject, postConstruct } from 'inversify';\nimport { Tree, TreeNode } from './tree';\nimport { Event, Emitter } from '../../common';\nimport { TreeSelectionState, FocusableTreeSelection } from './tree-selection-state';\nimport { TreeSelectionService, SelectableTreeNode, TreeSelection } from './tree-selection';\n\n@injectable()\nexport class TreeSelectionServiceImpl implements TreeSelectionService {\n\n    @inject(Tree)\n    protected readonly tree: Tree;\n    protected readonly onSelectionChangedEmitter = new Emitter<ReadonlyArray<Readonly<SelectableTreeNode>>>();\n\n    protected state: TreeSelectionState;\n\n    @postConstruct()\n    protected init(): void {\n        this.state = new TreeSelectionState(this.tree);\n    }\n\n    dispose(): void {\n        this.onSelectionChangedEmitter.dispose();\n    }\n\n    get selectedNodes(): ReadonlyArray<Readonly<SelectableTreeNode>> {\n        return this.state.selection();\n    }\n\n    get onSelectionChanged(): Event<ReadonlyArray<Readonly<SelectableTreeNode>>> {\n        return this.onSelectionChangedEmitter.event;\n    }\n\n    protected fireSelectionChanged(): void {\n        this.onSelectionChangedEmitter.fire(this.state.selection());\n    }\n\n    addSelection(selectionOrTreeNode: TreeSelection | Readonly<SelectableTreeNode>): void {\n        const selection = ((arg: TreeSelection | Readonly<SelectableTreeNode>): TreeSelection => {\n            const type = TreeSelection.SelectionType.DEFAULT;\n            if (TreeSelection.is(arg)) {\n                return {\n                    type,\n                    ...arg\n                };\n            }\n            return {\n                type,\n                node: arg\n            };\n        })(selectionOrTreeNode);\n\n        const node = this.validateNode(selection.node);\n        if (node === undefined) {\n            return;\n        }\n        Object.assign(selection, { node });\n\n        const newState = this.state.nextState(selection);\n        this.transiteTo(newState);\n    }\n\n    protected transiteTo(newState: TreeSelectionState): void {\n        const oldNodes = this.state.selection();\n        const newNodes = newState.selection();\n\n        const toUnselect = this.difference(oldNodes, newNodes);\n        const toSelect = this.difference(newNodes, oldNodes);\n\n        this.unselect(toUnselect);\n        this.select(toSelect);\n        this.removeFocus(oldNodes, newNodes);\n        this.addFocus(newState.focus);\n\n        this.state = newState;\n        this.fireSelectionChanged();\n    }\n\n    protected unselect(nodes: ReadonlyArray<SelectableTreeNode>): void {\n        nodes.forEach(node => node.selected = false);\n    }\n\n    protected select(nodes: ReadonlyArray<SelectableTreeNode>): void {\n        nodes.forEach(node => node.selected = true);\n    }\n\n    protected removeFocus(...nodes: ReadonlyArray<SelectableTreeNode>[]): void {\n        nodes.forEach(node => node.forEach(n => n.focus = false));\n    }\n\n    protected addFocus(node: SelectableTreeNode | undefined): void {\n        if (node) {\n            node.focus = true;\n        }\n    }\n\n    /**\n     * Returns an array of the difference of two arrays. The returned array contains all elements that are contained by\n     * `left` and not contained by `right`. `right` may also contain elements not present in `left`: these are simply ignored.\n     */\n    protected difference<T>(left: ReadonlyArray<T>, right: ReadonlyArray<T>): ReadonlyArray<T> {\n        return left.filter(item => right.indexOf(item) === -1);\n    }\n\n    /**\n     * Returns a reference to the argument if the node exists in the tree. Otherwise, `undefined`.\n     */\n    protected validateNode(node: Readonly<TreeNode>): Readonly<TreeNode> | undefined {\n        const result = this.tree.validateNode(node);\n        return SelectableTreeNode.is(result) ? result : undefined;\n    }\n\n    storeState(): TreeSelectionServiceImpl.State {\n        return {\n            selectionStack: this.state.selectionStack.map(s => ({\n                focus: s.focus && s.focus.id || undefined,\n                node: s.node && s.node.id || undefined,\n                type: s.type\n            }))\n        };\n    }\n\n    restoreState(state: TreeSelectionServiceImpl.State): void {\n        const selectionStack: FocusableTreeSelection[] = [];\n        for (const selection of state.selectionStack) {\n            const node = selection.node && this.tree.getNode(selection.node) || undefined;\n            if (!SelectableTreeNode.is(node)) {\n                break;\n            }\n            const focus = selection.focus && this.tree.getNode(selection.focus) || undefined;\n            selectionStack.push({\n                node,\n                focus: SelectableTreeNode.is(focus) && focus || undefined,\n                type: selection.type\n            });\n        }\n        if (selectionStack.length) {\n            this.transiteTo(new TreeSelectionState(this.tree, selectionStack));\n        }\n    }\n\n}\nexport namespace TreeSelectionServiceImpl {\n    export interface State {\n        selectionStack: ReadonlyArray<FocusableTreeSelectionState>\n    }\n    export interface FocusableTreeSelectionState {\n        focus?: string\n        node?: string\n        type?: TreeSelection.SelectionType\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { Tree, TreeNode } from './tree';\nimport { DepthFirstTreeIterator } from './tree-iterator';\nimport { TreeSelection, SelectableTreeNode } from './tree-selection';\n\n/**\n * A tree selection that might contain additional information about the tree node that has the focus.\n */\nexport interface FocusableTreeSelection extends TreeSelection {\n\n    /**\n     * The tree node that has the focus in the tree selection. In case of a range selection,\n     * the `focus` differs from the `node`.\n     */\n    readonly focus?: SelectableTreeNode;\n\n}\n\nexport namespace FocusableTreeSelection {\n\n    /**\n     * `true` if the argument is a focusable tree selection. Otherwise, `false`.\n     */\n    export function is(arg: object | undefined): arg is FocusableTreeSelection {\n        return TreeSelection.is(arg) && 'focus' in arg;\n    }\n\n    /**\n     * Returns with the tree node that has the focus if the argument is a focusable tree selection.\n     * Otherwise, returns `undefined`.\n     */\n    export function focus(arg: TreeSelection | undefined): SelectableTreeNode | undefined {\n        return is(arg) ? arg.focus : undefined;\n    }\n}\n\n/**\n * Class for representing and managing the selection state and the focus of a tree.\n */\nexport class TreeSelectionState {\n\n    constructor(\n        protected readonly tree: Tree,\n        readonly selectionStack: ReadonlyArray<FocusableTreeSelection> = []) {\n    }\n\n    nextState(selection: FocusableTreeSelection): TreeSelectionState {\n        const { node, type } = {\n            type: TreeSelection.SelectionType.DEFAULT,\n            ...selection\n        };\n        switch (type) {\n            case TreeSelection.SelectionType.DEFAULT: return this.handleDefault(this, node);\n            case TreeSelection.SelectionType.TOGGLE: return this.handleToggle(this, node);\n            case TreeSelection.SelectionType.RANGE: return this.handleRange(this, node);\n            default: throw new Error(`Unexpected tree selection type: ${type}.`);\n        }\n    }\n\n    selection(): ReadonlyArray<SelectableTreeNode> {\n        const copy = this.checkNoDefaultSelection(this.selectionStack);\n        const nodeIds = new Set<string>();\n        for (let i = 0; i < copy.length; i++) {\n            const { node, type } = copy[i];\n            if (TreeSelection.isRange(type)) {\n                const selection = copy[i];\n                for (const id of this.selectionRange(selection).map(n => n.id)) {\n                    nodeIds.add(id);\n                }\n            } else if (TreeSelection.isToggle(type)) {\n                if (nodeIds.has(node.id)) {\n                    nodeIds.delete(node.id);\n                } else {\n                    nodeIds.add(node.id);\n                }\n            }\n        }\n        return Array.from(nodeIds.keys()).map(id => this.tree.getNode(id)).filter(SelectableTreeNode.is).reverse();\n    }\n\n    get focus(): SelectableTreeNode | undefined {\n        const copy = this.checkNoDefaultSelection(this.selectionStack);\n        const candidate = copy[copy.length - 1].focus;\n        return this.toSelectableTreeNode(candidate);\n    }\n\n    protected handleDefault(state: TreeSelectionState, node: Readonly<SelectableTreeNode>): TreeSelectionState {\n        const { tree } = state;\n        return new TreeSelectionState(tree, [{\n            node,\n            type: TreeSelection.SelectionType.TOGGLE,\n            focus: node\n        }]);\n    }\n\n    protected handleToggle(state: TreeSelectionState, node: Readonly<SelectableTreeNode>): TreeSelectionState {\n        const { tree, selectionStack } = state;\n        const copy = this.checkNoDefaultSelection(selectionStack).slice();\n        const focus = (() => {\n            const allRanges = copy.filter(selection => TreeSelection.isRange(selection));\n            for (let i = allRanges.length - 1; i >= 0; i--) {\n                const latestRangeIndex = copy.indexOf(allRanges[i]);\n                const latestRangeSelection = copy[latestRangeIndex];\n                const latestRange = latestRangeSelection && latestRangeSelection.focus ? this.selectionRange(latestRangeSelection) : [];\n                if (latestRange.indexOf(node) !== -1) {\n                    if (this.focus === latestRangeSelection.focus) {\n                        return latestRangeSelection.focus || node;\n                    } else {\n                        return this.focus;\n                    }\n                }\n            }\n            return node;\n        })();\n        return new TreeSelectionState(tree, [...copy, {\n            node,\n            type: TreeSelection.SelectionType.TOGGLE,\n            focus\n        }]);\n    }\n\n    protected handleRange(state: TreeSelectionState, node: Readonly<SelectableTreeNode>): TreeSelectionState {\n        const { tree, selectionStack } = state;\n        const copy = this.checkNoDefaultSelection(selectionStack).slice();\n        let focus = FocusableTreeSelection.focus(copy[copy.length - 1]);\n\n        // Drop the previous range when we are trying to modify that.\n        if (TreeSelection.isRange(copy[copy.length - 1])) {\n            const range = this.selectionRange(copy.pop()!);\n            // And we drop all preceding individual nodes that were contained in the range we are dropping.\n            // That means, anytime we cover individual nodes with a range, they will belong to the range so we need to drop them now.\n            for (let i = copy.length - 1; i >= 0; i--) {\n                if (range.indexOf(copy[i].node) !== -1) {\n                    // Make sure to keep a reference to the focus while we are discarding previous elements. Otherwise, we lose this information.\n                    focus = copy[i].focus;\n                    copy.splice(i, 1);\n                }\n            }\n        }\n        return new TreeSelectionState(tree, [...copy, {\n            node,\n            type: TreeSelection.SelectionType.RANGE,\n            focus\n        }]);\n    }\n\n    /**\n     * Returns with an array of items representing the selection range. The from node is the `focus` the to node\n     * is the selected node itself on the tree selection. Both the `from` node and the `to` node are inclusive.\n     */\n    protected selectionRange(selection: FocusableTreeSelection): Readonly<SelectableTreeNode>[] {\n        const fromNode = selection.focus;\n        const toNode = selection.node;\n        if (fromNode === undefined) {\n            return [];\n        }\n        if (toNode === fromNode) {\n            return [toNode];\n        }\n        const { root } = this.tree;\n        if (root === undefined) {\n            return [];\n        }\n        const to = this.tree.validateNode(toNode);\n        if (to === undefined) {\n            return [];\n        }\n        const from = this.tree.validateNode(fromNode);\n        if (from === undefined) {\n            return [];\n        }\n        let started = false;\n        let finished = false;\n        const range = [];\n        for (const node of new DepthFirstTreeIterator(root, { pruneCollapsed: true })) {\n            if (finished) {\n                break;\n            }\n            // Only collect items which are between (inclusive) the `from` node and the `to` node.\n            if (node === from || node === to) {\n                if (started) {\n                    finished = true;\n                } else {\n                    started = true;\n                }\n            }\n            if (started) {\n                range.push(node);\n            }\n        }\n\n        // We need to reverse the selection range order.\n        if (range.indexOf(from) > range.indexOf(to)) {\n            range.reverse();\n        }\n        return range.filter(SelectableTreeNode.is);\n    }\n\n    protected toSelectableTreeNode(node: TreeNode | undefined): SelectableTreeNode | undefined {\n        if (!!node) {\n            const candidate = this.tree.getNode(node.id);\n            if (!!candidate) {\n                if (SelectableTreeNode.is(candidate)) {\n                    return candidate;\n                } else {\n                    console.warn(`Could not map to a selectable tree node. Node with ID: ${node.id} is not a selectable node.`);\n                }\n            } else {\n                console.warn(`Could not map to a selectable tree node. Node does not exist with ID: ${node.id}.`);\n            }\n        }\n        return undefined;\n    }\n\n    /**\n     * Checks whether the argument contains any `DEFAULT` tree selection type. If yes, throws an error, otherwise returns with a reference the argument.\n     */\n    protected checkNoDefaultSelection<T extends TreeSelection>(selections: ReadonlyArray<T>): ReadonlyArray<T> {\n        if (selections.some(selection => selection.type === undefined || selection.type === TreeSelection.SelectionType.DEFAULT)) {\n            throw new Error(`Unexpected DEFAULT selection type. [${selections.map(selection => `ID: ${selection.node.id} | ${selection.type}`).join(', ')}]`);\n        }\n        return selections;\n    }\n\n}\n","/********************************************************************************\n * Copyright (C) 2017 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { TreeNode } from './tree';\nimport { Event, Disposable, SelectionProvider } from '../../common';\n\n/**\n * The tree selection service.\n */\nexport const TreeSelectionService = Symbol('TreeSelectionService');\nexport interface TreeSelectionService extends Disposable, SelectionProvider<ReadonlyArray<Readonly<SelectableTreeNode>>> {\n\n    /**\n     * The tree selection, representing the selected nodes from the tree. If nothing is selected, the\n     * result will be empty.\n     */\n    readonly selectedNodes: ReadonlyArray<Readonly<SelectableTreeNode>>;\n\n    /**\n     * Emitted when the selection has changed in the tree.\n     */\n    readonly onSelectionChanged: Event<ReadonlyArray<Readonly<SelectableTreeNode>>>;\n\n    /**\n     * Registers the given selection into the tree selection service. If the selection state changes after adding the\n     * `selectionOrTreeNode` argument, a selection changed event will be fired. If the argument is a tree node,\n     * a it will be treated as a tree selection with the default selection type.\n     */\n    addSelection(selectionOrTreeNode: TreeSelection | Readonly<SelectableTreeNode>): void;\n\n    /**\n     * Store selection state.\n     */\n    storeState(): object;\n\n    /**\n     * Restore selection state.\n     */\n    restoreState(state: object): void;\n\n}\n\n/**\n * Representation of a tree selection.\n */\nexport interface TreeSelection {\n\n    /**\n     * The actual item that has been selected.\n     */\n    readonly node: Readonly<SelectableTreeNode>;\n\n    /**\n     * The optional tree selection type. Defaults to `SelectionType.DEFAULT`;\n     */\n    readonly type?: TreeSelection.SelectionType;\n\n}\n\nexport namespace TreeSelection {\n\n    /**\n     * Enumeration of selection types.\n     */\n    export enum SelectionType {\n        DEFAULT,\n        TOGGLE,\n        RANGE\n    }\n\n    export function is(arg: Object | undefined): arg is TreeSelection {\n        return !!arg && 'node' in arg;\n    }\n\n    export function isRange(arg: TreeSelection | SelectionType | undefined): boolean {\n        return isSelectionTypeOf(arg, SelectionType.RANGE);\n    }\n\n    export function isToggle(arg: TreeSelection | SelectionType | undefined): boolean {\n        return isSelectionTypeOf(arg, SelectionType.TOGGLE);\n    }\n\n    function isSelectionTypeOf(arg: TreeSelection | SelectionType | undefined, expected: SelectionType): boolean {\n        if (arg === undefined) {\n            return false;\n        }\n        const type = typeof arg === 'number' ? arg : arg.type;\n        return type === expected;\n    }\n\n}\n\n/**\n * A selectable tree node.\n */\nexport interface SelectableTreeNode extends TreeNode {\n\n    /**\n     * `true` if the tree node is selected. Otherwise, `false`.\n     */\n    selected: boolean;\n\n    /**\n     * `true` if the tree node has the focus. Otherwise, `false`. Defaults to `false`.\n     */\n    focus?: boolean;\n\n}\n\nexport namespace SelectableTreeNode {\n\n    export function is(node: TreeNode | undefined): node is SelectableTreeNode {\n        return !!node && 'selected' in node;\n    }\n\n    export function isSelected(node: TreeNode | undefined): node is SelectableTreeNode {\n        return is(node) && node.selected;\n    }\n\n    export function hasFocus(node: TreeNode | undefined): boolean {\n        return is(node) && node.focus === true;\n    }\n\n    export function isVisible(node: TreeNode | undefined): node is SelectableTreeNode {\n        return is(node) && TreeNode.isVisible(node);\n    }\n\n    export function getVisibleParent(node: TreeNode | undefined): SelectableTreeNode | undefined {\n        if (node) {\n            if (isVisible(node.parent)) {\n                return node.parent;\n            }\n            return getVisibleParent(node.parent);\n        }\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2019 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { TreeWidget } from './tree-widget';\nimport { SelectableTreeNode } from './tree-selection';\n\nexport type TreeWidgetSelection = ReadonlyArray<Readonly<SelectableTreeNode>> & {\n    source: TreeWidget\n};\nexport namespace TreeWidgetSelection {\n    export function isSource(selection: Object | undefined, source: TreeWidget): boolean {\n        return getSource(selection) === source;\n    }\n    export function getSource(selection: Object | undefined): TreeWidget | undefined {\n        return is(selection) ? selection.source : undefined;\n    }\n    export function is(selection: Object | undefined): selection is TreeWidgetSelection {\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        return Array.isArray(selection) && ('source' in selection) && <any>selection['source'] instanceof TreeWidget;\n    }\n    export function create(source: TreeWidget): TreeWidgetSelection {\n        return Object.assign(source.model.selectedNodes, { source });\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { injectable, inject, postConstruct } from 'inversify';\nimport { Message } from '@phosphor/messaging';\nimport { Disposable, MenuPath, SelectionService } from '../../common';\nimport { Key, KeyCode, KeyModifier } from '../keyboard/keys';\nimport { ContextMenuRenderer } from '../context-menu-renderer';\nimport { StatefulWidget } from '../shell';\nimport { EXPANSION_TOGGLE_CLASS, SELECTED_CLASS, COLLAPSED_CLASS, FOCUS_CLASS, Widget } from '../widgets';\nimport { TreeNode, CompositeTreeNode } from './tree';\nimport { TreeModel } from './tree-model';\nimport { ExpandableTreeNode } from './tree-expansion';\nimport { SelectableTreeNode, TreeSelection } from './tree-selection';\nimport { TreeDecoratorService, TreeDecoration, DecoratedTreeNode } from './tree-decorator';\nimport { notEmpty } from '../../common/objects';\nimport { isOSX } from '../../common/os';\nimport { ReactWidget } from '../widgets/react-widget';\nimport * as React from 'react';\nimport { List, ListRowRenderer, ScrollParams, CellMeasurer, CellMeasurerCache } from 'react-virtualized';\nimport { TopDownTreeIterator } from './tree-iterator';\nimport { SearchBox, SearchBoxFactory, SearchBoxProps } from './search-box';\nimport { TreeSearch } from './tree-search';\nimport { ElementExt } from '@phosphor/domutils';\nimport { TreeWidgetSelection } from './tree-widget-selection';\nimport { MaybePromise } from '../../common/types';\nimport { LabelProvider } from '../label-provider';\n\nconst debounce = require('lodash.debounce');\n\nexport const TREE_CLASS = 'theia-Tree';\nexport const TREE_CONTAINER_CLASS = 'theia-TreeContainer';\nexport const TREE_NODE_CLASS = 'theia-TreeNode';\nexport const TREE_NODE_CONTENT_CLASS = 'theia-TreeNodeContent';\nexport const TREE_NODE_TAIL_CLASS = 'theia-TreeNodeTail';\nexport const TREE_NODE_SEGMENT_CLASS = 'theia-TreeNodeSegment';\nexport const TREE_NODE_SEGMENT_GROW_CLASS = 'theia-TreeNodeSegmentGrow';\n\nexport const EXPANDABLE_TREE_NODE_CLASS = 'theia-ExpandableTreeNode';\nexport const COMPOSITE_TREE_NODE_CLASS = 'theia-CompositeTreeNode';\nexport const TREE_NODE_CAPTION_CLASS = 'theia-TreeNodeCaption';\n\nexport const TreeProps = Symbol('TreeProps');\n\n/**\n * Representation of tree properties.\n */\nexport interface TreeProps {\n\n    /**\n     * The path of the context menu that one can use to contribute context menu items to the tree widget.\n     */\n    readonly contextMenuPath?: MenuPath;\n\n    /**\n     * The size of the padding (in pixels) per hierarchy depth. The root element won't have left padding but\n     * the padding for the children will be calculated as `leftPadding * hierarchyDepth` and so on.\n     */\n    readonly leftPadding: number;\n\n    readonly expansionTogglePadding: number;\n\n    /**\n     * `true` if the tree widget support multi-selection. Otherwise, `false`. Defaults to `false`.\n     */\n    readonly multiSelect?: boolean;\n\n    /**\n     * `true` if the tree widget support searching. Otherwise, `false`. Defaults to `false`.\n     */\n    readonly search?: boolean\n\n    /**\n     * `true` if the tree widget should be virtualized searching. Otherwise, `false`. Defaults to `true`.\n     */\n    readonly virtualized?: boolean\n\n    /**\n     * `true` if the selected node should be auto scrolled only if the widget is active. Otherwise, `false`. Defaults to `false`.\n     */\n    readonly scrollIfActive?: boolean\n\n    /**\n     * `true` if a tree widget contributes to the global selection. Defaults to `false`.\n     */\n    readonly globalSelection?: boolean;\n}\n\n/**\n * Representation of node properties.\n */\nexport interface NodeProps {\n\n    /**\n     * A root relative number representing the hierarchical depth of the actual node. Root is `0`, its children have `1` and so on.\n     */\n    readonly depth: number;\n\n}\n\n/**\n * The default tree properties.\n */\nexport const defaultTreeProps: TreeProps = {\n    leftPadding: 8,\n    expansionTogglePadding: 18\n};\n\nexport namespace TreeWidget {\n\n    /**\n     * Bare minimum common interface of the keyboard and the mouse event with respect to the key maskings.\n     */\n    export interface ModifierAwareEvent {\n        /**\n         * Determines if the modifier aware event has the `meta` key masking.\n         */\n        readonly metaKey: boolean;\n        /**\n         * Determines if the modifier aware event has the `ctrl` key masking.\n         */\n        readonly ctrlKey: boolean;\n        /**\n         * Determines if the modifier aware event has the `shift` key masking.\n         */\n        readonly shiftKey: boolean;\n    }\n\n}\n\n@injectable()\nexport class TreeWidget extends ReactWidget implements StatefulWidget {\n\n    protected searchBox: SearchBox;\n    protected searchHighlights: Map<string, TreeDecoration.CaptionHighlight>;\n\n    @inject(TreeDecoratorService)\n    protected readonly decoratorService: TreeDecoratorService;\n    @inject(TreeSearch)\n    protected readonly treeSearch: TreeSearch;\n    @inject(SearchBoxFactory)\n    protected readonly searchBoxFactory: SearchBoxFactory;\n\n    protected decorations: Map<string, TreeDecoration.Data[]> = new Map();\n\n    @inject(SelectionService)\n    protected readonly selectionService: SelectionService;\n\n    @inject(LabelProvider)\n    protected readonly labelProvider: LabelProvider;\n\n    protected shouldScrollToRow = true;\n\n    constructor(\n        @inject(TreeProps) readonly props: TreeProps,\n        @inject(TreeModel) readonly model: TreeModel,\n        @inject(ContextMenuRenderer) protected readonly contextMenuRenderer: ContextMenuRenderer,\n    ) {\n        super();\n        this.scrollOptions = {\n            suppressScrollX: true,\n            minScrollbarLength: 35\n        };\n        this.addClass(TREE_CLASS);\n        this.node.tabIndex = 0;\n    }\n\n    @postConstruct()\n    protected init(): void {\n        if (this.props.search) {\n            this.searchBox = this.searchBoxFactory({ ...SearchBoxProps.DEFAULT, showButtons: true });\n            this.toDispose.pushAll([\n                this.searchBox,\n                this.searchBox.onTextChange(async data => {\n                    await this.treeSearch.filter(data);\n                    this.searchHighlights = this.treeSearch.getHighlights();\n                    this.update();\n                }),\n                this.searchBox.onClose(data => this.treeSearch.filter(undefined)),\n                this.searchBox.onNext(() => {\n                    // Enable next selection if there are currently highlights.\n                    if (this.searchHighlights.size > 1) {\n                        this.model.selectNextNode();\n                    }\n                }),\n                this.searchBox.onPrevious(() => {\n                    // Enable previous selection if there are currently highlights.\n                    if (this.searchHighlights.size > 1) {\n                        this.model.selectPrevNode();\n                    }\n                }),\n                this.treeSearch,\n                this.treeSearch.onFilteredNodesChanged(nodes => {\n                    const node = nodes.find(SelectableTreeNode.is);\n                    if (node) {\n                        this.model.selectNode(node);\n                    }\n                }),\n                this.model.onExpansionChanged(() => {\n                    this.searchBox.hide();\n                })\n            ]);\n        }\n        this.toDispose.pushAll([\n            this.model,\n            this.model.onChanged(() => this.updateRows()),\n            this.model.onSelectionChanged(() => this.updateScrollToRow({ resize: false })),\n            this.model.onNodeRefreshed(() => this.updateDecorations()),\n            this.model.onExpansionChanged(() => this.updateDecorations()),\n            this.decoratorService,\n            this.decoratorService.onDidChangeDecorations(() => this.updateDecorations()),\n            this.labelProvider.onDidChange(e => {\n                for (const row of this.rows.values()) {\n                    if (e.affects(row)) {\n                        this.forceUpdate();\n                        return;\n                    }\n                }\n            })\n        ]);\n        setTimeout(() => {\n            this.updateRows();\n            this.updateDecorations();\n        });\n        if (this.props.globalSelection) {\n            this.toDispose.pushAll([\n                this.model.onSelectionChanged(() => {\n                    if (this.node.contains(document.activeElement)) {\n                        this.updateGlobalSelection();\n                    }\n                }),\n                Disposable.create(() => {\n                    const selection = this.selectionService.selection;\n                    if (TreeWidgetSelection.isSource(selection, this)) {\n                        this.selectionService.selection = undefined;\n                    }\n                })\n            ]);\n        }\n    }\n\n    /**\n     * Update the global selection for the tree.\n     */\n    protected updateGlobalSelection(): void {\n        this.selectionService.selection = TreeWidgetSelection.create(this);\n    }\n\n    protected rows = new Map<string, TreeWidget.NodeRow>();\n    protected updateRows = debounce(() => this.doUpdateRows(), 10);\n    protected doUpdateRows(): void {\n        const root = this.model.root;\n        const rowsToUpdate: Array<[string, TreeWidget.NodeRow]> = [];\n        if (root) {\n            const depths = new Map<CompositeTreeNode | undefined, number>();\n            let index = 0;\n            for (const node of new TopDownTreeIterator(root, {\n                pruneCollapsed: true,\n                pruneSiblings: true\n            })) {\n                if (TreeNode.isVisible(node)) {\n                    const parentDepth = depths.get(node.parent);\n                    const depth = parentDepth === undefined ? 0 : TreeNode.isVisible(node.parent) ? parentDepth + 1 : parentDepth;\n                    if (CompositeTreeNode.is(node)) {\n                        depths.set(node, depth);\n                    }\n                    rowsToUpdate.push([node.id, {\n                        index: index++,\n                        node,\n                        depth\n                    }]);\n                }\n            }\n        }\n        this.rows = new Map(rowsToUpdate);\n        this.updateScrollToRow();\n    }\n\n    /**\n     * Row index to ensure visibility.\n     * - Used to forcefully scroll if necessary.\n     */\n    protected scrollToRow: number | undefined;\n    /**\n     * Update the `scrollToRow`.\n     * @param updateOptions the tree widget force update options.\n     */\n    protected updateScrollToRow(updateOptions?: TreeWidget.ForceUpdateOptions): void {\n        this.scrollToRow = this.getScrollToRow();\n        this.forceUpdate(updateOptions);\n    }\n\n    /**\n     * Get the `scrollToRow`.\n     *\n     * @returns the `scrollToRow` if available.\n     */\n    protected getScrollToRow(): number | undefined {\n        if (!this.shouldScrollToRow) {\n            return undefined;\n        }\n        const selected = this.model.selectedNodes;\n        const node: TreeNode | undefined = selected.find(SelectableTreeNode.hasFocus) || selected[0];\n        const row = node && this.rows.get(node.id);\n        return row && row.index;\n    }\n\n    /**\n     * Update tree decorations.\n     * - Updating decorations are debounced in order to limit the number of expensive updates.\n     */\n    protected readonly updateDecorations = debounce(() => this.doUpdateDecorations(), 150);\n    protected async doUpdateDecorations(): Promise<void> {\n        this.decorations = await this.decoratorService.getDecorations(this.model);\n        this.forceUpdate();\n    }\n\n    /**\n     * Force deep resizing and rendering of rows.\n     * https://github.com/bvaughn/react-virtualized/blob/master/docs/List.md#recomputerowheights-index-number\n     */\n    protected forceUpdate({ resize }: TreeWidget.ForceUpdateOptions = { resize: true }): void {\n        if (this.view && this.view.list) {\n            if (resize && this.isVisible) {\n                this.view.cache.clearAll();\n                this.view.list.recomputeRowHeights();\n            } else {\n                this.view.list.forceUpdateGrid();\n            }\n        }\n        this.update();\n    }\n\n    protected onActivateRequest(msg: Message): void {\n        super.onActivateRequest(msg);\n        this.node.focus({ preventScroll: true });\n    }\n\n    /**\n     * Actually focus the tree node.\n     */\n    protected doFocus(): void {\n        if (!this.model.selectedNodes.length) {\n            const node = this.getNodeToFocus();\n            if (SelectableTreeNode.is(node)) {\n                this.model.selectNode(node);\n            }\n        }\n        // It has to be called after nodes are selected.\n        if (this.props.globalSelection) {\n            this.updateGlobalSelection();\n        }\n        this.forceUpdate();\n    }\n\n    /**\n     * Get the tree node to focus.\n     *\n     * @returns the node to focus if available.\n     */\n    protected getNodeToFocus(): SelectableTreeNode | undefined {\n        const root = this.model.root;\n        if (SelectableTreeNode.isVisible(root)) {\n            return root;\n        }\n        return this.model.getNextSelectableNode(root);\n    }\n\n    protected onUpdateRequest(msg: Message): void {\n        if (!this.isAttached || !this.isVisible) {\n            return;\n        }\n        super.onUpdateRequest(msg);\n    }\n\n    protected onResize(msg: Widget.ResizeMessage): void {\n        super.onResize(msg);\n        this.forceUpdate();\n    }\n\n    protected render(): React.ReactNode {\n        return React.createElement('div', this.createContainerAttributes(), this.renderTree(this.model));\n    }\n\n    /**\n     * Create the container attributes for the widget.\n     */\n    protected createContainerAttributes(): React.HTMLAttributes<HTMLElement> {\n        const classNames = [TREE_CONTAINER_CLASS];\n        if (!this.rows.size) {\n            classNames.push('empty');\n        }\n        return {\n            className: classNames.join(' '),\n            onContextMenu: event => this.handleContextMenuEvent(this.getContainerTreeNode(), event)\n        };\n    }\n    /**\n     * Get the container tree node.\n     *\n     * @returns the tree node for the container if available.\n     */\n    protected getContainerTreeNode(): TreeNode | undefined {\n        return this.model.root;\n    }\n\n    protected view: TreeWidget.View | undefined;\n    /**\n     * Render the tree widget.\n     * @param model the tree model.\n     */\n    protected renderTree(model: TreeModel): React.ReactNode {\n        if (model.root) {\n            const rows = Array.from(this.rows.values());\n            if (this.props.virtualized === false) {\n                this.onRender.push(Disposable.create(() => this.scrollToSelected()));\n                return rows.map(row => <div key={row.index}>{this.renderNodeRow(row)}</div>);\n            }\n            return <TreeWidget.View\n                ref={view => this.view = (view || undefined)}\n                width={this.node.offsetWidth}\n                height={this.node.offsetHeight}\n                rows={rows}\n                renderNodeRow={this.renderNodeRow}\n                scrollToRow={this.scrollToRow}\n                handleScroll={this.handleScroll}\n            />;\n        }\n        // eslint-disable-next-line no-null/no-null\n        return null;\n    }\n\n    scrollArea: Element = this.node;\n    /**\n     * Scroll to the selected tree node.\n     */\n    protected scrollToSelected(): void {\n        if (this.props.scrollIfActive === true && !this.node.contains(document.activeElement)) {\n            return;\n        }\n        const focus = this.node.getElementsByClassName(FOCUS_CLASS)[0];\n        if (focus) {\n            ElementExt.scrollIntoViewIfNeeded(this.scrollArea, focus);\n        } else {\n            const selected = this.node.getElementsByClassName(SELECTED_CLASS)[0];\n            if (selected) {\n                ElementExt.scrollIntoViewIfNeeded(this.scrollArea, selected);\n            }\n        }\n    }\n\n    /**\n     * Handle the scroll event.\n     */\n    protected readonly handleScroll = (info: ScrollParams) => {\n        this.node.scrollTop = info.scrollTop;\n    };\n\n    /**\n     * Render the node row.\n     */\n    protected readonly renderNodeRow = (row: TreeWidget.NodeRow) => this.doRenderNodeRow(row);\n    /**\n     * Actually render the node row.\n     */\n    protected doRenderNodeRow({ index, node, depth }: TreeWidget.NodeRow): React.ReactNode {\n        return this.renderNode(node, { depth });\n    }\n\n    /**\n     * Render the tree node given the node properties.\n     * @param node the tree node.\n     * @param props the node properties.\n     */\n    protected renderIcon(node: TreeNode, props: NodeProps): React.ReactNode {\n        // eslint-disable-next-line no-null/no-null\n        return null;\n    }\n\n    /**\n     * Toggle the node.\n     */\n    protected readonly toggle = (event: React.MouseEvent<HTMLElement>) => this.doToggle(event);\n    /**\n     * Actually toggle the tree node.\n     * @param event the mouse click event.\n     */\n    protected doToggle(event: React.MouseEvent<HTMLElement>): void {\n        const nodeId = event.currentTarget.getAttribute('data-node-id');\n        if (nodeId) {\n            const node = this.model.getNode(nodeId);\n            this.handleClickEvent(node, event);\n        }\n        event.stopPropagation();\n    }\n\n    /**\n     * Render the node expansion toggle.\n     * @param node the tree node.\n     * @param props the node properties.\n     */\n    protected renderExpansionToggle(node: TreeNode, props: NodeProps): React.ReactNode {\n        if (!this.isExpandable(node)) {\n            // eslint-disable-next-line no-null/no-null\n            return null;\n        }\n        const classes = [TREE_NODE_SEGMENT_CLASS, EXPANSION_TOGGLE_CLASS];\n        if (!node.expanded) {\n            classes.push(COLLAPSED_CLASS);\n        }\n        const className = classes.join(' ');\n        return <div\n            data-node-id={node.id}\n            className={className}\n            onClick={this.toggle}>\n        </div>;\n    }\n\n    /**\n     * Render the tree node caption given the node properties.\n     * @param node the tree node.\n     * @param props the node properties.\n     */\n    protected renderCaption(node: TreeNode, props: NodeProps): React.ReactNode {\n        const tooltip = this.getDecorationData(node, 'tooltip').filter(notEmpty).join('  ');\n        const classes = [TREE_NODE_SEGMENT_CLASS];\n        if (!this.hasTrailingSuffixes(node)) {\n            classes.push(TREE_NODE_SEGMENT_GROW_CLASS);\n        }\n        const className = classes.join(' ');\n        let attrs = this.decorateCaption(node, {\n            className, id: node.id\n        });\n        if (tooltip.length > 0) {\n            attrs = {\n                ...attrs,\n                title: tooltip\n            };\n        }\n        const children: React.ReactNode[] = [];\n        const caption = this.toNodeName(node);\n        const highlight = this.getDecorationData(node, 'highlight')[0];\n        if (highlight) {\n            children.push(this.toReactNode(caption, highlight));\n        }\n        const searchHighlight = this.searchHighlights ? this.searchHighlights.get(node.id) : undefined;\n        if (searchHighlight) {\n            children.push(...this.toReactNode(caption, searchHighlight));\n        } else if (!highlight) {\n            children.push(caption);\n        }\n        return React.createElement('div', attrs, ...children);\n    }\n\n    /**\n     * Update the node given the caption and highlight.\n     * @param caption the caption.\n     * @param highlight the tree decoration caption highlight.\n     */\n    protected toReactNode(caption: string, highlight: TreeDecoration.CaptionHighlight): React.ReactNode[] {\n        let style: React.CSSProperties = {};\n        if (highlight.color) {\n            style = {\n                ...style,\n                color: highlight.color\n            };\n        }\n        if (highlight.backgroundColor) {\n            style = {\n                ...style,\n                backgroundColor: highlight.backgroundColor\n            };\n        }\n        const createChildren = (fragment: TreeDecoration.CaptionHighlight.Fragment) => {\n            const { data } = fragment;\n            if (fragment.highligh) {\n                return <mark className={TreeDecoration.Styles.CAPTION_HIGHLIGHT_CLASS} style={style}>{data}</mark>;\n            } else {\n                return data;\n            }\n        };\n        return TreeDecoration.CaptionHighlight.split(caption, highlight).map(createChildren);\n    }\n\n    /**\n     * Decorate the tree caption.\n     * @param node the tree node.\n     * @param attrs the additional attributes.\n     */\n    protected decorateCaption(node: TreeNode, attrs: React.HTMLAttributes<HTMLElement>): React.Attributes & React.HTMLAttributes<HTMLElement> {\n        const style = this.getDecorationData(node, 'fontData')\n            .filter(notEmpty)\n            .reverse()\n            .map(fontData => this.applyFontStyles({}, fontData))\n            .reduce((acc, current) => ({\n                ...acc,\n                ...current\n            }), {});\n        return {\n            ...attrs,\n            style\n        };\n    }\n\n    /**\n     * Determine if the tree node contains trailing suffixes.\n     * @param node the tree node.\n     *\n     * @returns `true` if the tree node contains trailing suffices.\n     */\n    protected hasTrailingSuffixes(node: TreeNode): boolean {\n        return this.getDecorationData(node, 'captionSuffixes').filter(notEmpty).reduce((acc, current) => acc.concat(current), []).length > 0;\n    }\n\n    /**\n     * Apply font styles to the tree.\n     * @param original the original css properties.\n     * @param fontData the optional `fontData`.\n     */\n    protected applyFontStyles(original: React.CSSProperties, fontData: TreeDecoration.FontData | undefined): React.CSSProperties {\n        if (fontData === undefined) {\n            return original;\n        }\n        let modified = original;\n        const { color, style } = fontData;\n        if (color) {\n            modified = {\n                ...modified,\n                color\n            };\n        }\n        if (style) {\n            (Array.isArray(style) ? style : [style]).forEach(s => {\n                switch (style) {\n                    case 'bold':\n                        modified = {\n                            ...modified,\n                            fontWeight: style\n                        };\n                        break;\n                    case 'normal': // Fall through.\n                    case 'oblique': // Fall through.\n                    case 'italic':\n                        modified = {\n                            ...modified,\n                            fontStyle: style\n                        };\n                        break;\n                    case 'underline': // Fall through.\n                    case 'line-through':\n                        modified = {\n                            ...modified,\n                            textDecoration: style\n                        };\n                        break;\n                    default:\n                        throw new Error(`Unexpected font style: ${style}.`);\n                }\n            });\n        }\n        return modified;\n    }\n\n    /**\n     * Render caption affixes for the given tree node.\n     * @param node the tree node.\n     * @param props the node properties.\n     * @param affixKey the affix key.\n     */\n    protected renderCaptionAffixes(node: TreeNode, props: NodeProps, affixKey: 'captionPrefixes' | 'captionSuffixes'): React.ReactNode {\n        const suffix = affixKey === 'captionSuffixes';\n        const affixClass = suffix ? TreeDecoration.Styles.CAPTION_SUFFIX_CLASS : TreeDecoration.Styles.CAPTION_PREFIX_CLASS;\n        const classes = [TREE_NODE_SEGMENT_CLASS, affixClass];\n        const affixes = this.getDecorationData(node, affixKey).filter(notEmpty).reduce((acc, current) => acc.concat(current), []);\n        const children: React.ReactNode[] = [];\n        for (let i = 0; i < affixes.length; i++) {\n            const affix = affixes[i];\n            if (suffix && i === affixes.length - 1) {\n                classes.push(TREE_NODE_SEGMENT_GROW_CLASS);\n            }\n            const style = this.applyFontStyles({}, affix.fontData);\n            const className = classes.join(' ');\n            const key = node.id + '_' + i;\n            const attrs = {\n                className,\n                style,\n                key\n            };\n            children.push(React.createElement('div', attrs, affix.data));\n        }\n        return <React.Fragment>{children}</React.Fragment>;\n    }\n\n    /**\n     * Decorate the tree node icon.\n     * @param node the tree node.\n     * @param icon the icon.\n     */\n    protected decorateIcon(node: TreeNode, icon: React.ReactNode | null): React.ReactNode {\n        // eslint-disable-next-line no-null/no-null\n        if (icon === null) {\n            // eslint-disable-next-line no-null/no-null\n            return null;\n        }\n\n        const overlayIcons: React.ReactNode[] = [];\n        new Map(this.getDecorationData(node, 'iconOverlay').reverse().filter(notEmpty)\n            .map(overlay => [overlay.position, overlay] as [TreeDecoration.IconOverlayPosition, TreeDecoration.IconOverlay | TreeDecoration.IconClassOverlay]))\n            .forEach((overlay, position) => {\n                const iconClasses = [TreeDecoration.Styles.DECORATOR_SIZE_CLASS, TreeDecoration.IconOverlayPosition.getStyle(position)];\n                const style = (color?: string) => color === undefined ? {} : { color };\n                if (overlay.background) {\n                    overlayIcons.push(<span key={node.id + 'bg'} className={this.getIconClass(overlay.background.shape, iconClasses)} style={style(overlay.background.color)}>\n                    </span>);\n                }\n                const overlayIcon = (overlay as TreeDecoration.IconOverlay).icon || (overlay as TreeDecoration.IconClassOverlay).iconClass;\n                overlayIcons.push(<span key={node.id} className={this.getIconClass(overlayIcon, iconClasses)} style={style(overlay.color)}></span>);\n            });\n\n        if (overlayIcons.length > 0) {\n            return <div className={TreeDecoration.Styles.ICON_WRAPPER_CLASS}>{icon}{overlayIcons}</div>;\n        }\n\n        return icon;\n    }\n\n    /**\n     * Render the tree node tail decorations.\n     * @param node the tree node.\n     * @param props the node properties.\n     */\n    protected renderTailDecorations(node: TreeNode, props: NodeProps): React.ReactNode {\n        return <React.Fragment>\n            {this.getDecorationData(node, 'tailDecorations').filter(notEmpty).reduce((acc, current) => acc.concat(current), []).map((decoration, index) => {\n                const { tooltip } = decoration;\n                const { data, fontData } = decoration as TreeDecoration.TailDecoration;\n                const color = (decoration as TreeDecoration.TailDecorationIcon).color;\n                const icon = (decoration as TreeDecoration.TailDecorationIcon).icon || (decoration as TreeDecoration.TailDecorationIconClass).iconClass;\n                const className = [TREE_NODE_SEGMENT_CLASS, TREE_NODE_TAIL_CLASS].join(' ');\n                const style = fontData ? this.applyFontStyles({}, fontData) : color ? { color } : undefined;\n                const content = data ? data : icon ? <span key={node.id + 'icon' + index} className={this.getIconClass(icon)}></span> : '';\n                return <div key={node.id + className + index} className={className} style={style} title={tooltip}>\n                    {content}\n                </div>;\n            })}\n        </React.Fragment>;\n    }\n\n    /**\n     * Determine the classes to use for an icon\n     * - Assumes a Font Awesome name when passed a single string, otherwise uses the passed string array\n     * @param iconName the icon name or list of icon names.\n     * @param additionalClasses additional CSS classes.\n     *\n     * @returns the icon class name.\n     */\n    private getIconClass(iconName: string | string[], additionalClasses: string[] = []): string {\n        const iconClass = (typeof iconName === 'string') ? ['a', 'fa', `fa-${iconName}`] : ['a'].concat(iconName);\n        return iconClass.concat(additionalClasses).join(' ');\n    }\n\n    /**\n     * Render the node given the tree node and node properties.\n     * @param node the tree node.\n     * @param props the node properties.\n     */\n    protected renderNode(node: TreeNode, props: NodeProps): React.ReactNode {\n        if (!TreeNode.isVisible(node)) {\n            return undefined;\n        }\n        const attributes = this.createNodeAttributes(node, props);\n        const content = <div className={TREE_NODE_CONTENT_CLASS}>\n            {this.renderExpansionToggle(node, props)}\n            {this.decorateIcon(node, this.renderIcon(node, props))}\n            {this.renderCaptionAffixes(node, props, 'captionPrefixes')}\n            {this.renderCaption(node, props)}\n            {this.renderCaptionAffixes(node, props, 'captionSuffixes')}\n            {this.renderTailDecorations(node, props)}\n        </div>;\n        return React.createElement('div', attributes, content);\n    }\n\n    /**\n     * Create node attributes for the tree node given the node properties.\n     * @param node the tree node.\n     * @param props the node properties.\n     */\n    protected createNodeAttributes(node: TreeNode, props: NodeProps): React.Attributes & React.HTMLAttributes<HTMLElement> {\n        const className = this.createNodeClassNames(node, props).join(' ');\n        const style = this.createNodeStyle(node, props);\n        return {\n            className,\n            style,\n            onClick: event => this.handleClickEvent(node, event),\n            onDoubleClick: event => this.handleDblClickEvent(node, event),\n            onContextMenu: event => this.handleContextMenuEvent(node, event)\n        };\n    }\n\n    /**\n     * Create the node class names.\n     * @param node the tree node.\n     * @param props the node properties.\n     *\n     * @returns the list of tree node class names.\n     */\n    protected createNodeClassNames(node: TreeNode, props: NodeProps): string[] {\n        const classNames = [TREE_NODE_CLASS];\n        if (CompositeTreeNode.is(node)) {\n            classNames.push(COMPOSITE_TREE_NODE_CLASS);\n        }\n        if (this.isExpandable(node)) {\n            classNames.push(EXPANDABLE_TREE_NODE_CLASS);\n        }\n        if (SelectableTreeNode.isSelected(node)) {\n            classNames.push(SELECTED_CLASS);\n        }\n        if (SelectableTreeNode.hasFocus(node)) {\n            classNames.push(FOCUS_CLASS);\n        }\n        return classNames;\n    }\n\n    /**\n     * Get the default node style.\n     * @param node the tree node.\n     * @param props the node properties.\n     *\n     * @returns the CSS properties if available.\n     */\n    protected getDefaultNodeStyle(node: TreeNode, props: NodeProps): React.CSSProperties | undefined {\n        const paddingLeft = this.getPaddingLeft(node, props) + 'px';\n        return { paddingLeft };\n    }\n\n    protected getPaddingLeft(node: TreeNode, props: NodeProps): number {\n        return props.depth * this.props.leftPadding + (this.needsExpansionTogglePadding(node) ? this.props.expansionTogglePadding : 0);\n    }\n\n    /**\n     * If the node is a composite, a toggle will be rendered.\n     * Otherwise we need to add the width and the left, right padding => 18px\n     */\n    protected needsExpansionTogglePadding(node: TreeNode): boolean {\n        return !this.isExpandable(node);\n    }\n\n    /**\n     * Create the tree node style.\n     * @param node the tree node.\n     * @param props the node properties.\n     */\n    protected createNodeStyle(node: TreeNode, props: NodeProps): React.CSSProperties | undefined {\n        return this.decorateNodeStyle(node, this.getDefaultNodeStyle(node, props));\n    }\n\n    /**\n     * Decorate the node style.\n     * @param node the tree node.\n     * @param style the optional CSS properties.\n     *\n     * @returns the CSS styles if available.\n     */\n    protected decorateNodeStyle(node: TreeNode, style: React.CSSProperties | undefined): React.CSSProperties | undefined {\n        const backgroundColor = this.getDecorationData(node, 'backgroundColor').filter(notEmpty).shift();\n        if (backgroundColor) {\n            style = {\n                ...(style || {}),\n                backgroundColor\n            };\n        }\n        return style;\n    }\n\n    /**\n     * Determine if the tree node is expandable.\n     * @param node the tree node.\n     *\n     * @returns `true` if the tree node is expandable.\n     */\n    protected isExpandable(node: TreeNode): node is ExpandableTreeNode {\n        return ExpandableTreeNode.is(node);\n    }\n\n    /**\n     * Get the tree node decorations.\n     * @param node the tree node.\n     *\n     * @returns the list of tree decoration data.\n     */\n    protected getDecorations(node: TreeNode): TreeDecoration.Data[] {\n        const decorations: TreeDecoration.Data[] = [];\n        if (DecoratedTreeNode.is(node)) {\n            decorations.push(node.decorationData);\n        }\n        if (this.decorations.has(node.id)) {\n            decorations.push(...this.decorations.get(node.id));\n        }\n        return decorations.sort(TreeDecoration.Data.comparePriority);\n    }\n\n    /**\n     * Get the tree decoration data for the given key.\n     * @param node the tree node.\n     * @param key the tree decoration data key.\n     *\n     * @returns the tree decoration data at the given key.\n     */\n    protected getDecorationData<K extends keyof TreeDecoration.Data>(node: TreeNode, key: K): TreeDecoration.Data[K][] {\n        return this.getDecorations(node).filter(data => data[key] !== undefined).map(data => data[key]).filter(notEmpty);\n    }\n\n    /**\n     * Store the last scroll state.\n     */\n    protected lastScrollState: {\n        /**\n         * The scroll top value.\n         */\n        scrollTop: number,\n        /**\n         * The scroll left value.\n         */\n        scrollLeft: number\n    } | undefined;\n\n    /**\n     * Get the scroll container.\n     */\n    protected getScrollContainer(): MaybePromise<HTMLElement> {\n        this.toDisposeOnDetach.push(Disposable.create(() => {\n            const { scrollTop, scrollLeft } = this.node;\n            this.lastScrollState = { scrollTop, scrollLeft };\n        }));\n        if (this.lastScrollState) {\n            const { scrollTop, scrollLeft } = this.lastScrollState;\n            this.node.scrollTop = scrollTop;\n            this.node.scrollLeft = scrollLeft;\n        }\n        return this.node;\n    }\n\n    protected onAfterAttach(msg: Message): void {\n        const up = [\n            Key.ARROW_UP,\n            KeyCode.createKeyCode({ first: Key.ARROW_UP, modifiers: [KeyModifier.Shift] })\n        ];\n        const down = [\n            Key.ARROW_DOWN,\n            KeyCode.createKeyCode({ first: Key.ARROW_DOWN, modifiers: [KeyModifier.Shift] })\n        ];\n        if (this.props.search) {\n            if (this.searchBox.isAttached) {\n                Widget.detach(this.searchBox);\n            }\n            Widget.attach(this.searchBox, this.node.parentElement!);\n            this.addKeyListener(this.node, this.searchBox.keyCodePredicate.bind(this.searchBox), this.searchBox.handle.bind(this.searchBox));\n            this.toDisposeOnDetach.push(Disposable.create(() => {\n                Widget.detach(this.searchBox);\n            }));\n        }\n        super.onAfterAttach(msg);\n        this.addKeyListener(this.node, Key.ARROW_LEFT, event => this.handleLeft(event));\n        this.addKeyListener(this.node, Key.ARROW_RIGHT, event => this.handleRight(event));\n        this.addKeyListener(this.node, up, event => this.handleUp(event));\n        this.addKeyListener(this.node, down, event => this.handleDown(event));\n        this.addKeyListener(this.node, Key.ENTER, event => this.handleEnter(event));\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        this.addEventListener<any>(this.node, 'ps-scroll-y', (e: Event & { target: { scrollTop: number } }) => {\n            if (this.view && this.view.list && this.view.list.Grid) {\n                const { scrollTop } = e.target;\n                this.view.list.Grid.handleScrollEvent({ scrollTop });\n            }\n        });\n        this.addEventListener(this.node, 'focus', () => this.doFocus());\n    }\n\n    /**\n     * Handle the `left arrow` keyboard event.\n     * @param event the `left arrow` keyboard event.\n     */\n    protected async handleLeft(event: KeyboardEvent): Promise<void> {\n        if (!!this.props.multiSelect && (this.hasCtrlCmdMask(event) || this.hasShiftMask(event))) {\n            return;\n        }\n        if (! await this.model.collapseNode()) {\n            this.model.selectParent();\n        }\n    }\n\n    /**\n     * Handle the `right arrow` keyboard event.\n     * @param event the `right arrow` keyboard event.\n     */\n    protected async handleRight(event: KeyboardEvent): Promise<void> {\n        if (!!this.props.multiSelect && (this.hasCtrlCmdMask(event) || this.hasShiftMask(event))) {\n            return;\n        }\n        if (! await this.model.expandNode()) {\n            this.model.selectNextNode();\n        }\n    }\n\n    /**\n     * Handle the `up arrow` keyboard event.\n     * @param event the `up arrow` keyboard event.\n     */\n    protected handleUp(event: KeyboardEvent): void {\n        if (!!this.props.multiSelect && this.hasShiftMask(event)) {\n            this.model.selectPrevNode(TreeSelection.SelectionType.RANGE);\n        } else {\n            this.model.selectPrevNode();\n        }\n    }\n\n    /**\n     * Handle the `down arrow` keyboard event.\n     * @param event the `down arrow` keyboard event.\n     */\n    protected handleDown(event: KeyboardEvent): void {\n        if (!!this.props.multiSelect && this.hasShiftMask(event)) {\n            this.model.selectNextNode(TreeSelection.SelectionType.RANGE);\n        } else {\n            this.model.selectNextNode();\n        }\n    }\n\n    /**\n     * Handle the `enter key` keyboard event.\n     * - `enter` opens the tree node.\n     * @param event the `enter key` keyboard event.\n     */\n    protected handleEnter(event: KeyboardEvent): void {\n        this.model.openNode();\n    }\n\n    /**\n     * Handle the single-click mouse event.\n     * @param node the tree node if available.\n     * @param event the mouse single-click event.\n     */\n    protected handleClickEvent(node: TreeNode | undefined, event: React.MouseEvent<HTMLElement>): void {\n        if (node) {\n            if (!!this.props.multiSelect) {\n                const shiftMask = this.hasShiftMask(event);\n                const ctrlCmdMask = this.hasCtrlCmdMask(event);\n                if (SelectableTreeNode.is(node)) {\n                    if (shiftMask) {\n                        this.model.selectRange(node);\n                    } else if (ctrlCmdMask) {\n                        this.model.toggleNode(node);\n                    } else {\n                        this.model.selectNode(node);\n                    }\n                }\n                if (this.isExpandable(node) && !shiftMask && !ctrlCmdMask) {\n                    this.model.toggleNodeExpansion(node);\n                }\n            } else {\n                if (SelectableTreeNode.is(node)) {\n                    this.model.selectNode(node);\n                }\n                if (this.isExpandable(node) && !this.hasCtrlCmdMask(event) && !this.hasShiftMask(event)) {\n                    this.model.toggleNodeExpansion(node);\n                }\n            }\n            event.stopPropagation();\n        }\n    }\n\n    /**\n     * Handle the double-click mouse event.\n     * @param node the tree node if available.\n     * @param event the double-click mouse event.\n     */\n    protected handleDblClickEvent(node: TreeNode | undefined, event: React.MouseEvent<HTMLElement>): void {\n        this.model.openNode(node);\n        event.stopPropagation();\n    }\n\n    /**\n     * Handle the context menu click event.\n     * - The context menu click event is triggered by the right-click.\n     * @param node the tree node if available.\n     * @param event the right-click mouse event.\n     */\n    protected handleContextMenuEvent(node: TreeNode | undefined, event: React.MouseEvent<HTMLElement>): void {\n        if (SelectableTreeNode.is(node)) {\n            // Keep the selection for the context menu, if the widget support multi-selection and the right click happens on an already selected node.\n            if (!this.props.multiSelect || !node.selected) {\n                const type = !!this.props.multiSelect && this.hasCtrlCmdMask(event) ? TreeSelection.SelectionType.TOGGLE : TreeSelection.SelectionType.DEFAULT;\n                this.model.addSelection({ node, type });\n            }\n            const contextMenuPath = this.props.contextMenuPath;\n            if (contextMenuPath) {\n                const { x, y } = event.nativeEvent;\n                const args = this.toContextMenuArgs(node);\n                this.onRender.push(Disposable.create(() =>\n                    setTimeout(() => this.contextMenuRenderer.render({\n                        menuPath: contextMenuPath,\n                        anchor: { x, y },\n                        args\n                    }))\n                ));\n            }\n            this.update();\n        }\n        event.stopPropagation();\n        event.preventDefault();\n    }\n\n    /**\n     * Convert the tree node to context menu arguments.\n     * @param node the selectable tree node.\n     */\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    protected toContextMenuArgs(node: SelectableTreeNode): any[] | undefined {\n        return undefined;\n    }\n\n    /**\n     * Determine if the tree modifier aware event has a `ctrlcmd` mask.\n     * @param event the tree modifier aware event.\n     *\n     * @returns `true` if the tree modifier aware event contains the `ctrlcmd` mask.\n     */\n    protected hasCtrlCmdMask(event: TreeWidget.ModifierAwareEvent): boolean {\n        const { metaKey, ctrlKey } = event;\n        return (isOSX && metaKey) || ctrlKey;\n    }\n\n    /**\n     * Determine if the tree modifier aware event has a `shift` mask.\n     * @param event the tree modifier aware event.\n     *\n     * @returns `true` if the tree modifier aware event contains the `shift` mask.\n     */\n    protected hasShiftMask(event: TreeWidget.ModifierAwareEvent): boolean {\n        // Ctrl/Cmd mask overrules the Shift mask.\n        if (this.hasCtrlCmdMask(event)) {\n            return false;\n        }\n        return event.shiftKey;\n    }\n\n    /**\n     * Deflate the tree node for storage.\n     * @param node the tree node.\n     */\n    protected deflateForStorage(node: TreeNode): object {\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        const copy = Object.assign({}, node) as any;\n        if (copy.parent) {\n            delete copy.parent;\n        }\n        if ('previousSibling' in copy) {\n            delete copy.previousSibling;\n        }\n        if ('nextSibling' in copy) {\n            delete copy.nextSibling;\n        }\n        if (CompositeTreeNode.is(node)) {\n            copy.children = [];\n            for (const child of node.children) {\n                copy.children.push(this.deflateForStorage(child));\n            }\n        }\n        return copy;\n    }\n\n    /**\n     * Inflate the tree node from storage.\n     * @param node the tree node.\n     * @param parent the optional tree node.\n     */\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    protected inflateFromStorage(node: any, parent?: TreeNode): TreeNode {\n        if (node.selected) {\n            node.selected = false;\n        }\n        if (parent) {\n            node.parent = parent;\n        }\n        if (Array.isArray(node.children)) {\n            for (const child of node.children as TreeNode[]) {\n                this.inflateFromStorage(child, node);\n            }\n        }\n        return node;\n    }\n\n    /**\n     * Store the tree state.\n     */\n    storeState(): object {\n        const decorations = this.decoratorService.deflateDecorators(this.decorations);\n        let state: object = {\n            decorations\n        };\n        if (this.model.root) {\n            state = {\n                ...state,\n                root: this.deflateForStorage(this.model.root),\n                model: this.model.storeState()\n            };\n        }\n\n        return state;\n    }\n\n    /**\n     * Restore the state.\n     * @param oldState the old state object.\n     */\n    restoreState(oldState: object): void {\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        const { root, decorations, model } = (oldState as any);\n        if (root) {\n            this.model.root = this.inflateFromStorage(root);\n        }\n        if (decorations) {\n            this.decorations = this.decoratorService.inflateDecorators(decorations);\n        }\n        if (model) {\n            this.model.restoreState(model);\n        }\n    }\n\n    protected toNodeIcon(node: TreeNode): string {\n        return this.labelProvider.getIcon(node);\n    }\n\n    protected toNodeName(node: TreeNode): string {\n        return this.labelProvider.getName(node);\n    }\n\n    protected toNodeDescription(node: TreeNode): string {\n        return this.labelProvider.getLongName(node);\n    }\n\n}\nexport namespace TreeWidget {\n    /**\n     * Representation of the tree force update options.\n     */\n    export interface ForceUpdateOptions {\n        /**\n         * Controls whether to force a resize of the widget.\n         */\n        resize: boolean\n    }\n    /**\n     * Representation of a tree node row.\n     */\n    export interface NodeRow {\n        /**\n         * The node row index.\n         */\n        index: number\n        /**\n         * The actual node.\n         */\n        node: TreeNode\n        /**\n         * A root relative number representing the hierarchical depth of the actual node. Root is `0`, its children have `1` and so on.\n         */\n        depth: number\n    }\n    /**\n     * Representation of the tree view properties.\n     */\n    export interface ViewProps {\n        /**\n         * The width property.\n         */\n        width: number\n        /**\n         * The height property.\n         */\n        height: number\n        /**\n         * The scroll to row value.\n         */\n        scrollToRow?: number\n        /**\n         * The list of node rows.\n         */\n        rows: NodeRow[]\n        handleScroll: (info: ScrollParams) => void\n        renderNodeRow: (row: NodeRow) => React.ReactNode\n    }\n    export class View extends React.Component<ViewProps> {\n        list: List | undefined;\n        readonly cache = new CellMeasurerCache({\n            fixedWidth: true\n        });\n        render(): React.ReactNode {\n            const { rows, width, height, scrollToRow, handleScroll } = this.props;\n            return <List\n                ref={list => this.list = (list || undefined)}\n                width={width}\n                height={height}\n                rowCount={rows.length}\n                rowHeight={this.cache.rowHeight}\n                rowRenderer={this.renderTreeRow}\n                scrollToIndex={scrollToRow}\n                onScroll={handleScroll}\n                tabIndex={-1}\n                style={{\n                    overflowY: 'visible',\n                    overflowX: 'visible'\n                }}\n            />;\n        }\n        protected renderTreeRow: ListRowRenderer = ({ key, index, style, parent }) => {\n            const row = this.props.rows[index]!;\n            return <CellMeasurer\n                cache={this.cache}\n                columnIndex={0}\n                key={key}\n                parent={parent}\n                rowIndex={index}>\n                <div key={key} style={style}>{this.props.renderNodeRow(row)}</div>\n            </CellMeasurer>;\n        };\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2017 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { injectable } from 'inversify';\nimport { Event, Emitter, Disposable, DisposableCollection, WaitUntilEvent, Mutable } from '../../common';\n\nexport const Tree = Symbol('Tree');\n\n/**\n * The tree - an abstract data type.\n */\nexport interface Tree extends Disposable {\n    /**\n     * A root node of this tree.\n     * Undefined if there is no root node.\n     * Setting a root node refreshes the tree.\n     */\n    root: TreeNode | undefined;\n    /**\n     * Emit when the tree is changed.\n     */\n    readonly onChanged: Event<void>;\n    /**\n     * Return a node for the given identifier or undefined if such does not exist.\n     */\n    getNode(id: string | undefined): TreeNode | undefined;\n    /**\n     * Return a valid node in this tree matching to the given; otherwise undefined.\n     */\n    validateNode(node: TreeNode | undefined): TreeNode | undefined;\n    /**\n     * Refresh children of the root node.\n     *\n     * Return a valid refreshed composite root or `undefined` if such does not exist.\n     */\n    refresh(): Promise<Readonly<CompositeTreeNode> | undefined>;\n    /**\n     * Refresh children of a node for the give node id if it is valid.\n     *\n     * Return a valid refreshed composite node or `undefined` if such does not exist.\n     */\n    refresh(parent: Readonly<CompositeTreeNode>): Promise<Readonly<CompositeTreeNode> | undefined>;\n    /**\n     * Emit when the children of the given node are refreshed.\n     */\n    readonly onNodeRefreshed: Event<Readonly<CompositeTreeNode> & WaitUntilEvent>;\n}\n\n/**\n * The tree node.\n */\nexport interface TreeNode {\n    /**\n     * An unique id of this node.\n     */\n    readonly id: string;\n    /**\n     * A human-readable name of this tree node.\n     *\n     * @deprecated use `LabelProvider.getName` instead or move this property to your tree node type\n     */\n    readonly name?: string;\n    /**\n     * A css string for this tree node icon.\n     *\n     * @deprecated use `LabelProvider.getIcon` instead or move this property to your tree node type\n     */\n    readonly icon?: string;\n    /**\n     * A human-readable description of this tree node.\n     *\n     * @deprecated use `LabelProvider.getLongName` instead or move this property to your tree node type\n     */\n    readonly description?: string;\n    /**\n     * Test whether this node should be rendered.\n     * If undefined then node will be rendered.\n     */\n    readonly visible?: boolean;\n    /**\n     * A parent node of this tree node.\n     * Undefined if this node is root.\n     */\n    readonly parent: Readonly<CompositeTreeNode> | undefined;\n    /**\n     * A previous sibling of this tree node.\n     */\n    readonly previousSibling?: TreeNode;\n    /**\n     * A next sibling of this tree node.\n     */\n    readonly nextSibling?: TreeNode;\n}\n\nexport namespace TreeNode {\n    export function is(node: Object | undefined): node is TreeNode {\n        return !!node && typeof node === 'object' && 'id' in node && 'parent' in node;\n    }\n\n    export function equals(left: TreeNode | undefined, right: TreeNode | undefined): boolean {\n        return left === right || (!!left && !!right && left.id === right.id);\n    }\n\n    export function isVisible(node: TreeNode | undefined): boolean {\n        return !!node && (node.visible === undefined || node.visible);\n    }\n}\n\n/**\n * The composite tree node.\n */\nexport interface CompositeTreeNode extends TreeNode {\n    /**\n     * Child nodes of this tree node.\n     */\n    children: ReadonlyArray<TreeNode>;\n}\n\nexport namespace CompositeTreeNode {\n    export function is(node: Object | undefined): node is CompositeTreeNode {\n        return !!node && 'children' in node;\n    }\n\n    export function getFirstChild(parent: CompositeTreeNode): TreeNode | undefined {\n        return parent.children[0];\n    }\n\n    export function getLastChild(parent: CompositeTreeNode): TreeNode | undefined {\n        return parent.children[parent.children.length - 1];\n    }\n\n    export function isAncestor(parent: CompositeTreeNode, child: TreeNode | undefined): boolean {\n        if (!child) {\n            return false;\n        }\n        if (TreeNode.equals(parent, child.parent)) {\n            return true;\n        }\n        return isAncestor(parent, child.parent);\n    }\n\n    export function indexOf(parent: CompositeTreeNode, node: TreeNode | undefined): number {\n        if (!node) {\n            return -1;\n        }\n        return parent.children.findIndex(child => TreeNode.equals(node, child));\n    }\n\n    export function addChildren(parent: CompositeTreeNode, children: TreeNode[]): CompositeTreeNode {\n        for (const child of children) {\n            addChild(parent, child);\n        }\n        return parent;\n    }\n\n    export function addChild(parent: CompositeTreeNode, child: TreeNode): CompositeTreeNode {\n        const children = parent.children as TreeNode[];\n        const index = children.findIndex(value => value.id === child.id);\n        if (index !== -1) {\n            children.splice(index, 1, child);\n            setParent(child, index, parent);\n        } else {\n            children.push(child);\n            setParent(child, parent.children.length - 1, parent);\n        }\n        return parent;\n    }\n\n    export function removeChild(parent: CompositeTreeNode, child: TreeNode): void {\n        const children = parent.children as TreeNode[];\n        const index = children.findIndex(value => value.id === child.id);\n        if (index === -1) {\n            return;\n        }\n        children.splice(index, 1);\n        const { previousSibling, nextSibling } = child;\n        if (previousSibling) {\n            Object.assign(previousSibling, { nextSibling });\n        }\n        if (nextSibling) {\n            Object.assign(nextSibling, { previousSibling });\n        }\n    }\n\n    export function setParent(child: TreeNode, index: number, parent: CompositeTreeNode): void {\n        const previousSibling = parent.children[index - 1];\n        const nextSibling = parent.children[index + 1];\n        Object.assign(child, { parent, previousSibling, nextSibling });\n        if (previousSibling) {\n            Object.assign(previousSibling, { nextSibling: child });\n        }\n        if (nextSibling) {\n            Object.assign(nextSibling, { previousSibling: child });\n        }\n    }\n}\n\n/**\n * A default implementation of the tree.\n */\n@injectable()\nexport class TreeImpl implements Tree {\n\n    protected _root: TreeNode | undefined;\n    protected readonly onChangedEmitter = new Emitter<void>();\n    protected readonly onNodeRefreshedEmitter = new Emitter<CompositeTreeNode & WaitUntilEvent>();\n    protected readonly toDispose = new DisposableCollection();\n\n    protected nodes: {\n        [id: string]: Mutable<TreeNode> | undefined\n    } = {};\n\n    constructor() {\n        this.toDispose.push(this.onChangedEmitter);\n        this.toDispose.push(this.onNodeRefreshedEmitter);\n    }\n\n    dispose(): void {\n        this.nodes = {};\n        this.toDispose.dispose();\n    }\n\n    get root(): TreeNode | undefined {\n        return this._root;\n    }\n\n    set root(root: TreeNode | undefined) {\n        this.nodes = {};\n        this._root = root;\n        this.addNode(root);\n        this.refresh();\n    }\n\n    get onChanged(): Event<void> {\n        return this.onChangedEmitter.event;\n    }\n\n    protected fireChanged(): void {\n        this.onChangedEmitter.fire(undefined);\n    }\n\n    get onNodeRefreshed(): Event<CompositeTreeNode & WaitUntilEvent> {\n        return this.onNodeRefreshedEmitter.event;\n    }\n\n    protected async fireNodeRefreshed(parent: CompositeTreeNode): Promise<void> {\n        await WaitUntilEvent.fire(this.onNodeRefreshedEmitter, parent);\n        this.fireChanged();\n    }\n\n    getNode(id: string | undefined): TreeNode | undefined {\n        return id !== undefined ? this.nodes[id] : undefined;\n    }\n\n    validateNode(node: TreeNode | undefined): TreeNode | undefined {\n        const id = !!node ? node.id : undefined;\n        return this.getNode(id);\n    }\n\n    async refresh(raw?: CompositeTreeNode): Promise<CompositeTreeNode | undefined> {\n        const parent = !raw ? this._root : this.validateNode(raw);\n        let result: CompositeTreeNode | undefined;\n        if (CompositeTreeNode.is(parent)) {\n            result = parent;\n            const children = await this.resolveChildren(parent);\n            result = await this.setChildren(parent, children);\n        }\n        this.fireChanged();\n        return result;\n    }\n\n    protected resolveChildren(parent: CompositeTreeNode): Promise<TreeNode[]> {\n        return Promise.resolve(Array.from(parent.children));\n    }\n\n    protected async setChildren(parent: CompositeTreeNode, children: TreeNode[]): Promise<CompositeTreeNode | undefined> {\n        const root = this.getRootNode(parent);\n        if (this.nodes[root.id] && this.nodes[root.id] !== root) {\n            console.error(`Child node '${parent.id}' does not belong to this '${root.id}' tree.`);\n            return undefined;\n        }\n        this.removeNode(parent);\n        parent.children = children;\n        this.addNode(parent);\n        await this.fireNodeRefreshed(parent);\n        return parent;\n    }\n\n    protected removeNode(node: TreeNode | undefined): void {\n        if (CompositeTreeNode.is(node)) {\n            node.children.forEach(child => this.removeNode(child));\n        }\n        if (node) {\n            delete this.nodes[node.id];\n        }\n    }\n\n    protected getRootNode(node: TreeNode): TreeNode {\n        if (node.parent === undefined) {\n            return node;\n        } else {\n            return this.getRootNode(node.parent);\n        }\n    }\n\n    protected addNode(node: TreeNode | undefined): void {\n        if (node) {\n            this.nodes[node.id] = node;\n        }\n        if (CompositeTreeNode.is(node)) {\n            const { children } = node;\n            children.forEach((child, index) => {\n                CompositeTreeNode.setParent(child, index, node);\n                this.addNode(child);\n            });\n        }\n    }\n\n}\n","/********************************************************************************\n * Copyright (C) 2018-2019 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { interfaces, injectable, inject, postConstruct } from 'inversify';\nimport { IIterator, toArray, find, some, every, map } from '@phosphor/algorithm';\nimport {\n    Widget, EXPANSION_TOGGLE_CLASS, COLLAPSED_CLASS, MessageLoop, Message, SplitPanel, BaseWidget,\n    addEventListener, SplitLayout, LayoutItem, PanelLayout, addKeyListener\n} from './widgets';\nimport { Event, Emitter } from '../common/event';\nimport { Deferred } from '../common/promise-util';\nimport { Disposable, DisposableCollection } from '../common/disposable';\nimport { CommandRegistry } from '../common/command';\nimport { MenuModelRegistry, MenuPath, MenuAction } from '../common/menu';\nimport { ApplicationShell, StatefulWidget, SplitPositionHandler, SplitPositionOptions, SIDE_PANEL_TOOLBAR_CONTEXT_MENU } from './shell';\nimport { MAIN_AREA_ID, BOTTOM_AREA_ID } from './shell/theia-dock-panel';\nimport { FrontendApplicationStateService } from './frontend-application-state';\nimport { ContextMenuRenderer, Anchor } from './context-menu-renderer';\nimport { parseCssMagnitude } from './browser';\nimport { WidgetManager } from './widget-manager';\nimport { TabBarToolbarRegistry, TabBarToolbarFactory, TabBarToolbar } from './shell/tab-bar-toolbar';\nimport { Key } from './keys';\nimport { ProgressLocationService } from './progress-location-service';\nimport { ProgressBar } from './progress-bar';\n\nexport interface ViewContainerTitleOptions {\n    label: string;\n    caption?: string;\n    iconClass?: string;\n    closeable?: boolean;\n}\n\n@injectable()\nexport class ViewContainerIdentifier {\n    id: string;\n    progressLocationId?: string;\n}\n\n/**\n * A view container holds an arbitrary number of widgets inside a split panel.\n * Each widget is wrapped in a _part_ that displays the widget title and toolbar\n * and allows to collapse / expand the widget content.\n */\n@injectable()\nexport class ViewContainer extends BaseWidget implements StatefulWidget, ApplicationShell.TrackableWidgetProvider {\n\n    protected panel: SplitPanel;\n    protected attached = new Deferred<void>();\n\n    protected currentPart: ViewContainerPart | undefined;\n\n    @inject(FrontendApplicationStateService)\n    protected readonly applicationStateService: FrontendApplicationStateService;\n\n    @inject(ContextMenuRenderer)\n    protected readonly contextMenuRenderer: ContextMenuRenderer;\n\n    @inject(CommandRegistry)\n    protected readonly commandRegistry: CommandRegistry;\n\n    @inject(MenuModelRegistry)\n    protected readonly menuRegistry: MenuModelRegistry;\n\n    @inject(WidgetManager)\n    protected readonly widgetManager: WidgetManager;\n\n    @inject(SplitPositionHandler)\n    protected readonly splitPositionHandler: SplitPositionHandler;\n\n    @inject(ViewContainerIdentifier)\n    readonly options: ViewContainerIdentifier;\n\n    @inject(TabBarToolbarRegistry)\n    protected readonly toolbarRegistry: TabBarToolbarRegistry;\n\n    @inject(TabBarToolbarFactory)\n    protected readonly toolbarFactory: TabBarToolbarFactory;\n\n    protected readonly onDidChangeTrackableWidgetsEmitter = new Emitter<Widget[]>();\n    readonly onDidChangeTrackableWidgets = this.onDidChangeTrackableWidgetsEmitter.event;\n\n    @inject(ProgressLocationService)\n    protected readonly progressLocationService: ProgressLocationService;\n\n    @postConstruct()\n    protected init(): void {\n        this.id = this.options.id;\n        this.addClass('theia-view-container');\n        const layout = new PanelLayout();\n        this.layout = layout;\n        this.panel = new SplitPanel({\n            layout: new ViewContainerLayout({\n                renderer: SplitPanel.defaultRenderer,\n                orientation: this.orientation,\n                spacing: 2,\n                headerSize: ViewContainerPart.HEADER_HEIGHT,\n                animationDuration: 200\n            }, this.splitPositionHandler)\n        });\n        this.panel.node.tabIndex = -1;\n        layout.addWidget(this.panel);\n\n        const { commandRegistry, menuRegistry, contextMenuRenderer } = this;\n        this.toDispose.pushAll([\n            addEventListener(this.node, 'contextmenu', event => {\n                if (event.button === 2 && every(this.containerLayout.iter(), part => !!part.isHidden)) {\n                    event.stopPropagation();\n                    event.preventDefault();\n                    contextMenuRenderer.render({ menuPath: this.contextMenuPath, anchor: event });\n                }\n            }),\n            commandRegistry.registerCommand({ id: this.globalHideCommandId }, {\n                execute: (anchor: Anchor) => {\n                    const toHide = this.findPartForAnchor(anchor);\n                    if (toHide && toHide.canHide) {\n                        toHide.hide();\n                    }\n                },\n                isVisible: (anchor: Anchor) => {\n                    const toHide = this.findPartForAnchor(anchor);\n                    if (toHide) {\n                        return toHide.canHide && !toHide.isHidden;\n                    } else {\n                        return some(this.containerLayout.iter(), part => !part.isHidden);\n                    }\n                }\n            }),\n            menuRegistry.registerMenuAction([...this.contextMenuPath, '0_global'], {\n                commandId: this.globalHideCommandId,\n                label: 'Hide'\n            }),\n            this.onDidChangeTrackableWidgetsEmitter\n        ]);\n        if (this.options.progressLocationId) {\n            const onProgress = this.progressLocationService.onProgress(this.options.progressLocationId);\n            this.toDispose.push(new ProgressBar({ container: this.node, insertMode: 'prepend' }, onProgress));\n        }\n    }\n\n    protected readonly toDisposeOnCurrentPart = new DisposableCollection();\n\n    protected updateCurrentPart(part?: ViewContainerPart): void {\n        if (part && this.getParts().indexOf(part) !== -1) {\n            this.currentPart = part;\n        }\n        if (this.currentPart && !this.currentPart.isDisposed) {\n            return;\n        }\n        const visibleParts = this.getParts().filter(p => !p.isHidden);\n        const expandedParts = visibleParts.filter(p => !p.collapsed);\n        this.currentPart = expandedParts[0] || visibleParts[0];\n    }\n\n    protected titleOptions: ViewContainerTitleOptions | undefined;\n\n    setTitleOptions(titleOptions: ViewContainerTitleOptions | undefined): void {\n        this.titleOptions = titleOptions;\n        this.updateTitle();\n    }\n\n    protected readonly toDisposeOnUpdateTitle = new DisposableCollection();\n\n    protected updateTitle(): void {\n        this.toDisposeOnUpdateTitle.dispose();\n        this.toDispose.push(this.toDisposeOnUpdateTitle);\n        const title = this.titleOptions;\n        if (!title) {\n            return;\n        }\n        const visibleParts = this.getParts().filter(part => !part.isHidden);\n        this.title.label = title.label;\n        if (visibleParts.length === 1) {\n            const part = visibleParts[0];\n            this.toDisposeOnUpdateTitle.push(part.onTitleChanged(() => this.updateTitle()));\n            const partLabel = part.wrapped.title.label;\n            if (partLabel) {\n                this.title.label += ': ' + partLabel;\n            }\n            part.collapsed = false;\n            part.hideTitle();\n            this.toolbarRegistry.visibleItems(part.wrapped).forEach(partItem => {\n                const id = `__${this.id}_title:${partItem.id}`;\n                if ('command' in partItem) {\n                    const command = this.commandRegistry.getCommand(partItem.id);\n                    this.toDisposeOnUpdateTitle.push(this.commandRegistry.registerCommand({ id }, {\n                        execute: (arg, ...args) => arg instanceof Widget && arg.id === this.id && this.commandRegistry.executeCommand(partItem.command, part.wrapped, ...args),\n                        isEnabled: (arg, ...args) => arg instanceof Widget && arg.id === this.id && this.commandRegistry.isEnabled(partItem.command, part.wrapped, ...args),\n                        isVisible: (arg, ...args) => arg instanceof Widget && arg.id === this.id && this.commandRegistry.isVisible(partItem.command, part.wrapped, ...args),\n                        isToggled: (arg, ...args) => arg instanceof Widget && arg.id === this.id && this.commandRegistry.isToggled(partItem.command, part.wrapped, ...args),\n                    }));\n                    const tooltip = partItem.tooltip || (command && command.label);\n                    const icon = partItem.icon || (command && command.iconClass);\n                    this.toDisposeOnUpdateTitle.push(this.toolbarRegistry.registerItem({ ...partItem, id, command: id, tooltip, icon }));\n                } else {\n                    this.toDisposeOnUpdateTitle.push(this.toolbarRegistry.registerItem({\n                        ...partItem,\n                        isVisible: widget => widget.id === this.id && (!partItem.isVisible || partItem.isVisible(part.wrapped))\n                    }));\n                }\n            });\n        } else {\n            visibleParts.forEach(part => part.showTitle());\n        }\n        const caption = title.caption || title.label;\n        if (caption) {\n            this.title.caption = caption;\n            if (visibleParts.length === 1) {\n                const partCaption = visibleParts[0].wrapped.title.caption || visibleParts[0].wrapped.title.label;\n                if (partCaption) {\n                    this.title.caption += ': ' + partCaption;\n                }\n            }\n        }\n        if (title.iconClass) {\n            this.title.iconClass = title.iconClass;\n        }\n        if (title.closeable !== undefined) {\n            this.title.closable = title.closeable;\n        }\n    }\n\n    protected findPartForAnchor(anchor: Anchor): ViewContainerPart | undefined {\n        const element = document.elementFromPoint(anchor.x, anchor.y);\n        if (element instanceof Element) {\n            const closestPart = ViewContainerPart.closestPart(element);\n            if (closestPart && closestPart.id) {\n                return find(this.containerLayout.iter(), part => part.id === closestPart.id);\n            }\n        }\n        return undefined;\n    }\n\n    protected readonly toRemoveWidgets = new Map<string, DisposableCollection>();\n\n    addWidget(widget: Widget, options?: ViewContainer.Factory.WidgetOptions): Disposable {\n        const existing = this.toRemoveWidgets.get(widget.id);\n        if (existing) {\n            return existing;\n        }\n        const toRemoveWidget = new DisposableCollection();\n        this.toDispose.push(toRemoveWidget);\n        this.toRemoveWidgets.set(widget.id, toRemoveWidget);\n        toRemoveWidget.push(Disposable.create(() => this.toRemoveWidgets.delete(widget.id)));\n\n        const description = this.widgetManager.getDescription(widget);\n        const partId = description ? JSON.stringify(description) : widget.id;\n        const newPart = new ViewContainerPart(widget, partId, this.id, this.toolbarRegistry, this.toolbarFactory, options);\n        this.registerPart(newPart);\n        if (newPart.options && newPart.options.order !== undefined) {\n            const index = this.getParts().findIndex(part => part.options.order === undefined || part.options.order > newPart.options.order!);\n            if (index >= 0) {\n                this.containerLayout.insertWidget(index, newPart);\n            } else {\n                this.containerLayout.addWidget(newPart);\n            }\n        } else {\n            this.containerLayout.addWidget(newPart);\n        }\n        this.refreshMenu(newPart);\n        this.updateTitle();\n        this.updateCurrentPart();\n        this.update();\n        this.fireDidChangeTrackableWidgets();\n        toRemoveWidget.pushAll([\n            newPart,\n            Disposable.create(() => {\n                this.unregisterPart(newPart);\n                if (!newPart.isDisposed) {\n                    this.containerLayout.removeWidget(newPart);\n                }\n                if (!this.isDisposed) {\n                    this.update();\n                    this.updateTitle();\n                    this.updateCurrentPart();\n                    this.fireDidChangeTrackableWidgets();\n                }\n            }),\n            this.registerDND(newPart),\n            newPart.onVisibilityChanged(() => {\n                this.updateTitle();\n                this.updateCurrentPart();\n            }),\n            newPart.onCollapsed(() => {\n                this.containerLayout.updateCollapsed(newPart, this.enableAnimation);\n                this.updateCurrentPart();\n            }),\n            newPart.onContextMenu(event => {\n                if (event.button === 2) {\n                    event.preventDefault();\n                    event.stopPropagation();\n                    this.contextMenuRenderer.render({ menuPath: this.contextMenuPath, anchor: event });\n                }\n            }),\n            newPart.onTitleChanged(() => this.refreshMenu(newPart)),\n            newPart.onDidFocus(() => this.updateCurrentPart(newPart))\n        ]);\n\n        newPart.disposed.connect(() => toRemoveWidget.dispose());\n        return toRemoveWidget;\n    }\n\n    removeWidget(widget: Widget): boolean {\n        const disposable = this.toRemoveWidgets.get(widget.id);\n        if (disposable) {\n            disposable.dispose();\n            return true;\n        }\n        return false;\n    }\n\n    getParts(): ViewContainerPart[] {\n        return this.containerLayout.widgets;\n    }\n\n    getPartFor(widget: Widget): ViewContainerPart | undefined {\n        return this.getParts().find(p => p.wrapped.id === widget.id);\n    }\n\n    get containerLayout(): ViewContainerLayout {\n        return this.panel.layout as ViewContainerLayout;\n    }\n\n    protected get orientation(): SplitLayout.Orientation {\n        return ViewContainer.getOrientation(this.node);\n    }\n\n    protected get enableAnimation(): boolean {\n        return this.applicationStateService.state === 'ready';\n    }\n\n    protected lastVisibleState: ViewContainer.State | undefined;\n\n    storeState(): ViewContainer.State {\n        if (!this.isVisible && this.lastVisibleState) {\n            return this.lastVisibleState;\n        }\n        const parts = this.getParts();\n        const availableSize = this.containerLayout.getAvailableSize();\n        const orientation = this.orientation;\n        const partStates = parts.map(part => {\n            let size = this.containerLayout.getPartSize(part);\n            if (size && size > ViewContainerPart.HEADER_HEIGHT && orientation === 'vertical') {\n                size -= ViewContainerPart.HEADER_HEIGHT;\n            }\n            return <ViewContainerPart.State>{\n                widget: part.wrapped,\n                partId: part.partId,\n                collapsed: part.collapsed,\n                hidden: part.isHidden,\n                relativeSize: size && availableSize ? size / availableSize : undefined\n            };\n        });\n        return { parts: partStates, title: this.titleOptions };\n    }\n\n    /**\n     * The view container restores the visibility, order and relative sizes of contained\n     * widgets, but _not_ the widgets themselves. In case the set of widgets is not fixed,\n     * it should be restored in the specific subclass or in the widget holding the view container.\n     */\n    restoreState(state: ViewContainer.State): void {\n        this.lastVisibleState = state;\n        this.setTitleOptions(state.title);\n        // restore widgets\n        for (const part of state.parts) {\n            if (part.widget) {\n                this.addWidget(part.widget);\n            }\n        }\n        const partStates = state.parts.filter(partState => some(this.containerLayout.iter(), p => p.partId === partState.partId));\n\n        // Reorder the parts according to the stored state\n        for (let index = 0; index < partStates.length; index++) {\n            const partState = partStates[index];\n            const currentIndex = this.getParts().findIndex(p => p.partId === partState.partId);\n            if (currentIndex > index) {\n                this.containerLayout.moveWidget(currentIndex, index, this.getParts()[currentIndex]);\n            }\n        }\n\n        // Restore visibility and collapsed state\n        const parts = this.getParts();\n        for (let index = 0; index < parts.length; index++) {\n            const part = parts[index];\n            const partState = partStates.find(s => part.partId === s.partId);\n            if (partState) {\n                part.collapsed = partState.collapsed || !partState.relativeSize;\n                if (part.canHide) {\n                    part.setHidden(partState.hidden);\n                }\n            } else if (part.canHide) {\n                part.hide();\n            }\n            this.refreshMenu(part);\n        }\n\n        // Restore part sizes\n        this.attached.promise.then(() => {\n            this.containerLayout.setPartSizes(partStates.map(partState => partState.relativeSize));\n        });\n    }\n\n    /**\n     * Register a command to toggle the visibility of the new part.\n     */\n    protected registerPart(toRegister: ViewContainerPart): void {\n        const commandId = this.toggleVisibilityCommandId(toRegister);\n        this.commandRegistry.registerCommand({ id: commandId }, {\n            execute: () => {\n                const toHide = find(this.containerLayout.iter(), part => part.id === toRegister.id);\n                if (toHide) {\n                    toHide.setHidden(!toHide.isHidden);\n                }\n            },\n            isToggled: () => {\n                if (!toRegister.canHide) {\n                    return true;\n                }\n                const widgetToToggle = find(this.containerLayout.iter(), part => part.id === toRegister.id);\n                if (widgetToToggle) {\n                    return !widgetToToggle.isHidden;\n                }\n                return false;\n            },\n            isEnabled: arg => toRegister.canHide && (!this.titleOptions || !(arg instanceof Widget) || (arg instanceof ViewContainer && arg.id === this.id)),\n            isVisible: arg => !this.titleOptions || !(arg instanceof Widget) || (arg instanceof ViewContainer && arg.id === this.id)\n        });\n    }\n\n    /**\n     * Register a menu action to toggle the visibility of the new part.\n     * The menu action is unregistered first to enable refreshing the order of menu actions.\n     */\n    protected refreshMenu(part: ViewContainerPart): void {\n        const commandId = this.toggleVisibilityCommandId(part);\n        this.menuRegistry.unregisterMenuAction(commandId);\n        if (!part.wrapped.title.label) {\n            return;\n        }\n        const action: MenuAction = {\n            commandId: commandId,\n            label: part.wrapped.title.label,\n            order: this.getParts().indexOf(part).toString()\n        };\n        this.menuRegistry.registerMenuAction([...this.contextMenuPath, '1_widgets'], action);\n        if (this.titleOptions) {\n            this.menuRegistry.registerMenuAction([...SIDE_PANEL_TOOLBAR_CONTEXT_MENU, 'navigation'], action);\n        }\n    }\n\n    protected unregisterPart(part: ViewContainerPart): void {\n        const commandId = this.toggleVisibilityCommandId(part);\n        this.commandRegistry.unregisterCommand(commandId);\n        this.menuRegistry.unregisterMenuAction(commandId);\n    }\n\n    protected get contextMenuPath(): MenuPath {\n        return [`${this.id}-context-menu`];\n    }\n\n    protected toggleVisibilityCommandId(part: ViewContainerPart): string {\n        return `${this.id}:toggle-visibility-${part.id}`;\n    }\n\n    protected get globalHideCommandId(): string {\n        return `${this.id}:toggle-visibility`;\n    }\n\n    protected moveBefore(toMovedId: string, moveBeforeThisId: string): void {\n        const parts = this.getParts();\n        const toMoveIndex = parts.findIndex(part => part.id === toMovedId);\n        const moveBeforeThisIndex = parts.findIndex(part => part.id === moveBeforeThisId);\n        if (toMoveIndex >= 0 && moveBeforeThisIndex >= 0) {\n            this.containerLayout.moveWidget(toMoveIndex, moveBeforeThisIndex, parts[toMoveIndex]);\n            for (let index = Math.min(toMoveIndex, moveBeforeThisIndex); index < parts.length; index++) {\n                this.refreshMenu(parts[index]);\n                this.activate();\n            }\n        }\n    }\n\n    getTrackableWidgets(): Widget[] {\n        return this.getParts().map(w => w.wrapped);\n    }\n\n    protected fireDidChangeTrackableWidgets(): void {\n        this.onDidChangeTrackableWidgetsEmitter.fire(this.getTrackableWidgets());\n    }\n\n    activateWidget(id: string): Widget | undefined {\n        const part = this.revealPart(id);\n        if (!part) {\n            return undefined;\n        }\n        this.updateCurrentPart(part);\n        return part.wrapped;\n    }\n\n    revealWidget(id: string): Widget | undefined {\n        const part = this.revealPart(id);\n        return part && part.wrapped;\n    }\n\n    protected revealPart(id: string): ViewContainerPart | undefined {\n        const part = this.getParts().find(p => p.wrapped.id === id);\n        if (!part) {\n            return undefined;\n        }\n        part.setHidden(false);\n        return part;\n    }\n\n    protected onActivateRequest(msg: Message): void {\n        super.onActivateRequest(msg);\n        if (this.currentPart) {\n            this.currentPart.activate();\n        } else {\n            this.panel.node.focus({ preventScroll: true });\n        }\n    }\n\n    protected onAfterAttach(msg: Message): void {\n        const orientation = this.orientation;\n        this.containerLayout.orientation = orientation;\n        if (orientation === 'horizontal') {\n            for (const part of this.getParts()) {\n                part.collapsed = false;\n            }\n        }\n        super.onAfterAttach(msg);\n        requestAnimationFrame(() => this.attached.resolve());\n    }\n\n    protected onBeforeHide(msg: Message): void {\n        super.onBeforeHide(msg);\n        this.lastVisibleState = this.storeState();\n    }\n\n    protected onAfterShow(msg: Message): void {\n        super.onAfterShow(msg);\n        this.lastVisibleState = undefined;\n    }\n\n    protected draggingPart: ViewContainerPart | undefined;\n\n    protected registerDND(part: ViewContainerPart): Disposable {\n        part['header'].draggable = true;\n        const style = (event: DragEvent) => {\n            if (!this.draggingPart) {\n                return;\n            }\n            event.preventDefault();\n            const enclosingPartNode = ViewContainerPart.closestPart(event.target);\n            if (enclosingPartNode && enclosingPartNode !== this.draggingPart.node) {\n                enclosingPartNode.classList.add('drop-target');\n            }\n        };\n        const unstyle = (event: DragEvent) => {\n            if (!this.draggingPart) {\n                return;\n            }\n            event.preventDefault();\n            const enclosingPartNode = ViewContainerPart.closestPart(event.target);\n            if (enclosingPartNode) {\n                enclosingPartNode.classList.remove('drop-target');\n            }\n        };\n        return new DisposableCollection(\n            addEventListener(part['header'], 'dragstart', event => {\n                const { dataTransfer } = event;\n                if (dataTransfer) {\n                    this.draggingPart = part;\n                    dataTransfer.effectAllowed = 'move';\n                    dataTransfer.setData('view-container-dnd', part.id);\n                    const dragImage = document.createElement('div');\n                    dragImage.classList.add('theia-view-container-drag-image');\n                    dragImage.innerText = part.wrapped.title.label;\n                    document.body.appendChild(dragImage);\n                    dataTransfer.setDragImage(dragImage, -10, -10);\n                    setTimeout(() => document.body.removeChild(dragImage), 0);\n                }\n            }, false),\n            addEventListener(part.node, 'dragend', () => this.draggingPart = undefined, false),\n            addEventListener(part.node, 'dragover', style, false),\n            addEventListener(part.node, 'dragleave', unstyle, false),\n            addEventListener(part.node, 'drop', event => {\n                const { dataTransfer } = event;\n                if (dataTransfer) {\n                    const moveId = dataTransfer.getData('view-container-dnd');\n                    if (moveId && moveId !== part.id) {\n                        this.moveBefore(moveId, part.id);\n                    }\n                    unstyle(event);\n                }\n            }, false)\n        );\n    }\n\n}\n\nexport namespace ViewContainer {\n\n    export const Factory = Symbol('ViewContainerFactory');\n    export interface Factory {\n        (options: ViewContainerIdentifier): ViewContainer;\n    }\n\n    export namespace Factory {\n\n        export interface WidgetOptions {\n            readonly order?: number;\n            readonly weight?: number;\n            readonly initiallyCollapsed?: boolean;\n            readonly canHide?: boolean;\n            readonly initiallyHidden?: boolean;\n        }\n\n        export interface WidgetDescriptor {\n            readonly widget: Widget | interfaces.ServiceIdentifier<Widget>;\n            readonly options?: WidgetOptions;\n        }\n\n    }\n\n    export interface State {\n        title?: ViewContainerTitleOptions;\n        parts: ViewContainerPart.State[]\n    }\n\n    export function getOrientation(node: HTMLElement): 'horizontal' | 'vertical' {\n        if (node.closest(`#${MAIN_AREA_ID}`) || node.closest(`#${BOTTOM_AREA_ID}`)) {\n            return 'horizontal';\n        }\n        return 'vertical';\n    }\n}\n\n/**\n * Wrapper around a widget held by a view container. Adds a header to display the\n * title, toolbar, and collapse / expand handle.\n */\nexport class ViewContainerPart extends BaseWidget {\n\n    protected readonly header: HTMLElement;\n    protected readonly body: HTMLElement;\n    protected readonly collapsedEmitter = new Emitter<boolean>();\n    protected readonly contextMenuEmitter = new Emitter<MouseEvent>();\n    /**\n     * @deprecated since 0.11.0, use `onDidChangeVisibility` instead\n     */\n    readonly onVisibilityChanged = this.onDidChangeVisibility;\n    protected readonly onTitleChangedEmitter = new Emitter<void>();\n    readonly onTitleChanged = this.onTitleChangedEmitter.event;\n    protected readonly onDidFocusEmitter = new Emitter<this>();\n    readonly onDidFocus = this.onDidFocusEmitter.event;\n\n    protected _collapsed: boolean;\n\n    uncollapsedSize: number | undefined;\n    animatedSize: number | undefined;\n\n    protected readonly toNoDisposeWrapped: Disposable;\n\n    constructor(\n        readonly wrapped: Widget,\n        readonly partId: string,\n        viewContainerId: string,\n        protected readonly toolbarRegistry: TabBarToolbarRegistry,\n        protected readonly toolbarFactory: TabBarToolbarFactory,\n        readonly options: ViewContainer.Factory.WidgetOptions = {}\n    ) {\n        super();\n        wrapped.parent = this;\n        wrapped.disposed.connect(() => this.dispose());\n        this.id = `${viewContainerId}--${wrapped.id}`;\n        this.addClass('part');\n\n        const fireTitleChanged = () => this.onTitleChangedEmitter.fire(undefined);\n        this.wrapped.title.changed.connect(fireTitleChanged);\n        this.toDispose.push(Disposable.create(() => this.wrapped.title.changed.disconnect(fireTitleChanged)));\n\n        const { header, body, disposable } = this.createContent();\n        this.header = header;\n        this.body = body;\n\n        this.toNoDisposeWrapped = this.toDispose.push(wrapped);\n        this.toDispose.pushAll([\n            disposable,\n            this.collapsedEmitter,\n            this.contextMenuEmitter,\n            this.onTitleChangedEmitter,\n            this.registerContextMenu(),\n            this.onDidFocusEmitter,\n            // focus event does not bubble, capture it\n            addEventListener(this.node, 'focus', () => this.onDidFocusEmitter.fire(this), true)\n        ]);\n        this.scrollOptions = {\n            suppressScrollX: true,\n            minScrollbarLength: 35\n        };\n        this.collapsed = !!options.initiallyCollapsed;\n        if (options.initiallyHidden && this.canHide) {\n            this.hide();\n        }\n    }\n\n    get collapsed(): boolean {\n        return this._collapsed;\n    }\n\n    set collapsed(collapsed: boolean) {\n        // Cannot collapse/expand if the orientation of the container is `horizontal`.\n        const orientation = ViewContainer.getOrientation(this.node);\n        if (this._collapsed === collapsed || orientation === 'horizontal' && collapsed) {\n            return;\n        }\n        this._collapsed = collapsed;\n        if (collapsed && this.wrapped.node.contains(document.activeElement)) {\n            this.header.focus();\n        }\n        this.wrapped.setHidden(collapsed);\n        const toggleIcon = this.header.querySelector(`span.${EXPANSION_TOGGLE_CLASS}`);\n        if (toggleIcon) {\n            if (collapsed) {\n                toggleIcon.classList.add(COLLAPSED_CLASS);\n            } else {\n                toggleIcon.classList.remove(COLLAPSED_CLASS);\n            }\n        }\n        this.update();\n        this.collapsedEmitter.fire(collapsed);\n    }\n\n    setHidden(hidden: boolean): void {\n        if (!this.canHide) {\n            return;\n        }\n        super.setHidden(hidden);\n        if (!this.isHidden) {\n            this.collapsed = false;\n        }\n    }\n\n    get canHide(): boolean {\n        return this.options.canHide === undefined || this.options.canHide;\n    }\n\n    get onCollapsed(): Event<boolean> {\n        return this.collapsedEmitter.event;\n    }\n\n    get onContextMenu(): Event<MouseEvent> {\n        return this.contextMenuEmitter.event;\n    }\n\n    get minSize(): number {\n        const style = getComputedStyle(this.body);\n        if (ViewContainer.getOrientation(this.node) === 'horizontal') {\n            return parseCssMagnitude(style.minWidth, 0);\n        } else {\n            return parseCssMagnitude(style.minHeight, 0);\n        }\n    }\n\n    protected readonly toShowHeader = new DisposableCollection();\n    showTitle(): void {\n        this.toShowHeader.dispose();\n    }\n\n    hideTitle(): void {\n        if (this.titleHidden) {\n            return;\n        }\n        const display = this.header.style.display;\n        const height = this.body.style.height;\n        this.body.style.height = '100%';\n        this.header.style.display = 'none';\n        this.toShowHeader.push(Disposable.create(() => {\n            this.header.style.display = display;\n            this.body.style.height = height;\n        }));\n    }\n\n    get titleHidden(): boolean {\n        return !this.toShowHeader.disposed || this.collapsed;\n    }\n\n    protected getScrollContainer(): HTMLElement {\n        return this.body;\n    }\n\n    protected registerContextMenu(): Disposable {\n        return new DisposableCollection(\n            addEventListener(this.header, 'contextmenu', event => {\n                this.contextMenuEmitter.fire(event);\n            })\n        );\n    }\n\n    protected createContent(): { header: HTMLElement, body: HTMLElement, disposable: Disposable } {\n        const disposable = new DisposableCollection();\n        const { header, disposable: headerDisposable } = this.createHeader();\n        const body = document.createElement('div');\n        body.classList.add('body');\n        this.node.appendChild(header);\n        this.node.appendChild(body);\n        disposable.push(headerDisposable);\n        return {\n            header,\n            body,\n            disposable,\n        };\n    }\n\n    protected createHeader(): { header: HTMLElement, disposable: Disposable } {\n        const disposable = new DisposableCollection();\n        const header = document.createElement('div');\n        header.tabIndex = 0;\n        header.classList.add('theia-header', 'header');\n        disposable.push(addEventListener(header, 'click', event => {\n            if (this.toolbar && this.toolbar.shouldHandleMouseEvent(event)) {\n                return;\n            }\n            this.collapsed = !this.collapsed;\n        }));\n        disposable.push(addKeyListener(header, Key.ARROW_LEFT, () => this.collapsed = true));\n        disposable.push(addKeyListener(header, Key.ARROW_RIGHT, () => this.collapsed = false));\n        disposable.push(addKeyListener(header, Key.ENTER, () => this.collapsed = !this.collapsed));\n\n        const toggleIcon = document.createElement('span');\n        toggleIcon.classList.add(EXPANSION_TOGGLE_CLASS);\n        if (this.collapsed) {\n            toggleIcon.classList.add(COLLAPSED_CLASS);\n        }\n        header.appendChild(toggleIcon);\n\n        const title = document.createElement('span');\n        title.classList.add('label', 'noselect');\n        const updateTitle = () => title.innerText = this.wrapped.title.label;\n        const updateCaption = () => title.title = this.wrapped.title.caption || this.wrapped.title.label;\n        updateTitle();\n        updateCaption();\n        disposable.pushAll([\n            this.onTitleChanged(updateTitle),\n            this.onTitleChanged(updateCaption)\n        ]);\n        header.appendChild(title);\n        return {\n            header,\n            disposable\n        };\n    }\n\n    protected toolbar: TabBarToolbar | undefined;\n\n    protected readonly toHideToolbar = new DisposableCollection();\n    hideToolbar(): void {\n        this.toHideToolbar.dispose();\n    }\n\n    showToolbar(): void {\n        if (this.toolbarHidden) {\n            return;\n        }\n        this.toDisposeOnDetach.push(this.toHideToolbar);\n\n        const toolbar = this.toolbarFactory();\n        toolbar.addClass('theia-view-container-part-title');\n        this.toHideToolbar.push(toolbar);\n\n        Widget.attach(toolbar, this.header);\n        this.toHideToolbar.push(Disposable.create(() => Widget.detach(toolbar)));\n\n        this.toolbar = toolbar;\n        this.toHideToolbar.push(Disposable.create(() => this.toolbar = undefined));\n\n        const items = this.toolbarRegistry.visibleItems(this.wrapped);\n        toolbar.updateItems(items, this.wrapped);\n    }\n\n    get toolbarHidden(): boolean {\n        return !this.toHideToolbar.disposed || this.titleHidden;\n    }\n\n    protected onResize(msg: Widget.ResizeMessage): void {\n        if (this.wrapped.isAttached && !this.collapsed) {\n            MessageLoop.sendMessage(this.wrapped, Widget.ResizeMessage.UnknownSize);\n        }\n        super.onResize(msg);\n    }\n\n    protected onUpdateRequest(msg: Message): void {\n        if (this.collapsed) {\n            this.hideToolbar();\n        } else if (this.node.matches(':hover')) {\n            this.showToolbar();\n        }\n        if (this.wrapped.isAttached && !this.collapsed) {\n            MessageLoop.sendMessage(this.wrapped, msg);\n        }\n        super.onUpdateRequest(msg);\n    }\n\n    protected onBeforeAttach(msg: Message): void {\n        super.onBeforeAttach(msg);\n        this.addEventListener(this.node, 'mouseenter', () => this.showToolbar());\n        this.addEventListener(this.node, 'mouseleave', () => this.hideToolbar());\n    }\n\n    protected onAfterAttach(msg: Message): void {\n        if (!this.wrapped.isAttached) {\n            MessageLoop.sendMessage(this.wrapped, Widget.Msg.BeforeAttach);\n            // eslint-disable-next-line no-null/no-null\n            this.body.insertBefore(this.wrapped.node, null);\n            MessageLoop.sendMessage(this.wrapped, Widget.Msg.AfterAttach);\n        }\n        super.onAfterAttach(msg);\n    }\n\n    protected onBeforeDetach(msg: Message): void {\n        super.onBeforeDetach(msg);\n        if (this.wrapped.isAttached) {\n            MessageLoop.sendMessage(this.wrapped, Widget.Msg.BeforeDetach);\n            this.wrapped.node.parentNode!.removeChild(this.wrapped.node);\n            MessageLoop.sendMessage(this.wrapped, Widget.Msg.AfterDetach);\n        }\n    }\n\n    protected onBeforeShow(msg: Message): void {\n        if (this.wrapped.isAttached && !this.collapsed) {\n            MessageLoop.sendMessage(this.wrapped, msg);\n        }\n        super.onBeforeShow(msg);\n    }\n\n    protected onAfterShow(msg: Message): void {\n        super.onAfterShow(msg);\n        if (this.wrapped.isAttached && !this.collapsed) {\n            MessageLoop.sendMessage(this.wrapped, msg);\n        }\n    }\n\n    protected onBeforeHide(msg: Message): void {\n        if (this.wrapped.isAttached && !this.collapsed) {\n            MessageLoop.sendMessage(this.wrapped, msg);\n        }\n        super.onBeforeShow(msg);\n    }\n\n    protected onAfterHide(msg: Message): void {\n        super.onAfterHide(msg);\n        if (this.wrapped.isAttached && !this.collapsed) {\n            MessageLoop.sendMessage(this.wrapped, msg);\n        }\n    }\n\n    protected onChildRemoved(msg: Widget.ChildMessage): void {\n        super.onChildRemoved(msg);\n        // if wrapped is not disposed, but detached then we should not dispose it, but only get rid of this part\n        this.toNoDisposeWrapped.dispose();\n        this.dispose();\n    }\n\n    protected onActivateRequest(msg: Message): void {\n        super.onActivateRequest(msg);\n        if (this.collapsed) {\n            this.header.focus();\n        } else {\n            this.wrapped.activate();\n        }\n    }\n\n}\n\nexport namespace ViewContainerPart {\n\n    /**\n     * Make sure to adjust the `line-height` of the `.theia-view-container .part > .header` CSS class when modifying this, and vice versa.\n     */\n    export const HEADER_HEIGHT = 22;\n\n    export interface State {\n        widget?: Widget\n        partId: string;\n        collapsed: boolean;\n        hidden: boolean;\n        relativeSize?: number;\n    }\n\n    export function closestPart(element: Element | EventTarget | null, selector: string = 'div.part'): Element | undefined {\n        if (element instanceof Element) {\n            const part = element.closest(selector);\n            if (part instanceof Element) {\n                return part;\n            }\n        }\n        return undefined;\n    }\n}\n\nexport class ViewContainerLayout extends SplitLayout {\n\n    constructor(protected options: ViewContainerLayout.Options, protected readonly splitPositionHandler: SplitPositionHandler) {\n        super(options);\n    }\n\n    protected get items(): ReadonlyArray<LayoutItem & ViewContainerLayout.Item> {\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        return (this as any)._items as Array<LayoutItem & ViewContainerLayout.Item>;\n    }\n\n    iter(): IIterator<ViewContainerPart> {\n        return map(this.items, item => item.widget);\n    }\n\n    get widgets(): ViewContainerPart[] {\n        return toArray(this.iter());\n    }\n\n    moveWidget(fromIndex: number, toIndex: number, widget: Widget): void {\n        const ref = this.widgets[toIndex < fromIndex ? toIndex : toIndex + 1];\n        super.moveWidget(fromIndex, toIndex, widget);\n        if (ref) {\n            this.parent!.node.insertBefore(this.handles[toIndex], ref.node);\n        } else {\n            this.parent!.node.appendChild(this.handles[toIndex]);\n        }\n        MessageLoop.sendMessage(widget, Widget.Msg.BeforeDetach);\n        this.parent!.node.removeChild(widget.node);\n        MessageLoop.sendMessage(widget, Widget.Msg.AfterDetach);\n\n        MessageLoop.sendMessage(widget, Widget.Msg.BeforeAttach);\n        this.parent!.node.insertBefore(widget.node, this.handles[toIndex]);\n        MessageLoop.sendMessage(widget, Widget.Msg.AfterAttach);\n    }\n\n    getPartSize(part: ViewContainerPart): number | undefined {\n        if (part.collapsed || part.isHidden) {\n            return part.uncollapsedSize;\n        }\n        if (this.orientation === 'horizontal') {\n            return part.node.offsetWidth;\n        } else {\n            return part.node.offsetHeight;\n        }\n    }\n\n    /**\n     * Set the sizes of the view container parts according to the given weights\n     * by moving the split handles. This is similar to `setRelativeSizes` defined\n     * in `SplitLayout`, but here we properly consider the collapsed / expanded state.\n     */\n    setPartSizes(weights: (number | undefined)[]): void {\n        const parts = this.widgets;\n        const availableSize = this.getAvailableSize();\n\n        // Sum up the weights of visible parts\n        let totalWeight = 0;\n        let weightCount = 0;\n        for (let index = 0; index < weights.length && index < parts.length; index++) {\n            const part = parts[index];\n            const weight = weights[index];\n            if (weight && !part.isHidden && !part.collapsed) {\n                totalWeight += weight;\n                weightCount++;\n            }\n        }\n        if (weightCount === 0 || availableSize === 0) {\n            return;\n        }\n\n        // Add the average weight for visible parts without weight\n        const averageWeight = totalWeight / weightCount;\n        for (let index = 0; index < weights.length && index < parts.length; index++) {\n            const part = parts[index];\n            const weight = weights[index];\n            if (!weight && !part.isHidden && !part.collapsed) {\n                totalWeight += averageWeight;\n            }\n        }\n\n        // Apply the weights to compute actual sizes\n        let position = 0;\n        for (let index = 0; index < weights.length && index < parts.length - 1; index++) {\n            const part = parts[index];\n            if (!part.isHidden) {\n                if (this.orientation === 'vertical') {\n                    position += this.options.headerSize;\n                }\n                const weight = weights[index];\n                if (part.collapsed) {\n                    if (weight) {\n                        part.uncollapsedSize = weight / totalWeight * availableSize;\n                    }\n                } else {\n                    let contentSize = (weight || averageWeight) / totalWeight * availableSize;\n                    const minSize = part.minSize;\n                    if (contentSize < minSize) {\n                        contentSize = minSize;\n                    }\n                    position += contentSize;\n                }\n                this.setHandlePosition(index, position);\n                position += this.spacing;\n            }\n        }\n    }\n\n    /**\n     * Determine the size of the split panel area that is available for widget content,\n     * i.e. excluding part headers and split handles.\n     */\n    getAvailableSize(): number {\n        if (!this.parent || !this.parent.isAttached) {\n            return 0;\n        }\n        const parts = this.widgets;\n        const visiblePartCount = parts.filter(part => !part.isHidden).length;\n        let availableSize: number;\n        if (this.orientation === 'horizontal') {\n            availableSize = this.parent.node.offsetWidth;\n        } else {\n            availableSize = this.parent.node.offsetHeight;\n            availableSize -= visiblePartCount * this.options.headerSize;\n        }\n        availableSize -= (visiblePartCount - 1) * this.spacing;\n        if (availableSize < 0) {\n            return 0;\n        }\n        return availableSize;\n    }\n\n    /**\n     * Update a view container part that has been collapsed or expanded. The transition\n     * to the new state is animated.\n     */\n    updateCollapsed(part: ViewContainerPart, enableAnimation: boolean): void {\n        const index = this.items.findIndex(item => item.widget === part);\n        if (index < 0 || !this.parent || part.isHidden) {\n            return;\n        }\n\n        // Do not store the height of the \"stretched item\". Otherwise, we mess up the \"hint height\".\n        // Store the height only if there are other expanded items.\n        const currentSize = this.orientation === 'horizontal' ? part.node.offsetWidth : part.node.offsetHeight;\n        if (part.collapsed && this.items.some(item => !item.widget.collapsed && !item.widget.isHidden)) {\n            part.uncollapsedSize = currentSize;\n        }\n\n        if (!enableAnimation || this.options.animationDuration <= 0) {\n            MessageLoop.postMessage(this.parent!, Widget.Msg.FitRequest);\n            return;\n        }\n        let startTime: number | undefined = undefined;\n        const duration = this.options.animationDuration;\n        const direction = part.collapsed ? 'collapse' : 'expand';\n        let fullSize: number;\n        if (direction === 'collapse') {\n            fullSize = currentSize - this.options.headerSize;\n        } else {\n            fullSize = Math.max((part.uncollapsedSize || 0) - this.options.headerSize, part.minSize);\n            if (this.items.filter(item => !item.widget.collapsed && !item.widget.isHidden).length === 1) {\n                // Expand to full available size\n                fullSize = Math.max(fullSize, this.getAvailableSize());\n            }\n        }\n\n        // The update function is called on every animation frame until the predefined duration has elapsed.\n        const updateFunc = (time: number) => {\n            if (startTime === undefined) {\n                startTime = time;\n            }\n            if (time - startTime < duration) {\n                // Render an intermediate state for the animation\n                const t = this.tween((time - startTime) / duration);\n                if (direction === 'collapse') {\n                    part.animatedSize = (1 - t) * fullSize;\n                } else {\n                    part.animatedSize = t * fullSize;\n                }\n                requestAnimationFrame(updateFunc);\n            } else {\n                // The animation is finished\n                if (direction === 'collapse') {\n                    part.animatedSize = undefined;\n                } else {\n                    part.animatedSize = fullSize;\n                    // Request another frame to reset the part to variable size\n                    requestAnimationFrame(() => {\n                        part.animatedSize = undefined;\n                        MessageLoop.sendMessage(this.parent!, Widget.Msg.FitRequest);\n                    });\n                }\n            }\n            MessageLoop.sendMessage(this.parent!, Widget.Msg.FitRequest);\n        };\n        requestAnimationFrame(updateFunc);\n    }\n\n    protected onFitRequest(msg: Message): void {\n        for (const part of this.widgets) {\n            const style = part.node.style;\n            if (part.animatedSize !== undefined) {\n                // The part size has been fixed for animating the transition to collapsed / expanded state\n                const fixedSize = `${this.options.headerSize + part.animatedSize}px`;\n                style.minHeight = fixedSize;\n                style.maxHeight = fixedSize;\n            } else if (part.collapsed) {\n                // The part size is fixed to the header size\n                const fixedSize = `${this.options.headerSize}px`;\n                style.minHeight = fixedSize;\n                style.maxHeight = fixedSize;\n            } else {\n                const minSize = `${this.options.headerSize + part.minSize}px`;\n                style.minHeight = minSize;\n                // eslint-disable-next-line no-null/no-null\n                style.maxHeight = null;\n            }\n        }\n        super.onFitRequest(msg);\n    }\n\n    /**\n     * Sinusoidal tween function for smooth animation.\n     */\n    protected tween(t: number): number {\n        return 0.5 * (1 - Math.cos(Math.PI * t));\n    }\n\n    setHandlePosition(index: number, position: number): Promise<void> {\n        const options: SplitPositionOptions = {\n            referenceWidget: this.widgets[index],\n            duration: 0\n        };\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        return this.splitPositionHandler.setSplitHandlePosition(this.parent as SplitPanel, index, position, options) as Promise<any>;\n    }\n\n}\n\nexport namespace ViewContainerLayout {\n\n    export interface Options extends SplitLayout.IOptions {\n        headerSize: number;\n        animationDuration: number;\n    }\n\n    export interface Item {\n        readonly widget: ViewContainerPart;\n    }\n\n}\n","/********************************************************************************\n * Copyright (C) 2019 Ericsson and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\n/**\n * Namespace for the decoration data and the styling refinements for the decorated widgets.\n */\nexport namespace WidgetDecoration {\n\n    /**\n     * CSS styles for the decorators.\n     */\n    export namespace Styles {\n        export const CAPTION_HIGHLIGHT_CLASS = 'theia-caption-highlight';\n        export const CAPTION_PREFIX_CLASS = 'theia-caption-prefix';\n        export const CAPTION_SUFFIX_CLASS = 'theia-caption-suffix';\n        export const ICON_WRAPPER_CLASS = 'theia-icon-wrapper';\n        export const DECORATOR_SIZE_CLASS = 'theia-decorator-size';\n        export const DECORATOR_SIDEBAR_SIZE_CLASS = 'theia-decorator-sidebar-size';\n        export const TOP_RIGHT_CLASS = 'theia-top-right';\n        export const BOTTOM_RIGHT_CLASS = 'theia-bottom-right';\n        export const BOTTOM_RIGHT_SIDEBAR_CLASS = 'theia-bottom-right-sidebar';\n        export const BOTTOM_LEFT_CLASS = 'theia-bottom-left';\n        export const TOP_LEFT_CLASS = 'theia-top-left';\n    }\n    /**\n     * For the sake of simplicity, we have merged the `font-style`, `font-weight`, and the `text-decoration` together.\n     */\n    export type FontStyle = 'normal' | 'bold' | 'italic' | 'oblique' | 'underline' | 'line-through';\n    /**\n     * A string that could be:\n     *\n     *  - one of the browser colors, (E.g.: `blue`, `red`, `magenta`),\n     *  - the case insensitive hexadecimal color code, (for instance, `#ee82ee`, `#20B2AA`, `#f09` ), or\n     *  - either the `rgb()` or the `rgba()` functions.\n     *\n     * For more details, see: https://developer.mozilla.org/en-US/docs/Web/CSS/color_value.\n     *\n     * Note, it is highly recommended to use one of the predefined colors of Theia, so the desired color will\n     * look nice with both the `light` and the `dark` theme too.\n     */\n    export type Color = string;\n    /**\n     * Encapsulates styling information of the font.\n     */\n    export interface FontData {\n        /**\n         * Zero to any font style.\n         */\n        readonly style?: FontStyle | FontStyle[];\n        /**\n         * The color of the font.\n         */\n        readonly color?: Color;\n    }\n    /**\n     * Arbitrary information that has to be shown either before or after the caption as a prefix or a suffix.\n     */\n    export interface CaptionAffix {\n        /**\n         * The text content of the prefix or the suffix.\n         */\n        readonly data: string;\n        /**\n         * Font data for customizing the prefix of the suffix.\n         */\n        readonly fontData?: FontData;\n    }\n    export interface BaseTailDecoration {\n        /**\n         * Optional tooltip for the tail decoration.\n         */\n        readonly tooltip?: string;\n    }\n    /**\n     * Unlike caption suffixes, tail decorations appears right-aligned after the caption and the caption suffixes (is any).\n     */\n    export interface TailDecoration extends BaseTailDecoration {\n        /**\n         * The text content of the tail decoration.\n         */\n        readonly data: string;\n        /**\n         * Font data for customizing the content.\n         */\n        readonly fontData?: FontData;\n    }\n    export interface TailDecorationIcon extends BaseTailDecoration {\n        /**\n         * This should be the name of the Font Awesome icon with out the `fa fa-` prefix, just the name, for instance `paw`.\n         * For the existing icons, see here: https://fontawesome.com/v4.7.0/icons/.\n         */\n        readonly icon: string;\n        /**\n         * The color of the icon.\n         */\n        readonly color?: Color;\n    }\n    export interface TailDecorationIconClass extends BaseTailDecoration {\n        /**\n         * This should be the entire Font Awesome class array, for instance ['fa', 'fa-paw']\n         * For the existing icons, see here: https://fontawesome.com/v4.7.0/icons/.\n         */\n        readonly iconClass: string[];\n        /**\n         * The color of the icon.\n         */\n        readonly color?: Color;\n    }\n    /**\n     * Enumeration for the quadrant to overlay the image on.\n     */\n    export enum IconOverlayPosition {\n        /**\n         * Overlays the top right quarter of the original image.\n         */\n        TOP_RIGHT,\n        /**\n         * Overlays the bottom right of the original image.\n         */\n        BOTTOM_RIGHT,\n        /**\n         * Overlays the bottom left segment of the original image.\n         */\n        BOTTOM_LEFT,\n        /**\n         * Occupies the top left quarter of the original icon.\n         */\n        TOP_LEFT\n    }\n    export namespace IconOverlayPosition {\n        /**\n         * Returns with the CSS class style for the enum.\n         */\n        export function getStyle(position: IconOverlayPosition, inSideBar?: boolean): string {\n            switch (position) {\n                case IconOverlayPosition.TOP_RIGHT:\n                    return WidgetDecoration.Styles.TOP_RIGHT_CLASS;\n                case IconOverlayPosition.BOTTOM_RIGHT:\n                    return inSideBar ? WidgetDecoration.Styles.BOTTOM_RIGHT_SIDEBAR_CLASS : WidgetDecoration.Styles.BOTTOM_RIGHT_CLASS;\n                case IconOverlayPosition.BOTTOM_LEFT:\n                    return WidgetDecoration.Styles.BOTTOM_LEFT_CLASS;\n                case IconOverlayPosition.TOP_LEFT:\n                    return WidgetDecoration.Styles.TOP_LEFT_CLASS;\n            }\n        }\n    }\n    /**\n     * A shape that can be optionally rendered behind the overlay icon. Can be used to further refine colors.\n     */\n    export interface IconOverlayBackground {\n        /**\n         * Either `circle` or `square`.\n         */\n        readonly shape: 'circle' | 'square';\n        /**\n         * The color of the background shape.\n         */\n        readonly color?: Color;\n    }\n    /**\n     * Has not effect if the widget being decorated has no associated icon.\n     */\n    export interface BaseOverlay {\n        /**\n         * The position where the decoration will be placed on the top of the original icon.\n         */\n        readonly position: IconOverlayPosition;\n        /**\n         * The color of the overlaying icon. If not specified, then the default icon color will be used.\n         */\n        readonly color?: Color;\n        /**\n         * The optional background color of the overlay icon.\n         */\n        readonly background?: IconOverlayBackground;\n    }\n    export interface IconOverlay extends BaseOverlay {\n        /**\n         * This should be the name of the Font Awesome icon with out the `fa fa-` prefix, just the name, for instance `paw`.\n         * For the existing icons, see here: https://fontawesome.com/v4.7.0/icons/.\n         */\n        readonly icon: string;\n    }\n    export interface IconClassOverlay extends BaseOverlay {\n        /**\n         * This should be the entire Font Awesome class array, for instance ['fa', 'fa-paw']\n         * For the existing icons, see here: https://fontawesome.com/v4.7.0/icons/.\n         */\n        readonly iconClass: string[];\n    }\n    /**\n     * The caption highlighting with the highlighted ranges and an optional background color.\n     */\n    export interface CaptionHighlight {\n        /**\n         * The ranges to highlight in the caption.\n         */\n        readonly ranges: CaptionHighlight.Range[];\n        /**\n         * The optional color of the text data that is being highlighted. Falls back to the default `mark` color values defined under a widget segment class.\n         */\n        readonly color?: Color;\n        /**\n         * The optional background color of the text data that is being highlighted.\n         */\n        readonly backgroundColor?: Color;\n    }\n    export namespace CaptionHighlight {\n        /**\n         * A pair of offset and length that has to be highlighted as a range.\n         */\n        export interface Range {\n            /**\n             * Zero based offset of the highlighted region.\n             */\n            readonly offset: number;\n            /**\n             * The length of the highlighted region.\n             */\n            readonly length: number;\n        }\n        export namespace Range {\n            /**\n             * `true` if the `arg` is contained in the range. The ranges are closed ranges, hence the check is inclusive.\n             */\n            export function contains(arg: number, range: Range): boolean {\n                return arg >= range.offset && arg <= (range.offset + range.length);\n            }\n        }\n        /**\n         * The result of a caption splitting based on the highlighting information.\n         */\n        export interface Fragment {\n            /**\n             * The text data of the fragment.\n             */\n            readonly data: string;\n            /**\n             * Has to be highlighted if defined.\n             */\n            readonly highligh?: true;\n        }\n        /**\n         * Splits the `caption` argument based on the ranges from the `highlight` argument.\n         */\n        export function split(caption: string, highlight: CaptionHighlight): Fragment[] {\n            const result: Fragment[] = [];\n            const ranges = highlight.ranges.slice();\n            const containerOf = (index: number) => ranges.findIndex(range => Range.contains(index, range));\n            let data = '';\n            for (let i = 0; i < caption.length; i++) {\n                const containerIndex = containerOf(i);\n                if (containerIndex === -1) {\n                    data += caption[i];\n                } else {\n                    if (data.length > 0) {\n                        result.push({ data });\n                    }\n                    const { length } = ranges.splice(containerIndex, 1).shift()!;\n                    result.push({ data: caption.substr(i, length), highligh: true });\n                    data = '';\n                    i = i + length - 1;\n                }\n            }\n            if (data.length > 0) {\n                result.push({ data });\n            }\n            if (ranges.length !== 0) {\n                throw new Error('Error occurred when splitting the caption. There was a mismatch between the caption and the corresponding highlighting ranges.');\n            }\n            return result;\n        }\n    }\n    /**\n     * Encapsulates styling information that has to be applied on the widget which we decorate.\n     */\n    export interface Data {\n        /**\n         * The higher number has higher priority. If not specified, treated as `0`.\n         * When multiple decorators are available for the same item, and decoration data cannot be merged together,\n         * then the higher priority item will be applied on the decorated element and the lower priority will be ignored.\n         */\n        readonly priority?: number;\n        /**\n         * The font data for the caption.\n         */\n        readonly fontData?: FontData;\n        /**\n         * The background color of the entire row.\n         */\n        readonly backgroundColor?: Color;\n        /**\n         * Optional, leading prefixes right before the caption.\n         */\n        readonly captionPrefixes?: CaptionAffix[];\n        /**\n         * Suffixes that might come after the caption as an additional information.\n         */\n        readonly captionSuffixes?: CaptionAffix[];\n        /**\n         * Optional right-aligned decorations that appear after the widget caption and after the caption suffixes (is any).\n         */\n        readonly tailDecorations?: Array<TailDecoration | TailDecorationIcon | TailDecorationIconClass>;\n        /**\n         * Custom tooltip for the decorated item. Tooltip will be appended to the original tooltip, if any.\n         */\n        readonly tooltip?: string;\n        /**\n         * Sets the color of the icon. Ignored if the decorated item has no icon.\n         */\n        readonly iconColor?: Color;\n        /**\n         * Has not effect if given, but the widget does not have an associated image.\n         */\n        readonly iconOverlay?: IconOverlay | IconClassOverlay;\n        /**\n         * An array of ranges to highlight the caption.\n         */\n        readonly highlight?: CaptionHighlight;\n    }\n    export namespace Data {\n        /**\n         * Compares the decoration data based on the priority. Lowest priorities come first.\n         */\n        export const comparePriority = (left: Data, right: Data): number => (left.priority || 0) - (right.priority || 0);\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2017 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { inject, named, injectable } from 'inversify';\nimport { Widget } from '@phosphor/widgets';\nimport { ILogger, Emitter, Event, ContributionProvider, MaybePromise } from '../common';\n\n/* eslint-disable @typescript-eslint/no-explicit-any */\nexport const WidgetFactory = Symbol('WidgetFactory');\n/**\n * `OpenHandler` should be implemented to provide a new opener.\n */\nexport interface WidgetFactory {\n\n    /**\n     * The factory id.\n     */\n    readonly id: string;\n\n    /**\n     * Creates a widget and attaches it to the application shell.\n     * @param options serializable JSON data.\n     */\n    createWidget(options?: any): MaybePromise<Widget>;\n}\n\n/**\n * Representation of the `WidgetConstructionOptions`.\n * Defines a serializable description to create widgets.\n */\nexport interface WidgetConstructionOptions {\n    /**\n     * The id of the widget factory to use.\n     */\n    factoryId: string,\n\n    /**\n     * The widget factory specific information.\n     */\n    options?: any\n}\n\n/**\n * Representation of a `didCreateWidgetEvent`.\n */\nexport interface DidCreateWidgetEvent {\n    /**\n     * The widget which was created.\n     */\n    readonly widget: Widget;\n    /**\n     * The widget factory id.\n     */\n    readonly factoryId: string;\n}\n\n/**\n * Creates and manages widgets.\n */\n@injectable()\nexport class WidgetManager {\n\n    protected _cachedFactories: Map<string, WidgetFactory>;\n    protected readonly widgets = new Map<string, Widget>();\n    protected readonly widgetPromises = new Map<string, MaybePromise<Widget>>();\n    protected readonly pendingWidgetPromises = new Map<string, MaybePromise<Widget>>();\n\n    @inject(ContributionProvider) @named(WidgetFactory)\n    protected readonly factoryProvider: ContributionProvider<WidgetFactory>;\n\n    @inject(ILogger)\n    protected readonly logger: ILogger;\n\n    protected readonly onDidCreateWidgetEmitter = new Emitter<DidCreateWidgetEvent>();\n    readonly onDidCreateWidget: Event<DidCreateWidgetEvent> = this.onDidCreateWidgetEmitter.event;\n\n    /**\n     * Get the list of widgets created for the given factory id.\n     * @param factoryId the widget factory id.\n     *\n     * @returns the list of widgets created for the given factory id.\n     */\n    getWidgets(factoryId: string): Widget[] {\n        const result: Widget[] = [];\n        for (const [key, widget] of this.widgets.entries()) {\n            if (this.fromKey(key).factoryId === factoryId) {\n                result.push(widget);\n            }\n        }\n        return result;\n    }\n\n    /**\n     * Try and get the widget.\n     *\n     * @returns the widget if available, else `undefined`.\n     */\n    tryGetWidget<T extends Widget>(factoryId: string, options?: any): T | undefined {\n        const key = this.toKey({ factoryId, options });\n        const existing = this.widgetPromises.get(key);\n        if (existing instanceof Widget) {\n            return existing as T;\n        }\n        return undefined;\n    }\n\n    /**\n     * Get the widget for the given description.\n     *\n     * @returns a promise resolving to the widget if available, else `undefined.\n     */\n    async getWidget<T extends Widget>(factoryId: string, options?: any): Promise<T | undefined> {\n        const key = this.toKey({ factoryId, options });\n        const pendingWidget = this.doGetWidget<T>(key);\n        const widget = pendingWidget && await pendingWidget;\n        return widget;\n    }\n\n    protected doGetWidget<T extends Widget>(key: string): MaybePromise<T> | undefined {\n        const pendingWidget = this.widgetPromises.get(key) || this.pendingWidgetPromises.get(key);\n        if (pendingWidget) {\n            return pendingWidget as MaybePromise<T>;\n        }\n        return undefined;\n    }\n\n    /**\n     * Creates or returns the widget for the given description.\n     */\n    async getOrCreateWidget<T extends Widget>(factoryId: string, options?: any): Promise<T> {\n        const key = this.toKey({ factoryId, options });\n        const existingWidget = this.doGetWidget<T>(key);\n        if (existingWidget) {\n            return existingWidget;\n        }\n        const factory = this.factories.get(factoryId);\n        if (!factory) {\n            throw Error(\"No widget factory '\" + factoryId + \"' has been registered.\");\n        }\n        try {\n            const widgetPromise = factory.createWidget(options);\n            this.pendingWidgetPromises.set(key, widgetPromise);\n            const widget = await widgetPromise;\n            this.widgetPromises.set(key, widgetPromise);\n            this.widgets.set(key, widget);\n            widget.disposed.connect(() => {\n                this.widgets.delete(key);\n                this.widgetPromises.delete(key);\n            });\n            this.onDidCreateWidgetEmitter.fire({\n                factoryId, widget\n            });\n            return widget as T;\n        } finally {\n            this.pendingWidgetPromises.delete(key);\n        }\n    }\n\n    /**\n     * Get the widget construction options.\n     * @param widget the widget.\n     *\n     * @returns the widget construction options if the widget was created through the manager, else `undefined`.\n     */\n    getDescription(widget: Widget): WidgetConstructionOptions | undefined {\n        for (const [key, aWidget] of this.widgets.entries()) {\n            if (aWidget === widget) {\n                return this.fromKey(key);\n            }\n        }\n        return undefined;\n    }\n\n    /**\n     * Convert the widget construction options to string.\n     * @param options the widget construction options.\n     *\n     * @returns the widget construction options represented as a string.\n     */\n    protected toKey(options: WidgetConstructionOptions): string {\n        return JSON.stringify(options);\n    }\n\n    /**\n     * Convert the key into the widget construction options object.\n     * @param key the key.\n     *\n     * @returns the widget construction options object.\n     */\n    protected fromKey(key: string): WidgetConstructionOptions {\n        return JSON.parse(key);\n    }\n\n    protected get factories(): Map<string, WidgetFactory> {\n        if (!this._cachedFactories) {\n            this._cachedFactories = new Map();\n            for (const factory of this.factoryProvider.getContributions()) {\n                if (factory.id) {\n                    this._cachedFactories.set(factory.id, factory);\n                } else {\n                    this.logger.error('Invalid ID for factory: ' + factory + \". ID was: '\" + factory.id + \"'.\");\n                }\n            }\n        }\n        return this._cachedFactories;\n    }\n\n}\n","/********************************************************************************\n * Copyright (C) 2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { inject, postConstruct, injectable } from 'inversify';\nimport URI from '../common/uri';\nimport { MaybePromise, Emitter, Event } from '../common';\nimport { BaseWidget } from './widgets';\nimport { ApplicationShell } from './shell';\nimport { OpenHandler, OpenerOptions } from './opener-service';\nimport { WidgetManager } from './widget-manager';\n\nexport type WidgetOpenMode = 'open' | 'reveal' | 'activate';\n\nexport interface WidgetOpenerOptions extends OpenerOptions {\n    /**\n     * Whether the widget should be only opened, revealed or activated.\n     * By default is `activate`.\n     */\n    mode?: WidgetOpenMode;\n    /**\n     * Specify how an opened widget should be added to the shell.\n     * By default to the main area.\n     */\n    widgetOptions?: ApplicationShell.WidgetOptions;\n}\n\n@injectable()\nexport abstract class WidgetOpenHandler<W extends BaseWidget> implements OpenHandler {\n\n    @inject(ApplicationShell)\n    protected readonly shell: ApplicationShell;\n\n    @inject(WidgetManager)\n    protected readonly widgetManager: WidgetManager;\n\n    protected readonly onCreatedEmitter = new Emitter<W>();\n    /**\n     * Emit when a new widget is created.\n     */\n    readonly onCreated: Event<W> = this.onCreatedEmitter.event;\n\n    @postConstruct()\n    protected init(): void {\n        this.widgetManager.onDidCreateWidget(({ factoryId, widget }) => {\n            if (factoryId === this.id) {\n                this.onCreatedEmitter.fire(widget as W);\n            }\n        });\n    }\n\n    /**\n     * The widget open handler id.\n     *\n     * #### Implementation\n     * - A widget factory for this id should be registered.\n     * - Subclasses should not implement `WidgetFactory`\n     * to avoid exposing capabilities to create a widget outside of `WidgetManager`.\n     */\n    abstract readonly id: string;\n    abstract canHandle(uri: URI, options?: WidgetOpenerOptions): MaybePromise<number>;\n\n    /**\n     * Open a widget for the given uri and options.\n     * Reject if the given options is not an widget options or a widget cannot be opened.\n     */\n    async open(uri: URI, options?: WidgetOpenerOptions): Promise<W> {\n        const widget = await this.getOrCreateWidget(uri, options);\n        await this.doOpen(widget, options);\n        return widget;\n    }\n    protected async doOpen(widget: W, options?: WidgetOpenerOptions): Promise<void> {\n        const op: WidgetOpenerOptions = {\n            mode: 'activate',\n            ...options\n        };\n        if (!widget.isAttached) {\n            this.shell.addWidget(widget, op.widgetOptions || { area: 'main' });\n        }\n        if (op.mode === 'activate') {\n            await this.shell.activateWidget(widget.id);\n        } else if (op.mode === 'reveal') {\n            await this.shell.revealWidget(widget.id);\n        }\n    }\n\n    /**\n     * Return an existing widget for the given uri.\n     */\n    getByUri(uri: URI): Promise<W | undefined> {\n        return this.getWidget(uri);\n    }\n\n    /**\n     * Return an existing widget for the given uri or creates a new one.\n     *\n     * It does not open a widget, use `open` instead.\n     */\n    getOrCreateByUri(uri: URI): Promise<W> {\n        return this.getOrCreateWidget(uri);\n    }\n\n    /**\n     * All opened widgets.\n     */\n    get all(): W[] {\n        return this.widgetManager.getWidgets(this.id) as W[];\n    }\n\n    protected getWidget(uri: URI, options?: WidgetOpenerOptions): Promise<W | undefined> {\n        const widgetOptions = this.createWidgetOptions(uri, options);\n        return this.widgetManager.getWidget(this.id, widgetOptions) as Promise<W | undefined>;\n    }\n\n    protected getOrCreateWidget(uri: URI, options?: WidgetOpenerOptions): Promise<W> {\n        const widgetOptions = this.createWidgetOptions(uri, options);\n        return this.widgetManager.getOrCreateWidget(this.id, widgetOptions) as Promise<W>;\n    }\n\n    protected abstract createWidgetOptions(uri: URI, options?: WidgetOpenerOptions): Object;\n\n    async closeAll(): Promise<W[]> {\n        const allClosed: W[] = [];\n        await Promise.all(\n            [this.all.map(async widget => {\n                const closed = await this.shell.closeWidget(widget.id);\n                if (closed) {\n                    allClosed.push(closed as W);\n                }\n            })]\n        );\n        return allClosed;\n    }\n\n}\n","/********************************************************************************\n * Copyright (C) 2017 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nexport * from './widget';\nexport * from './react-renderer';\nexport * from './react-widget';\n","/********************************************************************************\n * Copyright (C) 2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport * as React from 'react';\nimport * as ReactDOM from 'react-dom';\nimport { Disposable } from '../../common';\n\nexport class ReactRenderer implements Disposable {\n    readonly host: HTMLElement;\n    constructor(\n        host?: HTMLElement\n    ) {\n        this.host = host || document.createElement('div');\n    }\n\n    dispose(): void {\n        ReactDOM.unmountComponentAtNode(this.host);\n    }\n\n    render(): void {\n        ReactDOM.render(<React.Fragment>{this.doRender()}</React.Fragment>, this.host);\n    }\n\n    protected doRender(): React.ReactNode {\n        return undefined;\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport * as ReactDOM from 'react-dom';\nimport * as React from 'react';\nimport { injectable } from 'inversify';\nimport { DisposableCollection, Disposable } from '../../common';\nimport { BaseWidget, Message } from './widget';\n\n@injectable()\nexport abstract class ReactWidget extends BaseWidget {\n\n    protected readonly onRender = new DisposableCollection();\n\n    constructor() {\n        super();\n        this.scrollOptions = {\n            suppressScrollX: true,\n            minScrollbarLength: 35,\n        };\n        this.toDispose.push(Disposable.create(() => {\n            ReactDOM.unmountComponentAtNode(this.node);\n        }));\n    }\n\n    protected onUpdateRequest(msg: Message): void {\n        super.onUpdateRequest(msg);\n        ReactDOM.render(<React.Fragment>{this.render()}</React.Fragment>, this.node, () => this.onRender.dispose());\n    }\n\n    /**\n     * Render the React widget in the DOM.\n     * - If the widget has been previously rendered,\n     * any subsequent calls will perform an update and only\n     * change the DOM if absolutely necessary.\n     */\n    protected abstract render(): React.ReactNode;\n}\n","/********************************************************************************\n * Copyright (C) 2017 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\n/* eslint-disable @typescript-eslint/no-explicit-any */\n\nimport { injectable, decorate, unmanaged } from 'inversify';\nimport { Widget } from '@phosphor/widgets';\nimport { Message } from '@phosphor/messaging';\nimport { Emitter, Event, Disposable, DisposableCollection, MaybePromise } from '../../common';\nimport { KeyCode, KeysOrKeyCodes } from '../keyboard/keys';\n\nimport PerfectScrollbar from 'perfect-scrollbar';\n\ndecorate(injectable(), Widget);\ndecorate(unmanaged(), Widget, 0);\n\nexport * from '@phosphor/widgets';\nexport * from '@phosphor/messaging';\n\nexport const DISABLED_CLASS = 'theia-mod-disabled';\nexport const EXPANSION_TOGGLE_CLASS = 'theia-ExpansionToggle';\nexport const COLLAPSED_CLASS = 'theia-mod-collapsed';\nexport const SELECTED_CLASS = 'theia-mod-selected';\nexport const FOCUS_CLASS = 'theia-mod-focus';\n\n@injectable()\nexport class BaseWidget extends Widget {\n\n    protected readonly onScrollYReachEndEmitter = new Emitter<void>();\n    readonly onScrollYReachEnd: Event<void> = this.onScrollYReachEndEmitter.event;\n    protected readonly onScrollUpEmitter = new Emitter<void>();\n    readonly onScrollUp: Event<void> = this.onScrollUpEmitter.event;\n    protected readonly onDidChangeVisibilityEmitter = new Emitter<boolean>();\n    readonly onDidChangeVisibility = this.onDidChangeVisibilityEmitter.event;\n\n    protected readonly toDispose = new DisposableCollection(\n        this.onScrollYReachEndEmitter,\n        this.onScrollUpEmitter,\n        this.onDidChangeVisibilityEmitter\n    );\n    protected readonly toDisposeOnDetach = new DisposableCollection();\n    protected scrollBar?: PerfectScrollbar;\n    protected scrollOptions?: PerfectScrollbar.Options;\n\n    dispose(): void {\n        if (this.isDisposed) {\n            return;\n        }\n        super.dispose();\n        this.toDispose.dispose();\n    }\n\n    protected onCloseRequest(msg: Message): void {\n        super.onCloseRequest(msg);\n        this.dispose();\n    }\n\n    protected onBeforeAttach(msg: Message): void {\n        if (this.title.iconClass === '') {\n            this.title.iconClass = 'no-icon';\n        }\n        super.onBeforeAttach(msg);\n    }\n\n    protected onAfterDetach(msg: Message): void {\n        if (this.title.iconClass === 'no-icon') {\n            this.title.iconClass = '';\n        }\n        super.onAfterDetach(msg);\n    }\n\n    protected onBeforeDetach(msg: Message): void {\n        this.toDisposeOnDetach.dispose();\n        super.onBeforeDetach(msg);\n    }\n\n    protected onAfterAttach(msg: Message): void {\n        super.onAfterAttach(msg);\n        if (this.scrollOptions) {\n            (async () => {\n                const container = await this.getScrollContainer();\n                container.style.overflow = 'hidden';\n                this.scrollBar = new PerfectScrollbar(container, this.scrollOptions);\n                this.disableScrollBarFocus(container);\n                this.toDisposeOnDetach.push(addEventListener(container, <any>'ps-y-reach-end', () => { this.onScrollYReachEndEmitter.fire(undefined); }));\n                this.toDisposeOnDetach.push(addEventListener(container, <any>'ps-scroll-up', () => { this.onScrollUpEmitter.fire(undefined); }));\n                this.toDisposeOnDetach.push(Disposable.create(() => {\n                    if (this.scrollBar) {\n                        this.scrollBar.destroy();\n                        this.scrollBar = undefined;\n                    }\n                    container.style.overflow = 'initial';\n                }));\n            })();\n        }\n    }\n\n    protected getScrollContainer(): MaybePromise<HTMLElement> {\n        return this.node;\n    }\n\n    protected disableScrollBarFocus(scrollContainer: HTMLElement): void {\n        for (const thumbs of [scrollContainer.getElementsByClassName('ps__thumb-x'), scrollContainer.getElementsByClassName('ps__thumb-y')]) {\n            for (let i = 0; i < thumbs.length; i++) {\n                const element = thumbs.item(i);\n                if (element) {\n                    element.removeAttribute('tabIndex');\n                }\n            }\n        }\n    }\n\n    protected onUpdateRequest(msg: Message): void {\n        super.onUpdateRequest(msg);\n        if (this.scrollBar) {\n            this.scrollBar.update();\n        }\n    }\n\n    protected addUpdateListener<K extends keyof HTMLElementEventMap>(element: HTMLElement, type: K, useCapture?: boolean): void {\n        this.addEventListener(element, type, e => {\n            this.update();\n            e.preventDefault();\n        }, useCapture);\n    }\n\n    protected addEventListener<K extends keyof HTMLElementEventMap>(element: HTMLElement, type: K, listener: EventListenerOrEventListenerObject<K>, useCapture?: boolean): void {\n        this.toDisposeOnDetach.push(addEventListener(element, type, listener, useCapture));\n    }\n\n    protected addKeyListener<K extends keyof HTMLElementEventMap>(\n        element: HTMLElement,\n        keysOrKeyCodes: KeyCode.Predicate | KeysOrKeyCodes,\n        action: (event: KeyboardEvent) => boolean | void | Object, ...additionalEventTypes: K[]): void {\n        this.toDisposeOnDetach.push(addKeyListener(element, keysOrKeyCodes, action, ...additionalEventTypes));\n    }\n\n    protected addClipboardListener<K extends 'cut' | 'copy' | 'paste'>(element: HTMLElement, type: K, listener: EventListenerOrEventListenerObject<K>): void {\n        this.toDisposeOnDetach.push(addClipboardListener(element, type, listener));\n    }\n\n    setFlag(flag: Widget.Flag): void {\n        super.setFlag(flag);\n        if (flag === Widget.Flag.IsVisible) {\n            this.onDidChangeVisibilityEmitter.fire(this.isVisible);\n        }\n    }\n\n    clearFlag(flag: Widget.Flag): void {\n        super.clearFlag(flag);\n        if (flag === Widget.Flag.IsVisible) {\n            this.onDidChangeVisibilityEmitter.fire(this.isVisible);\n        }\n    }\n}\n\nexport function setEnabled(element: HTMLElement, enabled: boolean): void {\n    element.classList.toggle(DISABLED_CLASS, !enabled);\n    element.tabIndex = enabled ? 0 : -1;\n}\n\nexport function createIconButton(...classNames: string[]): HTMLSpanElement {\n    const icon = document.createElement('i');\n    icon.classList.add(...classNames);\n    const button = document.createElement('span');\n    button.tabIndex = 0;\n    button.appendChild(icon);\n    return button;\n}\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport type EventListener<K extends keyof HTMLElementEventMap> = (this: HTMLElement, event: HTMLElementEventMap[K]) => any;\nexport interface EventListenerObject<K extends keyof HTMLElementEventMap> {\n    handleEvent(evt: HTMLElementEventMap[K]): void;\n}\nexport namespace EventListenerObject {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    export function is<K extends keyof HTMLElementEventMap>(listener: any | undefined): listener is EventListenerObject<K> {\n        return !!listener && 'handleEvent' in listener;\n    }\n}\nexport type EventListenerOrEventListenerObject<K extends keyof HTMLElementEventMap> = EventListener<K> | EventListenerObject<K>;\nexport function addEventListener<K extends keyof HTMLElementEventMap>(\n    element: HTMLElement, type: K, listener: EventListenerOrEventListenerObject<K>, useCapture?: boolean\n): Disposable {\n    element.addEventListener(type, listener, useCapture);\n    return Disposable.create(() =>\n        element.removeEventListener(type, listener)\n    );\n}\n\nexport function addKeyListener<K extends keyof HTMLElementEventMap>(\n    element: HTMLElement,\n    keysOrKeyCodes: KeyCode.Predicate | KeysOrKeyCodes,\n    action: (event: KeyboardEvent) => boolean | void | Object, ...additionalEventTypes: K[]): Disposable {\n\n    const toDispose = new DisposableCollection();\n    const keyCodePredicate = (() => {\n        if (typeof keysOrKeyCodes === 'function') {\n            return keysOrKeyCodes;\n        } else {\n            return (actual: KeyCode) => KeysOrKeyCodes.toKeyCodes(keysOrKeyCodes).some(k => k.equals(actual));\n        }\n    })();\n    toDispose.push(addEventListener(element, 'keydown', e => {\n        const kc = KeyCode.createKeyCode(e);\n        if (keyCodePredicate(kc)) {\n            const result = action(e);\n            if (typeof result !== 'boolean' || result) {\n                e.stopPropagation();\n                e.preventDefault();\n            }\n        }\n    }));\n    for (const type of additionalEventTypes) {\n        toDispose.push(addEventListener(element, type, e => {\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            const event = (type as any)['keydown'];\n            const result = action(event);\n            if (typeof result !== 'boolean' || result) {\n                e.stopPropagation();\n                e.preventDefault();\n            }\n        }));\n    }\n    return toDispose;\n}\n\nexport function addClipboardListener<K extends 'cut' | 'copy' | 'paste'>(element: HTMLElement, type: K, listener: EventListenerOrEventListenerObject<K>): Disposable {\n    const documentListener = (e: ClipboardEvent) => {\n        const activeElement = document.activeElement;\n        if (activeElement && element.contains(activeElement)) {\n            if (EventListenerObject.is(listener)) {\n                listener.handleEvent(e);\n            } else {\n                listener.bind(element)(e);\n            }\n        }\n    };\n    document.addEventListener(type, documentListener);\n    return Disposable.create(() =>\n        document.removeEventListener(type, documentListener)\n    );\n}\n\nexport function waitForClosed(widget: Widget): Promise<void> {\n    return waitForVisible(widget, false);\n}\n\nexport function waitForRevealed(widget: Widget): Promise<void> {\n    return waitForVisible(widget, true);\n}\n\nfunction waitForVisible(widget: Widget, visible: boolean): Promise<void> {\n    if (widget.isAttached === visible && (widget.isVisible === visible || (widget.node.style.visibility !== 'hidden') === visible)) {\n        return new Promise(resolve => window.requestAnimationFrame(() => resolve()));\n    }\n    return new Promise(resolve => {\n        const waitFor = () => window.requestAnimationFrame(() => {\n            if (widget.isAttached === visible && (widget.isVisible === visible || (widget.node.style.visibility !== 'hidden') === visible)) {\n                window.requestAnimationFrame(() => resolve());\n            } else {\n                waitFor();\n            }\n        });\n        waitFor();\n    });\n}\n","/********************************************************************************\n * Copyright (C) 2017 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nexport interface NewWindowOptions {\n    readonly external?: boolean;\n}\n\n/**\n * Service for opening new browser windows.\n */\nexport const WindowService = Symbol('WindowService');\nexport interface WindowService {\n\n    /**\n     * Opens a new window and loads the content from the given URL.\n     * In a browser, opening a new Theia tab or open a link is the same thing.\n     * But in Electron, we want to open links in a browser, not in Electron.\n     */\n    openNewWindow(url: string, options?: NewWindowOptions): undefined;\n\n    /**\n     * Called when the `window` is about to `unload` its resources.\n     * At this point, the `document` is still visible and the [`BeforeUnloadEvent`](https://developer.mozilla.org/en-US/docs/Web/API/Window/beforeunload_event)\n     * event will be canceled if the return value of this method is `false`.\n     */\n    canUnload(): boolean;\n\n}\n","/********************************************************************************\n * Copyright (C) 2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\n/* eslint-disable @typescript-eslint/no-explicit-any */\n\nexport interface ApplicationError<C extends number, D> extends Error {\n    readonly code: C\n    readonly data: D\n    toJson(): ApplicationError.Literal<D>\n}\nexport namespace ApplicationError {\n    export interface Literal<D> {\n        message: string\n        data: D\n        stack?: string\n    }\n    export interface Constructor<C extends number, D> {\n        (...args: any[]): ApplicationError<C, D>;\n        code: C;\n        is(arg: object | undefined): arg is ApplicationError<C, D>\n    }\n    const codes: number[] = [];\n    export function declare<C extends number, D>(code: C, factory: (...args: any[]) => Literal<D>): Constructor<C, D> {\n        if (codes.indexOf(code) !== -1) {\n            throw new Error(`An application error for '${code}' code is already declared`);\n        }\n        const constructorOpt = Object.assign((...args: any[]) => new Impl(code, factory(...args), constructorOpt), {\n            code,\n            is(arg: object | undefined): arg is ApplicationError<C, D> {\n                return arg instanceof Impl && arg.code === code;\n            }\n        });\n        return constructorOpt;\n    }\n    export function is<C extends number, D>(arg: object | undefined): arg is ApplicationError<C, D> {\n        return arg instanceof Impl;\n    }\n    export function fromJson<C extends number, D>(code: C, raw: Literal<D>): ApplicationError<C, D> {\n        return new Impl(code, raw);\n    }\n    class Impl<C extends number, D> extends Error implements ApplicationError<C, D>  {\n        readonly data: D;\n        constructor(\n            readonly code: C,\n            raw: ApplicationError.Literal<D>,\n            constructorOpt?: Function\n        ) {\n            super(raw.message);\n            this.data = raw.data;\n            Object.setPrototypeOf(this, Impl.prototype);\n            if (raw.stack) {\n                this.stack = raw.stack;\n            } else if (Error.captureStackTrace && constructorOpt) {\n                Error.captureStackTrace(this, constructorOpt);\n            }\n        }\n        toJson(): ApplicationError.Literal<D> {\n            const { message, data, stack } = this;\n            return { message, data, stack };\n        }\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2018 Ericsson and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { OS } from './os';\n\nexport const applicationPath = '/services/application';\n\nexport const ApplicationServer = Symbol('ApplicationServer');\n\nexport interface ApplicationServer {\n    getExtensionsInfos(): Promise<ExtensionInfo[]>;\n    getApplicationInfo(): Promise<ApplicationInfo | undefined>;\n    getBackendOS(): Promise<OS.Type>;\n}\n\nexport interface ExtensionInfo {\n    name: string;\n    version: string;\n}\n\nexport interface ApplicationInfo {\n    name: string;\n    version: string;\n}\n","/********************************************************************************\n * Copyright (C) 2017 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation and others. All rights reserved.\n *  Licensed under the MIT License. See https://github.com/Microsoft/vscode/blob/master/LICENSE.txt for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { Event, Emitter } from './event';\n\nexport interface CancellationToken {\n    readonly isCancellationRequested: boolean;\n    /*\n\t * An event emitted when cancellation is requested\n\t * @event\n\t */\n    readonly onCancellationRequested: Event<void>;\n}\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nconst shortcutEvent: Event<void> = Object.freeze(Object.assign(function (callback: any, context?: any): any {\n    const handle = setTimeout(callback.bind(context), 0);\n    return { dispose(): void { clearTimeout(handle); } };\n}, { maxListeners: 0 }));\n\nexport namespace CancellationToken {\n\n    export const None: CancellationToken = Object.freeze({\n        isCancellationRequested: false,\n        onCancellationRequested: Event.None\n    });\n\n    export const Cancelled: CancellationToken = Object.freeze({\n        isCancellationRequested: true,\n        onCancellationRequested: shortcutEvent\n    });\n}\n\nclass MutableToken implements CancellationToken {\n\n    private _isCancelled: boolean = false;\n    private _emitter: Emitter<void> | undefined;\n\n    public cancel(): void {\n        if (!this._isCancelled) {\n            this._isCancelled = true;\n            if (this._emitter) {\n                this._emitter.fire(undefined);\n                this._emitter = undefined;\n            }\n        }\n    }\n\n    get isCancellationRequested(): boolean {\n        return this._isCancelled;\n    }\n\n    get onCancellationRequested(): Event<void> {\n        if (this._isCancelled) {\n            return shortcutEvent;\n        }\n        if (!this._emitter) {\n            this._emitter = new Emitter<void>();\n        }\n        return this._emitter.event;\n    }\n}\n\nexport class CancellationTokenSource {\n\n    private _token: CancellationToken;\n\n    get token(): CancellationToken {\n        if (!this._token) {\n            // be lazy and create the token only when\n            // actually needed\n            this._token = new MutableToken();\n        }\n        return this._token;\n    }\n\n    cancel(): void {\n        if (!this._token) {\n            // save an object by returning the default\n            // cancelled token when cancellation happens\n            // before someone asks for the token\n            this._token = CancellationToken.Cancelled;\n        } else if (this._token !== CancellationToken.Cancelled) {\n            (<MutableToken>this._token).cancel();\n        }\n    }\n\n    dispose(): void {\n        this.cancel();\n    }\n}\n\nconst cancelledMessage = 'Cancelled';\n\nexport function cancelled(): Error {\n    return new Error(cancelledMessage);\n}\n\nexport function isCancelled(err: Error | undefined): boolean {\n    return !!err && err.message === cancelledMessage;\n}\n\nexport function checkCancelled(token?: CancellationToken): void {\n    if (!!token && token.isCancellationRequested) {\n        throw cancelled();\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2017 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { injectable, inject, named } from 'inversify';\nimport { Event, Emitter, WaitUntilEvent } from './event';\nimport { Disposable, DisposableCollection } from './disposable';\nimport { ContributionProvider } from './contribution-provider';\n\n/**\n * A command is a unique identifier of a function\n * which can be executed by a user via a keyboard shortcut,\n * a menu action or directly.\n */\nexport interface Command {\n    /**\n     * A unique identifier of this command.\n     */\n    id: string;\n    /**\n     * A label of this command.\n     */\n    label?: string;\n    /**\n     * An icon class of this command.\n     */\n    iconClass?: string;\n    /**\n     * A category of this command.\n     */\n    category?: string;\n}\n\nexport namespace Command {\n    /* Determine whether object is a Command */\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    export function is(arg: Command | any): arg is Command {\n        return !!arg && arg === Object(arg) && 'id' in arg;\n    }\n\n    /** Comparator function for when sorting commands */\n    export function compareCommands(a: Command, b: Command): number {\n        if (a.label && b.label) {\n            const aCommand = (a.category) ? a.category + a.label : a.label;\n            const bCommand = (b.category) ? b.category + b.label : b.label;\n            return (aCommand).localeCompare(bCommand);\n        } else {\n            return 0;\n        }\n    }\n\n    /**\n     * Determine if two commands are equal.\n     *\n     * @param a the first command for comparison.\n     * @param b the second command for comparison.\n     */\n    export function equals(a: Command, b: Command): boolean {\n        return (\n            a.id === b.id &&\n            a.label === b.label &&\n            a.iconClass === b.iconClass &&\n            a.category === b.category\n        );\n    }\n}\n\n/**\n * A command handler is an implementation of a command.\n *\n * A command can have multiple handlers\n * but they should be active in different contexts,\n * otherwise first active will be executed.\n */\nexport interface CommandHandler {\n    /**\n     * Execute this handler.\n     */\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    execute(...args: any[]): any;\n    /**\n     * Test whether this handler is enabled (active).\n     */\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    isEnabled?(...args: any[]): boolean;\n    /**\n     * Test whether menu items for this handler should be visible.\n     */\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    isVisible?(...args: any[]): boolean;\n    /**\n     * Test whether menu items for this handler should be toggled.\n     */\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    isToggled?(...args: any[]): boolean;\n}\n\nexport const CommandContribution = Symbol('CommandContribution');\n/**\n * The command contribution should be implemented to register custom commands and handler.\n */\nexport interface CommandContribution {\n    /**\n     * Register commands and handlers.\n     */\n    registerCommands(commands: CommandRegistry): void;\n}\n\nexport interface WillExecuteCommandEvent extends WaitUntilEvent {\n    commandId: string;\n}\n\nexport const commandServicePath = '/services/commands';\nexport const CommandService = Symbol('CommandService');\n/**\n * The command service should be used to execute commands.\n */\nexport interface CommandService {\n    /**\n     * Execute the active handler for the given command and arguments.\n     *\n     * Reject if a command cannot be executed.\n     */\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    executeCommand<T>(command: string, ...args: any[]): Promise<T | undefined>;\n    /**\n     * An event is emitted when a command is about to be executed.\n     *\n     * It can be used to install or activate a command handler.\n     */\n    readonly onWillExecuteCommand: Event<WillExecuteCommandEvent>;\n}\n\n/**\n * The command registry manages commands and handlers.\n */\n@injectable()\nexport class CommandRegistry implements CommandService {\n\n    protected readonly _commands: { [id: string]: Command } = {};\n    protected readonly _handlers: { [id: string]: CommandHandler[] } = {};\n\n    protected readonly toUnregisterCommands = new Map<string, Disposable>();\n\n    // List of recently used commands.\n    protected _recent: Command[] = [];\n\n    protected readonly onWillExecuteCommandEmitter = new Emitter<WillExecuteCommandEvent>();\n    readonly onWillExecuteCommand = this.onWillExecuteCommandEmitter.event;\n\n    constructor(\n        @inject(ContributionProvider) @named(CommandContribution)\n        protected readonly contributionProvider: ContributionProvider<CommandContribution>\n    ) { }\n\n    onStart(): void {\n        const contributions = this.contributionProvider.getContributions();\n        for (const contrib of contributions) {\n            contrib.registerCommands(this);\n        }\n    }\n\n    /**\n     * Register the given command and handler if present.\n     *\n     * Throw if a command is already registered for the given command identifier.\n     */\n    registerCommand(command: Command, handler?: CommandHandler): Disposable {\n        if (this._commands[command.id]) {\n            console.warn(`A command ${command.id} is already registered.`);\n            return Disposable.NULL;\n        }\n        const toDispose = new DisposableCollection(this.doRegisterCommand(command));\n        if (handler) {\n            toDispose.push(this.registerHandler(command.id, handler));\n        }\n        this.toUnregisterCommands.set(command.id, toDispose);\n        toDispose.push(Disposable.create(() => this.toUnregisterCommands.delete(command.id)));\n        return toDispose;\n    }\n\n    protected doRegisterCommand(command: Command): Disposable {\n        this._commands[command.id] = command;\n        return {\n            dispose: () => {\n                delete this._commands[command.id];\n            }\n        };\n    }\n\n    /**\n     * Unregister command from the registry\n     *\n     * @param command\n     */\n    unregisterCommand(command: Command): void;\n    /**\n     * Unregister command from the registry\n     *\n     * @param id\n     */\n    unregisterCommand(id: string): void;\n    unregisterCommand(commandOrId: Command | string): void {\n        const id = Command.is(commandOrId) ? commandOrId.id : commandOrId;\n        const toUnregister = this.toUnregisterCommands.get(id);\n        if (toUnregister) {\n            toUnregister.dispose();\n        }\n    }\n\n    /**\n     * Register the given handler for the given command identifier.\n     */\n    registerHandler(commandId: string, handler: CommandHandler): Disposable {\n        let handlers = this._handlers[commandId];\n        if (!handlers) {\n            this._handlers[commandId] = handlers = [];\n        }\n        handlers.push(handler);\n        return {\n            dispose: () => {\n                const idx = handlers.indexOf(handler);\n                if (idx >= 0) {\n                    handlers.splice(idx, 1);\n                }\n            }\n        };\n    }\n\n    /**\n     * Test whether there is an active handler for the given command.\n     */\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    isEnabled(command: string, ...args: any[]): boolean {\n        return typeof this.getActiveHandler(command, ...args) !== 'undefined';\n    }\n\n    /**\n     * Test whether there is a visible handler for the given command.\n     */\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    isVisible(command: string, ...args: any[]): boolean {\n        return typeof this.getVisibleHandler(command, ...args) !== 'undefined';\n    }\n\n    /**\n     * Test whether there is a toggled handler for the given command.\n     */\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    isToggled(command: string, ...args: any[]): boolean {\n        return typeof this.getToggledHandler(command, ...args) !== 'undefined';\n    }\n\n    /**\n     * Execute the active handler for the given command and arguments.\n     *\n     * Reject if a command cannot be executed.\n     */\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    async executeCommand<T>(commandId: string, ...args: any[]): Promise<T | undefined> {\n        await this.fireWillExecuteCommand(commandId);\n        const handler = this.getActiveHandler(commandId, ...args);\n        if (handler) {\n            const result = await handler.execute(...args);\n            const command = this.getCommand(commandId);\n            if (command) {\n                this.addRecentCommand(command);\n            }\n            return result;\n        }\n        const argsMessage = args && args.length > 0 ? ` (args: ${JSON.stringify(args)})` : '';\n        // eslint-disable-next-line max-len\n        throw Object.assign(new Error(`The command '${commandId}' cannot be executed. There are no active handlers available for the command.${argsMessage}`), { code: 'NO_ACTIVE_HANDLER' });\n    }\n\n    protected async fireWillExecuteCommand(commandId: string): Promise<void> {\n        await WaitUntilEvent.fire(this.onWillExecuteCommandEmitter, { commandId }, 30000);\n    }\n\n    /**\n     * Get a visible handler for the given command or `undefined`.\n     */\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    getVisibleHandler(commandId: string, ...args: any[]): CommandHandler | undefined {\n        const handlers = this._handlers[commandId];\n        if (handlers) {\n            for (const handler of handlers) {\n                try {\n                    if (!handler.isVisible || handler.isVisible(...args)) {\n                        return handler;\n                    }\n                } catch (error) {\n                    console.error(error);\n                }\n            }\n        }\n        return undefined;\n    }\n\n    /**\n     * Get an active handler for the given command or `undefined`.\n     */\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    getActiveHandler(commandId: string, ...args: any[]): CommandHandler | undefined {\n        const handlers = this._handlers[commandId];\n        if (handlers) {\n            for (const handler of handlers) {\n                try {\n                    if (!handler.isEnabled || handler.isEnabled(...args)) {\n                        return handler;\n                    }\n                } catch (error) {\n                    console.error(error);\n                }\n            }\n        }\n        return undefined;\n    }\n\n    /**\n     * Get a toggled handler for the given command or `undefined`.\n     */\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    getToggledHandler(commandId: string, ...args: any[]): CommandHandler | undefined {\n        const handlers = this._handlers[commandId];\n        if (handlers) {\n            for (const handler of handlers) {\n                try {\n                    if (handler.isToggled && handler.isToggled(...args)) {\n                        return handler;\n                    }\n                } catch (error) {\n                    console.error(error);\n                }\n            }\n        }\n        return undefined;\n    }\n\n    /**\n     * Returns with all handlers for the given command. If the command does not have any handlers,\n     * or the command is not registered, returns an empty array.\n     */\n    getAllHandlers(commandId: string): CommandHandler[] {\n        const handlers = this._handlers[commandId];\n        return handlers ? handlers.slice() : [];\n    }\n\n    /**\n     * Get all registered commands.\n     */\n    get commands(): Command[] {\n        const commands: Command[] = [];\n        for (const id of this.commandIds) {\n            const cmd = this.getCommand(id);\n            if (cmd) {\n                commands.push(cmd);\n            }\n        }\n        return commands;\n    }\n\n    /**\n     * Get a command for the given command identifier.\n     */\n    getCommand(id: string): Command | undefined {\n        return this._commands[id];\n    }\n\n    /**\n     * Get all registered commands identifiers.\n     */\n    get commandIds(): string[] {\n        return Object.keys(this._commands);\n    }\n\n    /**\n     * Get the list of recently used commands.\n     */\n    get recent(): Command[] {\n        return this._recent;\n    }\n\n    /**\n     * Set the list of recently used commands.\n     * @param commands the list of recently used commands.\n     */\n    set recent(commands: Command[]) {\n        this._recent = commands;\n    }\n\n    /**\n     * Adds a command to recently used list.\n     * Prioritizes commands that were recently executed to be most recent.\n     *\n     * @param recent a recent command, or array of recent commands.\n     */\n    addRecentCommand(recent: Command | Command[]): void {\n        if (Array.isArray(recent)) {\n            recent.forEach((command: Command) => this.addRecentCommand(command));\n        } else {\n            // Determine if the command currently exists in the recently used list.\n            const index = this._recent.findIndex((command: Command) => Command.equals(recent, command));\n            // If the command exists, remove it from the array so it can later be placed at the top.\n            if (index >= 0) { this._recent.splice(index, 1); }\n            // Add the recent command to the beginning of the array (most recent).\n            this._recent.unshift(recent);\n        }\n    }\n\n    /**\n     * Clear the list of recently used commands.\n     */\n    clearCommandHistory(): void {\n        this.recent = [];\n    }\n\n}\n","/********************************************************************************\n * Copyright (C) 2017 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { interfaces } from 'inversify';\n\nexport const ContributionProvider = Symbol('ContributionProvider');\n\nexport interface ContributionProvider<T extends object> {\n\n    /**\n     * @param recursive `true` if the contributions should be collected from the parent containers as well. Otherwise, `false`. It is `false` by default.\n     */\n    getContributions(recursive?: boolean): T[]\n}\n\nclass ContainerBasedContributionProvider<T extends object> implements ContributionProvider<T> {\n\n    protected services: T[] | undefined;\n\n    constructor(\n        protected readonly serviceIdentifier: interfaces.ServiceIdentifier<T>,\n        protected readonly container: interfaces.Container\n    ) { }\n\n    getContributions(recursive?: boolean): T[] {\n        if (this.services === undefined) {\n            const currentServices: T[] = [];\n            let currentContainer: interfaces.Container | null = this.container;\n            // eslint-disable-next-line no-null/no-null\n            while (currentContainer !== null) {\n                if (currentContainer.isBound(this.serviceIdentifier)) {\n                    try {\n                        currentServices.push(...currentContainer.getAll(this.serviceIdentifier));\n                    } catch (error) {\n                        console.error(error);\n                    }\n                }\n                // eslint-disable-next-line no-null/no-null\n                currentContainer = recursive === true ? currentContainer.parent : null;\n            }\n            this.services = currentServices;\n        }\n        return this.services;\n    }\n}\n\nexport type Bindable = interfaces.Bind | interfaces.Container;\nexport namespace Bindable {\n    export function isContainer(arg: Bindable): arg is interfaces.Container {\n        return typeof arg !== 'function'\n            // https://github.com/eclipse-theia/theia/issues/3204#issue-371029654\n            // In InversifyJS `4.14.0` containers no longer have a property `guid`.\n            && ('guid' in arg || 'parent' in arg);\n    }\n}\n\nexport function bindContributionProvider(bindable: Bindable, id: symbol): void {\n    const bindingToSyntax = (Bindable.isContainer(bindable) ? bindable.bind(ContributionProvider) : bindable(ContributionProvider));\n    bindingToSyntax\n        .toDynamicValue(ctx => new ContainerBasedContributionProvider(id, ctx.container))\n        .inSingletonScope().whenTargetNamed(id);\n}\n","/********************************************************************************\n * Copyright (C) 2017 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { Event, Emitter } from './event';\n\nexport interface Disposable {\n    /**\n     * Dispose this object.\n     */\n    dispose(): void;\n}\n\nexport namespace Disposable {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    export function is(arg: any): arg is Disposable {\n        return !!arg && typeof arg === 'object' && 'dispose' in arg && typeof arg['dispose'] === 'function';\n    }\n    export function create(func: () => void): Disposable {\n        return {\n            dispose: func\n        };\n    }\n    export const NULL = create(() => { });\n}\n\nexport class DisposableCollection implements Disposable {\n\n    protected readonly disposables: Disposable[] = [];\n    protected readonly onDisposeEmitter = new Emitter<void>();\n\n    constructor(...toDispose: Disposable[]) {\n        toDispose.forEach(d => this.push(d));\n    }\n\n    get onDispose(): Event<void> {\n        return this.onDisposeEmitter.event;\n    }\n\n    protected checkDisposed(): void {\n        if (this.disposed && !this.disposingElements) {\n            this.onDisposeEmitter.fire(undefined);\n        }\n    }\n\n    get disposed(): boolean {\n        return this.disposables.length === 0;\n    }\n\n    private disposingElements = false;\n    dispose(): void {\n        if (this.disposed || this.disposingElements) {\n            return;\n        }\n        this.disposingElements = true;\n        while (!this.disposed) {\n            try {\n                this.disposables.pop()!.dispose();\n            } catch (e) {\n                console.error(e);\n            }\n        }\n        this.disposingElements = false;\n        this.checkDisposed();\n    }\n\n    push(disposable: Disposable): Disposable {\n        const disposables = this.disposables;\n        disposables.push(disposable);\n        const originalDispose = disposable.dispose.bind(disposable);\n        const toRemove = Disposable.create(() => {\n            const index = disposables.indexOf(disposable);\n            if (index !== -1) {\n                disposables.splice(index, 1);\n            }\n            this.checkDisposed();\n        });\n        disposable.dispose = () => {\n            toRemove.dispose();\n            originalDispose();\n        };\n        return toRemove;\n    }\n\n    pushAll(disposables: Disposable[]): Disposable[] {\n        return disposables.map(disposable =>\n            this.push(disposable)\n        );\n    }\n\n}\n","/********************************************************************************\n * Copyright (C) 2017 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\n/* eslint-disable @typescript-eslint/no-explicit-any */\n\nimport { Disposable } from './disposable';\nimport { MaybePromise } from './types';\n\n/**\n * Represents a typed event.\n */\nexport interface Event<T> {\n\n    /**\n     *\n     * @param listener The listener function will be call when the event happens.\n     * @param thisArgs The 'this' which will be used when calling the event listener.\n     * @param disposables An array to which a {{IDisposable}} will be added.\n     * @return a disposable to remove the listener again.\n     */\n    (listener: (e: T) => any, thisArgs?: any, disposables?: Disposable[]): Disposable;\n    /**\n     * An emitter will print a warning if more listeners are added for this event.\n     * The event.maxListeners allows the limit to be modified for this specific event.\n     * The value can be set to 0 to indicate an unlimited number of listener.\n     */\n    maxListeners: number\n}\n\nexport namespace Event {\n    const _disposable = { dispose(): void { } };\n    export const None: Event<any> = Object.assign(function (): { dispose(): void } { return _disposable; }, {\n        get maxListeners(): number { return 0; },\n        set maxListeners(maxListeners: number) { }\n    });\n\n    /**\n     * Given an event and a `map` function, returns another event which maps each element\n     * through the mapping function.\n     */\n    export function map<I, O>(event: Event<I>, mapFunc: (i: I) => O): Event<O> {\n        return Object.assign((listener: (e: O) => any, thisArgs?: any, disposables?: Disposable[]) => event(i => listener.call(thisArgs, mapFunc(i)), undefined, disposables), {\n            maxListeners: 0,\n        });\n    }\n}\n\ntype Callback = (...args: any[]) => any;\nclass CallbackList implements Iterable<Callback> {\n\n    private _callbacks: Function[] | undefined;\n    private _contexts: any[] | undefined;\n\n    get length(): number {\n        return this._callbacks && this._callbacks.length || 0;\n    }\n\n    public add(callback: Function, context: any = undefined, bucket?: Disposable[]): void {\n        if (!this._callbacks) {\n            this._callbacks = [];\n            this._contexts = [];\n        }\n        this._callbacks.push(callback);\n        this._contexts!.push(context);\n\n        if (Array.isArray(bucket)) {\n            bucket.push({ dispose: () => this.remove(callback, context) });\n        }\n    }\n\n    public remove(callback: Function, context: any = undefined): void {\n        if (!this._callbacks) {\n            return;\n        }\n\n        let foundCallbackWithDifferentContext = false;\n        for (let i = 0; i < this._callbacks.length; i++) {\n            if (this._callbacks[i] === callback) {\n                if (this._contexts![i] === context) {\n                    // callback & context match => remove it\n                    this._callbacks.splice(i, 1);\n                    this._contexts!.splice(i, 1);\n                    return;\n                } else {\n                    foundCallbackWithDifferentContext = true;\n                }\n            }\n        }\n\n        if (foundCallbackWithDifferentContext) {\n            throw new Error('When adding a listener with a context, you should remove it with the same context');\n        }\n    }\n\n    // tslint:disable-next-line:typedef\n    public [Symbol.iterator]() {\n        if (!this._callbacks) {\n            return [][Symbol.iterator]();\n        }\n        const callbacks = this._callbacks.slice(0);\n        const contexts = this._contexts!.slice(0);\n\n        return callbacks.map((callback, i) =>\n            (...args: any[]) => callback.apply(contexts[i], args)\n        )[Symbol.iterator]();\n    }\n\n    public invoke(...args: any[]): any[] {\n        const ret: any[] = [];\n        for (const callback of this) {\n            try {\n                ret.push(callback(...args));\n            } catch (e) {\n                console.error(e);\n            }\n        }\n        return ret;\n    }\n\n    public isEmpty(): boolean {\n        return !this._callbacks || this._callbacks.length === 0;\n    }\n\n    public dispose(): void {\n        this._callbacks = undefined;\n        this._contexts = undefined;\n    }\n}\n\nexport interface EmitterOptions {\n    onFirstListenerAdd?: Function;\n    onLastListenerRemove?: Function;\n}\n\nexport class Emitter<T = any> {\n\n    private static _noop = function (): void { };\n\n    private _event: Event<T>;\n    private _callbacks: CallbackList | undefined;\n    private _disposed = false;\n\n    constructor(\n        private _options?: EmitterOptions\n    ) { }\n\n    /**\n     * For the public to allow to subscribe\n     * to events from this Emitter\n     */\n    get event(): Event<T> {\n        if (!this._event) {\n            this._event = Object.assign((listener: (e: T) => any, thisArgs?: any, disposables?: Disposable[]) => {\n                if (!this._callbacks) {\n                    this._callbacks = new CallbackList();\n                }\n                if (this._options && this._options.onFirstListenerAdd && this._callbacks.isEmpty()) {\n                    this._options.onFirstListenerAdd(this);\n                }\n                this._callbacks.add(listener, thisArgs);\n                this.checkMaxListeners(this._event.maxListeners);\n\n                const result: Disposable = {\n                    dispose: () => {\n                        result.dispose = Emitter._noop;\n                        if (!this._disposed) {\n                            this._callbacks!.remove(listener, thisArgs);\n                            result.dispose = Emitter._noop;\n                            if (this._options && this._options.onLastListenerRemove && this._callbacks!.isEmpty()) {\n                                this._options.onLastListenerRemove(this);\n                            }\n                        }\n                    }\n                };\n                if (Array.isArray(disposables)) {\n                    disposables.push(result);\n                }\n\n                return result;\n            }, {\n                maxListeners: 30\n            }\n            );\n        }\n        return this._event;\n    }\n\n    protected checkMaxListeners(maxListeners: number): void {\n        if (maxListeners === 0 || !this._callbacks) {\n            return;\n        }\n        const count = this._callbacks.length;\n        if (count > maxListeners) {\n            console.warn(new Error(`Possible Emitter memory leak detected. ${count} listeners added. Use event.maxListeners to increase the limit (${maxListeners})`));\n        }\n    }\n\n    /**\n     * To be kept private to fire an event to\n     * subscribers\n     */\n    fire(event: T): any {\n        if (this._callbacks) {\n            this._callbacks.invoke(event);\n        }\n    }\n\n    /**\n     * Process each listener one by one.\n     * Return `false` to stop iterating over the listeners, `true` to continue.\n     */\n    async sequence(processor: (listener: (e: T) => any) => MaybePromise<boolean>): Promise<void> {\n        if (this._callbacks) {\n            for (const listener of this._callbacks) {\n                if (!await processor(listener)) {\n                    break;\n                }\n            }\n        }\n    }\n\n    dispose(): void {\n        if (this._callbacks) {\n            this._callbacks.dispose();\n            this._callbacks = undefined;\n        }\n        this._disposed = true;\n    }\n}\n\nexport interface WaitUntilEvent {\n    /* eslint-disable @typescript-eslint/no-explicit-any */\n    /**\n     * Allows to pause the event loop until the provided thenable resolved.\n     *\n     * *Note:* It can only be called during event dispatch and not in an asynchronous manner\n     *\n     * @param thenable A thenable that delays execution.\n     */\n    waitUntil(thenable: Promise<any>): void;\n    /* eslint-enable @typescript-eslint/no-explicit-any */\n}\nexport namespace WaitUntilEvent {\n    export async function fire<T extends WaitUntilEvent>(\n        emitter: Emitter<T>,\n        event: Pick<T, Exclude<keyof T, 'waitUntil'>>,\n        timeout: number | undefined = undefined\n    ): Promise<void> {\n        const waitables: Promise<void>[] = [];\n        const asyncEvent = Object.assign(event, {\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            waitUntil: (thenable: Promise<any>) => {\n                if (Object.isFrozen(waitables)) {\n                    throw new Error('waitUntil cannot be called asynchronously.');\n                }\n                waitables.push(thenable);\n            }\n        }) as T;\n        try {\n            emitter.fire(asyncEvent);\n            // Asynchronous calls to `waitUntil` should fail.\n            Object.freeze(waitables);\n        } finally {\n            delete asyncEvent['waitUntil'];\n        }\n        if (!waitables.length) {\n            return;\n        }\n        if (timeout !== undefined) {\n            await Promise.race([Promise.all(waitables), new Promise(resolve => setTimeout(resolve, timeout))]);\n        } else {\n            await Promise.all(waitables);\n        }\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2017 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nexport * from './types';\nexport * from './disposable';\nexport * from './reference';\nexport * from './event';\nexport * from './cancellation';\nexport * from './command';\nexport * from './menu';\nexport * from './selection-service';\nexport * from './objects';\nexport * from './os';\nexport * from './resource';\nexport * from './contribution-provider';\nexport * from './path';\nexport * from './logger';\nexport * from './messaging';\nexport * from './message-service';\nexport * from './message-service-protocol';\nexport * from './progress-service';\nexport * from './progress-service-protocol';\nexport * from './selection';\nexport * from './strings';\nexport * from './application-error';\nexport * from './lsp-types';\n\nimport { environment } from '@theia/application-package/lib/environment';\nexport { environment };\n","/********************************************************************************\n * Copyright (C) 2017 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nexport interface Keybinding {\n    /** Command identifier, this needs to be a unique string.  */\n    command: string;\n    /** Keybinding string as defined in packages/keymaps/README.md.  */\n    keybinding: string;\n    /**\n     * The optional keybinding context where this binding belongs to.\n     * If not specified, then this keybinding context belongs to the NOOP\n     * keybinding context.\n     */\n    context?: string;\n    /**\n     * https://code.visualstudio.com/docs/getstarted/keybindings#_when-clause-contexts\n     */\n    when?: string;\n\n    /**\n     * Specified when the command has arguments that are passed to the command handler.\n     */\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    args?: any;\n}\nexport namespace Keybinding {\n\n    /**\n     * Returns with the string representation of the binding.\n     * Any additional properties which are not described on\n     * the `Keybinding` API will be ignored.\n     *\n     * @param binding the binding to stringify.\n     */\n    export function stringify(binding: Keybinding): string {\n        const copy: Keybinding = {\n            command: binding.command,\n            keybinding: binding.keybinding,\n            context: binding.context,\n            when: binding.when,\n            args: binding.args\n        };\n        return JSON.stringify(copy);\n    }\n\n    /* Determine whether object is a KeyBinding */\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    export function is(arg: Keybinding | any): arg is Keybinding {\n        return !!arg && arg === Object(arg) && 'command' in arg && 'keybinding' in arg;\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2019 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { IKeyboardLayoutInfo, IKeyboardMapping } from 'native-keymap';\nimport { Event } from '../event';\n\nexport const keyboardPath = '/services/keyboard';\n\nexport const KeyboardLayoutProvider = Symbol('KeyboardLayoutProvider');\n\nexport interface KeyboardLayoutProvider {\n    getNativeLayout(): Promise<NativeKeyboardLayout>;\n}\n\nexport const KeyboardLayoutChangeNotifier = Symbol('KeyboardLayoutChangeNotifier');\n\nexport interface KeyboardLayoutChangeNotifier {\n    onDidChangeNativeLayout: Event<NativeKeyboardLayout>;\n}\n\nexport interface KeyValidationInput {\n    code: string;\n    character: string;\n    shiftKey?: boolean;\n    ctrlKey?: boolean;\n    altKey?: boolean;\n}\n\nexport const KeyValidator = Symbol('KeyValidator');\n\nexport interface KeyValidator {\n    validateKey(input: KeyValidationInput): void;\n}\n\nexport interface NativeKeyboardLayout {\n    info: IKeyboardLayoutInfo;\n    mapping: IKeyboardMapping;\n}\n","/********************************************************************************\n * Copyright (C) 2017 Ericsson and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { injectable } from 'inversify';\nimport { JsonRpcServer } from './messaging/proxy-factory';\n\nexport const ILoggerServer = Symbol('ILoggerServer');\n\nexport const loggerPath = '/services/logger';\n\nexport interface ILoggerServer extends JsonRpcServer<ILoggerClient> {\n    setLogLevel(name: string, logLevel: number): Promise<void>;\n    getLogLevel(name: string): Promise<number>;\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    log(name: string, logLevel: number, message: any, params: any[]): Promise<void>;\n    child(name: string): Promise<void>;\n}\n\nexport const ILoggerClient = Symbol('ILoggerClient');\n\nexport interface ILogLevelChangedEvent {\n    loggerName: string;\n    newLogLevel: number;\n}\n\nexport interface ILoggerClient {\n    onLogLevelChanged(event: ILogLevelChangedEvent): void;\n}\n\n@injectable()\nexport class DispatchingLoggerClient implements ILoggerClient {\n\n    readonly clients = new Set<ILoggerClient>();\n\n    onLogLevelChanged(event: ILogLevelChangedEvent): void {\n        this.clients.forEach(client => client.onLogLevelChanged(event));\n    }\n\n}\n\nexport const rootLoggerName = 'root';\n\nexport enum LogLevel {\n    FATAL = 60,\n    ERROR = 50,\n    WARN = 40,\n    INFO = 30,\n    DEBUG = 20,\n    TRACE = 10\n}\nexport namespace LogLevel {\n    export const strings = new Map<LogLevel, string>([\n        [LogLevel.FATAL, 'fatal'],\n        [LogLevel.ERROR, 'error'],\n        [LogLevel.WARN, 'warn'],\n        [LogLevel.INFO, 'info'],\n        [LogLevel.DEBUG, 'debug'],\n        [LogLevel.TRACE, 'trace']\n    ]);\n\n    export function toString(level: LogLevel): string | undefined {\n        return strings.get(level);\n    }\n\n    export function fromString(levelStr: string): LogLevel | undefined {\n        for (const pair of strings) {\n            if (pair[1] === levelStr) {\n                return pair[0];\n            }\n        }\n\n        return undefined;\n    }\n}\n\n/* eslint-disable @typescript-eslint/no-explicit-any */\nexport namespace ConsoleLogger {\n    type Console = (message?: any, ...optionalParams: any[]) => void;\n    const originalConsoleLog = console.log;\n    const consoles = new Map<LogLevel, Console>([\n        [LogLevel.FATAL, console.error],\n        [LogLevel.ERROR, console.error],\n        [LogLevel.WARN, console.warn],\n        [LogLevel.INFO, console.info],\n        [LogLevel.DEBUG, console.debug],\n        [LogLevel.TRACE, console.trace]\n    ]);\n    export function reset(): void {\n        console.error = consoles.get(LogLevel.ERROR)!;\n        console.warn = consoles.get(LogLevel.WARN)!;\n        console.info = consoles.get(LogLevel.INFO)!;\n        console.debug = consoles.get(LogLevel.DEBUG)!;\n        console.trace = consoles.get(LogLevel.TRACE)!;\n        console.log = originalConsoleLog;\n    }\n    export function log(name: string, logLevel: number, message: string, params: any[]): void {\n        const console = consoles.get(logLevel) || originalConsoleLog;\n        const severity = (LogLevel.strings.get(logLevel) || 'unknown').toUpperCase();\n        console(`${name} ${severity} ${message}`, ...params);\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2017 Ericsson and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { injectable } from 'inversify';\nimport { Emitter, Event } from './event';\nimport { ILoggerClient, ILogLevelChangedEvent } from './logger-protocol';\n\n@injectable()\nexport class LoggerWatcher {\n\n    getLoggerClient(): ILoggerClient {\n        const emitter = this.onLogLevelChangedEmitter;\n        return {\n            onLogLevelChanged(event: ILogLevelChangedEvent): void {\n                emitter.fire(event);\n            }\n        };\n    }\n\n    private onLogLevelChangedEmitter = new Emitter<ILogLevelChangedEvent>();\n\n    get onLogLevelChanged(): Event<ILogLevelChangedEvent> {\n        return this.onLogLevelChangedEmitter.event;\n    }\n\n    // FIXME: get rid of it, backend services should as well set a client on the server\n    fireLogLevelChanged(event: ILogLevelChangedEvent): void {\n        this.onLogLevelChangedEmitter.fire(event);\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2017 Ericsson and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { inject, injectable } from 'inversify';\nimport { LoggerWatcher } from './logger-watcher';\nimport { ILoggerServer, LogLevel, ConsoleLogger, rootLoggerName } from './logger-protocol';\n\n/* eslint-disable @typescript-eslint/no-explicit-any */\n\nexport {\n    LogLevel, rootLoggerName\n};\n\n/* This is to be initialized from container composition root. It can be used outside of the inversify context.  */\nexport let logger: ILogger;\n\n/**\n * Counterpart of the `#setRootLogger(ILogger)`. Restores the `console.xxx` bindings to the original one.\n * Invoking has no side-effect if `setRootLogger` was not called before. Multiple function invocation has\n * no side-effect either.\n */\nexport function unsetRootLogger(): void {\n    if (logger !== undefined) {\n        ConsoleLogger.reset();\n        (<any>logger) = undefined;\n    }\n}\n\nexport function setRootLogger(aLogger: ILogger): void {\n    logger = aLogger;\n    const log = (logLevel: number, message?: any, ...optionalParams: any[]) =>\n        logger.log(logLevel, message, ...optionalParams);\n\n    console.error = log.bind(undefined, LogLevel.ERROR);\n    console.warn = log.bind(undefined, LogLevel.WARN);\n    console.info = log.bind(undefined, LogLevel.INFO);\n    console.debug = log.bind(undefined, LogLevel.DEBUG);\n    console.trace = log.bind(undefined, LogLevel.TRACE);\n    console.log = log.bind(undefined, LogLevel.INFO);\n}\n\nexport type Log = (message: any, ...params: any[]) => void;\nexport type Loggable = (log: Log) => void;\n\nexport const LoggerFactory = Symbol('LoggerFactory');\nexport type LoggerFactory = (name: string) => ILogger;\n\nexport const LoggerName = Symbol('LoggerName');\n\nexport const ILogger = Symbol('ILogger');\n\nexport interface ILogger {\n    /**\n     * Set the log level.\n     *\n     * @param loglevel - The loglevel to set. see Logger.LogLevel for\n     * possible options.\n     */\n    setLogLevel(logLevel: number): Promise<void>\n    /**\n     * Get the log level.\n     *\n     * @returns a Promise to the log level.\n     */\n    getLogLevel(): Promise<number>;\n\n    /**\n     * Test whether the given log level is enabled.\n     */\n    isEnabled(logLevel: number): Promise<boolean>;\n    /**\n     * Resolve if the given log is enabled.\n     */\n    ifEnabled(logLevel: number): Promise<void>;\n    /**\n     * Log a loggable with the given level if it is enabled.\n     */\n    log(logLevel: number, loggable: Loggable): Promise<void>;\n    /**\n     * Log a message with the given level if it is enabled.\n     *\n     * @param logLevel - The loglevel to use.\n     * @param message - The message format string.\n     * @param params - The format string variables.\n     */\n    log(logLevel: number, message: any, ...params: any[]): void;\n\n    /**\n     * Test whether the trace level is enabled.\n     */\n    isTrace(): Promise<boolean>;\n    /**\n     * Resolve if the trace level is enabled.\n     */\n    ifTrace(): Promise<void>;\n    /**\n     * Log a loggable with the trace level if it is enabled.\n     */\n    trace(loggable: Loggable): Promise<void>;\n    /**\n     * Log a message with the trace level if it is enabled.\n     *\n     * @param message - The message format string.\n     * @param params - The format string variables.\n     */\n    trace(message: any, ...params: any[]): Promise<void>;\n\n    /**\n     * Test whether the debug level is enabled.\n     */\n    isDebug(): Promise<boolean>;\n    /**\n     * Resolve if the debug level is enabled.\n     */\n    ifDebug(): Promise<void>;\n    /**\n     * Log a loggable with the debug level if it is enabled.\n     */\n    debug(loggable: Loggable): Promise<void>;\n    /**\n     * Log a message with the debug level if it is enabled.\n     *\n     * @param message - The message format string.\n     * @param params - The format string variables.\n     */\n    debug(message: any, ...params: any[]): Promise<void>;\n\n    /**\n     * Test whether the info level is enabled.\n     */\n    isInfo(): Promise<boolean>;\n    /**\n     * Resolve if the info level is enabled.\n     */\n    ifInfo(): Promise<void>;\n    /**\n     * Log a loggable with the info level if it is enabled.\n     */\n    info(loggable: Loggable): Promise<void>;\n    /**\n     * Log a message with the info level if it is enabled.\n     *\n     * @param message - The message format string.\n     * @param params - The format string variables.\n     */\n    info(message: any, ...params: any[]): Promise<void>;\n\n    /**\n     * Test whether the warn level is enabled.\n     */\n    isWarn(): Promise<boolean>;\n    /**\n     * Resolve if the warn level is enabled.\n     */\n    ifWarn(): Promise<void>;\n    /**\n     * Log a loggable with the warn level if it is enabled.\n     */\n    warn(loggable: Loggable): Promise<void>;\n    /**\n     * Log a message with the warn level if it is enabled.\n     *\n     * @param message - The message format string.\n     * @param params - The format string variables.\n     */\n    warn(message: any, ...params: any[]): Promise<void>;\n\n    /**\n     * Test whether the error level is enabled.\n     */\n    isError(): Promise<boolean>;\n    /**\n     * Resolve if the error level is enabled.\n     */\n    ifError(): Promise<void>;\n    /**\n     * Log a loggable with the error level if it is enabled.\n     */\n    error(loggable: Loggable): Promise<void>;\n    /**\n     * Log a message with the error level.\n     *\n     * @param message - The message format string.\n     * @param params - The format string variables.\n     */\n    error(message: any, ...params: any[]): Promise<void>;\n\n    /**\n     * Test whether the fatal level is enabled.\n     */\n    isFatal(): Promise<boolean>;\n    /**\n     * Resolve if the fatal level is enabled.\n     */\n    ifFatal(): Promise<void>;\n    /**\n     * Log a loggable with the fatal level if it is enabled.\n     */\n    fatal(loggable: Loggable): Promise<void>;\n    /**\n     * Log a message with the fatal level if it is enabled.\n     *\n     * @param message - The message format string.\n     * @param params - The format string variables.\n     */\n    fatal(message: any, ...params: any[]): Promise<void>;\n\n    /**\n     * Create a child logger from this logger.\n     *\n     * @param name - The name of the child logger.\n     */\n    child(name: string): ILogger;\n}\n\n@injectable()\nexport class Logger implements ILogger {\n\n    /* Log level for the logger.  */\n    protected _logLevel: Promise<number>;\n\n    /* A promise resolved when the logger has been created by the backend.  */\n    protected created: Promise<void>;\n\n    /**\n     * Build a new Logger.\n     */\n    constructor(\n        @inject(ILoggerServer) protected readonly server: ILoggerServer,\n        @inject(LoggerWatcher) protected readonly loggerWatcher: LoggerWatcher,\n        @inject(LoggerFactory) protected readonly factory: LoggerFactory,\n        @inject(LoggerName) protected name: string) {\n\n        if (name !== rootLoggerName) {\n            /* Creating a child logger.  */\n            this.created = server.child(name);\n        } else {\n            /* Creating the root logger (it already exists at startup).  */\n            this.created = Promise.resolve();\n        }\n\n        /* Fetch the log level so it's cached in the frontend.  */\n        this._logLevel = this.created.then(_ => this.server.getLogLevel(name));\n\n        /* Update the log level if it changes in the backend. */\n        loggerWatcher.onLogLevelChanged(event => {\n            this.created.then(() => {\n                if (event.loggerName === name) {\n                    this._logLevel = Promise.resolve(event.newLogLevel);\n                }\n            });\n        });\n    }\n\n    setLogLevel(logLevel: number): Promise<void> {\n        return new Promise<void>(resolve => {\n            this.created.then(() => {\n                this._logLevel.then(oldLevel => {\n                    this.server.setLogLevel(this.name, logLevel).then(() => {\n                        this._logLevel = Promise.resolve(logLevel);\n                        resolve();\n                    });\n                });\n            });\n        });\n    }\n    getLogLevel(): Promise<number> {\n        return this._logLevel;\n    }\n\n    isEnabled(logLevel: number): Promise<boolean> {\n        return this._logLevel.then(level =>\n            logLevel >= level\n        );\n    }\n    ifEnabled(logLevel: number): Promise<void> {\n        return new Promise<void>(resolve =>\n            this.isEnabled(logLevel).then(enabled => {\n                if (enabled) {\n                    resolve();\n                }\n            })\n        );\n    }\n    log(logLevel: number, arg2: any | Loggable, ...params: any[]): Promise<void> {\n        return this.getLog(logLevel).then(log => {\n            if (typeof arg2 === 'function') {\n                const loggable = arg2;\n                loggable(log);\n            } else if (arg2) {\n                log(arg2, ...params);\n            }\n        });\n    }\n    protected getLog(logLevel: number): Promise<Log> {\n        return this.ifEnabled(logLevel).then(() =>\n            this.created.then(() =>\n                (message: any, ...params: any[]) =>\n                    this.server.log(this.name, logLevel, this.format(message), params.map(p => this.format(p)))\n            )\n        );\n    }\n    protected format(value: any): any {\n        if (value instanceof Error) {\n            return value.stack || value.toString();\n        }\n        return value;\n    }\n\n    isTrace(): Promise<boolean> {\n        return this.isEnabled(LogLevel.TRACE);\n    }\n    ifTrace(): Promise<void> {\n        return this.ifEnabled(LogLevel.TRACE);\n    }\n    trace(arg: any | Loggable, ...params: any[]): Promise<void> {\n        return this.log(LogLevel.TRACE, arg, ...params);\n    }\n\n    isDebug(): Promise<boolean> {\n        return this.isEnabled(LogLevel.DEBUG);\n    }\n    ifDebug(): Promise<void> {\n        return this.ifEnabled(LogLevel.DEBUG);\n    }\n    debug(arg: any | Loggable, ...params: any[]): Promise<void> {\n        return this.log(LogLevel.DEBUG, arg, ...params);\n    }\n\n    isInfo(): Promise<boolean> {\n        return this.isEnabled(LogLevel.INFO);\n    }\n    ifInfo(): Promise<void> {\n        return this.ifEnabled(LogLevel.INFO);\n    }\n    info(arg: any | Loggable, ...params: any[]): Promise<void> {\n        return this.log(LogLevel.INFO, arg, ...params);\n    }\n\n    isWarn(): Promise<boolean> {\n        return this.isEnabled(LogLevel.WARN);\n    }\n    ifWarn(): Promise<void> {\n        return this.ifEnabled(LogLevel.WARN);\n    }\n    warn(arg: any | Loggable, ...params: any[]): Promise<void> {\n        return this.log(LogLevel.WARN, arg, ...params);\n    }\n\n    isError(): Promise<boolean> {\n        return this.isEnabled(LogLevel.ERROR);\n    }\n    ifError(): Promise<void> {\n        return this.ifEnabled(LogLevel.ERROR);\n    }\n    error(arg: any | Loggable, ...params: any[]): Promise<void> {\n        return this.log(LogLevel.ERROR, arg, ...params);\n    }\n\n    isFatal(): Promise<boolean> {\n        return this.isEnabled(LogLevel.FATAL);\n    }\n    ifFatal(): Promise<void> {\n        return this.ifEnabled(LogLevel.FATAL);\n    }\n    fatal(arg: any | Loggable, ...params: any[]): Promise<void> {\n        return this.log(LogLevel.FATAL, arg, ...params);\n    }\n\n    child(name: string): ILogger {\n        return this.factory(name);\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2019 Ericsson and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { Range } from 'vscode-languageserver-protocol';\n\nexport interface TextDocumentContentChangeDelta {\n    readonly range: Range;\n    readonly rangeLength?: number;\n    readonly text: string;\n}\nexport namespace TextDocumentContentChangeDelta {\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    export function is(arg: any): arg is TextDocumentContentChangeDelta {\n        return !!arg && typeof arg['text'] === 'string' && (typeof arg['rangeLength'] === 'number' || typeof arg['rangeLength'] === 'undefined') && Range.is(arg['range']);\n    }\n\n}\n","/********************************************************************************\n * Copyright (C) 2017 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { injectable, inject, named } from 'inversify';\nimport { Disposable } from './disposable';\nimport { CommandRegistry, Command } from './command';\nimport { ContributionProvider } from './contribution-provider';\n\nexport interface MenuAction {\n    commandId: string\n    /**\n     * In addition to the mandatory command property, an alternative command can be defined.\n     * It will be shown and invoked when pressing Alt while opening a menu.\n     */\n    alt?: string;\n    label?: string\n    icon?: string\n    order?: string\n    when?: string\n}\n\nexport namespace MenuAction {\n    /* Determine whether object is a MenuAction */\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    export function is(arg: MenuAction | any): arg is MenuAction {\n        return !!arg && arg === Object(arg) && 'commandId' in arg;\n    }\n}\n\nexport type MenuPath = string[];\n\nexport const MAIN_MENU_BAR: MenuPath = ['menubar'];\n\nexport const MenuContribution = Symbol('MenuContribution');\n\n/**\n * Representation of a menu contribution.\n */\nexport interface MenuContribution {\n    /**\n     * Registers menus.\n     * @param menus the menu model registry.\n     */\n    registerMenus(menus: MenuModelRegistry): void;\n}\n\n@injectable()\nexport class MenuModelRegistry {\n    protected readonly root = new CompositeMenuNode('');\n\n    constructor(\n        @inject(ContributionProvider) @named(MenuContribution)\n        protected readonly contributions: ContributionProvider<MenuContribution>,\n        @inject(CommandRegistry) protected readonly commands: CommandRegistry\n    ) { }\n\n    onStart(): void {\n        for (const contrib of this.contributions.getContributions()) {\n            contrib.registerMenus(this);\n        }\n    }\n\n    registerMenuAction(menuPath: MenuPath, item: MenuAction): Disposable {\n        const parent = this.findGroup(menuPath);\n        const actionNode = new ActionMenuNode(item, this.commands);\n        return parent.addNode(actionNode);\n    }\n\n    registerSubmenu(menuPath: MenuPath, label: string): Disposable {\n        if (menuPath.length === 0) {\n            throw new Error('The sub menu path cannot be empty.');\n        }\n        const index = menuPath.length - 1;\n        const menuId = menuPath[index];\n        const groupPath = index === 0 ? [] : menuPath.slice(0, index);\n        const parent = this.findGroup(groupPath);\n        let groupNode = this.findSubMenu(parent, menuId);\n        if (!groupNode) {\n            groupNode = new CompositeMenuNode(menuId, label);\n            return parent.addNode(groupNode);\n        } else {\n            if (!groupNode.label) {\n                groupNode.label = label;\n            } else if (groupNode.label !== label) {\n                throw new Error(\"The group '\" + menuPath.join('/') + \"' already has a different label.\");\n            }\n            return { dispose: () => { } };\n        }\n    }\n\n    /**\n     * Unregister menu item from the registry\n     *\n     * @param item\n     */\n    unregisterMenuAction(item: MenuAction, menuPath?: MenuPath): void;\n    /**\n     * Unregister menu item from the registry\n     *\n     * @param command\n     */\n    unregisterMenuAction(command: Command, menuPath?: MenuPath): void;\n    /**\n     * Unregister menu item from the registry\n     *\n     * @param id\n     */\n    unregisterMenuAction(id: string, menuPath?: MenuPath): void;\n    unregisterMenuAction(itemOrCommandOrId: MenuAction | Command | string, menuPath?: MenuPath): void {\n        const id = MenuAction.is(itemOrCommandOrId) ? itemOrCommandOrId.commandId\n            : Command.is(itemOrCommandOrId) ? itemOrCommandOrId.id\n                : itemOrCommandOrId;\n\n        if (menuPath) {\n            const parent = this.findGroup(menuPath);\n            parent.removeNode(id);\n            return;\n        }\n\n        // Recurse all menus, removing any menus matching the id\n        const recurse = (root: CompositeMenuNode) => {\n            root.children.forEach(node => {\n                if (node instanceof CompositeMenuNode) {\n                    node.removeNode(id);\n                    recurse(node);\n                }\n            });\n        };\n        recurse(this.root);\n    }\n\n    protected findGroup(menuPath: MenuPath): CompositeMenuNode {\n        let currentMenu = this.root;\n        for (const segment of menuPath) {\n            currentMenu = this.findSubMenu(currentMenu, segment);\n        }\n        return currentMenu;\n    }\n\n    protected findSubMenu(current: CompositeMenuNode, menuId: string): CompositeMenuNode {\n        const sub = current.children.find(e => e.id === menuId);\n        if (sub instanceof CompositeMenuNode) {\n            return sub;\n        }\n        if (sub) {\n            throw new Error(`'${menuId}' is not a menu group.`);\n        }\n        const newSub = new CompositeMenuNode(menuId);\n        current.addNode(newSub);\n        return newSub;\n    }\n\n    getMenu(menuPath: MenuPath = []): CompositeMenuNode {\n        return this.findGroup(menuPath);\n    }\n}\n\nexport interface MenuNode {\n    readonly label?: string\n    /**\n     * technical identifier\n     */\n    readonly id: string\n\n    readonly sortString: string\n}\n\nexport class CompositeMenuNode implements MenuNode {\n    protected readonly _children: MenuNode[] = [];\n    constructor(\n        public readonly id: string,\n        public label?: string\n    ) { }\n\n    get children(): ReadonlyArray<MenuNode> {\n        return this._children;\n    }\n\n    public addNode(node: MenuNode): Disposable {\n        this._children.push(node);\n        this._children.sort((m1, m2) => {\n            // The navigation group is special as it will always be sorted to the top/beginning of a menu.\n            if (CompositeMenuNode.isNavigationGroup(m1)) {\n                return -1;\n            }\n            if (CompositeMenuNode.isNavigationGroup(m2)) {\n                return 1;\n            }\n            if (m1.sortString < m2.sortString) {\n                return -1;\n            } else if (m1.sortString > m2.sortString) {\n                return 1;\n            } else {\n                return 0;\n            }\n        });\n        return {\n            dispose: () => {\n                const idx = this._children.indexOf(node);\n                if (idx >= 0) {\n                    this._children.splice(idx, 1);\n                }\n            }\n        };\n    }\n\n    public removeNode(id: string): void {\n        const node = this._children.find(n => n.id === id);\n        if (node) {\n            const idx = this._children.indexOf(node);\n            if (idx >= 0) {\n                this._children.splice(idx, 1);\n            }\n        }\n    }\n\n    get sortString(): string {\n        return this.id;\n    }\n\n    get isSubmenu(): boolean {\n        return this.label !== undefined;\n    }\n\n    static isNavigationGroup(node: MenuNode): node is CompositeMenuNode {\n        return node instanceof CompositeMenuNode && node.id === 'navigation';\n    }\n}\n\nexport class ActionMenuNode implements MenuNode {\n\n    readonly altNode: ActionMenuNode | undefined;\n\n    constructor(\n        public readonly action: MenuAction,\n        protected readonly commands: CommandRegistry\n    ) {\n        if (action.alt) {\n            this.altNode = new ActionMenuNode({ commandId: action.alt }, commands);\n        }\n    }\n\n    get id(): string {\n        return this.action.commandId;\n    }\n\n    get label(): string {\n        if (this.action.label) {\n            return this.action.label;\n        }\n        const cmd = this.commands.getCommand(this.action.commandId);\n        if (!cmd) {\n            throw new Error(`A command with id '${this.action.commandId}' does not exist.`);\n        }\n        return cmd.label || cmd.id;\n    }\n\n    get icon(): string | undefined {\n        if (this.action.icon) {\n            return this.action.icon;\n        }\n        const command = this.commands.getCommand(this.action.commandId);\n        return command && command.iconClass;\n    }\n\n    get sortString(): string {\n        return this.action.order || this.label;\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2017 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { injectable } from 'inversify';\nimport { CancellationToken } from './cancellation';\n\nexport const messageServicePath = '/services/messageService';\n\nexport enum MessageType {\n    Error = 1,\n    Warning = 2,\n    Info = 3,\n    Log = 4,\n    Progress = 5\n}\n\nexport interface Message {\n    readonly type?: MessageType;\n    readonly text: string;\n    readonly actions?: string[];\n    readonly options?: MessageOptions;\n    readonly source?: string;\n}\n\nexport interface ProgressMessage extends Message {\n    readonly type?: MessageType.Progress;\n    readonly options?: ProgressMessageOptions;\n}\nexport namespace ProgressMessage {\n    export const Cancel = 'Cancel';\n    export function isCancelable(message: ProgressMessage): boolean {\n        return !message.options\n            || message.options.cancelable === undefined\n            || message.options.cancelable === true;\n    }\n}\n\nexport interface MessageOptions {\n    /**\n     * Timeout in milliseconds.\n     * `0` and negative values are treated as no timeout.\n     */\n    readonly timeout?: number;\n}\n\nexport interface ProgressMessageOptions extends MessageOptions {\n    /**\n     * Default: `true`\n     */\n    readonly cancelable?: boolean;\n    /**\n     * Known values: `notification` | `window` | `scm`\n     */\n    readonly location?: string;\n}\n\nexport interface Progress {\n    readonly id: string;\n    readonly report: (update: ProgressUpdate) => void;\n    readonly cancel: () => void;\n    readonly result: Promise<string | undefined>;\n}\n\nexport interface ProgressUpdate {\n    readonly message?: string;\n    readonly work?: { done: number, total: number };\n}\n\n@injectable()\nexport class MessageClient {\n\n    /**\n     * Show a message of the given type and possible actions to the user.\n     * Resolve to a chosen action.\n     * Never reject.\n     *\n     * To be implemented by an extension, e.g. by the messages extension.\n     */\n    showMessage(message: Message): Promise<string | undefined> {\n        console.info(message.text);\n        return Promise.resolve(undefined);\n    }\n\n    /**\n     * Show a progress message with possible actions to user.\n     *\n     * To be implemented by an extension, e.g. by the messages extension.\n     */\n    showProgress(progressId: string, message: ProgressMessage, cancellationToken: CancellationToken): Promise<string | undefined> {\n        console.info(message.text);\n        return Promise.resolve(undefined);\n    }\n\n    /**\n     * Update a previously created progress message.\n     *\n     * To be implemented by an extension, e.g. by the messages extension.\n     */\n    reportProgress(progressId: string, update: ProgressUpdate, message: ProgressMessage, cancellationToken: CancellationToken): Promise<void> {\n        return Promise.resolve(undefined);\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2017 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { injectable, inject } from 'inversify';\nimport {\n    MessageClient,\n    MessageType,\n    MessageOptions,\n    Progress,\n    ProgressUpdate,\n    ProgressMessage\n} from './message-service-protocol';\nimport { CancellationTokenSource } from './cancellation';\n\n@injectable()\nexport class MessageService {\n\n    constructor(\n        @inject(MessageClient) protected readonly client: MessageClient\n    ) { }\n\n    log<T extends string>(message: string, ...actions: T[]): Promise<T | undefined>;\n    log<T extends string>(message: string, options?: MessageOptions, ...actions: T[]): Promise<T | undefined>;\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    log(message: string, ...args: any[]): Promise<string | undefined> {\n        return this.processMessage(MessageType.Log, message, args);\n    }\n\n    info<T extends string>(message: string, ...actions: T[]): Promise<T | undefined>;\n    info<T extends string>(message: string, options?: MessageOptions, ...actions: T[]): Promise<T | undefined>;\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    info(message: string, ...args: any[]): Promise<string | undefined> {\n        return this.processMessage(MessageType.Info, message, args);\n    }\n\n    warn<T extends string>(message: string, ...actions: T[]): Promise<T | undefined>;\n    warn<T extends string>(message: string, options?: MessageOptions, ...actions: T[]): Promise<T | undefined>;\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    warn(message: string, ...args: any[]): Promise<string | undefined> {\n        return this.processMessage(MessageType.Warning, message, args);\n    }\n\n    error<T extends string>(message: string, ...actions: T[]): Promise<T | undefined>;\n    error<T extends string>(message: string, options?: MessageOptions, ...actions: T[]): Promise<T | undefined>;\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    error(message: string, ...args: any[]): Promise<string | undefined> {\n        return this.processMessage(MessageType.Error, message, args);\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    protected processMessage(type: MessageType, text: string, args?: any[]): Promise<string | undefined> {\n        if (!!args && args.length > 0) {\n            const first = args[0];\n            const actions = Array.from(new Set<string>(args.filter(a => typeof a === 'string')));\n            const options = (typeof first === 'object' && !Array.isArray(first))\n                ? <MessageOptions>first\n                : undefined;\n            return this.client.showMessage({ type, options, text, actions });\n        }\n        return this.client.showMessage({ type, text });\n    }\n\n    async showProgress(message: ProgressMessage, onDidCancel?: () => void): Promise<Progress> {\n        const id = this.newProgressId();\n        const cancellationSource = new CancellationTokenSource();\n        const report = (update: ProgressUpdate) => {\n            this.client.reportProgress(id, update, message, cancellationSource.token);\n        };\n        const actions = new Set<string>(message.actions);\n        if (ProgressMessage.isCancelable(message)) {\n            actions.delete(ProgressMessage.Cancel);\n            actions.add(ProgressMessage.Cancel);\n        }\n        const clientMessage = { ...message, actions: Array.from(actions) };\n        const result = this.client.showProgress(id, clientMessage, cancellationSource.token);\n        if (ProgressMessage.isCancelable(message) && typeof onDidCancel === 'function') {\n            result.then(value => {\n                if (value === ProgressMessage.Cancel) {\n                    onDidCancel();\n                }\n            });\n        }\n        return {\n            id,\n            cancel: () => cancellationSource.cancel(),\n            result,\n            report\n        };\n    }\n\n    private progressIdPrefix = Math.random().toString(36).substring(5);\n    private counter = 0;\n    protected newProgressId(): string {\n        return `${this.progressIdPrefix}-${++this.counter}`;\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2017 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { Message } from 'vscode-jsonrpc';\nimport { ILogger } from '../../common';\n\nexport interface ResolvedConnectionErrorHandlerOptions {\n    readonly serverName: string\n    readonly logger: ILogger\n    /**\n     * The maximum amount of errors allowed before stopping the server.\n     */\n    readonly maxErrors: number\n    /**\n     * The minimum amount of restarts allowed in the restart interval.\n     */\n    readonly maxRestarts: number\n    /**\n     * In minutes.\n     */\n    readonly restartInterval: number\n}\n\nexport type ConnectionErrorHandlerOptions = Partial<ResolvedConnectionErrorHandlerOptions> & {\n    readonly serverName: string\n    readonly logger: ILogger\n};\n\nexport class ConnectionErrorHandler {\n\n    protected readonly options: ResolvedConnectionErrorHandlerOptions;\n    constructor(options: ConnectionErrorHandlerOptions) {\n        this.options = {\n            maxErrors: 3,\n            maxRestarts: 5,\n            restartInterval: 3,\n            ...options\n        };\n    }\n\n    shouldStop(error: Error, message?: Message, count?: number): boolean {\n        return !count || count > this.options.maxErrors;\n    }\n\n    protected readonly restarts: number[] = [];\n    shouldRestart(): boolean {\n        this.restarts.push(Date.now());\n        if (this.restarts.length <= this.options.maxRestarts) {\n            return true;\n        }\n        const diff = this.restarts[this.restarts.length - 1] - this.restarts[0];\n        if (diff <= this.options.restartInterval * 60 * 1000) {\n            // eslint-disable-next-line max-len\n            this.options.logger.error(`The ${this.options.serverName} server crashed ${this.options.maxRestarts} times in the last ${this.options.restartInterval} minutes. The server will not be restarted.`);\n            return false;\n        }\n        this.restarts.shift();\n        return true;\n    }\n\n}\n","/********************************************************************************\n * Copyright (C) 2017 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { MessageConnection } from 'vscode-jsonrpc';\n\nexport const ConnectionHandler = Symbol('ConnectionHandler');\n\nexport interface ConnectionHandler {\n    readonly path: string;\n    onConnection(connection: MessageConnection): void;\n}\n","/********************************************************************************\n * Copyright (C) 2017 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nexport * from './handler';\nexport * from './proxy-factory';\nexport * from './connection-error-handler';\n","/********************************************************************************\n * Copyright (C) 2017 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\n/* eslint-disable @typescript-eslint/no-explicit-any */\n\nimport { MessageConnection, ResponseError } from 'vscode-jsonrpc';\nimport { ApplicationError } from '../application-error';\nimport { Event, Emitter } from '../event';\nimport { Disposable } from '../disposable';\nimport { ConnectionHandler } from './handler';\n\nexport type JsonRpcServer<Client> = Disposable & {\n    /**\n     * If this server is a proxy to a remote server then\n     * a client is used as a local object\n     * to handle JSON-RPC messages from the remote server.\n     */\n    setClient(client: Client | undefined): void;\n};\n\nexport interface JsonRpcConnectionEventEmitter {\n    readonly onDidOpenConnection: Event<void>;\n    readonly onDidCloseConnection: Event<void>;\n}\nexport type JsonRpcProxy<T> = T & JsonRpcConnectionEventEmitter;\n\nexport class JsonRpcConnectionHandler<T extends object> implements ConnectionHandler {\n    constructor(\n        readonly path: string,\n        readonly targetFactory: (proxy: JsonRpcProxy<T>) => any\n    ) { }\n\n    onConnection(connection: MessageConnection): void {\n        const factory = new JsonRpcProxyFactory<T>(this.path);\n        const proxy = factory.createProxy();\n        factory.target = this.targetFactory(proxy);\n        factory.listen(connection);\n    }\n}\n\n/**\n * Factory for JSON-RPC proxy objects.\n *\n * A JSON-RPC proxy exposes the programmatic interface of an object through\n * JSON-RPC.  This allows remote programs to call methods of this objects by\n * sending JSON-RPC requests.  This takes place over a bi-directional stream,\n * where both ends can expose an object and both can call methods each other's\n * exposed object.\n *\n * For example, assuming we have an object of the following type on one end:\n *\n *     class Foo {\n *         bar(baz: number): number { return baz + 1 }\n *     }\n *\n * which we want to expose through a JSON-RPC interface.  We would do:\n *\n *     let target = new Foo()\n *     let factory = new JsonRpcProxyFactory<Foo>('/foo', target)\n *     factory.onConnection(connection)\n *\n * The party at the other end of the `connection`, in order to remotely call\n * methods on this object would do:\n *\n *     let factory = new JsonRpcProxyFactory<Foo>('/foo')\n *     factory.onConnection(connection)\n *     let proxy = factory.createProxy();\n *     let result = proxy.bar(42)\n *     // result is equal to 43\n *\n * One the wire, it would look like this:\n *\n *     --> {\"jsonrpc\": \"2.0\", \"id\": 0, \"method\": \"bar\", \"params\": {\"baz\": 42}}\n *     <-- {\"jsonrpc\": \"2.0\", \"id\": 0, \"result\": 43}\n *\n * Note that in the code of the caller, we didn't pass a target object to\n * JsonRpcProxyFactory, because we don't want/need to expose an object.\n * If we had passed a target object, the other side could've called methods on\n * it.\n *\n * @param <T> - The type of the object to expose to JSON-RPC.\n */\nexport class JsonRpcProxyFactory<T extends object> implements ProxyHandler<T> {\n\n    protected readonly onDidOpenConnectionEmitter = new Emitter<void>();\n    protected readonly onDidCloseConnectionEmitter = new Emitter<void>();\n\n    protected connectionPromiseResolve: (connection: MessageConnection) => void;\n    protected connectionPromise: Promise<MessageConnection>;\n\n    /**\n     * Build a new JsonRpcProxyFactory.\n     *\n     * @param target - The object to expose to JSON-RPC methods calls.  If this\n     *   is omitted, the proxy won't be able to handle requests, only send them.\n     */\n    constructor(public target?: any) {\n        this.waitForConnection();\n    }\n\n    protected waitForConnection(): void {\n        this.connectionPromise = new Promise(resolve =>\n            this.connectionPromiseResolve = resolve\n        );\n        this.connectionPromise.then(connection => {\n            connection.onClose(() =>\n                this.onDidCloseConnectionEmitter.fire(undefined)\n            );\n            this.onDidOpenConnectionEmitter.fire(undefined);\n        });\n    }\n\n    /**\n     * Connect a MessageConnection to the factory.\n     *\n     * This connection will be used to send/receive JSON-RPC requests and\n     * response.\n     */\n    listen(connection: MessageConnection): void {\n        if (this.target) {\n            for (const prop in this.target) {\n                if (typeof this.target[prop] === 'function') {\n                    connection.onRequest(prop, (...args) => this.onRequest(prop, ...args));\n                    connection.onNotification(prop, (...args) => this.onNotification(prop, ...args));\n                }\n            }\n        }\n        connection.onDispose(() => this.waitForConnection());\n        connection.listen();\n        this.connectionPromiseResolve(connection);\n    }\n\n    /**\n     * Process an incoming JSON-RPC method call.\n     *\n     * onRequest is called when the JSON-RPC connection received a method call\n     * request.  It calls the corresponding method on [[target]].\n     *\n     * The return value is a Promise object that is resolved with the return\n     * value of the method call, if it is successful.  The promise is rejected\n     * if the called method does not exist or if it throws.\n     *\n     * @returns A promise of the method call completion.\n     */\n    protected async onRequest(method: string, ...args: any[]): Promise<any> {\n        try {\n            return await this.target[method](...args);\n        } catch (error) {\n            const e = this.serializeError(error);\n            if (e instanceof ResponseError) {\n                throw e;\n            }\n            const reason = e.message || '';\n            const stack = e.stack || '';\n            console.error(`Request ${method} failed with error: ${reason}`, stack);\n            throw e;\n        }\n    }\n\n    /**\n     * Process an incoming JSON-RPC notification.\n     *\n     * Same as [[onRequest]], but called on incoming notifications rather than\n     * methods calls.\n     */\n    protected onNotification(method: string, ...args: any[]): void {\n        this.target[method](...args);\n    }\n\n    /**\n     * Create a Proxy exposing the interface of an object of type T.  This Proxy\n     * can be used to do JSON-RPC method calls on the remote target object as\n     * if it was local.\n     *\n     * If `T` implements `JsonRpcServer` then a client is used as a target object for a remote target object.\n     */\n    createProxy(): JsonRpcProxy<T> {\n        const result = new Proxy<T>(this as any, this);\n        return result as any;\n    }\n\n    /**\n     * Get a callable object that executes a JSON-RPC method call.\n     *\n     * Getting a property on the Proxy object returns a callable that, when\n     * called, executes a JSON-RPC call.  The name of the property defines the\n     * method to be called.  The callable takes a variable number of arguments,\n     * which are passed in the JSON-RPC method call.\n     *\n     * For example, if you have a Proxy object:\n     *\n     *     let fooProxyFactory = JsonRpcProxyFactory<Foo>('/foo')\n     *     let fooProxy = fooProxyFactory.createProxy()\n     *\n     * accessing `fooProxy.bar` will return a callable that, when called,\n     * executes a JSON-RPC method call to method `bar`.  Therefore, doing\n     * `fooProxy.bar()` will call the `bar` method on the remote Foo object.\n     *\n     * @param target - unused.\n     * @param p - The property accessed on the Proxy object.\n     * @param receiver - unused.\n     * @returns A callable that executes the JSON-RPC call.\n     */\n    get(target: T, p: PropertyKey, receiver: any): any {\n        if (p === 'setClient') {\n            return (client: any) => {\n                this.target = client;\n            };\n        }\n        if (p === 'onDidOpenConnection') {\n            return this.onDidOpenConnectionEmitter.event;\n        }\n        if (p === 'onDidCloseConnection') {\n            return this.onDidCloseConnectionEmitter.event;\n        }\n        const isNotify = this.isNotification(p);\n        return (...args: any[]) => {\n            const method = p.toString();\n            const capturedError = new Error(`Request '${method}' failed`);\n            return this.connectionPromise.then(connection =>\n                new Promise((resolve, reject) => {\n                    try {\n                        if (isNotify) {\n                            connection.sendNotification(method, ...args);\n                            resolve();\n                        } else {\n                            const resultPromise = connection.sendRequest(method, ...args) as Promise<any>;\n                            resultPromise\n                                .catch((err: any) => reject(this.deserializeError(capturedError, err)))\n                                .then((result: any) => resolve(result));\n                        }\n                    } catch (err) {\n                        reject(err);\n                    }\n                })\n            );\n        };\n    }\n\n    /**\n     * Return whether the given property represents a notification.\n     *\n     * A property leads to a notification rather than a method call if its name\n     * begins with `notify` or `on`.\n     *\n     * @param p - The property being called on the proxy.\n     * @return Whether `p` represents a notification.\n     */\n    protected isNotification(p: PropertyKey): boolean {\n        return p.toString().startsWith('notify') || p.toString().startsWith('on');\n    }\n\n    protected serializeError(e: any): any {\n        if (ApplicationError.is(e)) {\n            return new ResponseError(e.code, '',\n                Object.assign({ kind: 'application' }, e.toJson())\n            );\n        }\n        return e;\n    }\n    protected deserializeError(capturedError: Error, e: any): any {\n        if (e instanceof ResponseError) {\n            const capturedStack = capturedError.stack || '';\n            if (e.data && e.data.kind === 'application') {\n                const { stack, data, message } = e.data;\n                return ApplicationError.fromJson(e.code, {\n                    message: message || capturedError.message,\n                    data,\n                    stack: `${capturedStack}\\nCaused by: ${stack}`\n                });\n            }\n            e.stack = capturedStack;\n        }\n        return e;\n    }\n\n}\n","/********************************************************************************\n * Copyright (C) 2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\n/* eslint-disable @typescript-eslint/no-explicit-any */\n\nimport { IWebSocket } from 'vscode-ws-jsonrpc/lib/socket/socket';\nimport { Disposable, DisposableCollection } from '../disposable';\nimport { Emitter } from '../event';\n\nexport class WebSocketChannel implements IWebSocket {\n\n    static wsPath = '/services';\n\n    protected readonly closeEmitter = new Emitter<[number, string]>();\n    protected readonly toDispose = new DisposableCollection(this.closeEmitter);\n\n    constructor(\n        readonly id: number,\n        protected readonly doSend: (content: string) => void\n    ) { }\n\n    dispose(): void {\n        this.toDispose.dispose();\n    }\n\n    protected checkNotDisposed(): void {\n        if (this.toDispose.disposed) {\n            throw new Error('The channel has been disposed.');\n        }\n    }\n\n    handleMessage(message: WebSocketChannel.Message): void {\n        if (message.kind === 'ready') {\n            this.fireOpen();\n        } else if (message.kind === 'data') {\n            this.fireMessage(message.content);\n        } else if (message.kind === 'close') {\n            this.fireClose(message.code, message.reason);\n        }\n    }\n\n    open(path: string): void {\n        this.checkNotDisposed();\n        this.doSend(JSON.stringify(<WebSocketChannel.OpenMessage>{\n            kind: 'open',\n            id: this.id,\n            path\n        }));\n    }\n\n    ready(): void {\n        this.checkNotDisposed();\n        this.doSend(JSON.stringify(<WebSocketChannel.ReadyMessage>{\n            kind: 'ready',\n            id: this.id\n        }));\n    }\n\n    send(content: string): void {\n        this.checkNotDisposed();\n        this.doSend(JSON.stringify(<WebSocketChannel.DataMessage>{\n            kind: 'data',\n            id: this.id,\n            content\n        }));\n    }\n\n    close(code: number = 1000, reason: string = ''): void {\n        if (this.closing) {\n            // Do not try to close the channel if it is already closing.\n            return;\n        }\n        this.checkNotDisposed();\n        this.doSend(JSON.stringify(<WebSocketChannel.CloseMessage>{\n            kind: 'close',\n            id: this.id,\n            code,\n            reason\n        }));\n        this.fireClose(code, reason);\n    }\n\n    tryClose(code: number = 1000, reason: string = ''): void {\n        if (this.closing || this.toDispose.disposed) {\n            // Do not try to close the channel if it is already closing or disposed.\n            return;\n        }\n        this.doSend(JSON.stringify(<WebSocketChannel.CloseMessage>{\n            kind: 'close',\n            id: this.id,\n            code,\n            reason\n        }));\n        this.fireClose(code, reason);\n    }\n\n    protected fireOpen: () => void = () => { };\n    onOpen(cb: () => void): void {\n        this.checkNotDisposed();\n        this.fireOpen = cb;\n        this.toDispose.push(Disposable.create(() => this.fireOpen = () => { }));\n    }\n\n    protected fireMessage: (data: any) => void = () => { };\n    onMessage(cb: (data: any) => void): void {\n        this.checkNotDisposed();\n        this.fireMessage = cb;\n        this.toDispose.push(Disposable.create(() => this.fireMessage = () => { }));\n    }\n\n    fireError: (reason: any) => void = () => { };\n    onError(cb: (reason: any) => void): void {\n        this.checkNotDisposed();\n        this.fireError = cb;\n        this.toDispose.push(Disposable.create(() => this.fireError = () => { }));\n    }\n\n    protected closing = false;\n    protected fireClose(code: number, reason: string): void {\n        if (this.closing) {\n            return;\n        }\n        this.closing = true;\n        try {\n            this.closeEmitter.fire([code, reason]);\n        } finally {\n            this.closing = false;\n        }\n        this.dispose();\n    }\n    onClose(cb: (code: number, reason: string) => void): Disposable {\n        this.checkNotDisposed();\n        return this.closeEmitter.event(([code, reason]) => cb(code, reason));\n    }\n\n}\nexport namespace WebSocketChannel {\n    export interface OpenMessage {\n        kind: 'open'\n        id: number\n        path: string\n    }\n    export interface ReadyMessage {\n        kind: 'ready'\n        id: number\n    }\n    export interface DataMessage {\n        kind: 'data'\n        id: number\n        content: string\n    }\n    export interface CloseMessage {\n        kind: 'close'\n        id: number\n        code: number\n        reason: string\n    }\n    export type Message = OpenMessage | ReadyMessage | DataMessage | CloseMessage;\n}\n","/********************************************************************************\n * Copyright (C) 2018 Ericsson and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nexport function deepClone<T>(obj: T): T {\n    if (!obj || typeof obj !== 'object') {\n        return obj;\n    }\n    if (obj instanceof RegExp) {\n        return obj;\n    }\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    const result: any = Array.isArray(obj) ? [] : {};\n    Object.keys(obj).forEach((key: string) => {\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        const prop = (<any>obj)[key];\n        if (prop && typeof prop === 'object') {\n            result[key] = deepClone(prop);\n        } else {\n            result[key] = prop;\n        }\n    });\n    return result;\n}\n\nexport function deepFreeze<T>(obj: T): T {\n    if (!obj || typeof obj !== 'object') {\n        return obj;\n    }\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    const stack: any[] = [obj];\n    while (stack.length > 0) {\n        const objectToFreeze = stack.shift();\n        Object.freeze(objectToFreeze);\n        for (const key in objectToFreeze) {\n            if (_hasOwnProperty.call(objectToFreeze, key)) {\n                const prop = objectToFreeze[key];\n                if (typeof prop === 'object' && !Object.isFrozen(prop)) {\n                    stack.push(prop);\n                }\n            }\n        }\n    }\n    return obj;\n}\n\nconst _hasOwnProperty = Object.prototype.hasOwnProperty;\n\nexport function notEmpty<T>(arg: T | undefined | null): arg is T {\n    // eslint-disable-next-line no-null/no-null\n    return arg !== undefined && arg !== null;\n}\n\n/**\n * `true` if the argument is an empty object. Otherwise, `false`.\n */\nexport function isEmpty(arg: Object): boolean {\n    return Object.keys(arg).length === 0 && arg.constructor === Object;\n}\n","/********************************************************************************\n * Copyright (C) 2017 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nfunction is(userAgent: string, platform: string): boolean {\n    if (typeof navigator !== 'undefined') {\n        if (navigator.userAgent && navigator.userAgent.indexOf(userAgent) >= 0) {\n            return true;\n        }\n    }\n    if (typeof process !== 'undefined') {\n        return (process.platform === platform);\n    }\n    return false;\n}\n\nexport const isWindows = is('Windows', 'win32');\nexport const isOSX = is('Mac', 'darwin');\n\nexport type CMD = [string, string[]];\nexport function cmd(command: string, ...args: string[]): CMD {\n    return [\n        isWindows ? 'cmd' : command,\n        isWindows ? ['/c', command, ...args] : args\n    ];\n}\n\nexport namespace OS {\n\n    /**\n     * Enumeration of the supported operating systems.\n     */\n    export enum Type {\n        Windows = 'Windows',\n        Linux = 'Linux',\n        OSX = 'OSX'\n    }\n\n    /**\n     * Returns with the type of the operating system. If it is neither [Windows](isWindows) nor [OS X](isOSX), then\n     * it always return with the `Linux` OS type.\n     */\n    export function type(): OS.Type {\n        if (isWindows) {\n            return Type.Windows;\n        }\n        if (isOSX) {\n            return Type.OSX;\n        }\n        return Type.Linux;\n    }\n\n}\n","/********************************************************************************\n * Copyright (C) 2017 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\n/**\n * On POSIX:\n * \n *           dir             base    \n *                \n *  root                 name  ext \n * \"  /     home/user/dir / file  .txt \"\n * \n *\n * On Windows:\n * \n *            dir            base    \n *                \n *  root                 name  ext \n * \"  /c: / home/user/dir / file  .txt \"\n * \n */\nexport class Path {\n    static separator: '/' = '/';\n\n    static isDrive(segment: string): boolean {\n        return segment.endsWith(':');\n    }\n\n    /**\n     * vscode-uri always normalizes drive letters to lower case:\n     * https://github.com/Microsoft/vscode-uri/blob/b1d3221579f97f28a839b6f996d76fc45e9964d8/src/index.ts#L1025\n     * Theia path should be adjusted to this.\n     */\n    static normalizeDrive(path: string): string {\n        // lower-case windows drive letters in /C:/fff or C:/fff\n        if (path.length >= 3 && path.charCodeAt(0) === 47 /* '/' */ && path.charCodeAt(2) === 58 /* ':' */) {\n            const code = path.charCodeAt(1);\n            if (code >= 65 /* A */ && code <= 90 /* Z */) {\n                path = `/${String.fromCharCode(code + 32)}:${path.substr(3)}`; // \"/c:\".length === 3\n            }\n        } else if (path.length >= 2 && path.charCodeAt(1) === 58 /* ':' */) {\n            const code = path.charCodeAt(0);\n            if (code >= 65 /* A */ && code <= 90 /* Z */) {\n                path = `${String.fromCharCode(code + 32)}:${path.substr(2)}`; // \"/c:\".length === 3\n            }\n        }\n        return path;\n    }\n\n    readonly isAbsolute: boolean;\n    readonly isRoot: boolean;\n    readonly root: Path | undefined;\n    readonly base: string;\n    readonly name: string;\n    readonly ext: string;\n\n    private _dir: Path;\n    private readonly raw: string;\n\n    /**\n     * The raw should be normalized, meaning that only '/' is allowed as a path separator.\n     */\n    constructor(\n        raw: string\n    ) {\n        this.raw = Path.normalizeDrive(raw);\n        const firstIndex = raw.indexOf(Path.separator);\n        const lastIndex = raw.lastIndexOf(Path.separator);\n        this.isAbsolute = firstIndex === 0;\n        this.base = lastIndex === -1 ? raw : raw.substr(lastIndex + 1);\n        this.isRoot = this.isAbsolute && firstIndex === lastIndex && (!this.base || Path.isDrive(this.base));\n        this.root = this.computeRoot();\n\n        const extIndex = this.base.lastIndexOf('.');\n        this.name = extIndex === -1 ? this.base : this.base.substr(0, extIndex);\n        this.ext = extIndex === -1 ? '' : this.base.substr(extIndex);\n    }\n\n    protected computeRoot(): Path | undefined {\n        // '/' -> '/'\n        // '/c:' -> '/c:'\n        if (this.isRoot) {\n            return this;\n        }\n        // 'foo/bar' -> `undefined`\n        if (!this.isAbsolute) {\n            return undefined;\n        }\n        const index = this.raw.indexOf(Path.separator, Path.separator.length);\n        if (index === -1) {\n            // '/foo/bar' -> '/'\n            return new Path(Path.separator);\n        }\n        // '/c:/foo/bar' -> '/c:'\n        // '/foo/bar' -> '/'\n        return new Path(this.raw.substr(0, index)).root;\n    }\n\n    /**\n     * Returns the parent directory if it exists (`hasDir === true`) or `this` otherwise.\n     */\n    get dir(): Path {\n        if (this._dir === undefined) {\n            this._dir = this.computeDir();\n        }\n        return this._dir;\n    }\n\n    /**\n     * Returns `true` if this has a parent directory, `false` otherwise.\n     *\n     * _This implementation returns `true` if and only if this is not the root dir and\n     * there is a path separator in the raw path._\n     */\n    get hasDir(): boolean {\n        return !this.isRoot && this.raw.lastIndexOf(Path.separator) !== -1;\n    }\n\n    protected computeDir(): Path {\n        if (!this.hasDir) {\n            return this;\n        }\n        const lastIndex = this.raw.lastIndexOf(Path.separator);\n        if (this.isAbsolute) {\n            const firstIndex = this.raw.indexOf(Path.separator);\n            if (firstIndex === lastIndex) {\n                return new Path(this.raw.substr(0, firstIndex + 1));\n            }\n        }\n        return new Path(this.raw.substr(0, lastIndex));\n    }\n\n    join(...paths: string[]): Path {\n        const relativePath = paths.filter(s => !!s).join(Path.separator);\n        if (!relativePath) {\n            return this;\n        }\n        if (this.raw.endsWith(Path.separator)) {\n            return new Path(this.raw + relativePath);\n        }\n        return new Path(this.raw + Path.separator + relativePath);\n    }\n\n    toString(): string {\n        return this.raw;\n    }\n\n    relative(path: Path): Path | undefined {\n        if (this.raw === path.raw) {\n            return new Path('');\n        }\n        if (!this.raw || !path.raw) {\n            return undefined;\n        }\n        const raw = this.base ? this.raw + Path.separator : this.raw;\n        if (!path.raw.startsWith(raw)) {\n            return undefined;\n        }\n        const relativePath = path.raw.substr(raw.length);\n        return new Path(relativePath);\n    }\n\n    isEqualOrParent(path: Path): boolean {\n        return !!this.relative(path);\n    }\n\n    relativity(path: Path): number {\n        const relative = this.relative(path);\n        if (relative) {\n            const relativeStr = relative.toString();\n            if (relativeStr === '') {\n                return 0;\n            }\n            return relativeStr.split(Path.separator).length;\n        }\n        return -1;\n    }\n\n    /*\n     * return a normalized Path, resolving '..' and '.' segments\n     */\n    normalize(): Path {\n        const trailingSlash = this.raw.endsWith('/');\n        const pathArray = this.toString().split('/');\n        const resultArray: string[] = [];\n        pathArray.forEach((value, index) => {\n            if (!value || value === '.') {\n                return;\n            }\n            if (value === '..') {\n                if (resultArray.length && resultArray[resultArray.length - 1] !== '..') {\n                    resultArray.pop();\n                } else if (!this.isAbsolute) {\n                    resultArray.push('..');\n                }\n            } else {\n                resultArray.push(value);\n            }\n        });\n        if (resultArray.length === 0) {\n            if (this.isRoot) {\n                return new Path('/');\n            } else {\n                return new Path('.');\n            }\n        }\n        return new Path((this.isAbsolute ? '/' : '') + resultArray.join('/') + (trailingSlash ? '/' : ''));\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2019 Ericsson and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\n/* eslint-disable @typescript-eslint/no-explicit-any */\n\nimport { PreferenceScope } from './preference-scope';\n\nexport interface PreferenceSchema {\n    [name: string]: any,\n    scope?: 'application' | 'window' | 'resource' | PreferenceScope,\n    overridable?: boolean;\n    properties: PreferenceSchemaProperties\n}\nexport namespace PreferenceSchema {\n    export function is(obj: Object | undefined): obj is PreferenceSchema {\n        return !!obj && ('properties' in obj) && PreferenceSchemaProperties.is((<any>obj)['properties']);\n    }\n    export function getDefaultScope(schema: PreferenceSchema): PreferenceScope {\n        let defaultScope: PreferenceScope = PreferenceScope.Workspace;\n        if (!PreferenceScope.is(schema.scope)) {\n            defaultScope = PreferenceScope.fromString(<string>schema.scope) || PreferenceScope.Workspace;\n        } else {\n            defaultScope = schema.scope;\n        }\n        return defaultScope;\n    }\n}\n\nexport interface PreferenceSchemaProperties {\n    [name: string]: PreferenceSchemaProperty\n}\nexport namespace PreferenceSchemaProperties {\n    export function is(obj: Object | undefined): obj is PreferenceSchemaProperties {\n        return !!obj && typeof obj === 'object';\n    }\n}\n\nexport interface PreferenceDataSchema {\n    [name: string]: any,\n    scope?: PreferenceScope,\n    properties: {\n        [name: string]: PreferenceDataProperty\n    }\n    patternProperties: {\n        [name: string]: PreferenceDataProperty\n    };\n}\n\nexport interface PreferenceItem {\n    type?: JsonType | JsonType[];\n    minimum?: number;\n    /**\n     * content assist (UI) default value\n     */\n    default?: any;\n    /**\n     * preference default value, if `undefined` then `default`\n     */\n    defaultValue?: any;\n    enum?: string[];\n    items?: PreferenceItem;\n    properties?: { [name: string]: PreferenceItem };\n    additionalProperties?: object | boolean;\n    [name: string]: any;\n    overridable?: boolean;\n}\n\nexport interface PreferenceSchemaProperty extends PreferenceItem {\n    description?: string;\n    markdownDescription?: string;\n    scope?: 'application' | 'window' | 'resource' | PreferenceScope;\n}\n\nexport interface PreferenceDataProperty extends PreferenceItem {\n    description?: string;\n    markdownDescription?: string;\n    scope?: PreferenceScope;\n}\nexport namespace PreferenceDataProperty {\n    export function fromPreferenceSchemaProperty(schemaProps: PreferenceSchemaProperty, defaultScope: PreferenceScope = PreferenceScope.Workspace): PreferenceDataProperty {\n        if (!schemaProps.scope) {\n            schemaProps.scope = defaultScope;\n        } else if (typeof schemaProps.scope === 'string') {\n            return Object.assign(schemaProps, { scope: PreferenceScope.fromString(schemaProps.scope) || defaultScope });\n        }\n        return <PreferenceDataProperty>schemaProps;\n    }\n}\n\nexport type JsonType = 'string' | 'array' | 'number' | 'integer' | 'object' | 'boolean' | 'null';\n","/********************************************************************************\n * Copyright (C) 2019 Ericsson and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\n/* eslint-disable @typescript-eslint/no-explicit-any */\n\nexport enum PreferenceScope {\n    Default,\n    User,\n    Workspace,\n    Folder\n}\n\nexport namespace PreferenceScope {\n    export function is(scope: any): scope is PreferenceScope {\n        return typeof scope === 'number' && getScopes().findIndex(s => s === scope) >= 0;\n    }\n\n    export function getScopes(): PreferenceScope[] {\n        return Object.keys(PreferenceScope)\n            .filter(k => typeof PreferenceScope[k as any] === 'string')\n            .map(v => <PreferenceScope>Number(v));\n    }\n\n    export function getReversedScopes(): PreferenceScope[] {\n        return getScopes().reverse();\n    }\n\n    export function getScopeNames(scope?: PreferenceScope): string[] {\n        const names: string[] = [];\n        const allNames = Object.keys(PreferenceScope)\n            .filter(k => typeof PreferenceScope[k as any] === 'number');\n        if (scope) {\n            for (const name of allNames) {\n                if ((<any>PreferenceScope)[name] <= scope) {\n                    names.push(name);\n                }\n            }\n        }\n        return names;\n    }\n\n    export function fromString(strScope: string): PreferenceScope | undefined {\n        switch (strScope) {\n            case 'application':\n                return PreferenceScope.User;\n            case 'window':\n                return PreferenceScope.Folder;\n            case 'resource':\n                return PreferenceScope.Folder;\n        }\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2019 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport {\n    ProgressUpdate,\n    ProgressMessage\n} from './message-service-protocol';\nimport { CancellationToken } from './cancellation';\n\nexport const ProgressClient = Symbol('ProgressClient');\nexport interface ProgressClient {\n\n    /**\n     * Show a progress message with possible actions to user.\n     */\n    showProgress(progressId: string, message: ProgressMessage, cancellationToken: CancellationToken): Promise<string | undefined>;\n\n    /**\n     * Update a previously created progress message.\n     */\n    reportProgress(progressId: string, update: ProgressUpdate, message: ProgressMessage, cancellationToken: CancellationToken): Promise<void>;\n}\n","/********************************************************************************\n * Copyright (C) 2019 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { injectable, inject } from 'inversify';\nimport {\n    Progress,\n    ProgressUpdate,\n    ProgressMessage\n} from './message-service-protocol';\nimport { CancellationTokenSource } from './cancellation';\nimport { ProgressClient } from './progress-service-protocol';\nimport { MessageService } from './message-service';\n\n@injectable()\nexport class ProgressService {\n\n    @inject(ProgressClient) protected readonly client: ProgressClient;\n    @inject(MessageService) protected readonly messageService: MessageService;\n\n    async showProgress(message: ProgressMessage, onDidCancel?: () => void): Promise<Progress> {\n        if (this.shouldDelegate(message)) {\n            return this.messageService.showProgress(message, onDidCancel);\n        }\n        const id = this.newProgressId();\n        const cancellationSource = new CancellationTokenSource();\n        const report = (update: ProgressUpdate) => {\n            this.client.reportProgress(id, update, message, cancellationSource.token);\n        };\n        const actions = new Set<string>(message.actions);\n        if (ProgressMessage.isCancelable(message)) {\n            actions.delete(ProgressMessage.Cancel);\n            actions.add(ProgressMessage.Cancel);\n        }\n        const clientMessage = { ...message, actions: Array.from(actions) };\n        const result = this.client.showProgress(id, clientMessage, cancellationSource.token);\n        if (ProgressMessage.isCancelable(message) && typeof onDidCancel === 'function') {\n            result.then(value => {\n                if (value === ProgressMessage.Cancel) {\n                    onDidCancel();\n                }\n            });\n        }\n        return {\n            id,\n            cancel: () => cancellationSource.cancel(),\n            result,\n            report\n        };\n    }\n    protected shouldDelegate(message: ProgressMessage): boolean {\n        const location = message.options && message.options.location;\n        return location === 'notification';\n    }\n\n    private progressIdPrefix = Math.random().toString(36).substring(5);\n    private counter = 0;\n    protected newProgressId(): string {\n        return `${this.progressIdPrefix}-${++this.counter}`;\n    }\n\n    async withProgress<T>(text: string, locationId: string, task: () => Promise<T>): Promise<T> {\n        const progress = await this.showProgress({ text, options: { cancelable: true, location: locationId } });\n        try {\n            const result = task();\n            return result;\n        } catch (error) {\n            throw error;\n        } finally {\n            progress.cancel();\n        }\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2017 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\n/**\n * Simple implementation of the deferred pattern.\n * An object that exposes a promise and functions to resolve and reject it.\n */\nexport class Deferred<T> {\n    resolve: (value?: T) => void;\n    reject: (err?: any) => void; // eslint-disable-line @typescript-eslint/no-explicit-any\n\n    promise = new Promise<T>((resolve, reject) => {\n        this.resolve = resolve;\n        this.reject = reject;\n    });\n}\n","/********************************************************************************\n * Copyright (C) 2017 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport URI from './uri';\nimport { Keybinding } from './keybinding';\nimport { Disposable } from './disposable';\n\nexport interface Highlight {\n    start: number\n    end: number\n}\n\nexport enum QuickOpenMode {\n    PREVIEW,\n    OPEN,\n    OPEN_IN_BACKGROUND\n}\n\nexport interface QuickOpenItemOptions {\n    tooltip?: string;\n    label?: string;\n    labelHighlights?: Highlight[];\n    description?: string;\n    descriptionHighlights?: Highlight[];\n    detail?: string;\n    detailHighlights?: Highlight[];\n    hidden?: boolean;\n    uri?: URI;\n    iconClass?: string;\n    keybinding?: Keybinding;\n    run?(mode: QuickOpenMode): boolean;\n}\nexport interface QuickOpenGroupItemOptions extends QuickOpenItemOptions {\n    groupLabel?: string;\n    showBorder?: boolean;\n}\n\nexport class QuickOpenItem<T extends QuickOpenItemOptions = QuickOpenItemOptions> {\n\n    constructor(\n        protected options: T = {} as T\n    ) { }\n\n    getTooltip(): string | undefined {\n        return this.options.tooltip || this.getLabel();\n    }\n    getLabel(): string | undefined {\n        return this.options.label;\n    }\n    getLabelHighlights(): Highlight[] {\n        return this.options.labelHighlights || [];\n    }\n    getDescription(): string | undefined {\n        return this.options.description;\n    }\n    getDescriptionHighlights(): Highlight[] | undefined {\n        return this.options.descriptionHighlights;\n    }\n    getDetail(): string | undefined {\n        return this.options.detail;\n    }\n    getDetailHighlights(): Highlight[] | undefined {\n        return this.options.detailHighlights;\n    }\n    isHidden(): boolean {\n        return this.options.hidden || false;\n    }\n    getUri(): URI | undefined {\n        return this.options.uri;\n    }\n    getIconClass(): string | undefined {\n        return this.options.iconClass;\n    }\n    getKeybinding(): Keybinding | undefined {\n        return this.options.keybinding;\n    }\n    run(mode: QuickOpenMode): boolean {\n        if (!this.options.run) {\n            return false;\n        }\n        return this.options.run(mode);\n    }\n}\n\nexport class QuickOpenGroupItem<T extends QuickOpenGroupItemOptions = QuickOpenGroupItemOptions> extends QuickOpenItem<T> {\n\n    getGroupLabel(): string | undefined {\n        return this.options.groupLabel;\n    }\n    showBorder(): boolean {\n        return this.options.showBorder || false;\n    }\n}\n\nexport interface QuickOpenModel {\n    onType(lookFor: string, acceptor: (items: QuickOpenItem[], actionProvider?: QuickOpenActionProvider) => void): void;\n}\n\nexport interface QuickOpenActionProvider {\n    hasActions(item: QuickOpenItem): boolean;\n    getActions(item: QuickOpenItem): ReadonlyArray<QuickOpenAction>;\n}\n\nexport interface QuickOpenActionOptions {\n    id: string;\n    label?: string;\n    tooltip?: string;\n    class?: string | undefined;\n    enabled?: boolean;\n    checked?: boolean;\n    radio?: boolean;\n}\n\nexport interface QuickOpenAction extends QuickOpenActionOptions, Disposable {\n    run(item?: QuickOpenItem): PromiseLike<void>;\n}\n\nexport enum QuickTitleButtonSide {\n    LEFT = 0,\n    RIGHT = 1\n}\n\nexport interface QuickTitleButton {\n    icon: string; // a background image coming from a url\n    iconClass?: string; // a class such as one coming from font awesome\n    tooltip?: string | undefined;\n    side: QuickTitleButtonSide\n}\n","/********************************************************************************\n * Copyright (C) 2017 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nexport enum QuickOpenHideReason {\n    ELEMENT_SELECTED,\n    FOCUS_LOST,\n    CANCELED,\n}\n\nexport type QuickOpenOptions = Partial<QuickOpenOptions.Resolved>;\nexport namespace QuickOpenOptions {\n    export interface FuzzyMatchOptions {\n        /**\n         * Default: `false`\n         */\n        enableSeparateSubstringMatching?: boolean\n    }\n    export interface Resolved {\n        readonly enabled: boolean;\n\n        /** `true` means that input of quick open widget will be trimmed by default. */\n        readonly trimInput: boolean;\n        readonly prefix: string;\n        readonly placeholder: string;\n        readonly ignoreFocusOut: boolean;\n        readonly valueSelection: Readonly<[number, number]>;\n\n        readonly fuzzyMatchLabel: boolean | FuzzyMatchOptions;\n        readonly fuzzyMatchDetail: boolean | FuzzyMatchOptions;\n        readonly fuzzyMatchDescription: boolean | FuzzyMatchOptions;\n        readonly fuzzySort: boolean;\n\n        /** The amount of first symbols to be ignored by quick open widget (e.g. don't affect matching). */\n        readonly skipPrefix: number;\n\n        /**\n         * Whether to display the items that don't have any highlight.\n         */\n        readonly showItemsWithoutHighlight: boolean;\n\n        /**\n         * `true` if the quick open widget provides a way for the user to securely enter a password.\n         * Otherwise, `false`.\n         */\n        readonly password: boolean;\n\n        selectIndex(lookFor: string): number;\n\n        onClose(canceled: boolean): void;\n    }\n    export const defaultOptions: Resolved = Object.freeze({\n        enabled: true,\n\n        trimInput: true,\n        prefix: '',\n        placeholder: '',\n        ignoreFocusOut: false,\n        valueSelection: [-1, -1] as Readonly<[number, number]>,\n\n        fuzzyMatchLabel: false,\n        fuzzyMatchDetail: false,\n        fuzzyMatchDescription: false,\n        fuzzySort: false,\n\n        skipPrefix: 0,\n\n        showItemsWithoutHighlight: false,\n        password: false,\n\n        onClose: () => { /* no-op*/ },\n\n        selectIndex: () => -1\n    });\n    export function resolve(options: QuickOpenOptions = {}, source: Resolved = defaultOptions): Resolved {\n        return Object.assign({}, source, options);\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { QuickOpenHideReason } from './quick-open-service';\nimport { QuickOpenItem, QuickOpenItemOptions, QuickTitleButton } from './quick-open-model';\nimport { Event } from './event';\n\nexport type QuickPickItem<T> = QuickPickValue<T> | QuickPickSeparator;\n\nexport interface QuickPickSeparator {\n    type: 'separator'\n    label: string\n}\nexport namespace QuickPickSeparator {\n    export function is(item: string | QuickPickItem<Object>): item is QuickPickSeparator {\n        return typeof item === 'object' && 'type' in item && item['type'] === 'separator';\n    }\n}\n\nexport interface QuickPickValue<T> {\n    label: string\n    value: T\n    description?: string\n    detail?: string\n    iconClass?: string\n}\n\nexport interface QuickPickOptions {\n    placeholder?: string\n    /**\n     * default: true\n     */\n    fuzzyMatchLabel?: boolean\n    /**\n     * default: true\n     */\n    fuzzyMatchDescription?: boolean\n\n    /**\n     * Current step count\n     */\n    step?: number | undefined\n\n    /**\n     * The title of the input\n     */\n    title?: string | undefined\n\n    /**\n     * Total number of steps\n     */\n    totalSteps?: number | undefined\n\n    /**\n     * Buttons that are displayed on the title panel\n     */\n    buttons?: ReadonlyArray<QuickTitleButton>\n\n    /**\n     * Set to `true` to keep the input box open when focus moves to another part of the editor or to another window.\n     */\n    ignoreFocusOut?: boolean\n\n    /**\n     * The prefill value.\n     */\n    value?: string;\n\n    /**\n     * Determines if the quick pick with a single item should\n     * execute the item instead of displaying. The default is `true`.\n     */\n    runIfSingle?: boolean;\n}\n\nexport const quickPickServicePath = '/services/quickPick';\nexport const QuickPickService = Symbol('QuickPickService');\nexport interface QuickPickService {\n\n    show(elements: string[], options?: QuickPickOptions): Promise<string | undefined>;\n\n    show<T>(elements: QuickPickItem<T>[], options?: QuickPickOptions): Promise<T | undefined>;\n\n    setItems(items: QuickOpenItem[]): void;\n\n    hide(reason?: QuickOpenHideReason): void\n\n    readonly onDidAccept: Event<void>;\n    readonly onDidChangeValue: Event<string>;\n    readonly onDidChangeActiveItems: Event<QuickOpenItem<QuickOpenItemOptions>[]>;\n}\n","/********************************************************************************\n * Copyright (C) 2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { Disposable, DisposableCollection } from './disposable';\nimport { Emitter, Event } from './event';\nimport { MaybePromise } from './types';\n\nexport interface Reference<T> extends Disposable {\n    readonly object: T\n}\n\nexport abstract class AbstractReferenceCollection<K, V extends Disposable> implements Disposable {\n\n    protected readonly _keys = new Map<string, K>();\n    protected readonly _values = new Map<string, V>();\n    protected readonly references = new Map<string, DisposableCollection>();\n\n    protected readonly onDidCreateEmitter = new Emitter<V>();\n    readonly onDidCreate: Event<V> = this.onDidCreateEmitter.event;\n\n    protected readonly onWillDisposeEmitter = new Emitter<V>();\n    readonly onWillDispose: Event<V> = this.onWillDisposeEmitter.event;\n\n    protected readonly toDispose = new DisposableCollection();\n\n    constructor() {\n        this.toDispose.push(this.onDidCreateEmitter);\n        this.toDispose.push(this.onWillDisposeEmitter);\n        this.toDispose.push(Disposable.create(() => this.clear()));\n    }\n\n    dispose(): void {\n        this.toDispose.dispose();\n    }\n\n    clear(): void {\n        for (const value of this._values.values()) {\n            try {\n                value.dispose();\n            } catch (e) {\n                console.error(e);\n            }\n        }\n    }\n\n    has(args: K): boolean {\n        const key = this.toKey(args);\n        return this.references.has(key);\n    }\n\n    keys(): K[] {\n        return [...this._keys.values()];\n    }\n\n    values(): V[] {\n        return [...this._values.values()];\n    }\n\n    get(args: K): V | undefined {\n        const key = this.toKey(args);\n        return this._values.get(key);\n    }\n\n    abstract acquire(args: K): MaybePromise<Reference<V>>;\n\n    protected doAcquire(key: string, object: V): Reference<V> {\n        const references = this.references.get(key) || this.createReferences(key, object);\n        const reference: Reference<V> = {\n            object,\n            dispose: () => { }\n        };\n        references.push(reference);\n        return reference;\n    }\n\n    protected toKey(args: K): string {\n        return JSON.stringify(args);\n    }\n\n    protected createReferences(key: string, value: V): DisposableCollection {\n        const references = new DisposableCollection();\n        references.onDispose(() => value.dispose());\n        const disposeObject = value.dispose.bind(value);\n        value.dispose = () => {\n            this.onWillDisposeEmitter.fire(value);\n            disposeObject();\n            this._values.delete(key);\n            this._keys.delete(key);\n            this.references.delete(key);\n            references!.dispose();\n        };\n        this.references.set(key, references);\n        return references;\n    }\n\n}\n\nexport class ReferenceCollection<K, V extends Disposable> extends AbstractReferenceCollection<K, V> {\n\n    constructor(protected readonly factory: (key: K) => MaybePromise<V>) {\n        super();\n    }\n\n    async acquire(args: K): Promise<Reference<V>> {\n        const key = this.toKey(args);\n        const object = await this.getOrCreateValue(key, args);\n        return this.doAcquire(key, object);\n    }\n\n    protected readonly pendingValues = new Map<string, MaybePromise<V>>();\n    protected async getOrCreateValue(key: string, args: K): Promise<V> {\n        const existing = this._values.get(key) || this.pendingValues.get(key);\n        if (existing) {\n            return existing;\n        }\n        const pending = this.factory(args);\n        this._keys.set(key, args);\n        this.pendingValues.set(key, pending);\n        try {\n            const value = await pending;\n            this._values.set(key, value);\n            this.onDidCreateEmitter.fire(value);\n            return value;\n        } catch (e) {\n            this._keys.delete(key);\n            throw e;\n        } finally {\n            this.pendingValues.delete(key);\n        }\n    }\n\n}\n\nexport class SyncReferenceCollection<K, V extends Disposable> extends AbstractReferenceCollection<K, V> {\n\n    constructor(protected readonly factory: (key: K) => V) {\n        super();\n    }\n\n    acquire(args: K): Reference<V> {\n        const key = this.toKey(args);\n        const object = this.getOrCreateValue(key, args);\n        return this.doAcquire(key, object);\n    }\n\n    protected getOrCreateValue(key: string, args: K): V {\n        const existing = this._values.get(key);\n        if (existing) {\n            return existing;\n        }\n        const value = this.factory(args);\n        this._keys.set(key, args);\n        this._values.set(key, value);\n        this.onDidCreateEmitter.fire(value);\n        return value;\n    }\n\n}\n","/********************************************************************************\n * Copyright (C) 2017 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { injectable, inject, named } from 'inversify';\nimport { TextDocumentContentChangeEvent } from 'vscode-languageserver-protocol';\nimport URI from '../common/uri';\nimport { ContributionProvider } from './contribution-provider';\nimport { Event, Emitter } from './event';\nimport { Disposable } from './disposable';\nimport { MaybePromise } from './types';\nimport { CancellationToken } from './cancellation';\nimport { ApplicationError } from './application-error';\n\nexport interface Resource extends Disposable {\n    readonly uri: URI;\n    readContents(options?: { encoding?: string }): Promise<string>;\n    saveContents?(content: string, options?: { encoding?: string }): Promise<void>;\n    saveContentChanges?(changes: TextDocumentContentChangeEvent[], options?: { encoding?: string }): Promise<void>;\n    readonly onDidChangeContents?: Event<void>;\n    guessEncoding?(): Promise<string | undefined>\n}\nexport namespace Resource {\n    export interface SaveContext {\n        content: string\n        changes?: TextDocumentContentChangeEvent[]\n        options?: { encoding?: string, overwriteEncoding?: string }\n    }\n    export async function save(resource: Resource, context: SaveContext, token?: CancellationToken): Promise<void> {\n        if (!resource.saveContents) {\n            return;\n        }\n        if (await trySaveContentChanges(resource, context)) {\n            return;\n        }\n        if (token && token.isCancellationRequested) {\n            return;\n        }\n        await resource.saveContents(context.content, context.options);\n    }\n    export async function trySaveContentChanges(resource: Resource, context: SaveContext): Promise<boolean> {\n        if (!context.changes || !resource.saveContentChanges || shouldSaveContent(context)) {\n            return false;\n        }\n        try {\n            await resource.saveContentChanges(context.changes, context.options);\n        } catch (e) {\n            console.error(e);\n            return false;\n        }\n        return true;\n    }\n    export function shouldSaveContent({ content, changes }: SaveContext): boolean {\n        if (!changes) {\n            return true;\n        }\n        let contentChangesLength = 0;\n        const contentLength = content.length;\n        for (const change of changes) {\n            contentChangesLength += JSON.stringify(change).length;\n            if (contentChangesLength > contentLength) {\n                return true;\n            }\n        }\n        return contentChangesLength > contentLength;\n    }\n}\n\nexport namespace ResourceError {\n    export const NotFound = ApplicationError.declare(-40000, (raw: ApplicationError.Literal<{ uri: URI }>) => raw);\n}\n\nexport const ResourceResolver = Symbol('ResourceResolver');\nexport interface ResourceResolver {\n    /**\n     * Reject if a resource cannot be provided.\n     */\n    resolve(uri: URI): MaybePromise<Resource>;\n}\n\nexport const ResourceProvider = Symbol('ResourceProvider');\nexport type ResourceProvider = (uri: URI) => Promise<Resource>;\n\n@injectable()\nexport class DefaultResourceProvider {\n\n    constructor(\n        @inject(ContributionProvider) @named(ResourceResolver)\n        protected readonly resolversProvider: ContributionProvider<ResourceResolver>\n    ) { }\n\n    /**\n     * Reject if a resource cannot be provided.\n     */\n    async get(uri: URI): Promise<Resource> {\n        const resolvers = this.resolversProvider.getContributions();\n        for (const resolver of resolvers) {\n            try {\n                return await resolver.resolve(uri);\n            } catch (err) {\n                // no-op\n            }\n        }\n        return Promise.reject(new Error(`A resource provider for '${uri.toString()}' is not registered.`));\n    }\n\n}\n\nexport class MutableResource implements Resource {\n    private contents: string;\n\n    constructor(readonly uri: URI, contents: string, readonly dispose: () => void) {\n        this.contents = contents;\n    }\n\n    async readContents(): Promise<string> {\n        return this.contents;\n    }\n\n    async saveContents(contents: string): Promise<void> {\n        this.contents = contents;\n        this.fireDidChangeContents();\n    }\n\n    protected readonly onDidChangeContentsEmitter = new Emitter<void>();\n    onDidChangeContents = this.onDidChangeContentsEmitter.event;\n    protected fireDidChangeContents(): void {\n        this.onDidChangeContentsEmitter.fire(undefined);\n    }\n}\n\n@injectable()\nexport class InMemoryResources implements ResourceResolver {\n\n    private resources = new Map<string, MutableResource>();\n\n    add(uri: URI, contents: string): Resource {\n        const resourceUri = uri.toString();\n        if (this.resources.has(resourceUri)) {\n            throw new Error(`Cannot add already existing in-memory resource '${resourceUri}'`);\n        }\n\n        const resource = new MutableResource(uri, contents, () => this.resources.delete(resourceUri));\n        this.resources.set(resourceUri, resource);\n        return resource;\n    }\n\n    update(uri: URI, contents: string): Resource {\n        const resourceUri = uri.toString();\n        const resource = this.resources.get(resourceUri);\n        if (!resource) {\n            throw new Error(`Cannot update non-existed in-memory resource '${resourceUri}'`);\n        }\n        resource.saveContents(contents);\n        return resource;\n    }\n\n    resolve(uri: URI): Resource {\n        const uriString = uri.toString();\n        if (!this.resources.has(uriString)) {\n            throw new Error(`In memory '${uriString}' resource does not exist.`);\n        }\n        return this.resources.get(uriString)!;\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2019 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\n/* eslint-disable @typescript-eslint/no-explicit-any */\nimport { CommandHandler } from './command';\nimport { SelectionService } from '../common/selection-service';\n\nexport class SelectionCommandHandler<S> implements CommandHandler {\n\n    constructor(\n        protected readonly selectionService: SelectionService,\n        protected readonly toSelection: (arg: any) => S | undefined,\n        protected readonly options: SelectionCommandHandler.Options<S>\n    ) { }\n\n    execute(...args: any[]): Object | undefined {\n        const selection = this.getSelection(...args);\n        return selection ? (this.options.execute as any)(selection, ...args) : undefined;\n    }\n\n    isVisible(...args: any[]): boolean {\n        const selection = this.getSelection(...args);\n        return !!selection && (!this.options.isVisible || (this.options.isVisible as any)(selection as any, ...args));\n    }\n\n    isEnabled(...args: any[]): boolean {\n        const selection = this.getSelection(...args);\n        return !!selection && (!this.options.isEnabled || (this.options.isEnabled as any)(selection as any, ...args));\n    }\n\n    protected isMulti(): boolean {\n        return this.options && !!this.options.multi;\n    }\n\n    protected getSelection(...args: any[]): S | S[] | undefined {\n        const givenSelection = args.length && this.toSelection(args[0]);\n        if (givenSelection) {\n            return this.isMulti() ? [givenSelection] : givenSelection;\n        }\n        const globalSelection = this.getSingleSelection(this.selectionService.selection);\n        if (this.isMulti()) {\n            return this.getMultiSelection(globalSelection);\n        }\n        return this.getSingleSelection(globalSelection);\n    }\n\n    protected getSingleSelection(arg: Object | undefined): S | undefined {\n        let selection = this.toSelection(arg);\n        if (selection) {\n            return selection;\n        }\n        if (Array.isArray(arg)) {\n            for (const element of arg) {\n                selection = this.toSelection(element);\n                if (selection) {\n                    return selection;\n                }\n            }\n        }\n        return undefined;\n    }\n\n    protected getMultiSelection(arg: Object | undefined): S[] | undefined {\n        let selection = this.toSelection(arg);\n        if (selection) {\n            return [selection];\n        }\n        const result = [];\n        if (Array.isArray(arg)) {\n            for (const element of arg) {\n                selection = this.toSelection(element);\n                if (selection) {\n                    result.push(selection);\n                }\n            }\n        }\n        return result.length ? result : undefined;\n    }\n}\nexport namespace SelectionCommandHandler {\n    export type Options<S> = SelectionOptions<false, S> | SelectionOptions<true, S[]>;\n    export interface SelectionOptions<Multi extends boolean, T> {\n        multi: Multi;\n        execute(selection: T, ...args: any[]): any;\n        isEnabled?(selection: T, ...args: any[]): boolean;\n        isVisible?(selection: T, ...args: any[]): boolean;\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2017 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { injectable } from 'inversify';\nimport { Emitter, Event } from '../common/event';\n\n/* eslint-disable @typescript-eslint/no-explicit-any */\n\nexport interface SelectionProvider<T> {\n    onSelectionChanged: Event<T | undefined>;\n}\n\n@injectable()\nexport class SelectionService implements SelectionProvider<Object | undefined> {\n\n    private currentSelection: Object | undefined;\n\n    protected readonly onSelectionChangedEmitter = new Emitter<any>();\n    readonly onSelectionChanged: Event<any> = this.onSelectionChangedEmitter.event;\n\n    get selection(): Object | undefined {\n        return this.currentSelection;\n    }\n\n    set selection(selection: Object | undefined) {\n        this.currentSelection = selection;\n        this.onSelectionChangedEmitter.fire(this.currentSelection);\n    }\n\n}\n","/********************************************************************************\n * Copyright (C) 2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport URI from './uri';\n\nexport interface UriSelection {\n    readonly uri: URI\n}\n\nexport namespace UriSelection {\n\n    export function is(arg: Object | undefined): arg is UriSelection {\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        return typeof arg === 'object' && ('uri' in arg) && (<any>arg)['uri'] instanceof URI;\n    }\n\n    export function getUri(selection: Object | undefined): URI | undefined {\n        if (is(selection)) {\n            return selection.uri;\n        }\n        if (Array.isArray(selection) && is(selection[0])) {\n            return selection[0].uri;\n        }\n        return undefined;\n    }\n\n    export function getUris(selection: Object | undefined): URI[] {\n        if (is(selection)) {\n            return [selection.uri];\n        }\n        if (Array.isArray(selection)) {\n            return selection.filter(is).map(s => s.uri);\n        }\n        return [];\n    }\n\n}\n","/********************************************************************************\n * Copyright (C) 2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nexport function* split(s: string, splitter: string): IterableIterator<string> {\n    let start = 0;\n    while (start < s.length) {\n        let end = s.indexOf(splitter, start);\n        if (end === -1) {\n            end = s.length;\n        }\n\n        yield s.substring(start, end);\n        start = end + splitter.length;\n    }\n}\n\nexport function escapeInvisibleChars(value: string): string {\n    return value.replace(/\\n/g, '\\\\n').replace(/\\r/g, '\\\\r');\n}\n\nexport function unescapeInvisibleChars(value: string): string {\n    return value.replace(/\\\\n/g, '\\n').replace(/\\\\r/g, '\\r');\n}\n\nexport function escapeRegExpCharacters(value: string): string {\n    return value.replace(/[\\-\\\\\\{\\}\\*\\+\\?\\|\\^\\$\\.\\[\\]\\(\\)\\#]/g, '\\\\$&');\n}\n","/********************************************************************************\n * Copyright (C) 2017 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nexport type Mutable<T> = { -readonly [P in keyof T]: T[P] };\n\nexport type Deferred<T> = {\n    [P in keyof T]: Promise<T[P]>\n};\nexport type RecursivePartial<T> = {\n    [P in keyof T]?: RecursivePartial<T[P]>;\n};\nexport type MaybeArray<T> = T | T[];\nexport type MaybePromise<T> = T | Promise<T> | PromiseLike<T>;\n\nexport interface Prioritizeable<T> {\n    readonly priority: number;\n    readonly value: T;\n}\nexport namespace Prioritizeable {\n    export type GetPriority<T> = (value: T) => MaybePromise<number>;\n    export type GetPrioritySync<T> = (value: T) => number;\n    export async function toPrioritizeable<T>(rawValue: MaybePromise<T>, getPriority: GetPriority<T>): Promise<Prioritizeable<T>>;\n    export async function toPrioritizeable<T>(rawValue: MaybePromise<T>[], getPriority: GetPriority<T>): Promise<Prioritizeable<T>[]>;\n    export async function toPrioritizeable<T>(rawValue: MaybeArray<MaybePromise<T>>, getPriority: GetPriority<T>): Promise<MaybeArray<Prioritizeable<T>>> {\n        if (rawValue instanceof Array) {\n            return Promise.all(\n                rawValue.map(v => toPrioritizeable(v, getPriority))\n            );\n        }\n        const value = await rawValue;\n        const priority = await getPriority(value);\n        return { priority, value };\n    }\n    export function toPrioritizeableSync<T>(rawValue: T[], getPriority: GetPrioritySync<T>): Prioritizeable<T>[] {\n        return rawValue.map(v => ({\n            value: v,\n            priority: getPriority(v)\n        }));\n    }\n    export function prioritizeAllSync<T>(values: T[], getPriority: GetPrioritySync<T>): Prioritizeable<T>[] {\n        const prioritizeable = toPrioritizeableSync(values, getPriority);\n        return prioritizeable.filter(isValid).sort(compare);\n    }\n    export async function prioritizeAll<T>(values: MaybePromise<T>[], getPriority: GetPriority<T>): Promise<Prioritizeable<T>[]> {\n        const prioritizeable = await toPrioritizeable(values, getPriority);\n        return prioritizeable.filter(isValid).sort(compare);\n    }\n    export function isValid<T>(p: Prioritizeable<T>): boolean {\n        return p.priority > 0;\n    }\n    export function compare<T>(p: Prioritizeable<T>, p2: Prioritizeable<T>): number {\n        return p2.priority - p.priority;\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2018 Ericsson and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { SelectionService } from '../common/selection-service';\nimport { UriSelection } from '../common/selection';\nimport { CommandHandler } from './command';\nimport { MaybeArray } from '.';\nimport URI from './uri';\n\nexport interface UriCommandHandler<T extends MaybeArray<URI>> {\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    execute(uri: T, ...args: any[]): any;\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    isEnabled?(uri: T, ...args: any[]): boolean;\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    isVisible?(uri: T, ...args: any[]): boolean;\n\n}\n\n/**\n * Handler for a single URI-based selection.\n */\nexport interface SingleUriCommandHandler extends UriCommandHandler<URI> {\n\n}\n\n/**\n * Handler for multiple URIs.\n */\nexport interface MultiUriCommandHandler extends UriCommandHandler<URI[]> {\n\n}\n\nexport namespace UriAwareCommandHandler {\n\n    /**\n     * Further options for the URI aware command handler instantiation.\n     */\n    export interface Options {\n\n        /**\n         * `true` if the handler supports multiple selection. Otherwise, `false`. Defaults to `false`.\n         */\n        readonly multi?: boolean,\n\n    }\n\n}\n/**\n * @todo Create different classes for single and multi-uris. State can be\n * corrupt if the developer does something like:\n * ```ts\n * new UriAwareCommandHandler<URI[]>(selectionService, handler, { multi: false })\n * ```\n */\nexport class UriAwareCommandHandler<T extends MaybeArray<URI>> implements CommandHandler {\n\n    constructor(\n        protected readonly selectionService: SelectionService,\n        protected readonly handler: UriCommandHandler<T>,\n        protected readonly options?: UriAwareCommandHandler.Options\n    ) { }\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    protected getUri(...args: any[]): T | undefined {\n        if (args && args[0] instanceof URI) {\n            // @ts-ignore we want to always return URIs\n            return this.isMulti() ? [args[0]] : args[0];\n        }\n        const { selection } = this.selectionService;\n        if (!this.isMulti()) {\n            return UriSelection.getUri(selection) as T;\n        }\n        const uris = UriSelection.getUris(selection);\n        return uris as T;\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    execute(...args: any[]): object | undefined {\n        const uri = this.getUri(...args);\n        return uri ? this.handler.execute(uri, ...args) : undefined;\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    isVisible(...args: any[]): boolean {\n        const uri = this.getUri(...args);\n        if (uri) {\n            if (this.handler.isVisible) {\n                return this.handler.isVisible(uri as T, ...args);\n            }\n            return true;\n        }\n        return false;\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    isEnabled(...args: any[]): boolean {\n        const uri = this.getUri(...args);\n        if (uri) {\n            if (this.handler.isEnabled) {\n                return this.handler.isEnabled(uri as T, ...args);\n            }\n            return true;\n        }\n        return false;\n    }\n\n    protected isMulti(): boolean | undefined {\n        return this.options && !!this.options.multi;\n    }\n\n}\n","/********************************************************************************\n * Copyright (C) 2017 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { setUriThrowOnMissingScheme } from 'vscode-uri';\nimport Uri from 'vscode-uri';\nimport { Path } from './path';\n\n// TODO: disable it because of #4487\nsetUriThrowOnMissingScheme(false);\n\nexport default class URI {\n\n    private readonly codeUri: Uri;\n    private _path: Path | undefined;\n\n    constructor(uri: string | Uri = '') {\n        if (uri instanceof Uri) {\n            this.codeUri = uri;\n        } else {\n            this.codeUri = Uri.parse(uri);\n        }\n    }\n\n    /**\n     * TODO move implementation to `DefaultUriLabelProviderContribution.getName`\n     *\n     * @deprecated use `LabelProvider.getName` instead\n     */\n    get displayName(): string {\n        const base = this.path.base;\n        if (base) {\n            return base;\n        }\n        if (this.path.isRoot) {\n            return this.path.toString();\n        }\n        return '';\n    }\n\n    /**\n     * Return all uri from the current to the top most.\n     */\n    get allLocations(): URI[] {\n        const locations = [];\n        let location: URI = this;\n        while (!location.path.isRoot && location.path.hasDir) {\n            locations.push(location);\n            location = location.parent;\n        }\n        locations.push(location);\n        return locations;\n    }\n\n    get parent(): URI {\n        if (this.path.isRoot) {\n            return this;\n        }\n        return this.withPath(this.path.dir);\n    }\n\n    relative(uri: URI): Path | undefined {\n        if (this.authority !== uri.authority || this.scheme !== uri.scheme) {\n            return undefined;\n        }\n        return this.path.relative(uri.path);\n    }\n\n    resolve(path: string | Path): URI {\n        return this.withPath(this.path.join(path.toString()));\n    }\n\n    /**\n     * return a new URI replacing the current with the given scheme\n     */\n    withScheme(scheme: string): URI {\n        const newCodeUri = Uri.from({\n            ...this.codeUri.toJSON(),\n            scheme\n        });\n        return new URI(newCodeUri);\n    }\n\n    /**\n     * return a new URI replacing the current with the given authority\n     */\n    withAuthority(authority: string): URI {\n        const newCodeUri = Uri.from({\n            ...this.codeUri.toJSON(),\n            scheme: this.codeUri.scheme,\n            authority\n        });\n        return new URI(newCodeUri);\n    }\n\n    /**\n     * return this URI without a authority\n     */\n    withoutAuthority(): URI {\n        return this.withAuthority('');\n    }\n\n    /**\n     * return a new URI replacing the current with the given path\n     */\n    withPath(path: string | Path): URI {\n        const newCodeUri = Uri.from({\n            ...this.codeUri.toJSON(),\n            scheme: this.codeUri.scheme,\n            path: path.toString()\n        });\n        return new URI(newCodeUri);\n    }\n\n    /**\n     * return this URI without a path\n     */\n    withoutPath(): URI {\n        return this.withPath('');\n    }\n\n    /**\n     * return a new URI replacing the current with the given query\n     */\n    withQuery(query: string): URI {\n        const newCodeUri = Uri.from({\n            ...this.codeUri.toJSON(),\n            scheme: this.codeUri.scheme,\n            query\n        });\n        return new URI(newCodeUri);\n    }\n\n    /**\n     * return this URI without a query\n     */\n    withoutQuery(): URI {\n        return this.withQuery('');\n    }\n\n    /**\n     * return a new URI replacing the current with the given fragment\n     */\n    withFragment(fragment: string): URI {\n        const newCodeUri = Uri.from({\n            ...this.codeUri.toJSON(),\n            scheme: this.codeUri.scheme,\n            fragment\n        });\n        return new URI(newCodeUri);\n    }\n\n    /**\n     * return this URI without a fragment\n     */\n    withoutFragment(): URI {\n        return this.withFragment('');\n    }\n\n    /**\n     * return a new URI replacing the current with its normalized path, resolving '..' and '.' segments\n     */\n    normalizePath(): URI {\n        return this.withPath(this.path.normalize());\n    }\n\n    get scheme(): string {\n        return this.codeUri.scheme;\n    }\n\n    get authority(): string {\n        return this.codeUri.authority;\n    }\n\n    get path(): Path {\n        if (this._path === undefined) {\n            this._path = new Path(this.codeUri.path);\n        }\n        return this._path;\n    }\n\n    get query(): string {\n        return this.codeUri.query;\n    }\n\n    get fragment(): string {\n        return this.codeUri.fragment;\n    }\n\n    toString(skipEncoding?: boolean): string {\n        return this.codeUri.toString(skipEncoding);\n    }\n\n    isEqualOrParent(uri: URI): boolean {\n        return this.authority === uri.authority && this.scheme === uri.scheme && this.path.isEqualOrParent(uri.path);\n    }\n\n    static getDistinctParents(uris: URI[]): URI[] {\n        const result: URI[] = [];\n        uris.forEach((uri, i) => {\n            if (!uris.some((otherUri, index) => index !== i && otherUri.isEqualOrParent(uri))) {\n                result.push(uri);\n            }\n        });\n        return result;\n    }\n\n}\n","module.exports = \"data:image/svg+xml;base64,PCEtLUNvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLi0tPgo8IS0tQ29weXJpZ2h0IChDKSAyMDE4IFR5cGVGb3ggYW5kIG90aGVycy4tLT4KPCEtLUxpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS4gU2VlIExpY2Vuc2UudHh0IGluIHRoZSBwcm9qZWN0IHJvb3QgZm9yIGxpY2Vuc2UgaW5mb3JtYXRpb24uLS0+CjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMTYiIGhlaWdodD0iMTYiIGVuYWJsZS1iYWNrZ3JvdW5kPSJuZXcgLTEgMCAxNiAxNiIgdmlld0JveD0iLTEgMCAxNiAxNiI+CiAgICA8cGF0aCBmaWxsPSIjNDI0MjQyIiBkPSJNMTQgMXY5aC0xdi04aC04di0xaDl6bS0xMSAydjFoOHY4aDF2LTloLTl6bTcgMnY5aC05di05aDl6bS0yIDJoLTV2NWg1di01eiIvPgogICAgPHJlY3Qgd2lkdGg9IjMiIGhlaWdodD0iMSIgeD0iNCIgeT0iOSIgZmlsbD0iIzAwNTM5QyIvPgo8L3N2Zz4K\"","module.exports = \"data:image/svg+xml;base64,PCEtLUNvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLi0tPgo8IS0tQ29weXJpZ2h0IChDKSAyMDE4IFR5cGVGb3ggYW5kIG90aGVycy4tLT4KPCEtLUxpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS4gU2VlIExpY2Vuc2UudHh0IGluIHRoZSBwcm9qZWN0IHJvb3QgZm9yIGxpY2Vuc2UgaW5mb3JtYXRpb24uLS0+CjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMTYiIGhlaWdodD0iMTYiIGVuYWJsZS1iYWNrZ3JvdW5kPSJuZXcgLTEgMCAxNiAxNiIgdmlld0JveD0iLTEgMCAxNiAxNiI+CiAgICA8cGF0aCBmaWxsPSIjQzVDNUM1IiBkPSJNMTQgMXY5aC0xdi04aC04di0xaDl6bS0xMSAydjFoOHY4aDF2LTloLTl6bTcgMnY5aC05di05aDl6bS0yIDJoLTV2NWg1di01eiIvPgogICAgPHJlY3Qgd2lkdGg9IjMiIGhlaWdodD0iMSIgeD0iNCIgeT0iOSIgZmlsbD0iIzc1QkVGRiIvPgo8L3N2Zz4K\"","module.exports = \"data:image/svg+xml;base64,PCEtLUNvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLi0tPgo8IS0tQ29weXJpZ2h0IChDKSAyMDE4IFR5cGVGb3ggYW5kIG90aGVycy4tLT4KPCEtLUxpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS4gU2VlIExpY2Vuc2UudHh0IGluIHRoZSBwcm9qZWN0IHJvb3QgZm9yIGxpY2Vuc2UgaW5mb3JtYXRpb24uLS0+CjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMTYiIGhlaWdodD0iMTYiPgogICAgPHBhdGggZmlsbD0iI0Y2RjZGNiIgZD0iTTEzLjQ1MSA1LjYwOWwtLjU3OS0uOTM5LTEuMDY4LjgxMi0uMDc2LjA5NGMtLjMzNS40MTUtLjkyNyAxLjM0MS0xLjEyNCAyLjg3NmwtLjAyMS4xNjUuMDMzLjE2My4wNzEuMzQ1YzAgMS42NTQtMS4zNDYgMy0zIDMtLjc5NSAwLTEuNTQ1LS4zMTEtMi4xMDctLjg2OC0uNTYzLS41NjctLjg3My0xLjMxNy0uODczLTIuMTExIDAtMS40MzEgMS4wMDctMi42MzIgMi4zNTEtMi45Mjl2Mi45MjZzMi41MjgtMi4wODcgMi45ODQtMi40NjFoLjAxMmwzLjA2MS0yLjU4Mi00LjkxOS00LjFoLTEuMTM3djIuNDA0Yy0zLjQyOS4zMTgtNi4xMjEgMy4yMTEtNi4xMjEgNi43MjEgMCAxLjgwOS43MDcgMy41MDggMS45ODYgNC43ODIgMS4yNzcgMS4yODIgMi45NzYgMS45ODggNC43ODQgMS45ODggMy43MjIgMCA2Ljc1LTMuMDI4IDYuNzUtNi43NSAwLTEuMjQ1LS4zNDktMi40NjgtMS4wMDctMy41MzZ6Ii8+CiAgICA8cGF0aCBmaWxsPSIjNDI0MjQyIiBkPSJNMTIuNiA2LjEzNGwtLjA5NC4wNzFjLS4yNjkuMzMzLS43NDYgMS4wOTYtLjkxIDIuMzc1LjA1Ny4yNzcuMDkyLjQ5NS4wOTIuNTQ1IDAgMi4yMDYtMS43OTQgNC00IDQtMS4wOTggMC0yLjA5My0uNDQ1LTIuODE3LTEuMTY0LS43MTgtLjcyNC0xLjE2My0xLjcxOC0xLjE2My0yLjgxNSAwLTIuMjA2IDEuNzk0LTQgNC00bC4zNTEuMDI1djEuODVzMS42MjYtMS4zNDIgMS42MzEtMS4zMzlsMS44NjktMS41NzctMy41LTIuOTE3djIuMjE4bC0uMzcxLS4wM2MtMy4xNzYgMC01Ljc1IDIuNTc0LTUuNzUgNS43NSAwIDEuNTkzLjY0OCAzLjAzNCAxLjY5NSA0LjA3NiAxLjA0MiAxLjA0NiAyLjQ4MiAxLjY5NCA0LjA3NiAxLjY5NCAzLjE3NiAwIDUuNzUtMi41NzQgNS43NS01Ljc1LS4wMDEtMS4xMDYtLjMxOC0yLjEzNS0uODU5LTMuMDEyeiIvPgo8L3N2Zz4K\"","module.exports = \"data:image/svg+xml;base64,PCEtLUNvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLi0tPgo8IS0tQ29weXJpZ2h0IChDKSAyMDE4IFR5cGVGb3ggYW5kIG90aGVycy4tLT4KPCEtLUxpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS4gU2VlIExpY2Vuc2UudHh0IGluIHRoZSBwcm9qZWN0IHJvb3QgZm9yIGxpY2Vuc2UgaW5mb3JtYXRpb24uLS0+CjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMTYiIGhlaWdodD0iMTYiPgogICAgPHBhdGggZmlsbD0iIzJEMkQzMCIgZD0iTTEzLjQ1MSA1LjYwOWwtLjU3OS0uOTM5LTEuMDY4LjgxMi0uMDc2LjA5NGMtLjMzNS40MTUtLjkyNyAxLjM0MS0xLjEyNCAyLjg3NmwtLjAyMS4xNjUuMDMzLjE2My4wNzEuMzQ1YzAgMS42NTQtMS4zNDYgMy0zIDMtLjc5NSAwLTEuNTQ1LS4zMTEtMi4xMDctLjg2OC0uNTYzLS41NjctLjg3My0xLjMxNy0uODczLTIuMTExIDAtMS40MzEgMS4wMDctMi42MzIgMi4zNTEtMi45Mjl2Mi45MjZzMi41MjgtMi4wODcgMi45ODQtMi40NjFoLjAxMmwzLjA2MS0yLjU4Mi00LjkxOS00LjFoLTEuMTM3djIuNDA0Yy0zLjQyOS4zMTgtNi4xMjEgMy4yMTEtNi4xMjEgNi43MjEgMCAxLjgwOS43MDcgMy41MDggMS45ODYgNC43ODIgMS4yNzcgMS4yODIgMi45NzYgMS45ODggNC43ODQgMS45ODggMy43MjIgMCA2Ljc1LTMuMDI4IDYuNzUtNi43NSAwLTEuMjQ1LS4zNDktMi40NjgtMS4wMDctMy41MzZ6Ii8+CiAgICA8cGF0aCBmaWxsPSIjQzVDNUM1IiBkPSJNMTIuNiA2LjEzNGwtLjA5NC4wNzFjLS4yNjkuMzMzLS43NDYgMS4wOTYtLjkxIDIuMzc1LjA1Ny4yNzcuMDkyLjQ5NS4wOTIuNTQ1IDAgMi4yMDYtMS43OTQgNC00IDQtMS4wOTggMC0yLjA5My0uNDQ1LTIuODE3LTEuMTY0LS43MTgtLjcyNC0xLjE2My0xLjcxOC0xLjE2My0yLjgxNSAwLTIuMjA2IDEuNzk0LTQgNC00bC4zNTEuMDI1djEuODVzMS42MjYtMS4zNDIgMS42MzEtMS4zMzlsMS44NjktMS41NzctMy41LTIuOTE3djIuMjE4bC0uMzcxLS4wM2MtMy4xNzYgMC01Ljc1IDIuNTc0LTUuNzUgNS43NSAwIDEuNTkzLjY0OCAzLjAzNCAxLjY5NSA0LjA3NiAxLjA0MiAxLjA0NiAyLjQ4MiAxLjY5NCA0LjA3NiAxLjY5NCAzLjE3NiAwIDUuNzUtMi41NzQgNS43NS01Ljc1LS4wMDEtMS4xMDYtLjMxOC0yLjEzNS0uODU5LTMuMDEyeiIvPgo8L3N2Zz4K\"","module.exports = \"data:image/svg+xml;base64,PCEtLUNvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLi0tPgo8IS0tQ29weXJpZ2h0IChDKSAyMDE5IFR5cGVGb3ggYW5kIG90aGVycy4tLT4KPCEtLUxpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS4gU2VlIExpY2Vuc2UudHh0IGluIHRoZSBwcm9qZWN0IHJvb3QgZm9yIGxpY2Vuc2UgaW5mb3JtYXRpb24uLS0+CjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB2aWV3Qm94PSIwIDAgMTYgMTYiPjxkZWZzPjxzdHlsZT4uaWNvbi1jYW52YXMtdHJhbnNwYXJlbnQsLmljb24tdnMtb3V0e2ZpbGw6IzI1MjUyNjt9Lmljb24tY2FudmFzLXRyYW5zcGFyZW50e29wYWNpdHk6MDt9Lmljb24tdnMtYmd7ZmlsbDojYzVjNWM1O308L3N0eWxlPjwvZGVmcz48dGl0bGU+YWRkPC90aXRsZT48ZyBpZD0iY2FudmFzIj48cGF0aCBjbGFzcz0iaWNvbi1jYW52YXMtdHJhbnNwYXJlbnQiIGQ9Ik0xNiwxNkgwVjBIMTZaIi8+PC9nPjxnIGlkPSJvdXRsaW5lIiBzdHlsZT0iZGlzcGxheTogbm9uZTsiPjxwYXRoIGNsYXNzPSJpY29uLXZzLW91dCIgZD0iTTE0LDZ2NEgxMHY0SDZWMTBIMlY2SDZWMmg0VjZaIi8+PC9nPjxnIGlkPSJpY29uQmciPjxwYXRoIGNsYXNzPSJpY29uLXZzLWJnIiBkPSJNMTMsN1Y5SDl2NEg3VjlIM1Y3SDdWM0g5VjdaIi8+PC9nPjwvc3ZnPgo=\"","module.exports = \"data:image/svg+xml;base64,PCEtLUNvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLi0tPgo8IS0tQ29weXJpZ2h0IChDKSAyMDE5IFR5cGVGb3ggYW5kIG90aGVycy4tLT4KPCEtLUxpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS4gU2VlIExpY2Vuc2UudHh0IGluIHRoZSBwcm9qZWN0IHJvb3QgZm9yIGxpY2Vuc2UgaW5mb3JtYXRpb24uLS0+CjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB2aWV3Qm94PSIwIDAgMTYgMTYiPjxkZWZzPjxzdHlsZT4uaWNvbi1jYW52YXMtdHJhbnNwYXJlbnQsLmljb24tdnMtb3V0e2ZpbGw6I2Y2ZjZmNjt9Lmljb24tY2FudmFzLXRyYW5zcGFyZW50e29wYWNpdHk6MDt9Lmljb24tdnMtYmd7ZmlsbDojNDI0MjQyO308L3N0eWxlPjwvZGVmcz48dGl0bGU+YWRkPC90aXRsZT48ZyBpZD0iY2FudmFzIj48cGF0aCBjbGFzcz0iaWNvbi1jYW52YXMtdHJhbnNwYXJlbnQiIGQ9Ik0xNiwxNkgwVjBIMTZaIi8+PC9nPjxnIGlkPSJvdXRsaW5lIiBzdHlsZT0iZGlzcGxheTogbm9uZTsiPjxwYXRoIGNsYXNzPSJpY29uLXZzLW91dCIgZD0iTTE0LDZ2NEgxMHY0SDZWMTBIMlY2SDZWMmg0VjZaIi8+PC9nPjxnIGlkPSJpY29uQmciPjxwYXRoIGNsYXNzPSJpY29uLXZzLWJnIiBkPSJNMTMsN1Y5SDl2NEg3VjlIM1Y3SDdWM0g5VjdaIi8+PC9nPjwvc3ZnPgo=\"","module.exports = \"data:image/svg+xml;base64,PCEtLUNvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLi0tPgo8IS0tQ29weXJpZ2h0IChDKSAyMDE4IFR5cGVGb3ggYW5kIG90aGVycy4tLT4KPCEtLUxpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS4gU2VlIExpY2Vuc2UudHh0IGluIHRoZSBwcm9qZWN0IHJvb3QgZm9yIGxpY2Vuc2UgaW5mb3JtYXRpb24uLS0+CjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMTYiIGhlaWdodD0iMTYiPgogICAgPHN0eWxlIHR5cGU9InRleHQvY3NzIj4KICAgICAgICAuc3Qwe29wYWNpdHk6MDtmaWxsOiMyNjI2MjY7fSAuc3Qxe2ZpbGw6IzI2MjYyNjt9IC5zdDJ7ZmlsbDojQzVDNUM1O30KICAgIDwvc3R5bGU+CiAgICA8ZyBpZD0ib3V0bGluZSI+CiAgICAgICAgPHJlY3Qgd2lkdGg9IjE2IiBoZWlnaHQ9IjE2IiBjbGFzcz0ic3QwIi8+CiAgICAgICAgPHBhdGggZD0iTTE0LjE3NiA1LjU5MmMtLjU1NS0uNi0xLjMzNi0uOTA0LTIuMzIyLS45MDQtLjI1OCAwLS41MjEuMDI0LS43ODQuMDcyLS4yNDYuMDQ0LS40NzkuMTAxLS43LjE2OS0uMjI4LjA3LS40MzIuMTQ3LS42MTMuMjI5LS4yMi4wOTktLjM4OS4xOTYtLjUxMi4yODRsLS40MTkuMjk5djIuNzAxYy0uMDg2LjEwOC0uMTYyLjIyMy0uMjI5LjM0NGwtMi40NS02LjM1NGgtMi4zOTRsLTMuNzUzIDkuODA0di41OThoMy4wMjVsLjgzOC0yLjM1aDIuMTY3bC44OTEgMi4zNWgzLjIzN2wtLjAwMS0uMDAzYy4zMDUuMDkyLjYzMy4xNS45OTMuMTUuMzQ0IDAgLjY3MS0uMDQ5Ljk3OC0uMTQ2aDIuODUzdi00LjkwM2MtLjAwMS0uOTc1LS4yNzEtMS43NjMtLjgwNS0yLjM0eiIgY2xhc3M9InN0MSIvPgogICAgPC9nPgogICAgPGcgaWQ9Imljb25feDVGX2JnIj4KICAgICAgICA8cGF0aCBkPSJNNy42MTEgMTEuODM0bC0uODkxLTIuMzVoLTMuNTYybC0uODM4IDIuMzVoLTEuMDk1bDMuMjE3LTguNDAyaDEuMDJsMy4yNCA4LjQwMmgtMS4wOTF6bS0yLjUzMS02LjgxNGwtLjA0NC0uMTM1LS4wMzgtLjE1Ni0uMDI5LS4xNTItLjAyNC0uMTI2aC0uMDIzbC0uMDIxLjEyNi0uMDMyLjE1Mi0uMDM4LjE1Ni0uMDQ0LjEzNS0xLjMwNyAzLjU3NGgyLjkxOGwtMS4zMTgtMy41NzR6IiBjbGFzcz0ic3QyIi8+CiAgICAgICAgPHBhdGggZD0iTTEzLjAyIDExLjgzNHYtLjkzOGgtLjAyM2MtLjE5OS4zNTItLjQ1Ni42Mi0uNzcxLjgwNnMtLjY3My4yNzgtMS4wNzUuMjc4Yy0uMzEzIDAtLjU4OC0uMDQ1LS44MjYtLjEzNXMtLjQzOC0uMjEyLS41OTgtLjM2Ni0uMjgxLS4zMzgtLjM2My0uNTUxLS4xMjQtLjQ0Mi0uMTI0LS42ODhjMC0uMjYyLjAzOS0uNTAyLjExNy0uNzIxcy4xOTgtLjQxMi4zNi0uNTguMzY3LS4zMDguNjE1LS40MTkuNTQ0LS4xOS44ODgtLjIzN2wxLjgxMS0uMjUyYzAtLjI3My0uMDI5LS41MDctLjA4OC0uN3MtLjE0My0uMzUxLS4yNTItLjQ3Mi0uMjQxLS4yMS0uMzk2LS4yNjctLjMyNS0uMDg1LS41MTMtLjA4NWMtLjM2MyAwLS43MTQuMDY0LTEuMDUyLjE5M3MtLjYzOC4zMS0uOTA0LjU0di0uOTg0Yy4wODItLjA1OS4xOTYtLjEyMS4zNDMtLjE4OHMuMzEyLS4xMjguNDk1LS4xODUuMzc4LS4xMDQuNTgzLS4xNDEuNDA3LS4wNTYuNjA2LS4wNTZjLjY5OSAwIDEuMjI5LjE5NCAxLjU4OC41ODNzLjUzOS45NDIuNTM5IDEuNjYxdjMuOTAyaC0uOTZ6bS0xLjQ1NC0yLjgzYy0uMjczLjAzNS0uNDk4LjA4NS0uNjc0LjE0OXMtLjMxMy4xNDQtLjQxLjIzNy0uMTY1LjIwNS0uMjAyLjMzNC0uMDU1LjI3Ni0uMDU1LjQ0YzAgLjE0MS4wMjUuMjcxLjA3Ni4zOTNzLjEyNC4yMjcuMjIuMzE2LjIxNS4xNi4zNTcuMjExLjMwOC4wNzYuNDk1LjA3NmMuMjQyIDAgLjQ2NS0uMDQ1LjY2OC0uMTM1cy4zNzgtLjIxNC41MjQtLjM3Mi4yNjEtLjM0NC4zNDMtLjU1Ny4xMjMtLjQ0Mi4xMjMtLjY4OHYtLjYwOWwtMS40NjUuMjA1eiIgY2xhc3M9InN0MiIvPgogICAgPC9nPgo8L3N2Zz4K\"","module.exports = \"data:image/svg+xml;base64,PCEtLUNvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLi0tPgo8IS0tQ29weXJpZ2h0IChDKSAyMDE4IFR5cGVGb3ggYW5kIG90aGVycy4tLT4KPCEtLUxpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS4gU2VlIExpY2Vuc2UudHh0IGluIHRoZSBwcm9qZWN0IHJvb3QgZm9yIGxpY2Vuc2UgaW5mb3JtYXRpb24uLS0+CjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMTYiIGhlaWdodD0iMTYiPgogICAgPHN0eWxlIHR5cGU9InRleHQvY3NzIj4KICAgICAgICAuc3Qwe29wYWNpdHk6MDtmaWxsOiNGNkY2RjY7fSAuc3Qxe2ZpbGw6I0Y2RjZGNjt9IC5zdDJ7ZmlsbDojNDI0MjQyO30KICAgIDwvc3R5bGU+CiAgICA8ZyBpZD0ib3V0bGluZSI+CiAgICAgICAgPHJlY3Qgd2lkdGg9IjE2IiBoZWlnaHQ9IjE2IiBjbGFzcz0ic3QwIi8+CiAgICAgICAgPHBhdGggZD0iTTE0LjE3NiA1LjU5MmMtLjU1NS0uNi0xLjMzNi0uOTA0LTIuMzIyLS45MDQtLjI1OCAwLS41MjEuMDI0LS43ODQuMDcyLS4yNDYuMDQ0LS40NzkuMTAxLS43LjE2OS0uMjI4LjA3LS40MzIuMTQ3LS42MTMuMjI5LS4yMi4wOTktLjM4OS4xOTYtLjUxMi4yODRsLS40MTkuMjk5djIuNzAxYy0uMDg2LjEwOC0uMTYyLjIyMy0uMjI5LjM0NGwtMi40NS02LjM1NGgtMi4zOTRsLTMuNzUzIDkuODA0di41OThoMy4wMjVsLjgzOC0yLjM1aDIuMTY3bC44OTEgMi4zNWgzLjIzN2wtLjAwMS0uMDAzYy4zMDUuMDkyLjYzMy4xNS45OTMuMTUuMzQ0IDAgLjY3MS0uMDQ5Ljk3OC0uMTQ2aDIuODUzdi00LjkwM2MtLjAwMS0uOTc1LS4yNzEtMS43NjMtLjgwNS0yLjM0eiIgY2xhc3M9InN0MSIvPgogICAgPC9nPgogICAgPGcgaWQ9Imljb25feDVGX2JnIj4KICAgICAgICA8cGF0aCBkPSJNNy42MTEgMTEuODM0bC0uODkxLTIuMzVoLTMuNTYybC0uODM4IDIuMzVoLTEuMDk1bDMuMjE3LTguNDAyaDEuMDJsMy4yNCA4LjQwMmgtMS4wOTF6bS0yLjUzMS02LjgxNGwtLjA0NC0uMTM1LS4wMzgtLjE1Ni0uMDI5LS4xNTItLjAyNC0uMTI2aC0uMDIzbC0uMDIxLjEyNi0uMDMyLjE1Mi0uMDM4LjE1Ni0uMDQ0LjEzNS0xLjMwNyAzLjU3NGgyLjkxOGwtMS4zMTgtMy41NzR6IiBjbGFzcz0ic3QyIi8+CiAgICAgICAgPHBhdGggZD0iTTEzLjAyIDExLjgzNHYtLjkzOGgtLjAyM2MtLjE5OS4zNTItLjQ1Ni42Mi0uNzcxLjgwNnMtLjY3My4yNzgtMS4wNzUuMjc4Yy0uMzEzIDAtLjU4OC0uMDQ1LS44MjYtLjEzNXMtLjQzOC0uMjEyLS41OTgtLjM2Ni0uMjgxLS4zMzgtLjM2My0uNTUxLS4xMjQtLjQ0Mi0uMTI0LS42ODhjMC0uMjYyLjAzOS0uNTAyLjExNy0uNzIxcy4xOTgtLjQxMi4zNi0uNTguMzY3LS4zMDguNjE1LS40MTkuNTQ0LS4xOS44ODgtLjIzN2wxLjgxMS0uMjUyYzAtLjI3My0uMDI5LS41MDctLjA4OC0uN3MtLjE0My0uMzUxLS4yNTItLjQ3Mi0uMjQxLS4yMS0uMzk2LS4yNjctLjMyNS0uMDg1LS41MTMtLjA4NWMtLjM2MyAwLS43MTQuMDY0LTEuMDUyLjE5M3MtLjYzOC4zMS0uOTA0LjU0di0uOTg0Yy4wODItLjA1OS4xOTYtLjEyMS4zNDMtLjE4OHMuMzEyLS4xMjguNDk1LS4xODUuMzc4LS4xMDQuNTgzLS4xNDEuNDA3LS4wNTYuNjA2LS4wNTZjLjY5OSAwIDEuMjI5LjE5NCAxLjU4OC41ODNzLjUzOS45NDIuNTM5IDEuNjYxdjMuOTAyaC0uOTZ6bS0xLjQ1NC0yLjgzYy0uMjczLjAzNS0uNDk4LjA4NS0uNjc0LjE0OXMtLjMxMy4xNDQtLjQxLjIzNy0uMTY1LjIwNS0uMjAyLjMzNC0uMDU1LjI3Ni0uMDU1LjQ0YzAgLjE0MS4wMjUuMjcxLjA3Ni4zOTNzLjEyNC4yMjcuMjIuMzE2LjIxNS4xNi4zNTcuMjExLjMwOC4wNzYuNDk1LjA3NmMuMjQyIDAgLjQ2NS0uMDQ1LjY2OC0uMTM1cy4zNzgtLjIxNC41MjQtLjM3Mi4yNjEtLjM0NC4zNDMtLjU1Ny4xMjMtLjQ0Mi4xMjMtLjY4OHYtLjYwOWwtMS40NjUuMjA1eiIgY2xhc3M9InN0MiIvPgogICAgPC9nPgo8L3N2Zz4K\"","module.exports = \"data:image/svg+xml;base64,PCEtLUNvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLi0tPgo8IS0tQ29weXJpZ2h0IChDKSAyMDE5IFR5cGVGb3ggYW5kIG90aGVycy4tLT4KPCEtLUxpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS4gU2VlIExpY2Vuc2UudHh0IGluIHRoZSBwcm9qZWN0IHJvb3QgZm9yIGxpY2Vuc2UgaW5mb3JtYXRpb24uLS0+CjxzdmcgZmlsbD0iIzYxNjE2MSIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB2aWV3Qm94PSIwIDAgMTggMTgiPgogICAgPHBhdGggZmlsbD0ibm9uZSIgZD0iTTAsMGgxOHYxOEgwVjB6IiAvPgogICAgPGNpcmNsZSBjeD0iOSIgY3k9IjkiIHI9IjgiIC8+Cjwvc3ZnPgo=\"","module.exports = \"data:image/svg+xml;base64,PCEtLUNvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLi0tPgo8IS0tQ29weXJpZ2h0IChDKSAyMDE5IFR5cGVGb3ggYW5kIG90aGVycy4tLT4KPCEtLUxpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS4gU2VlIExpY2Vuc2UudHh0IGluIHRoZSBwcm9qZWN0IHJvb3QgZm9yIGxpY2Vuc2UgaW5mb3JtYXRpb24uLS0+CjxzdmcgZmlsbD0iI0UwRTBFMCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB2aWV3Qm94PSIwIDAgMTggMTgiPgogICAgPHBhdGggZmlsbD0ibm9uZSIgZD0iTTAsMGgxOHYxOEgwVjB6IiAvPgogICAgPGNpcmNsZSBjeD0iOSIgY3k9IjkiIHI9IjgiIC8+Cjwvc3ZnPgo=\"","module.exports = \"data:image/svg+xml;base64,PCEtLUNvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLi0tPgo8IS0tQ29weXJpZ2h0IChDKSAyMDE4IFR5cGVGb3ggYW5kIG90aGVycy4tLT4KPCEtLUxpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS4gU2VlIExpY2Vuc2UudHh0IGluIHRoZSBwcm9qZWN0IHJvb3QgZm9yIGxpY2Vuc2UgaW5mb3JtYXRpb24uLS0+CjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMTYiIGhlaWdodD0iMTYiPgogICAgPHBhdGggZmlsbD0iI0U4RThFOCIgZD0iTTEwLjc5OCA3bC0xLjgzLTJoNi4wMzJ2MmgtNC4yMDJ6bS0yLjI5Mi02aC0zLjIwN2wxLjMzNyAxLjUyIDEuODctMS41MnptLTUuNTA2IDguNTMxdjEuNDY5aDEydi0yaC0xMC44MTNsLS4wMjQuMDIxYy0uMy4yOTktLjcxNi40NzktMS4xNjMuNTF6bTAgNS40NjloMTJ2LTJoLTEydjJ6bTMuMzIzLThoLjYzMWwtLjM0Ny0uMjY2LS4yODQuMjY2em04LjY3Ny00di0yaC0zLjI4OWwtMS43NDMgMmg1LjAzMnoiLz4KICAgIDxwYXRoIGZpbGw9IiNGNDg3NzEiIGQ9Ik03LjI0NiA0LjZsMi44NTYtMy4yNzctLjQwNS0uMDAyLTMuMTc2IDIuNTgxLTIuNjA3LTIuOTYyYy0uMzM2LS4yMjEtLjc4Ni0uMi0xLjA4Mi4wOTYtLjMwOC4zMDYtLjMxOS43NzktLjA2OSAxLjEybDIuODMgMi40NDQtMy4zMzkgMi40NjZjLS4zMzkuMzM4LS4zMzkuODg3IDAgMS4yMjUuMzM5LjMzNy44ODguMzM3IDEuMjI2IDBsMy4wNjMtMi44NjcgMy4zMyAyLjU1NWguNDY2bC0zLjA5My0zLjM3OXoiLz4KPC9zdmc+Cg==\"","module.exports = \"data:image/svg+xml;base64,PCEtLUNvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLi0tPgo8IS0tQ29weXJpZ2h0IChDKSAyMDE4IFR5cGVGb3ggYW5kIG90aGVycy4tLT4KPCEtLUxpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS4gU2VlIExpY2Vuc2UudHh0IGluIHRoZSBwcm9qZWN0IHJvb3QgZm9yIGxpY2Vuc2UgaW5mb3JtYXRpb24uLS0+CjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMTYiIGhlaWdodD0iMTYiPgogICAgPHBhdGggZmlsbD0iIzQyNDI0MiIgZD0iTTEwLjc5OCA3bC0xLjgzLTJoNi4wMzJ2MmgtNC4yMDJ6bS0yLjI5Mi02aC0zLjIwN2wxLjMzNyAxLjUyIDEuODctMS41MnptLTUuNTA2IDguNTMxdjEuNDY5aDEydi0yaC0xMC44MTNsLS4wMjQuMDIxYy0uMy4yOTktLjcxNi40NzktMS4xNjMuNTF6bTAgNS40NjloMTJ2LTJoLTEydjJ6bTMuMzIzLThoLjYzMWwtLjM0Ny0uMjY2LS4yODQuMjY2em04LjY3Ny00di0yaC0zLjI4OWwtMS43NDMgMmg1LjAzMnoiLz4KICAgIDxwYXRoIGZpbGw9IiNBMTI2MEQiIGQ9Ik03LjI0NiA0LjZsMi44NTYtMy4yNzctLjQwNS0uMDAyLTMuMTc2IDIuNTgxLTIuNjA3LTIuOTYyYy0uMzM2LS4yMjEtLjc4Ni0uMi0xLjA4Mi4wOTYtLjMwOC4zMDYtLjMxOS43NzktLjA2OSAxLjEybDIuODMgMi40NDQtMy4zMzkgMi40NjZjLS4zMzkuMzM4LS4zMzkuODg3IDAgMS4yMjUuMzM5LjMzNy44ODguMzM3IDEuMjI2IDBsMy4wNjMtMi44NjcgMy4zMyAyLjU1NWguNDY2bC0zLjA5My0zLjM3OXoiLz4KPC9zdmc+Cg==\"","module.exports = \"data:image/svg+xml;base64,PCEtLUNvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLi0tPgo8IS0tQ29weXJpZ2h0IChDKSAyMDE5IFR5cGVGb3ggYW5kIG90aGVycy4tLT4KPCEtLUxpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS4gU2VlIExpY2Vuc2UudHh0IGluIHRoZSBwcm9qZWN0IHJvb3QgZm9yIGxpY2Vuc2UgaW5mb3JtYXRpb24uLS0+CjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMTYiIGhlaWdodD0iMTYiIHZpZXdCb3g9IjAgMCAxNiAxNiI+CiAgICA8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiMwMDAiIHN0cm9rZS13aWR0aD0iMS4yIiBkPSJNMTEsMTEgTDExLDYgTDMsNiBMMywxNCBMMTEsMTQgTDExLDExIEwxNCwxMSBMMTQsMyBMNiwzIEw2LDYiLz4KICAgIDxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIxLjQiIGQ9Ik01LDggTDksMTIgTTksOCBMNSwxMiIvPgo8L3N2Zz4K\"","module.exports = \"data:image/svg+xml;base64,PCEtLUNvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLi0tPgo8IS0tQ29weXJpZ2h0IChDKSAyMDE5IFR5cGVGb3ggYW5kIG90aGVycy4tLT4KPCEtLUxpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS4gU2VlIExpY2Vuc2UudHh0IGluIHRoZSBwcm9qZWN0IHJvb3QgZm9yIGxpY2Vuc2UgaW5mb3JtYXRpb24uLS0+CjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMTYiIGhlaWdodD0iMTYiIHZpZXdCb3g9IjAgMCAxNiAxNiI+CiAgICA8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiNENEQ0RDQiIHN0cm9rZS13aWR0aD0iMS4yIiBkPSJNMTEsMTEgTDExLDYgTDMsNiBMMywxNCBMMTEsMTQgTDExLDExIEwxNCwxMSBMMTQsMyBMNiwzIEw2LDYiLz4KICAgIDxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iI0Q0RDRENCIgc3Ryb2tlLXdpZHRoPSIxLjQiIGQ9Ik01LDggTDksMTIgTTksOCBMNSwxMiIvPgo8L3N2Zz4K\"","module.exports = \"data:image/svg+xml;base64,PCEtLUNvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLi0tPgo8IS0tQ29weXJpZ2h0IChDKSAyMDE5IFR5cGVGb3ggYW5kIG90aGVycy4tLT4KPCEtLUxpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS4gU2VlIExpY2Vuc2UudHh0IGluIHRoZSBwcm9qZWN0IHJvb3QgZm9yIGxpY2Vuc2UgaW5mb3JtYXRpb24uLS0+CjxzdmcgZmlsbD0iIzAwMDAwMCIgaGVpZ2h0PSIxNiIgdmlld0JveD0iMCAwIDI0IDI0IiB3aWR0aD0iMTYiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CiAgICA8cGF0aCBkPSJNMTkgNi40MUwxNy41OSA1IDEyIDEwLjU5IDYuNDEgNSA1IDYuNDEgMTAuNTkgMTIgNSAxNy41OSA2LjQxIDE5IDEyIDEzLjQxIDE3LjU5IDE5IDE5IDE3LjU5IDEzLjQxIDEyeiIvPgogICAgPHBhdGggZD0iTTAgMGgyNHYyNEgweiIgZmlsbD0ibm9uZSIvPgo8L3N2Zz4K\"","module.exports = \"data:image/svg+xml;base64,PCEtLUNvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLi0tPgo8IS0tQ29weXJpZ2h0IChDKSAyMDE5IFR5cGVGb3ggYW5kIG90aGVycy4tLT4KPCEtLUxpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS4gU2VlIExpY2Vuc2UudHh0IGluIHRoZSBwcm9qZWN0IHJvb3QgZm9yIGxpY2Vuc2UgaW5mb3JtYXRpb24uLS0+CjxzdmcgZmlsbD0iI0Q0RDRENCIgaGVpZ2h0PSIxNiIgdmlld0JveD0iMCAwIDI0IDI0IiB3aWR0aD0iMTYiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CiAgICA8cGF0aCBkPSJNMTkgNi40MUwxNy41OSA1IDEyIDEwLjU5IDYuNDEgNSA1IDYuNDEgMTAuNTkgMTIgNSAxNy41OSA2LjQxIDE5IDEyIDEzLjQxIDE3LjU5IDE5IDE5IDE3LjU5IDEzLjQxIDEyeiIvPgogICAgPHBhdGggZD0iTTAgMGgyNHYyNEgweiIgZmlsbD0ibm9uZSIvPgo8L3N2Zz4K\"","module.exports = \"data:image/svg+xml;base64,PCEtLUNvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLi0tPgo8IS0tQ29weXJpZ2h0IChDKSAyMDE5IFR5cGVGb3ggYW5kIG90aGVycy4tLT4KPCEtLUxpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS4gU2VlIExpY2Vuc2UudHh0IGluIHRoZSBwcm9qZWN0IHJvb3QgZm9yIGxpY2Vuc2UgaW5mb3JtYXRpb24uLS0+CjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMTYiIGhlaWdodD0iMTYiPjxwYXRoIGZpbGw9IiM2NDY0NjUiIGQ9Ik02IDR2OGw0LTQtNC00em0xIDIuNDE0bDEuNTg2IDEuNTg2LTEuNTg2IDEuNTg2di0zLjE3MnoiLz48L3N2Zz4K\"","module.exports = \"data:image/svg+xml;base64,PCEtLUNvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLi0tPgo8IS0tQ29weXJpZ2h0IChDKSAyMDE4IEVyaWNzc29uIGFuZCBvdGhlcnMuLS0+CjwhLS1MaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuIFNlZSBMaWNlbnNlLnR4dCBpbiB0aGUgcHJvamVjdCByb290IGZvciBsaWNlbnNlIGluZm9ybWF0aW9uLi0tPgo8c3ZnIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgdmlld0JveD0iMCAwIDE2IDE2IiBmaWxsPSJub25lIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgo8cGF0aCBkPSJNMi4yMjc4NSA3LjM1OTg2QzIuNjkwNzggNy4zNTk4NiAzLjAxNjI3IDcuMjUxMzYgMy4yMDQzNCA3LjAzNDM2QzMuMzM0NTQgNi44NzUyMyAzLjM5OTY0IDYuNjQzNzYgMy4zOTk2NCA2LjMzOTk2QzMuMzk5NjQgNi4yMDk3NiAzLjM4NTE3IDYuMDE4MDggMy4zNTYyNCA1Ljc2NDkyQzMuMzI3MzEgNS41MTE3NiAzLjMxMjg0IDUuMzE2NDYgMy4zMTI4NCA1LjE3OTAyQzMuMzEyODQgNS4wNDE1OSAzLjMwNTYxIDQuODM1NDQgMy4yOTExNCA0LjU2MDU4QzMuMjYyMjEgNC4zMTQ2NSAzLjI0Nzc0IDQuMTQxMDUgMy4yNDc3NCA0LjAzOTc4QzMuMjQ3NzQgMy4zNDUzOSAzLjQ1MDI3IDIuODMxODMgMy44NTUzMyAyLjQ5OTA5QzQuMjYwNCAyLjE2NjM2IDQuODMxODMgMiA1LjU2OTYyIDJINi4xMTIxMlYzLjI4MDI5SDUuODMwMDJDNS41MTE3NSAzLjI4MDI5IDUuMjgzOTEgMy4zNzA3MSA1LjE0NjQ3IDMuNTUxNTRDNS4wMDkwNCAzLjczMjM3IDQuOTQwMzMgNC4wMDM2MiA0Ljk0MDMzIDQuMzY1MjhDNC45NDAzMyA0LjQ1MjA4IDQuOTU0NzkgNC41ODIyOCA0Ljk4MzcyIDQuNzU1ODhDNS4wMTI2NiA0Ljk3Mjg4IDUuMDI3MTIgNS4xMzkyNCA1LjAyNzEyIDUuMjU0OTdDNS4wMjcxMiA1LjM0MTc3IDUuMDM0MzYgNS40NzkyIDUuMDQ4ODIgNS42NjcyN0M1LjA3Nzc2IDUuOTI3NjcgNS4wOTIyMiA2LjEzMDIgNS4wOTIyMiA2LjI3NDg2QzUuMDkyMjIgNi44MjQ1OSA0Ljk3NjQ5IDcuMjM2ODkgNC43NDUwMyA3LjUxMTc1QzQuNTQyNSA3Ljc1NzY4IDQuMjI0MjMgNy45MzEyOCAzLjc5MDI0IDguMDMyNTVDNC4yMjQyMyA4LjE0ODI4IDQuNTQyNSA4LjMyMTg4IDQuNzQ1MDMgOC41NTMzNEM0Ljk3NjQ5IDguODQyNjggNS4wOTIyMiA5LjI1NDk3IDUuMDkyMjIgOS43OTAyNEM1LjA5MjIyIDkuOTQ5MzcgNS4wNzc3NiAxMC4xNTkxIDUuMDQ4ODIgMTAuNDE5NUM1LjAxOTg5IDEwLjYwNzYgNS4wMDkwNCAxMC43NDUgNS4wMTYyNyAxMC44MzE4QzUuMDIzNTEgMTAuOTE4NiA1LjAxMjY2IDExLjA3MDUgNC45ODM3MiAxMS4yODc1QzQuOTU0NzkgMTEuNDQ2NyA0Ljk0MDMzIDExLjU2MjQgNC45NDAzMyAxMS42MzQ3QzQuOTQwMzMgMTEuOTk2NCA1LjAwOTA0IDEyLjI2NzYgNS4xNDY0NyAxMi40NDg1QzUuMjgzOTEgMTIuNjI5MyA1LjUxMTc1IDEyLjcxOTcgNS44MzAwMiAxMi43MTk3SDYuMTEyMTJWMTRINS41Njk2MkM0LjA2NTEgMTQgMy4zMTI4NCAxMy4zMjAxIDMuMzEyODQgMTEuOTYwMkMzLjMxMjg0IDExLjQ2ODQgMy4zMzgxNiAxMS4wODg2IDMuMzg4NzkgMTAuODIxQzMuNDM5NDIgMTAuNTUzMyAzLjQ2NDc0IDEwLjE2NjQgMy40NjQ3NCA5LjY2MDA0QzMuNDY0NzQgOC45ODAxMSAzLjA4MTM3IDguNjQwMTQgMi4zMTQ2NSA4LjY0MDE0TDIuMjI3ODUgNy4zNTk4NlpNMTMuNzcyMiA4LjUwOTk1QzEzLjAwNTQgOC41MDk5NSAxMi42MjIxIDguODQ5OTEgMTIuNjIyMSA5LjUyOTg0QzEyLjYyMjEgOS42NjAwNCAxMi42MzI5IDkuODUxNzIgMTIuNjU0NiAxMC4xMDQ5QzEyLjY3NjMgMTAuMzU4IDEyLjY4NzIgMTAuNTQ5NyAxMi42ODcyIDEwLjY3OTlDMTIuNzMwNiAxMC45NTQ4IDEyLjc1MjMgMTEuMzM4MiAxMi43NTIzIDExLjgzQzEyLjc1MjMgMTMuMTg5OSAxMS45ODU1IDEzLjg2OTggMTAuNDUyMSAxMy44Njk4SDkuOTA5NThWMTIuNzE5N0gxMC4xN0MxMC40ODgyIDEyLjcxOTcgMTAuNzE2MSAxMi42MjkzIDEwLjg1MzUgMTIuNDQ4NUMxMC45OTEgMTIuMjY3NiAxMS4wNTk3IDExLjk5NjQgMTEuMDU5NyAxMS42MzQ3QzExLjA1OTcgMTEuMjczMSAxMS4wMzggMTAuOTk4MiAxMC45OTQ2IDEwLjgxMDFDMTAuOTk0NiAxMC42OTQ0IDEwLjk4MDEgMTAuNTI0NCAxMC45NTEyIDEwLjMwMDJDMTAuOTIyMiAxMC4wNzU5IDEwLjkwNzggOS45MDU5NyAxMC45MDc4IDkuNzkwMjRDMTAuOTA3OCA5LjI1NDk3IDExLjAyMzUgOC44NDI2OCAxMS4yNTUgOC41NTMzNEMxMS40NTc1IDguMzIxODggMTEuNzc1OCA4LjE0ODI4IDEyLjIwOTggOC4wMzI1NUMxMS43NzU4IDcuOTMxMjggMTEuNDU3NSA3Ljc1NzY4IDExLjI1NSA3LjUxMTc1QzExLjAyMzUgNy4yMzY4OSAxMC45MDc4IDYuODI0NTkgMTAuOTA3OCA2LjI3NDg2QzEwLjkwNzggNi4xMzAyIDEwLjkyMjIgNS45Mjc2NyAxMC45NTEyIDUuNjY3MjdDMTAuOTgwMSA1LjQ3OTIgMTAuOTk0NiA1LjM0MTc3IDEwLjk5NDYgNS4yNTQ5N0MxMS4wMzggNS4wMjM1MSAxMS4wNTk3IDQuNzM0MTggMTEuMDU5NyA0LjM4Njk4QzExLjA1OTcgNC4wMzk3OCAxMC45ODczIDMuNzc5MzkgMTAuODQyNyAzLjYwNTc5QzEwLjY5OCAzLjQzMjE5IDEwLjQ3MzggMy4zMjM2OSAxMC4xNyAzLjI4MDI5SDkuOTA5NThWMkgxMC40NTIxQzExLjE3NTQgMiAxMS43Mzk2IDIuMTY2MzYgMTIuMTQ0NyAyLjQ5OTA5QzEyLjU0OTcgMi44MzE4MyAxMi43NTIzIDMuMzQ1MzkgMTIuNzUyMyA0LjAzOTc4QzEyLjc1MjMgNC4xNjk5OCAxMi43NDE0IDQuMzYxNjYgMTIuNzE5NyA0LjYxNDgzQzEyLjY5OCA0Ljg2Nzk5IDEyLjY4NzIgNS4wNTk2NyAxMi42ODcyIDUuMTg5ODdDMTIuNjQzOCA1LjQ2NDc0IDEyLjYxNDggNS44NDgxIDEyLjYwMDQgNi4zMzk5NkMxMi42MTQ4IDYuNjQzNzYgMTIuNjc5OSA2Ljg3NTIzIDEyLjc5NTcgNy4wMzQzNkMxMi45ODM3IDcuMjUxMzYgMTMuMzA5MiA3LjM1OTg2IDEzLjc3MjIgNy4zNTk4NlY4LjUwOTk1WiIgZmlsbD0iI0M1QzVDNSIvPgo8L3N2Zz4K\"","module.exports = \"data:image/svg+xml;base64,PCEtLUNvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLi0tPgo8IS0tQ29weXJpZ2h0IChDKSAyMDE4IEVyaWNzc29uIGFuZCBvdGhlcnMuLS0+CjwhLS1MaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuIFNlZSBMaWNlbnNlLnR4dCBpbiB0aGUgcHJvamVjdCByb290IGZvciBsaWNlbnNlIGluZm9ybWF0aW9uLi0tPgo8c3ZnIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgdmlld0JveD0iMCAwIDE2IDE2IiBmaWxsPSJub25lIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgo8cGF0aCBkPSJNMi4yMjc4NSA3LjM1OTg2QzIuNjkwNzggNy4zNTk4NiAzLjAxNjI3IDcuMjUxMzYgMy4yMDQzNCA3LjAzNDM2QzMuMzM0NTQgNi44NzUyMyAzLjM5OTY0IDYuNjQzNzYgMy4zOTk2NCA2LjMzOTk2QzMuMzk5NjQgNi4yMDk3NiAzLjM4NTE3IDYuMDE4MDggMy4zNTYyNCA1Ljc2NDkyQzMuMzI3MzEgNS41MTE3NiAzLjMxMjg0IDUuMzE2NDYgMy4zMTI4NCA1LjE3OTAyQzMuMzEyODQgNS4wNDE1OSAzLjMwNTYxIDQuODM1NDQgMy4yOTExNCA0LjU2MDU4QzMuMjYyMjEgNC4zMTQ2NSAzLjI0Nzc0IDQuMTQxMDUgMy4yNDc3NCA0LjAzOTc4QzMuMjQ3NzQgMy4zNDUzOSAzLjQ1MDI3IDIuODMxODMgMy44NTUzMyAyLjQ5OTA5QzQuMjYwNCAyLjE2NjM2IDQuODMxODMgMiA1LjU2OTYyIDJINi4xMTIxMlYzLjI4MDI5SDUuODMwMDJDNS41MTE3NSAzLjI4MDI5IDUuMjgzOTEgMy4zNzA3MSA1LjE0NjQ3IDMuNTUxNTRDNS4wMDkwNCAzLjczMjM3IDQuOTQwMzMgNC4wMDM2MiA0Ljk0MDMzIDQuMzY1MjhDNC45NDAzMyA0LjQ1MjA4IDQuOTU0NzkgNC41ODIyOCA0Ljk4MzcyIDQuNzU1ODhDNS4wMTI2NiA0Ljk3Mjg4IDUuMDI3MTIgNS4xMzkyNCA1LjAyNzEyIDUuMjU0OTdDNS4wMjcxMiA1LjM0MTc3IDUuMDM0MzYgNS40NzkyIDUuMDQ4ODIgNS42NjcyN0M1LjA3Nzc2IDUuOTI3NjcgNS4wOTIyMiA2LjEzMDIgNS4wOTIyMiA2LjI3NDg2QzUuMDkyMjIgNi44MjQ1OSA0Ljk3NjQ5IDcuMjM2ODkgNC43NDUwMyA3LjUxMTc1QzQuNTQyNSA3Ljc1NzY4IDQuMjI0MjMgNy45MzEyOCAzLjc5MDI0IDguMDMyNTVDNC4yMjQyMyA4LjE0ODI4IDQuNTQyNSA4LjMyMTg4IDQuNzQ1MDMgOC41NTMzNEM0Ljk3NjQ5IDguODQyNjggNS4wOTIyMiA5LjI1NDk3IDUuMDkyMjIgOS43OTAyNEM1LjA5MjIyIDkuOTQ5MzcgNS4wNzc3NiAxMC4xNTkxIDUuMDQ4ODIgMTAuNDE5NUM1LjAxOTg5IDEwLjYwNzYgNS4wMDkwNCAxMC43NDUgNS4wMTYyNyAxMC44MzE4QzUuMDIzNTEgMTAuOTE4NiA1LjAxMjY2IDExLjA3MDUgNC45ODM3MiAxMS4yODc1QzQuOTU0NzkgMTEuNDQ2NyA0Ljk0MDMzIDExLjU2MjQgNC45NDAzMyAxMS42MzQ3QzQuOTQwMzMgMTEuOTk2NCA1LjAwOTA0IDEyLjI2NzYgNS4xNDY0NyAxMi40NDg1QzUuMjgzOTEgMTIuNjI5MyA1LjUxMTc1IDEyLjcxOTcgNS44MzAwMiAxMi43MTk3SDYuMTEyMTJWMTRINS41Njk2MkM0LjA2NTEgMTQgMy4zMTI4NCAxMy4zMjAxIDMuMzEyODQgMTEuOTYwMkMzLjMxMjg0IDExLjQ2ODQgMy4zMzgxNiAxMS4wODg2IDMuMzg4NzkgMTAuODIxQzMuNDM5NDIgMTAuNTUzMyAzLjQ2NDc0IDEwLjE2NjQgMy40NjQ3NCA5LjY2MDA0QzMuNDY0NzQgOC45ODAxMSAzLjA4MTM3IDguNjQwMTQgMi4zMTQ2NSA4LjY0MDE0TDIuMjI3ODUgNy4zNTk4NlpNMTMuNzcyMiA4LjUwOTk1QzEzLjAwNTQgOC41MDk5NSAxMi42MjIxIDguODQ5OTEgMTIuNjIyMSA5LjUyOTg0QzEyLjYyMjEgOS42NjAwNCAxMi42MzI5IDkuODUxNzIgMTIuNjU0NiAxMC4xMDQ5QzEyLjY3NjMgMTAuMzU4IDEyLjY4NzIgMTAuNTQ5NyAxMi42ODcyIDEwLjY3OTlDMTIuNzMwNiAxMC45NTQ4IDEyLjc1MjMgMTEuMzM4MiAxMi43NTIzIDExLjgzQzEyLjc1MjMgMTMuMTg5OSAxMS45ODU1IDEzLjg2OTggMTAuNDUyMSAxMy44Njk4SDkuOTA5NThWMTIuNzE5N0gxMC4xN0MxMC40ODgyIDEyLjcxOTcgMTAuNzE2MSAxMi42MjkzIDEwLjg1MzUgMTIuNDQ4NUMxMC45OTEgMTIuMjY3NiAxMS4wNTk3IDExLjk5NjQgMTEuMDU5NyAxMS42MzQ3QzExLjA1OTcgMTEuMjczMSAxMS4wMzggMTAuOTk4MiAxMC45OTQ2IDEwLjgxMDFDMTAuOTk0NiAxMC42OTQ0IDEwLjk4MDEgMTAuNTI0NCAxMC45NTEyIDEwLjMwMDJDMTAuOTIyMiAxMC4wNzU5IDEwLjkwNzggOS45MDU5NyAxMC45MDc4IDkuNzkwMjRDMTAuOTA3OCA5LjI1NDk3IDExLjAyMzUgOC44NDI2OCAxMS4yNTUgOC41NTMzNEMxMS40NTc1IDguMzIxODggMTEuNzc1OCA4LjE0ODI4IDEyLjIwOTggOC4wMzI1NUMxMS43NzU4IDcuOTMxMjggMTEuNDU3NSA3Ljc1NzY4IDExLjI1NSA3LjUxMTc1QzExLjAyMzUgNy4yMzY4OSAxMC45MDc4IDYuODI0NTkgMTAuOTA3OCA2LjI3NDg2QzEwLjkwNzggNi4xMzAyIDEwLjkyMjIgNS45Mjc2NyAxMC45NTEyIDUuNjY3MjdDMTAuOTgwMSA1LjQ3OTIgMTAuOTk0NiA1LjM0MTc3IDEwLjk5NDYgNS4yNTQ5N0MxMS4wMzggNS4wMjM1MSAxMS4wNTk3IDQuNzM0MTggMTEuMDU5NyA0LjM4Njk4QzExLjA1OTcgNC4wMzk3OCAxMC45ODczIDMuNzc5MzkgMTAuODQyNyAzLjYwNTc5QzEwLjY5OCAzLjQzMjE5IDEwLjQ3MzggMy4zMjM2OSAxMC4xNyAzLjI4MDI5SDkuOTA5NThWMkgxMC40NTIxQzExLjE3NTQgMiAxMS43Mzk2IDIuMTY2MzYgMTIuMTQ0NyAyLjQ5OTA5QzEyLjU0OTcgMi44MzE4MyAxMi43NTIzIDMuMzQ1MzkgMTIuNzUyMyA0LjAzOTc4QzEyLjc1MjMgNC4xNjk5OCAxMi43NDE0IDQuMzYxNjYgMTIuNzE5NyA0LjYxNDgzQzEyLjY5OCA0Ljg2Nzk5IDEyLjY4NzIgNS4wNTk2NyAxMi42ODcyIDUuMTg5ODdDMTIuNjQzOCA1LjQ2NDc0IDEyLjYxNDggNS44NDgxIDEyLjYwMDQgNi4zMzk5NkMxMi42MTQ4IDYuNjQzNzYgMTIuNjc5OSA2Ljg3NTIzIDEyLjc5NTcgNy4wMzQzNkMxMi45ODM3IDcuMjUxMzYgMTMuMzA5MiA3LjM1OTg2IDEzLjc3MjIgNy4zNTk4NlY4LjUwOTk1WiIgZmlsbD0iIzQyNDI0MiIvPgo8L3N2Zz4K\"","module.exports = \"data:image/svg+xml;base64,PCEtLUNvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLi0tPgo8IS0tQ29weXJpZ2h0IChDKSAyMDE5IFR5cGVGb3ggYW5kIG90aGVycy4tLT4KPCEtLUxpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS4gU2VlIExpY2Vuc2UudHh0IGluIHRoZSBwcm9qZWN0IHJvb3QgZm9yIGxpY2Vuc2UgaW5mb3JtYXRpb24uLS0+CjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMTYiIGhlaWdodD0iMTYiPjxwYXRoIGZpbGw9IiM2NDY0NjUiIGQ9Ik0xMSAxMC4wN2gtNS42NTZsNS42NTYtNS42NTZ2NS42NTZ6Ii8+PC9zdmc+Cg==\"","module.exports = \"data:image/svg+xml;base64,PCEtLUNvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLi0tPgo8IS0tQ29weXJpZ2h0IChDKSAyMDE5IFR5cGVGb3ggYW5kIG90aGVycy4tLT4KPCEtLUxpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS4gU2VlIExpY2Vuc2UudHh0IGluIHRoZSBwcm9qZWN0IHJvb3QgZm9yIGxpY2Vuc2UgaW5mb3JtYXRpb24uLS0+CjxzdmcgZmlsbD0ibm9uZSIgaGVpZ2h0PSIxNiIgdmlld0JveD0iMCAwIDE2IDE2IiB3aWR0aD0iMTYiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggY2xpcC1ydWxlPSJldmVub2RkIiBkPSJtNiAxMmgtMWMtLjI3LS4wMi0uNDgtLjExLS42OS0uMzFzLS4zLS40Mi0uMzEtLjY5di02LjI4Yy41OS0uMzQgMS0uOTggMS0xLjcyIDAtMS4xMS0uODktMi0yLTJzLTIgLjg5LTIgMmMwIC43My40MSAxLjM4IDEgMS43MnY2LjI4Yy4wMy43OC4zNCAxLjQ3Ljk0IDIuMDZzMS4yOC45MSAyLjA2Ljk0YzAgMCAxLjAyIDAgMSAwdjJsMy0zLTMtM3ptLTMtMTAuMmMuNjYgMCAxLjIuNTUgMS4yIDEuMnMtLjU1IDEuMi0xLjIgMS4yLTEuMi0uNTUtMS4yLTEuMi41NS0xLjIgMS4yLTEuMnptMTEgOS40OGMwLTEuNzMgMC02LjI4IDAtNi4yOC0uMDMtLjc4LS4zNC0xLjQ3LS45NC0yLjA2cy0xLjI4LS45MS0yLjA2LS45NGgtMXYtMmwtMyAzIDMgM3YtMmgxYy4yNy4wMi40OC4xMS42OS4zMXMuMy40Mi4zMS42OXY2LjI4Yy0uNTkuMzQtMSAuOTgtMSAxLjcyIDAgMS4xMS44OSAyIDIgMnMyLS44OSAyLTJjMC0uNzMtLjQxLTEuMzgtMS0xLjcyem0tMSAyLjkyYy0uNjYgMC0xLjItLjU1LTEuMi0xLjJzLjU1LTEuMiAxLjItMS4yIDEuMi41NSAxLjIgMS4yLS41NSAxLjItMS4yIDEuMnoiIGZpbGw9IiM0MjQyNDIiIGZpbGwtcnVsZT0iZXZlbm9kZCIvPjwvc3ZnPg==\"","module.exports = \"data:image/svg+xml;base64,PCEtLUNvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLi0tPgo8IS0tQ29weXJpZ2h0IChDKSAyMDE5IFR5cGVGb3ggYW5kIG90aGVycy4tLT4KPCEtLUxpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS4gU2VlIExpY2Vuc2UudHh0IGluIHRoZSBwcm9qZWN0IHJvb3QgZm9yIGxpY2Vuc2UgaW5mb3JtYXRpb24uLS0+CjxzdmcgZmlsbD0ibm9uZSIgaGVpZ2h0PSIxNiIgdmlld0JveD0iMCAwIDE2IDE2IiB3aWR0aD0iMTYiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggY2xpcC1ydWxlPSJldmVub2RkIiBkPSJtNiAxMmgtMWMtLjI3LS4wMi0uNDgtLjExLS42OS0uMzFzLS4zLS40Mi0uMzEtLjY5di02LjI4Yy41OS0uMzQgMS0uOTggMS0xLjcyIDAtMS4xMS0uODktMi0yLTJzLTIgLjg5LTIgMmMwIC43My40MSAxLjM4IDEgMS43MnY2LjI4Yy4wMy43OC4zNCAxLjQ3Ljk0IDIuMDZzMS4yOC45MSAyLjA2Ljk0YzAgMCAxLjAyIDAgMSAwdjJsMy0zLTMtM3ptLTMtMTAuMmMuNjYgMCAxLjIuNTUgMS4yIDEuMnMtLjU1IDEuMi0xLjIgMS4yLTEuMi0uNTUtMS4yLTEuMi41NS0xLjIgMS4yLTEuMnptMTEgOS40OGMwLTEuNzMgMC02LjI4IDAtNi4yOC0uMDMtLjc4LS4zNC0xLjQ3LS45NC0yLjA2cy0xLjI4LS45MS0yLjA2LS45NGgtMXYtMmwtMyAzIDMgM3YtMmgxYy4yNy4wMi40OC4xMS42OS4zMXMuMy40Mi4zMS42OXY2LjI4Yy0uNTkuMzQtMSAuOTgtMSAxLjcyIDAgMS4xMS44OSAyIDIgMnMyLS44OSAyLTJjMC0uNzMtLjQxLTEuMzgtMS0xLjcyem0tMSAyLjkyYy0uNjYgMC0xLjItLjU1LTEuMi0xLjJzLjU1LTEuMiAxLjItMS4yIDEuMi41NSAxLjIgMS4yLS41NSAxLjItMS4yIDEuMnoiIGZpbGw9IiNjNWM1YzUiIGZpbGwtcnVsZT0iZXZlbm9kZCIvPjwvc3ZnPgo=\"","module.exports = \"data:image/svg+xml;base64,PCEtLUNvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLi0tPgo8IS0tQ29weXJpZ2h0IChDKSAyMDE4IFR5cGVGb3ggYW5kIG90aGVycy4tLT4KPCEtLUxpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS4gU2VlIExpY2Vuc2UudHh0IGluIHRoZSBwcm9qZWN0IHJvb3QgZm9yIGxpY2Vuc2UgaW5mb3JtYXRpb24uLS0+CjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMTYiIGhlaWdodD0iMTYiPjxwb2x5Z29uIGZpbGw9IiM2NTY1NjUiIHBvaW50cz0iMTAsMiA3LjQxNCwyIDguNDE0LDMgOSwzIDksMy41ODYgOSw0IDksNC40MTQgOSw2IDEyLDYgMTIsMTMgNCwxMyA0LDggMyw4IDMsMTQgMTMsMTQgMTMsNSIvPjxwb2x5Z29uIGZpbGw9IiMwMDUzOUMiIHBvaW50cz0iNSwxIDMsMSA1LDMgMSwzIDEsNSA1LDUgMyw3IDUsNyA4LDQiLz48L3N2Zz4K\"","module.exports = \"data:image/svg+xml;base64,PCEtLUNvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLi0tPgo8IS0tQ29weXJpZ2h0IChDKSAyMDE4IFR5cGVGb3ggYW5kIG90aGVycy4tLT4KPCEtLUxpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS4gU2VlIExpY2Vuc2UudHh0IGluIHRoZSBwcm9qZWN0IHJvb3QgZm9yIGxpY2Vuc2UgaW5mb3JtYXRpb24uLS0+CjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMTYiIGhlaWdodD0iMTYiPjxwb2x5Z29uIGZpbGw9IiNDNUM1QzUiIHBvaW50cz0iMTAsMiA3LjQxNCwyIDguNDE0LDMgOSwzIDksMy41ODYgOSw0IDksNC40MTQgOSw2IDEyLDYgMTIsMTMgNCwxMyA0LDggMyw4IDMsMTQgMTMsMTQgMTMsNSIvPjxwb2x5Z29uIGZpbGw9IiM3NUJFRkYiIHBvaW50cz0iNSwxIDMsMSA1LDMgMSwzIDEsNSA1LDUgMyw3IDUsNyA4LDQiLz48L3N2Zz4K\"","module.exports = \"data:image/svg+xml;base64,PCEtLUNvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLi0tPgo8IS0tQ29weXJpZ2h0IChDKSAyMDE5IFR5cGVGb3ggYW5kIG90aGVycy4tLT4KPCEtLUxpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS4gU2VlIExpY2Vuc2UudHh0IGluIHRoZSBwcm9qZWN0IHJvb3QgZm9yIGxpY2Vuc2UgaW5mb3JtYXRpb24uLS0+CjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB2aWV3Qm94PSIwIDAgMTYgMTYiPjxkZWZzPjxzdHlsZT4uaWNvbi1jYW52YXMtdHJhbnNwYXJlbnQsLmljb24tdnMtb3V0e2ZpbGw6I2Y2ZjZmNjt9Lmljb24tY2FudmFzLXRyYW5zcGFyZW50e29wYWNpdHk6MDt9Lmljb24tdnMtYmd7ZmlsbDojNDI0MjQyO30uaWNvbi12cy1hY3Rpb24tYmx1ZXtmaWxsOiMwMDUzOWM7fTwvc3R5bGU+PC9kZWZzPjx0aXRsZT5QcmV2aWV3SW5SaWdodFBhbmVsXzE2eDwvdGl0bGU+PGcgaWQ9ImNhbnZhcyI+PHBhdGggY2xhc3M9Imljb24tY2FudmFzLXRyYW5zcGFyZW50IiBkPSJNMTYsMFYxNkgwVjBaIi8+PC9nPjxnIGlkPSJvdXRsaW5lIiBzdHlsZT0iZGlzcGxheTogbm9uZTsiPjxwYXRoIGNsYXNzPSJpY29uLXZzLW91dCIgZD0iTTE2LDFWMTVIMTAuMTIxbC0uNTYuNTYxYTEuNSwxLjUsMCwwLDEtMi4xMjIsMEExLjQ2OSwxLjQ2OSwwLDAsMSw3LjEsMTVIMFYxWiIgc3R5bGU9ImRpc3BsYXk6IG5vbmU7Ii8+PC9nPjxnIGlkPSJpY29uQmciPjxwYXRoIGNsYXNzPSJpY29uLXZzLWJnIiBkPSJNMSwyVjE0SDcuMWExLjQ2OSwxLjQ2OSwwLDAsMSwuMzQxLS41NjFMOSwxMS44OFY1aDVWNy4zNTFhMy41MTUsMy41MTUsMCwwLDEsMSwuNzA3VjJaTTcsMTNIMlY1SDdaIi8+PC9nPjxnIGlkPSJjb2xvckFjdGlvbiI+PHBhdGggY2xhc3M9Imljb24tdnMtYWN0aW9uLWJsdWUiIGQ9Ik0xMi41LDhhMi41LDIuNSwwLDAsMC0yLjA4NCwzLjg3N2wtMi4yNywyLjI2OWEuNS41LDAsMCwwLC43MDguNzA4bDIuMjY5LTIuMjdBMi41LDIuNSwwLDEsMCwxMi41LDhabTAsNEExLjUsMS41LDAsMSwxLDE0LDEwLjUsMS41LDEuNSwwLDAsMSwxMi41LDEyWiIvPjwvZz48L3N2Zz4=\"","module.exports = \"data:image/svg+xml;base64,PCEtLUNvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLi0tPgo8IS0tQ29weXJpZ2h0IChDKSAyMDE5IFR5cGVGb3ggYW5kIG90aGVycy4tLT4KPCEtLUxpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS4gU2VlIExpY2Vuc2UudHh0IGluIHRoZSBwcm9qZWN0IHJvb3QgZm9yIGxpY2Vuc2UgaW5mb3JtYXRpb24uLS0+CjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB2aWV3Qm94PSIwIDAgMTYgMTYiPjxkZWZzPjxzdHlsZT4uaWNvbi1jYW52YXMtdHJhbnNwYXJlbnQsLmljb24tdnMtb3V0e2ZpbGw6IzI1MjUyNjt9Lmljb24tY2FudmFzLXRyYW5zcGFyZW50e29wYWNpdHk6MDt9Lmljb24tdnMtYmd7ZmlsbDojYzVjNWM1O30uaWNvbi12cy1hY3Rpb24tYmx1ZXtmaWxsOiM3NWJlZmY7fTwvc3R5bGU+PC9kZWZzPjx0aXRsZT5QcmV2aWV3SW5SaWdodFBhbmVsXzE2eDwvdGl0bGU+PGcgaWQ9ImNhbnZhcyI+PHBhdGggY2xhc3M9Imljb24tY2FudmFzLXRyYW5zcGFyZW50IiBkPSJNMTYsMFYxNkgwVjBaIi8+PC9nPjxnIGlkPSJvdXRsaW5lIiBzdHlsZT0iZGlzcGxheTogbm9uZTsiPjxwYXRoIGNsYXNzPSJpY29uLXZzLW91dCIgZD0iTTE2LDFWMTVIMTAuMTIxbC0uNTYuNTYxYTEuNSwxLjUsMCwwLDEtMi4xMjIsMEExLjQ2OSwxLjQ2OSwwLDAsMSw3LjEsMTVIMFYxWiIgc3R5bGU9ImRpc3BsYXk6IG5vbmU7Ii8+PC9nPjxnIGlkPSJpY29uQmciPjxwYXRoIGNsYXNzPSJpY29uLXZzLWJnIiBkPSJNMSwyVjE0SDcuMWExLjQ2OSwxLjQ2OSwwLDAsMSwuMzQxLS41NjFMOSwxMS44OFY1aDVWNy4zNTFhMy41MTUsMy41MTUsMCwwLDEsMSwuNzA3VjJaTTcsMTNIMlY1SDdaIi8+PC9nPjxnIGlkPSJjb2xvckFjdGlvbiI+PHBhdGggY2xhc3M9Imljb24tdnMtYWN0aW9uLWJsdWUiIGQ9Ik0xMi41LDhhMi41LDIuNSwwLDAsMC0yLjA4NCwzLjg3N2wtMi4yNywyLjI2OWEuNS41LDAsMCwwLC43MDguNzA4bDIuMjY5LTIuMjdBMi41LDIuNSwwLDEsMCwxMi41LDhabTAsNEExLjUsMS41LDAsMSwxLDE0LDEwLjUsMS41LDEuNSwwLDAsMSwxMi41LDEyWiIvPjwvZz48L3N2Zz4=\"","module.exports = \"data:image/svg+xml;base64,PCEtLUNvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLi0tPgo8IS0tQ29weXJpZ2h0IChDKSAyMDE4IFR5cGVGb3ggYW5kIG90aGVycy4tLT4KPCEtLUxpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS4gU2VlIExpY2Vuc2UudHh0IGluIHRoZSBwcm9qZWN0IHJvb3QgZm9yIGxpY2Vuc2UgaW5mb3JtYXRpb24uLS0+CjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMTYiIGhlaWdodD0iMTYiPgogICAgPHBvbHlnb24gZmlsbD0iIzJkMmQzMCIgcG9pbnRzPSIxMy42NCw3LjM5NiAxMi4xNjksMi44OTggMTAuNzA2LDMuNzYxIDExLjA4NywyIDYuNTU3LDIgNi45MzYsMy43NjIgNS40NzMsMi44OTggNCw3LjM5NiA1LjY4Miw3LjU1NCA0LjUxMyw4LjU2MSA1LjAxMyw5IDIsOSAyLDE0IDcsMTQgNywxMC43NDcgNy45NzgsMTEuNjA2IDguODIsOS43MjUgOS42NjEsMTEuNjAyIDEzLjE0NCw4LjU2MiAxMS45NjgsNy41NTQiLz4KICAgIDxnIGZpbGw9IiNDNUM1QzUiPgogICAgICAgIDxwYXRoIGQ9Ik0xMi4zMDEgNi41MThsLTIuNzcyLjI2MiAyLjA4NiAxLjc4OC0xLjU5NCAxLjM5Mi0xLjIwMS0yLjY4Mi0xLjIwMSAyLjY4Mi0xLjU4My0xLjM5MiAyLjA3NS0xLjc4OC0yLjc3MS0uMjYyLjY5Ni0yLjEyNiAyLjM1OCAxLjM5Mi0uNTk5LTIuNzg0aDIuMDUzbC0uNjAyIDIuNzgzIDIuMzU5LTEuMzkyLjY5NiAyLjEyN3oiLz4KICAgICAgICA8cmVjdCB3aWR0aD0iMyIgaGVpZ2h0PSIzIiB4PSIzIiB5PSIxMCIvPgogICAgPC9nPgo8L3N2Zz4K\"","module.exports = \"data:image/svg+xml;base64,PCEtLUNvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLi0tPgo8IS0tQ29weXJpZ2h0IChDKSAyMDE4IFR5cGVGb3ggYW5kIG90aGVycy4tLT4KPCEtLUxpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS4gU2VlIExpY2Vuc2UudHh0IGluIHRoZSBwcm9qZWN0IHJvb3QgZm9yIGxpY2Vuc2UgaW5mb3JtYXRpb24uLS0+CjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMTYiIGhlaWdodD0iMTYiPgogICAgPHBvbHlnb24gZmlsbD0iI0Y2RjZGNiIgcG9pbnRzPSIxMy42NCw3LjM5NiAxMi4xNjksMi44OTggMTAuNzA2LDMuNzYxIDExLjA4NywyIDYuNTU3LDIgNi45MzYsMy43NjIgNS40NzMsMi44OTggNCw3LjM5NiA1LjY4Miw3LjU1NCA0LjUxMyw4LjU2MSA1LjAxMyw5IDIsOSAyLDE0IDcsMTQgNywxMC43NDcgNy45NzgsMTEuNjA2IDguODIsOS43MjUgOS42NjEsMTEuNjAyIDEzLjE0NCw4LjU2MiAxMS45NjgsNy41NTQiLz4KICAgIDxnIGZpbGw9IiM0MjQyNDIiPgogICAgICAgIDxwYXRoIGQ9Ik0xMi4zMDEgNi41MThsLTIuNzcyLjI2MiAyLjA4NiAxLjc4OC0xLjU5NCAxLjM5Mi0xLjIwMS0yLjY4Mi0xLjIwMSAyLjY4Mi0xLjU4My0xLjM5MiAyLjA3NS0xLjc4OC0yLjc3MS0uMjYyLjY5Ni0yLjEyNiAyLjM1OCAxLjM5Mi0uNTk5LTIuNzg0aDIuMDUzbC0uNjAyIDIuNzgzIDIuMzU5LTEuMzkyLjY5NiAyLjEyN3oiLz4KICAgICAgICA8cmVjdCB3aWR0aD0iMyIgaGVpZ2h0PSIzIiB4PSIzIiB5PSIxMCIvPgogICAgPC9nPgo8L3N2Zz4K\"","module.exports = \"data:image/svg+xml;base64,PCEtLUNvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLi0tPgo8IS0tQ29weXJpZ2h0IChDKSAyMDE4IFR5cGVGb3ggYW5kIG90aGVycy4tLT4KPCEtLUxpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS4gU2VlIExpY2Vuc2UudHh0IGluIHRoZSBwcm9qZWN0IHJvb3QgZm9yIGxpY2Vuc2UgaW5mb3JtYXRpb24uLS0+CjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB2aWV3Qm94PSIwIDAgMTYgMTYiPjxkZWZzPjxzdHlsZT4uaWNvbi1jYW52YXMtdHJhbnNwYXJlbnQsLmljb24tdnMtb3V0e2ZpbGw6IzI1MjUyNjt9Lmljb24tY2FudmFzLXRyYW5zcGFyZW50e29wYWNpdHk6MDt9Lmljb24tdnMtYmd7ZmlsbDojYzVjNWM1O308L3N0eWxlPjwvZGVmcz48dGl0bGU+cmVtb3ZlLWFsbDwvdGl0bGU+PGcgaWQ9ImNhbnZhcyI+PHBhdGggY2xhc3M9Imljb24tY2FudmFzLXRyYW5zcGFyZW50IiBkPSJNMTYsMFYxNkgwVjBaIi8+PC9nPjxnIGlkPSJvdXRsaW5lIiBzdHlsZT0iZGlzcGxheTogbm9uZTsiPjxwYXRoIGNsYXNzPSJpY29uLXZzLW91dCIgZD0iTTE2LDFWMTJIMTR2MkgxMnYySDBWNUgyVjNINFYxWiIvPjwvZz48ZyBpZD0iaWNvbkJnIj48cGF0aCBjbGFzcz0iaWNvbi12cy1iZyIgZD0iTTE1LDJ2OUgxNFYzSDVWMlpNMyw1aDl2OGgxVjRIM1pNMSw2SDExdjlIMVptNC4xMTYsNC41TDMuMDU4LDEyLjU1OGwuODg0Ljg4NEw2LDExLjM4NGwyLjA1OCwyLjA1OC44ODQtLjg4NEw2Ljg4NCwxMC41LDguOTQyLDguNDQybC0uODg0LS44ODRMNiw5LjYxNiwzLjk0Miw3LjU1OGwtLjg4NC44ODRaIi8+PC9nPjwvc3ZnPgo=\"","module.exports = \"data:image/svg+xml;base64,PCEtLUNvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLi0tPgo8IS0tQ29weXJpZ2h0IChDKSAyMDE4IFR5cGVGb3ggYW5kIG90aGVycy4tLT4KPCEtLUxpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS4gU2VlIExpY2Vuc2UudHh0IGluIHRoZSBwcm9qZWN0IHJvb3QgZm9yIGxpY2Vuc2UgaW5mb3JtYXRpb24uLS0+CjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB2aWV3Qm94PSIwIDAgMTYgMTYiPjxkZWZzPjxzdHlsZT4uaWNvbi1jYW52YXMtdHJhbnNwYXJlbnQsLmljb24tdnMtb3V0e2ZpbGw6I2Y2ZjZmNjt9Lmljb24tY2FudmFzLXRyYW5zcGFyZW50e29wYWNpdHk6MDt9Lmljb24tdnMtYmd7ZmlsbDojNDI0MjQyO30uaWNvbi12cy1mZ3tmaWxsOiNmMGVmZjE7fTwvc3R5bGU+PC9kZWZzPjx0aXRsZT5yZW1vdmUtYWxsXzE2eDwvdGl0bGU+PGcgaWQ9ImNhbnZhcyI+PHBhdGggY2xhc3M9Imljb24tY2FudmFzLXRyYW5zcGFyZW50IiBkPSJNMTYsMFYxNkgwVjBaIi8+PC9nPjxnIGlkPSJvdXRsaW5lIj48cGF0aCBjbGFzcz0iaWNvbi12cy1vdXQiIGQ9Ik0xNiwxVjEySDE0djJIMTJ2MkgwVjVIMlYzSDRWMVoiLz48L2c+PGcgaWQ9Imljb25CZyI+PHBhdGggY2xhc3M9Imljb24tdnMtYmciIGQ9Ik0zLDRIMTN2OUgxMlY1SDNaTTEsMTVIMTFWNkgxWk01LDJWM2g5djhoMVYyWiIvPjwvZz48ZyBpZD0iaWNvbkZnIj48cGF0aCBjbGFzcz0iaWNvbi12cy1mZyIgZD0iTTYuNzUsMTAuNzUsOSwxM0g3LjVMNiwxMS41LDQuNSwxM0gzbDIuMjUtMi4yNUwzLDguNUg0LjVMNiwxMCw3LjUsOC41SDlaIi8+PC9nPjwvc3ZnPgo=\"","module.exports = \"data:image/svg+xml;base64,PCEtLUNvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLi0tPgo8IS0tQ29weXJpZ2h0IChDKSAyMDE4IFR5cGVGb3ggYW5kIG90aGVycy4tLT4KPCEtLUxpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS4gU2VlIExpY2Vuc2UudHh0IGluIHRoZSBwcm9qZWN0IHJvb3QgZm9yIGxpY2Vuc2UgaW5mb3JtYXRpb24uLS0+CjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgd2lkdGg9IjE2cHgiIGhlaWdodD0iMTZweCIgeD0iMHB4IiB5PSIwcHgiIGVuYWJsZS1iYWNrZ3JvdW5kPSJuZXcgMCAwIDE2IDE2IiB2ZXJzaW9uPSIxLjEiIHZpZXdCb3g9IjAgMCAxNiAxNiIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+CiAgICA8ZyBpZD0iaWNvbl94NUZfYmciPgogICAgICAgIDxwYXRoIGZpbGw9IiNDNUM1QzUiIGQ9Ik0xMSwxNVY5SDF2NkgxMXogTTIsMTR2LTJoMXYtMUgydi0xaDN2NEgyeiBNMTAsMTFIOHYyaDJ2MUg3di00aDNWMTF6IE0zLDEzdi0xaDF2MUgzeiBNMTMsN3Y2aC0xVjhINVY3CgkJSDEzeiBNMTMsMlYxaC0xdjVoM1YySDEzeiBNMTQsNWgtMVYzaDFWNXogTTExLDJ2NEg4VjRoMXYxaDFWNEg5VjNIOFYySDExeiIvPgogICAgPC9nPgogICAgPGcgaWQ9ImNvbG9yX3g1Rl9hY3Rpb24iPgogICAgICAgIDxwYXRoIGZpbGw9IiM3NUJFRkYiIGQ9Ik0xLjk3OSwzLjVMMiw2TDEsNXYxLjVMMi41LDhMNCw2LjVWNUwzLDZMMi45NzksMy41YzAtMC4yNzUsMC4yMjUtMC41LDAuNS0wLjVIN1YySDMuNDc5CgkJQzIuNjUxLDIsMS45NzksMi42NzMsMS45NzksMy41eiIvPgogICAgPC9nPgo8L3N2Zz4K\"","module.exports = \"data:image/svg+xml;base64,PCEtLUNvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLi0tPgo8IS0tQ29weXJpZ2h0IChDKSAyMDE4IFR5cGVGb3ggYW5kIG90aGVycy4tLT4KPCEtLUxpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS4gU2VlIExpY2Vuc2UudHh0IGluIHRoZSBwcm9qZWN0IHJvb3QgZm9yIGxpY2Vuc2UgaW5mb3JtYXRpb24uLS0+CjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgd2lkdGg9IjE2cHgiIGhlaWdodD0iMTZweCIgeD0iMHB4IiB5PSIwcHgiIGVuYWJsZS1iYWNrZ3JvdW5kPSJuZXcgMCAwIDE2IDE2IiB2ZXJzaW9uPSIxLjEiIHZpZXdCb3g9IjAgMCAxNiAxNiIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+CiAgICA8ZyBpZD0iaWNvbl94NUZfYmciPgogICAgICAgIDxwYXRoIGZpbGw9IiM0MjQyNDIiIGQ9Ik0xMSwxNVY5SDF2NkgxMXogTTIsMTR2LTJoMXYtMUgydi0xaDN2NEgyeiBNMTAsMTFIOHYyaDJ2MUg3di00aDNWMTF6IE0zLDEzdi0xaDF2MUgzeiBNMTMsN3Y2aC0xVjhINVY3CgkJSDEzeiBNMTMsMlYxaC0xdjVoM1YySDEzeiBNMTQsNWgtMVYzaDFWNXogTTExLDJ2NEg4VjRoMXYxaDFWNEg5VjNIOFYySDExeiIvPgogICAgPC9nPgogICAgPGcgaWQ9ImNvbG9yX3g1Rl9hY3Rpb24iPgogICAgICAgIDxwYXRoIGZpbGw9IiMwMDUzOUMiIGQ9Ik0xLjk3OSwzLjVMMiw2TDEsNXYxLjVMMi41LDhMNCw2LjVWNUwzLDZMMi45NzksMy41YzAtMC4yNzUsMC4yMjUtMC41LDAuNS0wLjVIN1YySDMuNDc5CgkJQzIuNjUxLDIsMS45NzksMi42NzMsMS45NzksMy41eiIvPgogICAgPC9nPgo8L3N2Zz4K\"","module.exports = \"data:image/svg+xml;base64,PCEtLUNvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLi0tPgo8IS0tQ29weXJpZ2h0IChDKSAyMDE4IFR5cGVGb3ggYW5kIG90aGVycy4tLT4KPCEtLUxpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS4gU2VlIExpY2Vuc2UudHh0IGluIHRoZSBwcm9qZWN0IHJvb3QgZm9yIGxpY2Vuc2UgaW5mb3JtYXRpb24uLS0+CjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgd2lkdGg9IjE2cHgiIGhlaWdodD0iMTZweCIgeD0iMHB4IiB5PSIwcHgiIGVuYWJsZS1iYWNrZ3JvdW5kPSJuZXcgMCAwIDE2IDE2IiB2ZXJzaW9uPSIxLjEiIHZpZXdCb3g9IjAgMCAxNiAxNiIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+CiAgICA8ZyBpZD0iaWNvbl94NUZfYmciPgogICAgICAgIDxnPgogICAgICAgICAgICA8cGF0aCBmaWxsPSIjQzVDNUM1IiBkPSJNMTEsM1YxaC0xdjV2MWgxaDJoMVY0VjNIMTF6IE0xMyw2aC0yVjRoMlY2eiIvPgogICAgICAgICAgICA8cGF0aCBmaWxsPSIjQzVDNUM1IiBkPSJNMiwxNWg3VjlIMlYxNXogTTQsMTBoM3YxSDV2MmgydjFINFYxMHoiLz4KICAgICAgICA8L2c+CiAgICA8L2c+CiAgICA8ZyBpZD0iY29sb3JfeDVGX2ltcG9ydGFuY2UiPgogICAgICAgIDxwYXRoIGZpbGw9IiM3NUJFRkYiIGQ9Ik0zLjk3OSwzLjVMNCw2TDMsNXYxLjVMNC41LDhMNiw2LjVWNUw1LDZMNC45NzksMy41YzAtMC4yNzUsMC4yMjUtMC41LDAuNS0wLjVIOVYySDUuNDc5CgkJQzQuNjUxLDIsMy45NzksMi42NzMsMy45NzksMy41eiIvPgogICAgPC9nPgo8L3N2Zz4K\"","module.exports = \"data:image/svg+xml;base64,PCEtLUNvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLi0tPgo8IS0tQ29weXJpZ2h0IChDKSAyMDE4IFR5cGVGb3ggYW5kIG90aGVycy4tLT4KPCEtLUxpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS4gU2VlIExpY2Vuc2UudHh0IGluIHRoZSBwcm9qZWN0IHJvb3QgZm9yIGxpY2Vuc2UgaW5mb3JtYXRpb24uLS0+CjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgd2lkdGg9IjE2cHgiIGhlaWdodD0iMTZweCIgeD0iMHB4IiB5PSIwcHgiIGVuYWJsZS1iYWNrZ3JvdW5kPSJuZXcgMCAwIDE2IDE2IiB2ZXJzaW9uPSIxLjEiIHZpZXdCb3g9IjAgMCAxNiAxNiIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+CiAgICA8ZyBpZD0iaWNvbl94NUZfYmciPgogICAgICAgIDxnPgogICAgICAgICAgICA8cGF0aCBmaWxsPSIjNDI0MjQyIiBkPSJNMTEsM1YxaC0xdjV2MWgxaDJoMVY0VjNIMTF6IE0xMyw2aC0yVjRoMlY2eiIvPgogICAgICAgICAgICA8cGF0aCBmaWxsPSIjNDI0MjQyIiBkPSJNMiwxNWg3VjlIMlYxNXogTTQsMTBoM3YxSDV2MmgydjFINFYxMHoiLz4KICAgICAgICA8L2c+CiAgICA8L2c+CiAgICA8ZyBpZD0iY29sb3JfeDVGX2ltcG9ydGFuY2UiPgogICAgICAgIDxwYXRoIGZpbGw9IiMwMDUzOUMiIGQ9Ik0zLjk3OSwzLjVMNCw2TDMsNXYxLjVMNC41LDhMNiw2LjVWNUw1LDZMNC45NzksMy41YzAtMC4yNzUsMC4yMjUtMC41LDAuNS0wLjVIOVYySDUuNDc5CgkJQzQuNjUxLDIsMy45NzksMi42NzMsMy45NzksMy41eiIvPgogICAgPC9nPgo8L3N2Zz4K\"","module.exports = __webpack_public_path__ + \"e817279537a0417d042f62fbb1b99eea.gif\";","module.exports = \"data:image/svg+xml;base64,PCEtLUNvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLi0tPgo8IS0tQ29weXJpZ2h0IChDKSAyMDE4IFR5cGVGb3ggYW5kIG90aGVycy4tLT4KPCEtLUxpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS4gU2VlIExpY2Vuc2UudHh0IGluIHRoZSBwcm9qZWN0IHJvb3QgZm9yIGxpY2Vuc2UgaW5mb3JtYXRpb24uLS0+CjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMTYiIGhlaWdodD0iMTYiPgogICAgPHN0eWxlIHR5cGU9InRleHQvY3NzIj4KICAgICAgICAuc3Qwe29wYWNpdHk6MDtmaWxsOiMyNjI2MjY7fSAuc3Qxe2ZpbGw6IzI2MjYyNjt9IC5zdDJ7ZmlsbDojQzVDNUM1O30KICAgIDwvc3R5bGU+CiAgICA8ZyBpZD0ib3V0bGluZSI+CiAgICAgICAgPHJlY3Qgd2lkdGg9IjE2IiBoZWlnaHQ9IjE2IiBjbGFzcz0ic3QwIi8+CiAgICAgICAgPHBhdGggZD0iTTE2IDQuMDIydi0zLjAyMmgtMTYuMDE0djMuMDIyaDMuMDQ2bC0zLjA0MyA3Ljk0NWgtLjAwNHYuMDFsLjAxNSAxLjAyM2gtLjAxNHYxLjk5MWgxNi4wMTR2LTMuMDIzaC0xdi03Ljk0Nmgxem0tNS45MTQgNS4zMDFjMCAuMjMzLS4wMjMuNDQxLS4wNjYuNTk1LS4wNDcuMTY0LS4wOTkuMjQ3LS4xMjcuMjg0bC0uMDc4LjA2OS0uMTUxLjAyNi0uMTE1LS4wMTctLjEzOS0uMTM3Yy0uMDMxLS4wNzgtLjExMi0uMzMyLS4xMTItLjU2NiAwLS4yNTQuMDkxLS41NjEuMTI2LS42NTZsLjA2OS0uMTQxLjEwOS0uMDgyLjE3OC0uMDI3Yy4wNzcgMCAuMTE3LjAxNC4xNzcuMDU2bC4wODcuMTc5LjA1MS4yMzctLjAwOS4xOHptLTMuNjk1LTUuMzAxdjIuODkzbC0xLjExNi0yLjg5M2gxLjExNnptLTMuMDI2IDcuMDJoMS41NzNsLjM1MS45MjZoLTIuMjU0bC4zMy0uOTI2em04LjYzNS00LjM1NGMtLjIwNi0uMi0uNDMxLS4zOC0uNjk1LS41MTItLjM5Ni0uMTk4LS44NTMtLjI5OC0xLjM1NS0uMjk4LS4yMTUgMC0uNDIzLjAyLS42MjEuMDU4di0xLjkxNGgyLjY3MXYyLjY2NnoiIGNsYXNzPSJzdDEiLz4KICAgIDwvZz4KICAgIDxnIGlkPSJpY29uX3g1Rl9iZyI+CiAgICAgICAgPHJlY3Qgd2lkdGg9IjEiIGhlaWdodD0iOCIgeD0iMTMiIHk9IjQiIGNsYXNzPSJzdDIiLz4KICAgICAgICA8cGF0aCBkPSJNMTEuMjI1IDguMzg3Yy0uMDc4LS4yOTktLjE5OS0uNTYyLS4zNi0uNzg2cy0uMzY1LS40MDEtLjYwOS0uNTMtLjUzNC0uMTkzLS44NjYtLjE5M2MtLjE5OCAwLS4zOC4wMjQtLjU0Ny4wNzMtLjE2NS4wNDktLjMxNi4xMTctLjQ1My4yMDUtLjEzNi4wODgtLjI1Ny4xOTQtLjM2NS4zMThsLS4xNzkuMjU4di0zLjE1NGgtLjg5M3Y3LjQyMmguODkzdi0uNTc1bC4xMjYuMTc1Yy4wODcuMTAyLjE4OS4xOS4zMDQuMjY5LjExNy4wNzguMjQ5LjE0LjM5OC4xODYuMTQ5LjA0Ni4zMTQuMDY4LjQ5OC4wNjguMzUzIDAgLjY2Ni0uMDcxLjkzNy0uMjEyLjI3Mi0uMTQzLjQ5OS0uMzM4LjY4Mi0uNTg2LjE4My0uMjUuMzIxLS41NDMuNDE0LS44NzkuMDkzLS4zMzguMTQtLjcwMy4xNC0xLjA5Ny0uMDAxLS4zNDItLjA0LS42NjMtLjEyLS45NjJ6bS0xLjQ3OS0uNjA3Yy4xNTEuMDcxLjI4Mi4xNzYuMzkuMzE0LjEwOS4xNC4xOTQuMzEzLjI1NS41MTcuMDUxLjE3NC4wODIuMzcxLjA4OS41ODdsLS4wMDcuMTI1YzAgLjMyNy0uMDMzLjYyLS4xLjg2OS0uMDY3LjI0Ni0uMTYxLjQ1My0uMjc4LjYxNC0uMTE3LjE2Mi0uMjYuMjg1LS40MjEuMzY2LS4zMjIuMTYyLS43Ni4xNjYtMS4wNjkuMDE1LS4xNTMtLjA3NS0uMjg2LS4xNzUtLjM5My0uMjk2LS4wODUtLjA5Ni0uMTU2LS4yMTYtLjIxOC0uMzY3IDAgMC0uMTc5LS40NDctLjE3OS0uOTQ3IDAtLjUuMTc5LTEuMDAyLjE3OS0xLjAwMi4wNjItLjE3Ny4xMzYtLjMxOC4yMjQtLjQzLjExNC0uMTQzLjI1Ni0uMjU5LjQyNC0uMzQ1LjE2OC0uMDg2LjM2NS0uMTI5LjU4Ny0uMTI5LjE5IDAgLjM2NC4wMzcuNTE3LjEwOXoiIGNsYXNzPSJzdDIiLz4KICAgICAgICA8cmVjdCB3aWR0aD0iMTQuMDEzIiBoZWlnaHQ9IjEuMDIzIiB4PSIuOTg3IiB5PSIyIiBjbGFzcz0ic3QyIi8+CiAgICAgICAgPHJlY3Qgd2lkdGg9IjE0LjAxMyIgaGVpZ2h0PSIxLjAyMyIgeD0iLjk4NyIgeT0iMTIuOTY4IiBjbGFzcz0ic3QyIi8+CiAgICAgICAgPHBhdGggZD0iTTEuOTkxIDEyLjAzMWwuNzI4LTIuMDMxaDIuMjE5bC43NzggMi4wMzFoMS4wODJsLTIuNDg1LTcuMTU4aC0uOTQxbC0yLjQ0MSA3LjA4Ni0uMDI1LjA3MmgxLjA4NXptMS44MjctNS42MDloLjAyMmwuOTE0IDIuNzUzaC0xLjg0MWwuOTA1LTIuNzUzeiIgY2xhc3M9InN0MiIvPgogICAgPC9nPgo8L3N2Zz4K\"","module.exports = \"data:image/svg+xml;base64,PCEtLUNvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLi0tPgo8IS0tQ29weXJpZ2h0IChDKSAyMDE4IFR5cGVGb3ggYW5kIG90aGVycy4tLT4KPCEtLUxpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS4gU2VlIExpY2Vuc2UudHh0IGluIHRoZSBwcm9qZWN0IHJvb3QgZm9yIGxpY2Vuc2UgaW5mb3JtYXRpb24uLS0+CjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMTYiIGhlaWdodD0iMTYiPgogICAgPHN0eWxlIHR5cGU9InRleHQvY3NzIj4KICAgICAgICAuc3Qwe29wYWNpdHk6MDtmaWxsOiNGNkY2RjY7fSAuc3Qxe2ZpbGw6I0Y2RjZGNjt9IC5zdDJ7ZmlsbDojNDI0MjQyO30KICAgIDwvc3R5bGU+CiAgICA8ZyBpZD0ib3V0bGluZSI+CiAgICAgICAgPHJlY3Qgd2lkdGg9IjE2IiBoZWlnaHQ9IjE2IiBjbGFzcz0ic3QwIi8+CiAgICAgICAgPHBhdGggZD0iTTE2IDQuMDIydi0zLjAyMmgtMTYuMDE0djMuMDIyaDMuMDQ2bC0zLjA0MyA3Ljk0NWgtLjAwNHYuMDFsLjAxNSAxLjAyM2gtLjAxNHYxLjk5MWgxNi4wMTR2LTMuMDIzaC0xdi03Ljk0Nmgxem0tNS45MTQgNS4zMDFjMCAuMjMzLS4wMjMuNDQxLS4wNjYuNTk1LS4wNDcuMTY0LS4wOTkuMjQ3LS4xMjcuMjg0bC0uMDc4LjA2OS0uMTUxLjAyNi0uMTE1LS4wMTctLjEzOS0uMTM3Yy0uMDMxLS4wNzgtLjExMi0uMzMyLS4xMTItLjU2NiAwLS4yNTQuMDkxLS41NjEuMTI2LS42NTZsLjA2OS0uMTQxLjEwOS0uMDgyLjE3OC0uMDI3Yy4wNzcgMCAuMTE3LjAxNC4xNzcuMDU2bC4wODcuMTc5LjA1MS4yMzctLjAwOS4xOHptLTMuNjk1LTUuMzAxdjIuODkzbC0xLjExNi0yLjg5M2gxLjExNnptLTMuMDI2IDcuMDJoMS41NzNsLjM1MS45MjZoLTIuMjU0bC4zMy0uOTI2em04LjYzNS00LjM1NGMtLjIwNi0uMi0uNDMxLS4zOC0uNjk1LS41MTItLjM5Ni0uMTk4LS44NTMtLjI5OC0xLjM1NS0uMjk4LS4yMTUgMC0uNDIzLjAyLS42MjEuMDU4di0xLjkxNGgyLjY3MXYyLjY2NnoiIGNsYXNzPSJzdDEiLz4KICAgIDwvZz4KICAgIDxnIGlkPSJpY29uX3g1Rl9iZyI+CiAgICAgICAgPHJlY3Qgd2lkdGg9IjEiIGhlaWdodD0iOCIgeD0iMTMiIHk9IjQiIGNsYXNzPSJzdDIiLz4KICAgICAgICA8cGF0aCBkPSJNMTEuMjI1IDguMzg3Yy0uMDc4LS4yOTktLjE5OS0uNTYyLS4zNi0uNzg2cy0uMzY1LS40MDEtLjYwOS0uNTMtLjUzNC0uMTkzLS44NjYtLjE5M2MtLjE5OCAwLS4zOC4wMjQtLjU0Ny4wNzMtLjE2NS4wNDktLjMxNi4xMTctLjQ1My4yMDUtLjEzNi4wODgtLjI1Ny4xOTQtLjM2NS4zMThsLS4xNzkuMjU4di0zLjE1NGgtLjg5M3Y3LjQyMmguODkzdi0uNTc1bC4xMjYuMTc1Yy4wODcuMTAyLjE4OS4xOS4zMDQuMjY5LjExNy4wNzguMjQ5LjE0LjM5OC4xODYuMTQ5LjA0Ni4zMTQuMDY4LjQ5OC4wNjguMzUzIDAgLjY2Ni0uMDcxLjkzNy0uMjEyLjI3Mi0uMTQzLjQ5OS0uMzM4LjY4Mi0uNTg2LjE4My0uMjUuMzIxLS41NDMuNDE0LS44NzkuMDkzLS4zMzguMTQtLjcwMy4xNC0xLjA5Ny0uMDAxLS4zNDItLjA0LS42NjMtLjEyLS45NjJ6bS0xLjQ3OS0uNjA3Yy4xNTEuMDcxLjI4Mi4xNzYuMzkuMzE0LjEwOS4xNC4xOTQuMzEzLjI1NS41MTcuMDUxLjE3NC4wODIuMzcxLjA4OS41ODdsLS4wMDcuMTI1YzAgLjMyNy0uMDMzLjYyLS4xLjg2OS0uMDY3LjI0Ni0uMTYxLjQ1My0uMjc4LjYxNC0uMTE3LjE2Mi0uMjYuMjg1LS40MjEuMzY2LS4zMjIuMTYyLS43Ni4xNjYtMS4wNjkuMDE1LS4xNTMtLjA3NS0uMjg2LS4xNzUtLjM5My0uMjk2LS4wODUtLjA5Ni0uMTU2LS4yMTYtLjIxOC0uMzY3IDAgMC0uMTc5LS40NDctLjE3OS0uOTQ3IDAtLjUuMTc5LTEuMDAyLjE3OS0xLjAwMi4wNjItLjE3Ny4xMzYtLjMxOC4yMjQtLjQzLjExNC0uMTQzLjI1Ni0uMjU5LjQyNC0uMzQ1LjE2OC0uMDg2LjM2NS0uMTI5LjU4Ny0uMTI5LjE5IDAgLjM2NC4wMzcuNTE3LjEwOXoiIGNsYXNzPSJzdDIiLz4KICAgICAgICA8cmVjdCB3aWR0aD0iMTQuMDEzIiBoZWlnaHQ9IjEuMDIzIiB4PSIuOTg3IiB5PSIyIiBjbGFzcz0ic3QyIi8+CiAgICAgICAgPHJlY3Qgd2lkdGg9IjE0LjAxMyIgaGVpZ2h0PSIxLjAyMyIgeD0iLjk4NyIgeT0iMTIuOTY4IiBjbGFzcz0ic3QyIi8+CiAgICAgICAgPHBhdGggZD0iTTEuOTkxIDEyLjAzMWwuNzI4LTIuMDMxaDIuMjE5bC43NzggMi4wMzFoMS4wODJsLTIuNDg1LTcuMTU4aC0uOTQxbC0yLjQ0MSA3LjA4Ni0uMDI1LjA3MmgxLjA4NXptMS44MjctNS42MDloLjAyMmwuOTE0IDIuNzUzaC0xLjg0MWwuOTA1LTIuNzUzeiIgY2xhc3M9InN0MiIvPgogICAgPC9nPgo8L3N2Zz4K\"","var refs = 0;\nvar dispose;\nvar content = require(\"!!../../../../../../../../css-loader/index.js!./variables-bright.useable.css\");\nvar options = {\"singleton\":true,\"attrs\":{\"id\":\"theia-theme\"},\"hmr\":true};\noptions.insertInto = undefined;\n\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) exports.locals = content.locals;\n\nexports.use = exports.ref = function() {\n\tif(!(refs++)) {\n\t\tdispose = require(\"!../../../../../../../../style-loader/lib/addStyles.js\")(content, options);\n\t}\n\n\treturn exports;\n};\n\nexports.unuse = exports.unref = function() {\n  if(refs > 0 && !(--refs)) {\n\t   dispose();\n\t\t dispose = null;\n  }\n};\nif(module.hot) {\n\tvar lastRefs = module.hot.data && module.hot.data.refs || 0;\n\n\tif(lastRefs) {\n\t\texports.ref();\n\t\tif(!content.locals) {\n\t\t\trefs = lastRefs;\n\t\t}\n\t}\n\n\tif(!content.locals) {\n\t\tmodule.hot.accept();\n\t}\n\n\tmodule.hot.dispose(function(data) {\n\t\tdata.refs = content.locals ? 0 : refs;\n\n\t\tif(dispose) {\n\t\t\tdispose();\n\t\t}\n\t});\n}","var refs = 0;\nvar dispose;\nvar content = require(\"!!../../../../../../../../css-loader/index.js!./variables-dark.useable.css\");\nvar options = {\"singleton\":true,\"attrs\":{\"id\":\"theia-theme\"},\"hmr\":true};\noptions.insertInto = undefined;\n\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) exports.locals = content.locals;\n\nexports.use = exports.ref = function() {\n\tif(!(refs++)) {\n\t\tdispose = require(\"!../../../../../../../../style-loader/lib/addStyles.js\")(content, options);\n\t}\n\n\treturn exports;\n};\n\nexports.unuse = exports.unref = function() {\n  if(refs > 0 && !(--refs)) {\n\t   dispose();\n\t\t dispose = null;\n  }\n};\nif(module.hot) {\n\tvar lastRefs = module.hot.data && module.hot.data.refs || 0;\n\n\tif(lastRefs) {\n\t\texports.ref();\n\t\tif(!content.locals) {\n\t\t\trefs = lastRefs;\n\t\t}\n\t}\n\n\tif(!content.locals) {\n\t\tmodule.hot.accept();\n\t}\n\n\tmodule.hot.dispose(function(data) {\n\t\tdata.refs = content.locals ? 0 : refs;\n\n\t\tif(dispose) {\n\t\t\tdispose();\n\t\t}\n\t});\n}","/********************************************************************************\n * Copyright (C) 2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { Disposable } from '@theia/core';\n\nexport class EditorDecorationStyle implements Disposable {\n\n    constructor(\n        readonly selector: string,\n        styleProvider: (style: CSSStyleDeclaration) => void,\n    ) {\n        EditorDecorationStyle.createRule(selector, styleProvider);\n    }\n\n    get className(): string {\n        return this.selector.split('::')[0];\n    }\n\n    dispose(): void {\n        EditorDecorationStyle.deleteRule(this.selector);\n    }\n\n}\n\nexport namespace EditorDecorationStyle {\n\n    export function copyStyle(from: CSSStyleDeclaration, to: CSSStyleDeclaration): void {\n        Object.keys(from).forEach(key => {\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            (<any>to)[key] = (<any>from)[key];\n        });\n    }\n\n    export function createStyleSheet(container: HTMLElement = document.getElementsByTagName('head')[0]): CSSStyleSheet | undefined {\n        if (!container) {\n            return undefined;\n        }\n        const style = document.createElement('style');\n        style.id = 'editorDecorationsStyle';\n        style.type = 'text/css';\n        style.media = 'screen';\n        style.appendChild(document.createTextNode('')); // trick for webkit\n        container.appendChild(style);\n        return <CSSStyleSheet>style.sheet;\n    }\n\n    const editorDecorationsStyleSheet: CSSStyleSheet | undefined = createStyleSheet();\n\n    export function createRule(selector: string, styleProvider: (style: CSSStyleDeclaration) => void,\n        styleSheet: CSSStyleSheet | undefined = editorDecorationsStyleSheet\n    ): void {\n        if (!styleSheet) {\n            return;\n        }\n        const index = styleSheet.insertRule('.' + selector + '{}', 0);\n        const rules = styleSheet.cssRules || styleSheet.rules;\n        const rule = rules.item(index);\n        if (rule && rule.type === CSSRule.STYLE_RULE) {\n            const styleRule = rule as CSSStyleRule;\n            styleProvider(styleRule.style);\n        }\n    }\n\n    export function deleteRule(selector: string, styleSheet: CSSStyleSheet | undefined = editorDecorationsStyleSheet): void {\n        if (!styleSheet) {\n            return;\n        }\n        const rules = styleSheet.cssRules || styleSheet.rules;\n        for (let i = 0; i < rules.length; i++) {\n            if (rules[i].type === CSSRule.STYLE_RULE) {\n                if ((rules[i] as CSSStyleRule).selectorText === selector) {\n                    styleSheet.removeRule(i);\n                }\n            }\n        }\n    }\n\n}\n","/********************************************************************************\n * Copyright (C) 2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { Range } from '../editor';\n\nexport interface EditorDecoration {\n    /**\n     * range to which this decoration instance is applied.\n     */\n    range: Range;\n    /**\n     * options to be applied with this decoration.\n     */\n    options: EditorDecorationOptions\n}\n\nexport interface EditorDecorationOptions {\n    /**\n     * behavior of decorations when typing/editing near their edges.\n     */\n    stickiness?: TrackedRangeStickiness;\n    /**\n     * CSS class name of this decoration.\n     */\n    className?: string;\n    /**\n     * hover message for this decoration.\n     */\n    hoverMessage?: string;\n    /**\n     * the decoration will be rendered in the glyph margin with this class name.\n     */\n    glyphMarginClassName?: string;\n    /**\n     * hover message for the glyph margin of this decoration.\n     */\n    glyphMarginHoverMessage?: string;\n    /**\n     * should the decoration be rendered for the whole line.\n     */\n    isWholeLine?: boolean;\n    /**\n     * the decoration will be rendered in the lines decorations with this class name.\n     */\n    linesDecorationsClassName?: string;\n    /**\n     * the decoration will be rendered in the margin in full width with this class name.\n     */\n    marginClassName?: string;\n    /**\n     * the decoration will be rendered inline with this class name.\n     * to be used only to change text, otherwise use `className`.\n     */\n    inlineClassName?: string;\n    /**\n     * the decoration will be rendered before the text with this class name.\n     */\n    beforeContentClassName?: string;\n    /**\n     * the decoration will be rendered after the text with this class name.\n     */\n    afterContentClassName?: string;\n    /**\n     * render this decoration in the overview ruler.\n     */\n    overviewRuler?: DecorationOverviewRulerOptions;\n    /**\n     * If set, render this decoration in the minimap.\n     */\n    minimap?: DecorationMinimapOptions;\n}\n\nexport interface DecorationOptions {\n    /**\n     * color of the decoration in the overview ruler.\n     * use `rgba` values to play well with other decorations.\n     */\n    color: string;\n}\n\nexport enum MinimapPosition {\n    Inline = 1,\n    Gutter = 2\n}\n\nexport interface DecorationMinimapOptions extends DecorationOptions {\n    position?: MinimapPosition;\n}\n\nexport interface DecorationOverviewRulerOptions extends DecorationOptions {\n    /**\n     * position in the overview ruler.\n     */\n    position?: OverviewRulerLane;\n}\n\nexport enum OverviewRulerLane {\n    Left = 1,\n    Center = 2,\n    Right = 4,\n    Full = 7\n}\n\nexport enum TrackedRangeStickiness {\n    AlwaysGrowsWhenTypingAtEdges = 0,\n    NeverGrowsWhenTypingAtEdges = 1,\n    GrowsOnlyWhenTypingBefore = 2,\n    GrowsOnlyWhenTypingAfter = 3,\n}\n","/********************************************************************************\n * Copyright (C) 2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { injectable } from 'inversify';\nimport { TextEditor } from '../editor';\nimport { EditorDecoration } from './editor-decoration';\n\n@injectable()\nexport abstract class EditorDecorator {\n\n    protected readonly appliedDecorations = new Map<string, string[]>();\n\n    protected setDecorations(editor: TextEditor, newDecorations: EditorDecoration[]): void {\n        const uri = editor.uri.toString();\n        const oldDecorations = this.appliedDecorations.get(uri) || [];\n        if (oldDecorations.length === 0 && newDecorations.length === 0) {\n            return;\n        }\n        const decorationIds = editor.deltaDecorations({ oldDecorations, newDecorations });\n        this.appliedDecorations.set(uri, decorationIds);\n    }\n\n}\n","/********************************************************************************\n * Copyright (C) 2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nexport * from './editor-decoration';\nexport * from './editor-decoration-style';\nexport * from './editor-decorator';\n","/********************************************************************************\n * Copyright (C) 2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { TextEditor } from './editor';\n\nexport interface DiffNavigator {\n    revealFirst: boolean;\n    canNavigate(): boolean;\n    hasNext(): boolean;\n    hasPrevious(): boolean;\n    next(): void;\n    previous(): void;\n}\n\nexport const DiffNavigatorProvider = Symbol('DiffNavigatorProvider');\nexport type DiffNavigatorProvider = (editor: TextEditor) => DiffNavigator;\n","/********************************************************************************\n * Copyright (C) 2017 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { inject, injectable } from 'inversify';\nimport { CommandContribution, CommandRegistry, Command } from '@theia/core/lib/common';\nimport URI from '@theia/core/lib/common/uri';\nimport { CommonCommands, PreferenceService, QuickPickItem, QuickPickService, LabelProvider, QuickPickValue } from '@theia/core/lib/browser';\nimport { Languages, Language } from '@theia/languages/lib/browser';\nimport { EditorManager } from './editor-manager';\nimport { EncodingMode } from './editor';\nimport { EditorPreferences } from './editor-preferences';\nimport { SUPPORTED_ENCODINGS } from './supported-encodings';\nimport { ResourceProvider, MessageService } from '@theia/core';\n\nexport namespace EditorCommands {\n\n    const EDITOR_CATEGORY = 'Editor';\n\n    /**\n     * Show editor references\n     */\n    export const SHOW_REFERENCES: Command = {\n        id: 'textEditor.commands.showReferences'\n    };\n    /**\n     * Change indentation configuration (i.e., indent using tabs / spaces, and how many spaces per tab)\n     */\n    export const CONFIG_INDENTATION: Command = {\n        id: 'textEditor.commands.configIndentation'\n    };\n\n    export const CONFIG_EOL: Command = {\n        id: 'textEditor.commands.configEol',\n        category: EDITOR_CATEGORY,\n        label: 'Change End of Line Sequence'\n    };\n\n    export const INDENT_USING_SPACES: Command = {\n        id: 'textEditor.commands.indentUsingSpaces',\n        category: EDITOR_CATEGORY,\n        label: 'Indent Using Spaces'\n    };\n    export const INDENT_USING_TABS: Command = {\n        id: 'textEditor.commands.indentUsingTabs',\n        category: EDITOR_CATEGORY,\n        label: 'Indent Using Tabs'\n    };\n    export const CHANGE_LANGUAGE: Command = {\n        id: 'textEditor.change.language',\n        category: EDITOR_CATEGORY,\n        label: 'Change Language Mode'\n    };\n    export const CHANGE_ENCODING: Command = {\n        id: 'textEditor.change.encoding',\n        category: EDITOR_CATEGORY,\n        label: 'Change File Encoding'\n    };\n\n    /**\n     * Command for going back to the last editor navigation location.\n     */\n    export const GO_BACK: Command = {\n        id: 'textEditor.commands.go.back',\n        category: EDITOR_CATEGORY,\n        label: 'Go Back'\n    };\n    /**\n     * Command for going to the forthcoming editor navigation location.\n     */\n    export const GO_FORWARD: Command = {\n        id: 'textEditor.commands.go.forward',\n        category: EDITOR_CATEGORY,\n        label: 'Go Forward'\n    };\n    /**\n     * Command that reveals the last text edit location, if any.\n     */\n    export const GO_LAST_EDIT: Command = {\n        id: 'textEditor.commands.go.lastEdit',\n        category: EDITOR_CATEGORY,\n        label: 'Go to Last Edit Location'\n    };\n    /**\n     * Command that clears the editor navigation history.\n     */\n    export const CLEAR_EDITOR_HISTORY: Command = {\n        id: 'textEditor.commands.clear.history',\n        category: EDITOR_CATEGORY,\n        label: 'Clear Editor History'\n    };\n    /**\n     * Command that displays all editors that are currently opened.\n     */\n    export const SHOW_ALL_OPENED_EDITORS: Command = {\n        id: 'workbench.action.showAllEditors',\n        category: 'View',\n        label: 'Show All Opened Editors'\n    };\n    /**\n     * Command that toggles the minimap.\n     */\n    export const TOGGLE_MINIMAP: Command = {\n        id: 'editor.action.toggleMinimap',\n        category: 'View',\n        label: 'Toggle Minimap'\n    };\n    /**\n     * Command that toggles the rendering of whitespace characters in the editor.\n     */\n    export const TOGGLE_RENDER_WHITESPACE: Command = {\n        id: 'editor.action.toggleRenderWhitespace',\n        category: 'View',\n        label: 'Toggle Render Whitespace'\n    };\n    /**\n     * Command that toggles the word wrap.\n     */\n    export const TOGGLE_WORD_WRAP: Command = {\n        id: 'editor.action.toggleWordWrap',\n        category: 'View',\n        label: 'Toggle Word Wrap'\n    };\n}\n\n@injectable()\nexport class EditorCommandContribution implements CommandContribution {\n\n    public static readonly AUTOSAVE_PREFERENCE: string = 'editor.autoSave';\n\n    @inject(PreferenceService)\n    protected readonly preferencesService: PreferenceService;\n\n    @inject(EditorPreferences)\n    protected readonly editorPreferences: EditorPreferences;\n\n    @inject(QuickPickService)\n    protected readonly quickPick: QuickPickService;\n\n    @inject(MessageService) protected readonly messageService: MessageService;\n\n    @inject(LabelProvider)\n    protected readonly labelProvider: LabelProvider;\n\n    @inject(Languages)\n    protected readonly languages: Languages;\n\n    @inject(EditorManager)\n    protected readonly editorManager: EditorManager;\n\n    @inject(ResourceProvider)\n    protected readonly resourceProvider: ResourceProvider;\n\n    registerCommands(registry: CommandRegistry): void {\n        registry.registerCommand(EditorCommands.SHOW_REFERENCES);\n        registry.registerCommand(EditorCommands.CONFIG_INDENTATION);\n        registry.registerCommand(EditorCommands.CONFIG_EOL);\n        registry.registerCommand(EditorCommands.INDENT_USING_SPACES);\n        registry.registerCommand(EditorCommands.INDENT_USING_TABS);\n        registry.registerCommand(EditorCommands.CHANGE_LANGUAGE, {\n            isEnabled: () => this.canConfigureLanguage(),\n            isVisible: () => this.canConfigureLanguage(),\n            execute: () => this.configureLanguage()\n        });\n        registry.registerCommand(EditorCommands.CHANGE_ENCODING, {\n            isEnabled: () => this.canConfigureEncoding(),\n            isVisible: () => this.canConfigureEncoding(),\n            execute: () => this.configureEncoding()\n        });\n\n        registry.registerCommand(EditorCommands.GO_BACK);\n        registry.registerCommand(EditorCommands.GO_FORWARD);\n        registry.registerCommand(EditorCommands.GO_LAST_EDIT);\n        registry.registerCommand(EditorCommands.CLEAR_EDITOR_HISTORY);\n        registry.registerCommand(EditorCommands.TOGGLE_MINIMAP);\n        registry.registerCommand(EditorCommands.TOGGLE_RENDER_WHITESPACE);\n        registry.registerCommand(EditorCommands.TOGGLE_WORD_WRAP);\n\n        registry.registerCommand(CommonCommands.AUTO_SAVE, {\n            isToggled: () => this.isAutoSaveOn(),\n            execute: () => this.toggleAutoSave()\n        });\n    }\n\n    protected canConfigureLanguage(): boolean {\n        const widget = this.editorManager.currentEditor;\n        const editor = widget && widget.editor;\n        return !!editor && !!this.languages.languages;\n    }\n    protected async configureLanguage(): Promise<void> {\n        const widget = this.editorManager.currentEditor;\n        const editor = widget && widget.editor;\n        if (!editor || !this.languages.languages) {\n            return;\n        }\n        const current = editor.document.languageId;\n        const items: QuickPickItem<'autoDetect' | Language>[] = [\n            { label: 'Auto Detect', value: 'autoDetect' },\n            { type: 'separator', label: 'languages (identifier)' },\n            ... (this.languages.languages.map(\n                language => this.toQuickPickLanguage(language, current)\n            )).sort((e, e2) => e.label.localeCompare(e2.label))\n        ];\n        const selected = await this.quickPick.show(items, {\n            placeholder: 'Select Language Mode'\n        });\n        if (selected === 'autoDetect') {\n            editor.detectLanguage();\n        } else if (selected) {\n            editor.setLanguage(selected.id);\n        }\n    }\n\n    protected canConfigureEncoding(): boolean {\n        const widget = this.editorManager.currentEditor;\n        const editor = widget && widget.editor;\n        return !!editor;\n    }\n    protected async configureEncoding(): Promise<void> {\n        const widget = this.editorManager.currentEditor;\n        const editor = widget && widget.editor;\n        if (!editor) {\n            return;\n        }\n        const reopenWithEncodingPick = { label: 'Reopen with Encoding', value: 'reopen' };\n        const saveWithEncodingPick = { label: 'Save with Encoding', value: 'save' };\n        const actionItems: QuickPickItem<string>[] = [\n            reopenWithEncodingPick,\n            saveWithEncodingPick\n        ];\n        const action = await this.quickPick.show(actionItems, {\n            placeholder: 'Select Action'\n        });\n        if (!action) {\n            return;\n        }\n        const isReopenWithEncoding = (action === reopenWithEncodingPick.value);\n\n        const configuredEncoding = this.editorPreferences.get('files.encoding');\n\n        const resource = await this.resourceProvider(editor.uri);\n        const guessedEncoding = resource.guessEncoding ? await resource.guessEncoding() : undefined;\n        resource.dispose();\n\n        const encodingItems: QuickPickItem<{ id: string, description: string }>[] = Object.keys(SUPPORTED_ENCODINGS)\n            .sort((k1, k2) => {\n                if (k1 === configuredEncoding) {\n                    return -1;\n                } else if (k2 === configuredEncoding) {\n                    return 1;\n                }\n                return SUPPORTED_ENCODINGS[k1].order - SUPPORTED_ENCODINGS[k2].order;\n            })\n            .filter(k => {\n                if (k === guessedEncoding && guessedEncoding !== configuredEncoding) {\n                    return false; // do not show encoding if it is the guessed encoding that does not match the configured\n                }\n\n                return !isReopenWithEncoding || !SUPPORTED_ENCODINGS[k].encodeOnly; // hide those that can only be used for encoding if we are about to decode\n            })\n            .map(key => ({ label: SUPPORTED_ENCODINGS[key].labelLong, value: { id: key, description: key } }));\n\n        // Insert guessed encoding\n        if (guessedEncoding && configuredEncoding !== guessedEncoding && SUPPORTED_ENCODINGS[guessedEncoding]) {\n            encodingItems.unshift({\n                label: `Guessed from content: ${SUPPORTED_ENCODINGS[guessedEncoding].labelLong}`,\n                value: { id: guessedEncoding, description: guessedEncoding }\n            });\n        }\n        const encoding = await this.quickPick.show(encodingItems, {\n            placeholder: isReopenWithEncoding ? 'Select File Encoding to Reopen File' : 'Select File Encoding to Save with'\n        });\n        if (!encoding) {\n            return;\n        }\n        if (editor.document.dirty && isReopenWithEncoding) {\n            this.messageService.info('The file is dirty. Please save it first before reopening it with another encoding.');\n            return;\n        } else {\n            editor.setEncoding(encoding.id, isReopenWithEncoding ? EncodingMode.Decode : EncodingMode.Encode);\n        }\n    }\n\n    protected toQuickPickLanguage(value: Language, current: string): QuickPickValue<Language> {\n        const languageUri = this.toLanguageUri(value);\n        const icon = this.labelProvider.getIcon(languageUri);\n        const iconClass = icon !== '' ? icon + ' file-icon' : undefined;\n        return {\n            value,\n            label: value.name,\n            description: `(${value.id})${current === value.id ? ' - Configured Language' : ''}`,\n            iconClass\n        };\n    }\n    protected toLanguageUri(language: Language): URI {\n        const extension = language.extensions.values().next();\n        if (extension.value) {\n            return new URI('file:///' + extension.value);\n        }\n        const filename = language.filenames.values().next();\n        if (filename.value) {\n            return new URI('file:///' + filename.value);\n        }\n        return new URI('file:///.txt');\n    }\n\n    private isAutoSaveOn(): boolean {\n        const autoSave = this.preferencesService.get(EditorCommandContribution.AUTOSAVE_PREFERENCE);\n        return autoSave === 'on' || autoSave === undefined;\n    }\n    private async toggleAutoSave(): Promise<void> {\n        this.preferencesService.set(EditorCommandContribution.AUTOSAVE_PREFERENCE, this.isAutoSaveOn() ? 'off' : 'on');\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2017 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { EditorManager } from './editor-manager';\nimport { TextEditor } from './editor';\nimport { injectable, inject } from 'inversify';\nimport URI from '@theia/core/lib/common/uri';\nimport { StatusBarAlignment, StatusBar } from '@theia/core/lib/browser/status-bar/status-bar';\nimport { FrontendApplicationContribution, DiffUris } from '@theia/core/lib/browser';\nimport { Languages } from '@theia/languages/lib/browser';\nimport { ContextKeyService } from '@theia/core/lib/browser/context-key-service';\nimport { DisposableCollection } from '@theia/core';\nimport { EditorCommands } from './editor-command';\nimport { EditorQuickOpenService } from './editor-quick-open-service';\nimport { CommandRegistry, CommandContribution } from '@theia/core/lib/common';\nimport { KeybindingRegistry, KeybindingContribution, QuickOpenContribution, QuickOpenHandlerRegistry } from '@theia/core/lib/browser';\nimport { SUPPORTED_ENCODINGS } from './supported-encodings';\n\n@injectable()\nexport class EditorContribution implements FrontendApplicationContribution, CommandContribution, KeybindingContribution, QuickOpenContribution {\n\n    @inject(StatusBar) protected readonly statusBar: StatusBar;\n    @inject(EditorManager) protected readonly editorManager: EditorManager;\n    @inject(Languages) protected readonly languages: Languages;\n\n    @inject(ContextKeyService)\n    protected readonly contextKeyService: ContextKeyService;\n\n    @inject(EditorQuickOpenService)\n    protected readonly editorQuickOpenService: EditorQuickOpenService;\n\n    onStart(): void {\n        this.initEditorContextKeys();\n\n        this.updateStatusBar();\n        this.editorManager.onCurrentEditorChanged(() => this.updateStatusBar());\n    }\n\n    /** @deprecated since 0.5.0 - will be removed in farther releases */\n    protected initResourceContextKeys(): void {\n    }\n    /** @deprecated since 0.5.0 - will be removed in farther releases */\n    protected getLanguageId(uri: URI | undefined): string | undefined {\n        const { languages } = this.languages;\n        if (uri && languages) {\n            for (const language of languages) {\n                if (language.extensions.has(uri.path.ext)) {\n                    return language.id;\n                }\n            }\n        }\n        return undefined;\n    }\n\n    protected initEditorContextKeys(): void {\n        const editorIsOpen = this.contextKeyService.createKey<boolean>('editorIsOpen', false);\n        const textCompareEditorVisible = this.contextKeyService.createKey<boolean>('textCompareEditorVisible', false);\n        const updateContextKeys = () => {\n            const widgets = this.editorManager.all;\n            editorIsOpen.set(!!widgets.length);\n            textCompareEditorVisible.set(widgets.some(widget => DiffUris.isDiffUri(widget.editor.uri)));\n        };\n        updateContextKeys();\n        for (const widget of this.editorManager.all) {\n            widget.disposed.connect(updateContextKeys);\n        }\n        this.editorManager.onCreated(widget => {\n            updateContextKeys();\n            widget.disposed.connect(updateContextKeys);\n        });\n    }\n\n    protected readonly toDisposeOnCurrentEditorChanged = new DisposableCollection();\n    protected updateStatusBar(): void {\n        this.toDisposeOnCurrentEditorChanged.dispose();\n\n        const widget = this.editorManager.currentEditor;\n        const editor = widget && widget.editor;\n        this.updateLanguageStatus(editor);\n        this.updateEncodingStatus(editor);\n        this.setCursorPositionStatus(editor);\n        if (editor) {\n            this.toDisposeOnCurrentEditorChanged.pushAll([\n                editor.onLanguageChanged(() => this.updateLanguageStatus(editor)),\n                editor.onEncodingChanged(() => this.updateEncodingStatus(editor)),\n                editor.onCursorPositionChanged(() => this.setCursorPositionStatus(editor))\n            ]);\n        }\n    }\n\n    protected updateLanguageStatus(editor: TextEditor | undefined): void {\n        if (!editor) {\n            this.statusBar.removeElement('editor-status-language');\n            return;\n        }\n        const language = this.languages.getLanguage && this.languages.getLanguage(editor.document.languageId);\n        const languageName = language ? language.name : '';\n        this.statusBar.setElement('editor-status-language', {\n            text: languageName,\n            alignment: StatusBarAlignment.RIGHT,\n            priority: 1,\n            command: EditorCommands.CHANGE_LANGUAGE.id,\n            tooltip: 'Select Language Mode'\n        });\n    }\n\n    protected updateEncodingStatus(editor: TextEditor | undefined): void {\n        if (!editor) {\n            this.statusBar.removeElement('editor-status-encoding');\n            return;\n        }\n        this.statusBar.setElement('editor-status-encoding', {\n            text: SUPPORTED_ENCODINGS[editor.getEncoding()].labelShort,\n            alignment: StatusBarAlignment.RIGHT,\n            priority: 10,\n            command: EditorCommands.CHANGE_ENCODING.id,\n            tooltip: 'Select Encoding'\n        });\n    }\n\n    protected setCursorPositionStatus(editor: TextEditor | undefined): void {\n        if (!editor) {\n            this.statusBar.removeElement('editor-status-cursor-position');\n            return;\n        }\n        const { cursor } = editor;\n        this.statusBar.setElement('editor-status-cursor-position', {\n            text: `Ln ${cursor.line + 1}, Col ${editor.getVisibleColumn(cursor)}`,\n            alignment: StatusBarAlignment.RIGHT,\n            priority: 100,\n            tooltip: 'Go To Line',\n            command: 'editor.action.gotoLine'\n        });\n    }\n\n    registerCommands(commands: CommandRegistry): void {\n        commands.registerCommand(EditorCommands.SHOW_ALL_OPENED_EDITORS, {\n            execute: () => this.editorQuickOpenService.open()\n        });\n    }\n\n    registerKeybindings(keybindings: KeybindingRegistry): void {\n        keybindings.registerKeybinding({\n            command: EditorCommands.SHOW_ALL_OPENED_EDITORS.id,\n            keybinding: 'ctrlcmd+k ctrlcmd+p'\n        });\n    }\n\n    registerQuickOpenHandlers(handlers: QuickOpenHandlerRegistry): void {\n        handlers.registerHandler(this.editorQuickOpenService);\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { ContainerModule } from 'inversify';\nimport { CommandContribution, MenuContribution } from '@theia/core/lib/common';\nimport { OpenHandler, WidgetFactory, FrontendApplicationContribution, KeybindingContext, KeybindingContribution, QuickOpenContribution } from '@theia/core/lib/browser';\nimport { VariableContribution } from '@theia/variable-resolver/lib/browser';\nimport { EditorManager, EditorAccess, ActiveEditorAccess, CurrentEditorAccess } from './editor-manager';\nimport { EditorContribution } from './editor-contribution';\nimport { EditorMenuContribution } from './editor-menu';\nimport { EditorCommandContribution } from './editor-command';\nimport { EditorTextFocusContext, StrictEditorTextFocusContext, DiffEditorTextFocusContext } from './editor-keybinding-contexts';\nimport { EditorKeybindingContribution } from './editor-keybinding';\nimport { bindEditorPreferences } from './editor-preferences';\nimport { EditorWidgetFactory } from './editor-widget-factory';\nimport { EditorNavigationContribution } from './editor-navigation-contribution';\nimport { NavigationLocationUpdater } from './navigation/navigation-location-updater';\nimport { NavigationLocationService } from './navigation/navigation-location-service';\nimport { NavigationLocationSimilarity } from './navigation/navigation-location-similarity';\nimport { EditorVariableContribution } from './editor-variable-contribution';\nimport { SemanticHighlightingService } from './semantic-highlight/semantic-highlighting-service';\nimport { EditorQuickOpenService } from './editor-quick-open-service';\n\nexport default new ContainerModule(bind => {\n    bindEditorPreferences(bind);\n\n    bind(EditorWidgetFactory).toSelf().inSingletonScope();\n    bind(WidgetFactory).toService(EditorWidgetFactory);\n\n    bind(EditorManager).toSelf().inSingletonScope();\n    bind(OpenHandler).toService(EditorManager);\n\n    bind(CommandContribution).to(EditorCommandContribution).inSingletonScope();\n    bind(MenuContribution).to(EditorMenuContribution).inSingletonScope();\n\n    bind(StrictEditorTextFocusContext).toSelf().inSingletonScope();\n    bind(KeybindingContext).toService(StrictEditorTextFocusContext);\n    bind(KeybindingContext).to(EditorTextFocusContext).inSingletonScope();\n    bind(KeybindingContext).to(DiffEditorTextFocusContext).inSingletonScope();\n    bind(KeybindingContribution).to(EditorKeybindingContribution).inSingletonScope();\n\n    bind(EditorContribution).toSelf().inSingletonScope();\n    bind(FrontendApplicationContribution).toService(EditorContribution);\n\n    bind(EditorNavigationContribution).toSelf().inSingletonScope();\n    bind(FrontendApplicationContribution).toService(EditorNavigationContribution);\n    bind(NavigationLocationService).toSelf().inSingletonScope();\n    bind(NavigationLocationUpdater).toSelf().inSingletonScope();\n    bind(NavigationLocationSimilarity).toSelf().inSingletonScope();\n\n    bind(VariableContribution).to(EditorVariableContribution).inSingletonScope();\n\n    bind(SemanticHighlightingService).toSelf().inSingletonScope();\n\n    [CommandContribution, KeybindingContribution, QuickOpenContribution].forEach(serviceIdentifier => {\n        bind(serviceIdentifier).toService(EditorContribution);\n    });\n    bind(EditorQuickOpenService).toSelf().inSingletonScope();\n\n    bind(CurrentEditorAccess).toSelf().inSingletonScope();\n    bind(ActiveEditorAccess).toSelf().inSingletonScope();\n    bind(EditorAccess).to(CurrentEditorAccess).inSingletonScope().whenTargetNamed(EditorAccess.CURRENT);\n    bind(EditorAccess).to(ActiveEditorAccess).inSingletonScope().whenTargetNamed(EditorAccess.ACTIVE);\n});\n","/********************************************************************************\n * Copyright (C) 2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { injectable, inject } from 'inversify';\nimport { KeybindingContext } from '@theia/core/lib/browser/keybinding';\nimport { EditorManager } from './editor-manager';\nimport { EditorWidget } from './editor-widget';\nimport { DiffUris } from '@theia/core/lib/browser';\n\nexport namespace EditorKeybindingContexts {\n\n    /**\n     * ID of a keybinding context that is enabled when the active text editor has the focus.\n     */\n    export const editorTextFocus = 'editorTextFocus';\n\n    /**\n     * ID of a keybinding context that is enabled when the active diff editor has the focus.\n     */\n    export const diffEditorTextFocus = 'diffEditorTextFocus';\n\n    /**\n     * Unique identifier of a keybinding context that is enabled if the active editor has the focus but it does not have any overlaying widgets, such as the content assist widget.\n     */\n    export const strictEditorTextFocus = 'strictEditorTextFocus';\n}\n\n@injectable()\nexport class EditorTextFocusContext implements KeybindingContext {\n\n    readonly id: string = EditorKeybindingContexts.editorTextFocus;\n\n    @inject(EditorManager)\n    protected readonly editorManager: EditorManager;\n\n    isEnabled(): boolean {\n        return !!this.getEditor();\n    }\n\n    protected getEditor(): EditorWidget | undefined {\n        const widget = this.editorManager.activeEditor;\n        if (widget && this.canHandle(widget)) {\n            return widget;\n        }\n        return undefined;\n    }\n\n    protected canHandle(widget: EditorWidget): boolean {\n        return widget.editor.isFocused();\n    }\n\n}\n\n@injectable()\nexport class DiffEditorTextFocusContext extends EditorTextFocusContext {\n\n    readonly id: string = EditorKeybindingContexts.diffEditorTextFocus;\n\n    protected canHandle(widget: EditorWidget): boolean {\n        return super.canHandle(widget) && DiffUris.isDiffUri(widget.editor.uri);\n    }\n\n}\n\n/**\n * Keybinding context that is enabled when the active text editor has the focus **AND** it does not\n * have any widgets (for example, the content assist widget) overlaying the active editor.\n */\n@injectable()\nexport class StrictEditorTextFocusContext extends EditorTextFocusContext {\n\n    readonly id: string = EditorKeybindingContexts.strictEditorTextFocus;\n\n}\n","/********************************************************************************\n * Copyright (C) 2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { injectable } from 'inversify';\nimport { isOSX, isWindows } from '@theia/core/lib/common/os';\nimport { KeybindingContribution, KeybindingRegistry } from '@theia/core/lib/browser/keybinding';\nimport { EditorCommands } from './editor-command';\n\n@injectable()\nexport class EditorKeybindingContribution implements KeybindingContribution {\n\n    registerKeybindings(registry: KeybindingRegistry): void {\n        registry.registerKeybindings(\n            {\n                command: EditorCommands.GO_BACK.id,\n                keybinding: isOSX ? 'ctrl+-' : isWindows ? 'alt+left' : /* isLinux */ 'ctrl+alt+-'\n            },\n            {\n                command: EditorCommands.GO_FORWARD.id,\n                keybinding: isOSX ? 'ctrl+shift+-' : isWindows ? 'alt+right' : /* isLinux */ 'ctrl+shift+-'\n            },\n            {\n                command: EditorCommands.GO_LAST_EDIT.id,\n                keybinding: 'ctrl+alt+q'\n            },\n            {\n                command: EditorCommands.TOGGLE_WORD_WRAP.id,\n                keybinding: 'alt+z'\n            }\n        );\n    }\n\n}\n","/********************************************************************************\n * Copyright (C) 2017 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { injectable, postConstruct, inject } from 'inversify';\nimport URI from '@theia/core/lib/common/uri';\nimport { RecursivePartial, Emitter, Event } from '@theia/core/lib/common';\nimport { WidgetOpenerOptions, NavigatableWidgetOpenHandler } from '@theia/core/lib/browser';\nimport { EditorWidget } from './editor-widget';\nimport { Range, Position, Location } from './editor';\nimport { EditorWidgetFactory } from './editor-widget-factory';\nimport { TextEditor } from './editor';\n\nexport interface EditorOpenerOptions extends WidgetOpenerOptions {\n    selection?: RecursivePartial<Range>;\n    preview?: boolean;\n}\n\n@injectable()\nexport class EditorManager extends NavigatableWidgetOpenHandler<EditorWidget> {\n\n    readonly id = EditorWidgetFactory.ID;\n\n    readonly label = 'Code Editor';\n\n    protected readonly onActiveEditorChangedEmitter = new Emitter<EditorWidget | undefined>();\n    /**\n     * Emit when the active editor is changed.\n     */\n    readonly onActiveEditorChanged: Event<EditorWidget | undefined> = this.onActiveEditorChangedEmitter.event;\n\n    protected readonly onCurrentEditorChangedEmitter = new Emitter<EditorWidget | undefined>();\n    /**\n     * Emit when the current editor is changed.\n     */\n    readonly onCurrentEditorChanged: Event<EditorWidget | undefined> = this.onCurrentEditorChangedEmitter.event;\n\n    @postConstruct()\n    protected init(): void {\n        super.init();\n        this.shell.activeChanged.connect(() => this.updateActiveEditor());\n        this.shell.currentChanged.connect(() => this.updateCurrentEditor());\n        this.onCreated(widget => widget.disposed.connect(() => this.updateCurrentEditor()));\n    }\n\n    protected _activeEditor: EditorWidget | undefined;\n    /**\n     * The active editor.\n     * If there is an active editor (one that has focus), active and current are the same.\n     */\n    get activeEditor(): EditorWidget | undefined {\n        return this._activeEditor;\n    }\n    protected setActiveEditor(active: EditorWidget | undefined): void {\n        if (this._activeEditor !== active) {\n            this._activeEditor = active;\n            this.onActiveEditorChangedEmitter.fire(this._activeEditor);\n        }\n    }\n    protected updateActiveEditor(): void {\n        const widget = this.shell.activeWidget;\n        this.setActiveEditor(widget instanceof EditorWidget ? widget : undefined);\n    }\n\n    protected _currentEditor: EditorWidget | undefined;\n    /**\n     * The most recently activated editor (which might not have the focus anymore, hence it is not active).\n     * If no editor has focus, e.g. when a context menu is shown, the active editor is `undefined`, but current might be the editor that was active before the menu popped up.\n     */\n    get currentEditor(): EditorWidget | undefined {\n        return this._currentEditor;\n    }\n    protected setCurrentEditor(current: EditorWidget | undefined): void {\n        if (this._currentEditor !== current) {\n            this._currentEditor = current;\n            this.onCurrentEditorChangedEmitter.fire(this._currentEditor);\n        }\n    }\n    protected updateCurrentEditor(): void {\n        const widget = this.shell.currentWidget;\n        if (widget instanceof EditorWidget) {\n            this.setCurrentEditor(widget);\n        } else if (!this._currentEditor || !this._currentEditor.isVisible) {\n            this.setCurrentEditor(undefined);\n        }\n    }\n\n    canHandle(uri: URI, options?: WidgetOpenerOptions): number {\n        return 100;\n    }\n\n    async open(uri: URI, options?: EditorOpenerOptions): Promise<EditorWidget> {\n        const editor = await super.open(uri, options);\n        this.revealSelection(editor, options);\n        return editor;\n    }\n\n    protected revealSelection(widget: EditorWidget, input?: EditorOpenerOptions): void {\n        if (input && input.selection) {\n            const editor = widget.editor;\n            const selection = this.getSelection(widget, input.selection);\n            if (Position.is(selection)) {\n                editor.cursor = selection;\n                editor.revealPosition(selection);\n            } else if (Range.is(selection)) {\n                editor.cursor = selection.end;\n                editor.selection = selection;\n                editor.revealRange(selection);\n            }\n        }\n    }\n\n    protected getSelection(widget: EditorWidget, selection: RecursivePartial<Range>): Range | Position | undefined {\n        const { start, end } = selection;\n        const line = start && start.line !== undefined && start.line >= 0 ? start.line : undefined;\n        if (line === undefined) {\n            return undefined;\n        }\n        const character = start && start.character !== undefined && start.character >= 0 ? start.character : widget.editor.document.getLineMaxColumn(line);\n        const endLine = end && end.line !== undefined && end.line >= 0 ? end.line : undefined;\n        if (endLine === undefined) {\n            return { line, character };\n        }\n        const endCharacter = end && end.character !== undefined && end.character >= 0 ? end.character : widget.editor.document.getLineMaxColumn(endLine);\n        return {\n            start: { line, character },\n            end: { line: endLine, character: endCharacter }\n        };\n    }\n\n}\n\n/**\n * Provides direct access to the underlying text editor.\n */\n@injectable()\nexport abstract class EditorAccess {\n\n    @inject(EditorManager)\n    protected readonly editorManager: EditorManager;\n\n    /**\n     * The URI of the underlying document from the editor.\n     */\n    get uri(): string | undefined {\n        const editor = this.editor;\n        if (editor) {\n            return editor.uri.toString();\n        }\n        return undefined;\n    }\n\n    /**\n     * The selection location from the text editor.\n     */\n    get selection(): Location | undefined {\n        const editor = this.editor;\n        if (editor) {\n            const uri = editor.uri.toString();\n            const range = editor.selection;\n            return {\n                range,\n                uri\n            };\n        }\n        return undefined;\n    }\n\n    /**\n     * The unique identifier of the language the current editor belongs to.\n     */\n    get languageId(): string | undefined {\n        const editor = this.editor;\n        if (editor) {\n            return editor.document.languageId;\n        }\n        return undefined;\n    }\n\n    /**\n     * The text editor.\n     */\n    get editor(): TextEditor | undefined {\n        const editorWidget = this.editorWidget();\n        if (editorWidget) {\n            return editorWidget.editor;\n        }\n        return undefined;\n    }\n\n    /**\n     * The editor widget, or `undefined` if not applicable.\n     */\n    protected abstract editorWidget(): EditorWidget | undefined;\n\n}\n\n/**\n * Provides direct access to the currently active text editor.\n */\n@injectable()\nexport class CurrentEditorAccess extends EditorAccess {\n\n    protected editorWidget(): EditorWidget | undefined {\n        return this.editorManager.currentEditor;\n    }\n\n}\n\n/**\n * Provides access to the active text editor.\n */\n@injectable()\nexport class ActiveEditorAccess extends EditorAccess {\n\n    protected editorWidget(): EditorWidget | undefined {\n        return this.editorManager.activeEditor;\n    }\n\n}\n\nexport namespace EditorAccess {\n    export const CURRENT = 'current-editor-access';\n    export const ACTIVE = 'active-editor-access';\n}\n","/********************************************************************************\n * Copyright (C) 2017 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { injectable } from 'inversify';\nimport { MenuContribution, MenuModelRegistry, MenuPath, MAIN_MENU_BAR } from '@theia/core';\nimport { CommonCommands, CommonMenus } from '@theia/core/lib/browser';\nimport { EditorCommands } from './editor-command';\n\nexport const EDITOR_CONTEXT_MENU: MenuPath = ['editor_context_menu'];\n\n/**\n * Editor context menu default groups should be aligned\n * with VS Code default groups: https://code.visualstudio.com/api/references/contribution-points#contributes.menus\n */\nexport namespace EditorContextMenu {\n    export const NAVIGATION = [...EDITOR_CONTEXT_MENU, 'navigation'];\n    export const MODIFICATION = [...EDITOR_CONTEXT_MENU, '1_modification'];\n    export const CUT_COPY_PASTE = [...EDITOR_CONTEXT_MENU, '9_cutcopypaste'];\n    export const COMMANDS = [...EDITOR_CONTEXT_MENU, 'z_commands'];\n    export const UNDO_REDO = [...EDITOR_CONTEXT_MENU, '1_undo'];\n}\n\nexport namespace EditorMainMenu {\n\n    /**\n     * The main `Go` menu item.\n     */\n    export const GO = [...MAIN_MENU_BAR, '5_go'];\n\n    /**\n     * Navigation menu group in the `Go` menu.\n     */\n    export const NAVIGATION_GROUP = [...GO, '1_navigation_group'];\n\n}\n\n@injectable()\nexport class EditorMenuContribution implements MenuContribution {\n\n    registerMenus(registry: MenuModelRegistry): void {\n        registry.registerMenuAction(EditorContextMenu.UNDO_REDO, {\n            commandId: CommonCommands.UNDO.id\n        });\n        registry.registerMenuAction(EditorContextMenu.UNDO_REDO, {\n            commandId: CommonCommands.REDO.id\n        });\n\n        registry.registerMenuAction(EditorContextMenu.CUT_COPY_PASTE, {\n            commandId: CommonCommands.CUT.id,\n            order: '0'\n        });\n        registry.registerMenuAction(EditorContextMenu.CUT_COPY_PASTE, {\n            commandId: CommonCommands.COPY.id,\n            order: '1'\n        });\n        registry.registerMenuAction(EditorContextMenu.CUT_COPY_PASTE, {\n            commandId: CommonCommands.PASTE.id,\n            order: '2'\n        });\n\n        // Editor navigation. Go > Back and Go > Forward.\n        registry.registerSubmenu(EditorMainMenu.GO, 'Go');\n        registry.registerMenuAction(EditorMainMenu.NAVIGATION_GROUP, {\n            commandId: EditorCommands.GO_BACK.id,\n            label: 'Back'\n        });\n        registry.registerMenuAction(EditorMainMenu.NAVIGATION_GROUP, {\n            commandId: EditorCommands.GO_FORWARD.id,\n            label: 'Forward'\n        });\n        registry.registerMenuAction(EditorMainMenu.NAVIGATION_GROUP, {\n            commandId: EditorCommands.GO_LAST_EDIT.id,\n            label: 'Last Edit Location'\n        });\n\n        // Toggle Commands.\n        registry.registerMenuAction(CommonMenus.VIEW_TOGGLE, {\n            commandId: EditorCommands.TOGGLE_WORD_WRAP.id,\n            label: EditorCommands.TOGGLE_WORD_WRAP.label,\n            order: '0'\n        });\n        registry.registerMenuAction(CommonMenus.VIEW_TOGGLE, {\n            commandId: EditorCommands.TOGGLE_MINIMAP.id,\n            label: 'Show Minimap',\n            order: '1',\n        });\n        registry.registerMenuAction(CommonMenus.VIEW_TOGGLE, {\n            commandId: EditorCommands.TOGGLE_RENDER_WHITESPACE.id,\n            label: 'Render Whitespace',\n            order: '2'\n        });\n    }\n\n}\n","/********************************************************************************\n * Copyright (C) 2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { inject, injectable, postConstruct } from 'inversify';\nimport { ILogger } from '@theia/core/lib/common/logger';\nimport { StorageService } from '@theia/core/lib/browser/storage-service';\nimport { Disposable, DisposableCollection } from '@theia/core/lib/common/disposable';\nimport { FrontendApplicationContribution } from '@theia/core/lib/browser/frontend-application';\nimport { CommandRegistry } from '@theia/core/lib/common/command';\nimport { EditorCommands } from './editor-command';\nimport { EditorWidget } from './editor-widget';\nimport { EditorManager } from './editor-manager';\nimport { TextEditor, Position, Range, TextDocumentChangeEvent } from './editor';\nimport { NavigationLocation } from './navigation/navigation-location';\nimport { NavigationLocationService } from './navigation/navigation-location-service';\nimport { PreferenceService, PreferenceScope } from '@theia/core/lib/browser';\n\n@injectable()\nexport class EditorNavigationContribution implements Disposable, FrontendApplicationContribution {\n\n    private static ID = 'editor-navigation-contribution';\n\n    protected readonly toDispose = new DisposableCollection();\n    protected readonly toDisposePerCurrentEditor = new DisposableCollection();\n\n    @inject(ILogger)\n    protected readonly logger: ILogger;\n\n    @inject(EditorManager)\n    protected readonly editorManager: EditorManager;\n\n    @inject(NavigationLocationService)\n    protected readonly locationStack: NavigationLocationService;\n\n    @inject(StorageService)\n    protected readonly storageService: StorageService;\n\n    @inject(PreferenceService)\n    protected readonly preferenceService: PreferenceService;\n\n    @inject(CommandRegistry)\n    protected readonly commandRegistry: CommandRegistry;\n\n    @postConstruct()\n    protected init(): void {\n        this.toDispose.pushAll([\n            // TODO listen on file resource changes, if a file gets deleted, remove the corresponding navigation locations (if any).\n            // This would require introducing the FS dependency in the editor extension.\n            this.editorManager.onCurrentEditorChanged(this.onCurrentEditorChanged.bind(this))\n        ]);\n        this.commandRegistry.registerHandler(EditorCommands.GO_BACK.id, {\n            execute: () => this.locationStack.back(),\n            isEnabled: () => this.locationStack.canGoBack()\n        });\n        this.commandRegistry.registerHandler(EditorCommands.GO_FORWARD.id, {\n            execute: () => this.locationStack.forward(),\n            isEnabled: () => this.locationStack.canGoForward()\n        });\n        this.commandRegistry.registerHandler(EditorCommands.GO_LAST_EDIT.id, {\n            execute: () => this.locationStack.reveal(this.locationStack.lastEditLocation()),\n            isEnabled: () => !!this.locationStack.lastEditLocation()\n        });\n        this.commandRegistry.registerHandler(EditorCommands.CLEAR_EDITOR_HISTORY.id, {\n            execute: () => this.locationStack.clearHistory(),\n            isEnabled: () => this.locationStack.locations().length > 0\n        });\n        this.commandRegistry.registerHandler(EditorCommands.TOGGLE_MINIMAP.id, {\n            execute: () => this.toggleMinimap(),\n            isEnabled: () => true,\n            isToggled: () => this.isMinimapEnabled()\n        });\n        this.commandRegistry.registerHandler(EditorCommands.TOGGLE_RENDER_WHITESPACE.id, {\n            execute: () => this.toggleRenderWhitespace(),\n            isEnabled: () => true,\n            isToggled: () => this.isRenderWhitespaceEnabled()\n        });\n        this.commandRegistry.registerHandler(EditorCommands.TOGGLE_WORD_WRAP.id, {\n            execute: () => this.toggleWordWrap(),\n            isEnabled: () => true,\n        });\n    }\n\n    async onStart(): Promise<void> {\n        await this.restoreState();\n    }\n\n    onStop(): void {\n        this.storeState();\n        this.dispose();\n    }\n\n    dispose(): void {\n        this.toDispose.dispose();\n    }\n\n    /**\n     * Toggle the editor word wrap behavior.\n     */\n    protected async toggleWordWrap(): Promise<void> {\n        // Get the current word wrap.\n        const wordWrap: string | undefined = this.preferenceService.get('editor.wordWrap');\n        if (wordWrap === undefined) {\n            return;\n        }\n        // The list of allowed word wrap values.\n        const values: string[] = ['off', 'on', 'wordWrapColumn', 'bounded'];\n        // Get the index of the current value, and toggle to the next available value.\n        const index = values.indexOf(wordWrap) + 1;\n        if (index > -1) {\n            this.preferenceService.set('editor.wordWrap', values[index % values.length], PreferenceScope.User);\n        }\n    }\n\n    /**\n     * Toggle the display of minimap in the editor.\n     */\n    protected async toggleMinimap(): Promise<void> {\n        const value: boolean | undefined = this.preferenceService.get('editor.minimap.enabled');\n        this.preferenceService.set('editor.minimap.enabled', !value, PreferenceScope.User);\n    }\n\n    /**\n     * Toggle the rendering of whitespace in the editor.\n     */\n    protected async toggleRenderWhitespace(): Promise<void> {\n        const renderWhitespace: string | undefined = this.preferenceService.get('editor.renderWhitespace');\n        let updatedRenderWhitespace: string;\n        if (renderWhitespace === 'none') {\n            updatedRenderWhitespace = 'all';\n        } else {\n            updatedRenderWhitespace = 'none';\n        }\n        this.preferenceService.set('editor.renderWhitespace', updatedRenderWhitespace, PreferenceScope.User);\n    }\n\n    protected onCurrentEditorChanged(editorWidget: EditorWidget | undefined): void {\n        this.toDisposePerCurrentEditor.dispose();\n        if (editorWidget) {\n            const { editor } = editorWidget;\n            this.toDisposePerCurrentEditor.pushAll([\n                // Instead of registering an `onCursorPositionChanged` listener, we treat the zero length selection as a cursor position change.\n                // Otherwise we would have two events for a single cursor change interaction.\n                editor.onSelectionChanged(selection => this.onSelectionChanged(editor, selection)),\n                editor.onDocumentContentChanged(event => this.onDocumentContentChanged(editor, event))\n            ]);\n            this.locationStack.register(NavigationLocation.create(editor, editor.selection));\n        }\n    }\n\n    protected onCursorPositionChanged(editor: TextEditor, position: Position): void {\n        this.locationStack.register(NavigationLocation.create(editor, position));\n    }\n\n    protected onSelectionChanged(editor: TextEditor, selection: Range): void {\n        if (this.isZeroLengthRange(selection)) {\n            this.onCursorPositionChanged(editor, selection.start);\n        } else {\n            this.locationStack.register(NavigationLocation.create(editor, selection));\n        }\n    }\n\n    protected onDocumentContentChanged(editor: TextEditor, event: TextDocumentChangeEvent): void {\n        if (event.contentChanges.length > 0) {\n            this.locationStack.register(NavigationLocation.create(editor, event.contentChanges[0]));\n        }\n    }\n\n    /**\n     * `true` if the `range` argument has zero length. In other words, the `start` and the `end` positions are the same. Otherwise, `false`.\n     */\n    protected isZeroLengthRange(range: Range): boolean {\n        const { start, end } = range;\n        return start.line === end.line && start.character === end.character;\n    }\n\n    protected async storeState(): Promise<void> {\n        this.storageService.setData(EditorNavigationContribution.ID, {\n            locations: this.locationStack.locations().map(NavigationLocation.toObject)\n        });\n    }\n\n    protected async restoreState(): Promise<void> {\n        const raw: { locations?: ArrayLike<object> } | undefined = await this.storageService.getData(EditorNavigationContribution.ID);\n        if (raw && raw.locations) {\n            const locations: NavigationLocation[] = [];\n            for (let i = 0; i < raw.locations.length; i++) {\n                const location = NavigationLocation.fromObject(raw.locations[i]);\n                if (location) {\n                    locations.push(location);\n                } else {\n                    this.logger.warn('Could not restore the state of the editor navigation history.');\n                    return;\n                }\n            }\n            this.locationStack.register(...locations);\n        }\n    }\n\n    private isMinimapEnabled(): boolean {\n        return !!this.preferenceService.get('editor.minimap.enabled');\n    }\n\n    private isRenderWhitespaceEnabled(): boolean {\n        const renderWhitespace = this.preferenceService.get('editor.renderWhitespace');\n        return renderWhitespace === 'none' ? false : true;\n    }\n\n}\n","/********************************************************************************\n * Copyright (C) 2018 Ericsson and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { interfaces } from 'inversify';\nimport {\n    createPreferenceProxy,\n    PreferenceProxy,\n    PreferenceService,\n    PreferenceContribution,\n    PreferenceSchema,\n    PreferenceChangeEvent,\n    PreferenceSchemaProperties\n} from '@theia/core/lib/browser/preferences';\nimport { isWindows, isOSX, OS } from '@theia/core/lib/common/os';\nimport { SUPPORTED_ENCODINGS } from './supported-encodings';\n\nconst DEFAULT_WINDOWS_FONT_FAMILY = 'Consolas, \\'Courier New\\', monospace';\nconst DEFAULT_MAC_FONT_FAMILY = 'Menlo, Monaco, \\'Courier New\\', monospace';\nconst DEFAULT_LINUX_FONT_FAMILY = '\\'Droid Sans Mono\\', \\'monospace\\', monospace, \\'Droid Sans Fallback\\'';\n\nconst platform = {\n    isMacintosh: isOSX,\n    isLinux: OS.type() === OS.Type.Linux\n};\n\n// should be in sync with https://github.com/TypeFox/vscode/blob/70b8db24a37fafc77247de7f7cb5bb0195120ed0/src/vs/editor/common/config/editorOptions.ts#L2585\nexport const EDITOR_FONT_DEFAULTS = {\n    fontFamily: (\n        isOSX ? DEFAULT_MAC_FONT_FAMILY : (isWindows ? DEFAULT_WINDOWS_FONT_FAMILY : DEFAULT_LINUX_FONT_FAMILY)\n    ),\n    fontWeight: 'normal',\n    fontSize: (\n        isOSX ? 12 : 14\n    ),\n    lineHeight: 0,\n    letterSpacing: 0,\n};\n\n// should be in sync with https://github.com/TypeFox/vscode/blob/70b8db24a37fafc77247de7f7cb5bb0195120ed0/src/vs/editor/common/config/editorOptions.ts#L2600\nexport const EDITOR_MODEL_DEFAULTS = {\n    tabSize: 4,\n    indentSize: 4,\n    insertSpaces: true,\n    detectIndentation: true,\n    trimAutoWhitespace: true,\n    largeFileOptimizations: true\n};\n\n/* eslint-disable no-null/no-null */\n// should be in sync with https://github.com/TypeFox/vscode/blob/70b8db24a37fafc77247de7f7cb5bb0195120ed0/src/vs/editor/common/config/editorOptions.ts#L2612\n// 1. Copy\n// 2. Inline values\nexport const EDITOR_DEFAULTS = {\n    inDiffEditor: false,\n    wordSeparators: '`~!@#$%^&*()-=+[{]}\\\\|;:\\'\",.<>/?',\n    lineNumbersMinChars: 5,\n    lineDecorationsWidth: 10,\n    readOnly: false,\n    mouseStyle: 'text',\n    disableLayerHinting: false,\n    automaticLayout: false,\n    wordWrap: 'off',\n    wordWrapColumn: 80,\n    wordWrapMinified: true,\n    wrappingIndent: 1,\n    wordWrapBreakBeforeCharacters: '([{+',\n    wordWrapBreakAfterCharacters: ' \\t})]?|/&,;',\n    wordWrapBreakObtrusiveCharacters: '.',\n    autoClosingBrackets: 'languageDefined',\n    autoClosingQuotes: 'languageDefined',\n    autoSurround: 'languageDefined',\n    autoIndent: true,\n    dragAndDrop: true,\n    emptySelectionClipboard: true,\n    copyWithSyntaxHighlighting: true,\n    useTabStops: true,\n    multiCursorModifier: 'altKey',\n    multiCursorMergeOverlapping: true,\n    accessibilitySupport: 'auto',\n    showUnused: true,\n\n    viewInfo: {\n        extraEditorClassName: '',\n        disableMonospaceOptimizations: false,\n        rulers: [],\n        ariaLabel: 'Editor content',\n        renderLineNumbers: 1,\n        renderCustomLineNumbers: null,\n        cursorSurroundingLines: 0,\n        renderFinalNewline: true,\n        selectOnLineNumbers: true,\n        glyphMargin: true,\n        revealHorizontalRightPadding: 30,\n        roundedSelection: true,\n        overviewRulerLanes: 2,\n        overviewRulerBorder: true,\n        cursorBlinking: 1,\n        mouseWheelZoom: false,\n        cursorSmoothCaretAnimation: false,\n        cursorStyle: 1,\n        cursorWidth: 0,\n        hideCursorInOverviewRuler: false,\n        scrollBeyondLastLine: true,\n        scrollBeyondLastColumn: 5,\n        smoothScrolling: false,\n        stopRenderingLineAfter: 10000,\n        renderWhitespace: 'none',\n        renderControlCharacters: false,\n        fontLigatures: false,\n        renderIndentGuides: true,\n        highlightActiveIndentGuide: true,\n        renderLineHighlight: 'line',\n        scrollbar: {\n            vertical: 1,\n            horizontal: 1,\n            arrowSize: 11,\n            useShadows: true,\n            verticalHasArrows: false,\n            horizontalHasArrows: false,\n            horizontalScrollbarSize: 10,\n            horizontalSliderSize: 10,\n            verticalScrollbarSize: 14,\n            verticalSliderSize: 14,\n            handleMouseWheel: true,\n            mouseWheelScrollSensitivity: 1,\n            fastScrollSensitivity: 5,\n        },\n        minimap: {\n            enabled: true,\n            side: 'right',\n            showSlider: 'mouseover',\n            renderCharacters: true,\n            maxColumn: 120\n        },\n        fixedOverflowWidgets: false,\n    },\n\n    contribInfo: {\n        selectionClipboard: true,\n        hover: {\n            enabled: true,\n            delay: 300,\n            sticky: true\n        },\n        links: true,\n        contextmenu: true,\n        quickSuggestions: { other: true, comments: false, strings: false },\n        quickSuggestionsDelay: 10,\n        parameterHints: {\n            enabled: true,\n            cycle: false\n        },\n        formatOnType: false,\n        formatOnPaste: false,\n        suggestOnTriggerCharacters: true,\n        acceptSuggestionOnEnter: 'on',\n        acceptSuggestionOnCommitCharacter: true,\n        wordBasedSuggestions: true,\n        suggestSelection: 'recentlyUsed',\n        suggestFontSize: 0,\n        suggestLineHeight: 0,\n        tabCompletion: 'off',\n        suggest: {\n            filterGraceful: true,\n            snippets: 'inline',\n            snippetsPreventQuickSuggestions: true,\n            localityBonus: false,\n            shareSuggestSelections: false,\n            showIcons: true,\n            maxVisibleSuggestions: 12,\n            filteredTypes: Object.create(null)\n        },\n        gotoLocation: {\n            multiple: 'peek'\n        },\n        selectionHighlight: true,\n        occurrencesHighlight: true,\n        codeLens: true,\n        folding: true,\n        foldingStrategy: 'auto',\n        showFoldingControls: 'mouseover',\n        matchBrackets: true,\n        find: {\n            seedSearchStringFromSelection: true,\n            autoFindInSelection: false,\n            globalFindClipboard: false,\n            addExtraSpaceOnTop: true\n        },\n        colorDecorators: true,\n        lightbulbEnabled: true,\n        codeActionsOnSave: {},\n        codeActionsOnSaveTimeout: 750\n    },\n};\n/* eslint-enable no-null/no-null */\n\n/* eslint-disable max-len */\n// should be in sync with https://github.com/TypeFox/vscode/blob/70b8db24a37fafc77247de7f7cb5bb0195120ed0/src/vs/editor/common/config/commonEditorConfig.ts#L232\n// 1. Copy\n// 2. Find -> Use Regular Expressions -> nls\\.localize\\(.*, \"(.*)\"\\) -> \"$1\"\n// 3. Find -> Use Regular Expressions -> nls\\.localize\\(.*, '(.*)'\\) -> '$1'\n// 4. Apply `quotemark` quick fixes\n// 5. Fix the rest manually\nconst codeEditorPreferenceProperties = {\n    'editor.fontFamily': {\n        'type': 'string',\n        'default': EDITOR_FONT_DEFAULTS.fontFamily,\n        'description': 'Controls the font family.'\n    },\n    'editor.fontWeight': {\n        'type': 'string',\n        'enum': ['normal', 'bold', '100', '200', '300', '400', '500', '600', '700', '800', '900'],\n        'default': EDITOR_FONT_DEFAULTS.fontWeight,\n        'description': 'Controls the font weight.'\n    },\n    'editor.fontSize': {\n        'type': 'number',\n        'default': EDITOR_FONT_DEFAULTS.fontSize,\n        'description': 'Controls the font size in pixels.'\n    },\n    'editor.lineHeight': {\n        'type': 'number',\n        'default': EDITOR_FONT_DEFAULTS.lineHeight,\n        'description': 'Controls the line height. Use 0 to compute the line height from the font size.'\n    },\n    'editor.letterSpacing': {\n        'type': 'number',\n        'default': EDITOR_FONT_DEFAULTS.letterSpacing,\n        'description': 'Controls the letter spacing in pixels.'\n    },\n    'editor.lineNumbers': {\n        'type': 'string',\n        'enum': ['off', 'on', 'relative', 'interval'],\n        'enumDescriptions': [\n            'Line numbers are not rendered.',\n            'Line numbers are rendered as absolute number.',\n            'Line numbers are rendered as distance in lines to cursor position.',\n            'Line numbers are rendered every 10 lines.'\n        ],\n        'default': 'on',\n        'description': 'Controls the display of line numbers.'\n    },\n    'editor.cursorSurroundingLines': {\n        'type': 'number',\n        'default': EDITOR_DEFAULTS.viewInfo.cursorSurroundingLines,\n        'description': \"Controls the minimal number of visible leading and trailing lines surrounding the cursor. Known as 'scrollOff' or `scrollOffset` in some other editors.\"\n    },\n    'editor.renderFinalNewline': {\n        'type': 'boolean',\n        'default': EDITOR_DEFAULTS.viewInfo.renderFinalNewline,\n        'description': 'Render last line number when the file ends with a newline.'\n    },\n    'editor.rulers': {\n        'type': 'array',\n        'items': {\n            'type': 'number'\n        },\n        'default': EDITOR_DEFAULTS.viewInfo.rulers,\n        'description': 'Render vertical rulers after a certain number of monospace characters. Use multiple values for multiple rulers. No rulers are drawn if array is empty.'\n    },\n    'editor.wordSeparators': {\n        'type': 'string',\n        'default': EDITOR_DEFAULTS.wordSeparators,\n        'description': 'Characters that will be used as word separators when doing word related navigations or operations.'\n    },\n    'editor.tabSize': {\n        'type': 'number',\n        'default': EDITOR_MODEL_DEFAULTS.tabSize,\n        'minimum': 1,\n        'markdownDescription': 'The number of spaces a tab is equal to. This setting is overridden based on the file contents when `#editor.detectIndentation#` is on.'\n    },\n    'editor.insertSpaces': {\n        'type': 'boolean',\n        'default': EDITOR_MODEL_DEFAULTS.insertSpaces,\n        'markdownDescription': 'Insert spaces when pressing `Tab`. This setting is overridden based on the file contents when `#editor.detectIndentation#` is on.'\n    },\n    'editor.detectIndentation': {\n        'type': 'boolean',\n        'default': EDITOR_MODEL_DEFAULTS.detectIndentation,\n        'markdownDescription': 'Controls whether `#editor.tabSize#` and `#editor.insertSpaces#` will be automatically detected when a file is opened based on the file contents.'\n    },\n    'editor.roundedSelection': {\n        'type': 'boolean',\n        'default': EDITOR_DEFAULTS.viewInfo.roundedSelection,\n        'description': 'Controls whether selections should have rounded corners.'\n    },\n    'editor.scrollBeyondLastLine': {\n        'type': 'boolean',\n        'default': EDITOR_DEFAULTS.viewInfo.scrollBeyondLastLine,\n        'description': 'Controls whether the editor will scroll beyond the last line.'\n    },\n    'editor.scrollBeyondLastColumn': {\n        'type': 'number',\n        'default': EDITOR_DEFAULTS.viewInfo.scrollBeyondLastColumn,\n        'description': 'Controls the number of extra characters beyond which the editor will scroll horizontally.'\n    },\n    'editor.smoothScrolling': {\n        'type': 'boolean',\n        'default': EDITOR_DEFAULTS.viewInfo.smoothScrolling,\n        'description': 'Controls whether the editor will scroll using an animation.'\n    },\n    'editor.minimap.enabled': {\n        'type': 'boolean',\n        'default': EDITOR_DEFAULTS.viewInfo.minimap.enabled,\n        'description': 'Controls whether the minimap is shown.'\n    },\n    'editor.minimap.side': {\n        'type': 'string',\n        'enum': ['left', 'right'],\n        'default': EDITOR_DEFAULTS.viewInfo.minimap.side,\n        'description': 'Controls the side where to render the minimap.'\n    },\n    'editor.minimap.showSlider': {\n        'type': 'string',\n        'enum': ['always', 'mouseover'],\n        'default': EDITOR_DEFAULTS.viewInfo.minimap.showSlider,\n        'description': 'Controls whether the minimap slider is automatically hidden.'\n    },\n    'editor.minimap.renderCharacters': {\n        'type': 'boolean',\n        'default': EDITOR_DEFAULTS.viewInfo.minimap.renderCharacters,\n        'description': 'Render the actual characters on a line as opposed to color blocks.'\n    },\n    'editor.minimap.maxColumn': {\n        'type': 'number',\n        'default': EDITOR_DEFAULTS.viewInfo.minimap.maxColumn,\n        'description': 'Limit the width of the minimap to render at most a certain number of columns.'\n    },\n    'editor.hover.enabled': {\n        'type': 'boolean',\n        'default': EDITOR_DEFAULTS.contribInfo.hover.enabled,\n        'description': 'Controls whether the hover is shown.'\n    },\n    'editor.hover.delay': {\n        'type': 'number',\n        'default': EDITOR_DEFAULTS.contribInfo.hover.delay,\n        'description': 'Controls the delay in milliseconds after which the hover is shown.'\n    },\n    'editor.hover.sticky': {\n        'type': 'boolean',\n        'default': EDITOR_DEFAULTS.contribInfo.hover.sticky,\n        'description': 'Controls whether the hover should remain visible when mouse is moved over it.'\n    },\n    'editor.find.seedSearchStringFromSelection': {\n        'type': 'boolean',\n        'default': EDITOR_DEFAULTS.contribInfo.find.seedSearchStringFromSelection,\n        'description': 'Controls whether the search string in the Find Widget is seeded from the editor selection.'\n    },\n    'editor.find.autoFindInSelection': {\n        'type': 'boolean',\n        'default': EDITOR_DEFAULTS.contribInfo.find.autoFindInSelection,\n        'description': 'Controls whether the find operation is carried out on selected text or the entire file in the editor.'\n    },\n    'editor.find.globalFindClipboard': {\n        'type': 'boolean',\n        'default': EDITOR_DEFAULTS.contribInfo.find.globalFindClipboard,\n        'description': 'Controls whether the Find Widget should read or modify the shared find clipboard on macOS.',\n        'included': platform.isMacintosh\n    },\n    'editor.find.addExtraSpaceOnTop': {\n        'type': 'boolean',\n        'default': true,\n        'description': 'Controls whether the Find Widget should add extra lines on top of the editor. When true, you can scroll beyond the first line when the Find Widget is visible.'\n    },\n    'editor.wordWrap': {\n        'type': 'string',\n        'enum': ['off', 'on', 'wordWrapColumn', 'bounded'],\n        'markdownEnumDescriptions': [\n            'Lines will never wrap.',\n            'Lines will wrap at the viewport width.',\n            'Lines will wrap at `#editor.wordWrapColumn#`.',\n            'Lines will wrap at the minimum of viewport and `#editor.wordWrapColumn#`.',\n        ],\n        'default': EDITOR_DEFAULTS.wordWrap,\n        'description': 'Controls how lines should wrap.'\n    },\n    'editor.wordWrapColumn': {\n        'type': 'integer',\n        'default': EDITOR_DEFAULTS.wordWrapColumn,\n        'minimum': 1,\n        'markdownDescription': 'Controls the wrapping column of the editor when `#editor.wordWrap#` is `wordWrapColumn` or `bounded`.'\n    },\n    'editor.wrappingIndent': {\n        'type': 'string',\n        'enum': ['none', 'same', 'indent', 'deepIndent'],\n        enumDescriptions: [\n            'No indentation. Wrapped lines begin at column 1.',\n            'Wrapped lines get the same indentation as the parent.',\n            'Wrapped lines get +1 indentation toward the parent.',\n            'Wrapped lines get +2 indentation toward the parent.',\n        ],\n        'default': 'same',\n        'description': 'Controls the indentation of wrapped lines.',\n    },\n    'editor.mouseWheelScrollSensitivity': {\n        'type': 'number',\n        'default': EDITOR_DEFAULTS.viewInfo.scrollbar.mouseWheelScrollSensitivity,\n        'markdownDescription': 'A multiplier to be used on the `deltaX` and `deltaY` of mouse wheel scroll events.'\n    },\n    'editor.fastScrollSensitivity': {\n        'type': 'number',\n        'default': EDITOR_DEFAULTS.viewInfo.scrollbar.fastScrollSensitivity,\n        'markdownDescription': 'Scrolling speed multiplier when pressing `Alt`.'\n    },\n    'editor.multiCursorModifier': {\n        'type': 'string',\n        'enum': ['ctrlCmd', 'alt'],\n        'markdownEnumDescriptions': [\n            'Maps to `Control` on Windows and Linux and to `Command` on macOS.',\n            'Maps to `Alt` on Windows and Linux and to `Option` on macOS.'\n        ],\n        'default': 'alt',\n        'markdownDescription': 'The modifier to be used to add multiple cursors with the mouse. The Go To Definition and Open Link mouse gestures will adapt such that they do not conflict with the multicursor modifier. [Read more](https://code.visualstudio.com/docs/editor/codebasics#_multicursor-modifier).'\n    },\n    'editor.multiCursorMergeOverlapping': {\n        'type': 'boolean',\n        'default': EDITOR_DEFAULTS.multiCursorMergeOverlapping,\n        'description': 'Merge multiple cursors when they are overlapping.'\n    },\n    'editor.quickSuggestions': {\n        'anyOf': [\n            {\n                type: 'boolean',\n            },\n            {\n                type: 'object',\n                properties: {\n                    strings: {\n                        type: 'boolean',\n                        default: false,\n                        description: 'Enable quick suggestions inside strings.'\n                    },\n                    comments: {\n                        type: 'boolean',\n                        default: false,\n                        description: 'Enable quick suggestions inside comments.'\n                    },\n                    other: {\n                        type: 'boolean',\n                        default: true,\n                        description: 'Enable quick suggestions outside of strings and comments.'\n                    },\n                }\n            }\n        ],\n        'default': EDITOR_DEFAULTS.contribInfo.quickSuggestions,\n        'description': 'Controls whether suggestions should automatically show up while typing.'\n    },\n    'editor.quickSuggestionsDelay': {\n        'type': 'integer',\n        'default': EDITOR_DEFAULTS.contribInfo.quickSuggestionsDelay,\n        'minimum': 0,\n        'description': 'Controls the delay in milliseconds after which quick suggestions will show up.'\n    },\n    'editor.parameterHints.enabled': {\n        'type': 'boolean',\n        'default': EDITOR_DEFAULTS.contribInfo.parameterHints.enabled,\n        'description': 'Enables a pop-up that shows parameter documentation and type information as you type.'\n    },\n    'editor.parameterHints.cycle': {\n        'type': 'boolean',\n        'default': EDITOR_DEFAULTS.contribInfo.parameterHints.cycle,\n        'description': 'Controls whether the parameter hints menu cycles or closes when reaching the end of the list.'\n    },\n    'editor.autoClosingBrackets': {\n        type: 'string',\n        enum: ['always', 'languageDefined', 'beforeWhitespace', 'never'],\n        enumDescriptions: [\n            '',\n            'Use language configurations to determine when to autoclose brackets.',\n            'Autoclose brackets only when the cursor is to the left of whitespace.',\n            '',\n\n        ],\n        'default': EDITOR_DEFAULTS.autoClosingBrackets,\n        'description': 'Controls whether the editor should automatically close brackets after the user adds an opening bracket.'\n    },\n    'editor.autoClosingQuotes': {\n        type: 'string',\n        enum: ['always', 'languageDefined', 'beforeWhitespace', 'never'],\n        enumDescriptions: [\n            '',\n            'Use language configurations to determine when to autoclose quotes.',\n            'Autoclose quotes only when the cursor is to the left of whitespace.',\n            '',\n        ],\n        'default': EDITOR_DEFAULTS.autoClosingQuotes,\n        'description': 'Controls whether the editor should automatically close quotes after the user adds an opening quote.'\n    },\n    'editor.autoSurround': {\n        type: 'string',\n        enum: ['languageDefined', 'brackets', 'quotes', 'never'],\n        enumDescriptions: [\n            'Use language configurations to determine when to automatically surround selections.',\n            'Surround with brackets but not quotes.',\n            'Surround with quotes but not brackets.',\n            ''\n        ],\n        'default': EDITOR_DEFAULTS.autoSurround,\n        'description': 'Controls whether the editor should automatically surround selections.'\n    },\n    'editor.formatOnType': {\n        'type': 'boolean',\n        'default': EDITOR_DEFAULTS.contribInfo.formatOnType,\n        'description': 'Controls whether the editor should automatically format the line after typing.'\n    },\n    'editor.formatOnPaste': {\n        'type': 'boolean',\n        'default': EDITOR_DEFAULTS.contribInfo.formatOnPaste,\n        'description': 'Controls whether the editor should automatically format the pasted content. A formatter must be available and the formatter should be able to format a range in a document.'\n    },\n    'editor.autoIndent': {\n        'type': 'boolean',\n        'default': EDITOR_DEFAULTS.autoIndent,\n        'description': 'Controls whether the editor should automatically adjust the indentation when users type, paste or move lines. Extensions with indentation rules of the language must be available.'\n    },\n    'editor.suggestOnTriggerCharacters': {\n        'type': 'boolean',\n        'default': EDITOR_DEFAULTS.contribInfo.suggestOnTriggerCharacters,\n        'description': 'Controls whether suggestions should automatically show up when typing trigger characters.'\n    },\n    'editor.acceptSuggestionOnEnter': {\n        'type': 'string',\n        'enum': ['on', 'smart', 'off'],\n        'default': EDITOR_DEFAULTS.contribInfo.acceptSuggestionOnEnter,\n        'markdownEnumDescriptions': [\n            '',\n            'Only accept a suggestion with `Enter` when it makes a textual change.',\n            ''\n        ],\n        'markdownDescription': 'Controls whether suggestions should be accepted on `Enter`, in addition to `Tab`. Helps to avoid ambiguity between inserting new lines or accepting suggestions.'\n    },\n    'editor.acceptSuggestionOnCommitCharacter': {\n        'type': 'boolean',\n        'default': EDITOR_DEFAULTS.contribInfo.acceptSuggestionOnCommitCharacter,\n        'markdownDescription': 'Controls whether suggestions should be accepted on commit characters. For example, in JavaScript, the semi-colon (`;`) can be a commit character that accepts a suggestion and types that character.'\n    },\n    'editor.snippetSuggestions': {\n        'type': 'string',\n        'enum': ['top', 'bottom', 'inline', 'none'],\n        'enumDescriptions': [\n            'Show snippet suggestions on top of other suggestions.',\n            'Show snippet suggestions below other suggestions.',\n            'Show snippets suggestions with other suggestions.',\n            'Do not show snippet suggestions.',\n        ],\n        'default': EDITOR_DEFAULTS.contribInfo.suggest.snippets,\n        'description': 'Controls whether snippets are shown with other suggestions and how they are sorted.'\n    },\n    'editor.emptySelectionClipboard': {\n        'type': 'boolean',\n        'default': EDITOR_DEFAULTS.emptySelectionClipboard,\n        'description': 'Controls whether copying without a selection copies the current line.'\n    },\n    'editor.copyWithSyntaxHighlighting': {\n        'type': 'boolean',\n        'default': EDITOR_DEFAULTS.copyWithSyntaxHighlighting,\n        'description': 'Controls whether syntax highlighting should be copied into the clipboard.'\n    },\n    'editor.wordBasedSuggestions': {\n        'type': 'boolean',\n        'default': EDITOR_DEFAULTS.contribInfo.wordBasedSuggestions,\n        'description': 'Controls whether completions should be computed based on words in the document.'\n    },\n    'editor.suggestSelection': {\n        'type': 'string',\n        'enum': ['first', 'recentlyUsed', 'recentlyUsedByPrefix'],\n        'markdownEnumDescriptions': [\n            'Always select the first suggestion.',\n            'Select recent suggestions unless further typing selects one, e.g. `console.| -> console.log` because `log` has been completed recently.',\n            'Select suggestions based on previous prefixes that have completed those suggestions, e.g. `co -> console` and `con -> const`.',\n        ],\n        'default': 'recentlyUsed',\n        'description': 'Controls how suggestions are pre-selected when showing the suggest list.'\n    },\n    'editor.suggestFontSize': {\n        'type': 'integer',\n        'default': 0,\n        'minimum': 0,\n        'markdownDescription': 'Font size for the suggest widget. When set to `0`, the value of `#editor.fontSize#` is used.'\n    },\n    'editor.suggestLineHeight': {\n        'type': 'integer',\n        'default': 0,\n        'minimum': 0,\n        'markdownDescription': 'Line height for the suggest widget. When set to `0`, the value of `#editor.lineHeight#` is used.'\n    },\n    'editor.tabCompletion': {\n        type: 'string',\n        default: 'off',\n        enum: ['on', 'off', 'onlySnippets'],\n        enumDescriptions: [\n            'Tab complete will insert the best matching suggestion when pressing tab.',\n            'Disable tab completions.',\n            \"Tab complete snippets when their prefix match. Works best when 'quickSuggestions' aren't enabled.\",\n        ],\n        description: 'Enables tab completions.'\n    },\n    'editor.suggest.filterGraceful': {\n        type: 'boolean',\n        default: true,\n        description: 'Controls whether filtering and sorting suggestions accounts for small typos.'\n    },\n    'editor.suggest.localityBonus': {\n        type: 'boolean',\n        default: false,\n        description: 'Controls whether sorting favours words that appear close to the cursor.'\n    },\n    'editor.suggest.shareSuggestSelections': {\n        type: 'boolean',\n        default: false,\n        markdownDescription: 'Controls whether remembered suggestion selections are shared between multiple workspaces and windows (needs `#editor.suggestSelection#`).'\n    },\n    'editor.suggest.snippetsPreventQuickSuggestions': {\n        type: 'boolean',\n        default: true,\n        description: 'Control whether an active snippet prevents quick suggestions.'\n    },\n    'editor.suggest.showIcons': {\n        type: 'boolean',\n        default: EDITOR_DEFAULTS.contribInfo.suggest.showIcons,\n        description: 'Controls whether to show or hide icons in suggestions.'\n    },\n    'editor.suggest.maxVisibleSuggestions': {\n        type: 'number',\n        default: EDITOR_DEFAULTS.contribInfo.suggest.maxVisibleSuggestions,\n        minimum: 1,\n        maximum: 15,\n        description: 'Controls how many suggestions IntelliSense will show before showing a scrollbar (maximum 15).'\n    },\n    'editor.suggest.filteredTypes': {\n        type: 'object',\n        default: { keyword: true, snippet: true },\n        markdownDescription: 'Controls whether some suggestion types should be filtered from IntelliSense. A list of suggestion types can be found here: https://code.visualstudio.com/docs/editor/intellisense#_types-of-completions.',\n        properties: {\n            method: {\n                type: 'boolean',\n                default: true,\n                markdownDescription: 'When set to `false` IntelliSense never shows `method` suggestions.'\n            },\n            function: {\n                type: 'boolean',\n                default: true,\n                markdownDescription: 'When set to `false` IntelliSense never shows `function` suggestions.'\n            },\n            constructor: {\n                type: 'boolean',\n                default: true,\n                markdownDescription: 'When set to `false` IntelliSense never shows `constructor` suggestions.'\n            },\n            field: {\n                type: 'boolean',\n                default: true,\n                markdownDescription: 'When set to `false` IntelliSense never shows `field` suggestions.'\n            },\n            variable: {\n                type: 'boolean',\n                default: true,\n                markdownDescription: 'When set to `false` IntelliSense never shows `variable` suggestions.'\n            },\n            class: {\n                type: 'boolean',\n                default: true,\n                markdownDescription: 'When set to `false` IntelliSense never shows `class` suggestions.'\n            },\n            struct: {\n                type: 'boolean',\n                default: true,\n                markdownDescription: 'When set to `false` IntelliSense never shows `struct` suggestions.'\n            },\n            interface: {\n                type: 'boolean',\n                default: true,\n                markdownDescription: 'When set to `false` IntelliSense never shows `interface` suggestions.'\n            },\n            module: {\n                type: 'boolean',\n                default: true,\n                markdownDescription: 'When set to `false` IntelliSense never shows `module` suggestions.'\n            },\n            property: {\n                type: 'boolean',\n                default: true,\n                markdownDescription: 'When set to `false` IntelliSense never shows `property` suggestions.'\n            },\n            event: {\n                type: 'boolean',\n                default: true,\n                markdownDescription: 'When set to `false` IntelliSense never shows `event` suggestions.'\n            },\n            operator: {\n                type: 'boolean',\n                default: true,\n                markdownDescription: 'When set to `false` IntelliSense never shows `operator` suggestions.'\n            },\n            unit: {\n                type: 'boolean',\n                default: true,\n                markdownDescription: 'When set to `false` IntelliSense never shows `unit` suggestions.'\n            },\n            value: {\n                type: 'boolean',\n                default: true,\n                markdownDescription: 'When set to `false` IntelliSense never shows `value` suggestions.'\n            },\n            constant: {\n                type: 'boolean',\n                default: true,\n                markdownDescription: 'When set to `false` IntelliSense never shows `constant` suggestions.'\n            },\n            enum: {\n                type: 'boolean',\n                default: true,\n                markdownDescription: 'When set to `false` IntelliSense never shows `enum` suggestions.'\n            },\n            enumMember: {\n                type: 'boolean',\n                default: true,\n                markdownDescription: 'When set to `false` IntelliSense never shows `enumMember` suggestions.'\n            },\n            keyword: {\n                type: 'boolean',\n                default: true,\n                markdownDescription: 'When set to `false` IntelliSense never shows `keyword` suggestions.'\n            },\n            text: {\n                type: 'boolean',\n                default: true,\n                markdownDescription: 'When set to `false` IntelliSense never shows `text` suggestions.'\n            },\n            color: {\n                type: 'boolean',\n                default: true,\n                markdownDescription: 'When set to `false` IntelliSense never shows `color` suggestions.'\n            },\n            file: {\n                type: 'boolean',\n                default: true,\n                markdownDescription: 'When set to `false` IntelliSense never shows `file` suggestions.'\n            },\n            reference: {\n                type: 'boolean',\n                default: true,\n                markdownDescription: 'When set to `false` IntelliSense never shows `reference` suggestions.'\n            },\n            customcolor: {\n                type: 'boolean',\n                default: true,\n                markdownDescription: 'When set to `false` IntelliSense never shows `customcolor` suggestions.'\n            },\n            folder: {\n                type: 'boolean',\n                default: true,\n                markdownDescription: 'When set to `false` IntelliSense never shows `folder` suggestions.'\n            },\n            typeParameter: {\n                type: 'boolean',\n                default: true,\n                markdownDescription: 'When set to `false` IntelliSense never shows `typeParameter` suggestions.'\n            },\n            snippet: {\n                type: 'boolean',\n                default: true,\n                markdownDescription: 'When set to `false` IntelliSense never shows `snippet` suggestions.'\n            },\n        }\n    },\n    'editor.gotoLocation.multiple': {\n        description: \"Controls the behavior of 'Go To' commands, like Go To Definition, when multiple target locations exist.\",\n        type: 'string',\n        enum: ['peek', 'gotoAndPeek', 'goto'],\n        default: EDITOR_DEFAULTS.contribInfo.gotoLocation.multiple,\n        enumDescriptions: [\n            'Show peek view of the results (default)',\n            'Go to the primary result and show a peek view',\n            'Go to the primary result and enable peek-less navigation to others'\n        ]\n    },\n    'editor.selectionHighlight': {\n        'type': 'boolean',\n        'default': EDITOR_DEFAULTS.contribInfo.selectionHighlight,\n        'description': 'Controls whether the editor should highlight matches similar to the selection.'\n    },\n    'editor.occurrencesHighlight': {\n        'type': 'boolean',\n        'default': EDITOR_DEFAULTS.contribInfo.occurrencesHighlight,\n        'description': 'Controls whether the editor should highlight semantic symbol occurrences.'\n    },\n    'editor.overviewRulerLanes': {\n        'type': 'integer',\n        'default': 3,\n        'description': 'Controls the number of decorations that can show up at the same position in the overview ruler.'\n    },\n    'editor.overviewRulerBorder': {\n        'type': 'boolean',\n        'default': EDITOR_DEFAULTS.viewInfo.overviewRulerBorder,\n        'description': 'Controls whether a border should be drawn around the overview ruler.'\n    },\n    'editor.cursorBlinking': {\n        'type': 'string',\n        'enum': ['blink', 'smooth', 'phase', 'expand', 'solid'],\n        'default': 'blink',\n        'description': 'Control the cursor animation style.'\n    },\n    'editor.mouseWheelZoom': {\n        'type': 'boolean',\n        'default': EDITOR_DEFAULTS.viewInfo.mouseWheelZoom,\n        'markdownDescription': 'Zoom the font of the editor when using mouse wheel and holding `Ctrl`.'\n    },\n    'editor.cursorSmoothCaretAnimation': {\n        'type': 'boolean',\n        'default': EDITOR_DEFAULTS.viewInfo.cursorSmoothCaretAnimation,\n        'description': 'Controls whether the smooth caret animation should be enabled.'\n    },\n    'editor.cursorStyle': {\n        'type': 'string',\n        'enum': ['block', 'block-outline', 'line', 'line-thin', 'underline', 'underline-thin'],\n        'default': 'line',\n        'description': 'Controls the cursor style.'\n    },\n    'editor.cursorWidth': {\n        'type': 'integer',\n        'default': EDITOR_DEFAULTS.viewInfo.cursorWidth,\n        'markdownDescription': 'Controls the width of the cursor when `#editor.cursorStyle#` is set to `line`.'\n    },\n    'editor.fontLigatures': {\n        'type': 'boolean',\n        'default': EDITOR_DEFAULTS.viewInfo.fontLigatures,\n        'description': 'Enables/Disables font ligatures.'\n    },\n    'editor.hideCursorInOverviewRuler': {\n        'type': 'boolean',\n        'default': EDITOR_DEFAULTS.viewInfo.hideCursorInOverviewRuler,\n        'description': 'Controls whether the cursor should be hidden in the overview ruler.'\n    },\n    'editor.renderWhitespace': {\n        'type': 'string',\n        'enum': ['none', 'boundary', 'selection', 'all'],\n        'enumDescriptions': [\n            '',\n            'Render whitespace characters except for single spaces between words.',\n            'Render whitespace characters only on selected text.',\n            ''\n        ],\n        default: EDITOR_DEFAULTS.viewInfo.renderWhitespace,\n        description: 'Controls how the editor should render whitespace characters.'\n    },\n    'editor.renderControlCharacters': {\n        'type': 'boolean',\n        default: EDITOR_DEFAULTS.viewInfo.renderControlCharacters,\n        description: 'Controls whether the editor should render control characters.'\n    },\n    'editor.renderIndentGuides': {\n        'type': 'boolean',\n        default: EDITOR_DEFAULTS.viewInfo.renderIndentGuides,\n        description: 'Controls whether the editor should render indent guides.'\n    },\n    'editor.highlightActiveIndentGuide': {\n        'type': 'boolean',\n        default: EDITOR_DEFAULTS.viewInfo.highlightActiveIndentGuide,\n        description: 'Controls whether the editor should highlight the active indent guide.'\n    },\n    'editor.renderLineHighlight': {\n        'type': 'string',\n        'enum': ['none', 'gutter', 'line', 'all'],\n        'enumDescriptions': [\n            '',\n            '',\n            '',\n            'Highlights both the gutter and the current line.',\n        ],\n        default: EDITOR_DEFAULTS.viewInfo.renderLineHighlight,\n        description: 'Controls how the editor should render the current line highlight.'\n    },\n    'editor.codeLens': {\n        'type': 'boolean',\n        'default': EDITOR_DEFAULTS.contribInfo.codeLens,\n        'description': 'Controls whether the editor shows CodeLens.'\n    },\n    'editor.folding': {\n        'type': 'boolean',\n        'default': EDITOR_DEFAULTS.contribInfo.folding,\n        'description': 'Controls whether the editor has code folding enabled.'\n    },\n    'editor.foldingStrategy': {\n        'type': 'string',\n        'enum': ['auto', 'indentation'],\n        'default': EDITOR_DEFAULTS.contribInfo.foldingStrategy,\n        'markdownDescription': 'Controls the strategy for computing folding ranges. `auto` uses a language specific folding strategy, if available. `indentation` uses the indentation based folding strategy.'\n    },\n    'editor.showFoldingControls': {\n        'type': 'string',\n        'enum': ['always', 'mouseover'],\n        'default': EDITOR_DEFAULTS.contribInfo.showFoldingControls,\n        'description': 'Controls whether the fold controls on the gutter are automatically hidden.'\n    },\n    'editor.matchBrackets': {\n        'type': 'boolean',\n        'default': EDITOR_DEFAULTS.contribInfo.matchBrackets,\n        'description': 'Highlight matching brackets when one of them is selected.'\n    },\n    'editor.glyphMargin': {\n        'type': 'boolean',\n        'default': EDITOR_DEFAULTS.viewInfo.glyphMargin,\n        'description': 'Controls whether the editor should render the vertical glyph margin. Glyph margin is mostly used for debugging.'\n    },\n    'editor.useTabStops': {\n        'type': 'boolean',\n        'default': EDITOR_DEFAULTS.useTabStops,\n        'description': 'Inserting and deleting whitespace follows tab stops.'\n    },\n    'editor.trimAutoWhitespace': {\n        'type': 'boolean',\n        'default': EDITOR_MODEL_DEFAULTS.trimAutoWhitespace,\n        'description': 'Remove trailing auto inserted whitespace.'\n    },\n    'editor.stablePeek': {\n        'type': 'boolean',\n        'default': false,\n        'markdownDescription': 'Keep peek editors open even when double clicking their content or when hitting `Escape`.'\n    },\n    'editor.dragAndDrop': {\n        'type': 'boolean',\n        'default': EDITOR_DEFAULTS.dragAndDrop,\n        'description': 'Controls whether the editor should allow moving selections via drag and drop.'\n    },\n    'editor.accessibilitySupport': {\n        'type': 'string',\n        'enum': ['auto', 'on', 'off'],\n        'enumDescriptions': [\n            'The editor will use platform APIs to detect when a Screen Reader is attached.',\n            'The editor will be permanently optimized for usage with a Screen Reader.',\n            'The editor will never be optimized for usage with a Screen Reader.',\n        ],\n        'default': EDITOR_DEFAULTS.accessibilitySupport,\n        'description': 'Controls whether the editor should run in a mode where it is optimized for screen readers.'\n    },\n    'editor.showUnused': {\n        'type': 'boolean',\n        'default': EDITOR_DEFAULTS.showUnused,\n        'description': 'Controls fading out of unused code.'\n    },\n    'editor.links': {\n        'type': 'boolean',\n        'default': EDITOR_DEFAULTS.contribInfo.links,\n        'description': 'Controls whether the editor should detect links and make them clickable.'\n    },\n    'editor.colorDecorators': {\n        'type': 'boolean',\n        'default': EDITOR_DEFAULTS.contribInfo.colorDecorators,\n        'description': 'Controls whether the editor should render the inline color decorators and color picker.'\n    },\n    'editor.lightbulb.enabled': {\n        'type': 'boolean',\n        'default': EDITOR_DEFAULTS.contribInfo.lightbulbEnabled,\n        'description': 'Enables the code action lightbulb in the editor.'\n    },\n    'editor.maxTokenizationLineLength': {\n        'type': 'integer',\n        'default': 20_000,\n        'description': 'Lines above this length will not be tokenized for performance reasons'\n    },\n    'editor.codeActionsOnSave': {\n        'type': 'object',\n        'properties': {\n            'source.organizeImports': {\n                'type': 'boolean',\n                'description': 'Controls whether organize imports action should be run on file save.'\n            },\n            'source.fixAll': {\n                'type': 'boolean',\n                'description': 'Controls whether auto fix action should be run on file save.'\n            }\n        },\n        'additionalProperties': {\n            'type': 'boolean'\n        },\n        'default': EDITOR_DEFAULTS.contribInfo.codeActionsOnSave,\n        'description': 'Code action kinds to be run on save.'\n    },\n    'editor.codeActionsOnSaveTimeout': {\n        'type': 'number',\n        'default': EDITOR_DEFAULTS.contribInfo.codeActionsOnSaveTimeout,\n        'description': 'Timeout in milliseconds after which the code actions that are run on save are cancelled.'\n    },\n    'editor.selectionClipboard': {\n        'type': 'boolean',\n        'default': EDITOR_DEFAULTS.contribInfo.selectionClipboard,\n        'description': 'Controls whether the Linux primary clipboard should be supported.',\n        'included': platform.isLinux\n    },\n    'diffEditor.renderSideBySide': {\n        'type': 'boolean',\n        'default': true,\n        'description': 'Controls whether the diff editor shows the diff side by side or inline.'\n    },\n    'diffEditor.ignoreTrimWhitespace': {\n        'type': 'boolean',\n        'default': true,\n        'description': 'Controls whether the diff editor shows changes in leading or trailing whitespace as diffs.'\n    },\n    'editor.largeFileOptimizations': {\n        'type': 'boolean',\n        'default': EDITOR_MODEL_DEFAULTS.largeFileOptimizations,\n        'description': 'Special handling for large files to disable certain memory intensive features.'\n    },\n    'diffEditor.renderIndicators': {\n        'type': 'boolean',\n        'default': true,\n        'description': 'Controls whether the diff editor shows +/- indicators for added/removed changes.'\n    }\n};\n/* eslint-enable max-len */\n\nexport const editorPreferenceSchema: PreferenceSchema = {\n    'type': 'object',\n    'scope': 'resource',\n    'overridable': true,\n    'properties': {\n        ...(<PreferenceSchemaProperties>codeEditorPreferenceProperties),\n        'editor.autoSave': {\n            'enum': [\n                'on',\n                'off'\n            ],\n            'default': 'off',\n            'description': 'Controls auto save of dirty files.',\n            overridable: false\n        },\n        'editor.autoSaveDelay': {\n            'type': 'number',\n            'default': 500,\n            'description': 'Configure the auto save delay in milliseconds.',\n            overridable: false\n        },\n        'editor.formatOnSave': {\n            'type': 'boolean',\n            'default': false,\n            'description': 'Enable format on manual save.'\n        },\n        'editor.formatOnSaveTimeout': {\n            'type': 'number',\n            'default': 750,\n            'description': 'Timeout in milliseconds after which the formatting that is run on file save is cancelled.'\n        },\n        'files.eol': {\n            'type': 'string',\n            'enum': [\n                '\\n',\n                '\\r\\n',\n                'auto'\n            ],\n            'enumDescriptions': [\n                'LF',\n                'CRLF',\n                'Uses operating system specific end of line character.'\n            ],\n            'default': 'auto',\n            'description': 'The default end of line character.'\n        },\n        'files.encoding': {\n            'enum': Object.keys(SUPPORTED_ENCODINGS).sort(),\n            'default': 'utf8',\n            'description': 'The default character set encoding to use when reading and writing files.'\n        }\n    }\n};\n\ntype CodeEditorPreferenceProperties = typeof codeEditorPreferenceProperties;\nexport type CodeEditorConfiguration = {\n    [P in keyof CodeEditorPreferenceProperties]:\n    CodeEditorPreferenceProperties[P] extends { enum: string[] } ?\n    CodeEditorPreferenceProperties[P]['enum'][number] : // eslint-disable-line @typescript-eslint/indent\n    CodeEditorPreferenceProperties[P]['default']; // eslint-disable-line @typescript-eslint/indent\n};\n\nexport interface EditorConfiguration extends CodeEditorConfiguration {\n    'editor.autoSave': 'on' | 'off'\n    'editor.autoSaveDelay': number\n    'editor.formatOnSave': boolean\n    'editor.formatOnSaveTimeout': number\n    'files.eol': EndOfLinePreference\n    'files.encoding': string\n}\nexport type EndOfLinePreference = '\\n' | '\\r\\n' | 'auto';\n\nexport type EditorPreferenceChange = PreferenceChangeEvent<EditorConfiguration>;\n\nexport const EditorPreferences = Symbol('EditorPreferences');\nexport type EditorPreferences = PreferenceProxy<EditorConfiguration>;\n\nexport function createEditorPreferences(preferences: PreferenceService): EditorPreferences {\n    return createPreferenceProxy(preferences, editorPreferenceSchema);\n}\n\nexport function bindEditorPreferences(bind: interfaces.Bind): void {\n    bind(EditorPreferences).toDynamicValue(ctx => {\n        const preferences = ctx.container.get<PreferenceService>(PreferenceService);\n        return createEditorPreferences(preferences);\n    }).inSingletonScope();\n\n    bind(PreferenceContribution).toConstantValue({ schema: editorPreferenceSchema });\n}\n","/********************************************************************************\n * Copyright (C) 2019 Ericsson and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { inject, injectable } from 'inversify';\nimport {\n    QuickOpenModel, QuickOpenItem, QuickOpenMode, PrefixQuickOpenService,\n    OpenerService, QuickOpenItemOptions,\n    QuickOpenHandler, QuickOpenOptions\n} from '@theia/core/lib/browser';\nimport URI from '@theia/core/lib/common/uri';\nimport { LabelProvider } from '@theia/core/lib/browser/label-provider';\nimport { EditorManager } from './editor-manager';\nimport { EditorWidget } from './editor-widget';\n\n@injectable()\nexport class EditorQuickOpenService implements QuickOpenModel, QuickOpenHandler {\n\n    @inject(OpenerService)\n    protected readonly openerService: OpenerService;\n\n    @inject(PrefixQuickOpenService)\n    protected readonly prefixQuickOpenService: PrefixQuickOpenService;\n\n    @inject(LabelProvider)\n    protected readonly labelProvider: LabelProvider;\n\n    @inject(EditorManager)\n    protected readonly editorManager: EditorManager;\n\n    readonly prefix: string = 'edt ';\n\n    get description(): string {\n        return 'Show All Opened Editors';\n    }\n\n    getModel(): QuickOpenModel {\n        return this;\n    }\n\n    getOptions(): QuickOpenOptions {\n        return {\n            fuzzyMatchLabel: {\n                enableSeparateSubstringMatching: true\n            },\n            fuzzyMatchDescription: {\n                enableSeparateSubstringMatching: true\n            }\n        };\n    }\n\n    open(): void {\n        this.prefixQuickOpenService.open(this.prefix);\n    }\n\n    onType(lookFor: string, acceptor: (items: QuickOpenItem[]) => void): void {\n        const editorItems: QuickOpenItem[] = [];\n\n        // Get the alphabetically sorted list of URIs of all currently opened editor widgets.\n        const widgets: URI[] = this.editorManager.all\n            .map((w: EditorWidget) => w.editor.uri)\n            .sort();\n\n        if (widgets.length === 0) {\n            editorItems.push(new QuickOpenItem({\n                label: 'List of opened editors is currently empty',\n                run: () => false\n            }));\n            acceptor(editorItems);\n            return;\n        }\n\n        for (const uri of widgets) {\n            const item = this.toItem(uri);\n            editorItems.push(item);\n            acceptor(editorItems);\n        }\n        return;\n    }\n\n    protected toItem(uri: URI): QuickOpenItem<QuickOpenItemOptions> {\n        const description = this.labelProvider.getLongName(uri.parent);\n        const icon = this.labelProvider.getIcon(uri);\n        const iconClass = icon === '' ? undefined : icon + ' file-icon';\n\n        const options: QuickOpenItemOptions = {\n            label: this.labelProvider.getName(uri),\n            iconClass,\n            description: description,\n            tooltip: uri.path.toString(),\n            uri: uri,\n            hidden: false,\n            run: this.getRunFunction(uri)\n        };\n        return new QuickOpenItem<QuickOpenItemOptions>(options);\n    }\n\n    /**\n     * Gets the function that can open the editor file\n     * @param uri the file uri\n     * @returns the function that opens the file if mode === QuickOpenMode.OPEN\n     */\n    protected getRunFunction(uri: URI): (mode: QuickOpenMode) => boolean {\n        return (mode: QuickOpenMode) => {\n            if (mode !== QuickOpenMode.OPEN) {\n                return false;\n            }\n            this.openFile(uri);\n            return true;\n        };\n    }\n\n    protected openFile(uri: URI): void {\n        this.openerService.getOpener(uri)\n            .then(opener => opener.open(uri));\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { injectable, inject } from 'inversify';\nimport { VariableRegistry, VariableContribution } from '@theia/variable-resolver/lib/browser';\nimport { TextEditor } from './editor';\nimport { EditorManager } from './editor-manager';\n\n@injectable()\nexport class EditorVariableContribution implements VariableContribution {\n\n    @inject(EditorManager)\n    protected readonly editorManager: EditorManager;\n\n    registerVariables(variables: VariableRegistry): void {\n        variables.registerVariable({\n            name: 'lineNumber',\n            description: 'The current line number in the currently opened file',\n            resolve: () => {\n                const editor = this.getCurrentEditor();\n                return editor ? `${editor.cursor.line + 1}` : undefined;\n            }\n        });\n        variables.registerVariable({\n            name: 'selectedText',\n            description: 'The current selected text in the active file',\n            resolve: () => {\n                const editor = this.getCurrentEditor();\n                return editor ? editor.document.getText(editor.selection) : undefined;\n            }\n        });\n    }\n\n    protected getCurrentEditor(): TextEditor | undefined {\n        const currentEditor = this.editorManager.currentEditor;\n        if (!currentEditor) {\n            return undefined;\n        }\n        return currentEditor.editor;\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { injectable, inject, } from 'inversify';\nimport URI from '@theia/core/lib/common/uri';\nimport { SelectionService } from '@theia/core/lib/common';\nimport { NavigatableWidgetOptions, WidgetFactory, LabelProvider } from '@theia/core/lib/browser';\nimport { EditorWidget } from './editor-widget';\nimport { TextEditorProvider } from './editor';\n\n@injectable()\nexport class EditorWidgetFactory implements WidgetFactory {\n\n    static ID = 'code-editor-opener';\n\n    readonly id = EditorWidgetFactory.ID;\n\n    @inject(LabelProvider)\n    protected readonly labelProvider: LabelProvider;\n\n    @inject(TextEditorProvider)\n    protected readonly editorProvider: TextEditorProvider;\n\n    @inject(SelectionService)\n    protected readonly selectionService: SelectionService;\n\n    createWidget(options: NavigatableWidgetOptions): Promise<EditorWidget> {\n        const uri = new URI(options.uri);\n        return this.createEditor(uri);\n    }\n\n    protected async createEditor(uri: URI): Promise<EditorWidget> {\n        const textEditor = await this.editorProvider(uri);\n        const newEditor = new EditorWidget(textEditor, this.selectionService);\n\n        this.setLabels(newEditor, uri);\n        const labelListener = this.labelProvider.onDidChange(event => {\n            if (event.affects(uri)) {\n                this.setLabels(newEditor, uri);\n            }\n        });\n        newEditor.onDispose(() => labelListener.dispose());\n\n        newEditor.id = this.id + ':' + uri.toString();\n        newEditor.title.closable = true;\n        newEditor.title.caption = uri.path.toString();\n        return newEditor;\n    }\n\n    private setLabels(editor: EditorWidget, uri: URI): void {\n        const icon = this.labelProvider.getIcon(uri);\n        editor.title.label = this.labelProvider.getName(uri);\n        editor.title.iconClass = icon + ' file-icon';\n\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2017 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { Disposable, SelectionService, Event } from '@theia/core/lib/common';\nimport { Widget, BaseWidget, Message, Saveable, SaveableSource, Navigatable, StatefulWidget } from '@theia/core/lib/browser';\nimport URI from '@theia/core/lib/common/uri';\nimport { TextEditor } from './editor';\n\nexport class EditorWidget extends BaseWidget implements SaveableSource, Navigatable, StatefulWidget {\n\n    constructor(\n        readonly editor: TextEditor,\n        protected readonly selectionService: SelectionService\n    ) {\n        super(editor);\n        this.toDispose.push(this.editor);\n        this.toDispose.push(this.editor.onSelectionChanged(() => {\n            if (this.editor.isFocused()) {\n                this.selectionService.selection = this.editor;\n            }\n        }));\n        this.toDispose.push(Disposable.create(() => {\n            if (this.selectionService.selection === this.editor) {\n                this.selectionService.selection = undefined;\n            }\n        }));\n    }\n\n    get saveable(): Saveable {\n        return this.editor.document;\n    }\n\n    getResourceUri(): URI | undefined {\n        return this.editor.getResourceUri();\n    }\n    createMoveToUri(resourceUri: URI): URI | undefined {\n        return this.editor.createMoveToUri(resourceUri);\n    }\n\n    protected onActivateRequest(msg: Message): void {\n        super.onActivateRequest(msg);\n        this.editor.focus();\n        this.selectionService.selection = this.editor;\n    }\n\n    protected onAfterAttach(msg: Message): void {\n        super.onAfterAttach(msg);\n        if (this.isVisible) {\n            this.editor.refresh();\n        }\n    }\n\n    protected onAfterShow(msg: Message): void {\n        super.onAfterShow(msg);\n        this.editor.refresh();\n    }\n\n    protected onResize(msg: Widget.ResizeMessage): void {\n        if (msg.width < 0 || msg.height < 0) {\n            this.editor.resizeToFit();\n        } else {\n            this.editor.setSize(msg);\n        }\n    }\n\n    storeState(): object {\n        return this.editor.storeViewState();\n    }\n\n    restoreState(oldState: object): void {\n        this.editor.restoreViewState(oldState);\n    }\n\n    get onDispose(): Event<void> {\n        return this.toDispose.onDispose;\n    }\n\n}\n","/********************************************************************************\n * Copyright (C) 2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { Position, Range, Location } from 'vscode-languageserver-types';\nimport * as lsp from 'vscode-languageserver-types';\nimport URI from '@theia/core/lib/common/uri';\nimport { Event, Disposable, TextDocumentContentChangeDelta } from '@theia/core/lib/common';\nimport { Saveable, Navigatable } from '@theia/core/lib/browser';\nimport { EditorDecoration } from './decorations';\n\nexport {\n    Position, Range, Location\n};\n\nexport const TextEditorProvider = Symbol('TextEditorProvider');\nexport type TextEditorProvider = (uri: URI) => Promise<TextEditor>;\n\nexport interface TextEditorDocument extends lsp.TextDocument, Saveable, Disposable {\n    getLineContent(lineNumber: number): string;\n    getLineMaxColumn(lineNumber: number): number;\n}\n\n// Refactoring\nexport { TextDocumentContentChangeDelta };\n\nexport interface TextDocumentChangeEvent {\n    readonly document: TextEditorDocument;\n    readonly contentChanges: TextDocumentContentChangeDelta[];\n}\n\n/**\n * Type of hit element with the mouse in the editor.\n * Copied from monaco editor.\n */\nexport enum MouseTargetType {\n    /**\n     * Mouse is on top of an unknown element.\n     */\n    UNKNOWN = 0,\n    /**\n     * Mouse is on top of the textarea used for input.\n     */\n    TEXTAREA = 1,\n    /**\n     * Mouse is on top of the glyph margin\n     */\n    GUTTER_GLYPH_MARGIN = 2,\n    /**\n     * Mouse is on top of the line numbers\n     */\n    GUTTER_LINE_NUMBERS = 3,\n    /**\n     * Mouse is on top of the line decorations\n     */\n    GUTTER_LINE_DECORATIONS = 4,\n    /**\n     * Mouse is on top of the whitespace left in the gutter by a view zone.\n     */\n    GUTTER_VIEW_ZONE = 5,\n    /**\n     * Mouse is on top of text in the content.\n     */\n    CONTENT_TEXT = 6,\n    /**\n     * Mouse is on top of empty space in the content (e.g. after line text or below last line)\n     */\n    CONTENT_EMPTY = 7,\n    /**\n     * Mouse is on top of a view zone in the content.\n     */\n    CONTENT_VIEW_ZONE = 8,\n    /**\n     * Mouse is on top of a content widget.\n     */\n    CONTENT_WIDGET = 9,\n    /**\n     * Mouse is on top of the decorations overview ruler.\n     */\n    OVERVIEW_RULER = 10,\n    /**\n     * Mouse is on top of a scrollbar.\n     */\n    SCROLLBAR = 11,\n    /**\n     * Mouse is on top of an overlay widget.\n     */\n    OVERLAY_WIDGET = 12,\n    /**\n     * Mouse is outside of the editor.\n     */\n    OUTSIDE_EDITOR = 13,\n}\n\nexport interface MouseTarget {\n    /**\n     * The target element\n     */\n    readonly element?: Element;\n    /**\n     * The target type\n     */\n    readonly type: MouseTargetType;\n    /**\n     * The 'approximate' editor position\n     */\n    readonly position?: Position;\n    /**\n     * Desired mouse column (e.g. when position.column gets clamped to text length -- clicking after text on a line).\n     */\n    readonly mouseColumn: number;\n    /**\n     * The 'approximate' editor range\n     */\n    readonly range?: Range;\n    /**\n     * Some extra detail.\n     */\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    readonly detail: any;\n}\n\nexport interface EditorMouseEvent {\n    readonly event: MouseEvent;\n    readonly target: MouseTarget;\n}\n\nexport const enum EncodingMode {\n\n    /**\n     * Instructs the encoding support to encode the current input with the provided encoding\n     */\n    Encode,\n\n    /**\n     * Instructs the encoding support to decode the current input with the provided encoding\n     */\n    Decode\n}\n\nexport interface TextEditor extends Disposable, TextEditorSelection, Navigatable {\n    readonly node: HTMLElement;\n\n    readonly uri: URI;\n    readonly document: TextEditorDocument;\n    readonly onDocumentContentChanged: Event<TextDocumentChangeEvent>;\n\n    cursor: Position;\n    readonly onCursorPositionChanged: Event<Position>;\n\n    selection: Range;\n    readonly onSelectionChanged: Event<Range>;\n\n    focus(): void;\n    blur(): void;\n    isFocused(): boolean;\n    readonly onFocusChanged: Event<boolean>;\n\n    readonly onMouseDown: Event<EditorMouseEvent>;\n\n    readonly onScrollChanged: Event<void>;\n    getVisibleRanges(): Range[];\n\n    revealPosition(position: Position, options?: RevealPositionOptions): void;\n    revealRange(range: Range, options?: RevealRangeOptions): void;\n\n    /**\n     * Rerender the editor.\n     */\n    refresh(): void;\n    /**\n     * Resize the editor to fit its node.\n     */\n    resizeToFit(): void;\n    setSize(size: Dimension): void;\n\n    /**\n     * Applies given new decorations, and removes old decorations identified by ids.\n     *\n     * @returns identifiers of applied decorations, which can be removed in next call.\n     */\n    deltaDecorations(params: DeltaDecorationParams): string[];\n\n    /**\n     * Gets all the decorations for the lines between `startLineNumber` and `endLineNumber` as an array.\n     * @param startLineNumber The start line number.\n     * @param endLineNumber The end line number.\n     * @return An array with the decorations.\n     */\n    getLinesDecorations(startLineNumber: number, endLineNumber: number): EditorDecoration[];\n\n    getVisibleColumn(position: Position): number;\n\n    /**\n     * Replaces the text of source given in ReplaceTextParams.\n     * @param params: ReplaceTextParams\n     */\n    replaceText(params: ReplaceTextParams): Promise<boolean>;\n\n    /**\n     * Execute edits on the editor.\n     * @param edits: edits created with `lsp.TextEdit.replace`, `lsp.TextEdit.insert`, `lsp.TextEdit.del`\n     */\n    executeEdits(edits: lsp.TextEdit[]): boolean;\n\n    storeViewState(): object;\n    restoreViewState(state: object): void;\n\n    detectLanguage(): void;\n    setLanguage(languageId: string): void;\n    readonly onLanguageChanged: Event<string>;\n\n    /**\n     * Gets the encoding of the input if known.\n     */\n    getEncoding(): string;\n\n    /**\n     * Sets the encoding for the input for saving.\n     */\n    setEncoding(encoding: string, mode: EncodingMode): void;\n\n    readonly onEncodingChanged: Event<string>;\n}\n\nexport interface Dimension {\n    width: number;\n    height: number;\n}\n\nexport interface TextEditorSelection {\n    uri: URI\n    cursor?: Position\n    selection?: Range\n}\n\nexport interface RevealPositionOptions {\n    vertical: 'auto' | 'center' | 'centerIfOutsideViewport';\n    horizontal?: boolean;\n}\n\nexport interface RevealRangeOptions {\n    at: 'auto' | 'center' | 'top' | 'centerIfOutsideViewport';\n}\n\nexport interface DeltaDecorationParams {\n    oldDecorations: string[];\n    newDecorations: EditorDecoration[];\n}\n\nexport interface ReplaceTextParams {\n    /**\n     * the source to edit\n     */\n    source: string;\n    /**\n     * the replace operations\n     */\n    replaceOperations: ReplaceOperation[];\n}\n\nexport interface ReplaceOperation {\n    /**\n     * the position that shall be replaced\n     */\n    range: Range;\n    /**\n     * the text to replace with\n     */\n    text: string;\n}\n\nexport namespace TextEditorSelection {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    export function is(e: any): e is TextEditorSelection {\n        return e && e['uri'] instanceof URI;\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nexport * from './diff-navigator';\nexport * from './editor';\nexport * from './editor-widget';\nexport * from './editor-manager';\nexport * from './editor-command';\nexport * from './editor-menu';\nexport * from './editor-keybinding-contexts';\nexport * from './editor-frontend-module';\nexport * from './editor-preferences';\nexport * from './decorations';\n","/********************************************************************************\n * Copyright (C) 2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { inject, injectable } from 'inversify';\nimport { ILogger } from '@theia/core/lib/common/logger';\nimport { OpenerService, OpenerOptions, open } from '@theia/core/lib/browser/opener-service';\nimport { EditorOpenerOptions } from '../editor-manager';\nimport { NavigationLocationUpdater } from './navigation-location-updater';\nimport { NavigationLocationSimilarity } from './navigation-location-similarity';\nimport { NavigationLocation, Range, ContentChangeLocation } from './navigation-location';\n\n/**\n * The navigation location service. Also, stores and manages navigation locations.\n */\n@injectable()\nexport class NavigationLocationService {\n\n    private static MAX_STACK_ITEMS = 30;\n\n    @inject(ILogger)\n    protected readonly logger: ILogger;\n\n    @inject(OpenerService)\n    protected readonly openerService: OpenerService;\n\n    @inject(NavigationLocationUpdater)\n    protected readonly updater: NavigationLocationUpdater;\n\n    @inject(NavigationLocationSimilarity)\n    protected readonly similarity: NavigationLocationSimilarity;\n\n    protected pointer = -1;\n    protected stack: NavigationLocation[] = [];\n    protected canRegister = true;\n    protected _lastEditLocation: ContentChangeLocation | undefined;\n\n    /**\n     * Registers the give locations into the service.\n     */\n    register(...locations: NavigationLocation[]): void {\n        if (this.canRegister) {\n            const max = this.maxStackItems();\n            [...locations].forEach(location => {\n                if (ContentChangeLocation.is(location)) {\n                    this._lastEditLocation = location;\n                }\n                const current = this.currentLocation();\n                this.debug(`Registering new location: ${NavigationLocation.toString(location)}.`);\n                if (!this.isSimilar(current, location)) {\n                    this.debug('Before location registration.');\n                    this.debug(this.stackDump);\n                    // Just like in VSCode; if we are not at the end of stack, we remove anything after.\n                    if (this.stack.length > this.pointer + 1) {\n                        this.debug(`Discarding all locations after ${this.pointer}.`);\n                        this.stack = this.stack.slice(0, this.pointer + 1);\n                    }\n                    this.stack.push(location);\n                    this.pointer = this.stack.length - 1;\n                    if (this.stack.length > max) {\n                        this.debug('Trimming exceeding locations.');\n                        this.stack.shift();\n                        this.pointer--;\n                    }\n                    this.debug('Updating preceding navigation locations.');\n                    for (let i = this.stack.length - 1; i >= 0; i--) {\n                        const candidate = this.stack[i];\n                        const update = this.updater.affects(candidate, location);\n                        if (update === undefined) {\n                            this.debug(`Erasing obsolete location: ${NavigationLocation.toString(candidate)}.`);\n                            this.stack.splice(i, 1);\n                            this.pointer--;\n                        } else if (typeof update !== 'boolean') {\n                            this.debug(`Updating location at index: ${i} => ${NavigationLocation.toString(candidate)}.`);\n                            this.stack[i] = update;\n                        }\n                    }\n                    this.debug('After location registration.');\n                    this.debug(this.stackDump);\n                } else {\n                    if (current) {\n                        this.debug(`The new location ${NavigationLocation.toString(location)} is similar to the current one: ${NavigationLocation.toString(current)}. Aborting.`);\n                    }\n                }\n            });\n        }\n    }\n\n    /**\n     * Navigates one back. Returns with the previous location, or `undefined` if it could not navigate back.\n     */\n    async back(): Promise<NavigationLocation | undefined> {\n        this.debug('Navigating back.');\n        if (this.canGoBack()) {\n            this.pointer--;\n            await this.reveal();\n            this.debug(this.stackDump);\n            return this.currentLocation();\n        }\n        this.debug('Cannot navigate back.');\n        return undefined;\n    }\n\n    /**\n     * Navigates one forward. Returns with the next location, or `undefined` if it could not go forward.\n     */\n    async forward(): Promise<NavigationLocation | undefined> {\n        this.debug('Navigating forward.');\n        if (this.canGoForward()) {\n            this.pointer++;\n            await this.reveal();\n            this.debug(this.stackDump);\n            return this.currentLocation();\n        }\n        this.debug('Cannot navigate forward.');\n        return undefined;\n    }\n\n    /**\n     * Checks whether the service can go [`back`](#back).\n     */\n    canGoBack(): boolean {\n        return this.pointer >= 1;\n    }\n\n    /**\n     * Checks whether the service can go [`forward`](#forward).\n     */\n    canGoForward(): boolean {\n        return this.pointer >= 0 && this.pointer !== this.stack.length - 1;\n    }\n\n    /**\n     * Returns with all known navigation locations in chronological order.\n     */\n    locations(): ReadonlyArray<NavigationLocation> {\n        return this.stack;\n    }\n\n    /**\n     * Returns with the current location.\n     */\n    currentLocation(): NavigationLocation | undefined {\n        return this.stack[this.pointer];\n    }\n\n    /**\n     * Returns with the location of the most recent edition if any. If there were no modifications,\n     * returns `undefined`.\n     */\n    lastEditLocation(): NavigationLocation | undefined {\n        return this._lastEditLocation;\n    }\n\n    /**\n     * Clears the navigation history.\n     */\n    clearHistory(): void {\n        this.stack = [];\n        this.pointer = -1;\n        this._lastEditLocation = undefined;\n    }\n\n    /**\n     * Reveals the location argument. If not given, reveals the `current location`. Does nothing, if the argument is `undefined`.\n     */\n    async reveal(location: NavigationLocation | undefined = this.currentLocation()): Promise<void> {\n        if (location === undefined) {\n            return;\n        }\n        try {\n            this.canRegister = false;\n            const { uri } = location;\n            const options = this.toOpenerOptions(location);\n            await open(this.openerService, uri, options);\n        } catch (e) {\n            this.logger.error(`Error occurred while revealing location: ${NavigationLocation.toString(location)}.`, e);\n        } finally {\n            this.canRegister = true;\n        }\n    }\n\n    /**\n     * `true` if the two locations are similar.\n     */\n    protected isSimilar(left: NavigationLocation | undefined, right: NavigationLocation | undefined): boolean {\n        return this.similarity.similar(left, right);\n    }\n\n    /**\n     * Returns with the number of navigation locations that the application can handle and manage.\n     * When the number of locations exceeds this number, old locations will be erased.\n     */\n    protected maxStackItems(): number {\n        return NavigationLocationService.MAX_STACK_ITEMS;\n    }\n\n    /**\n     * Returns with the opener option for the location argument.\n     */\n    protected toOpenerOptions(location: NavigationLocation): OpenerOptions {\n        let { start } = NavigationLocation.range(location);\n        // Here, the `start` and represents the previous state that has been updated with the `text`.\n        // So we calculate the range by appending the `text` length to the `start`.\n        if (ContentChangeLocation.is(location)) {\n            start = { ...start, character: start.character + location.context.text.length };\n        }\n        return {\n            selection: Range.create(start, start)\n        } as EditorOpenerOptions;\n    }\n\n    private async debug(message: string | (() => string)): Promise<void> {\n        this.logger.debug(typeof message === 'string' ? message : message());\n    }\n\n    private get stackDump(): string {\n        return `----- Navigation location stack [${new Date()}] -----\nPointer: ${this.pointer}\n${this.stack.map((location, i) => `${i}: ${JSON.stringify(NavigationLocation.toObject(location))}`).join('\\n')}\n----- o -----`;\n    }\n\n}\n","/********************************************************************************\n * Copyright (C) 2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { injectable } from 'inversify';\nimport { NavigationLocation } from './navigation-location';\n\n/**\n * Service for checking whether two navigation locations are similar or not.\n */\n@injectable()\nexport class NavigationLocationSimilarity {\n\n    /**\n     * The number of lines to move in the editor to justify for new state.\n     */\n    private static EDITOR_SELECTION_THRESHOLD = 10;\n\n    /**\n     * `true` if the `left` and `right` locations are withing +- 10 lines in the same editor. Otherwise, `false`.\n     */\n    similar(left: NavigationLocation | undefined, right: NavigationLocation | undefined): boolean {\n        if (left === undefined || right === undefined) {\n            return left === right;\n        }\n\n        if (left.uri.toString() !== right.uri.toString()) {\n            return false;\n        }\n\n        const leftRange = NavigationLocation.range(left);\n        const rightRange = NavigationLocation.range(right);\n        if (leftRange === undefined || rightRange === undefined) {\n            return leftRange === rightRange;\n        }\n\n        const leftLineNumber = Math.min(leftRange.start.line, leftRange.end.line);\n        const rightLineNumber = Math.min(rightRange.start.line, rightRange.end.line);\n        return Math.abs(leftLineNumber - rightLineNumber) < this.getThreshold();\n    }\n\n    protected getThreshold(): number {\n        return NavigationLocationSimilarity.EDITOR_SELECTION_THRESHOLD;\n    }\n\n}\n","/********************************************************************************\n * Copyright (C) 2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { injectable } from 'inversify';\nimport { NavigationLocation, ContentChangeLocation, CursorLocation, SelectionLocation, Position, Range } from './navigation-location';\n\n/**\n * A navigation location updater that is responsible for adapting editor navigation locations.\n *\n * 1. Inserting or deleting text before the position shifts the position accordingly.\n * 2. Inserting text at the position offset shifts the position accordingly.\n * 3. Inserting or deleting text strictly contained by the position shrinks or stretches the position.\n * 4. Inserting or deleting text after a position does not affect the position.\n * 5. Deleting text which strictly contains the position deletes the position.\n * Note that the position is not deleted if its only shrunken to length zero. To delete a position, the modification must delete from\n * strictly before to strictly after the position.\n * 6. Replacing text contained by the position shrinks or expands the position (but does not shift it), such that the final position\n * contains the original position and the replacing text.\n * 7. Replacing text overlapping the position in other ways is considered as a sequence of first deleting the replaced text and\n * afterwards inserting the new text. Thus, a position is shrunken and can then be shifted (if the replaced text overlaps the offset of the position).\n */\n@injectable()\nexport class NavigationLocationUpdater {\n\n    /**\n     * Checks whether `candidateLocation` has to be updated when applying `other`.\n     *  - `false` if the `other` does not affect the `candidateLocation`.\n     *  - A `NavigationLocation` object if the `candidateLocation` has to be replaced with the return value.\n     *  - `undefined` if the candidate has to be deleted.\n     *\n     * If the `otherLocation` is not a `ContentChangeLocation` or it does not contain any actual content changes, this method returns with `false`\n     */\n    affects(candidateLocation: NavigationLocation, otherLocation: NavigationLocation): false | NavigationLocation | undefined {\n        if (!ContentChangeLocation.is(otherLocation)) {\n            return false;\n        }\n        if (candidateLocation.uri.toString() !== otherLocation.uri.toString()) {\n            return false;\n        }\n\n        const candidate = NavigationLocation.range(candidateLocation);\n        const other = NavigationLocation.range(otherLocation);\n        if (candidate === undefined || other === undefined) {\n            return false;\n        }\n\n        const { uri, type } = candidateLocation;\n        const modification = otherLocation.context.text;\n        const newLineCount = modification.split(/[\\n\\r]/g).length - 1;\n\n        // Spec (1. and 2.)\n        if (other.end.line < candidate.start.line\n            || (other.end.line === candidate.start.line && other.end.character <= candidate.start.character)) {\n\n            // Shortcut for the general case. The user is typing above the candidate range. Nothing to do.\n            if (other.start.line === other.end.line && newLineCount === 0) {\n                return false;\n            }\n\n            const lineDiff = other.start.line - other.end.line + newLineCount;\n            let startCharacter = candidate.start.character;\n            let endCharacter = candidate.end.character;\n\n            if (other.start.line !== other.end.line) {\n                startCharacter = other.start.character + (candidate.start.character - other.end.character) + (modification.length - (modification.lastIndexOf('\\n') + 1));\n                endCharacter = candidate.start.line === candidate.end.line\n                    ? candidate.end.character + startCharacter - candidate.start.character\n                    : candidate.end.character;\n            }\n\n            const context = this.handleBefore(candidateLocation, other, lineDiff, startCharacter, endCharacter);\n            return {\n                uri,\n                type,\n                context\n            };\n        }\n\n        // Spec (3.,  5., and 6.)\n        if (this.contained(other, candidate)) {\n            const endLine = candidate.end.line - other.end.line + candidate.start.line + newLineCount;\n            let endCharacter = candidate.end.character - (other.end.character - other.start.character) + modification.length;\n\n            if (newLineCount > 0) {\n                if (candidate.end.line === other.end.line) {\n                    endCharacter = modification.length - (modification.lastIndexOf('\\n') + 1) + (candidate.end.character - other.end.character);\n                } else {\n                    endCharacter = endCharacter - 1;\n                }\n            }\n\n            const context = this.handleInside(candidateLocation, endLine, endCharacter);\n            return {\n                uri,\n                type,\n                context\n            };\n        }\n\n        // Spec (5.)\n        if (other.start.line === candidate.start.line && other.start.character === candidate.start.character\n            && (other.end.line > candidate.end.line || (other.end.line === candidate.end.line && other.end.character > candidate.end.character))) {\n            return undefined;\n        }\n\n        // Spec (4.)\n        if (candidate.end.line < other.start.line\n            || (candidate.end.line === other.start.line && candidate.end.character < other.end.character)) {\n            return false;\n        }\n\n        return false;\n    }\n\n    protected handleInside(candidate: NavigationLocation, endLine: number, endCharacter: number): NavigationLocation.Context {\n        if (CursorLocation.is(candidate)) {\n            throw new Error('Modifications are not allowed inside a cursor location.');\n        }\n        const { start } = NavigationLocation.range(candidate);\n        const range = {\n            start,\n            end: {\n                line: endLine,\n                character: endCharacter\n            }\n        };\n        if (SelectionLocation.is(candidate)) {\n            return range;\n        }\n        if (ContentChangeLocation.is(candidate)) {\n            const { rangeLength, text } = candidate.context;\n            return {\n                range,\n                rangeLength,\n                text\n            };\n        }\n        throw new Error(`Unexpected navigation location: ${NavigationLocation.toString(candidate)}.`);\n    }\n\n    protected handleBefore(candidate: NavigationLocation, modification: Range, lineDiff: number, startCharacter: number, endCharacter: number): NavigationLocation.Context {\n        let range = NavigationLocation.range(candidate);\n        range = this.shiftLine(range, lineDiff);\n        range = {\n            start: {\n                line: range.start.line,\n                character: startCharacter\n            },\n            end: {\n                line: range.end.line,\n                character: endCharacter\n            }\n        };\n        if (CursorLocation.is(candidate)) {\n            return range.start;\n        }\n        if (SelectionLocation.is(candidate)) {\n            return range;\n        }\n        if (ContentChangeLocation.is(candidate)) {\n            const { rangeLength, text } = candidate.context;\n            return {\n                range,\n                rangeLength,\n                text\n            };\n        }\n        throw new Error(`Unexpected navigation location: ${NavigationLocation.toString(candidate)}.`);\n    }\n\n    protected shiftLine(position: Position, diff: number): Position;\n    protected shiftLine(range: Range, diff: number): Range;\n    protected shiftLine(input: Position | Range, diff: number): Position | Range {\n        if (Position.is(input)) {\n            const { line, character } = input;\n            return {\n                line: line + diff,\n                character\n            };\n        }\n        const { start, end } = input;\n        return {\n            start: this.shiftLine(start, diff),\n            end: this.shiftLine(end, diff)\n        };\n    }\n\n    /**\n     * `true` if `subRange` is strictly contained in the `range`. Otherwise, `false`.\n     */\n    protected contained(subRange: Range, range: Range): boolean {\n        if (subRange.start.line > range.start.line && subRange.end.line < range.end.line) {\n            return true;\n        }\n        if (subRange.start.line < range.start.line || subRange.end.line > range.end.line) {\n            return false;\n        }\n        if (subRange.start.line === range.start.line && subRange.start.character < range.start.character) {\n            return false;\n        }\n        if (subRange.end.line === range.end.line && subRange.end.character > range.end.character) {\n            return false;\n        }\n        return true;\n    }\n\n}\n","/********************************************************************************\n * Copyright (C) 2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport URI from '@theia/core/lib/common/uri';\nimport { Position, Range, TextDocumentContentChangeDelta } from '../editor';\nexport { Position, Range };\n\nexport namespace NavigationLocation {\n\n    /**\n     * The navigation location type.\n     */\n    export enum Type {\n\n        /**\n         * Cursor position change type.\n         */\n        CURSOR,\n\n        /**\n         * Text selection change type.\n         */\n        SELECTION,\n\n        /**\n         * Content change type.\n         */\n        CONTENT_CHANGE\n\n    }\n\n    /**\n     * The type of the context for the navigation location.\n     */\n    export type Context = Position | Range | TextDocumentContentChangeDelta;\n\n    export namespace Context {\n\n        /**\n         * Returns with the type for the context.\n         */\n        export function getType(context: Context): Type {\n            if (Position.is(context)) {\n                return Type.CURSOR;\n            }\n            if (Range.is(context)) {\n                return Type.SELECTION;\n            }\n            if (TextDocumentContentChangeDelta.is(context)) {\n                return Type.CONTENT_CHANGE;\n            }\n            throw new Error(`Unexpected context for type: ${context}.`);\n        }\n\n    }\n\n}\n\n/**\n * Representation of a navigation location in a text editor.\n */\nexport interface NavigationLocation {\n\n    /**\n     * The URI of the resource opened in the editor.\n     */\n    readonly uri: URI;\n\n    /**\n     * The type of the navigation location.\n     */\n    readonly type: NavigationLocation.Type;\n\n    /**\n     * Context of the navigation location.\n     */\n    readonly context: NavigationLocation.Context;\n\n}\n\nexport namespace NavigationLocation {\n\n    /**\n     * Transforms the location into an object that can be safely serialized.\n     */\n    export function toObject(location: NavigationLocation): object {\n        const { uri, type } = location;\n        const context = (() => {\n            if (CursorLocation.is(location)) {\n                return CursorLocation.toObject(location.context);\n            }\n            if (SelectionLocation.is(location)) {\n                return SelectionLocation.toObject(location.context);\n            }\n            if (ContentChangeLocation.is(location)) {\n                return ContentChangeLocation.toObject(location.context);\n            }\n        })();\n        return {\n            uri: uri.toString(),\n            type,\n            context\n        };\n    }\n\n    /**\n     * Returns with the navigation location object from its serialized counterpart.\n     */\n    export function fromObject(object: Partial<NavigationLocation>): NavigationLocation | undefined {\n        const { uri, type } = object;\n        if (uri !== undefined && type !== undefined && object.context !== undefined) {\n            const context = (() => {\n                switch (type) {\n                    case NavigationLocation.Type.CURSOR: return CursorLocation.fromObject(object.context as Position);\n                    case NavigationLocation.Type.SELECTION: return SelectionLocation.fromObject(object.context as Range);\n                    case NavigationLocation.Type.CONTENT_CHANGE: return ContentChangeLocation.fromObject(object.context as TextDocumentContentChangeDelta);\n                }\n            })();\n            if (context) {\n                return {\n                    uri: toUri(uri),\n                    context,\n                    type\n                };\n            }\n        }\n        return undefined;\n    }\n\n    /**\n     * Returns with the context of the location as a `Range`.\n     */\n    export function range(location: NavigationLocation): Range {\n        if (CursorLocation.is(location)) {\n            return Range.create(location.context, location.context);\n        }\n        if (SelectionLocation.is(location)) {\n            return location.context;\n        }\n        if (ContentChangeLocation.is(location)) {\n            return location.context.range;\n        }\n        throw new Error(`Unexpected navigation location: ${location}.`);\n    }\n\n    /**\n     * Creates a new cursor location.\n     */\n    export function create(uri: URI | { uri: URI } | string, context: Position): CursorLocation;\n\n    /**\n     * Creates a new selection location.\n     */\n    export function create(uri: URI | { uri: URI } | string, context: Range): SelectionLocation;\n\n    /**\n     * Creates a new text content change location type.\n     */\n    export function create(uri: URI | { uri: URI } | string, context: TextDocumentContentChangeDelta): ContentChangeLocation;\n\n    /**\n     * Creates a new navigation location object.\n     */\n    export function create(uri: URI | { uri: URI } | string, context: NavigationLocation.Context): NavigationLocation {\n        const type = NavigationLocation.Context.getType(context);\n        return {\n            uri: toUri(uri),\n            type,\n            context\n        };\n    }\n\n    /**\n     * Returns with the human-consumable (JSON) string representation of the location argument.\n     */\n    export function toString(location: NavigationLocation): string {\n        return JSON.stringify(toObject(location));\n    }\n\n    function toUri(arg: URI | { uri: URI } | string): URI {\n        if (arg instanceof URI) {\n            return arg;\n        }\n        if (typeof arg === 'string') {\n            return new URI(arg);\n        }\n        return arg.uri;\n    }\n\n}\n\n/**\n * Navigation location representing the cursor location change.\n */\nexport interface CursorLocation extends NavigationLocation {\n\n    /**\n     * The type is always `cursor`.\n     */\n    readonly type: NavigationLocation.Type.CURSOR;\n\n    /**\n     * The context for the location, that is always a position.\n     */\n    readonly context: Position;\n\n}\n\nexport namespace CursorLocation {\n\n    /**\n     * `true` if the argument is a cursor location. Otherwise, `false`.\n     */\n    export function is(location: NavigationLocation): location is CursorLocation {\n        return location.type === NavigationLocation.Type.CURSOR;\n    }\n\n    /**\n     * Returns with the serialized format of the position argument.\n     */\n    export function toObject(context: Position): object {\n        const { line, character } = context;\n        return {\n            line,\n            character\n        };\n    }\n\n    /**\n     * Returns with the position from its serializable counterpart, or `undefined`.\n     */\n    export function fromObject(object: Partial<Position>): Position | undefined {\n        if (object.line !== undefined && object.character !== undefined) {\n            const { line, character } = object;\n            return {\n                line,\n                character\n            };\n        }\n        return undefined;\n    }\n\n}\n\n/**\n * Representation of a selection location.\n */\nexport interface SelectionLocation extends NavigationLocation {\n\n    /**\n     * The `selection` type.\n     */\n    readonly type: NavigationLocation.Type.SELECTION;\n\n    /**\n     * The context of the selection; a range.\n     */\n    readonly context: Range;\n\n}\n\nexport namespace SelectionLocation {\n\n    /**\n     * `true` if the argument is a selection location.\n     */\n    export function is(location: NavigationLocation): location is SelectionLocation {\n        return location.type === NavigationLocation.Type.SELECTION;\n    }\n\n    /**\n     * Converts the range argument into a serializable object.\n     */\n    export function toObject(context: Range): object {\n        const { start, end } = context;\n        return {\n            start: CursorLocation.toObject(start),\n            end: CursorLocation.toObject(end)\n        };\n    }\n\n    /**\n     * Creates a range object from its serializable counterpart. Returns with `undefined` if the argument cannot be converted into a range.\n     */\n    export function fromObject(object: Partial<Range>): Range | undefined {\n        if (!!object.start && !!object.end) {\n            const start = CursorLocation.fromObject(object.start);\n            const end = CursorLocation.fromObject(object.end);\n            if (start && end) {\n                return {\n                    start,\n                    end\n                };\n            }\n        }\n        return undefined;\n    }\n}\n\n/**\n * Content change location type.\n */\nexport interface ContentChangeLocation extends NavigationLocation {\n\n    /**\n     * The type, that is always `content change`.\n     */\n    readonly type: NavigationLocation.Type.CONTENT_CHANGE;\n\n    /**\n     * A text document content change deltas as the context.\n     */\n    readonly context: TextDocumentContentChangeDelta;\n\n}\n\nexport namespace ContentChangeLocation {\n\n    /**\n     * `true` if the argument is a content change location. Otherwise, `false`.\n     */\n    export function is(location: NavigationLocation): location is ContentChangeLocation {\n        return location.type === NavigationLocation.Type.CONTENT_CHANGE;\n    }\n\n    /**\n     * Returns with a serializable object representing the arguments.\n     */\n    export function toObject(context: TextDocumentContentChangeDelta): object {\n        return {\n            range: SelectionLocation.toObject(context.range),\n            rangeLength: context.rangeLength,\n            text: context.text\n        };\n    }\n\n    /**\n     * Returns with a text document change delta for the argument. `undefined` if the argument cannot be mapped to a content change delta.\n     */\n    export function fromObject(object: Partial<TextDocumentContentChangeDelta>): TextDocumentContentChangeDelta | undefined {\n        if (!!object.range && object.rangeLength !== undefined && object.text !== undefined) {\n            const range = SelectionLocation.fromObject(object.range!);\n            const rangeLength = object.rangeLength;\n            const text = object.text;\n            if (!!range) {\n                return {\n                    range,\n                    rangeLength: rangeLength!,\n                    text: text!\n                };\n            }\n        } else {\n            return undefined;\n        }\n    }\n\n}\n","/********************************************************************************\n * Copyright (C) 2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { inject, injectable } from 'inversify';\nimport { decode as base64Decode, encode as base64Encode } from 'base64-arraybuffer';\nimport { Position, Range } from 'vscode-languageserver-types';\nimport URI from '@theia/core/lib/common/uri';\nimport { Disposable } from '@theia/core/lib/common/disposable';\nimport { ILogger } from '@theia/core/lib/common/logger';\nimport { ILanguageClient } from '@theia/languages/lib/browser/language-client-services';\nimport { SemanticHighlightFeature } from '@theia/languages/lib/browser/semantic-highlighting/semantic-highlighting-feature';\nimport { SemanticHighlightingParams } from '@theia/languages/lib/browser/semantic-highlighting/semantic-highlighting-protocol';\n\n/**\n * Service for registering and managing semantic highlighting decorations in the code editors for multiple languages.\n *\n * The current, default implementation does nothing at all, because the unique identifier of the `EditorDecoration` is not\n * exposed via the API. A working example is available as the `MonacoSemanticHighlightingService` from the `@theia/monaco` extension.\n */\n@injectable()\nexport class SemanticHighlightingService implements Disposable {\n\n    @inject(ILogger)\n    protected readonly logger: ILogger;\n    protected readonly scopes: Map<string, string[][]> = new Map();\n\n    /**\n     * Registers the supported highlighting scopes for the given language. Returns with a disposable that will unregister the scopes from this service on `dispose`.\n     * @param languageId the unique identifier of the language.\n     * @param scopes a lookup table of the supported (TextMate) scopes received from the server. Semantic highlighting will be be supported for a language if the `scopes` is empty.\n     */\n    register(languageId: string, scopes: string[][] | undefined): Disposable {\n        if (scopes && scopes.length > 0) {\n            this.logger.info(`Registering scopes for language: ${languageId}.`);\n            if (this.scopes.has(languageId)) {\n                this.logger.warn(`The scopes are already registered for language: ${languageId}.`);\n            }\n            this.scopes.set(languageId, scopes.map(scope => scope.slice(0)));\n            this.logger.info(`The scopes have been successfully registered for ${languageId}.`);\n            const unregister: (id: string) => void = this.unregister.bind(this);\n            return Disposable.create(() => unregister(languageId));\n        }\n        return Disposable.NULL;\n    }\n\n    protected unregister(languageId: string): void {\n        this.logger.info(`Unregistering scopes for language: ${languageId}.`);\n        if (!this.scopes.has(languageId)) {\n            this.logger.warn(`No scopes were registered for language: ${languageId}.`);\n        }\n        this.scopes.delete(languageId);\n        this.logger.info(`The scopes have been successfully unregistered for ${languageId}.`);\n    }\n\n    /**\n     * An array for TextMate scopes for the language.\n     * @param languageId the unique ID of the language.\n     * @param index the index of the TextMate scopes for the language.\n     */\n    protected scopesFor(languageId: string, index: number): string[] {\n        if (index < 0) {\n            throw new Error(`index >= 0. ${index}`);\n        }\n        const scopes = this.scopes.get(languageId);\n        if (!scopes) {\n            throw new Error(`No scopes were registered for language: ${languageId}.`);\n        }\n        if (scopes.length <= index) {\n            throw new Error(`Cannot find scopes by index. Language ID: ${languageId}. Index: ${index}. Scopes: ${scopes}`);\n        }\n        return scopes[index];\n    }\n\n    /**\n     * Decorates the editor with the semantic highlighting scopes.\n     * @param languageId the unique identifier of the language the resource belongs to.\n     * @param uri the URI of the resource to decorate in the editor.\n     * @param ranges the decoration ranges.\n     */\n    async decorate(languageId: string, uri: URI, ranges: SemanticHighlightingRange[]): Promise<void> {\n        // NOOP\n    }\n\n    /**\n     * Disposes the service.\n     */\n    dispose(): void {\n        // NOOP\n    }\n\n}\n\nexport namespace SemanticHighlightingService {\n\n    const LENGTH_SHIFT = 0x0000010;\n    const SCOPE_MASK = 0x000FFFF;\n\n    /**\n     * The bare minimum representation of an individual semantic highlighting token.\n     */\n    export interface Token {\n\n        /**\n         * The offset of the token.\n         */\n        readonly character: number;\n\n        /**\n         * The length of the token.\n         */\n        readonly length: number;\n\n        /**\n         * The unique scope index per language.\n         */\n        readonly scope: number;\n    }\n\n    export namespace Token {\n\n        export function fromArray(tokens: number[]): Token[] {\n            if (tokens.length % 3 !== 0) {\n                throw new Error(`\"Invalid tokens. 'tokens.length % 3 !== 0' Tokens length was: \" + ${tokens.length}.`);\n            }\n            const result: Token[] = [];\n            for (let i = 0; i < tokens.length; i = i + 3) {\n                result.push({\n                    character: tokens[i],\n                    length: tokens[i + 1],\n                    scope: tokens[i + 2]\n                });\n            }\n            return result;\n        }\n\n    }\n\n    /**\n     * Converts the compact, `base64` string token into an array of tokens.\n     */\n    export function decode(tokens: string | undefined): SemanticHighlightingService.Token[] {\n        if (!tokens) {\n            return [];\n        }\n\n        const buffer = base64Decode(tokens);\n        const dataView = new DataView(buffer);\n        const result: SemanticHighlightingService.Token[] = [];\n\n        for (let i = 0; i < buffer.byteLength / Uint32Array.BYTES_PER_ELEMENT; i = i + 2) {\n            const character = dataView.getUint32(i * Uint32Array.BYTES_PER_ELEMENT);\n            const lengthAndScope = dataView.getUint32((i + 1) * Uint32Array.BYTES_PER_ELEMENT);\n            const length = lengthAndScope >>> LENGTH_SHIFT;\n            const scope = lengthAndScope & SCOPE_MASK;\n            result.push({\n                character,\n                length,\n                scope\n            });\n        }\n        return result;\n    }\n\n    /**\n     * Encodes the array of tokens into a compact `base64` string representation.\n     */\n    export function encode(tokens: SemanticHighlightingService.Token[] | undefined): string {\n        if (!tokens || tokens.length === 0) {\n            return '';\n        }\n\n        const buffer = new ArrayBuffer(tokens.length * 2 * Uint32Array.BYTES_PER_ELEMENT);\n        const dataView = new DataView(buffer);\n        let j = 0;\n\n        for (let i = 0; i < tokens.length; i++) {\n            const { character, length, scope } = tokens[i];\n            let lengthAndScope = length;\n            lengthAndScope = lengthAndScope << LENGTH_SHIFT;\n            lengthAndScope |= scope;\n            dataView.setUint32(j++ * Uint32Array.BYTES_PER_ELEMENT, character);\n            dataView.setUint32(j++ * Uint32Array.BYTES_PER_ELEMENT, lengthAndScope);\n        }\n        return base64Encode(buffer);\n    }\n\n    /**\n     * Creates a new text document feature to handle the semantic highlighting capabilities of the protocol.\n     * When the feature gets initialized, it delegates to the semantic highlighting service and registers the TextMate scopes received as part of the server capabilities.\n     * Plus, each time when a notification is received by the client, the semantic highlighting service will be used as the consumer and the highlighting information\n     * will be used to decorate the text editor.\n     */\n    export function createNewFeature(service: SemanticHighlightingService, client: ILanguageClient & Readonly<{ languageId: string }>): SemanticHighlightFeature {\n        const { languageId } = client;\n        const initializeCallback = (id: string, scopes: string[][]): Disposable => service.register(id, scopes);\n        const consumer = (params: SemanticHighlightingParams): void => {\n            const toRanges: (tuple: [number, string | undefined]) => SemanticHighlightingRange[] = tuple => {\n                const [line, tokens] = tuple;\n                if (!tokens) {\n                    return [\n                        {\n                            start: Position.create(line, 0),\n                            end: Position.create(line, 0),\n                        }\n                    ];\n                }\n                return SemanticHighlightingService.decode(tokens).map(token => ({\n                    start: Position.create(line, token.character),\n                    end: Position.create(line, token.character + token.length),\n                    scope: token.scope\n                }));\n            };\n            const ranges = params.lines.map(line => [line.line, line.tokens]).map(toRanges).reduce((acc, current) => acc.concat(current), []);\n            const uri = new URI(params.textDocument.uri);\n            service.decorate(languageId, uri, ranges);\n        };\n        return new SemanticHighlightFeature(client, initializeCallback, consumer);\n    }\n\n}\n\nexport interface SemanticHighlightingRange extends Range {\n    /**\n     * The unique, internal index of the TextMate scope for the range.\n     */\n    readonly scope?: number;\n}\n\nexport { Position, Range };\n","/********************************************************************************\n * Copyright (C) 2019 Xuye Cai and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\n// copied from vscode: https://github.com/microsoft/vscode/blob/master/src/vs/workbench/services/textfile/common/textfiles.ts\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nexport const SUPPORTED_ENCODINGS: { [encoding: string]: { labelLong: string; labelShort: string; order: number; encodeOnly?: boolean; alias?: string } } = {\n    utf8: {\n        labelLong: 'UTF-8',\n        labelShort: 'UTF-8',\n        order: 1,\n        alias: 'utf8bom'\n    },\n    utf8bom: {\n        labelLong: 'UTF-8 with BOM',\n        labelShort: 'UTF-8 with BOM',\n        encodeOnly: true,\n        order: 2,\n        alias: 'utf8'\n    },\n    utf16le: {\n        labelLong: 'UTF-16 LE',\n        labelShort: 'UTF-16 LE',\n        order: 3\n    },\n    utf16be: {\n        labelLong: 'UTF-16 BE',\n        labelShort: 'UTF-16 BE',\n        order: 4\n    },\n    windows1252: {\n        labelLong: 'Western (Windows 1252)',\n        labelShort: 'Windows 1252',\n        order: 5\n    },\n    iso88591: {\n        labelLong: 'Western (ISO 8859-1)',\n        labelShort: 'ISO 8859-1',\n        order: 6\n    },\n    iso88593: {\n        labelLong: 'Western (ISO 8859-3)',\n        labelShort: 'ISO 8859-3',\n        order: 7\n    },\n    iso885915: {\n        labelLong: 'Western (ISO 8859-15)',\n        labelShort: 'ISO 8859-15',\n        order: 8\n    },\n    macroman: {\n        labelLong: 'Western (Mac Roman)',\n        labelShort: 'Mac Roman',\n        order: 9\n    },\n    cp437: {\n        labelLong: 'DOS (CP 437)',\n        labelShort: 'CP437',\n        order: 10\n    },\n    windows1256: {\n        labelLong: 'Arabic (Windows 1256)',\n        labelShort: 'Windows 1256',\n        order: 11\n    },\n    iso88596: {\n        labelLong: 'Arabic (ISO 8859-6)',\n        labelShort: 'ISO 8859-6',\n        order: 12\n    },\n    windows1257: {\n        labelLong: 'Baltic (Windows 1257)',\n        labelShort: 'Windows 1257',\n        order: 13\n    },\n    iso88594: {\n        labelLong: 'Baltic (ISO 8859-4)',\n        labelShort: 'ISO 8859-4',\n        order: 14\n    },\n    iso885914: {\n        labelLong: 'Celtic (ISO 8859-14)',\n        labelShort: 'ISO 8859-14',\n        order: 15\n    },\n    windows1250: {\n        labelLong: 'Central European (Windows 1250)',\n        labelShort: 'Windows 1250',\n        order: 16\n    },\n    iso88592: {\n        labelLong: 'Central European (ISO 8859-2)',\n        labelShort: 'ISO 8859-2',\n        order: 17\n    },\n    cp852: {\n        labelLong: 'Central European (CP 852)',\n        labelShort: 'CP 852',\n        order: 18\n    },\n    windows1251: {\n        labelLong: 'Cyrillic (Windows 1251)',\n        labelShort: 'Windows 1251',\n        order: 19\n    },\n    cp866: {\n        labelLong: 'Cyrillic (CP 866)',\n        labelShort: 'CP 866',\n        order: 20\n    },\n    iso88595: {\n        labelLong: 'Cyrillic (ISO 8859-5)',\n        labelShort: 'ISO 8859-5',\n        order: 21\n    },\n    koi8r: {\n        labelLong: 'Cyrillic (KOI8-R)',\n        labelShort: 'KOI8-R',\n        order: 22\n    },\n    koi8u: {\n        labelLong: 'Cyrillic (KOI8-U)',\n        labelShort: 'KOI8-U',\n        order: 23\n    },\n    iso885913: {\n        labelLong: 'Estonian (ISO 8859-13)',\n        labelShort: 'ISO 8859-13',\n        order: 24\n    },\n    windows1253: {\n        labelLong: 'Greek (Windows 1253)',\n        labelShort: 'Windows 1253',\n        order: 25\n    },\n    iso88597: {\n        labelLong: 'Greek (ISO 8859-7)',\n        labelShort: 'ISO 8859-7',\n        order: 26\n    },\n    windows1255: {\n        labelLong: 'Hebrew (Windows 1255)',\n        labelShort: 'Windows 1255',\n        order: 27\n    },\n    iso88598: {\n        labelLong: 'Hebrew (ISO 8859-8)',\n        labelShort: 'ISO 8859-8',\n        order: 28\n    },\n    iso885910: {\n        labelLong: 'Nordic (ISO 8859-10)',\n        labelShort: 'ISO 8859-10',\n        order: 29\n    },\n    iso885916: {\n        labelLong: 'Romanian (ISO 8859-16)',\n        labelShort: 'ISO 8859-16',\n        order: 30\n    },\n    windows1254: {\n        labelLong: 'Turkish (Windows 1254)',\n        labelShort: 'Windows 1254',\n        order: 31\n    },\n    iso88599: {\n        labelLong: 'Turkish (ISO 8859-9)',\n        labelShort: 'ISO 8859-9',\n        order: 32\n    },\n    windows1258: {\n        labelLong: 'Vietnamese (Windows 1258)',\n        labelShort: 'Windows 1258',\n        order: 33\n    },\n    gbk: {\n        labelLong: 'Simplified Chinese (GBK)',\n        labelShort: 'GBK',\n        order: 34\n    },\n    gb18030: {\n        labelLong: 'Simplified Chinese (GB18030)',\n        labelShort: 'GB18030',\n        order: 35\n    },\n    cp950: {\n        labelLong: 'Traditional Chinese (Big5)',\n        labelShort: 'Big5',\n        order: 36\n    },\n    big5hkscs: {\n        labelLong: 'Traditional Chinese (Big5-HKSCS)',\n        labelShort: 'Big5-HKSCS',\n        order: 37\n    },\n    shiftjis: {\n        labelLong: 'Japanese (Shift JIS)',\n        labelShort: 'Shift JIS',\n        order: 38\n    },\n    eucjp: {\n        labelLong: 'Japanese (EUC-JP)',\n        labelShort: 'EUC-JP',\n        order: 39\n    },\n    euckr: {\n        labelLong: 'Korean (EUC-KR)',\n        labelShort: 'EUC-KR',\n        order: 40\n    },\n    windows874: {\n        labelLong: 'Thai (Windows 874)',\n        labelShort: 'Windows 874',\n        order: 41\n    },\n    iso885911: {\n        labelLong: 'Latin/Thai (ISO 8859-11)',\n        labelShort: 'ISO 8859-11',\n        order: 42\n    },\n    koi8ru: {\n        labelLong: 'Cyrillic (KOI8-RU)',\n        labelShort: 'KOI8-RU',\n        order: 43\n    },\n    koi8t: {\n        labelLong: 'Tajik (KOI8-T)',\n        labelShort: 'KOI8-T',\n        order: 44\n    },\n    gb2312: {\n        labelLong: 'Simplified Chinese (GB 2312)',\n        labelShort: 'GB 2312',\n        order: 45\n    },\n    cp865: {\n        labelLong: 'Nordic DOS (CP 865)',\n        labelShort: 'CP 865',\n        order: 46\n    },\n    cp850: {\n        labelLong: 'Western European DOS (CP 850)',\n        labelShort: 'CP 850',\n        order: 47\n    }\n};\n","/********************************************************************************\n * Copyright (C) 2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { inject, injectable } from 'inversify';\nimport URI from '@theia/core/lib/common/uri';\nimport { isChrome } from '@theia/core/lib/browser/browser';\nimport { environment } from '@theia/application-package/lib/environment';\nimport { SelectionService } from '@theia/core/lib/common/selection-service';\nimport { Command, CommandContribution, CommandRegistry } from '@theia/core/lib/common/command';\nimport { UriAwareCommandHandler } from '@theia/core/lib/common/uri-command-handler';\nimport { FileDownloadService } from './file-download-service';\n\n@injectable()\nexport class FileDownloadCommandContribution implements CommandContribution {\n\n    @inject(FileDownloadService)\n    protected readonly downloadService: FileDownloadService;\n\n    @inject(SelectionService)\n    protected readonly selectionService: SelectionService;\n\n    registerCommands(registry: CommandRegistry): void {\n        registry.registerCommand(\n            FileDownloadCommands.DOWNLOAD,\n            new UriAwareCommandHandler<URI[]>(this.selectionService, {\n                execute: uris => this.executeDownload(uris),\n                isEnabled: uris => this.isDownloadEnabled(uris),\n                isVisible: uris => this.isDownloadVisible(uris),\n            }, { multi: true })\n        );\n        registry.registerCommand(\n            FileDownloadCommands.COPY_DOWNLOAD_LINK,\n            new UriAwareCommandHandler<URI[]>(this.selectionService, {\n                execute: uris => this.executeDownload(uris, { copyLink: true }),\n                isEnabled: uris => isChrome && this.isDownloadEnabled(uris),\n                isVisible: uris => isChrome && this.isDownloadVisible(uris),\n            }, { multi: true })\n        );\n    }\n\n    protected async executeDownload(uris: URI[], options?: { copyLink?: boolean }): Promise<void> {\n        this.downloadService.download(uris, options);\n    }\n\n    protected isDownloadEnabled(uris: URI[]): boolean {\n        return !environment.electron.is() && uris.length > 0 && uris.every(u => u.scheme === 'file');\n    }\n\n    protected isDownloadVisible(uris: URI[]): boolean {\n        return this.isDownloadEnabled(uris);\n    }\n\n}\n\nexport namespace FileDownloadCommands {\n\n    export const DOWNLOAD: Command = {\n        id: 'file.download',\n        category: 'File',\n        label: 'Download'\n    };\n\n    export const COPY_DOWNLOAD_LINK: Command = {\n        id: 'file.copyDownloadLink',\n        category: 'File',\n        label: 'Copy Download Link'\n    };\n\n}\n","/********************************************************************************\n * Copyright (C) 2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { inject, injectable } from 'inversify';\nimport URI from '@theia/core/lib/common/uri';\nimport { ILogger } from '@theia/core/lib/common/logger';\nimport { Endpoint } from '@theia/core/lib/browser/endpoint';\nimport { FileSystem } from '../../common/filesystem';\nimport { FileDownloadData } from '../../common/download/file-download-data';\nimport { MessageService } from '@theia/core/lib/common/message-service';\nimport { addClipboardListener } from '@theia/core/lib/browser/widgets';\n\n@injectable()\nexport class FileDownloadService {\n\n    protected anchor: HTMLAnchorElement | undefined;\n    protected downloadCounter: number = 0;\n\n    @inject(ILogger)\n    protected readonly logger: ILogger;\n\n    @inject(FileSystem)\n    protected readonly fileSystem: FileSystem;\n\n    @inject(MessageService)\n    protected readonly messageService: MessageService;\n\n    protected handleCopy(event: ClipboardEvent, downloadUrl: string): void {\n        if (downloadUrl && event.clipboardData) {\n            event.clipboardData.setData('text/plain', downloadUrl);\n            event.preventDefault();\n            this.messageService.info('Copied the download link to the clipboard.');\n        }\n    }\n\n    async cancelDownload(id: string): Promise<void> {\n        await fetch(`${this.endpoint()}/download/?id=${id}&cancel=true`);\n    }\n\n    async download(uris: URI[], options?: FileDownloadService.DownloadOptions): Promise<void> {\n        let cancel = false;\n        if (uris.length === 0) {\n            return;\n        }\n        const copyLink = options && options.copyLink ? true : false;\n        try {\n            const [progress, result] = await Promise.all([\n                this.messageService.showProgress({\n                    text: `Preparing download${copyLink ? ' link' : ''}...`, options: { cancelable: true }\n                }, () => { cancel = true; }),\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                new Promise<{ response: Response, jsonResponse: any }>(async resolve => {\n                    const resp = await fetch(this.request(uris));\n                    const jsonResp = await resp.json();\n                    resolve({ response: resp, jsonResponse: jsonResp });\n                })\n            ]);\n            const { response, jsonResponse } = result;\n            if (cancel) {\n                this.cancelDownload(jsonResponse.id);\n                return;\n            }\n            const { status, statusText } = response;\n            if (status === 200) {\n                progress.cancel();\n                const downloadUrl = `${this.endpoint()}/download/?id=${jsonResponse.id}`;\n                if (copyLink) {\n                    if (document.documentElement) {\n                        const toDispose = addClipboardListener(document.documentElement, 'copy', e => {\n                            toDispose.dispose();\n                            this.handleCopy(e, downloadUrl);\n                        });\n                        document.execCommand('copy');\n                    }\n                } else {\n                    this.forceDownload(jsonResponse.id, decodeURIComponent(jsonResponse.name));\n                }\n            } else {\n                throw new Error(`Received unexpected status code: ${status}. [${statusText}]`);\n            }\n        } catch (e) {\n            this.logger.error(`Error occurred when downloading: ${uris.map(u => u.toString(true))}.`, e);\n        }\n    }\n\n    protected async forceDownload(id: string, title: string): Promise<void> {\n        let url: string | undefined;\n        try {\n            if (this.anchor === undefined) {\n                this.anchor = document.createElement('a');\n            }\n            const endpoint = this.endpoint();\n            url = `${endpoint}/download/?id=${id}`;\n            this.anchor.href = url;\n            this.anchor.style.display = 'none';\n            this.anchor.download = title;\n            document.body.appendChild(this.anchor);\n            this.anchor.click();\n        } finally {\n            // make sure anchor is removed from parent\n            if (this.anchor && this.anchor.parentNode) {\n                this.anchor.parentNode.removeChild(this.anchor);\n            }\n            if (url) {\n                URL.revokeObjectURL(url);\n            }\n        }\n    }\n\n    protected request(uris: URI[]): Request {\n        const url = this.url(uris);\n        const init = this.requestInit(uris);\n        return new Request(url, init);\n    }\n\n    protected requestInit(uris: URI[]): RequestInit {\n        if (uris.length === 1) {\n            return {\n                body: undefined,\n                method: 'GET'\n            };\n        }\n        return {\n            method: 'PUT',\n            body: JSON.stringify(this.body(uris)),\n            headers: new Headers({ 'Content-Type': 'application/json' }),\n        };\n    }\n\n    protected body(uris: URI[]): FileDownloadData {\n        return {\n            uris: uris.map(u => u.toString(true))\n        };\n    }\n\n    protected url(uris: URI[]): string {\n        const endpoint = this.endpoint();\n        if (uris.length === 1) {\n            // tslint:disable-next-line:whitespace\n            const [uri,] = uris;\n            return `${endpoint}/?uri=${uri.toString()}`;\n        }\n        return endpoint;\n\n    }\n\n    protected endpoint(): string {\n        const url = this.filesUrl();\n        return url.endsWith('/') ? url.slice(0, -1) : url;\n    }\n\n    protected filesUrl(): string {\n        return new Endpoint({ path: 'files' }).getRestUrl().toString();\n    }\n\n}\n\nexport namespace FileDownloadService {\n    export interface DownloadOptions {\n        /**\n         * `true` if the download link has to be copied to the clipboard. This will not trigger the actual download. Defaults to `false`.\n         */\n        readonly copyLink?: boolean;\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2017 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { interfaces, Container } from 'inversify';\nimport { Tree, TreeModel, TreeProps, defaultTreeProps } from '@theia/core/lib/browser';\nimport { createFileTreeContainer, FileTreeModel, FileTreeWidget } from '../file-tree';\nimport { OpenFileDialog, OpenFileDialogProps, SaveFileDialog, SaveFileDialogProps } from './file-dialog';\nimport { FileDialogModel } from './file-dialog-model';\nimport { FileDialogWidget } from './file-dialog-widget';\nimport { FileDialogTree } from './file-dialog-tree';\n\nexport function createFileDialogContainer(parent: interfaces.Container): Container {\n    const child = createFileTreeContainer(parent);\n\n    child.unbind(FileTreeModel);\n    child.bind(FileDialogModel).toSelf();\n    child.rebind(TreeModel).toService(FileDialogModel);\n\n    child.unbind(FileTreeWidget);\n    child.bind(FileDialogWidget).toSelf();\n\n    child.bind(FileDialogTree).toSelf();\n    child.rebind(Tree).toService(FileDialogTree);\n\n    return child;\n}\n\nexport function createOpenFileDialogContainer(parent: interfaces.Container, props: OpenFileDialogProps): Container {\n    const container = createFileDialogContainer(parent);\n    container.rebind(TreeProps).toConstantValue({\n        ...defaultTreeProps,\n        multiSelect: props.canSelectMany,\n        search: true\n    });\n\n    container.bind(OpenFileDialogProps).toConstantValue(props);\n    container.bind(OpenFileDialog).toSelf();\n\n    return container;\n}\n\nexport function createSaveFileDialogContainer(parent: interfaces.Container, props: SaveFileDialogProps): Container {\n    const container = createFileDialogContainer(parent);\n    container.rebind(TreeProps).toConstantValue({\n        ...defaultTreeProps,\n        multiSelect: false,\n        search: true\n    });\n\n    container.bind(SaveFileDialogProps).toConstantValue(props);\n    container.bind(SaveFileDialog).toSelf();\n\n    return container;\n}\n","/********************************************************************************\n * Copyright (C) 2017 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { injectable, inject, postConstruct } from 'inversify';\nimport URI from '@theia/core/lib/common/uri';\nimport { Emitter, Event } from '@theia/core/lib/common';\nimport { TreeNode, SelectableTreeNode } from '@theia/core/lib/browser';\nimport { DirNode, FileNode, FileTreeModel, FileStatNode } from '../file-tree';\nimport { FileDialogTree } from './file-dialog-tree';\n\n@injectable()\nexport class FileDialogModel extends FileTreeModel {\n\n    @inject(FileDialogTree) readonly tree: FileDialogTree;\n    protected readonly onDidOpenFileEmitter = new Emitter<void>();\n    protected _initialLocation: URI | undefined;\n    private _disableFileSelection: boolean = false;\n\n    @postConstruct()\n    protected init(): void {\n        super.init();\n        this.toDispose.push(this.onDidOpenFileEmitter);\n    }\n\n    /**\n     * Returns the first valid location that was set by calling the `navigateTo` method. Once the initial location has a defined value, it will not change.\n     * Can be `undefined`.\n     */\n    get initialLocation(): URI | undefined {\n        return this._initialLocation;\n    }\n\n    set disableFileSelection(isSelectable: boolean) {\n        this._disableFileSelection = isSelectable;\n    }\n\n    async navigateTo(nodeOrId: TreeNode | string | undefined): Promise<TreeNode | undefined> {\n        const result = await super.navigateTo(nodeOrId);\n        if (!this._initialLocation && FileStatNode.is(result)) {\n            this._initialLocation = result.uri;\n        }\n        return result;\n    }\n\n    get onDidOpenFile(): Event<void> {\n        return this.onDidOpenFileEmitter.event;\n    }\n\n    protected doOpenNode(node: TreeNode): void {\n        if (FileNode.is(node)) {\n            this.onDidOpenFileEmitter.fire(undefined);\n        } else if (DirNode.is(node)) {\n            this.navigateTo(node);\n        } else {\n            super.doOpenNode(node);\n        }\n    }\n\n    getNextSelectableNode(node: SelectableTreeNode = this.selectedNodes[0]): SelectableTreeNode | undefined {\n        let nextNode: SelectableTreeNode | undefined = node;\n        do {\n            nextNode = super.getNextSelectableNode(nextNode);\n        } while (FileStatNode.is(nextNode) && !this.isFileStatNodeSelectable(nextNode));\n        return nextNode;\n    }\n\n    getPrevSelectableNode(node: SelectableTreeNode = this.selectedNodes[0]): SelectableTreeNode | undefined {\n        let prevNode: SelectableTreeNode | undefined = node;\n        do {\n            prevNode = super.getPrevSelectableNode(prevNode);\n        } while (FileStatNode.is(prevNode) && !this.isFileStatNodeSelectable(prevNode));\n        return prevNode;\n    }\n\n    private isFileStatNodeSelectable(node: FileStatNode): boolean {\n        return !(!node.fileStat.isDirectory && this._disableFileSelection);\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2018 Ericsson and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { injectable, inject } from 'inversify';\nimport URI from '@theia/core/lib/common/uri';\nimport { MaybeArray } from '@theia/core/lib/common';\nimport { LabelProvider } from '@theia/core/lib/browser';\nimport { FileSystem, FileStat } from '../../common';\nimport { DirNode } from '../file-tree';\nimport { OpenFileDialogFactory, OpenFileDialogProps, SaveFileDialogFactory, SaveFileDialogProps } from './file-dialog';\n\nexport const FileDialogService = Symbol('FileDialogService');\nexport interface FileDialogService {\n\n    showOpenDialog(props: OpenFileDialogProps & { canSelectMany: true }, folder?: FileStat): Promise<MaybeArray<URI> | undefined>;\n    showOpenDialog(props: OpenFileDialogProps, folder?: FileStat): Promise<URI | undefined>;\n    showOpenDialog(props: OpenFileDialogProps, folder?: FileStat): Promise<MaybeArray<URI> | undefined>;\n\n    showSaveDialog(props: SaveFileDialogProps, folder?: FileStat): Promise<URI | undefined>\n\n}\n\n@injectable()\nexport class DefaultFileDialogService {\n\n    @inject(FileSystem) protected readonly fileSystem: FileSystem;\n    @inject(OpenFileDialogFactory) protected readonly openFileDialogFactory: OpenFileDialogFactory;\n    @inject(LabelProvider) protected readonly labelProvider: LabelProvider;\n    @inject(SaveFileDialogFactory) protected readonly saveFileDialogFactory: SaveFileDialogFactory;\n\n    async showOpenDialog(props: OpenFileDialogProps & { canSelectMany: true }, folder?: FileStat): Promise<MaybeArray<URI> | undefined>;\n    async showOpenDialog(props: OpenFileDialogProps, folder?: FileStat): Promise<URI | undefined>;\n    async showOpenDialog(props: OpenFileDialogProps, folder?: FileStat): Promise<MaybeArray<URI> | undefined> {\n        const title = props.title || 'Open';\n        const rootNode = await this.getRootNode(folder);\n        if (rootNode) {\n            const dialog = this.openFileDialogFactory(Object.assign(props, { title }));\n            await dialog.model.navigateTo(rootNode);\n            const value = await dialog.open();\n            if (value) {\n                if (!Array.isArray(value)) {\n                    return value.uri;\n                }\n                return value.map(node => node.uri);\n            }\n        }\n        return undefined;\n    }\n\n    async showSaveDialog(props: SaveFileDialogProps, folder?: FileStat): Promise<URI | undefined> {\n        const title = props.title || 'Save';\n        const rootNode = await this.getRootNode(folder);\n        if (rootNode) {\n            const dialog = this.saveFileDialogFactory(Object.assign(props, { title }));\n            await dialog.model.navigateTo(rootNode);\n            return dialog.open();\n        }\n        return undefined;\n    }\n\n    protected async getRootNode(folderToOpen?: FileStat): Promise<DirNode | undefined> {\n        const folder = folderToOpen || await this.fileSystem.getCurrentUserHome();\n        if (folder) {\n            const folderUri = new URI(folder.uri);\n            const rootUri = folder.isDirectory ? folderUri : folderUri.parent;\n            const rootStat = await this.fileSystem.getFileStat(rootUri.toString());\n            if (rootStat) {\n                return DirNode.createRoot(rootStat);\n            }\n        }\n        return undefined;\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { ReactRenderer } from '@theia/core/lib/browser/widgets/react-renderer';\nimport { FileDialogTree } from './file-dialog-tree';\nimport * as React from 'react';\n\nexport const FILE_TREE_FILTERS_LIST_CLASS = 'theia-FileTreeFiltersList';\n\n/**\n * A set of file filters that are used by the dialog. Each entry is a human readable label,\n * like \"TypeScript\", and an array of extensions, e.g.\n * ```ts\n * {\n * \t'Images': ['png', 'jpg']\n * \t'TypeScript': ['ts', 'tsx']\n * }\n * ```\n */\nexport class FileDialogTreeFilters {\n    [name: string]: string[];\n}\n\nexport class FileDialogTreeFiltersRenderer extends ReactRenderer {\n\n    constructor(\n        readonly filters: FileDialogTreeFilters,\n        readonly fileDialogTree: FileDialogTree\n    ) {\n        super();\n    }\n\n    protected readonly handleFilterChanged = (e: React.ChangeEvent<HTMLSelectElement>) => this.onFilterChanged(e);\n\n    protected doRender(): React.ReactNode {\n        if (!this.filters) {\n            return undefined;\n        }\n\n        const fileTypes = ['All Files'];\n        Object.keys(this.filters).forEach(element => {\n            fileTypes.push(element);\n        });\n\n        const options = fileTypes.map(value => this.renderLocation(value));\n        return <select className={'theia-select ' + FILE_TREE_FILTERS_LIST_CLASS} onChange={this.handleFilterChanged}>{...options}</select>;\n    }\n\n    protected renderLocation(value: string): React.ReactNode {\n        return <option value={value} key={value}>{value}</option>;\n    }\n\n    protected onFilterChanged(e: React.ChangeEvent<HTMLSelectElement>): void {\n        const locationList = this.locationList;\n        if (locationList) {\n            const value = locationList.value;\n            const filters = this.filters[value];\n            this.fileDialogTree.setFilter(filters);\n        }\n\n        e.preventDefault();\n        e.stopPropagation();\n    }\n\n    get locationList(): HTMLSelectElement | undefined {\n        const locationList = this.host.getElementsByClassName(FILE_TREE_FILTERS_LIST_CLASS)[0];\n        if (locationList instanceof HTMLSelectElement) {\n            return locationList;\n        }\n        return undefined;\n    }\n\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { injectable } from 'inversify';\nimport { DirNode, FileTree } from '../file-tree';\nimport { TreeNode, CompositeTreeNode } from '@theia/core/lib/browser/tree/tree';\nimport { FileStat } from '../../common';\n\n@injectable()\nexport class FileDialogTree extends FileTree {\n\n    /**\n     * Extensions for files to be shown\n     */\n    protected fileExtensions: string[] = [];\n\n    /**\n     * Sets extensions for filtering files\n     *\n     * @param fileExtensions array of extensions\n     */\n    setFilter(fileExtensions: string[]): void {\n        this.fileExtensions = fileExtensions.slice();\n        this.refresh();\n    }\n\n    protected async toNodes(fileStat: FileStat, parent: CompositeTreeNode): Promise<TreeNode[]> {\n        if (!fileStat.children) {\n            return [];\n        }\n\n        const result = await Promise.all(\n            fileStat.children\n                .filter(child => this.isVisible(child))\n                .map(child => this.toNode(child, parent))\n        );\n\n        return result.sort(DirNode.compare);\n    }\n\n    /**\n     * Determines whether file or folder can be shown\n     *\n     * @param fileStat resource to check\n     */\n    protected isVisible(fileStat: FileStat): boolean {\n        if (fileStat.isDirectory) {\n            return true;\n        }\n\n        if (this.fileExtensions.length === 0) {\n            return true;\n        }\n\n        return !this.fileExtensions.every(value => !fileStat.uri.endsWith('.' + value));\n    }\n\n}\n","/********************************************************************************\n * Copyright (C) 2017 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { injectable, inject } from 'inversify';\nimport { ContextMenuRenderer, NodeProps, TreeProps, TreeNode, SELECTED_CLASS, FOCUS_CLASS } from '@theia/core/lib/browser';\nimport { FileTreeWidget, FileStatNode } from '../file-tree';\nimport { FileDialogModel } from './file-dialog-model';\n\nexport const FILE_DIALOG_CLASS = 'theia-FileDialog';\nexport const NOT_SELECTABLE_CLASS = 'theia-mod-not-selectable';\n\n@injectable()\nexport class FileDialogWidget extends FileTreeWidget {\n\n    private _disableFileSelection: boolean = false;\n\n    constructor(\n        @inject(TreeProps) readonly props: TreeProps,\n        @inject(FileDialogModel) readonly model: FileDialogModel,\n        @inject(ContextMenuRenderer) contextMenuRenderer: ContextMenuRenderer\n    ) {\n        super(props, model, contextMenuRenderer);\n        this.addClass(FILE_DIALOG_CLASS);\n    }\n\n    set disableFileSelection(isSelectable: boolean) {\n        this._disableFileSelection = isSelectable;\n        this.model.disableFileSelection = isSelectable;\n    }\n\n    protected createNodeAttributes(node: TreeNode, props: NodeProps): React.Attributes & React.HTMLAttributes<HTMLElement> {\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        const attr = super.createNodeAttributes(node, props) as any;\n        if (this.shouldDisableSelection(node)) {\n            const keys = Object.keys(attr);\n            keys.forEach(k => {\n                if (['className', 'style', 'title'].indexOf(k) < 0) {\n                    delete attr[k];\n                }\n            });\n        }\n        return attr;\n    }\n\n    protected createNodeClassNames(node: TreeNode, props: NodeProps): string[] {\n        const classNames = super.createNodeClassNames(node, props);\n        if (this.shouldDisableSelection(node)) {\n            [SELECTED_CLASS, FOCUS_CLASS].forEach(name => {\n                const ind = classNames.indexOf(name);\n                if (ind >= 0) {\n                    classNames.splice(ind, 1);\n                }\n            });\n            classNames.push(NOT_SELECTABLE_CLASS);\n        }\n        return classNames;\n    }\n\n    protected shouldDisableSelection(node: TreeNode): boolean {\n        return FileStatNode.is(node) && !node.fileStat.isDirectory && this._disableFileSelection;\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2017 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { injectable, inject } from 'inversify';\nimport { Message } from '@phosphor/messaging';\nimport { Disposable, MaybeArray } from '@theia/core/lib/common';\nimport { Key, LabelProvider } from '@theia/core/lib/browser';\nimport { AbstractDialog, DialogProps, setEnabled, createIconButton, Widget } from '@theia/core/lib/browser';\nimport { FileStatNode } from '../file-tree';\nimport { LocationListRenderer } from '../location';\nimport { FileDialogModel } from './file-dialog-model';\nimport { FileDialogWidget } from './file-dialog-widget';\nimport { FileDialogTreeFiltersRenderer, FileDialogTreeFilters } from './file-dialog-tree-filters-renderer';\nimport URI from '@theia/core/lib/common/uri';\nimport { Panel } from '@phosphor/widgets';\n\nexport const OpenFileDialogFactory = Symbol('OpenFileDialogFactory');\nexport interface OpenFileDialogFactory {\n    (props: OpenFileDialogProps): OpenFileDialog;\n}\n\nexport const SaveFileDialogFactory = Symbol('SaveFileDialogFactory');\nexport interface SaveFileDialogFactory {\n    (props: SaveFileDialogProps): SaveFileDialog;\n}\n\nexport const SAVE_DIALOG_CLASS = 'theia-SaveFileDialog';\n\nexport const NAVIGATION_PANEL_CLASS = 'theia-NavigationPanel';\nexport const NAVIGATION_BACK_CLASS = 'theia-NavigationBack';\nexport const NAVIGATION_FORWARD_CLASS = 'theia-NavigationForward';\nexport const NAVIGATION_HOME_CLASS = 'theia-NavigationHome';\nexport const NAVIGATION_LOCATION_LIST_PANEL_CLASS = 'theia-LocationListPanel';\n\nexport const FILTERS_PANEL_CLASS = 'theia-FiltersPanel';\nexport const FILTERS_LABEL_CLASS = 'theia-FiltersLabel';\nexport const FILTERS_LIST_PANEL_CLASS = 'theia-FiltersListPanel';\n\nexport const FILENAME_PANEL_CLASS = 'theia-FileNamePanel';\nexport const FILENAME_LABEL_CLASS = 'theia-FileNameLabel';\nexport const FILENAME_TEXTFIELD_CLASS = 'theia-FileNameTextField';\n\nexport const CONTROL_PANEL_CLASS = 'theia-ControlPanel';\n\nexport class FileDialogProps extends DialogProps {\n\n    /**\n     * A set of file filters that are used by the dialog. Each entry is a human readable label,\n     * like \"TypeScript\", and an array of extensions, e.g.\n     * ```ts\n     * {\n     * \t'Images': ['png', 'jpg']\n     * \t'TypeScript': ['ts', 'tsx']\n     * }\n     * ```\n     */\n    filters?: FileDialogTreeFilters;\n\n}\n\n@injectable()\nexport class OpenFileDialogProps extends FileDialogProps {\n\n    /**\n     * A human-readable string for the accept button.\n     */\n    openLabel?: string;\n\n    /**\n     * Allow to select files, defaults to `true`.\n     */\n    canSelectFiles?: boolean;\n\n    /**\n     * Allow to select folders, defaults to `false`.\n     */\n    canSelectFolders?: boolean;\n\n    /**\n     * Allow to select many files or folders.\n     */\n    canSelectMany?: boolean;\n\n}\n\n@injectable()\nexport class SaveFileDialogProps extends FileDialogProps {\n\n    /**\n     * A human-readable string for the accept button.\n     */\n    saveLabel?: string;\n\n    /**\n     * A human-readable value for the input.\n     */\n    inputValue?: string;\n\n}\n\nexport abstract class FileDialog<T> extends AbstractDialog<T> {\n\n    protected readonly back: HTMLSpanElement;\n    protected readonly forward: HTMLSpanElement;\n    protected readonly home: HTMLSpanElement;\n    protected readonly locationListRenderer: LocationListRenderer;\n    protected readonly treeFiltersRenderer: FileDialogTreeFiltersRenderer | undefined;\n    protected readonly treePanel: Panel;\n\n    constructor(\n        @inject(FileDialogProps) readonly props: FileDialogProps,\n        @inject(FileDialogWidget) readonly widget: FileDialogWidget\n    ) {\n        super(props);\n        this.treePanel = new Panel();\n        this.treePanel.addWidget(this.widget);\n        this.toDispose.push(this.treePanel);\n        this.toDispose.push(this.model.onChanged(() => this.update()));\n        this.toDispose.push(this.model.onDidOpenFile(() => this.accept()));\n        this.toDispose.push(this.model.onSelectionChanged(() => this.update()));\n\n        const navigationPanel = document.createElement('div');\n        navigationPanel.classList.add(NAVIGATION_PANEL_CLASS);\n        this.contentNode.appendChild(navigationPanel);\n\n        navigationPanel.appendChild(this.back = createIconButton('fa', 'fa-chevron-left'));\n        this.back.classList.add(NAVIGATION_BACK_CLASS);\n        this.back.title = 'Navigate Back';\n        navigationPanel.appendChild(this.forward = createIconButton('fa', 'fa-chevron-right'));\n        this.forward.classList.add(NAVIGATION_FORWARD_CLASS);\n        this.forward.title = 'Navigate Forward';\n        navigationPanel.appendChild(this.home = createIconButton('fa', 'fa-home'));\n        this.home.classList.add(NAVIGATION_HOME_CLASS);\n        this.home.title = 'Go To Initial Location';\n\n        this.locationListRenderer = this.createLocationListRenderer();\n        this.locationListRenderer.host.classList.add(NAVIGATION_LOCATION_LIST_PANEL_CLASS);\n        navigationPanel.appendChild(this.locationListRenderer.host);\n\n        this.treeFiltersRenderer = this.createFileTreeFiltersRenderer();\n    }\n\n    get model(): FileDialogModel {\n        return this.widget.model;\n    }\n\n    protected createLocationListRenderer(): LocationListRenderer {\n        return new LocationListRenderer(this.model);\n    }\n\n    protected createFileTreeFiltersRenderer(): FileDialogTreeFiltersRenderer | undefined {\n        if (this.props.filters) {\n            return new FileDialogTreeFiltersRenderer(this.props.filters, this.widget.model.tree);\n        }\n\n        return undefined;\n    }\n\n    protected onUpdateRequest(msg: Message): void {\n        super.onUpdateRequest(msg);\n        setEnabled(this.back, this.model.canNavigateBackward());\n        setEnabled(this.forward, this.model.canNavigateForward());\n        setEnabled(this.home, !!this.model.initialLocation\n            && !!this.model.location\n            && this.model.initialLocation.toString() !== this.model.location.toString());\n        this.locationListRenderer.render();\n\n        if (this.treeFiltersRenderer) {\n            this.treeFiltersRenderer.render();\n        }\n\n        this.widget.update();\n    }\n\n    protected appendFiltersPanel(): void {\n        if (this.treeFiltersRenderer) {\n            const filtersPanel = document.createElement('div');\n            filtersPanel.classList.add(FILTERS_PANEL_CLASS);\n            this.contentNode.appendChild(filtersPanel);\n\n            const titlePanel = document.createElement('div');\n            titlePanel.innerHTML = 'Format:';\n            titlePanel.classList.add(FILTERS_LABEL_CLASS);\n            filtersPanel.appendChild(titlePanel);\n\n            this.treeFiltersRenderer.host.classList.add(FILTERS_LIST_PANEL_CLASS);\n            filtersPanel.appendChild(this.treeFiltersRenderer.host);\n        }\n    }\n\n    protected onAfterAttach(msg: Message): void {\n        Widget.attach(this.treePanel, this.contentNode);\n        this.toDisposeOnDetach.push(Disposable.create(() => {\n            Widget.detach(this.treePanel);\n            this.locationListRenderer.dispose();\n            if (this.treeFiltersRenderer) {\n                this.treeFiltersRenderer.dispose();\n            }\n        }));\n\n        this.appendFiltersPanel();\n\n        this.appendCloseButton('Cancel');\n        this.appendAcceptButton(this.getAcceptButtonLabel());\n\n        this.addKeyListener(this.back, Key.ENTER, () => this.model.navigateBackward(), 'click');\n        this.addKeyListener(this.forward, Key.ENTER, () => this.model.navigateForward(), 'click');\n        this.addKeyListener(this.home, Key.ENTER, () => {\n            if (this.model.initialLocation) {\n                this.model.location = this.model.initialLocation;\n            }\n        }, 'click');\n        super.onAfterAttach(msg);\n    }\n\n    protected abstract getAcceptButtonLabel(): string;\n\n    protected onActivateRequest(msg: Message): void {\n        this.widget.activate();\n    }\n\n}\n\n@injectable()\nexport class OpenFileDialog extends FileDialog<MaybeArray<FileStatNode>> {\n\n    constructor(\n        @inject(OpenFileDialogProps) readonly props: OpenFileDialogProps,\n        @inject(FileDialogWidget) readonly widget: FileDialogWidget\n    ) {\n        super(props, widget);\n        if (props.canSelectFiles !== undefined) {\n            this.widget.disableFileSelection = !props.canSelectFiles;\n        }\n    }\n\n    protected getAcceptButtonLabel(): string {\n        return this.props.openLabel ? this.props.openLabel : 'Open';\n    }\n\n    protected isValid(value: MaybeArray<FileStatNode>): string {\n        if (value && !this.props.canSelectMany && value instanceof Array) {\n            return 'You can select only one item';\n        }\n        return '';\n    }\n\n    get value(): MaybeArray<FileStatNode> {\n        if (this.widget.model.selectedFileStatNodes.length === 1) {\n            return this.widget.model.selectedFileStatNodes[0];\n        } else {\n            return this.widget.model.selectedFileStatNodes;\n        }\n    }\n\n    protected async accept(): Promise<void> {\n        const selection = this.value;\n        if (!this.props.canSelectFolders\n            && !Array.isArray(selection)\n            && selection.fileStat.isDirectory) {\n            this.widget.model.openNode(selection);\n            return;\n        }\n        super.accept();\n    }\n}\n\n@injectable()\nexport class SaveFileDialog extends FileDialog<URI | undefined> {\n\n    protected fileNameField: HTMLInputElement | undefined;\n\n    @inject(LabelProvider)\n    protected readonly labelProvider: LabelProvider;\n\n    constructor(\n        @inject(SaveFileDialogProps) readonly props: SaveFileDialogProps,\n        @inject(FileDialogWidget) readonly widget: FileDialogWidget\n    ) {\n        super(props, widget);\n        widget.addClass(SAVE_DIALOG_CLASS);\n    }\n\n    protected getAcceptButtonLabel(): string {\n        return this.props.saveLabel ? this.props.saveLabel : 'Save';\n    }\n\n    protected onUpdateRequest(msg: Message): void {\n        // Update file name field when changing a selection\n        if (this.fileNameField) {\n            if (this.widget.model.selectedFileStatNodes.length === 1) {\n                const node = this.widget.model.selectedFileStatNodes[0];\n                if (!node.fileStat.isDirectory) {\n                    this.fileNameField.value = this.labelProvider.getName(node);\n                }\n            } else {\n                this.fileNameField.value = '';\n            }\n        }\n\n        // Continue updating the dialog\n        super.onUpdateRequest(msg);\n    }\n\n    protected isValid(value: URI | undefined): string | boolean {\n        if (this.fileNameField && this.fileNameField.value) {\n            return '';\n        }\n        return false;\n    }\n\n    get value(): URI | undefined {\n        if (this.fileNameField && this.widget.model.selectedFileStatNodes.length === 1) {\n            const node = this.widget.model.selectedFileStatNodes[0];\n\n            if (node.fileStat.isDirectory) {\n                return node.uri.resolve(this.fileNameField.value);\n            }\n\n            return node.uri.parent.resolve(this.fileNameField.value);\n        }\n\n        return undefined;\n    }\n\n    protected onAfterAttach(msg: Message): void {\n        super.onAfterAttach(msg);\n\n        const fileNamePanel = document.createElement('div');\n        fileNamePanel.classList.add(FILENAME_PANEL_CLASS);\n        this.contentNode.appendChild(fileNamePanel);\n\n        const titlePanel = document.createElement('div');\n        titlePanel.innerHTML = 'Name:';\n        titlePanel.classList.add(FILENAME_LABEL_CLASS);\n        fileNamePanel.appendChild(titlePanel);\n\n        this.fileNameField = document.createElement('input');\n        this.fileNameField.type = 'text';\n        this.fileNameField.classList.add('theia-input', FILENAME_TEXTFIELD_CLASS);\n        this.fileNameField.value = this.props.inputValue || '';\n        fileNamePanel.appendChild(this.fileNameField);\n\n        this.fileNameField.onkeyup = () => this.validate();\n    }\n\n}\n","/********************************************************************************\n * Copyright (C) 2017 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nexport * from './file-dialog';\nexport * from './file-dialog-container';\nexport * from './file-dialog-tree-filters-renderer';\nexport * from './file-dialog-service';\n","/********************************************************************************\n * Copyright (C) 2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { injectable, inject } from 'inversify';\nimport { TextDocumentContentChangeEvent } from 'vscode-languageserver-protocol';\nimport {\n    Resource, ResourceResolver, Emitter, Event, DisposableCollection, ResourceError\n} from '@theia/core';\nimport URI from '@theia/core/lib/common/uri';\nimport { FileSystem, FileStat, FileSystemError } from '../common/filesystem';\nimport { FileSystemWatcher, FileChangeEvent } from './filesystem-watcher';\n\nexport class FileResource implements Resource {\n\n    protected readonly toDispose = new DisposableCollection();\n    protected readonly onDidChangeContentsEmitter = new Emitter<void>();\n    readonly onDidChangeContents: Event<void> = this.onDidChangeContentsEmitter.event;\n\n    protected stat: FileStat | undefined;\n    protected uriString: string;\n\n    constructor(\n        readonly uri: URI,\n        protected readonly fileSystem: FileSystem,\n        protected readonly fileSystemWatcher: FileSystemWatcher\n    ) {\n        this.uriString = this.uri.toString();\n        this.toDispose.push(this.onDidChangeContentsEmitter);\n    }\n\n    async init(): Promise<void> {\n        const stat = await this.getFileStat();\n        if (stat && stat.isDirectory) {\n            throw new Error('The given uri is a directory: ' + this.uriString);\n        }\n        this.stat = stat;\n\n        this.toDispose.push(this.fileSystemWatcher.onFilesChanged(event => {\n            if (FileChangeEvent.isAffected(event, this.uri)) {\n                this.sync();\n            }\n        }));\n        try {\n            this.toDispose.push(await this.fileSystemWatcher.watchFileChanges(this.uri));\n        } catch (e) {\n            console.error(e);\n        }\n    }\n\n    dispose(): void {\n        this.toDispose.dispose();\n    }\n\n    async readContents(options?: { encoding?: string }): Promise<string> {\n        try {\n            const { stat, content } = await this.fileSystem.resolveContent(this.uriString, options);\n            this.stat = stat;\n            return content;\n        } catch (e) {\n            if (FileSystemError.FileNotFound.is(e)) {\n                this.stat = undefined;\n                throw ResourceError.NotFound({\n                    ...e.toJson(),\n                    data: {\n                        uri: this.uri\n                    }\n                });\n            }\n            throw e;\n        }\n    }\n\n    async saveContents(content: string, options?: { encoding?: string, overwriteEncoding?: string }): Promise<void> {\n        if (options && options.overwriteEncoding) {\n            this.stat = await this.doSaveContents(content, { encoding: options.overwriteEncoding });\n        } else {\n            this.stat = await this.doSaveContents(content, options);\n        }\n    }\n    protected async doSaveContents(content: string, options?: { encoding?: string }): Promise<FileStat> {\n        const stat = await this.getFileStat();\n        if (stat) {\n            return this.fileSystem.setContent(stat, content, options);\n        }\n        return this.fileSystem.createFile(this.uriString, { content, ...options });\n    }\n\n    async saveContentChanges(changes: TextDocumentContentChangeEvent[], options?: { encoding?: string, overwriteEncoding?: string }): Promise<void> {\n        if (!this.stat) {\n            throw new Error(this.uriString + ' has not been read yet');\n        }\n        this.stat = await this.fileSystem.updateContent(this.stat, changes, options);\n    }\n\n    async guessEncoding(): Promise<string | undefined> {\n        if (!this.stat) {\n            return undefined;\n        }\n        return this.fileSystem.guessEncoding(this.uriString);\n    }\n\n    protected async sync(): Promise<void> {\n        if (await this.isInSync(this.stat)) {\n            return;\n        }\n        this.onDidChangeContentsEmitter.fire(undefined);\n    }\n    protected async isInSync(current: FileStat | undefined): Promise<boolean> {\n        const stat = await this.getFileStat();\n        if (!current) {\n            return !stat;\n        }\n        return !!stat && current.lastModification >= stat.lastModification;\n    }\n\n    protected async getFileStat(): Promise<FileStat | undefined> {\n        if (!await this.fileSystem.exists(this.uriString)) {\n            return undefined;\n        }\n        try {\n            return this.fileSystem.getFileStat(this.uriString);\n        } catch {\n            return undefined;\n        }\n    }\n\n}\n\n@injectable()\nexport class FileResourceResolver implements ResourceResolver {\n\n    @inject(FileSystem)\n    protected readonly fileSystem: FileSystem;\n\n    @inject(FileSystemWatcher)\n    protected readonly fileSystemWatcher: FileSystemWatcher;\n\n    async resolve(uri: URI): Promise<FileResource> {\n        if (uri.scheme !== 'file') {\n            throw new Error('The given uri is not file uri: ' + uri);\n        }\n        const resource = new FileResource(uri, this.fileSystem, this.fileSystemWatcher);\n        await resource.init();\n        return resource;\n    }\n\n}\n","/********************************************************************************\n * Copyright (C) 2019 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { SelectionService } from '@theia/core/lib/common/selection-service';\nimport { SelectionCommandHandler } from '@theia/core/lib/common/selection-command-handler';\nimport { FileStat } from '../common/filesystem';\n\nexport interface FileSelection {\n    fileStat: FileStat\n}\nexport namespace FileSelection {\n    export function is(arg: Object | undefined): arg is FileSelection {\n        return typeof arg === 'object' && ('fileStat' in arg) && FileStat.is(arg['fileStat']);\n    }\n    export class CommandHandler extends SelectionCommandHandler<FileSelection>{\n\n        constructor(\n            protected readonly selectionService: SelectionService,\n            protected readonly options: SelectionCommandHandler.Options<FileSelection>\n        ) {\n            super(\n                selectionService,\n                arg => FileSelection.is(arg) ? arg : undefined,\n                options\n            );\n        }\n\n    }\n\n}\n","/********************************************************************************\n * Copyright (C) 2017 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { interfaces, Container } from 'inversify';\nimport { createTreeContainer, Tree, TreeImpl, TreeModel, TreeModelImpl, TreeWidget } from '@theia/core/lib/browser';\nimport { FileTree } from './file-tree';\nimport { FileTreeModel } from './file-tree-model';\nimport { FileTreeWidget } from './file-tree-widget';\n\nexport function createFileTreeContainer(parent: interfaces.Container): Container {\n    const child = createTreeContainer(parent);\n\n    child.unbind(TreeImpl);\n    child.bind(FileTree).toSelf();\n    child.rebind(Tree).toService(FileTree);\n\n    child.unbind(TreeModelImpl);\n    child.bind(FileTreeModel).toSelf();\n    child.rebind(TreeModel).toService(FileTreeModel);\n\n    child.unbind(TreeWidget);\n    child.bind(FileTreeWidget).toSelf();\n\n    return child;\n}\n","/********************************************************************************\n * Copyright (C) 2017 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { injectable, inject, postConstruct } from 'inversify';\nimport URI from '@theia/core/lib/common/uri';\nimport { CompositeTreeNode, TreeModelImpl, TreeNode, ConfirmDialog } from '@theia/core/lib/browser';\nimport { FileSystem } from '../../common';\nimport { FileSystemWatcher, FileChangeType, FileChange, FileMoveEvent } from '../filesystem-watcher';\nimport { FileStatNode, DirNode, FileNode } from './file-tree';\nimport { LocationService } from '../location';\nimport { LabelProvider } from '@theia/core/lib/browser/label-provider';\n\n@injectable()\nexport class FileTreeModel extends TreeModelImpl implements LocationService {\n\n    @inject(LabelProvider) protected readonly labelProvider: LabelProvider;\n    @inject(FileSystem) protected readonly fileSystem: FileSystem;\n    @inject(FileSystemWatcher) protected readonly watcher: FileSystemWatcher;\n\n    @postConstruct()\n    protected init(): void {\n        super.init();\n        this.toDispose.push(this.watcher.onFilesChanged(changes => this.onFilesChanged(changes)));\n        this.toDispose.push(this.watcher.onDidMove(move => this.onDidMove(move)));\n    }\n\n    get location(): URI | undefined {\n        const root = this.root;\n        if (FileStatNode.is(root)) {\n            return root.uri;\n        }\n        return undefined;\n    }\n\n    set location(uri: URI | undefined) {\n        if (uri) {\n            this.fileSystem.getFileStat(uri.toString()).then(async fileStat => {\n                if (fileStat) {\n                    const node = DirNode.createRoot(fileStat);\n                    this.navigateTo(node);\n                }\n            });\n        } else {\n            this.navigateTo(undefined);\n        }\n    }\n\n    async drives(): Promise<URI[]> {\n        try {\n            const drives = await this.fileSystem.getDrives();\n            return drives.map(uri => new URI(uri));\n        } catch (e) {\n            this.logger.error('Error when loading drives.', e);\n            return [];\n        }\n    }\n\n    get selectedFileStatNodes(): Readonly<FileStatNode>[] {\n        return this.selectedNodes.filter(FileStatNode.is);\n    }\n\n    *getNodesByUri(uri: URI): IterableIterator<TreeNode> {\n        const node = this.getNode(uri.toString());\n        if (node) {\n            yield node;\n        }\n    }\n\n    /**\n     * to workaround https://github.com/Axosoft/nsfw/issues/42\n     */\n    protected onDidMove(move: FileMoveEvent): void {\n        if (FileMoveEvent.isRename(move)) {\n            return;\n        }\n        this.refreshAffectedNodes([\n            move.sourceUri,\n            move.targetUri\n        ]);\n    }\n\n    protected onFilesChanged(changes: FileChange[]): void {\n        if (!this.refreshAffectedNodes(this.getAffectedUris(changes)) && this.isRootAffected(changes)) {\n            this.refresh();\n        }\n    }\n\n    protected isRootAffected(changes: FileChange[]): boolean {\n        const root = this.root;\n        if (FileStatNode.is(root)) {\n            return changes.some(change =>\n                change.type < FileChangeType.DELETED && change.uri.toString() === root.uri.toString()\n            );\n        }\n        return false;\n    }\n\n    protected getAffectedUris(changes: FileChange[]): URI[] {\n        return changes.filter(change => !this.isFileContentChanged(change)).map(change => change.uri);\n    }\n\n    protected isFileContentChanged(change: FileChange): boolean {\n        return change.type === FileChangeType.UPDATED && FileNode.is(this.getNodesByUri(change.uri).next().value);\n    }\n\n    protected refreshAffectedNodes(uris: URI[]): boolean {\n        const nodes = this.getAffectedNodes(uris);\n        for (const node of nodes.values()) {\n            this.refresh(node);\n        }\n        return nodes.size !== 0;\n    }\n\n    protected getAffectedNodes(uris: URI[]): Map<string, CompositeTreeNode> {\n        const nodes = new Map<string, CompositeTreeNode>();\n        for (const uri of uris) {\n            for (const node of this.getNodesByUri(uri.parent)) {\n                if (DirNode.is(node) && node.expanded) {\n                    nodes.set(node.id, node);\n                }\n            }\n        }\n        return nodes;\n    }\n\n    copy(uri: URI): boolean {\n        if (uri.scheme !== 'file') {\n            return false;\n        }\n        const node = this.selectedFileStatNodes[0];\n        if (!node) {\n            return false;\n        }\n        const targetUri = node.uri.resolve(uri.path.base);\n        /* Check if the folder is copied on itself */\n        const sourcePath = uri.path.toString();\n        const targetPath = node.uri.path.toString();\n        if (sourcePath === targetPath) {\n            return false;\n        }\n\n        this.fileSystem.copy(uri.toString(), targetUri.toString());\n        return true;\n    }\n\n    /**\n     * Move the given source file or directory to the given target directory.\n     */\n    async move(source: TreeNode, target: TreeNode): Promise<void> {\n        if (DirNode.is(target) && FileStatNode.is(source)) {\n            const sourceUri = source.uri.toString();\n            if (target.uri.toString() === sourceUri) { /*  Folder on itself */\n                return;\n            }\n            const name = source.uri.displayName;\n            const targetUri = target.uri.resolve(name).toString();\n            if (sourceUri !== targetUri) { /*  File not on itself */\n                const fileExistsInTarget = await this.fileSystem.exists(targetUri);\n                if (!fileExistsInTarget || await this.shouldReplace(name)) {\n                    await this.fileSystem.move(sourceUri, targetUri, { overwrite: true });\n                }\n            }\n        }\n    }\n\n    protected async shouldReplace(fileName: string): Promise<boolean> {\n        const dialog = new ConfirmDialog({\n            title: 'Replace file',\n            msg: `File '${fileName}' already exists in the destination folder. Do you want to replace it?`,\n            ok: 'Yes',\n            cancel: 'No'\n        });\n        return !!await dialog.open();\n    }\n\n}\n","/********************************************************************************\n * Copyright (C) 2017 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport * as React from 'react';\nimport { injectable, inject } from 'inversify';\nimport { DisposableCollection, Disposable } from '@theia/core/lib/common';\nimport { UriSelection } from '@theia/core/lib/common/selection';\nimport { isCancelled } from '@theia/core/lib/common/cancellation';\nimport { ContextMenuRenderer, NodeProps, TreeProps, TreeNode, TreeWidget, CompositeTreeNode } from '@theia/core/lib/browser';\nimport { FileUploadService } from '../file-upload-service';\nimport { DirNode, FileStatNode } from './file-tree';\nimport { FileTreeModel } from './file-tree-model';\nimport { IconThemeService } from '@theia/core/lib/browser/icon-theme-service';\n\nexport const FILE_TREE_CLASS = 'theia-FileTree';\nexport const FILE_STAT_NODE_CLASS = 'theia-FileStatNode';\nexport const DIR_NODE_CLASS = 'theia-DirNode';\nexport const FILE_STAT_ICON_CLASS = 'theia-FileStatIcon';\n\n@injectable()\nexport class FileTreeWidget extends TreeWidget {\n\n    protected readonly toCancelNodeExpansion = new DisposableCollection();\n\n    @inject(FileUploadService)\n    protected readonly uploadService: FileUploadService;\n\n    @inject(IconThemeService)\n    protected readonly iconThemeService: IconThemeService;\n\n    constructor(\n        @inject(TreeProps) readonly props: TreeProps,\n        @inject(FileTreeModel) readonly model: FileTreeModel,\n        @inject(ContextMenuRenderer) contextMenuRenderer: ContextMenuRenderer\n    ) {\n        super(props, model, contextMenuRenderer);\n        this.addClass(FILE_TREE_CLASS);\n        this.toDispose.push(this.toCancelNodeExpansion);\n    }\n\n    protected createNodeClassNames(node: TreeNode, props: NodeProps): string[] {\n        const classNames = super.createNodeClassNames(node, props);\n        if (FileStatNode.is(node)) {\n            classNames.push(FILE_STAT_NODE_CLASS);\n        }\n        if (DirNode.is(node)) {\n            classNames.push(DIR_NODE_CLASS);\n        }\n        return classNames;\n    }\n\n    protected renderIcon(node: TreeNode, props: NodeProps): React.ReactNode {\n        const icon = this.toNodeIcon(node);\n        if (icon) {\n            return <div className={icon + ' file-icon'}></div>;\n        }\n        // eslint-disable-next-line no-null/no-null\n        return null;\n    }\n\n    protected createContainerAttributes(): React.HTMLAttributes<HTMLElement> {\n        const attrs = super.createContainerAttributes();\n        return {\n            ...attrs,\n            onDragEnter: event => this.handleDragEnterEvent(this.model.root, event),\n            onDragOver: event => this.handleDragOverEvent(this.model.root, event),\n            onDragLeave: event => this.handleDragLeaveEvent(this.model.root, event),\n            onDrop: event => this.handleDropEvent(this.model.root, event)\n        };\n    }\n\n    protected createNodeAttributes(node: TreeNode, props: NodeProps): React.Attributes & React.HTMLAttributes<HTMLElement> {\n        const elementAttrs = super.createNodeAttributes(node, props);\n        return {\n            ...elementAttrs,\n            draggable: FileStatNode.is(node),\n            onDragStart: event => this.handleDragStartEvent(node, event),\n            onDragEnter: event => this.handleDragEnterEvent(node, event),\n            onDragOver: event => this.handleDragOverEvent(node, event),\n            onDragLeave: event => this.handleDragLeaveEvent(node, event),\n            onDrop: event => this.handleDropEvent(node, event),\n            title: this.getNodeTooltip(node)\n        };\n    }\n\n    protected getNodeTooltip(node: TreeNode): string | undefined {\n        const uri = UriSelection.getUri(node);\n        return uri ? uri.path.toString() : undefined;\n    }\n\n    protected handleDragStartEvent(node: TreeNode, event: React.DragEvent): void {\n        event.stopPropagation();\n        let selectedNodes;\n        if (this.model.selectedNodes.find(selected => TreeNode.equals(selected, node))) {\n            selectedNodes = [...this.model.selectedNodes];\n        } else {\n            selectedNodes = [node];\n        }\n        this.setSelectedTreeNodesAsData(event.dataTransfer, node, selectedNodes);\n        if (event.dataTransfer) {\n            let label: string;\n            if (selectedNodes.length === 1) {\n                label = this.toNodeName(node);\n            } else {\n                label = String(selectedNodes.length);\n            }\n            const dragImage = document.createElement('div');\n            dragImage.className = 'theia-file-tree-drag-image';\n            dragImage.textContent = label;\n            document.body.appendChild(dragImage);\n            event.dataTransfer.setDragImage(dragImage, -10, -10);\n            setTimeout(() => document.body.removeChild(dragImage), 0);\n        }\n    }\n\n    protected handleDragEnterEvent(node: TreeNode | undefined, event: React.DragEvent): void {\n        event.preventDefault();\n        event.stopPropagation();\n        this.toCancelNodeExpansion.dispose();\n        const containing = DirNode.getContainingDir(node);\n        if (!!containing && !containing.selected) {\n            this.model.selectNode(containing);\n        }\n    }\n\n    protected handleDragOverEvent(node: TreeNode | undefined, event: React.DragEvent): void {\n        event.preventDefault();\n        event.stopPropagation();\n        if (!this.toCancelNodeExpansion.disposed) {\n            return;\n        }\n        const timer = setTimeout(() => {\n            const containing = DirNode.getContainingDir(node);\n            if (!!containing && !containing.expanded) {\n                this.model.expandNode(containing);\n            }\n        }, 500);\n        this.toCancelNodeExpansion.push(Disposable.create(() => clearTimeout(timer)));\n    }\n\n    protected handleDragLeaveEvent(node: TreeNode | undefined, event: React.DragEvent): void {\n        event.preventDefault();\n        event.stopPropagation();\n        this.toCancelNodeExpansion.dispose();\n    }\n\n    protected async handleDropEvent(node: TreeNode | undefined, event: React.DragEvent): Promise<void> {\n        try {\n            event.preventDefault();\n            event.stopPropagation();\n            event.dataTransfer.dropEffect = 'copy'; // Explicitly show this is a copy.\n            const containing = this.getDropTargetDirNode(node);\n            if (containing) {\n                const resources = this.getSelectedTreeNodesFromData(event.dataTransfer);\n                if (resources.length > 0) {\n                    for (const treeNode of resources) {\n                        await this.model.move(treeNode, containing);\n                    }\n                } else {\n                    await this.uploadService.upload(containing.uri, { source: event.dataTransfer });\n                }\n            }\n        } catch (e) {\n            if (!isCancelled(e)) {\n                console.error(e);\n            }\n        }\n    }\n\n    protected getDropTargetDirNode(node: TreeNode | undefined): DirNode | undefined {\n        if (CompositeTreeNode.is(node) && node.id === 'WorkspaceNodeId') {\n            if (node.children.length === 1) {\n                return DirNode.getContainingDir(node.children[0]);\n            } else if (node.children.length > 1) {\n                // move file to the last root folder in multi-root scenario\n                return DirNode.getContainingDir(node.children[node.children.length - 1]);\n            }\n        }\n        return DirNode.getContainingDir(node);\n    }\n\n    protected setTreeNodeAsData(data: DataTransfer, node: TreeNode): void {\n        data.setData('tree-node', node.id);\n    }\n\n    protected setSelectedTreeNodesAsData(data: DataTransfer, sourceNode: TreeNode, relatedNodes: TreeNode[]): void {\n        this.setTreeNodeAsData(data, sourceNode);\n        data.setData('selected-tree-nodes', JSON.stringify(relatedNodes.map(node => node.id)));\n    }\n\n    protected getTreeNodeFromData(data: DataTransfer): TreeNode | undefined {\n        const id = data.getData('tree-node');\n        return this.model.getNode(id);\n    }\n    protected getSelectedTreeNodesFromData(data: DataTransfer): TreeNode[] {\n        const resources = data.getData('selected-tree-nodes');\n        if (!resources) {\n            return [];\n        }\n        const ids: string[] = JSON.parse(resources);\n        return ids.map(id => this.model.getNode(id)).filter(node => node !== undefined) as TreeNode[];\n    }\n\n    protected get hidesExplorerArrows(): boolean {\n        const theme = this.iconThemeService.getDefinition(this.iconThemeService.current);\n        return !!theme && !!theme.hidesExplorerArrows;\n    }\n\n    protected renderExpansionToggle(node: TreeNode, props: NodeProps): React.ReactNode {\n        if (this.hidesExplorerArrows) {\n            // eslint-disable-next-line no-null/no-null\n            return null;\n        }\n        return super.renderExpansionToggle(node, props);\n    }\n\n    protected getPaddingLeft(node: TreeNode, props: NodeProps): number {\n        if (this.hidesExplorerArrows) {\n            // aditional left padding instead of top-level expansion toggle\n            return super.getPaddingLeft(node, props) + this.props.leftPadding;\n        }\n        return super.getPaddingLeft(node, props);\n    }\n\n    protected needsExpansionTogglePadding(node: TreeNode): boolean {\n        const theme = this.iconThemeService.getDefinition(this.iconThemeService.current);\n        if (theme && (theme.hidesExplorerArrows || (theme.hasFileIcons && !theme.hasFolderIcons))) {\n            return false;\n        }\n        return super.needsExpansionTogglePadding(node);\n    }\n\n}\n","/********************************************************************************\n * Copyright (C) 2017 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { injectable, inject } from 'inversify';\nimport URI from '@theia/core/lib/common/uri';\nimport { TreeNode, CompositeTreeNode, SelectableTreeNode, ExpandableTreeNode, TreeImpl } from '@theia/core/lib/browser';\nimport { FileSystem, FileStat } from '../../common';\nimport { UriSelection } from '@theia/core/lib/common/selection';\nimport { FileSelection } from '../file-selection';\n\n@injectable()\nexport class FileTree extends TreeImpl {\n\n    @inject(FileSystem) protected readonly fileSystem: FileSystem;\n\n    async resolveChildren(parent: CompositeTreeNode): Promise<TreeNode[]> {\n        if (FileStatNode.is(parent)) {\n            const fileStat = await this.resolveFileStat(parent);\n            if (fileStat) {\n                return this.toNodes(fileStat, parent);\n            }\n            return [];\n        }\n        return super.resolveChildren(parent);\n    }\n\n    protected resolveFileStat(node: FileStatNode): Promise<FileStat | undefined> {\n        return this.fileSystem.getFileStat(node.fileStat.uri).then(fileStat => {\n            if (fileStat) {\n                node.fileStat = fileStat;\n                return fileStat;\n            }\n            return undefined;\n        });\n    }\n\n    protected async toNodes(fileStat: FileStat, parent: CompositeTreeNode): Promise<TreeNode[]> {\n        if (!fileStat.children) {\n            return [];\n        }\n        const result = await Promise.all(fileStat.children.map(async child =>\n            this.toNode(child, parent)\n        ));\n        return result.sort(DirNode.compare);\n    }\n\n    protected toNode(fileStat: FileStat, parent: CompositeTreeNode): FileNode | DirNode {\n        const uri = new URI(fileStat.uri);\n        const id = this.toNodeId(uri, parent);\n        const node = this.getNode(id);\n        if (fileStat.isDirectory) {\n            if (DirNode.is(node)) {\n                node.fileStat = fileStat;\n                return node;\n            }\n            return <DirNode>{\n                id, uri, fileStat, parent,\n                expanded: false,\n                selected: false,\n                children: []\n            };\n        }\n        if (FileNode.is(node)) {\n            node.fileStat = fileStat;\n            return node;\n        }\n        return <FileNode>{\n            id, uri, fileStat, parent,\n            selected: false\n        };\n    }\n\n    protected toNodeId(uri: URI, parent: CompositeTreeNode): string {\n        return uri.path.toString();\n    }\n}\n\nexport interface FileStatNode extends SelectableTreeNode, UriSelection, FileSelection {\n}\nexport namespace FileStatNode {\n    export function is(node: object | undefined): node is FileStatNode {\n        return !!node && 'fileStat' in node;\n    }\n\n    export function getUri(node: TreeNode | undefined): string | undefined {\n        if (is(node)) {\n            return node.fileStat.uri;\n        }\n        return undefined;\n    }\n}\n\nexport type FileNode = FileStatNode;\nexport namespace FileNode {\n    export function is(node: Object | undefined): node is FileNode {\n        return FileStatNode.is(node) && !node.fileStat.isDirectory;\n    }\n}\n\nexport type DirNode = FileStatNode & ExpandableTreeNode;\nexport namespace DirNode {\n    export function is(node: Object | undefined): node is DirNode {\n        return FileStatNode.is(node) && node.fileStat.isDirectory;\n    }\n\n    export function compare(node: TreeNode, node2: TreeNode): number {\n        return DirNode.dirCompare(node, node2) || uriCompare(node, node2);\n    }\n\n    export function uriCompare(node: TreeNode, node2: TreeNode): number {\n        if (FileStatNode.is(node)) {\n            if (FileStatNode.is(node2)) {\n                return node.uri.displayName.localeCompare(node2.uri.displayName);\n            }\n            return 1;\n        }\n        if (FileStatNode.is(node2)) {\n            return -1;\n        }\n        return 0;\n    }\n\n    export function dirCompare(node: TreeNode, node2: TreeNode): number {\n        const a = DirNode.is(node) ? 1 : 0;\n        const b = DirNode.is(node2) ? 1 : 0;\n        return b - a;\n    }\n\n    export function createRoot(fileStat: FileStat): DirNode {\n        const uri = new URI(fileStat.uri);\n        const id = fileStat.uri;\n        return {\n            id, uri, fileStat,\n            visible: true,\n            parent: undefined,\n            children: [],\n            expanded: true,\n            selected: false\n        };\n    }\n\n    export function getContainingDir(node: TreeNode | undefined): DirNode | undefined {\n        let containing = node;\n        while (!!containing && !is(containing)) {\n            containing = containing.parent;\n        }\n        return containing;\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2017 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nexport * from './file-tree';\nexport * from './file-tree-model';\nexport * from './file-tree-widget';\nexport * from './file-tree-container';\n","/********************************************************************************\n * Copyright (C) 2019 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\n/* eslint-disable @typescript-eslint/no-explicit-any */\n\nimport { injectable, inject, postConstruct } from 'inversify';\nimport URI from '@theia/core/lib/common/uri';\nimport { CancellationTokenSource, CancellationToken, checkCancelled, cancelled } from '@theia/core/lib/common/cancellation';\nimport { Deferred } from '@theia/core/lib/common/promise-util';\nimport { MessageService } from '@theia/core/lib/common/message-service';\nimport { Progress } from '@theia/core/lib/common/message-service-protocol';\nimport { Endpoint } from '@theia/core/lib/browser/endpoint';\n\nimport throttle = require('lodash.throttle');\n\nconst maxChunkSize = 64 * 1024;\n\nexport interface FileUploadParams {\n    source?: DataTransfer\n    progress?: FileUploadProgressParams\n    onDidUpload?: (uri: string) => void;\n}\nexport interface FileUploadProgressParams {\n    text: string\n}\n\nexport interface FileUploadResult {\n    uploaded: string[]\n}\n\n@injectable()\nexport class FileUploadService {\n\n    static TARGET = 'target';\n    static UPLOAD = 'upload';\n\n    @inject(MessageService)\n    protected readonly messageService: MessageService;\n\n    protected uploadForm: FileUploadService.Form;\n\n    @postConstruct()\n    protected init(): void {\n        this.uploadForm = this.createUploadForm();\n    }\n\n    protected createUploadForm(): FileUploadService.Form {\n        const targetInput = document.createElement('input');\n        targetInput.type = 'text';\n        targetInput.name = FileUploadService.TARGET;\n        targetInput.classList.add('theia-input');\n\n        const fileInput = document.createElement('input');\n        fileInput.type = 'file';\n        fileInput.classList.add('theia-input');\n        fileInput.name = FileUploadService.UPLOAD;\n        fileInput.multiple = true;\n\n        const form = document.createElement('form');\n        form.style.display = 'none';\n        form.enctype = 'multipart/form-data';\n        form.append(targetInput);\n        form.append(fileInput);\n\n        document.body.appendChild(form);\n\n        fileInput.addEventListener('change', () => {\n            if (this.deferredUpload && fileInput.value) {\n                const source = new FormData(form);\n                // clean up to allow upload to the same folder twice\n                fileInput.value = '';\n                const targetUri = new URI(<string>source.get(FileUploadService.TARGET));\n                const { resolve, reject } = this.deferredUpload;\n                this.deferredUpload = undefined;\n                const { onDidUpload } = this.uploadForm;\n                this.withProgress(\n                    (progress, token) => this.doUpload(targetUri, { source, progress, token, onDidUpload }),\n                    this.uploadForm.progress).then(resolve, reject);\n            }\n        });\n        return { targetInput, fileInput };\n    }\n\n    protected deferredUpload: Deferred<FileUploadResult> | undefined;\n    async upload(targetUri: string | URI, params: FileUploadParams = {}): Promise<FileUploadResult> {\n        const { source, onDidUpload } = params;\n        if (source) {\n            return this.withProgress(\n                (progress, token) => this.doUpload(new URI(String(targetUri)), { source, progress, token, onDidUpload }),\n                params.progress);\n        }\n        this.deferredUpload = new Deferred<FileUploadResult>();\n        this.uploadForm.targetInput.value = String(targetUri);\n        this.uploadForm.fileInput.click();\n        this.uploadForm.progress = params.progress;\n        this.uploadForm.onDidUpload = params.onDidUpload;\n        return this.deferredUpload.promise;\n    }\n\n    protected async doUpload(targetUri: URI, { source, progress, token, onDidUpload }: FileUploadService.UploadParams): Promise<FileUploadResult> {\n        const result: FileUploadResult = { uploaded: [] };\n        let total = 0;\n        let done = 0;\n        let totalFiles = 0;\n        let doneFiles = 0;\n        const reportProgress = throttle(() => progress.report({\n            message: `${doneFiles} out of ${totalFiles}`,\n            work: { done, total }\n        }), 60);\n        const deferredUpload = new Deferred<FileUploadResult>();\n        const endpoint = new Endpoint({ path: '/file-upload' });\n        const socketOpen = new Deferred<void>();\n        const socket = new WebSocket(endpoint.getWebSocketUrl().toString());\n        socket.onerror = e => {\n            socketOpen.reject(e);\n            deferredUpload.reject(e);\n        };\n        socket.onclose = ({ code, reason }) => deferredUpload.reject(new Error(String(reason || code)));\n        socket.onmessage = ({ data }) => {\n            const response = JSON.parse(data);\n            if (response.uri) {\n                doneFiles++;\n                result.uploaded.push(response.uri);\n                reportProgress();\n                if (onDidUpload) {\n                    onDidUpload(response.uri);\n                }\n                return;\n            }\n            if (response.done) {\n                done = response.done;\n                reportProgress();\n                return;\n            }\n            if (response.ok) {\n                deferredUpload.resolve(result);\n            } else if (response.error) {\n                deferredUpload.reject(new Error(response.error));\n            } else {\n                console.error('unknown upload response: ' + response);\n            }\n            socket.close();\n        };\n        socket.onopen = () => socketOpen.resolve();\n        const rejectAndClose = (e: Error) => {\n            deferredUpload.reject(e);\n            if (socket.readyState === 1) {\n                socket.close();\n            }\n        };\n        token.onCancellationRequested(() => rejectAndClose(cancelled()));\n        try {\n            let queue = Promise.resolve();\n            await this.index(targetUri, source, {\n                token,\n                progress,\n                accept: async ({ uri, file }) => {\n                    total += file.size;\n                    totalFiles++;\n                    reportProgress();\n                    queue = queue.then(async () => {\n                        try {\n                            await socketOpen.promise;\n                            checkCancelled(token);\n                            let readBytes = 0;\n                            socket.send(JSON.stringify({ uri: uri.toString(), size: file.size }));\n                            if (file.size) {\n                                do {\n                                    const fileSlice = await this.readFileSlice(file, readBytes);\n                                    checkCancelled(token);\n                                    readBytes = fileSlice.read;\n                                    socket.send(fileSlice.content);\n                                    while (socket.bufferedAmount > maxChunkSize * 2) {\n                                        await new Promise(resolve => setImmediate(resolve));\n                                        checkCancelled(token);\n                                    }\n                                } while (readBytes < file.size);\n                            }\n                        } catch (e) {\n                            rejectAndClose(e);\n                        }\n                    });\n                }\n            });\n            await queue;\n            await socketOpen.promise;\n            socket.send(JSON.stringify({ ok: true }));\n        } catch (e) {\n            rejectAndClose(e);\n        }\n        return deferredUpload.promise;\n    }\n\n    protected readFileSlice(file: File, read: number): Promise<{\n        content: ArrayBuffer\n        read: number\n    }> {\n        return new Promise((resolve, reject) => {\n            const bytesLeft = file.size - read;\n            if (!bytesLeft) {\n                reject(new Error('nothing to read'));\n                return;\n            }\n            const size = Math.min(maxChunkSize, bytesLeft);\n            const slice = file.slice(read, read + size);\n            const reader = new FileReader();\n            reader.onload = () => {\n                read += size;\n                const content = reader.result as ArrayBuffer;\n                resolve({ content, read });\n            };\n            reader.onerror = reject;\n            reader.readAsArrayBuffer(slice);\n        });\n    }\n\n    protected async withProgress<T>(\n        cb: (progress: Progress, token: CancellationToken) => Promise<T>,\n        { text }: FileUploadProgressParams = { text: 'Uploading Files...' }\n    ): Promise<T> {\n        const cancellationSource = new CancellationTokenSource();\n        const { token } = cancellationSource;\n        const progress = await this.messageService.showProgress({ text, options: { cancelable: true } }, () => cancellationSource.cancel());\n        try {\n            return await cb(progress, token);\n        } finally {\n            progress.cancel();\n        }\n    }\n\n    protected async index(targetUri: URI, source: FileUploadService.Source, context: FileUploadService.Context): Promise<void> {\n        if (source instanceof FormData) {\n            await this.indexFormData(targetUri, source, context);\n        } else {\n            await this.indexDataTransfer(targetUri, source, context);\n        }\n    }\n\n    protected async indexFormData(targetUri: URI, formData: FormData, context: FileUploadService.Context): Promise<void> {\n        for (const file of formData.getAll(FileUploadService.UPLOAD)) {\n            if (file instanceof File) {\n                await this.indexFile(targetUri, file, context);\n            }\n        }\n    }\n\n    protected async indexDataTransfer(targetUri: URI, dataTransfer: DataTransfer, context: FileUploadService.Context): Promise<void> {\n        checkCancelled(context.token);\n        if (dataTransfer.items) {\n            await this.indexDataTransferItemList(targetUri, dataTransfer.items, context);\n        } else {\n            await this.indexFileList(targetUri, dataTransfer.files, context);\n        }\n    }\n\n    protected async indexFileList(targetUri: URI, files: FileList, context: FileUploadService.Context): Promise<void> {\n        for (let i = 0; i < files.length; i++) {\n            const file = files[i];\n            if (file) {\n                await this.indexFile(targetUri, file, context);\n            }\n        }\n    }\n\n    protected async indexFile(targetUri: URI, file: File, context: FileUploadService.Context): Promise<void> {\n        await context.accept({\n            uri: targetUri.resolve(file.name),\n            file\n        });\n    }\n\n    protected async indexDataTransferItemList(targetUri: URI, items: DataTransferItemList, context: FileUploadService.Context): Promise<void> {\n        checkCancelled(context.token);\n        const entries: WebKitEntry[] = [];\n        for (let i = 0; i < items.length; i++) {\n            const entry = items[i].webkitGetAsEntry() as WebKitEntry;\n            entries.push(entry);\n        }\n        await this.indexEntries(targetUri, entries, context);\n\n    }\n\n    protected async indexEntry(targetUri: URI, entry: WebKitEntry | null, context: FileUploadService.Context): Promise<void> {\n        checkCancelled(context.token);\n        if (!entry) {\n            return;\n        }\n        if (entry.isDirectory) {\n            await this.indexDirectoryEntry(targetUri, entry as WebKitDirectoryEntry, context);\n        } else {\n            await this.indexFileEntry(targetUri, entry as WebKitFileEntry, context);\n        }\n    }\n\n    /**\n     *  Read all entries within a folder by block of 100 files or folders until the\n     *  whole folder has been read.\n     */\n    protected async indexDirectoryEntry(targetUri: URI, entry: WebKitDirectoryEntry, context: FileUploadService.Context): Promise<void> {\n        checkCancelled(context.token);\n        const newTargetUri = targetUri.resolve(entry.name);\n        return new Promise<void>(async (resolve, reject) => {\n            const reader = entry.createReader();\n            const getEntries = () => reader.readEntries(async results => {\n                try {\n                    if (!context.token.isCancellationRequested && results && results.length) {\n                        await this.indexEntries(newTargetUri, results, context);\n                        getEntries(); // loop to read all getEntries\n                    } else {\n                        resolve();\n                    }\n                } catch (e) {\n                    reject(e);\n                }\n            }, reject);\n            getEntries();\n        });\n    }\n\n    protected async indexEntries(targetUri: URI, entries: WebKitEntry[], context: FileUploadService.Context): Promise<void> {\n        checkCancelled(context.token);\n        for (let i = 0; i < entries.length; i++) {\n            await this.indexEntry(targetUri, entries[i], context);\n        }\n    }\n\n    protected async indexFileEntry(targetUri: URI, entry: WebKitFileEntry, context: FileUploadService.Context): Promise<void> {\n        await new Promise<void>((resolve, reject) => {\n            try {\n                entry.file(\n                    file => this.indexFile(targetUri, file, context).then(resolve, reject),\n                    reject,\n                );\n            } catch (e) {\n                reject(e);\n            }\n        });\n    }\n\n}\n\nexport namespace FileUploadService {\n    export type Source = FormData | DataTransfer;\n    export interface UploadEntry {\n        file: File\n        uri: URI\n    }\n    export interface Context {\n        progress: Progress\n        token: CancellationToken\n        accept: (entry: UploadEntry) => Promise<void>\n    }\n    export interface Form {\n        targetInput: HTMLInputElement\n        fileInput: HTMLInputElement\n        progress?: FileUploadProgressParams\n        onDidUpload?: (uri: string) => void\n    }\n    export interface UploadParams {\n        source: FileUploadService.Source,\n        progress: Progress,\n        token: CancellationToken,\n        onDidUpload?: (uri: string) => void\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { injectable, inject } from 'inversify';\nimport URI from '@theia/core/lib/common/uri';\nimport { environment } from '@theia/application-package/lib/environment';\nimport { MaybePromise, SelectionService, isCancelled } from '@theia/core/lib/common';\nimport { Command, CommandContribution, CommandRegistry } from '@theia/core/lib/common/command';\nimport {\n    FrontendApplicationContribution, ApplicationShell,\n    NavigatableWidget, NavigatableWidgetOptions,\n    Saveable, WidgetManager, StatefulWidget, FrontendApplication, ExpandableTreeNode\n} from '@theia/core/lib/browser';\nimport { FileSystemWatcher, FileChangeEvent, FileMoveEvent, FileChangeType } from './filesystem-watcher';\nimport { MimeService } from '@theia/core/lib/browser/mime-service';\nimport { TreeWidgetSelection } from '@theia/core/lib/browser/tree/tree-widget-selection';\nimport { FileSystemPreferences } from './filesystem-preferences';\nimport { FileSelection } from './file-selection';\nimport { FileUploadService } from './file-upload-service';\n\nexport namespace FileSystemCommands {\n\n    export const UPLOAD: Command = {\n        id: 'file.upload',\n        category: 'File',\n        label: 'Upload Files...'\n    };\n\n}\n\n@injectable()\nexport class FileSystemFrontendContribution implements FrontendApplicationContribution, CommandContribution {\n\n    @inject(ApplicationShell)\n    protected readonly shell: ApplicationShell;\n\n    @inject(WidgetManager)\n    protected readonly widgetManager: WidgetManager;\n\n    @inject(FileSystemWatcher)\n    protected readonly fileSystemWatcher: FileSystemWatcher;\n\n    @inject(MimeService)\n    protected readonly mimeService: MimeService;\n\n    @inject(FileSystemPreferences)\n    protected readonly preferences: FileSystemPreferences;\n\n    @inject(SelectionService)\n    protected readonly selectionService: SelectionService;\n\n    @inject(FileUploadService)\n    protected readonly uploadService: FileUploadService;\n\n    initialize(): void {\n        this.fileSystemWatcher.onFilesChanged(event => this.run(() => this.updateWidgets(event)));\n        this.fileSystemWatcher.onDidMove(event => this.run(() => this.moveWidgets(event)));\n    }\n\n    onStart?(app: FrontendApplication): MaybePromise<void> {\n        this.updateAssociations();\n        this.preferences.onPreferenceChanged(e => {\n            if (e.preferenceName === 'files.associations') {\n                this.updateAssociations();\n            }\n        });\n    }\n\n    registerCommands(commands: CommandRegistry): void {\n        commands.registerCommand(FileSystemCommands.UPLOAD, new FileSelection.CommandHandler(this.selectionService, {\n            multi: false,\n            isEnabled: selection => this.canUpload(selection),\n            isVisible: selection => this.canUpload(selection),\n            execute: selection => this.upload(selection)\n        }));\n    }\n\n    protected canUpload({ fileStat }: FileSelection): boolean {\n        return !environment.electron.is() && fileStat.isDirectory;\n    }\n\n    protected async upload(selection: FileSelection): Promise<void> {\n        try {\n            const source = TreeWidgetSelection.getSource(this.selectionService.selection);\n            await this.uploadService.upload(selection.fileStat.uri);\n            if (ExpandableTreeNode.is(selection) && source) {\n                await source.model.expandNode(selection);\n            }\n        } catch (e) {\n            if (!isCancelled(e)) {\n                console.error(e);\n            }\n        }\n    }\n\n    protected pendingOperation = Promise.resolve();\n    protected run(operation: () => MaybePromise<void>): Promise<void> {\n        return this.pendingOperation = this.pendingOperation.then(async () => {\n            try {\n                await operation();\n            } catch (e) {\n                console.error(e);\n            }\n        });\n    }\n\n    protected async moveWidgets(event: FileMoveEvent): Promise<void> {\n        const promises: Promise<void>[] = [];\n        for (const [resourceUri, widget] of NavigatableWidget.get(this.shell.widgets)) {\n            promises.push(this.moveWidget(resourceUri, widget, event));\n        }\n        await Promise.all(promises);\n    }\n    protected async moveWidget(resourceUri: URI, widget: NavigatableWidget, event: FileMoveEvent): Promise<void> {\n        const newResourceUri = this.createMoveToUri(resourceUri, widget, event);\n        if (!newResourceUri) {\n            return;\n        }\n        const description = this.widgetManager.getDescription(widget);\n        if (!description) {\n            return;\n        }\n        const { factoryId, options } = description;\n        if (!NavigatableWidgetOptions.is(options)) {\n            return;\n        }\n        const newWidget = await this.widgetManager.getOrCreateWidget(factoryId, <NavigatableWidgetOptions>{\n            ...options,\n            uri: newResourceUri.toString()\n        });\n        const oldState = StatefulWidget.is(widget) ? widget.storeState() : undefined;\n        if (oldState && StatefulWidget.is(newWidget)) {\n            newWidget.restoreState(oldState);\n        }\n        const area = this.shell.getAreaFor(widget) || 'main';\n        this.shell.addWidget(newWidget, {\n            area, ref: widget\n        });\n        if (this.shell.activeWidget === widget) {\n            this.shell.activateWidget(newWidget.id);\n        } else if (widget.isVisible) {\n            this.shell.revealWidget(newWidget.id);\n        }\n    }\n    protected createMoveToUri(resourceUri: URI, widget: NavigatableWidget, event: FileMoveEvent): URI | undefined {\n        const path = event.sourceUri.relative(resourceUri);\n        const targetUri = path && event.targetUri.resolve(path);\n        return targetUri && widget.createMoveToUri(targetUri);\n    }\n\n    protected readonly deletedSuffix = ' (deleted from disk)';\n    protected updateWidgets(event: FileChangeEvent): void {\n        const relevantEvent = event.filter(({ type }) => type !== FileChangeType.UPDATED);\n        if (relevantEvent.length) {\n            this.doUpdateWidgets(relevantEvent);\n        }\n    }\n    protected doUpdateWidgets(event: FileChangeEvent): void {\n        const dirty = new Set<string>();\n        const toClose = new Map<string, NavigatableWidget[]>();\n        for (const [uri, widget] of NavigatableWidget.get(this.shell.widgets)) {\n            this.updateWidget(uri, widget, event, { dirty, toClose });\n        }\n        for (const [uriString, widgets] of toClose.entries()) {\n            if (!dirty.has(uriString)) {\n                for (const widget of widgets) {\n                    widget.close();\n                }\n            }\n        }\n    }\n    protected updateWidget(uri: URI, widget: NavigatableWidget, event: FileChangeEvent, { dirty, toClose }: {\n        dirty: Set<string>;\n        toClose: Map<string, NavigatableWidget[]>\n    }): void {\n        const label = widget.title.label;\n        const deleted = label.endsWith(this.deletedSuffix);\n        if (FileChangeEvent.isDeleted(event, uri)) {\n            const uriString = uri.toString();\n            if (Saveable.isDirty(widget)) {\n                if (!deleted) {\n                    widget.title.label += this.deletedSuffix;\n                }\n                dirty.add(uriString);\n            }\n            const widgets = toClose.get(uriString) || [];\n            widgets.push(widget);\n            toClose.set(uriString, widgets);\n        } else if (FileChangeEvent.isAdded(event, uri)) {\n            if (deleted) {\n                widget.title.label = widget.title.label.substr(0, label.length - this.deletedSuffix.length);\n            }\n        }\n    }\n\n    protected updateAssociations(): void {\n        const fileAssociations = this.preferences['files.associations'];\n        const mimeAssociations = Object.keys(fileAssociations).map(filepattern => ({ id: fileAssociations[filepattern], filepattern }));\n        this.mimeService.setAssociations(mimeAssociations);\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2017 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { interfaces } from 'inversify';\nimport {\n    createPreferenceProxy,\n    PreferenceProxy,\n    PreferenceService,\n    PreferenceSchema,\n    PreferenceContribution\n} from '@theia/core/lib/browser/preferences';\n\nexport const filesystemPreferenceSchema: PreferenceSchema = {\n    'type': 'object',\n    'properties': {\n        'files.watcherExclude': {\n            'description': 'List of paths to exclude from the filesystem watcher',\n            'additionalProperties': {\n                'type': 'boolean'\n            },\n            'default': {\n                '**/.git/objects/**': true,\n                '**/.git/subtree-cache/**': true,\n                '**/node_modules/**': true\n            },\n            'scope': 'resource'\n        },\n        'files.exclude': {\n            'type': 'object',\n            'default': { '**/.git': true, '**/.svn': true, '**/.hg': true, '**/CVS': true, '**/.DS_Store': true },\n            'description': 'Configure glob patterns for excluding files and folders.',\n            'scope': 'resource'\n        },\n        'files.enableTrash': {\n            'type': 'boolean',\n            'default': true,\n            'description': 'Moves files/folders to the OS trash (recycle bin on Windows) when deleting. Disabling this will delete files/folders permanently.'\n        },\n        'files.associations': {\n            'type': 'object',\n            'description': 'Configure file associations to languages (e.g. \\\"*.extension\\\": \\\"html\\\"). \\\nThese have precedence over the default associations of the languages installed.'\n        }\n    }\n};\n\nexport interface FileSystemConfiguration {\n    'files.watcherExclude': { [globPattern: string]: boolean };\n    'files.exclude': { [key: string]: boolean };\n    'files.enableTrash': boolean;\n    'files.associations': { [filepattern: string]: string };\n}\n\nexport const FileSystemPreferences = Symbol('FileSystemPreferences');\nexport type FileSystemPreferences = PreferenceProxy<FileSystemConfiguration>;\n\nexport function createFileSystemPreferences(preferences: PreferenceService): FileSystemPreferences {\n    return createPreferenceProxy(preferences, filesystemPreferenceSchema);\n}\n\nexport function bindFileSystemPreferences(bind: interfaces.Bind): void {\n    bind(FileSystemPreferences).toDynamicValue(ctx => {\n        const preferences = ctx.container.get<PreferenceService>(PreferenceService);\n        return createFileSystemPreferences(preferences);\n    }).inSingletonScope();\n\n    bind(PreferenceContribution).toConstantValue({ schema: filesystemPreferenceSchema });\n}\n","/********************************************************************************\n * Copyright (C) 2017 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { injectable, inject, postConstruct } from 'inversify';\nimport { Disposable, DisposableCollection, Emitter, Event } from '@theia/core/lib/common';\nimport URI from '@theia/core/lib/common/uri';\nimport { FileSystem, FileShouldOverwrite } from '../common/filesystem';\nimport { DidFilesChangedParams, FileChangeType, FileSystemWatcherServer, WatchOptions } from '../common/filesystem-watcher-protocol';\nimport { FileSystemPreferences } from './filesystem-preferences';\n\nexport {\n    FileChangeType\n};\n\nexport interface FileChange {\n    uri: URI;\n    type: FileChangeType;\n}\nexport namespace FileChange {\n    export function isUpdated(change: FileChange, uri: URI): boolean {\n        return change.type === FileChangeType.UPDATED && uri.toString() === change.uri.toString();\n    }\n    export function isAdded(change: FileChange, uri: URI): boolean {\n        return change.type === FileChangeType.ADDED && uri.toString() === change.uri.toString();\n    }\n    export function isDeleted(change: FileChange, uri: URI): boolean {\n        return change.type === FileChangeType.DELETED && change.uri.isEqualOrParent(uri);\n    }\n    export function isAffected(change: FileChange, uri: URI): boolean {\n        return isDeleted(change, uri) || uri.toString() === change.uri.toString();\n    }\n    export function isChanged(change: FileChange, uri: URI): boolean {\n        return !isDeleted(change, uri) && uri.toString() === change.uri.toString();\n    }\n}\n\nexport type FileChangeEvent = FileChange[];\nexport namespace FileChangeEvent {\n    export function isUpdated(event: FileChangeEvent, uri: URI): boolean {\n        return event.some(change => FileChange.isUpdated(change, uri));\n    }\n    export function isAdded(event: FileChangeEvent, uri: URI): boolean {\n        return event.some(change => FileChange.isAdded(change, uri));\n    }\n    export function isDeleted(event: FileChangeEvent, uri: URI): boolean {\n        return event.some(change => FileChange.isDeleted(change, uri));\n    }\n    export function isAffected(event: FileChangeEvent, uri: URI): boolean {\n        return event.some(change => FileChange.isAffected(change, uri));\n    }\n    export function isChanged(event: FileChangeEvent, uri: URI): boolean {\n        return !isDeleted(event, uri) && event.some(change => FileChange.isChanged(change, uri));\n    }\n}\n\nexport interface FileMoveEvent {\n    sourceUri: URI\n    targetUri: URI\n}\nexport namespace FileMoveEvent {\n    export function isRename({ sourceUri, targetUri }: FileMoveEvent): boolean {\n        return sourceUri.parent.toString() === targetUri.parent.toString();\n    }\n}\n\nexport interface FileWillMoveEvent {\n    sourceUri: URI\n    targetUri: URI\n}\n\n@injectable()\nexport class FileSystemWatcher implements Disposable {\n\n    protected readonly toDispose = new DisposableCollection();\n    protected readonly toRestartAll = new DisposableCollection();\n\n    protected readonly onFileChangedEmitter = new Emitter<FileChangeEvent>();\n    readonly onFilesChanged: Event<FileChangeEvent> = this.onFileChangedEmitter.event;\n\n    protected readonly onDidMoveEmitter = new Emitter<FileMoveEvent>();\n    readonly onDidMove: Event<FileMoveEvent> = this.onDidMoveEmitter.event;\n\n    protected readonly onWillMoveEmitter = new Emitter<FileWillMoveEvent>();\n    readonly onWillMove: Event<FileWillMoveEvent> = this.onWillMoveEmitter.event;\n\n    @inject(FileSystemWatcherServer)\n    protected readonly server: FileSystemWatcherServer;\n\n    @inject(FileSystemPreferences)\n    protected readonly preferences: FileSystemPreferences;\n\n    @inject(FileSystem)\n    protected readonly filesystem: FileSystem;\n\n    // This is injected so we can avoid including UI stuff and make this class\n    // unit-testable.\n    @inject(FileShouldOverwrite)\n    protected readonly shouldOverwrite: FileShouldOverwrite;\n\n    @postConstruct()\n    protected init(): void {\n        this.toDispose.push(this.onFileChangedEmitter);\n        this.toDispose.push(this.onDidMoveEmitter);\n\n        this.toDispose.push(this.server);\n        this.server.setClient({\n            onDidFilesChanged: e => this.onDidFilesChanged(e)\n        });\n\n        this.toDispose.push(this.preferences.onPreferenceChanged(e => {\n            if (e.preferenceName === 'files.watcherExclude') {\n                this.toRestartAll.dispose();\n            }\n        }));\n\n        this.filesystem.setClient({\n            shouldOverwrite: this.shouldOverwrite.bind(this),\n            onDidMove: this.fireDidMove.bind(this),\n            onWillMove: this.fireWillMove.bind(this)\n        });\n    }\n\n    /**\n     * Stop watching.\n     */\n    dispose(): void {\n        this.toDispose.dispose();\n    }\n\n    protected onDidFilesChanged(event: DidFilesChangedParams): void {\n        const changes = event.changes.map(change => <FileChange>{\n            uri: new URI(change.uri),\n            type: change.type\n        });\n        this.onFileChangedEmitter.fire(changes);\n    }\n\n    /**\n     * Start file watching under the given uri.\n     *\n     * Resolve when watching is started.\n     * Return a disposable to stop file watching under the given uri.\n     */\n    watchFileChanges(uri: URI): Promise<Disposable> {\n        return this.createWatchOptions(uri.toString())\n            .then(options =>\n                this.server.watchFileChanges(uri.toString(), options)\n            )\n            .then(watcher => {\n                const toDispose = new DisposableCollection();\n                const toStop = Disposable.create(() =>\n                    this.server.unwatchFileChanges(watcher)\n                );\n                const toRestart = toDispose.push(toStop);\n                this.toRestartAll.push(Disposable.create(() => {\n                    toRestart.dispose();\n                    toStop.dispose();\n                    this.watchFileChanges(uri).then(disposable =>\n                        toDispose.push(disposable)\n                    );\n                }));\n                return toDispose;\n            });\n    }\n\n    protected createWatchOptions(uri: string): Promise<WatchOptions> {\n        return this.getIgnored(uri).then(ignored => ({\n            // always ignore temporary upload files\n            ignored: ignored.concat('**/theia_upload_*')\n        }));\n    }\n\n    protected async getIgnored(uri: string): Promise<string[]> {\n        const patterns = this.preferences.get('files.watcherExclude', undefined, uri);\n        return Object.keys(patterns).filter(pattern => patterns[pattern]);\n    }\n\n    protected fireDidMove(sourceUri: string, targetUri: string): void {\n        this.onDidMoveEmitter.fire({\n            sourceUri: new URI(sourceUri),\n            targetUri: new URI(targetUri)\n        });\n    }\n\n    protected fireWillMove(sourceUri: string, targetUri: string): void {\n        this.onWillMoveEmitter.fire({\n            sourceUri: new URI(sourceUri),\n            targetUri: new URI(targetUri)\n        });\n    }\n\n}\n","/********************************************************************************\n * Copyright (C) 2017 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nexport * from './location';\nexport * from './file-tree';\nexport * from './file-dialog';\nexport * from './filesystem-preferences';\nexport * from './filesystem-watcher';\nexport * from './file-resource';\n","/********************************************************************************\n * Copyright (C) 2017 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nexport * from './location-service';\nexport * from './location-renderer';\n","/********************************************************************************\n * Copyright (C) 2017 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport URI from '@theia/core/lib/common/uri';\nimport { LocationService } from './location-service';\nimport { ReactRenderer } from '@theia/core/lib/browser/widgets/react-renderer';\nimport * as React from 'react';\n\nexport class LocationListRenderer extends ReactRenderer {\n\n    protected _drives: URI[] | undefined;\n\n    constructor(\n        protected readonly service: LocationService,\n        host?: HTMLElement\n    ) {\n        super(host);\n        this.doLoadDrives();\n    }\n\n    render(): void {\n        super.render();\n        const locationList = this.locationList;\n        if (locationList) {\n            const currentLocation = this.service.location;\n            locationList.value = currentLocation ? currentLocation.toString() : '';\n        }\n    }\n\n    protected readonly handleLocationChanged = (e: React.ChangeEvent<HTMLSelectElement>) => this.onLocationChanged(e);\n    protected doRender(): React.ReactNode {\n        const options = this.collectLocations().map(value => this.renderLocation(value));\n        return <select className={'theia-select ' + LocationListRenderer.Styles.LOCATION_LIST_CLASS} onChange={this.handleLocationChanged}>{...options}</select>;\n    }\n\n    /**\n     * Collects the available locations based on the currently selected, and appends the available drives to it.\n     */\n    protected collectLocations(): LocationListRenderer.Location[] {\n        const location = this.service.location;\n        const locations: LocationListRenderer.Location[] = (!!location ? location.allLocations : []).map(uri => ({ uri }));\n        if (this._drives) {\n            const drives = this._drives.map(uri => ({ uri, isDrive: true }));\n            // `URI.allLocations` returns with the URI without the trailing slash unlike `FileUri.create(fsPath)`.\n            // to be able to compare file:///path/to/resource with file:///path/to/resource/.\n            const toUriString = (uri: URI) => {\n                const toString = uri.toString();\n                return toString.endsWith('/') ? toString.slice(0, -1) : toString;\n            };\n            drives.forEach(drive => {\n                const index = locations.findIndex(loc => toUriString(loc.uri) === toUriString(drive.uri));\n                // Ignore drives which are already discovered as a location based on the current model root URI.\n                if (index === -1) {\n                    // Make sure, it does not have the trailing slash.\n                    locations.push({ uri: new URI(toUriString(drive.uri)), isDrive: true });\n                } else {\n                    // This is necessary for Windows to be able to show `/e:/` as a drive and `c:` as \"non-drive\" in the same way.\n                    // `URI.path.toString()` Vs. `URI.displayName` behaves a bit differently on Windows.\n                    // https://github.com/eclipse-theia/theia/pull/3038#issuecomment-425944189\n                    locations[index].isDrive = true;\n                }\n            });\n        }\n        this.doLoadDrives();\n        return locations;\n    }\n\n    /**\n     * Asynchronously loads the drives (if not yet available) and triggers a UI update on success with the new values.\n     */\n    protected doLoadDrives(): void {\n        if (!this._drives) {\n            this.service.drives().then(drives => {\n                // If the `drives` are empty, something already went wrong.\n                if (drives.length > 0) {\n                    this._drives = drives;\n                    this.render();\n                }\n            });\n        }\n    }\n\n    protected renderLocation(location: LocationListRenderer.Location): React.ReactNode {\n        const { uri, isDrive } = location;\n        const value = uri.toString();\n        return <option value={value} key={uri.toString()}>{isDrive ? uri.path.toString() : uri.displayName}</option>;\n    }\n\n    protected onLocationChanged(e: React.ChangeEvent<HTMLSelectElement>): void {\n        const locationList = this.locationList;\n        if (locationList) {\n            const value = locationList.value;\n            const uri = new URI(value);\n            this.service.location = uri;\n        }\n        e.preventDefault();\n        e.stopPropagation();\n    }\n\n    get locationList(): HTMLSelectElement | undefined {\n        const locationList = this.host.getElementsByClassName(LocationListRenderer.Styles.LOCATION_LIST_CLASS)[0];\n        if (locationList instanceof HTMLSelectElement) {\n            return locationList;\n        }\n        return undefined;\n    }\n\n}\n\nexport namespace LocationListRenderer {\n\n    export namespace Styles {\n        export const LOCATION_LIST_CLASS = 'theia-LocationList';\n    }\n\n    export interface Location {\n        uri: URI;\n        isDrive?: boolean;\n    }\n\n}\n","/********************************************************************************\n * Copyright (C) 2018 Ericsson and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { FileStat } from './filesystem';\nimport URI from '@theia/core/lib/common/uri';\nimport { Path } from '@theia/core/lib/common';\n\nexport namespace FileSystemUtils {\n\n    /**\n     * Tildify path, replacing `home` with `~` if user's `home` is present at the beginning of the path.\n     * This is a non-operation for Windows.\n     *\n     * @param resourcePath\n     * @param home\n     */\n    export function tildifyPath(resourcePath: string, home: string): string {\n        const path = new Path(resourcePath);\n        const isWindows = path.root && Path.isDrive(path.root.base);\n\n        if (!isWindows && home && resourcePath.indexOf(`${home}/`) === 0) {\n            return resourcePath.replace(`${home}/`, '~/');\n        }\n\n        return resourcePath;\n    }\n\n    /**\n     * Generate unique URI for a given parent which does not collide\n     *\n     * @param parentUri the `URI` of the parent\n     * @param parent the `FileStat` of the parent\n     * @param name the resource name\n     * @param ext the resource extension\n     */\n    export function generateUniqueResourceURI(parentUri: URI, parent: FileStat, name: string, ext: string = ''): URI {\n        const children = !parent.children ? [] : parent.children!.map(child => new URI(child.uri));\n\n        let index = 1;\n        let base = name + ext;\n        while (children.some(child => child.path.base === base)) {\n            index = index + 1;\n            base = name + '_' + index + ext;\n        }\n        return parentUri.resolve(base);\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2017 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { injectable, inject } from 'inversify';\nimport { JsonRpcServer, JsonRpcProxy } from '@theia/core';\n\nexport const fileSystemWatcherPath = '/services/fs-watcher';\n\nexport const FileSystemWatcherServer = Symbol('FileSystemWatcherServer');\nexport interface FileSystemWatcherServer extends JsonRpcServer<FileSystemWatcherClient> {\n    /**\n     * Start file watching for the given param.\n     * Resolve when watching is started.\n     * Return a watcher id.\n     */\n    watchFileChanges(uri: string, options?: WatchOptions): Promise<number>;\n\n    /**\n     * Stop file watching for the given id.\n     * Resolve when watching is stopped.\n     */\n    unwatchFileChanges(watcher: number): Promise<void>;\n}\n\nexport interface FileSystemWatcherClient {\n    /**\n     * Notify when files under watched uris are changed.\n     */\n    onDidFilesChanged(event: DidFilesChangedParams): void;\n}\n\nexport interface WatchOptions {\n    ignored: string[];\n}\n\nexport interface DidFilesChangedParams {\n    changes: FileChange[];\n}\n\nexport interface FileChange {\n    uri: string;\n    type: FileChangeType;\n}\n\nexport enum FileChangeType {\n    UPDATED = 0,\n    ADDED = 1,\n    DELETED = 2\n}\n\nexport const FileSystemWatcherServerProxy = Symbol('FileSystemWatcherServerProxy');\nexport type FileSystemWatcherServerProxy = JsonRpcProxy<FileSystemWatcherServer>;\n\n@injectable()\nexport class ReconnectingFileSystemWatcherServer implements FileSystemWatcherServer {\n\n    protected watcherSequence = 1;\n    protected readonly watchParams = new Map<number, {\n        uri: string;\n        options?: WatchOptions\n    }>();\n    protected readonly localToRemoteWatcher = new Map<number, number>();\n\n    constructor(\n        @inject(FileSystemWatcherServerProxy) protected readonly proxy: FileSystemWatcherServerProxy\n    ) {\n        const onInitialized = this.proxy.onDidOpenConnection(() => {\n            // skip reconnection on the first connection\n            onInitialized.dispose();\n            this.proxy.onDidOpenConnection(() => this.reconnect());\n        });\n    }\n\n    protected reconnect(): void {\n        for (const [watcher, { uri, options }] of this.watchParams.entries()) {\n            this.doWatchFileChanges(watcher, uri, options);\n        }\n    }\n\n    dispose(): void {\n        this.proxy.dispose();\n    }\n\n    watchFileChanges(uri: string, options?: WatchOptions): Promise<number> {\n        const watcher = this.watcherSequence++;\n        this.watchParams.set(watcher, { uri, options });\n        return this.doWatchFileChanges(watcher, uri, options);\n    }\n\n    protected doWatchFileChanges(watcher: number, uri: string, options?: WatchOptions): Promise<number> {\n        return this.proxy.watchFileChanges(uri, options).then(remote => {\n            this.localToRemoteWatcher.set(watcher, remote);\n            return watcher;\n        });\n    }\n\n    unwatchFileChanges(watcher: number): Promise<void> {\n        this.watchParams.delete(watcher);\n        const remote = this.localToRemoteWatcher.get(watcher);\n        if (remote) {\n            this.localToRemoteWatcher.delete(watcher);\n            return this.proxy.unwatchFileChanges(remote);\n        }\n        return Promise.resolve();\n    }\n\n    setClient(client: FileSystemWatcherClient | undefined): void {\n        this.proxy.setClient(client);\n    }\n\n}\n","/********************************************************************************\n * Copyright (C) 2017 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { TextDocumentContentChangeEvent } from 'vscode-languageserver-protocol';\nimport { JsonRpcServer, ApplicationError } from '@theia/core/lib/common';\nimport { injectable } from 'inversify';\nexport const fileSystemPath = '/services/filesystem';\n\nexport const FileSystem = Symbol('FileSystem');\n\nexport interface FileSystem extends JsonRpcServer<FileSystemClient> {\n\n    /**\n     * Returns the file stat for the given URI.\n     *\n     * If the uri points to a folder it will contain one level of unresolved children.\n     *\n     * `undefined` if a file for the given URI does not exist.\n     */\n    getFileStat(uri: string): Promise<FileStat | undefined>;\n\n    /**\n     * Finds out if a file identified by the resource exists.\n     */\n    exists(uri: string): Promise<boolean>;\n\n    /**\n     * Resolve the contents of a file identified by the resource.\n     */\n    resolveContent(uri: string, options?: { encoding?: string }): Promise<{ stat: FileStat, content: string }>;\n\n    /**\n     * Updates the content replacing its previous value.\n     */\n    setContent(file: FileStat, content: string, options?: { encoding?: string }): Promise<FileStat>;\n\n    /**\n     * Updates the content replacing its previous value.\n     *\n     * The optional parameter `overwriteEncoding` can be used to transform the encoding of a file.\n     *\n     * |   | encoding | overwriteEncoding | behaviour |\n     * |---|----------|-------------------|-----------|\n     * | 1 | undefined |    undefined     | read & write file in default encoding |\n     * | 2 | undefined |                 | read file in default encoding; write file in `overwriteEncoding` |\n     * | 3 |         |     undefined     | read & write file in `encoding` |\n     * | 4 |         |                 | read file in `encoding`; write file in `overwriteEncoding` |\n     */\n    updateContent(file: FileStat, contentChanges: TextDocumentContentChangeEvent[], options?: { encoding?: string, overwriteEncoding?: string }): Promise<FileStat>;\n\n    /**\n     * Moves the file to a new path identified by the resource.\n     *\n     * The optional parameter overwrite can be set to replace an existing file at the location.\n     *\n     * |           | missing | file | empty dir |    dir    |\n     * |-----------|---------|------|-----------|-----------|\n     * | missing   |    x    |   x  |     x     |     x     |\n     * | file      |        |   x  |     x     |     x     |\n     * | empty dir |        |   x  |     x     | overwrite |\n     * | dir       |        |   x  | overwrite | overwrite |\n     *\n     */\n    move(sourceUri: string, targetUri: string, options?: FileMoveOptions): Promise<FileStat>;\n\n    /**\n     * Copies the file to a path identified by the resource.\n     *\n     * The optional parameter overwrite can be set to replace an existing file at the location.\n     */\n    copy(sourceUri: string, targetUri: string, options?: { overwrite?: boolean, recursive?: boolean }): Promise<FileStat>;\n\n    /**\n     * Creates a new file with the given path. The returned promise\n     * will have the stat model object as a result.\n     *\n     * The optional parameter content can be used as value to fill into the new file.\n     */\n    createFile(uri: string, options?: { content?: string, encoding?: string }): Promise<FileStat>;\n\n    /**\n     * Creates a new folder with the given path. The returned promise\n     * will have the stat model object as a result.\n     */\n    createFolder(uri: string): Promise<FileStat>;\n\n    /**\n     * Creates a new empty file if the given path does not exist and otherwise\n     * will set the mtime and atime of the file to the current date.\n     */\n    touchFile(uri: string): Promise<FileStat>;\n\n    /**\n     * Deletes the provided file. The optional moveToTrash parameter allows to\n     * move the file to trash.\n     */\n    delete(uri: string, options?: FileDeleteOptions): Promise<void>;\n\n    /**\n     * Returns the encoding of the given file resource.\n     */\n    getEncoding(uri: string): Promise<string>;\n\n    /**\n     * Guess encoding of a given file based on its content.\n     */\n    guessEncoding(uri: string): Promise<string | undefined>;\n\n    /**\n     * Return list of available roots.\n     */\n    getRoots(): Promise<FileStat[]>;\n\n    /**\n     * Returns a promise that resolves to a file stat representing the current user's home directory.\n     */\n    getCurrentUserHome(): Promise<FileStat | undefined>;\n\n    /**\n     * Resolves to an array of URIs pointing to the available drives on the filesystem.\n     */\n    getDrives(): Promise<string[]>;\n\n    /**\n     * Tests a user's permissions for the file or directory specified by URI.\n     * The mode argument is an optional integer that specifies the accessibility checks to be performed.\n     * Check `FileAccess.Constants` for possible values of mode.\n     * It is possible to create a mask consisting of the bitwise `OR` of two or more values (e.g. FileAccess.Constants.W_OK | FileAccess.Constants.R_OK).\n     * If `mode` is not defined, `FileAccess.Constants.F_OK` will be used instead.\n     */\n    access(uri: string, mode?: number): Promise<boolean>\n\n    /**\n     * Returns the path of the given file URI, specific to the backend's operating system.\n     * If the URI is not a file URI, undefined is returned.\n     *\n     * USE WITH CAUTION: You should always prefer URIs to paths if possible, as they are\n     * portable and platform independent. Paths should only be used in cases you directly\n     * interact with the OS, e.g. when running a command on the shell.\n     */\n    getFsPath(uri: string): Promise<string | undefined>\n}\n\nexport namespace FileAccess {\n\n    export namespace Constants {\n\n        /**\n         * Flag indicating that the file is visible to the calling process.\n         * This is useful for determining if a file exists, but says nothing about rwx permissions. Default if no mode is specified.\n         */\n        export const F_OK: number = 0;\n\n        /**\n         * Flag indicating that the file can be read by the calling process.\n         */\n        export const R_OK: number = 4;\n\n        /**\n         * Flag indicating that the file can be written by the calling process.\n         */\n        export const W_OK: number = 2;\n\n        /**\n         * Flag indicating that the file can be executed by the calling process.\n         * This has no effect on Windows (will behave like `FileAccess.F_OK`).\n         */\n        export const X_OK: number = 1;\n\n    }\n\n}\n\nexport interface FileMoveOptions {\n    overwrite?: boolean;\n}\n\nexport interface FileDeleteOptions {\n    moveToTrash?: boolean\n}\n\n/**\n * A callback type, called when we try to save a file but realize it has been\n * modified by somebody else since we have opened it.  `originalStat` is the\n * stat at the moment we opened the file, `currentStat` is the stat at the\n * moment we try to save it (after the external modification).  The callback\n * should return true if we still want to save the file, false otherwise.\n */\nexport const FileShouldOverwrite = Symbol('FileShouldOverwrite');\nexport interface FileShouldOverwrite {\n    (originalStat: FileStat, currentStat: FileStat): Promise<boolean>;\n}\n\nexport interface FileSystemClient {\n\n    /**\n     * Tests whether the given file can be overwritten\n     * in the case if it is out of sync with the given file stat.\n     */\n    shouldOverwrite: FileShouldOverwrite;\n\n    onDidMove(sourceUri: string, targetUri: string): void;\n\n    onWillMove(sourceUri: string, targetUri: string): void;\n}\n\n@injectable()\nexport class DispatchingFileSystemClient implements FileSystemClient {\n\n    readonly clients = new Set<FileSystemClient>();\n\n    shouldOverwrite(originalStat: FileStat, currentStat: FileStat): Promise<boolean> {\n        return Promise.race([...this.clients].map(client =>\n            client.shouldOverwrite(originalStat, currentStat))\n        );\n    }\n\n    onDidMove(sourceUri: string, targetUri: string): void {\n        this.clients.forEach(client => client.onDidMove(sourceUri, targetUri));\n    }\n\n    onWillMove(sourceUri: string, targetUri: string): void {\n        this.clients.forEach(client => client.onWillMove(sourceUri, targetUri));\n    }\n\n}\n\n/**\n * A file resource with meta information.\n */\nexport interface FileStat {\n\n    /**\n     * The URI of the file.\n     */\n    uri: string;\n\n    /**\n     * The last modification of this file.\n     */\n    lastModification: number;\n\n    /**\n     * `true` if the resource is a directory. Otherwise, `false`.\n     */\n    isDirectory: boolean;\n\n    /**\n     * The children of the file stat.\n     * If it is `undefined` and `isDirectory` is `true`, then this file stat is unresolved.\n     */\n    children?: FileStat[];\n\n    /**\n     * The size of the file if known.\n     */\n    size?: number;\n\n}\n\nexport namespace FileStat {\n    export function is(candidate: Object | undefined): candidate is FileStat {\n        return typeof candidate === 'object' && ('uri' in candidate) && ('lastModification' in candidate) && ('isDirectory' in candidate);\n    }\n\n    export function equals(one: object | undefined, other: object | undefined): boolean {\n        if (!one || !other || !is(one) || !is(other)) {\n            return false;\n        }\n        return one.uri === other.uri\n            && one.lastModification === other.lastModification\n            && one.isDirectory === other.isDirectory;\n    }\n}\n\nexport namespace FileSystemError {\n    export const FileNotFound = ApplicationError.declare(-33000, (uri: string, prefix?: string) => ({\n        message: `${prefix ? prefix + ' ' : ''}'${uri}' has not been found.`,\n        data: { uri }\n    }));\n    export const FileExists = ApplicationError.declare(-33001, (uri: string, prefix?: string) => ({\n        message: `${prefix ? prefix + ' ' : ''}'${uri}' already exists.`,\n        data: { uri }\n    }));\n    export const FileIsDirectory = ApplicationError.declare(-33002, (uri: string, prefix?: string) => ({\n        message: `${prefix ? prefix + ' ' : ''}'${uri}' is a directory.`,\n        data: { uri }\n    }));\n    export const FileNotDirectory = ApplicationError.declare(-33003, (uri: string, prefix?: string) => ({\n        message: `${prefix ? prefix + ' ' : ''}'${uri}' is not a directory.`,\n        data: { uri }\n    }));\n    export const FileIsOutOfSync = ApplicationError.declare(-33004, (file: FileStat, stat: FileStat) => ({\n        message: `'${file.uri}' is out of sync.`,\n        data: { file, stat }\n    }));\n}\n","/********************************************************************************\n * Copyright (C) 2017 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nexport * from './filesystem';\nexport * from './filesystem-utils';\n","/********************************************************************************\n * Copyright (C) 2017 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nexport * from './language-client-services';\nexport * from './language-client-factory';\nexport * from './language-client-contribution';\nexport * from './languages-frontend-contribution';\nexport * from './languages-frontend-module';\n","/********************************************************************************\n * Copyright (C) 2017 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\n/* eslint-disable @typescript-eslint/no-explicit-any */\n\nimport { injectable, inject } from 'inversify';\nimport { MaybePromise, MessageService, CommandRegistry } from '@theia/core';\nimport { Disposable, DisposableCollection } from '@theia/core/lib/common';\nimport { FrontendApplication, WebSocketConnectionProvider } from '@theia/core/lib/browser';\nimport {\n    LanguageContribution, ILanguageClient, LanguageClientOptions,\n    DocumentSelector, TextDocument, FileSystemWatcher,\n    Workspace, Languages, State\n} from './language-client-services';\nimport { MessageConnection, ResponseError } from 'vscode-jsonrpc';\nimport { LanguageClientFactory } from './language-client-factory';\nimport { WorkspaceService } from '@theia/workspace/lib/browser';\nimport { InitializeParams } from 'monaco-languageclient';\nimport { Deferred } from '@theia/core/lib/common/promise-util';\n\nexport const LanguageClientContribution = Symbol('LanguageClientContribution');\nexport interface LanguageClientContribution extends LanguageContribution {\n    readonly running: boolean;\n    readonly languageClient: Promise<ILanguageClient>;\n    waitForActivation(app: FrontendApplication): Promise<void>;\n    activate(app: FrontendApplication): Disposable;\n    deactivate(): void;\n    restart(): void;\n}\n\n@injectable()\nexport abstract class BaseLanguageClientContribution implements LanguageClientContribution {\n\n    abstract readonly id: string;\n    abstract readonly name: string;\n\n    protected _languageClient: ILanguageClient | undefined;\n\n    protected resolveReady: (languageClient: ILanguageClient) => void;\n    protected ready: Promise<ILanguageClient>;\n\n    @inject(MessageService) protected readonly messageService: MessageService;\n    @inject(CommandRegistry) protected readonly registry: CommandRegistry;\n    @inject(WorkspaceService) protected readonly workspaceService: WorkspaceService;\n    @inject(LanguageContribution.Service) protected readonly languageContributionService: LanguageContribution.Service;\n    @inject(WebSocketConnectionProvider) protected readonly connectionProvider: WebSocketConnectionProvider;\n\n    constructor(\n        @inject(Workspace) protected readonly workspace: Workspace,\n        @inject(Languages) protected readonly languages: Languages,\n        @inject(LanguageClientFactory) protected readonly languageClientFactory: LanguageClientFactory\n    ) {\n        this.waitForReady();\n    }\n\n    get languageClient(): Promise<ILanguageClient> {\n        return this._languageClient ? Promise.resolve(this._languageClient) : this.ready;\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    waitForActivation(app: FrontendApplication): Promise<any> {\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        const activationPromises: Promise<any>[] = [];\n        const workspaceContains = this.workspaceContains;\n        if (workspaceContains.length !== 0) {\n            activationPromises.push(this.waitForItemInWorkspace());\n        }\n        const documentSelector = this.documentSelector;\n        if (documentSelector) {\n            activationPromises.push(this.waitForOpenTextDocument(documentSelector));\n        }\n        if (activationPromises.length !== 0) {\n            return Promise.all([\n                this.workspace.ready,\n                Promise.race(activationPromises.map(p => new Promise(async resolve => {\n                    try {\n                        await p;\n                        resolve();\n                    } catch (e) {\n                        console.error(e);\n                    }\n                })))\n            ]);\n        }\n        return this.workspace.ready;\n    }\n\n    protected deferredConnection = new Deferred<MessageConnection>();\n\n    protected readonly toDeactivate = new DisposableCollection();\n    activate(): Disposable {\n        if (this.toDeactivate.disposed) {\n            if (!this._languageClient) {\n                this._languageClient = this.createLanguageClient(() => this.deferredConnection.promise);\n                this._languageClient.onDidChangeState(({ newState }) => {\n                    this.state = newState;\n                });\n            }\n            const toStop = new DisposableCollection(Disposable.create(() => { })); // mark as not disposed\n            this.toDeactivate.push(toStop);\n            this.doActivate(toStop);\n        }\n        return this.toDeactivate;\n    }\n    deactivate(): void {\n        this.toDeactivate.dispose();\n    }\n\n    protected stop = Promise.resolve();\n    protected async doActivate(toStop: DisposableCollection): Promise<void> {\n        try {\n            // make sure that the previous client is stopped to avoid duplicate commands and language services\n            await this.stop;\n            if (toStop.disposed) {\n                return;\n            }\n            const startParameters = await this.getStartParameters();\n            if (toStop.disposed) {\n                return;\n            }\n            const sessionId = await this.languageContributionService.create(this.id, startParameters);\n            if (toStop.disposed) {\n                this.languageContributionService.destroy(sessionId);\n                return;\n            }\n            toStop.push(Disposable.create(() => this.languageContributionService.destroy(sessionId)));\n            this.connectionProvider.listen({\n                path: LanguageContribution.getPath(this, sessionId),\n                onConnection: messageConnection => {\n                    this.deferredConnection.resolve(messageConnection);\n                    messageConnection.onDispose(() => this.deferredConnection = new Deferred<MessageConnection>());\n                    if (toStop.disposed) {\n                        messageConnection.dispose();\n                        return;\n                    }\n                    toStop.push(Disposable.create(() => this.stop = (async () => {\n                        try {\n                            // avoid calling stop if start failed\n                            await this._languageClient!.onReady();\n                            // remove all listeners\n                            await this._languageClient!.stop();\n                        } catch {\n                            try {\n                                // if start or stop failed make sure the the connection is closed\n                                messageConnection.dispose();\n                            } catch { /* no-op */ }\n                        }\n                    })()));\n                    toStop.push(messageConnection.onClose(() => this.forceRestart()));\n                    this._languageClient!.start();\n                    // it should be called after `start` that `onReady` promise gets reinitialized\n                    this.onWillStart(this._languageClient!, toStop);\n                }\n            }, { reconnecting: false });\n        } catch (e) {\n            console.error(e);\n            if (!toStop.disposed) {\n                this.forceRestart();\n            }\n        }\n    }\n\n    protected state: State | undefined;\n    get running(): boolean {\n        return !this.toDeactivate.disposed && this.state === State.Running;\n    }\n\n    restart(): void {\n        if (!this.running) {\n            return;\n        }\n        this.forceRestart();\n    }\n\n    protected forceRestart(): void {\n        this.deactivate();\n        this.activate();\n    }\n\n    protected onWillStart(languageClient: ILanguageClient, toStop?: DisposableCollection): void {\n        languageClient.onReady().then(() => this.onReady(languageClient, toStop));\n    }\n\n    protected onReady(languageClient: ILanguageClient, toStop?: DisposableCollection): void {\n        this._languageClient = languageClient;\n        this.resolveReady(this._languageClient);\n        this.waitForReady();\n    }\n\n    protected waitForReady(): void {\n        this.ready = new Promise<ILanguageClient>(resolve =>\n            this.resolveReady = resolve\n        );\n    }\n\n    protected createLanguageClient(connection: MessageConnection | (() => MaybePromise<MessageConnection>)): ILanguageClient {\n        const clientOptions = this.createOptions();\n        return this.languageClientFactory.get(this, clientOptions, connection);\n    }\n\n    protected createOptions(): LanguageClientOptions {\n        const { id, documentSelector, fileEvents, configurationSection, initializationOptions } = this;\n        return {\n            documentSelector,\n            synchronize: { fileEvents, configurationSection },\n            initializationFailedHandler: err => this.handleInitializationFailed(err),\n            diagnosticCollectionName: id,\n            initializationOptions\n        };\n    }\n    protected handleInitializationFailed(err: ResponseError<InitializeParams> | Error | any): boolean {\n        this.deactivate();\n        const detail = err instanceof Error ? `: ${err.message}` : '.';\n        this.messageService.error(`Failed to start ${this.name} language server${detail}`, 'Retry').then(result => {\n            if (result) {\n                this.activate();\n            }\n        });\n        return false;\n    }\n\n    protected getStartParameters(): MaybePromise<any> {\n        return undefined;\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    protected get initializationOptions(): any | (() => any) | undefined {\n        return undefined;\n    }\n\n    protected get configurationSection(): string | string[] | undefined {\n        return undefined;\n    }\n\n    protected get workspaceContains(): string[] {\n        return [];\n    }\n\n    protected get documentSelector(): DocumentSelector | undefined {\n        return [this.id];\n    }\n\n    protected _fileEvents: FileSystemWatcher[] | undefined;\n    protected get fileEvents(): FileSystemWatcher[] {\n        return this._fileEvents = this._fileEvents || this.createFileEvents();\n    }\n    protected createFileEvents(): FileSystemWatcher[] {\n        const watchers = [];\n        if (this.workspace.createFileSystemWatcher) {\n            for (const globPattern of this.globPatterns) {\n                watchers.push(this.workspace.createFileSystemWatcher(globPattern));\n            }\n        }\n        return watchers;\n    }\n\n    protected get globPatterns(): string[] {\n        return [];\n    }\n\n    /**\n     * Check to see if one of the paths is in the current workspace.\n     */\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    protected async waitForItemInWorkspace(): Promise<any> {\n        const doesContain = await this.workspaceService.containsSome(this.workspaceContains);\n        if (!doesContain) {\n            return new Promise(resolve => { });\n        }\n        return doesContain;\n    }\n\n    // FIXME move it to the workspace\n    protected waitForOpenTextDocument(selector: DocumentSelector): Promise<TextDocument> {\n        const document = this.workspace.textDocuments.filter(doc =>\n            this.languages.match(selector, doc)\n        )[0];\n        if (document !== undefined) {\n            return Promise.resolve(document);\n        }\n        return new Promise<TextDocument>(resolve => {\n            const disposable = this.workspace.onDidOpenTextDocument(doc => {\n                if (this.languages.match(selector, doc)) {\n                    disposable.dispose();\n                    resolve(doc);\n                }\n            });\n        });\n    }\n\n}\n","/********************************************************************************\n * Copyright (C) 2017 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { injectable, inject } from 'inversify';\nimport { MessageConnection } from 'vscode-jsonrpc';\nimport { CommandRegistry, Disposable, MaybePromise } from '@theia/core/lib/common';\nimport { ErrorAction, RevealOutputChannelOn, CloseAction } from 'monaco-languageclient';\nimport {\n    Workspace, Languages, Window, Services,\n    ILanguageClient, LanguageClientOptions, MonacoLanguageClient,\n    createConnection, LanguageContribution\n} from './language-client-services';\nimport { TypeHierarchyFeature } from './typehierarchy/typehierarchy-feature';\n\n@injectable()\nexport class LanguageClientFactory {\n\n    @inject(CommandRegistry) protected readonly registry: CommandRegistry;\n\n    constructor(\n        @inject(Workspace) protected readonly workspace: Workspace,\n        @inject(Languages) protected readonly languages: Languages,\n        @inject(Window) protected readonly window: Window\n    ) {\n        Services.install({\n            workspace,\n            languages,\n            window,\n            commands: {\n                registerCommand: this.registerCommand.bind(this)\n            }\n        });\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    protected registerCommand(id: string, callback: (...args: any[]) => any, thisArg?: any): Disposable {\n        const execute = callback.bind(thisArg);\n        return this.registry.registerCommand({ id }, { execute });\n    }\n\n    get(contribution: LanguageContribution, clientOptions: LanguageClientOptions,\n        connectionProvider: MessageConnection | (() => MaybePromise<MessageConnection>)): ILanguageClient {\n        if (clientOptions.revealOutputChannelOn === undefined) {\n            clientOptions.revealOutputChannelOn = RevealOutputChannelOn.Never;\n        }\n        if (!clientOptions.errorHandler) {\n            clientOptions.errorHandler = {\n                // ignore connection errors\n                error: () => ErrorAction.Continue,\n                closed: () => CloseAction.DoNotRestart\n            };\n        }\n        const initializationFailedHandler = clientOptions.initializationFailedHandler;\n        clientOptions.initializationFailedHandler = e => !!initializationFailedHandler && initializationFailedHandler(e);\n        const client = new MonacoLanguageClient({\n            id: contribution.id,\n            name: contribution.name,\n            clientOptions,\n            connectionProvider: {\n                get: async (errorHandler, closeHandler) => {\n                    const connection = typeof connectionProvider === 'function' ? await connectionProvider() : connectionProvider;\n                    return createConnection(connection, errorHandler, closeHandler);\n                }\n            }\n        });\n        client.registerFeature(new TypeHierarchyFeature(client));\n        return this.patch4085(client);\n    }\n\n    /**\n     * see https://github.com/eclipse-theia/theia/issues/4085\n     * remove when monaco-languageclient is upgraded to latest vscode-languageclient\n     */\n    protected patch4085(client: MonacoLanguageClient): MonacoLanguageClient {\n        const features = client['_dynamicFeatures'] as Map<string, {\n            _listener?: Object | undefined\n            dispose?: Function\n        }>;\n        for (const feature of features.values()) {\n            if (feature.dispose) {\n                const dispose = feature.dispose.bind(feature);\n                feature.dispose = () => {\n                    dispose();\n                    if (feature._listener) {\n                        feature._listener = undefined;\n                    }\n                };\n            }\n        }\n        return client;\n    }\n\n}\n","/********************************************************************************\n * Copyright (C) 2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { injectable, inject, named } from 'inversify';\nimport { ContributionProvider } from '@theia/core/lib/common';\nimport { LanguageClientContribution } from './language-client-contribution';\nimport { ILanguageClient } from './language-client-services';\nimport { LanguageClientProvider } from './language-client-provider';\n\n@injectable()\nexport class LanguageClientProviderImpl implements LanguageClientProvider {\n\n    @inject(ContributionProvider) @named(LanguageClientContribution)\n    private readonly contributions: ContributionProvider<LanguageClientContribution>;\n\n    async getLanguageClient(languageId: string): Promise<ILanguageClient | undefined> {\n        const contribution = this.getLanguageContribution(languageId);\n        if (contribution) {\n            return contribution.languageClient;\n        }\n    }\n\n    protected getLanguageContribution(languageId: string): LanguageClientContribution | undefined {\n        const contributions = this.contributions.getContributions();\n        if (contributions) {\n            for (const contribution of contributions) {\n                if (contribution.id === languageId) {\n                    return contribution;\n                }\n            }\n        }\n        return undefined;\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { ILanguageClient } from './language-client-services';\n\nexport const LanguageClientProvider = Symbol('LanguageClientProvider');\nexport interface LanguageClientProvider {\n    getLanguageClient(languageId: string): Promise<ILanguageClient | undefined>\n}\n","/********************************************************************************\n * Copyright (C) 2017 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport * as services from 'monaco-languageclient/lib/services';\nimport * as connection from 'monaco-languageclient/lib/connection';\nimport * as base from 'monaco-languageclient/lib/monaco-language-client';\nexport * from 'monaco-languageclient';\nexport * from '../common';\n\nexport interface Language {\n    readonly id: string;\n    readonly name: string;\n    readonly extensions: Set<string>;\n    readonly filenames: Set<string>;\n}\n\nexport interface WorkspaceSymbolProvider extends services.WorkspaceSymbolProvider {\n    resolveWorkspaceSymbol?(symbol: services.SymbolInformation, token: services.CancellationToken): Thenable<services.SymbolInformation>\n}\n\nexport const Languages = Symbol('Languages');\nexport interface Languages extends services.Languages {\n    readonly workspaceSymbolProviders?: WorkspaceSymbolProvider[];\n    readonly languages?: Language[]\n    getLanguage?(languageId: string): Language | undefined;\n}\n\nexport const Workspace = Symbol('Workspace');\nexport interface Workspace extends services.Workspace {\n    readonly ready: Promise<void>;\n}\n\nexport const Commands = Symbol('Commands');\nexport interface Commands extends services.Commands { }\n\nexport const Window = Symbol('Window');\nexport interface Window extends services.Window { }\n\nexport const IConnectionProvider = Symbol('IConnectionProvider');\nexport interface IConnectionProvider extends connection.IConnectionProvider { }\n\nexport const ILanguageClient = Symbol('ILanguageClient');\nexport interface ILanguageClient extends base.MonacoLanguageClient { }\n\nexport interface LanguageClientOptions extends base.LanguageClientOptions { }\n","/********************************************************************************\n * Copyright (C) 2019 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { injectable, inject } from 'inversify';\nimport URI from '@theia/core/lib/common/uri';\nimport { ResourceContextKey } from '@theia/core/lib/browser/resource-context-key';\nimport { Languages } from './language-client-services';\n\n@injectable()\nexport class LanguageResourceContextKey extends ResourceContextKey {\n\n    @inject(Languages)\n    protected readonly languages: Languages;\n\n    protected getLanguageId(uri: URI | undefined): string | undefined {\n        const { languages } = this.languages;\n        if (uri && languages) {\n            for (const language of languages) {\n                if (language.extensions.has(uri.path.ext)) {\n                    return language.id;\n                }\n            }\n        }\n        return undefined;\n    }\n\n}\n","/********************************************************************************\n * Copyright (C) 2017 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { injectable, inject, named } from 'inversify';\nimport { ContributionProvider, CommandContribution, CommandRegistry } from '@theia/core/lib/common';\nimport { FrontendApplication, FrontendApplicationContribution, PreferenceSchema, PreferenceSchemaProvider } from '@theia/core/lib/browser';\nimport { LanguageClientContribution } from './language-client-contribution';\n\n@injectable()\nexport class LanguagesFrontendContribution implements FrontendApplicationContribution, CommandContribution {\n\n    @inject(FrontendApplication)\n    protected readonly app: FrontendApplication;\n\n    @inject(PreferenceSchemaProvider)\n    protected preferenceSchema: PreferenceSchemaProvider;\n\n    @inject(ContributionProvider) @named(LanguageClientContribution)\n    protected readonly contributions: ContributionProvider<LanguageClientContribution>;\n\n    onStart(app: FrontendApplication): void {\n        const schema: PreferenceSchema = {\n            type: 'object',\n            properties: {}\n        };\n        for (const contribution of this.contributions.getContributions()) {\n            contribution.waitForActivation(app).then(() =>\n                contribution.activate(app)\n            );\n            schema.properties[`${contribution.id}.trace.server`] = {\n                type: 'string',\n                enum: [\n                    'off',\n                    'messages',\n                    'verbose'\n                ],\n                default: 'off',\n                description: `Enable/disable tracing communications with the ${contribution.name} language server`\n            };\n        }\n        this.preferenceSchema.setSchema(schema);\n    }\n\n    registerCommands(commands: CommandRegistry): void {\n        for (const contribution of this.contributions.getContributions()) {\n            commands.registerCommand({\n                id: `${contribution.id}.server.start`,\n                label: `${contribution.name}: Start Language Server`\n            }, {\n                execute: () => contribution.activate(this.app),\n                isEnabled: () => !contribution.running,\n                isVisible: () => !contribution.running,\n            });\n            commands.registerCommand({\n                id: `${contribution.id}.server.stop`,\n                label: `${contribution.name}: Stop Language Server`\n            }, {\n                execute: () => contribution.deactivate(),\n                isEnabled: () => contribution.running,\n                isVisible: () => contribution.running,\n            });\n            commands.registerCommand({\n                id: `${contribution.id}.server.restart`,\n                label: `${contribution.name}: Restart Language Server`\n            }, {\n                execute: () => contribution.restart(),\n                isEnabled: () => contribution.running,\n                isVisible: () => contribution.running,\n            });\n        }\n    }\n\n}\n","/********************************************************************************\n * Copyright (C) 2017 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { ContainerModule } from 'inversify';\nimport { bindContributionProvider, CommandContribution } from '@theia/core/lib/common';\nimport { ResourceContextKey } from '@theia/core/lib/browser/resource-context-key';\nimport { FrontendApplicationContribution, KeybindingContribution, QuickOpenContribution, WebSocketConnectionProvider } from '@theia/core/lib/browser';\nimport { Window } from './language-client-services';\nimport { WindowImpl } from './window-impl';\nimport { LanguageClientFactory } from './language-client-factory';\nimport { LanguagesFrontendContribution } from './languages-frontend-contribution';\nimport { LanguageClientContribution } from './language-client-contribution';\nimport { WorkspaceSymbolCommand } from './workspace-symbols';\nimport { LanguageClientProvider } from './language-client-provider';\nimport { LanguageClientProviderImpl } from './language-client-provider-impl';\nimport { LanguageContribution } from '../common';\nimport { LanguageResourceContextKey } from './language-resource-context-key';\n\nexport default new ContainerModule((bind, unbind, isBound, rebind) => {\n    bind(Window).to(WindowImpl).inSingletonScope();\n\n    bind(LanguageClientFactory).toSelf().inSingletonScope();\n    bind(LanguageContribution.Service).toDynamicValue(({ container }) =>\n        WebSocketConnectionProvider.createProxy(container, LanguageContribution.servicePath)\n    ).inSingletonScope();\n\n    bindContributionProvider(bind, LanguageClientContribution);\n    bind(LanguagesFrontendContribution).toSelf().inSingletonScope();\n    bind(FrontendApplicationContribution).toService(LanguagesFrontendContribution);\n    bind(CommandContribution).toService(LanguagesFrontendContribution);\n\n    bind(WorkspaceSymbolCommand).toSelf().inSingletonScope();\n    for (const identifier of [CommandContribution, KeybindingContribution, QuickOpenContribution]) {\n        bind(identifier).toService(WorkspaceSymbolCommand);\n    }\n\n    bind(LanguageClientProviderImpl).toSelf().inSingletonScope();\n    bind(LanguageClientProvider).toService(LanguageClientProviderImpl);\n\n    bind(LanguageResourceContextKey).toSelf().inSingletonScope();\n    rebind(ResourceContextKey).to(LanguageResourceContextKey).inSingletonScope();\n});\n","/********************************************************************************\n * Copyright (C) 2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { v4 } from 'uuid';\nimport { DisposableCollection } from '@theia/core/lib/common/';\nimport {\n    ILanguageClient,\n    TextDocumentFeature,\n    TextDocumentRegistrationOptions,\n    ClientCapabilities,\n    ServerCapabilities,\n    Disposable,\n    DocumentSelector\n} from '../language-client-services';\nimport { SemanticHighlight, SemanticHighlightingParams } from './semantic-highlighting-protocol';\n\n// NOTE: This module can be removed, or at least can be simplified once the semantic highlighting will become the part of the LSP.\n// https://github.com/Microsoft/vscode-languageserver-node/issues/368\n\nexport class SemanticHighlightFeature extends TextDocumentFeature<{}, TextDocumentRegistrationOptions> {\n\n    protected readonly languageId: string;\n    protected readonly toDispose: DisposableCollection;\n\n    constructor(\n        client: ILanguageClient & Readonly<{ languageId: string }>,\n        protected readonly initializeCallback: SemanticHighlightFeature.SemanticHighlightFeatureInitializeCallback,\n        protected readonly consumer: SemanticHighlightFeature.SemanticHighlightingParamsConsumer) {\n\n        super(client, SemanticHighlight.type);\n        this.languageId = client.languageId;\n        this.toDispose = new DisposableCollection();\n    }\n\n    fillClientCapabilities(capabilities: ClientCapabilities): void {\n        if (!capabilities.textDocument) {\n            capabilities.textDocument = {};\n        }\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        (capabilities.textDocument as any).semanticHighlightingCapabilities = {\n            semanticHighlighting: true\n        };\n    }\n\n    initialize(capabilities: ServerCapabilities, documentSelector: DocumentSelector): void {\n        if (!documentSelector) {\n            return;\n        }\n        const capabilitiesExt: ServerCapabilities & { semanticHighlighting?: { scopes: string[][] | undefined } } = capabilities;\n        if (capabilitiesExt.semanticHighlighting) {\n            const { scopes } = capabilitiesExt.semanticHighlighting;\n            if (scopes && scopes.length > 0) {\n                this.toDispose.push(this.initializeCallback(this.languageId, scopes));\n                const id = v4();\n                this.register(this.messages, {\n                    id,\n                    registerOptions: Object.assign({}, { documentSelector: documentSelector }, capabilitiesExt.semanticHighlighting)\n                });\n            }\n        }\n    }\n\n    protected registerLanguageProvider(): Disposable {\n        this._client.onNotification(SemanticHighlight.type, this.consumeSemanticHighlighting.bind(this));\n        return Disposable.create(() => this.toDispose.dispose());\n    }\n\n    protected consumeSemanticHighlighting(params: SemanticHighlightingParams): void {\n        this.consumer(params);\n    }\n\n}\n\nexport namespace SemanticHighlightFeature {\n\n    export interface SemanticHighlightingParamsConsumer {\n\n        /**\n         * Consumes a semantic highlighting notification, received from the language server.\n         */\n        (params: SemanticHighlightingParams): void\n    }\n\n    export interface SemanticHighlightFeatureInitializeCallback {\n\n        /**\n         * Invoked when the connection between the client and the server has been established and the server sends back\n         * a \"lookup table\" of TextMate scopes.\n         */\n        (languageId: string, scopes: string[][]): Disposable\n    }\n\n}\n","/********************************************************************************\n * Copyright (C) 2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { NotificationType } from '../';\nimport { VersionedTextDocumentIdentifier } from '..';\n\n// NOTE: This module can be removed, once the semantic highlighting will become the part of the LSP.\n// https://github.com/Microsoft/vscode-languageserver-node/issues/368\n\nexport interface SemanticHighlightingParams {\n    readonly textDocument: VersionedTextDocumentIdentifier;\n    readonly lines: SemanticHighlightingInformation[];\n}\n\nexport interface SemanticHighlightingInformation {\n    readonly line: number;\n    readonly tokens?: string;\n}\n\nexport namespace SemanticHighlight {\n    export const type = new NotificationType<SemanticHighlightingParams, void>('textDocument/semanticHighlighting');\n}\n","/********************************************************************************\n * Copyright (C) 2019 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { v4 } from 'uuid';\nimport {\n    Disposable,\n    ILanguageClient,\n    DocumentSelector,\n    ClientCapabilities,\n    ServerCapabilities,\n    TextDocumentFeature,\n    TextDocumentRegistrationOptions\n} from '../language-client-services';\nimport { TypeHierarchyRequest } from './typehierarchy-protocol';\n\n// NOTE: This module can be removed, or at least can be simplified once the type hierarchy will become the part of the LSP.\n// https://github.com/Microsoft/language-server-protocol/issues/582\n// https://github.com/Microsoft/vscode-languageserver-node/pull/346#discussion_r221659062\n\n/**\n * Text document feature for handling super- and subtype hierarchies through the LSP.\n */\nexport class TypeHierarchyFeature extends TextDocumentFeature<{}, TextDocumentRegistrationOptions> {\n\n    constructor(readonly client: ILanguageClient) {\n        super(client, TypeHierarchyRequest.type);\n    }\n\n    fillClientCapabilities(capabilities: ClientCapabilities): void {\n        if (!capabilities.textDocument) {\n            capabilities.textDocument = {};\n        }\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        (capabilities.textDocument as any).typeHierarchy = {\n            dynamicRegistration: true\n        };\n    }\n\n    initialize(capabilities: ServerCapabilities, documentSelector: DocumentSelector): void {\n        if (!documentSelector) {\n            return;\n        }\n        const capabilitiesExt: ServerCapabilities & { typeHierarchyProvider?: boolean } = capabilities;\n        if (capabilitiesExt.typeHierarchyProvider) {\n            const id = v4();\n            this.register(this.messages, {\n                id,\n                registerOptions: Object.assign({}, { documentSelector: documentSelector }, capabilitiesExt.typeHierarchyProvider)\n            });\n        }\n    }\n\n    protected registerLanguageProvider(): Disposable {\n        return Disposable.create(() => { /* NOOP */ });\n    }\n\n}\n","/********************************************************************************\n * Copyright (C) 2019 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { RequestType } from '../language-client-services';\nimport { SymbolKind, Range } from 'vscode-languageserver-types';\nimport { TextDocumentPositionParams, TextDocumentRegistrationOptions, StaticRegistrationOptions } from 'vscode-languageserver';\n\n// NOTE: This module can be removed, once the type hierarchy will become the part of the LSP.\n// https://github.com/Microsoft/language-server-protocol/issues/582\n// https://github.com/Microsoft/vscode-languageserver-node/pull/346#discussion_r221659062\n\n/**\n * Client capabilities specific to the type hierarchy feature.\n */\nexport interface TypeHierarchyCapabilities {\n\n    /**\n     * The text document client capabilities.\n     */\n    textDocument?: {\n\n        /**\n         * Capabilities specific to the `textDocument/typeHierarchy`.\n         */\n        typeHierarchy?: {\n\n            /**\n             * Whether implementation supports dynamic registration. If this is set to `true`\n             * the client supports the new `(TextDocumentRegistrationOptions & StaticRegistrationOptions)`\n             * return value for the corresponding server capability as well.\n             */\n            dynamicRegistration?: boolean;\n\n        }\n\n    }\n\n}\n\n/**\n * Type hierarchy language server capability.\n */\nexport interface TypeHierarchyServerCapabilities {\n\n    /**\n     * Server capability for calculating super- and subtype hierarchies.\n     */\n    typeHierarchyProvider?: boolean | (TextDocumentRegistrationOptions & StaticRegistrationOptions);\n\n}\n\n/**\n * The type hierarchy params is an extension of the `TextDocumentPositionParams` with optional properties\n * which can be used to eagerly resolve the item when requesting from the server.\n */\nexport interface TypeHierarchyParams extends TextDocumentPositionParams {\n\n    /**\n     * The hierarchy levels to resolve. `0` indicates no level. When not defined, it is treated as `0`.\n     */\n    resolve?: number;\n\n    /**\n     * The direction of the hierarchy levels to resolve.\n     */\n    direction?: TypeHierarchyDirection\n\n}\n\nexport namespace TypeHierarchyDirection {\n\n    /**\n     * Flag for retrieving/resolving the subtypes.\n     */\n    export const Children = 0;\n\n    /**\n     * Flag to use when retrieving/resolving the supertypes.\n     */\n    export const Parents = 1;\n\n    /**\n     * Flag for resolving both the super- and subtypes.\n     */\n    export const Both = 2;\n\n}\nexport type TypeHierarchyDirection = 0 | 1 | 2;\n\n/**\n * The `textDocument/typeHierarchy` request is sent from the client to the server to retrieve the type hierarchy\n * items from a given position of a text document. Can resolve the parentage information on demand.\n * If no item can be retrieved for a given text document position, returns with `null`.\n */\nexport namespace TypeHierarchyRequest {\n    export const type = new RequestType<TypeHierarchyParams, TypeHierarchyItem | null, void, void>('textDocument/typeHierarchy');\n}\n\n/**\n * Parameters for the `typeHierarchy/resolve` request.\n */\nexport interface ResolveTypeHierarchyItemParams {\n\n    /**\n     * The item to resolve.\n     */\n    item: TypeHierarchyItem;\n\n    /**\n     * The hierarchy levels to resolve. `0` indicates no level.\n     */\n    resolve: number;\n\n    /**\n     * The direction of the hierarchy levels to resolve.\n     */\n    direction: TypeHierarchyDirection;\n}\n\n/**\n * The `typeHierarchy/resolve` request is sent from the client to the server to resolve a type hierarchy\n * item by resolving sub- and supertype information.\n */\nexport namespace ResolveTypeHierarchyRequest {\n    export const type = new RequestType<ResolveTypeHierarchyItemParams, TypeHierarchyItem | null, void, void>('typeHierarchy/resolve');\n}\n\nexport interface TypeHierarchyItem {\n\n    /**\n     * The human readable name of the hierarchy item.\n     */\n    name: string;\n\n    /**\n     * Optional detail for the hierarchy item. It can be, for instance, the signature of a function or method.\n     */\n    detail?: string;\n\n    /**\n     * The kind of the hierarchy item. For instance, class or interface.\n     */\n    kind: SymbolKind;\n\n    /**\n     * `true` if the hierarchy item is deprecated. Otherwise, `false`. It is `false` by default.\n     */\n    deprecated?: boolean;\n\n    /**\n     * The URI of the text document where this type hierarchy item belongs to.\n     */\n    uri: string;\n\n    /**\n     * The range enclosing this type hierarchy item not including leading/trailing whitespace but everything else\n     * like comments. This information is typically used to determine if the clients cursor is inside the type\n     * hierarchy item to reveal in the symbol in the UI.\n     */\n    range: Range;\n\n    /**\n     * The range that should be selected and revealed when this type hierarchy item is being picked, e.g the name\n     * of a function. Must be contained by the `range`.\n     */\n    selectionRange: Range;\n\n    /**\n     * If this type hierarchy item is resolved, it contains the direct parents. Could be empty if the item does\n     * not have any direct parents. If not defined, the parents have not been resolved yet.\n     */\n    parents?: TypeHierarchyItem[];\n\n    /**\n     * If this type hierarchy item is resolved, it contains the direct children of the current item. Could be\n     * empty if the item does not have any descendants. If not defined, the children have not been resolved.\n     */\n    children?: TypeHierarchyItem[];\n\n    /**\n     * An optional data field can be used to identify a type hierarchy item in a resolve request.\n     */\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    data?: any;\n}\n","/********************************************************************************\n * Copyright (C) 2017 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { injectable, inject } from 'inversify';\nimport { MessageService } from '@theia/core/lib/common';\nimport { Window, OutputChannel, MessageActionItem, MessageType } from 'monaco-languageclient/lib/services';\nimport { OutputChannelManager } from '@theia/output/lib/common/output-channel';\nimport { OutputContribution } from '@theia/output/lib/browser/output-contribution';\n\n@injectable()\nexport class WindowImpl implements Window {\n\n    @inject(MessageService) protected readonly messageService: MessageService;\n    @inject(OutputChannelManager) protected readonly outputChannelManager: OutputChannelManager;\n    @inject(OutputContribution) protected readonly outputContribution: OutputContribution;\n\n    showMessage<T extends MessageActionItem>(type: MessageType, message: string, ...actions: T[]): Thenable<T | undefined> {\n        const originalActions = new Map((actions || []).map(action => [action.title, action] as [string, T]));\n        const actionTitles = (actions || []).map(action => action.title);\n        const mapActionType: (result: string | undefined) => (T | undefined) = result => {\n            if (!!result) {\n                return originalActions.get(result);\n            }\n            return undefined;\n        };\n        if (type === MessageType.Error) {\n            return this.messageService.error(message, ...actionTitles).then(mapActionType);\n        }\n        if (type === MessageType.Warning) {\n            return this.messageService.warn(message, ...actionTitles).then(mapActionType);\n        }\n        if (type === MessageType.Info) {\n            return this.messageService.info(message, ...actionTitles).then(mapActionType);\n        }\n        if (type === MessageType.Log) {\n            return this.messageService.log(message, ...actionTitles).then(mapActionType);\n        }\n        return Promise.resolve(undefined);\n    }\n\n    createOutputChannel(name: string): OutputChannel {\n        const outputChannel = this.outputChannelManager.getChannel(name);\n        return {\n            append: outputChannel.append.bind(outputChannel),\n            appendLine: outputChannel.appendLine.bind(outputChannel),\n            show: async (preserveFocus?: boolean) => {\n                const options = Object.assign({\n                    preserveFocus: false,\n                }, { preserveFocus });\n                const activate = !options.preserveFocus;\n                const reveal = options.preserveFocus;\n                await this.outputContribution.openView({ activate, reveal });\n                outputChannel.setVisibility(true);\n            },\n            dispose: () => {\n                this.outputChannelManager.deleteChannel(outputChannel.name);\n            }\n        };\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2017 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { injectable, inject } from 'inversify';\nimport { environment } from '@theia/application-package/lib/environment';\nimport {\n    PrefixQuickOpenService, QuickOpenModel, QuickOpenItem, OpenerService,\n    QuickOpenMode, KeybindingContribution, KeybindingRegistry, QuickOpenHandler, QuickOpenOptions, QuickOpenContribution, QuickOpenHandlerRegistry\n} from '@theia/core/lib/browser';\nimport { Languages, WorkspaceSymbolParams, SymbolInformation, WorkspaceSymbolProvider, CancellationToken } from './language-client-services';\nimport { CancellationTokenSource, CommandRegistry, CommandHandler, Command, SelectionService } from '@theia/core';\nimport URI from '@theia/core/lib/common/uri';\nimport { CommandContribution } from '@theia/core/lib/common';\nimport { Range, Position } from 'vscode-languageserver-types';\n\n@injectable()\nexport class WorkspaceSymbolCommand implements QuickOpenModel, CommandContribution, KeybindingContribution, CommandHandler, QuickOpenHandler, QuickOpenContribution {\n\n    readonly prefix = '#';\n    readonly description = 'Go to Symbol in Workspace';\n\n    private command: Command = {\n        id: 'languages.workspace.symbol',\n        label: 'Open Workspace Symbol...'\n    };\n\n    constructor(@inject(Languages) protected languages: Languages,\n        @inject(OpenerService) protected readonly openerService: OpenerService,\n        @inject(PrefixQuickOpenService) protected quickOpenService: PrefixQuickOpenService,\n        @inject(SelectionService) protected selectionService: SelectionService) { }\n\n    isEnabled(): boolean {\n        return this.languages.workspaceSymbolProviders !== undefined;\n    }\n\n    execute(): void {\n        this.quickOpenService.open(this.prefix);\n    }\n\n    getModel(): QuickOpenModel {\n        return this;\n    }\n\n    getOptions(): QuickOpenOptions {\n        return {\n            fuzzyMatchLabel: true,\n            showItemsWithoutHighlight: true,\n            onClose: () => {\n                this.cancellationSource.cancel();\n            }\n        };\n    }\n\n    registerCommands(commands: CommandRegistry): void {\n        commands.registerCommand(this.command, this);\n    }\n\n    private isElectron(): boolean {\n        return environment.electron.is();\n    }\n\n    registerKeybindings(keybindings: KeybindingRegistry): void {\n        keybindings.registerKeybinding({\n            command: this.command.id,\n            keybinding: this.isElectron() ? 'ctrlcmd+t' : 'ctrlcmd+o',\n        });\n    }\n\n    registerQuickOpenHandlers(handlers: QuickOpenHandlerRegistry): void {\n        handlers.registerHandler(this);\n    }\n\n    private cancellationSource = new CancellationTokenSource();\n\n    async onType(lookFor: string, acceptor: (items: QuickOpenItem[]) => void): Promise<void> {\n        if (this.languages.workspaceSymbolProviders) {\n            this.cancellationSource.cancel();\n            const newCancellationSource = new CancellationTokenSource();\n            this.cancellationSource = newCancellationSource;\n\n            const param: WorkspaceSymbolParams = {\n                query: lookFor\n            };\n\n            const items: QuickOpenItem[] = [];\n\n            const workspaceProviderPromises = [];\n            for (const provider of this.languages.workspaceSymbolProviders) {\n                workspaceProviderPromises.push((async () => {\n                    const symbols = await provider.provideWorkspaceSymbols(param, newCancellationSource.token);\n                    if (symbols && !newCancellationSource.token.isCancellationRequested) {\n                        for (const symbol of symbols) {\n                            items.push(this.createItem(symbol, provider, newCancellationSource.token));\n                        }\n                        acceptor(items);\n                    }\n                    return symbols;\n                })());\n            }\n            Promise.all(workspaceProviderPromises.map(p => p.then(sym => sym, _ => undefined))).then(symbols => {\n                const filteredSymbols = symbols.filter(el => el && el.length !== 0);\n                if (filteredSymbols.length === 0) {\n                    items.push(new QuickOpenItem({\n                        label: lookFor.length === 0 ? 'Type to search for symbols' : 'No symbols matching',\n                        run: () => false\n                    }));\n                    acceptor(items);\n                }\n            }).catch();\n        }\n    }\n\n    protected createItem(sym: SymbolInformation, provider: WorkspaceSymbolProvider, token: CancellationToken): QuickOpenItem {\n        const uri = new URI(sym.location.uri);\n        const kind = SymbolKind[sym.kind];\n        const icon = (kind) ? SymbolKind[sym.kind].toLowerCase() : 'unknown';\n        let parent = sym.containerName;\n        if (parent) {\n            parent += ' - ';\n        }\n        parent = (parent || '') + uri.displayName;\n        return new SimpleOpenItem(sym.name, icon, parent, uri.toString(), () => {\n\n            if (provider.resolveWorkspaceSymbol) {\n                provider.resolveWorkspaceSymbol(sym, token).then(resolvedSymbol => {\n                    if (resolvedSymbol) {\n                        this.openURL(uri, resolvedSymbol.location.range.start, resolvedSymbol.location.range.end);\n                    } else {\n                        // the symbol didn't resolve -> use given symbol\n                        this.openURL(uri, sym.location.range.start, sym.location.range.end);\n                    }\n                });\n            } else {\n                // resolveWorkspaceSymbol wasn't specified\n                this.openURL(uri, sym.location.range.start, sym.location.range.end);\n            }\n        });\n    }\n\n    private openURL(uri: URI, start: Position, end: Position): void {\n        this.openerService.getOpener(uri).then(opener => opener.open(uri, {\n            selection: Range.create(start, end)\n        }));\n    }\n}\n\nclass SimpleOpenItem extends QuickOpenItem {\n\n    constructor(\n        protected readonly label: string,\n        protected readonly icon: string,\n        protected readonly parent: string,\n        protected readonly toolTip: string,\n        protected readonly onOpen: () => void,\n        protected readonly onSelect?: () => void\n    ) {\n        super();\n    }\n\n    getLabel(): string {\n        return this.label;\n    }\n\n    isHidden(): boolean {\n        return false;\n    }\n\n    getTooltip(): string {\n        return this.toolTip;\n    }\n\n    getDescription(): string {\n        return this.parent;\n    }\n\n    getIconClass(): string {\n        return this.icon;\n    }\n\n    run(mode: QuickOpenMode): boolean {\n        if (mode !== QuickOpenMode.OPEN) {\n            if (!this.onSelect) {\n                return false;\n            }\n            this.onSelect();\n            return true;\n        }\n        this.onOpen();\n        return true;\n    }\n}\n\nenum SymbolKind {\n    File = 1,\n    Module = 2,\n    Namespace = 3,\n    Package = 4,\n    Class = 5,\n    Method = 6,\n    Property = 7,\n    Field = 8,\n    Constructor = 9,\n    Enum = 10,\n    Interface = 11,\n    Function = 12,\n    Variable = 13,\n    Constant = 14,\n    String = 15,\n    Number = 16,\n    Boolean = 17,\n    Array = 18,\n    Object = 19,\n    Key = 20,\n    Null = 21,\n    EnumMember = 22,\n    Struct = 23,\n    Event = 24,\n    Operator = 25,\n    TypeParameter = 26\n}\n","/********************************************************************************\n * Copyright (C) 2017 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nexport * from './language-contribution';\n","/********************************************************************************\n * Copyright (C) 2017 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nexport interface LanguageContribution {\n    readonly id: string;\n    readonly name: string;\n}\n\nexport namespace LanguageContribution {\n    export const servicePath = '/services/languages';\n    export function getPath(contribution: LanguageContribution, sessionId: string = ':id'): string {\n        return servicePath + '/' + contribution.id + '/' + sessionId;\n    }\n    export const Service = Symbol('LanguageContributionService');\n    export interface Service {\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        create(contributionId: string, parameters: any): Promise<string>;\n        destroy(sessionId: string): Promise<void>;\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n// copied from https://github.com/Microsoft/vscode/blob/bf7ac9201e7a7d01741d4e6e64b5dc9f3197d97b/src/vs/base/common/glob.ts\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n'use strict';\n\nimport * as strings from './strings';\nimport * as paths from './paths';\nimport { CharCode } from './char-code';\n/* eslint-disable no-shadow, no-null/no-null */\nexport interface IExpression {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    [pattern: string]: boolean | SiblingClause | any;\n}\n\nexport interface IRelativePattern {\n    base: string;\n    pattern: string;\n    pathToRelative(from: string, to: string): string;\n}\n\nexport function getEmptyExpression(): IExpression {\n    return Object.create(null);\n}\n\nexport interface SiblingClause {\n    when: string;\n}\n\nconst GLOBSTAR = '**';\nconst GLOB_SPLIT = '/';\nconst PATH_REGEX = '[/\\\\\\\\]';        // any slash or backslash\nconst NO_PATH_REGEX = '[^/\\\\\\\\]';    // any non-slash and non-backslash\nconst ALL_FORWARD_SLASHES = /\\//g;\n\nfunction starsToRegExp(starCount: number): string {\n    switch (starCount) {\n        case 0:\n            return '';\n        case 1:\n            return `${NO_PATH_REGEX}*?`; // 1 star matches any number of characters except path separator (/ and \\) - non greedy (?)\n        default:\n            // Matches:  (Path Sep OR Path Val followed by Path Sep OR Path Sep followed by Path Val) 0-many times\n            // Group is non capturing because we don't need to capture at all (?:...)\n            // Overall we use non-greedy matching because it could be that we match too much\n            return `(?:${PATH_REGEX}|${NO_PATH_REGEX}+${PATH_REGEX}|${PATH_REGEX}${NO_PATH_REGEX}+)*?`;\n    }\n}\n\nexport function splitGlobAware(pattern: string, splitChar: string): string[] {\n    if (!pattern) {\n        return [];\n    }\n\n    const segments: string[] = [];\n\n    let inBraces = false;\n    let inBrackets = false;\n\n    let char: string;\n    let curVal = '';\n    for (let i = 0; i < pattern.length; i++) {\n        char = pattern[i];\n\n        switch (char) {\n            case splitChar:\n                if (!inBraces && !inBrackets) {\n                    segments.push(curVal);\n                    curVal = '';\n\n                    continue;\n                }\n                break;\n            case '{':\n                inBraces = true;\n                break;\n            case '}':\n                inBraces = false;\n                break;\n            case '[':\n                inBrackets = true;\n                break;\n            case ']':\n                inBrackets = false;\n                break;\n        }\n\n        curVal += char;\n    }\n\n    // Tail\n    if (curVal) {\n        segments.push(curVal);\n    }\n\n    return segments;\n}\n\nfunction parseRegExp(pattern: string): string {\n    if (!pattern) {\n        return '';\n    }\n\n    let regEx = '';\n\n    // Split up into segments for each slash found\n    // eslint-disable-next-line prefer-const\n    let segments = splitGlobAware(pattern, GLOB_SPLIT);\n\n    // Special case where we only have globstars\n    if (segments.every(s => s === GLOBSTAR)) {\n        regEx = '.*';\n    }\n\n    // Build regex over segments\n    // tslint:disable-next-line:one-line\n    else {\n        let previousSegmentWasGlobStar = false;\n        segments.forEach((segment, index) => {\n\n            // Globstar is special\n            if (segment === GLOBSTAR) {\n\n                // if we have more than one globstar after another, just ignore it\n                if (!previousSegmentWasGlobStar) {\n                    regEx += starsToRegExp(2);\n                    previousSegmentWasGlobStar = true;\n                }\n\n                return;\n            }\n\n            // States\n            let inBraces = false;\n            let braceVal = '';\n\n            let inBrackets = false;\n            let bracketVal = '';\n\n            let char: string;\n            for (let i = 0; i < segment.length; i++) {\n                char = segment[i];\n\n                // Support brace expansion\n                if (char !== '}' && inBraces) {\n                    braceVal += char;\n                    continue;\n                }\n\n                // Support brackets\n                if (inBrackets && (char !== ']' || !bracketVal) /* ] is literally only allowed as first character in brackets to match it */) {\n                    let res: string;\n\n                    // range operator\n                    if (char === '-') {\n                        res = char;\n                    }\n\n                    // negation operator (only valid on first index in bracket)\n                    // tslint:disable-next-line:one-line\n                    else if ((char === '^' || char === '!') && !bracketVal) {\n                        res = '^';\n                    }\n\n                    // glob split matching is not allowed within character ranges\n                    // see http://man7.org/linux/man-pages/man7/glob.7.html\n                    // tslint:disable-next-line:one-line\n                    else if (char === GLOB_SPLIT) {\n                        res = '';\n                    }\n\n                    // anything else gets escaped\n                    // tslint:disable-next-line:one-line\n                    else {\n                        res = strings.escapeRegExpCharacters(char);\n                    }\n\n                    bracketVal += res;\n                    continue;\n                }\n\n                switch (char) {\n                    case '{':\n                        inBraces = true;\n                        continue;\n\n                    case '[':\n                        inBrackets = true;\n                        continue;\n\n                    case '}':\n                        // eslint-disable-next-line prefer-const\n                        let choices = splitGlobAware(braceVal, ',');\n\n                        // Converts {foo,bar} => [foo|bar]\n                        // eslint-disable-next-line prefer-const\n                        let braceRegExp = `(?:${choices.map(c => parseRegExp(c)).join('|')})`;\n\n                        regEx += braceRegExp;\n\n                        inBraces = false;\n                        braceVal = '';\n\n                        break;\n\n                    case ']':\n                        regEx += ('[' + bracketVal + ']');\n\n                        inBrackets = false;\n                        bracketVal = '';\n\n                        break;\n\n                    case '?':\n                        regEx += NO_PATH_REGEX; // 1 ? matches any single character except path separator (/ and \\)\n                        continue;\n\n                    case '*':\n                        regEx += starsToRegExp(1);\n                        continue;\n\n                    default:\n                        regEx += strings.escapeRegExpCharacters(char);\n                }\n            }\n\n            // Tail: Add the slash we had split on if there is more to come and the remaining pattern is not a globstar\n            // For example if pattern: some/**/*.js we want the \"/\" after some to be included in the RegEx to prevent\n            // a folder called \"something\" to match as well.\n            // However, if pattern: some/**, we tolerate that we also match on \"something\" because our globstar behaviour\n            // is to match 0-N segments.\n            if (index < segments.length - 1 && (segments[index + 1] !== GLOBSTAR || index + 2 < segments.length)) {\n                regEx += PATH_REGEX;\n            }\n\n            // reset state\n            previousSegmentWasGlobStar = false;\n        });\n    }\n\n    return regEx;\n}\n\n// regexes to check for trival glob patterns that just check for String#endsWith\nconst T1 = /^\\*\\*\\/\\*\\.[\\w\\.-]+$/;                                        // **/*.something\nconst T2 = /^\\*\\*\\/([\\w\\.-]+)\\/?$/;                                            // **/something\nconst T3 = /^{\\*\\*\\/[\\*\\.]?[\\w\\.-]+\\/?(,\\*\\*\\/[\\*\\.]?[\\w\\.-]+\\/?)*}$/;     // {**/*.something,**/*.else} or {**/package.json,**/project.json}\nconst T3_2 = /^{\\*\\*\\/[\\*\\.]?[\\w\\.-]+(\\/(\\*\\*)?)?(,\\*\\*\\/[\\*\\.]?[\\w\\.-]+(\\/(\\*\\*)?)?)*}$/;     // Like T3, with optional trailing /**\nconst T4 = /^\\*\\*((\\/[\\w\\.-]+)+)\\/?$/;                                        // **/something/else\nconst T5 = /^([\\w\\.-]+(\\/[\\w\\.-]+)*)\\/?$/;                                    // something/else\n\nexport type ParsedPattern = (path: string, basename?: string) => boolean;\n\n// The ParsedExpression returns a Promise iff hasSibling returns a Promise.\n// eslint-disable-next-line max-len\nexport type ParsedExpression = (path: string, basename?: string, hasSibling?: (name: string) => boolean | Promise<boolean>) => string | Promise<string> /* the matching pattern */;\n\nexport interface IGlobOptions {\n    /**\n     * Simplify patterns for use as exclusion filters during tree traversal to skip entire subtrees. Cannot be used outside of a tree traversal.\n     */\n    trimForExclusions?: boolean;\n}\n\ninterface ParsedStringPattern {\n    (path: string, basename: string): string | Promise<string> /* the matching pattern */;\n    basenames?: string[];\n    patterns?: string[];\n    allBasenames?: string[];\n    allPaths?: string[];\n}\ninterface ParsedExpressionPattern {\n    (path: string, basename: string, name: string, hasSibling: (name: string) => boolean | Promise<boolean>): string | Promise<string> /* the matching pattern */;\n    requiresSiblings?: boolean;\n    allBasenames?: string[];\n    allPaths?: string[];\n}\n\nconst CACHE = new Map<string, ParsedStringPattern>();  // new LRUCache<string, ParsedStringPattern>(10000); // bounded to 10000 elements\n\nconst FALSE = function (): boolean {\n    return false;\n};\n\nconst NULL = function (): string {\n    return null!;\n};\n\nfunction parsePattern(arg1: string | IRelativePattern, options: IGlobOptions): ParsedStringPattern {\n    if (!arg1) {\n        return NULL;\n    }\n\n    // Handle IRelativePattern\n    let pattern: string;\n    if (typeof arg1 !== 'string') {\n        pattern = arg1.pattern;\n    } else {\n        pattern = arg1;\n    }\n\n    // Whitespace trimming\n    pattern = pattern.trim();\n\n    // Check cache\n    const patternKey = `${pattern}_${!!options.trimForExclusions}`;\n    let parsedPattern = CACHE.get(patternKey);\n    if (parsedPattern) {\n        return wrapRelativePattern(parsedPattern, arg1);\n    }\n\n    // Check for Trivias\n    let match: RegExpExecArray;\n    if (T1.test(pattern)) { // common pattern: **/*.txt just need endsWith check\n        const base = pattern.substr(4); // '**/*'.length === 4\n        parsedPattern = function (path, basename): string {\n            return path && strings.endsWith(path, base) ? pattern : null!;\n        };\n    } else if (match = T2.exec(trimForExclusions(pattern, options))!) { // common pattern: **/some.txt just need basename check\n        parsedPattern = trivia2(match[1], pattern);\n    } else if ((options.trimForExclusions ? T3_2 : T3).test(pattern)) { // repetition of common patterns (see above) {**/*.txt,**/*.png}\n        parsedPattern = trivia3(pattern, options);\n    } else if (match = T4.exec(trimForExclusions(pattern, options))!) { // common pattern: **/something/else just need endsWith check\n        parsedPattern = trivia4and5(match[1].substr(1), pattern, true);\n    } else if (match = T5.exec(trimForExclusions(pattern, options))!) { // common pattern: something/else just need equals check\n        parsedPattern = trivia4and5(match[1], pattern, false);\n    }\n\n    // Otherwise convert to pattern\n    // tslint:disable-next-line:one-line\n    else {\n        parsedPattern = toRegExp(pattern);\n    }\n\n    // Cache\n    CACHE.set(patternKey, parsedPattern);\n\n    return wrapRelativePattern(parsedPattern, arg1);\n}\n\nfunction wrapRelativePattern(parsedPattern: ParsedStringPattern, arg2: string | IRelativePattern): ParsedStringPattern {\n    if (typeof arg2 === 'string') {\n        return parsedPattern;\n    }\n\n    return function (path, basename): string | Promise<string> {\n        if (!paths.isEqualOrParent(path, arg2.base)) {\n            return null!;\n        }\n\n        return parsedPattern(paths.normalize(arg2.pathToRelative(arg2.base, path)), basename);\n    };\n}\n\nfunction trimForExclusions(pattern: string, options: IGlobOptions): string {\n    return options.trimForExclusions && strings.endsWith(pattern, '/**') ? pattern.substr(0, pattern.length - 2) : pattern; // dropping **, tailing / is dropped later\n}\n\n// common pattern: **/some.txt just need basename check\nfunction trivia2(base: string, originalPattern: string): ParsedStringPattern {\n    const slashBase = `/${base}`;\n    const backslashBase = `\\\\${base}`;\n    const parsedPattern: ParsedStringPattern = function (path, basename): string {\n        if (!path) {\n            return null!;\n        }\n        if (basename) {\n            return basename === base ? originalPattern : null!;\n        }\n        return path === base || strings.endsWith(path, slashBase) || strings.endsWith(path, backslashBase) ? originalPattern : null!;\n    };\n    const basenames = [base];\n    parsedPattern.basenames = basenames;\n    parsedPattern.patterns = [originalPattern];\n    parsedPattern.allBasenames = basenames;\n    return parsedPattern;\n}\n\n// repetition of common ppatterns (see above) {**/*.txt,**/*.png}\nfunction trivia3(pattern: string, options: IGlobOptions): ParsedStringPattern {\n    const parsedPatterns = aggregateBasenameMatches(pattern.slice(1, -1).split(',')\n        .map(pattern => parsePattern(pattern, options))\n        .filter(pattern => pattern !== NULL), pattern);\n    const n = parsedPatterns.length;\n    if (!n) {\n        return NULL;\n    }\n    if (n === 1) {\n        return <ParsedStringPattern>parsedPatterns[0];\n    }\n    const parsedPattern: ParsedStringPattern = function (path: string, basename: string): string {\n        for (let i = 0, n = parsedPatterns.length; i < n; i++) {\n            if ((<ParsedStringPattern>parsedPatterns[i])(path, basename)) {\n                return pattern;\n            }\n        }\n        return null!;\n    };\n    const withBasenames = parsedPatterns.find(pattern => !!(<ParsedStringPattern>pattern).allBasenames);\n    // const withBasenames = arrays.first(parsedPatterns, pattern => !!(<ParsedStringPattern>pattern).allBasenames);\n    if (withBasenames) {\n        parsedPattern.allBasenames = (<ParsedStringPattern>withBasenames).allBasenames;\n    }\n    const allPaths = parsedPatterns.reduce((all, current) => current.allPaths ? all.concat(current.allPaths) : all, <string[]>[]);\n    if (allPaths.length) {\n        parsedPattern.allPaths = allPaths;\n    }\n    return parsedPattern;\n}\n\n// common patterns: **/something/else just need endsWith check, something/else just needs and equals check\nfunction trivia4and5(path: string, pattern: string, matchPathEnds: boolean): ParsedStringPattern {\n    const nativePath = paths.nativeSep !== paths.sep ? path.replace(ALL_FORWARD_SLASHES, paths.nativeSep) : path;\n    const nativePathEnd = paths.nativeSep + nativePath;\n    // eslint-disable-next-line no-shadow\n    const parsedPattern: ParsedStringPattern = matchPathEnds ? function (path, basename): string {\n        return path && (path === nativePath || strings.endsWith(path, nativePathEnd)) ? pattern : null!;\n        // eslint-disable-next-line no-shadow\n    } : function (path, basename): string {\n        return path && path === nativePath ? pattern : null!;\n    };\n    parsedPattern.allPaths = [(matchPathEnds ? '*/' : './') + path];\n    return parsedPattern;\n}\n\nfunction toRegExp(pattern: string): ParsedStringPattern {\n    try {\n        const regExp = new RegExp(`^${parseRegExp(pattern)}$`);\n        return function (path: string, basename: string): string {\n            regExp.lastIndex = 0; // reset RegExp to its initial state to reuse it!\n            return path && regExp.test(path) ? pattern : null!;\n        };\n    } catch (error) {\n        return NULL;\n    }\n}\n\n/**\n * Simplified glob matching. Supports a subset of glob patterns:\n * - * matches anything inside a path segment\n * - ? matches 1 character inside a path segment\n * - ** matches anything including an empty path segment\n * - simple brace expansion ({js,ts} => js or ts)\n * - character ranges (using [...])\n */\nexport function match(pattern: string | IRelativePattern, path: string): boolean;\nexport function match(expression: IExpression, path: string, hasSibling?: (name: string) => boolean): string /* the matching pattern */;\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport function match(arg1: string | IExpression | IRelativePattern, path: string, hasSibling?: (name: string) => boolean): any {\n    if (!arg1 || !path) {\n        return false;\n    }\n\n    return parse(<IExpression>arg1)(path, undefined, hasSibling);\n}\n\n/**\n * Simplified glob matching. Supports a subset of glob patterns:\n * - * matches anything inside a path segment\n * - ? matches 1 character inside a path segment\n * - ** matches anything including an empty path segment\n * - simple brace expansion ({js,ts} => js or ts)\n * - character ranges (using [...])\n */\nexport function parse(pattern: string | IRelativePattern, options?: IGlobOptions): ParsedPattern;\nexport function parse(expression: IExpression, options?: IGlobOptions): ParsedExpression;\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport function parse(arg1: string | IExpression | IRelativePattern, options: IGlobOptions = {}): any {\n    if (!arg1) {\n        return FALSE;\n    }\n\n    // Glob with String\n    if (typeof arg1 === 'string' || isRelativePattern(arg1)) {\n        const parsedPattern = parsePattern(arg1 as string | IRelativePattern, options);\n        if (parsedPattern === NULL) {\n            return FALSE;\n        }\n        const resultPattern = function (path: string, basename: string): boolean {\n            return !!parsedPattern(path, basename);\n        };\n        if (parsedPattern.allBasenames) {\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            (<ParsedStringPattern><any>resultPattern).allBasenames = parsedPattern.allBasenames;\n        }\n        if (parsedPattern.allPaths) {\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            (<ParsedStringPattern><any>resultPattern).allPaths = parsedPattern.allPaths;\n        }\n        return resultPattern;\n    }\n\n    // Glob with Expression\n    return parsedExpression(<IExpression>arg1, options);\n}\n\nexport function hasSiblingPromiseFn(siblingsFn?: () => Promise<string[]>): ((name: string) => Promise<boolean>) | undefined {\n    if (!siblingsFn) {\n        return undefined;\n    }\n\n    let siblings: Promise<Record<string, true>>;\n    return (name: string) => {\n        if (!siblings) {\n            siblings = (siblingsFn() || Promise.resolve([]))\n                .then(list => list ? listToMap(list) : {});\n        }\n        return siblings.then(map => !!map[name]);\n    };\n}\n\nexport function hasSiblingFn(siblingsFn?: () => string[]): ((name: string) => boolean) | undefined {\n    if (!siblingsFn) {\n        return undefined;\n    }\n\n    let siblings: Record<string, true>;\n    return (name: string) => {\n        if (!siblings) {\n            const list = siblingsFn();\n            siblings = list ? listToMap(list) : {};\n        }\n        return !!siblings[name];\n    };\n}\n\nfunction listToMap(list: string[]): Record<string, true> {\n    const map: Record<string, true> = {};\n    for (const key of list) {\n        map[key] = true;\n    }\n    return map;\n}\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport function isRelativePattern(obj: any): obj is IRelativePattern {\n    const rp = obj as IRelativePattern;\n\n    return rp && typeof rp.base === 'string' && typeof rp.pattern === 'string' && typeof rp.pathToRelative === 'function';\n}\n\n/**\n * Same as `parse`, but the ParsedExpression is guaranteed to return a Promise\n */\nexport function parseToAsync(expression: IExpression, options?: IGlobOptions): ParsedExpression {\n    // eslint-disable-next-line no-shadow\n    const parsedExpression = parse(expression, options);\n    return (path: string, basename?: string, hasSibling?: (name: string) => boolean | Promise<boolean>): string | Promise<string> => {\n        const result = parsedExpression(path, basename, hasSibling);\n        return result instanceof Promise ? result : Promise.resolve(result);\n    };\n}\n\nexport function getBasenameTerms(patternOrExpression: ParsedPattern | ParsedExpression): string[] {\n    return (<ParsedStringPattern>patternOrExpression).allBasenames || [];\n}\n\nexport function getPathTerms(patternOrExpression: ParsedPattern | ParsedExpression): string[] {\n    return (<ParsedStringPattern>patternOrExpression).allPaths || [];\n}\n\nfunction parsedExpression(expression: IExpression, options: IGlobOptions): ParsedExpression {\n    const parsedPatterns = aggregateBasenameMatches(Object.getOwnPropertyNames(expression)\n        .map(pattern => parseExpressionPattern(pattern, expression[pattern], options))\n        .filter(pattern => pattern !== NULL));\n\n    const n = parsedPatterns.length;\n    if (!n) {\n        return NULL;\n    }\n\n    if (!parsedPatterns.some(parsedPattern => (<ParsedExpressionPattern>parsedPattern).requiresSiblings!)) {\n        if (n === 1) {\n            return <ParsedStringPattern>parsedPatterns[0];\n        }\n\n        // eslint-disable-next-line no-shadow\n        const resultExpression: ParsedStringPattern = function (path: string, basename: string): string | Promise<string> {\n            // eslint-disable-next-line no-shadow\n            // tslint:disable-next-line:one-variable-per-declaration\n            for (let i = 0, n = parsedPatterns.length; i < n; i++) {\n                // Pattern matches path\n                const result = (<ParsedStringPattern>parsedPatterns[i])(path, basename);\n                if (result) {\n                    return result;\n                }\n            }\n\n            return null!;\n        };\n\n        // eslint-disable-next-line no-shadow\n        const withBasenames = parsedPatterns.find(pattern => !!(<ParsedStringPattern>pattern).allBasenames);\n        if (withBasenames) {\n            resultExpression.allBasenames = (<ParsedStringPattern>withBasenames).allBasenames;\n        }\n\n        // eslint-disable-next-line no-shadow\n        const allPaths = parsedPatterns.reduce((all, current) => current.allPaths ? all.concat(current.allPaths) : all, <string[]>[]);\n        if (allPaths.length) {\n            resultExpression.allPaths = allPaths;\n        }\n\n        return resultExpression;\n    }\n\n    const resultExpression: ParsedStringPattern = function (path: string, basename: string, hasSibling?: (name: string) => boolean | Promise<boolean>): string | Promise<string> {\n        let name: string = null!;\n\n        // eslint-disable-next-line no-shadow\n        for (let i = 0, n = parsedPatterns.length; i < n; i++) {\n            // Pattern matches path\n            const parsedPattern = (<ParsedExpressionPattern>parsedPatterns[i]);\n            if (parsedPattern.requiresSiblings && hasSibling) {\n                if (!basename) {\n                    basename = paths.basename(path);\n                }\n                if (!name) {\n                    name = basename.substr(0, basename.length - paths.extname(path).length);\n                }\n            }\n            const result = parsedPattern(path, basename, name, hasSibling!);\n            if (result) {\n                return result;\n            }\n        }\n\n        return null!;\n    };\n\n    const withBasenames = parsedPatterns.find(pattern => !!(<ParsedStringPattern>pattern).allBasenames);\n    if (withBasenames) {\n        resultExpression.allBasenames = (<ParsedStringPattern>withBasenames).allBasenames;\n    }\n\n    const allPaths = parsedPatterns.reduce((all, current) => current.allPaths ? all.concat(current.allPaths) : all, <string[]>[]);\n    if (allPaths.length) {\n        resultExpression.allPaths = allPaths;\n    }\n\n    return resultExpression;\n}\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nfunction parseExpressionPattern(pattern: string, value: any, options: IGlobOptions): (ParsedStringPattern | ParsedExpressionPattern) {\n    if (value === false) {\n        return NULL; // pattern is disabled\n    }\n\n    const parsedPattern = parsePattern(pattern, options);\n    if (parsedPattern === NULL) {\n        return NULL;\n    }\n\n    // Expression Pattern is <boolean>\n    if (typeof value === 'boolean') {\n        return parsedPattern;\n    }\n\n    // Expression Pattern is <SiblingClause>\n    if (value) {\n        const when = (<SiblingClause>value).when;\n        if (typeof when === 'string') {\n            const result: ParsedExpressionPattern = (path: string, basename: string, name: string, hasSibling: (name: string) => boolean | Promise<boolean>) => {\n                if (!hasSibling || !parsedPattern(path, basename)) {\n                    return null!;\n                }\n\n                const clausePattern = when.replace('$(basename)', name);\n                const matched = hasSibling(clausePattern);\n                return matched instanceof Promise ?\n                    matched.then(m => m ? pattern : null!) :\n                    matched ? pattern : null!;\n            };\n            result.requiresSiblings = true;\n            return result;\n        }\n    }\n\n    // Expression is Anything\n    return parsedPattern;\n}\n\nfunction aggregateBasenameMatches(parsedPatterns: (ParsedStringPattern | ParsedExpressionPattern)[], result?: string): (ParsedStringPattern | ParsedExpressionPattern)[] {\n    const basenamePatterns = parsedPatterns.filter(parsedPattern => !!(<ParsedStringPattern>parsedPattern).basenames);\n    if (basenamePatterns.length < 2) {\n        return parsedPatterns;\n    }\n\n    const basenames = basenamePatterns.reduce<string[]>((all, current) => all.concat((<ParsedStringPattern>current).basenames!), []);\n    let patterns: string[];\n    if (result) {\n        patterns = [];\n        // tslint:disable-next-line:one-variable-per-declaration\n        for (let i = 0, n = basenames.length; i < n; i++) {\n            patterns.push(result);\n        }\n    } else {\n        patterns = basenamePatterns.reduce((all, current) => all.concat((<ParsedStringPattern>current).patterns!), <string[]>[]);\n    }\n    const aggregate: ParsedStringPattern = function (path, basename): string {\n        if (!path) {\n            return null!;\n        }\n        if (!basename) {\n            let i: number;\n            for (i = path.length; i > 0; i--) {\n                const ch = path.charCodeAt(i - 1);\n                if (ch === CharCode.Slash || ch === CharCode.Backslash) {\n                    break;\n                }\n            }\n            basename = path.substr(i);\n        }\n        const index = basenames.indexOf(basename);\n        return index !== -1 ? patterns[index] : null!;\n    };\n    aggregate.basenames = basenames;\n    aggregate.patterns = patterns;\n    aggregate.allBasenames = basenames;\n\n    const aggregatedPatterns = parsedPatterns.filter(parsedPattern => !(<ParsedStringPattern>parsedPattern).basenames);\n    aggregatedPatterns.push(aggregate);\n    return aggregatedPatterns;\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nexport * from './language-selector';\nexport * from './glob';\n","/********************************************************************************\n * Copyright (C) 2020 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nimport { match as matchGlobPattern } from './glob';\n\nexport interface RelativePattern {\n    base: string;\n    pattern: string;\n    pathToRelative(from: string, to: string): string;\n}\n\nexport interface LanguageFilter {\n    language?: string;\n    scheme?: string;\n    pattern?: string | RelativePattern;\n    hasAccessToAllModels?: boolean;\n}\nexport type LanguageSelector = string | LanguageFilter | (string | LanguageFilter)[];\n\nexport function score(selector: LanguageSelector | undefined, uriScheme: string, path: string, candidateLanguage: string, candidateIsSynchronized: boolean): number {\n\n    if (Array.isArray(selector)) {\n        let ret = 0;\n        for (const filter of selector) {\n            const value = score(filter, uriScheme, path, candidateLanguage, candidateIsSynchronized);\n            if (value === 10) {\n                return value;\n            }\n            if (value > ret) {\n                ret = value;\n            }\n        }\n        return ret;\n\n    } else if (typeof selector === 'string') {\n\n        if (!candidateIsSynchronized) {\n            return 0;\n        }\n\n        if (selector === '*') {\n            return 5;\n        } else if (selector === candidateLanguage) {\n            return 10;\n        } else {\n            return 0;\n        }\n\n    } else if (selector) {\n        const { language, pattern, scheme, hasAccessToAllModels } = selector;\n\n        if (!candidateIsSynchronized && !hasAccessToAllModels) {\n            return 0;\n        }\n\n        let result = 0;\n\n        if (scheme) {\n            if (scheme === uriScheme) {\n                result = 10;\n            } else if (scheme === '*') {\n                result = 5;\n            } else {\n                return 0;\n            }\n        }\n\n        if (language) {\n            if (language === candidateLanguage) {\n                result = 10;\n            } else if (language === '*') {\n                result = Math.max(result, 5);\n            } else {\n                return 0;\n            }\n        }\n\n        if (pattern) {\n            if (pattern === path || matchGlobPattern(pattern, path)) {\n                result = 10;\n            } else {\n                return 0;\n            }\n        }\n\n        return result;\n\n    } else {\n        return 0;\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\n// copied from https://github.com/Microsoft/vscode/blob/bf7ac9201e7a7d01741d4e6e64b5dc9f3197d97b/src/vs/base/common/paths.ts\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n/* eslint-disable no-void */\n/* eslint-disable no-null/no-null */\n'use strict';\nimport { isWindows } from '@theia/core/lib/common/os';\nimport { startsWithIgnoreCase } from './strings';\nimport { CharCode } from './char-code';\n\n/**\n * The forward slash path separator.\n */\nexport const sep = '/';\n\n/**\n * The native path separator depending on the OS.\n */\nexport const nativeSep = isWindows ? '\\\\' : '/';\n\nconst _posixBadPath = /(\\/\\.\\.?\\/)|(\\/\\.\\.?)$|^(\\.\\.?\\/)|(\\/\\/+)|(\\\\)/;\nconst _winBadPath = /(\\\\\\.\\.?\\\\)|(\\\\\\.\\.?)$|^(\\.\\.?\\\\)|(\\\\\\\\+)|(\\/)/;\n\nfunction _isNormal(path: string, win: boolean): boolean {\n    return win\n        ? !_winBadPath.test(path)\n        : !_posixBadPath.test(path);\n}\n\n/**\n * @returns the base name of a path.\n */\nexport function basename(path: string): string {\n    const idx = ~path.lastIndexOf('/') || ~path.lastIndexOf('\\\\');\n    if (idx === 0) {\n        return path;\n    } else if (~idx === path.length - 1) {\n        return basename(path.substring(0, path.length - 1));\n    } else {\n        return path.substr(~idx + 1);\n    }\n}\n\n/**\n * @returns `.far` from `boo.far` or the empty string.\n */\nexport function extname(path: string): string {\n    path = basename(path);\n    const idx = ~path.lastIndexOf('.');\n    return idx ? path.substring(~idx) : '';\n}\n\nexport function normalize(path: string, toOSPath?: boolean): string {\n    if (path === null || path === void 0) {\n        return path;\n    }\n\n    const len = path.length;\n    if (len === 0) {\n        return '.';\n    }\n\n    const wantsBackslash = isWindows && toOSPath;\n    if (_isNormal(path, wantsBackslash!)) {\n        return path;\n    }\n\n    // eslint-disable-next-line no-shadow\n    const sep = wantsBackslash ? '\\\\' : '/';\n    const root = getRoot(path, sep);\n\n    // skip the root-portion of the path\n    let start = root.length;\n    let skip = false;\n    let res = '';\n\n    for (let end = root.length; end <= len; end++) {\n\n        // either at the end or at a path-separator character\n        if (end === len || path.charCodeAt(end) === CharCode.Slash || path.charCodeAt(end) === CharCode.Backslash) {\n\n            if (streql(path, start, end, '..')) {\n                // skip current and remove parent (if there is already something)\n                const prev_start = res.lastIndexOf(sep);\n                const prev_part = res.slice(prev_start + 1);\n                if ((root || prev_part.length > 0) && prev_part !== '..') {\n                    res = prev_start === -1 ? '' : res.slice(0, prev_start);\n                    skip = true;\n                }\n            } else if (streql(path, start, end, '.') && (root || res || end < len - 1)) {\n                // skip current (if there is already something or if there is more to come)\n                skip = true;\n            }\n\n            if (!skip) {\n                const part = path.slice(start, end);\n                if (res !== '' && res[res.length - 1] !== sep) {\n                    res += sep;\n                }\n                res += part;\n            }\n            start = end + 1;\n            skip = false;\n        }\n    }\n\n    return root + res;\n}\nfunction streql(value: string, start: number, end: number, other: string): boolean {\n    return start + other.length === end && value.indexOf(other, start) === start;\n}\n\n/**\n * Computes the _root_ this path, like `getRoot('c:\\files') === c:\\`,\n * `getRoot('files:///files/path') === files:///`,\n * or `getRoot('\\\\server\\shares\\path') === \\\\server\\shares\\`\n */\n// eslint-disable-next-line no-shadow\nexport function getRoot(path: string, sep: string = '/'): string {\n\n    if (!path) {\n        return '';\n    }\n\n    const len = path.length;\n    let code = path.charCodeAt(0);\n    if (code === CharCode.Slash || code === CharCode.Backslash) {\n\n        code = path.charCodeAt(1);\n        if (code === CharCode.Slash || code === CharCode.Backslash) {\n            // UNC candidate \\\\localhost\\shares\\ddd\n            //               ^^^^^^^^^^^^^^^^^^^\n            code = path.charCodeAt(2);\n            if (code !== CharCode.Slash && code !== CharCode.Backslash) {\n                // eslint-disable-next-line no-shadow\n                let pos = 3;\n                const start = pos;\n                for (; pos < len; pos++) {\n                    code = path.charCodeAt(pos);\n                    if (code === CharCode.Slash || code === CharCode.Backslash) {\n                        break;\n                    }\n                }\n                code = path.charCodeAt(pos + 1);\n                if (start !== pos && code !== CharCode.Slash && code !== CharCode.Backslash) {\n                    pos += 1;\n                    for (; pos < len; pos++) {\n                        code = path.charCodeAt(pos);\n                        if (code === CharCode.Slash || code === CharCode.Backslash) {\n                            return path.slice(0, pos + 1) // consume this separator\n                                .replace(/[\\\\/]/g, sep);\n                        }\n                    }\n                }\n            }\n        }\n\n        // /user/far\n        // ^\n        return sep;\n\n    } else if ((code >= CharCode.A && code <= CharCode.Z) || (code >= CharCode.a && code <= CharCode.z)) {\n        // check for windows drive letter c:\\ or c:\n\n        if (path.charCodeAt(1) === CharCode.Colon) {\n            code = path.charCodeAt(2);\n            if (code === CharCode.Slash || code === CharCode.Backslash) {\n                // C:\\fff\n                // ^^^\n                return path.slice(0, 2) + sep;\n            } else {\n                // C:\n                // ^^\n                return path.slice(0, 2);\n            }\n        }\n    }\n\n    // check for URI\n    // scheme://authority/path\n    // ^^^^^^^^^^^^^^^^^^^\n    let pos = path.indexOf('://');\n    if (pos !== -1) {\n        pos += 3; // 3 -> \"://\".length\n        for (; pos < len; pos++) {\n            code = path.charCodeAt(pos);\n            if (code === CharCode.Slash || code === CharCode.Backslash) {\n                return path.slice(0, pos + 1); // consume this separator\n            }\n        }\n    }\n\n    return '';\n}\n\nexport function isEqualOrParent(path: string, candidate: string, ignoreCase?: boolean): boolean {\n    if (path === candidate) {\n        return true;\n    }\n\n    if (!path || !candidate) {\n        return false;\n    }\n\n    if (candidate.length > path.length) {\n        return false;\n    }\n\n    if (ignoreCase) {\n        const beginsWith = startsWithIgnoreCase(path, candidate);\n        if (!beginsWith) {\n            return false;\n        }\n\n        if (candidate.length === path.length) {\n            return true; // same path, different casing\n        }\n\n        let sepOffset = candidate.length;\n        if (candidate.charAt(candidate.length - 1) === nativeSep) {\n            sepOffset--; // adjust the expected sep offset in case our candidate already ends in separator character\n        }\n\n        return path.charAt(sepOffset) === nativeSep;\n    }\n\n    if (candidate.charAt(candidate.length - 1) !== nativeSep) {\n        candidate += nativeSep;\n    }\n\n    return path.indexOf(candidate) === 0;\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\n// based on https://github.com/Microsoft/vscode/blob/bf7ac9201e7a7d01741d4e6e64b5dc9f3197d97b/src/vs/base/common/strings.ts\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { CharCode } from './char-code';\n/**\n * Determines if haystack ends with needle.\n */\nexport function endsWith(haystack: string, needle: string): boolean {\n    const diff = haystack.length - needle.length;\n    if (diff > 0) {\n        return haystack.indexOf(needle, diff) === diff;\n    } else if (diff === 0) {\n        return haystack === needle;\n    } else {\n        return false;\n    }\n}\nexport function isLowerAsciiLetter(code: number): boolean {\n    return code >= CharCode.a && code <= CharCode.z;\n}\n\nexport function isUpperAsciiLetter(code: number): boolean {\n    return code >= CharCode.A && code <= CharCode.Z;\n}\n\nfunction isAsciiLetter(code: number): boolean {\n    return isLowerAsciiLetter(code) || isUpperAsciiLetter(code);\n}\nexport function equalsIgnoreCase(a: string, b: string): boolean {\n    const len1 = a ? a.length : 0;\n    const len2 = b ? b.length : 0;\n\n    if (len1 !== len2) {\n        return false;\n    }\n\n    return doEqualsIgnoreCase(a, b);\n}\n\nfunction doEqualsIgnoreCase(a: string, b: string, stopAt = a.length): boolean {\n    if (typeof a !== 'string' || typeof b !== 'string') {\n        return false;\n    }\n\n    for (let i = 0; i < stopAt; i++) {\n        const codeA = a.charCodeAt(i);\n        const codeB = b.charCodeAt(i);\n\n        if (codeA === codeB) {\n            continue;\n        }\n\n        // a-z A-Z\n        if (isAsciiLetter(codeA) && isAsciiLetter(codeB)) {\n            const diff = Math.abs(codeA - codeB);\n            if (diff !== 0 && diff !== 32) {\n                return false;\n            }\n        }\n\n        // Any other charcode\n        // tslint:disable-next-line:one-line\n        else {\n            if (String.fromCharCode(codeA).toLowerCase() !== String.fromCharCode(codeB).toLowerCase()) {\n                return false;\n            }\n        }\n    }\n\n    return true;\n}\n\n/**\n * Escapes regular expression characters in a given string\n */\nexport function escapeRegExpCharacters(value: string): string {\n    return value.replace(/[\\-\\\\\\{\\}\\*\\+\\?\\|\\^\\$\\.\\[\\]\\(\\)\\#]/g, '\\\\$&');\n}\n\nexport function startsWithIgnoreCase(str: string, candidate: string): boolean {\n    const candidateLength = candidate.length;\n    if (candidate.length > str.length) {\n        return false;\n    }\n\n    return doEqualsIgnoreCase(str, candidate, candidateLength);\n}\n\nexport function* split(s: string, splitter: string): IterableIterator<string> {\n    let start = 0;\n    while (start < s.length) {\n        let end = s.indexOf(splitter, start);\n        if (end === -1) {\n            end = s.length;\n        }\n\n        yield s.substring(start, end);\n        start = end + splitter.length;\n    }\n}\n\nexport function escapeInvisibleChars(value: string): string {\n    return value.replace(/\\n/g, '\\\\n').replace(/\\r/g, '\\\\r');\n}\n\nexport function unescapeInvisibleChars(value: string): string {\n    return value.replace(/\\\\n/g, '\\n').replace(/\\\\r/g, '\\r');\n}\n","\"use strict\";\n/********************************************************************************\n * Copyright (C) 2017 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __spread = (this && this.__spread) || function () {\n    for (var ar = [], i = 0; i < arguments.length; i++) ar = ar.concat(__read(arguments[i]));\n    return ar;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\nexports.TextDocumentSaveReason = vscode_languageserver_protocol_1.TextDocumentSaveReason;\nvar core_1 = require(\"@theia/core\");\nvar MonacoEditorModel = /** @class */ (function () {\n    function MonacoEditorModel(resource, m2p, p2m, options) {\n        var _this = this;\n        this.resource = resource;\n        this.m2p = m2p;\n        this.p2m = p2m;\n        this.autoSave = 'on';\n        this.autoSaveDelay = 500;\n        /* @deprecated there is no general save timeout, each participant should introduce a sensible timeout  */\n        this.onWillSaveLoopTimeOut = 1500;\n        this.toDispose = new core_1.DisposableCollection();\n        this.toDisposeOnAutoSave = new core_1.DisposableCollection();\n        this.onDidChangeContentEmitter = new core_1.Emitter();\n        this.onDidChangeContent = this.onDidChangeContentEmitter.event;\n        this.onDidSaveModelEmitter = new core_1.Emitter();\n        this.onDidSaveModel = this.onDidSaveModelEmitter.event;\n        this.onWillSaveModelEmitter = new core_1.Emitter();\n        this.onWillSaveModel = this.onWillSaveModelEmitter.event;\n        this.preferredEncoding = undefined;\n        this._dirty = false;\n        this.onDirtyChangedEmitter = new core_1.Emitter();\n        this.pendingOperation = Promise.resolve();\n        this.syncCancellationTokenSource = new core_1.CancellationTokenSource();\n        this.ignoreDirtyEdits = false;\n        this.saveCancellationTokenSource = new core_1.CancellationTokenSource();\n        this.ignoreContentChanges = false;\n        this.contentChanges = [];\n        this.toDispose.push(resource);\n        this.toDispose.push(this.toDisposeOnAutoSave);\n        this.toDispose.push(this.onDidChangeContentEmitter);\n        this.toDispose.push(this.onDidSaveModelEmitter);\n        this.toDispose.push(this.onWillSaveModelEmitter);\n        this.toDispose.push(this.onDirtyChangedEmitter);\n        this.resolveModel = resource.readContents(options).then(function (content) { return _this.initialize(content); });\n        this.defaultEncoding = options && options.encoding ? options.encoding : undefined;\n    }\n    MonacoEditorModel.prototype.dispose = function () {\n        this.toDispose.dispose();\n    };\n    MonacoEditorModel.prototype.reopenWithEncoding = function (encoding) {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                if (encoding === this.preferredEncoding || (!this.preferredEncoding && encoding === this.defaultEncoding)) {\n                    return [2 /*return*/];\n                }\n                if (this.dirty) {\n                    return [2 /*return*/];\n                }\n                this.preferredEncoding = encoding;\n                return [2 /*return*/, this.sync()];\n            });\n        });\n    };\n    MonacoEditorModel.prototype.saveWithEncoding = function (encoding) {\n        return __awaiter(this, void 0, void 0, function () {\n            var _this = this;\n            return __generator(this, function (_a) {\n                return [2 /*return*/, this.scheduleSave(vscode_languageserver_protocol_1.TextDocumentSaveReason.Manual, this.cancelSave(), encoding)\n                        .then(function () { _this.preferredEncoding = encoding; })];\n            });\n        });\n    };\n    MonacoEditorModel.prototype.getEncoding = function () {\n        return this.preferredEncoding || this.defaultEncoding;\n    };\n    /**\n     * #### Important\n     * Only this method can create an instance of `monaco.editor.IModel`,\n     * there should not be other calls to `monaco.editor.createModel`.\n     */\n    MonacoEditorModel.prototype.initialize = function (content) {\n        var _this = this;\n        if (!this.toDispose.disposed) {\n            this.model = monaco.editor.createModel(content, undefined, monaco.Uri.parse(this.resource.uri.toString()));\n            this.updateSavedVersionId();\n            this.toDispose.push(this.model);\n            this.toDispose.push(this.model.onDidChangeContent(function (event) { return _this.fireDidChangeContent(event); }));\n            if (this.resource.onDidChangeContents) {\n                this.toDispose.push(this.resource.onDidChangeContents(function () { return _this.sync(); }));\n            }\n        }\n    };\n    Object.defineProperty(MonacoEditorModel.prototype, \"dirty\", {\n        get: function () {\n            return this._dirty;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    MonacoEditorModel.prototype.setDirty = function (dirty) {\n        this._dirty = dirty;\n        if (dirty === false) {\n            this.updateSavedVersionId();\n        }\n        this.onDirtyChangedEmitter.fire(undefined);\n    };\n    MonacoEditorModel.prototype.updateSavedVersionId = function () {\n        this.bufferSavedVersionId = this.model.getAlternativeVersionId();\n    };\n    Object.defineProperty(MonacoEditorModel.prototype, \"onDirtyChanged\", {\n        get: function () {\n            return this.onDirtyChangedEmitter.event;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(MonacoEditorModel.prototype, \"uri\", {\n        get: function () {\n            return this.model.uri.toString();\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(MonacoEditorModel.prototype, \"languageId\", {\n        get: function () {\n            return this._languageId !== undefined ? this._languageId : this.model.getModeId();\n        },\n        enumerable: true,\n        configurable: true\n    });\n    /**\n     * It's a hack to dispatch close notification with an old language id, don't use it.\n     */\n    MonacoEditorModel.prototype.setLanguageId = function (languageId) {\n        this._languageId = languageId;\n    };\n    Object.defineProperty(MonacoEditorModel.prototype, \"version\", {\n        get: function () {\n            return this.model.getVersionId();\n        },\n        enumerable: true,\n        configurable: true\n    });\n    /**\n     * Return selected text by Range or all text by default\n     */\n    MonacoEditorModel.prototype.getText = function (range) {\n        if (!range) {\n            return this.model.getValue();\n        }\n        else {\n            return this.model.getValueInRange(this.p2m.asRange(range));\n        }\n    };\n    MonacoEditorModel.prototype.positionAt = function (offset) {\n        var _a = this.model.getPositionAt(offset), lineNumber = _a.lineNumber, column = _a.column;\n        return this.m2p.asPosition(lineNumber, column);\n    };\n    MonacoEditorModel.prototype.offsetAt = function (position) {\n        return this.model.getOffsetAt(this.p2m.asPosition(position));\n    };\n    Object.defineProperty(MonacoEditorModel.prototype, \"lineCount\", {\n        get: function () {\n            return this.model.getLineCount();\n        },\n        enumerable: true,\n        configurable: true\n    });\n    /**\n     * Retrieves a line in a text document expressed as a one-based position.\n     */\n    MonacoEditorModel.prototype.getLineContent = function (lineNumber) {\n        return this.model.getLineContent(lineNumber);\n    };\n    MonacoEditorModel.prototype.getLineMaxColumn = function (lineNumber) {\n        return this.model.getLineMaxColumn(lineNumber);\n    };\n    Object.defineProperty(MonacoEditorModel.prototype, \"readOnly\", {\n        get: function () {\n            return this.resource.saveContents === undefined;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(MonacoEditorModel.prototype, \"onDispose\", {\n        get: function () {\n            return this.toDispose.onDispose;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(MonacoEditorModel.prototype, \"textEditorModel\", {\n        get: function () {\n            return this.model;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    MonacoEditorModel.prototype.load = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, this.resolveModel];\n                    case 1:\n                        _a.sent();\n                        return [2 /*return*/, this];\n                }\n            });\n        });\n    };\n    MonacoEditorModel.prototype.save = function () {\n        return this.scheduleSave(vscode_languageserver_protocol_1.TextDocumentSaveReason.Manual);\n    };\n    MonacoEditorModel.prototype.run = function (operation) {\n        var _this = this;\n        return this.pendingOperation = this.pendingOperation.then(function () { return __awaiter(_this, void 0, void 0, function () {\n            var e_1;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        _a.trys.push([0, 2, , 3]);\n                        return [4 /*yield*/, operation()];\n                    case 1:\n                        _a.sent();\n                        return [3 /*break*/, 3];\n                    case 2:\n                        e_1 = _a.sent();\n                        console.error(e_1);\n                        return [3 /*break*/, 3];\n                    case 3: return [2 /*return*/];\n                }\n            });\n        }); });\n    };\n    MonacoEditorModel.prototype.cancelSync = function () {\n        this.syncCancellationTokenSource.cancel();\n        this.syncCancellationTokenSource = new core_1.CancellationTokenSource();\n        return this.syncCancellationTokenSource.token;\n    };\n    MonacoEditorModel.prototype.sync = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            var token;\n            var _this = this;\n            return __generator(this, function (_a) {\n                token = this.cancelSync();\n                return [2 /*return*/, this.run(function () { return _this.doSync(token); })];\n            });\n        });\n    };\n    MonacoEditorModel.prototype.doSync = function (token) {\n        return __awaiter(this, void 0, void 0, function () {\n            var newText, value, range;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        if (token.isCancellationRequested || this._dirty) {\n                            return [2 /*return*/];\n                        }\n                        return [4 /*yield*/, this.readContents()];\n                    case 1:\n                        newText = _a.sent();\n                        if (newText === undefined || token.isCancellationRequested || this._dirty) {\n                            return [2 /*return*/];\n                        }\n                        value = this.model.getValue();\n                        if (value === newText) {\n                            return [2 /*return*/];\n                        }\n                        range = this.m2p.asRange(this.model.getFullModelRange());\n                        this.applyEdits([this.p2m.asTextEdit({ range: range, newText: newText })], {\n                            ignoreDirty: true,\n                            ignoreContentChanges: true\n                        });\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    MonacoEditorModel.prototype.readContents = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            var e_2;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        _a.trys.push([0, 2, , 3]);\n                        return [4 /*yield*/, this.resource.readContents({ encoding: this.getEncoding() })];\n                    case 1: return [2 /*return*/, _a.sent()];\n                    case 2:\n                        e_2 = _a.sent();\n                        if (core_1.ResourceError.NotFound.is(e_2)) {\n                            return [2 /*return*/, undefined];\n                        }\n                        throw e_2;\n                    case 3: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    MonacoEditorModel.prototype.markAsDirty = function () {\n        if (this.ignoreDirtyEdits) {\n            return;\n        }\n        this.cancelSync();\n        this.setDirty(true);\n        this.doAutoSave();\n    };\n    MonacoEditorModel.prototype.doAutoSave = function () {\n        var _this = this;\n        if (this.autoSave === 'on') {\n            var token_1 = this.cancelSave();\n            this.toDisposeOnAutoSave.dispose();\n            var handle_1 = window.setTimeout(function () {\n                _this.scheduleSave(vscode_languageserver_protocol_1.TextDocumentSaveReason.AfterDelay, token_1);\n            }, this.autoSaveDelay);\n            this.toDisposeOnAutoSave.push(core_1.Disposable.create(function () {\n                return window.clearTimeout(handle_1);\n            }));\n        }\n    };\n    MonacoEditorModel.prototype.cancelSave = function () {\n        this.saveCancellationTokenSource.cancel();\n        this.saveCancellationTokenSource = new core_1.CancellationTokenSource();\n        return this.saveCancellationTokenSource.token;\n    };\n    MonacoEditorModel.prototype.scheduleSave = function (reason, token, overwriteEncoding) {\n        var _this = this;\n        if (token === void 0) { token = this.cancelSave(); }\n        return this.run(function () { return _this.doSave(reason, token, overwriteEncoding); });\n    };\n    MonacoEditorModel.prototype.pushContentChanges = function (contentChanges) {\n        var _a;\n        if (!this.ignoreContentChanges) {\n            (_a = this.contentChanges).push.apply(_a, __spread(contentChanges));\n        }\n    };\n    MonacoEditorModel.prototype.popContentChanges = function () {\n        var contentChanges = this.contentChanges;\n        if (contentChanges.length !== 0) {\n            this.contentChanges = [];\n        }\n        return contentChanges;\n    };\n    MonacoEditorModel.prototype.fireDidChangeContent = function (event) {\n        var changeContentEvent = this.asContentChangedEvent(event);\n        this.onDidChangeContentEmitter.fire(changeContentEvent);\n        this.pushContentChanges(changeContentEvent.contentChanges);\n        if (this.model.getAlternativeVersionId() === this.bufferSavedVersionId) {\n            this.setDirty(false);\n        }\n        else {\n            this.markAsDirty();\n        }\n    };\n    MonacoEditorModel.prototype.asContentChangedEvent = function (event) {\n        var _this = this;\n        var contentChanges = event.changes.map(function (change) { return _this.asTextDocumentContentChangeEvent(change); });\n        return { model: this, contentChanges: contentChanges };\n    };\n    MonacoEditorModel.prototype.asTextDocumentContentChangeEvent = function (change) {\n        var range = this.m2p.asRange(change.range);\n        var rangeLength = change.rangeLength;\n        var text = change.text;\n        return { range: range, rangeLength: rangeLength, text: text };\n    };\n    MonacoEditorModel.prototype.applyEdits = function (operations, options) {\n        var resolvedOptions = __assign({ ignoreDirty: false, ignoreContentChanges: false }, options);\n        var _a = this, ignoreDirtyEdits = _a.ignoreDirtyEdits, ignoreContentChanges = _a.ignoreContentChanges;\n        this.ignoreDirtyEdits = resolvedOptions.ignoreDirty;\n        this.ignoreContentChanges = resolvedOptions.ignoreContentChanges;\n        try {\n            return this.model.applyEdits(operations);\n        }\n        finally {\n            this.ignoreDirtyEdits = ignoreDirtyEdits;\n            this.ignoreContentChanges = ignoreContentChanges;\n        }\n    };\n    MonacoEditorModel.prototype.doSave = function (reason, token, overwriteEncoding) {\n        return __awaiter(this, void 0, void 0, function () {\n            var changes, content;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        if (token.isCancellationRequested || !this.resource.saveContents) {\n                            return [2 /*return*/];\n                        }\n                        return [4 /*yield*/, this.fireWillSaveModel(reason, token)];\n                    case 1:\n                        _a.sent();\n                        if (token.isCancellationRequested) {\n                            return [2 /*return*/];\n                        }\n                        changes = this.popContentChanges();\n                        if (changes.length === 0 && overwriteEncoding === undefined) {\n                            return [2 /*return*/];\n                        }\n                        content = this.model.getValue();\n                        return [4 /*yield*/, core_1.Resource.save(this.resource, { changes: changes, content: content, options: { encoding: this.getEncoding(), overwriteEncoding: overwriteEncoding } }, token)];\n                    case 2:\n                        _a.sent();\n                        if (token.isCancellationRequested) {\n                            return [2 /*return*/];\n                        }\n                        this.setDirty(false);\n                        this.fireDidSaveModel();\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    MonacoEditorModel.prototype.fireWillSaveModel = function (reason, token) {\n        return __awaiter(this, void 0, void 0, function () {\n            var firing, e_3;\n            var _this = this;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        firing = this.onWillSaveModelEmitter.sequence(function (listener) { return __awaiter(_this, void 0, void 0, function () {\n                            var waitables, version, event, edits;\n                            return __generator(this, function (_a) {\n                                switch (_a.label) {\n                                    case 0:\n                                        if (token.isCancellationRequested) {\n                                            return [2 /*return*/, false];\n                                        }\n                                        waitables = [];\n                                        version = this.version;\n                                        event = {\n                                            model: this, reason: reason,\n                                            waitUntil: function (thenable) {\n                                                if (Object.isFrozen(waitables)) {\n                                                    throw new Error('waitUntil cannot be called asynchronously.');\n                                                }\n                                                waitables.push(thenable);\n                                            }\n                                        };\n                                        // Fire.\n                                        try {\n                                            listener(event);\n                                        }\n                                        catch (err) {\n                                            console.error(err);\n                                            return [2 /*return*/, true];\n                                        }\n                                        // Asynchronous calls to `waitUntil` should fail.\n                                        Object.freeze(waitables);\n                                        return [4 /*yield*/, Promise.all(waitables).then(function (allOperations) {\n                                                var _a;\n                                                return (_a = []).concat.apply(_a, __spread(allOperations));\n                                            })];\n                                    case 1:\n                                        edits = _a.sent();\n                                        if (token.isCancellationRequested) {\n                                            return [2 /*return*/, false];\n                                        }\n                                        // In a perfect world, we should only apply edits if document is clean.\n                                        if (version !== this.version) {\n                                            console.error('onWillSave listeners should provide edits, not directly alter the document.');\n                                        }\n                                        // Finally apply edits provided by this listener before firing the next.\n                                        if (edits && edits.length > 0) {\n                                            this.applyEdits(edits, {\n                                                ignoreDirty: true,\n                                            });\n                                        }\n                                        return [2 /*return*/, true];\n                                }\n                            });\n                        }); });\n                        _a.label = 1;\n                    case 1:\n                        _a.trys.push([1, 3, , 4]);\n                        return [4 /*yield*/, firing];\n                    case 2:\n                        _a.sent();\n                        return [3 /*break*/, 4];\n                    case 3:\n                        e_3 = _a.sent();\n                        console.error(e_3);\n                        return [3 /*break*/, 4];\n                    case 4: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    MonacoEditorModel.prototype.fireDidSaveModel = function () {\n        this.onDidSaveModelEmitter.fire(this.model);\n    };\n    return MonacoEditorModel;\n}());\nexports.MonacoEditorModel = MonacoEditorModel;\n//# sourceMappingURL=monaco-editor-model.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (C) 2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __values = (this && this.__values) || function (o) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator], i = 0;\n    if (m) return m.call(o);\n    return {\n        next: function () {\n            if (o && i >= o.length) o = void 0;\n            return { value: o && o[i++], done: !o };\n        }\n    };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar inversify_1 = require(\"inversify\");\nvar monaco_languageclient_1 = require(\"monaco-languageclient\");\nvar domutils_1 = require(\"@phosphor/domutils\");\nvar context_key_service_1 = require(\"@theia/core/lib/browser/context-key-service\");\nvar common_1 = require(\"@theia/core/lib/common\");\nvar MonacoEditorServices = /** @class */ (function () {\n    function MonacoEditorServices(services) {\n        Object.assign(this, services);\n    }\n    __decorate([\n        inversify_1.inject(monaco_languageclient_1.MonacoToProtocolConverter),\n        __metadata(\"design:type\", monaco_languageclient_1.MonacoToProtocolConverter)\n    ], MonacoEditorServices.prototype, \"m2p\", void 0);\n    __decorate([\n        inversify_1.inject(monaco_languageclient_1.ProtocolToMonacoConverter),\n        __metadata(\"design:type\", monaco_languageclient_1.ProtocolToMonacoConverter)\n    ], MonacoEditorServices.prototype, \"p2m\", void 0);\n    __decorate([\n        inversify_1.inject(context_key_service_1.ContextKeyService),\n        __metadata(\"design:type\", context_key_service_1.ContextKeyService)\n    ], MonacoEditorServices.prototype, \"contextKeyService\", void 0);\n    MonacoEditorServices = __decorate([\n        inversify_1.injectable(),\n        __param(0, inversify_1.unmanaged()),\n        __metadata(\"design:paramtypes\", [MonacoEditorServices])\n    ], MonacoEditorServices);\n    return MonacoEditorServices;\n}());\nexports.MonacoEditorServices = MonacoEditorServices;\nvar MonacoEditor = /** @class */ (function (_super) {\n    __extends(MonacoEditor, _super);\n    function MonacoEditor(uri, document, node, services, options, override) {\n        var _this = _super.call(this, services) || this;\n        _this.uri = uri;\n        _this.document = document;\n        _this.node = node;\n        _this.toDispose = new common_1.DisposableCollection();\n        _this.onCursorPositionChangedEmitter = new common_1.Emitter();\n        _this.onSelectionChangedEmitter = new common_1.Emitter();\n        _this.onFocusChangedEmitter = new common_1.Emitter();\n        _this.onDocumentContentChangedEmitter = new common_1.Emitter();\n        _this.onMouseDownEmitter = new common_1.Emitter();\n        _this.onLanguageChangedEmitter = new common_1.Emitter();\n        _this.onLanguageChanged = _this.onLanguageChangedEmitter.event;\n        _this.onScrollChangedEmitter = new common_1.Emitter();\n        _this.onEncodingChangedEmitter = new common_1.Emitter();\n        _this.onEncodingChanged = _this.onEncodingChangedEmitter.event;\n        _this.documents = new Set();\n        /* `true` because it is derived from an URI during the instantiation */\n        _this._languageAutoDetected = true;\n        _this.toDispose.pushAll([\n            _this.onCursorPositionChangedEmitter,\n            _this.onSelectionChangedEmitter,\n            _this.onFocusChangedEmitter,\n            _this.onDocumentContentChangedEmitter,\n            _this.onMouseDownEmitter,\n            _this.onLanguageChangedEmitter,\n            _this.onScrollChangedEmitter,\n            _this.onEncodingChangedEmitter\n        ]);\n        _this.documents.add(document);\n        _this.autoSizing = options && options.autoSizing !== undefined ? options.autoSizing : false;\n        _this.minHeight = options && options.minHeight !== undefined ? options.minHeight : -1;\n        _this.maxHeight = options && options.maxHeight !== undefined ? options.maxHeight : -1;\n        _this.toDispose.push(_this.create(options, override));\n        _this.addHandlers(_this.editor);\n        return _this;\n    }\n    MonacoEditor.prototype.getEncoding = function () {\n        return this.document.getEncoding() || 'utf8';\n    };\n    MonacoEditor.prototype.setEncoding = function (encoding, mode) {\n        var _this = this;\n        if (mode === 1 /* Decode */) {\n            // reopen file with encoding\n            this.document.reopenWithEncoding(encoding)\n                .then(function () { return _this.onEncodingChangedEmitter.fire(encoding); });\n        }\n        else {\n            // encode and save file\n            this.document.saveWithEncoding(encoding)\n                .then(function () { return _this.onEncodingChangedEmitter.fire(encoding); });\n        }\n    };\n    MonacoEditor.prototype.create = function (options, override) {\n        return this.editor = monaco.editor.create(this.node, __assign({}, options, { lightbulb: { enabled: true }, fixedOverflowWidgets: true, scrollbar: {\n                useShadows: false,\n                verticalHasArrows: false,\n                horizontalHasArrows: false,\n                verticalScrollbarSize: 10,\n                horizontalScrollbarSize: 10\n            } }), override);\n    };\n    MonacoEditor.prototype.addHandlers = function (codeEditor) {\n        var _this = this;\n        this.toDispose.push(codeEditor.onDidChangeModelLanguage(function (e) {\n            return _this.fireLanguageChanged(e.newLanguage);\n        }));\n        this.toDispose.push(codeEditor.onDidChangeConfiguration(function () { return _this.refresh(); }));\n        this.toDispose.push(codeEditor.onDidChangeModel(function () { return _this.refresh(); }));\n        this.toDispose.push(codeEditor.onDidChangeModelContent(function (e) {\n            _this.refresh();\n            _this.onDocumentContentChangedEmitter.fire({ document: _this.document, contentChanges: e.changes.map(_this.mapModelContentChange.bind(_this)) });\n        }));\n        this.toDispose.push(codeEditor.onDidChangeCursorPosition(function () {\n            return _this.onCursorPositionChangedEmitter.fire(_this.cursor);\n        }));\n        this.toDispose.push(codeEditor.onDidChangeCursorSelection(function () {\n            return _this.onSelectionChangedEmitter.fire(_this.selection);\n        }));\n        this.toDispose.push(codeEditor.onDidFocusEditorText(function () {\n            return _this.onFocusChangedEmitter.fire(_this.isFocused());\n        }));\n        this.toDispose.push(codeEditor.onDidBlurEditorText(function () {\n            return _this.onFocusChangedEmitter.fire(_this.isFocused());\n        }));\n        this.toDispose.push(codeEditor.onMouseDown(function (e) {\n            var _a = e.target, element = _a.element, position = _a.position, range = _a.range;\n            _this.onMouseDownEmitter.fire({\n                target: __assign({}, e.target, { element: element || undefined, mouseColumn: _this.m2p.asPosition(undefined, e.target.mouseColumn).character, range: range && _this.m2p.asRange(range) || undefined, position: position && _this.m2p.asPosition(position.lineNumber, position.column) || undefined }),\n                event: e.event.browserEvent\n            });\n        }));\n        this.toDispose.push(codeEditor.onDidScrollChange(function (e) {\n            _this.onScrollChangedEmitter.fire(undefined);\n        }));\n    };\n    MonacoEditor.prototype.getVisibleRanges = function () {\n        var _this = this;\n        return this.editor.getVisibleRanges().map(function (range) { return _this.m2p.asRange(range); });\n    };\n    MonacoEditor.prototype.mapModelContentChange = function (change) {\n        return {\n            range: this.m2p.asRange(change.range),\n            rangeLength: change.rangeLength,\n            text: change.text\n        };\n    };\n    Object.defineProperty(MonacoEditor.prototype, \"onDispose\", {\n        get: function () {\n            return this.toDispose.onDispose;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(MonacoEditor.prototype, \"onDocumentContentChanged\", {\n        get: function () {\n            return this.onDocumentContentChangedEmitter.event;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(MonacoEditor.prototype, \"cursor\", {\n        get: function () {\n            var _a = this.editor.getPosition(), lineNumber = _a.lineNumber, column = _a.column;\n            return this.m2p.asPosition(lineNumber, column);\n        },\n        set: function (cursor) {\n            var position = this.p2m.asPosition(cursor);\n            this.editor.setPosition(position);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(MonacoEditor.prototype, \"onCursorPositionChanged\", {\n        get: function () {\n            return this.onCursorPositionChangedEmitter.event;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(MonacoEditor.prototype, \"selection\", {\n        get: function () {\n            return this.m2p.asRange(this.editor.getSelection());\n        },\n        set: function (selection) {\n            var range = this.p2m.asRange(selection);\n            this.editor.setSelection(range);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(MonacoEditor.prototype, \"onSelectionChanged\", {\n        get: function () {\n            return this.onSelectionChangedEmitter.event;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(MonacoEditor.prototype, \"onScrollChanged\", {\n        get: function () {\n            return this.onScrollChangedEmitter.event;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    MonacoEditor.prototype.revealPosition = function (raw, options) {\n        if (options === void 0) { options = { vertical: 'center' }; }\n        var position = this.p2m.asPosition(raw);\n        switch (options.vertical) {\n            case 'auto':\n                this.editor.revealPosition(position);\n                break;\n            case 'center':\n                this.editor.revealPositionInCenter(position);\n                break;\n            case 'centerIfOutsideViewport':\n                this.editor.revealPositionInCenterIfOutsideViewport(position);\n                break;\n        }\n    };\n    MonacoEditor.prototype.revealRange = function (raw, options) {\n        if (options === void 0) { options = { at: 'center' }; }\n        var range = this.p2m.asRange(raw);\n        switch (options.at) {\n            case 'top':\n                this.editor.revealRangeAtTop(range);\n                break;\n            case 'center':\n                this.editor.revealRangeInCenter(range);\n                break;\n            case 'centerIfOutsideViewport':\n                this.editor.revealRangeInCenterIfOutsideViewport(range);\n                break;\n            case 'auto':\n                this.editor.revealRange(range);\n                break;\n        }\n    };\n    MonacoEditor.prototype.focus = function () {\n        this.editor.focus();\n    };\n    MonacoEditor.prototype.blur = function () {\n        var node = this.editor.getDomNode();\n        if (node) {\n            var textarea = node.querySelector('textarea');\n            textarea.blur();\n        }\n    };\n    MonacoEditor.prototype.isFocused = function (_a) {\n        var strict = (_a === void 0 ? { strict: false } : _a).strict;\n        if (!this.editor.hasTextFocus()) {\n            return false;\n        }\n        if (strict) {\n            return !this.isSuggestWidgetVisible() && !this.isFindWidgetVisible() && !this.isRenameInputVisible();\n        }\n        return true;\n    };\n    Object.defineProperty(MonacoEditor.prototype, \"onFocusChanged\", {\n        get: function () {\n            return this.onFocusChangedEmitter.event;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(MonacoEditor.prototype, \"onMouseDown\", {\n        get: function () {\n            return this.onMouseDownEmitter.event;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    /**\n     * `true` if the suggest widget is visible in the editor. Otherwise, `false`.\n     */\n    MonacoEditor.prototype.isSuggestWidgetVisible = function () {\n        return this.contextKeyService.match('suggestWidgetVisible', this.editor.getDomNode() || this.node);\n    };\n    /**\n     * `true` if the find (and replace) widget is visible in the editor. Otherwise, `false`.\n     */\n    MonacoEditor.prototype.isFindWidgetVisible = function () {\n        return this.contextKeyService.match('findWidgetVisible', this.editor.getDomNode() || this.node);\n    };\n    /**\n     * `true` if the name rename refactoring input HTML element is visible. Otherwise, `false`.\n     */\n    MonacoEditor.prototype.isRenameInputVisible = function () {\n        return this.contextKeyService.match('renameInputVisible', this.editor.getDomNode() || this.node);\n    };\n    MonacoEditor.prototype.dispose = function () {\n        this.toDispose.dispose();\n    };\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    MonacoEditor.prototype.trigger = function (source, handlerId, payload) {\n        this.editor.trigger(source, handlerId, payload);\n    };\n    MonacoEditor.prototype.getControl = function () {\n        return this.editor;\n    };\n    MonacoEditor.prototype.refresh = function () {\n        this.autoresize();\n    };\n    MonacoEditor.prototype.resizeToFit = function () {\n        this.autoresize();\n    };\n    MonacoEditor.prototype.setSize = function (dimension) {\n        this.resize(dimension);\n    };\n    MonacoEditor.prototype.autoresize = function () {\n        if (this.autoSizing) {\n            // eslint-disable-next-line no-null/no-null\n            this.resize(null);\n        }\n    };\n    MonacoEditor.prototype.resize = function (dimension) {\n        if (this.node) {\n            var layoutSize = this.computeLayoutSize(this.node, dimension);\n            this.editor.layout(layoutSize);\n        }\n    };\n    MonacoEditor.prototype.computeLayoutSize = function (hostNode, dimension) {\n        if (dimension && dimension.width >= 0 && dimension.height >= 0) {\n            return dimension;\n        }\n        var boxSizing = domutils_1.ElementExt.boxSizing(hostNode);\n        var width = (!dimension || dimension.width < 0) ?\n            this.getWidth(hostNode, boxSizing) :\n            dimension.width;\n        var height = (!dimension || dimension.height < 0) ?\n            this.getHeight(hostNode, boxSizing) :\n            dimension.height;\n        return { width: width, height: height };\n    };\n    MonacoEditor.prototype.getWidth = function (hostNode, boxSizing) {\n        return hostNode.offsetWidth - boxSizing.horizontalSum;\n    };\n    MonacoEditor.prototype.getHeight = function (hostNode, boxSizing) {\n        if (!this.autoSizing) {\n            return hostNode.offsetHeight - boxSizing.verticalSum;\n        }\n        var configuration = this.editor.getConfiguration();\n        var lineHeight = configuration.lineHeight;\n        var lineCount = this.editor.getModel().getLineCount();\n        var contentHeight = lineHeight * lineCount;\n        var horizontalScrollbarHeight = configuration.layoutInfo.horizontalScrollbarHeight;\n        var editorHeight = contentHeight + horizontalScrollbarHeight;\n        if (this.minHeight >= 0) {\n            var minHeight = lineHeight * this.minHeight + horizontalScrollbarHeight;\n            if (editorHeight < minHeight) {\n                return minHeight;\n            }\n        }\n        if (this.maxHeight >= 0) {\n            var maxHeight = lineHeight * this.maxHeight + horizontalScrollbarHeight;\n            return Math.min(maxHeight, editorHeight);\n        }\n        return editorHeight;\n    };\n    MonacoEditor.prototype.isActionSupported = function (id) {\n        var action = this.editor.getAction(id);\n        return !!action && action.isSupported();\n    };\n    MonacoEditor.prototype.runAction = function (id) {\n        return __awaiter(this, void 0, void 0, function () {\n            var action;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        action = this.editor.getAction(id);\n                        if (!(action && action.isSupported())) return [3 /*break*/, 2];\n                        return [4 /*yield*/, action.run()];\n                    case 1:\n                        _a.sent();\n                        _a.label = 2;\n                    case 2: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    Object.defineProperty(MonacoEditor.prototype, \"commandService\", {\n        get: function () {\n            return this.editor._commandService;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(MonacoEditor.prototype, \"instantiationService\", {\n        get: function () {\n            return this.editor._instantiationService;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    MonacoEditor.prototype.deltaDecorations = function (params) {\n        var oldDecorations = params.oldDecorations;\n        var newDecorations = this.toDeltaDecorations(params);\n        return this.editor.deltaDecorations(oldDecorations, newDecorations);\n    };\n    MonacoEditor.prototype.toDeltaDecorations = function (params) {\n        var _this = this;\n        return params.newDecorations.map(function (decoration) { return (__assign({}, decoration, { range: _this.p2m.asRange(decoration.range) })); });\n    };\n    MonacoEditor.prototype.getLinesDecorations = function (startLineNumber, endLineNumber) {\n        var _this = this;\n        var toPosition = function (line) { return _this.p2m.asPosition({ line: line, character: 0 }); };\n        var start = toPosition(startLineNumber).lineNumber;\n        var end = toPosition(endLineNumber).lineNumber;\n        return this.editor\n            .getModel()\n            .getLinesDecorations(start, end)\n            .map(this.toEditorDecoration.bind(this));\n    };\n    MonacoEditor.prototype.toEditorDecoration = function (decoration) {\n        var range = this.m2p.asRange(decoration.range);\n        var id = decoration.id, options = decoration.options;\n        return {\n            options: options,\n            range: range,\n            id: id\n        };\n    };\n    MonacoEditor.prototype.getVisibleColumn = function (position) {\n        return this.editor.getVisibleColumnFromPosition(this.p2m.asPosition(position));\n    };\n    MonacoEditor.prototype.replaceText = function (params) {\n        return __awaiter(this, void 0, void 0, function () {\n            var edits;\n            var _this = this;\n            return __generator(this, function (_a) {\n                edits = params.replaceOperations.map(function (param) {\n                    var range = monaco.Range.fromPositions(_this.p2m.asPosition(param.range.start), _this.p2m.asPosition(param.range.end));\n                    return {\n                        forceMoveMarkers: true,\n                        identifier: {\n                            major: range.startLineNumber,\n                            minor: range.startColumn\n                        },\n                        range: range,\n                        text: param.text\n                    };\n                });\n                return [2 /*return*/, this.editor.executeEdits(params.source, edits)];\n            });\n        });\n    };\n    MonacoEditor.prototype.executeEdits = function (edits) {\n        return this.editor.executeEdits('MonacoEditor', this.p2m.asTextEdits(edits));\n    };\n    MonacoEditor.prototype.storeViewState = function () {\n        return this.editor.saveViewState();\n    };\n    MonacoEditor.prototype.restoreViewState = function (state) {\n        this.editor.restoreViewState(state);\n    };\n    Object.defineProperty(MonacoEditor.prototype, \"languageAutoDetected\", {\n        get: function () {\n            return this._languageAutoDetected;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    MonacoEditor.prototype.detectLanguage = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            var modeService, firstLine, model, language;\n            return __generator(this, function (_a) {\n                modeService = monaco.services.StaticServices.modeService.get();\n                firstLine = this.document.textEditorModel.getLineContent(1);\n                model = this.getControl().getModel();\n                language = modeService.createByFilepathOrFirstLine(model && model.uri, firstLine);\n                this.setLanguage(language.languageIdentifier.language);\n                this._languageAutoDetected = true;\n                return [2 /*return*/];\n            });\n        });\n    };\n    MonacoEditor.prototype.setLanguage = function (languageId) {\n        var e_1, _a;\n        try {\n            for (var _b = __values(this.documents), _c = _b.next(); !_c.done; _c = _b.next()) {\n                var document_1 = _c.value;\n                monaco.editor.setModelLanguage(document_1.textEditorModel, languageId);\n            }\n        }\n        catch (e_1_1) { e_1 = { error: e_1_1 }; }\n        finally {\n            try {\n                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n            }\n            finally { if (e_1) throw e_1.error; }\n        }\n    };\n    MonacoEditor.prototype.fireLanguageChanged = function (langaugeId) {\n        this._languageAutoDetected = false;\n        this.onLanguageChangedEmitter.fire(langaugeId);\n    };\n    MonacoEditor.prototype.getResourceUri = function () {\n        return this.uri;\n    };\n    MonacoEditor.prototype.createMoveToUri = function (resourceUri) {\n        return this.uri.withPath(resourceUri.path);\n    };\n    return MonacoEditor;\n}(MonacoEditorServices));\nexports.MonacoEditor = MonacoEditor;\n(function (MonacoEditor) {\n    function getAll(manager) {\n        return manager.all.map(function (e) { return get(e); }).filter(function (e) { return !!e; });\n    }\n    MonacoEditor.getAll = getAll;\n    function getCurrent(manager) {\n        return get(manager.currentEditor);\n    }\n    MonacoEditor.getCurrent = getCurrent;\n    function getActive(manager) {\n        return get(manager.activeEditor);\n    }\n    MonacoEditor.getActive = getActive;\n    function get(editorWidget) {\n        if (editorWidget && editorWidget.editor instanceof MonacoEditor) {\n            return editorWidget.editor;\n        }\n        return undefined;\n    }\n    MonacoEditor.get = get;\n    function findByDocument(manager, document) {\n        return getAll(manager).filter(function (editor) { return editor.documents.has(document); });\n    }\n    MonacoEditor.findByDocument = findByDocument;\n    function getWidgetFor(manager, control) {\n        if (!control) {\n            return undefined;\n        }\n        return manager.all.find(function (widget) {\n            var editor = get(widget);\n            return !!editor && editor.getControl() === control;\n        });\n    }\n    MonacoEditor.getWidgetFor = getWidgetFor;\n})(MonacoEditor = exports.MonacoEditor || (exports.MonacoEditor = {}));\nexports.MonacoEditor = MonacoEditor;\n//# sourceMappingURL=monaco-editor.js.map","/********************************************************************************\n * Copyright (C) 2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { inject, injectable } from 'inversify';\nimport { MonacoToProtocolConverter, ProtocolToMonacoConverter } from 'monaco-languageclient';\nimport URI from '@theia/core/lib/common/uri';\nimport { ResourceProvider, ReferenceCollection, Event } from '@theia/core';\nimport { EditorPreferences, EditorPreferenceChange } from '@theia/editor/lib/browser';\nimport { MonacoEditorModel } from './monaco-editor-model';\n\n@injectable()\nexport class MonacoTextModelService implements monaco.editor.ITextModelService {\n\n    protected readonly _models = new ReferenceCollection<string, MonacoEditorModel>(\n        uri => this.loadModel(new URI(uri))\n    );\n\n    @inject(ResourceProvider)\n    protected readonly resourceProvider: ResourceProvider;\n\n    @inject(EditorPreferences)\n    protected readonly editorPreferences: EditorPreferences;\n\n    @inject(MonacoToProtocolConverter)\n    protected readonly m2p: MonacoToProtocolConverter;\n\n    @inject(ProtocolToMonacoConverter)\n    protected readonly p2m: ProtocolToMonacoConverter;\n\n    get models(): MonacoEditorModel[] {\n        return this._models.values();\n    }\n\n    get(uri: string): MonacoEditorModel | undefined {\n        return this._models.get(uri);\n    }\n\n    get onDidCreate(): Event<MonacoEditorModel> {\n        return this._models.onDidCreate;\n    }\n\n    createModelReference(raw: monaco.Uri | URI): Promise<monaco.editor.IReference<MonacoEditorModel>> {\n        return this._models.acquire(raw.toString());\n    }\n\n    protected async loadModel(uri: URI): Promise<MonacoEditorModel> {\n        await this.editorPreferences.ready;\n        const resource = await this.resourceProvider(uri);\n        const model = await (new MonacoEditorModel(resource, this.m2p, this.p2m, { encoding: this.editorPreferences.get('files.encoding') }).load());\n        this.updateModel(model);\n        model.textEditorModel.onDidChangeLanguage(() => this.updateModel(model));\n        const disposable = this.editorPreferences.onPreferenceChanged(change => this.updateModel(model, change));\n        model.onDispose(() => disposable.dispose());\n        return model;\n    }\n\n    protected readonly modelOptions: { [name: string]: (keyof monaco.editor.ITextModelUpdateOptions | undefined) } = {\n        'editor.tabSize': 'tabSize',\n        'editor.insertSpaces': 'insertSpaces'\n    };\n\n    protected updateModel(model: MonacoEditorModel, change?: EditorPreferenceChange): void {\n        if (change) {\n            if (!change.affects(model.uri, model.languageId)) {\n                return;\n            }\n            if (change.preferenceName === 'editor.autoSave') {\n                model.autoSave = this.editorPreferences.get('editor.autoSave', undefined, model.uri);\n            }\n            if (change.preferenceName === 'editor.autoSaveDelay') {\n                model.autoSaveDelay = this.editorPreferences.get('editor.autoSaveDelay', undefined, model.uri);\n            }\n            const modelOption = this.modelOptions[change.preferenceName];\n            if (modelOption) {\n                const options: monaco.editor.ITextModelUpdateOptions = {};\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                options[modelOption] = change.newValue as any;\n                model.textEditorModel.updateOptions(options);\n            }\n        } else {\n            model.autoSave = this.editorPreferences.get('editor.autoSave', undefined, model.uri);\n            model.autoSaveDelay = this.editorPreferences.get('editor.autoSaveDelay', undefined, model.uri);\n            model.textEditorModel.updateOptions(this.getModelOptions(model));\n        }\n    }\n\n    /** @deprecated pass MonacoEditorModel instead  */\n    protected getModelOptions(uri: string): monaco.editor.ITextModelUpdateOptions;\n    protected getModelOptions(model: MonacoEditorModel): monaco.editor.ITextModelUpdateOptions;\n    protected getModelOptions(arg: string | MonacoEditorModel): monaco.editor.ITextModelUpdateOptions {\n        const uri = typeof arg === 'string' ? arg : arg.uri;\n        const overrideIdentifier = typeof arg === 'string' ? undefined : arg.languageId;\n        return {\n            tabSize: this.editorPreferences.get({ preferenceName: 'editor.tabSize', overrideIdentifier }, undefined, uri),\n            insertSpaces: this.editorPreferences.get({ preferenceName: 'editor.insertSpaces', overrideIdentifier }, undefined, uri)\n        };\n    }\n\n    registerTextModelContentProvider(scheme: string, provider: monaco.editor.ITextModelContentProvider): monaco.IDisposable {\n        return {\n            dispose(): void {\n                // no-op\n            }\n        };\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { injectable } from 'inversify';\nimport { AbstractViewContribution } from '@theia/core/lib/browser/shell/view-contribution';\nimport { Widget } from '@theia/core/lib/browser';\nimport { OUTPUT_WIDGET_KIND, OutputWidget } from './output-widget';\nimport { Command, CommandRegistry } from '@theia/core/lib/common';\n\nexport namespace OutputCommands {\n    const OUTPUT_CATEGORY = 'Output';\n    export const CLEAR_OUTPUT_TOOLBAR: Command = {\n        id: 'output:clear',\n        category: OUTPUT_CATEGORY,\n        label: 'Clear Output',\n        iconClass: 'clear-all'\n    };\n}\n\n@injectable()\nexport class OutputContribution extends AbstractViewContribution<OutputWidget> {\n\n    constructor() {\n        super({\n            widgetId: OUTPUT_WIDGET_KIND,\n            widgetName: 'Output',\n            defaultWidgetOptions: {\n                area: 'bottom'\n            },\n            toggleCommandId: 'output:toggle',\n            toggleKeybinding: 'ctrlcmd+shift+u'\n        });\n    }\n\n    registerCommands(commands: CommandRegistry): void {\n        super.registerCommands(commands);\n        commands.registerCommand(OutputCommands.CLEAR_OUTPUT_TOOLBAR, {\n            isEnabled: widget => this.withWidget(widget, () => true),\n            isVisible: widget => this.withWidget(widget, () => true),\n            execute: widget => this.withWidget(widget, outputWidget => this.clear(outputWidget))\n        });\n    }\n\n    protected async clear(widget: OutputWidget): Promise<void> {\n        widget.clear();\n    }\n\n    protected withWidget<T>(widget: Widget | undefined = this.tryGetWidget(), cb: (problems: OutputWidget) => T): T | false {\n        if (widget instanceof OutputWidget && widget.id === OUTPUT_WIDGET_KIND) {\n            return cb(widget);\n        }\n        return false;\n    }\n\n}\n","/********************************************************************************\n * Copyright (C) 2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { inject, injectable, postConstruct } from 'inversify';\nimport { Message } from '@theia/core/lib/browser';\nimport { OutputChannelManager, OutputChannel } from '../common/output-channel';\nimport { ReactWidget } from '@theia/core/lib/browser/widgets/react-widget';\nimport * as React from 'react';\n\nimport '../../src/browser/style/output.css';\n\nexport const OUTPUT_WIDGET_KIND = 'outputView';\n\n@injectable()\nexport class OutputWidget extends ReactWidget {\n\n    @inject(OutputChannelManager)\n    protected readonly outputChannelManager: OutputChannelManager;\n\n    constructor() {\n        super();\n        this.id = OUTPUT_WIDGET_KIND;\n        this.title.label = 'Output';\n        this.title.caption = 'Output';\n        this.title.iconClass = 'fa output-tab-icon';\n        this.title.closable = true;\n        this.addClass('theia-output');\n        this.node.tabIndex = 0;\n    }\n\n    @postConstruct()\n    protected init(): void {\n        this.outputChannelManager.getChannels().forEach(this.registerListener.bind(this));\n        this.toDispose.push(this.outputChannelManager.onChannelAdded(channel => {\n            this.registerListener(channel);\n            this.update();\n        }));\n        this.toDispose.push(this.outputChannelManager.onSelectedChannelChange(event => {\n            this.update();\n        }));\n        this.update();\n    }\n\n    protected onActivateRequest(msg: Message): void {\n        super.onActivateRequest(msg);\n        const channelSelector = document.getElementById(OutputWidget.IDs.CHANNEL_LIST);\n        if (channelSelector) {\n            channelSelector.focus();\n        } else {\n            this.node.focus();\n        }\n    }\n\n    protected registerListener(outputChannel: OutputChannel): void {\n        this.toDispose.push(outputChannel.onContentChange(c => {\n            if (outputChannel === this.outputChannelManager.selectedChannel) {\n                this.update();\n            }\n        }));\n    }\n\n    protected render(): React.ReactNode {\n        return <React.Fragment>\n            {this.renderChannelContents()}\n        </React.Fragment>;\n    }\n\n    public clear(): void {\n        if (this.outputChannelManager.selectedChannel) {\n            this.outputChannelManager.selectedChannel.clear();\n        }\n    }\n\n    protected renderChannelContents(): React.ReactNode {\n        return <div id={OutputWidget.IDs.CONTENTS}>{this.renderLines()}</div>;\n    }\n\n    protected renderLines(): React.ReactNode[] {\n        let id = 0;\n        const result = [];\n\n        const style: React.CSSProperties = {\n            whiteSpace: 'pre',\n            fontFamily: 'monospace',\n        };\n\n        if (this.outputChannelManager.selectedChannel) {\n            for (const text of this.outputChannelManager.selectedChannel.getLines()) {\n                const lines = text.split(/[\\n\\r]+/);\n                for (const line of lines) {\n                    result.push(<div style={style} key={id++}>{line}</div>);\n                }\n            }\n        }\n        if (result.length === 0) {\n            result.push(<div style={style} key={id++}>{'<no output yet>'}</div>);\n        }\n        return result;\n    }\n\n    protected onUpdateRequest(msg: Message): void {\n        super.onUpdateRequest(msg);\n        setTimeout(() => {\n            const div = document.getElementById(OutputWidget.IDs.CONTENTS) as HTMLDivElement;\n            if (div && div.children.length > 0) {\n                div.children[div.children.length - 1].scrollIntoView(false);\n            }\n        });\n    }\n}\n\nexport namespace OutputWidget {\n    export namespace IDs {\n        export const CONTENTS = 'outputContents';\n        export const CHANNEL_LIST = 'outputChannelList';\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { Emitter, Event } from '@theia/core';\nimport { injectable, inject, postConstruct } from 'inversify';\nimport { OutputPreferences } from './output-preferences';\nimport { Disposable, DisposableCollection } from 'vscode-ws-jsonrpc';\n\n@injectable()\nexport class OutputChannelManager implements Disposable {\n    protected readonly channels = new Map<string, OutputChannel>();\n    protected selectedChannelValue: OutputChannel | undefined;\n\n    protected readonly channelDeleteEmitter = new Emitter<{ channelName: string }>();\n    protected readonly channelAddedEmitter = new Emitter<OutputChannel>();\n    protected readonly selectedChannelEmitter: Emitter<void> = new Emitter<void>();\n    protected readonly listOrSelectionEmitter: Emitter<void> = new Emitter<void>();\n    readonly onChannelDelete = this.channelDeleteEmitter.event;\n    readonly onChannelAdded = this.channelAddedEmitter.event;\n    readonly onSelectedChannelChange = this.selectedChannelEmitter.event;\n    readonly onListOrSelectionChange = this.listOrSelectionEmitter.event;\n\n    protected toDispose = new DisposableCollection();\n\n    @inject(OutputPreferences)\n    protected readonly preferences: OutputPreferences;\n\n    @postConstruct()\n    protected init(): void {\n        this.getChannels().forEach(this.registerListener.bind(this));\n        this.toDispose.push(this.onChannelAdded(channel => {\n            this.listOrSelectionEmitter.fire(undefined);\n            this.registerListener(channel);\n        }));\n        this.toDispose.push(this.onChannelDelete(event => {\n            this.listOrSelectionEmitter.fire(undefined);\n            if (this.selectedChannel && this.selectedChannel.name === event.channelName) {\n                this.selectedChannel = this.getVisibleChannels()[0];\n            }\n        }));\n    }\n\n    protected registerListener(outputChannel: OutputChannel): void {\n        if (!this.selectedChannel) {\n            this.selectedChannel = outputChannel;\n        }\n        this.toDispose.push(outputChannel.onVisibilityChange(event => {\n            if (event.visible) {\n                this.selectedChannel = outputChannel;\n            } else if (outputChannel === this.selectedChannel) {\n                this.selectedChannel = this.getVisibleChannels()[0];\n            }\n        }));\n    }\n\n    getChannel(name: string): OutputChannel {\n        const existing = this.channels.get(name);\n        if (existing) {\n            return existing;\n        }\n        const channel = new OutputChannel(name, this.preferences);\n        this.channels.set(name, channel);\n        this.channelAddedEmitter.fire(channel);\n        return channel;\n    }\n\n    deleteChannel(name: string): void {\n        this.channels.delete(name);\n        this.channelDeleteEmitter.fire({ channelName: name });\n    }\n\n    getChannels(): OutputChannel[] {\n        return Array.from(this.channels.values());\n    }\n\n    getVisibleChannels(): OutputChannel[] {\n        return this.getChannels().filter(channel => channel.isVisible);\n    }\n\n    public dispose(): void {\n        this.toDispose.dispose();\n    }\n\n    get selectedChannel(): OutputChannel | undefined {\n        return this.selectedChannelValue;\n    }\n\n    set selectedChannel(channel: OutputChannel | undefined) {\n        this.selectedChannelValue = channel;\n        this.selectedChannelEmitter.fire(undefined);\n        this.listOrSelectionEmitter.fire(undefined);\n    }\n}\n\nexport class OutputChannel {\n\n    private readonly visibilityChangeEmitter = new Emitter<{ visible: boolean }>();\n    private readonly contentChangeEmitter = new Emitter<OutputChannel>();\n    private lines: string[] = [];\n    private currentLine: string | undefined;\n    private visible: boolean = true;\n\n    readonly onVisibilityChange: Event<{ visible: boolean }> = this.visibilityChangeEmitter.event;\n    readonly onContentChange: Event<OutputChannel> = this.contentChangeEmitter.event;\n\n    constructor(readonly name: string, readonly preferences: OutputPreferences) { }\n\n    append(value: string): void {\n        if (this.currentLine === undefined) {\n            this.currentLine = value;\n        } else {\n            this.currentLine += value;\n        }\n        this.contentChangeEmitter.fire(this);\n    }\n\n    appendLine(line: string): void {\n        if (this.currentLine !== undefined) {\n            this.lines.push(this.currentLine + line);\n            this.currentLine = undefined;\n        } else {\n            this.lines.push(line);\n        }\n        const maxChannelHistory = this.preferences['output.maxChannelHistory'];\n        if (this.lines.length > maxChannelHistory) {\n            this.lines.splice(0, this.lines.length - maxChannelHistory);\n        }\n        this.contentChangeEmitter.fire(this);\n    }\n\n    clear(): void {\n        this.lines.length = 0;\n        this.currentLine = undefined;\n        this.contentChangeEmitter.fire(this);\n    }\n\n    setVisibility(visible: boolean): void {\n        this.visible = visible;\n        this.visibilityChangeEmitter.fire({ visible });\n    }\n\n    getLines(): string[] {\n        if (this.currentLine !== undefined) {\n            return [...this.lines, this.currentLine];\n        } else {\n            return this.lines;\n        }\n    }\n\n    get isVisible(): boolean {\n        return this.visible;\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { interfaces } from 'inversify';\nimport {\n    createPreferenceProxy,\n    PreferenceProxy,\n    PreferenceService,\n    PreferenceContribution,\n    PreferenceSchema\n} from '@theia/core/lib/browser/preferences';\n\nexport const OutputConfigSchema: PreferenceSchema = {\n    'type': 'object',\n    'properties': {\n        'output.maxChannelHistory': {\n            'type': 'number',\n            'description': 'The maximum number of entries in an output channel.',\n            'default': 1000\n        }\n    }\n};\n\nexport interface OutputConfiguration {\n    'output.maxChannelHistory': number\n}\n\nexport const OutputPreferences = Symbol('OutputPreferences');\nexport type OutputPreferences = PreferenceProxy<OutputConfiguration>;\n\nexport function createOutputPreferences(preferences: PreferenceService): OutputPreferences {\n    return createPreferenceProxy(preferences, OutputConfigSchema);\n}\n\nexport function bindOutputPreferences(bind: interfaces.Bind): void {\n    bind(OutputPreferences).toDynamicValue(ctx => {\n        const preferences = ctx.container.get<PreferenceService>(PreferenceService);\n        return createOutputPreferences(preferences);\n    });\n\n    bind(PreferenceContribution).toConstantValue({ schema: OutputConfigSchema });\n}\n","\nvar content = require(\"!!../../../../../../../../css-loader/index.js!./output.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../../../../../style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../../../../../css-loader/index.js!./output.css\", function() {\n\t\tvar newContent = require(\"!!../../../../../../../../css-loader/index.js!./output.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nexport * from './variable';\nexport * from './variable-quick-open-service';\nexport * from './variable-resolver-service';\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { inject, injectable } from 'inversify';\nimport { MessageService } from '@theia/core/lib/common/message-service';\nimport { QuickOpenModel, QuickOpenItem, QuickOpenMode } from '@theia/core/lib/common/quick-open-model';\nimport { QuickOpenService } from '@theia/core/lib/browser/quick-open/quick-open-service';\nimport { QuickInputService } from '@theia/core/lib/browser/quick-open/quick-input-service';\nimport { VariableRegistry, Variable } from './variable';\nimport { VariableResolverService } from './variable-resolver-service';\n\n@injectable()\nexport class VariableQuickOpenService implements QuickOpenModel {\n\n    protected items: QuickOpenItem[];\n\n    @inject(MessageService)\n    protected readonly messages: MessageService;\n\n    @inject(QuickInputService)\n    protected readonly quickInputService: QuickInputService;\n\n    @inject(VariableResolverService)\n    protected readonly variableResolver: VariableResolverService;\n\n    constructor(\n        @inject(VariableRegistry) protected readonly variableRegistry: VariableRegistry,\n        @inject(QuickOpenService) protected readonly quickOpenService: QuickOpenService\n    ) { }\n\n    open(): void {\n        this.items = this.variableRegistry.getVariables().map(v => new QuickOpenItem({\n            label: '${' + v.name + '}',\n            detail: v.description,\n            run: mode => {\n                if (mode === QuickOpenMode.OPEN) {\n                    setTimeout(() => this.showValue(v));\n                    return true;\n                }\n                return false;\n            }\n        }));\n\n        this.quickOpenService.open(this, {\n            placeholder: 'Registered variables',\n            fuzzyMatchLabel: true,\n            fuzzyMatchDescription: true,\n            fuzzySort: true\n        });\n    }\n\n    onType(lookFor: string, acceptor: (items: QuickOpenItem[]) => void): void {\n        acceptor(this.items);\n    }\n\n    protected async showValue(variable: Variable): Promise<void> {\n        const argument = await this.quickInputService.open({\n            placeHolder: 'Type a variable argument'\n        });\n        const value = await this.variableResolver.resolve('${' + variable.name + ':' + argument + '}');\n        if (typeof value === 'string') {\n            this.messages.info(value);\n        }\n    }\n\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\n/* eslint-disable @typescript-eslint/no-explicit-any */\n\nimport { injectable, inject } from 'inversify';\nimport { VariableRegistry } from './variable';\nimport URI from '@theia/core/lib/common/uri';\nimport { JSONExt, ReadonlyJSONValue } from '@phosphor/coreutils/lib/json';\n\nexport interface VariableResolveOptions {\n    context?: URI;\n    /**\n     * Used for resolving inputs, see https://code.visualstudio.com/docs/editor/variables-reference#_input-variables\n     */\n    configurationSection?: string;\n}\n\n/**\n * The variable resolver service should be used to resolve variables in strings.\n */\n@injectable()\nexport class VariableResolverService {\n\n    protected static VAR_REGEXP = /\\$\\{(.*?)\\}/g;\n\n    @inject(VariableRegistry) protected readonly variableRegistry: VariableRegistry;\n\n    /**\n     * Resolve the variables in the given string array.\n     * @param value The array of data to resolve\n     * @param options options of the variable resolution\n     * @returns promise resolved to the provided string array with already resolved variables.\n     * Never reject.\n     */\n    resolveArray(value: string[], options: VariableResolveOptions = {}): Promise<string[]> {\n        return this.resolve(value, options);\n    }\n\n    /**\n     * Resolve the variables in the given string.\n     * @param value Data to resolve\n     * @param options options of the variable resolution\n     * @returns promise resolved to the provided string with already resolved variables.\n     * Never reject.\n     */\n    async resolve<T>(value: T, options: VariableResolveOptions = {}): Promise<T> {\n        const context = new VariableResolverService.Context(this.variableRegistry, options);\n        const resolved = await this.doResolve(value, context);\n        return resolved as any;\n    }\n\n    protected async doResolve(value: Object | undefined, context: VariableResolverService.Context): Promise<Object | undefined> {\n        // eslint-disable-next-line no-null/no-null\n        if (value === undefined || value === null) {\n            return value;\n        }\n        if (typeof value === 'string') {\n            return this.doResolveString(value, context);\n        }\n        if (Array.isArray(value)) {\n            return this.doResolveArray(value, context);\n        }\n        if (typeof value === 'object') {\n            return this.doResolveObject(value, context);\n        }\n        return value;\n    }\n\n    protected async doResolveObject(obj: object, context: VariableResolverService.Context): Promise<object> {\n        const result: {\n            [prop: string]: Object | undefined\n        } = {};\n        for (const name of Object.keys(obj)) {\n            const value = (obj as any)[name];\n            const resolved = await this.doResolve(value, context);\n            result[name] = resolved;\n        }\n        return result;\n    }\n\n    protected async doResolveArray(values: Array<Object | undefined>, context: VariableResolverService.Context): Promise<Array<Object | undefined>> {\n        const result: (Object | undefined)[] = [];\n        for (const value of values) {\n            const resolved = await this.doResolve(value, context);\n            result.push(resolved);\n        }\n        return result;\n    }\n\n    protected async doResolveString(value: string, context: VariableResolverService.Context): Promise<string> {\n        await this.resolveVariables(value, context);\n        return value.replace(VariableResolverService.VAR_REGEXP, (match: string, varName: string) => {\n            const varValue = context.get(varName);\n            return varValue !== undefined ? varValue : match;\n        });\n    }\n\n    protected async resolveVariables(value: string, context: VariableResolverService.Context): Promise<void> {\n        const variableRegExp = new RegExp(VariableResolverService.VAR_REGEXP);\n        let match;\n        // eslint-disable-next-line no-null/no-null\n        while ((match = variableRegExp.exec(value)) !== null) {\n            const variableName = match[1];\n            await context.resolve(variableName);\n        }\n    }\n}\nexport namespace VariableResolverService {\n    export class Context {\n\n        protected readonly resolved = new Map<string, string | undefined>();\n\n        constructor(\n            protected readonly variableRegistry: VariableRegistry,\n            protected readonly options: VariableResolveOptions\n        ) { }\n\n        get(name: string): string | undefined {\n            return this.resolved.get(name);\n        }\n\n        async resolve(name: string): Promise<void> {\n            if (this.resolved.has(name)) {\n                return;\n            }\n            try {\n                let variableName = name;\n                let argument: string | undefined;\n                const parts = name.split(':');\n                if (parts.length > 1) {\n                    variableName = parts[0];\n                    argument = parts[1];\n                }\n                const variable = this.variableRegistry.getVariable(variableName);\n                const value = variable && await variable.resolve(this.options.context, argument, this.options.configurationSection);\n                // eslint-disable-next-line no-null/no-null\n                const stringValue = value !== undefined && value !== null && JSONExt.isPrimitive(value as ReadonlyJSONValue) ? String(value) : undefined;\n                this.resolved.set(name, stringValue);\n            } catch (e) {\n                console.error(`Failed to resolved '${name}' variable`, e);\n                this.resolved.set(name, undefined);\n            }\n        }\n\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { injectable } from 'inversify';\nimport { Disposable, DisposableCollection, MaybePromise } from '@theia/core';\nimport URI from '@theia/core/lib/common/uri';\n\n/**\n * Variable can be used inside of strings using ${variableName} syntax.\n */\nexport interface Variable {\n\n    /**\n     * A unique name of this variable.\n     */\n    readonly name: string;\n\n    /**\n     * A human-readable description of this variable.\n     */\n    readonly description?: string;\n\n    /**\n     * Resolve to a string value of this variable or\n     * `undefined` if variable cannot be resolved.\n     * Never reject.\n     */\n    resolve(context?: URI, argment?: string, configurationSection?: string): MaybePromise<Object | undefined>;\n}\n\nexport const VariableContribution = Symbol('VariableContribution');\n/**\n * The variable contribution should be implemented to register custom variables.\n */\nexport interface VariableContribution {\n    registerVariables(variables: VariableRegistry): void;\n}\n\n/**\n * The variable registry manages variables.\n */\n@injectable()\nexport class VariableRegistry implements Disposable {\n\n    protected readonly variables: Map<string, Variable> = new Map();\n    protected readonly toDispose = new DisposableCollection();\n\n    dispose(): void {\n        this.toDispose.dispose();\n    }\n\n    /**\n     * Register the given variable.\n     * Do nothing if a variable is already registered for the given variable name.\n     */\n    registerVariable(variable: Variable): Disposable {\n        if (this.variables.has(variable.name)) {\n            console.warn(`A variables with name ${variable.name} is already registered.`);\n            return Disposable.NULL;\n        }\n        this.variables.set(variable.name, variable);\n        const disposable = {\n            dispose: () => this.variables.delete(variable.name)\n        };\n        this.toDispose.push(disposable);\n        return disposable;\n    }\n\n    /**\n     * Return all registered variables.\n     */\n    getVariables(): Variable[] {\n        return [...this.variables.values()];\n    }\n\n    /**\n     * Get a variable for the given name or `undefined` if none.\n     */\n    getVariable(name: string): Variable | undefined {\n        return this.variables.get(name);\n    }\n\n    /**\n     * Register an array of variables.\n     * Do nothing if a variable is already registered for the given variable name.\n     */\n    registerVariables(variables: Variable[]): Disposable[] {\n        return variables.map(v => this.registerVariable(v));\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2017 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { inject, injectable } from 'inversify';\nimport URI from '@theia/core/lib/common/uri';\nimport { DiffUris } from '@theia/core/lib/browser/diff-uris';\nimport { FileSystem } from '@theia/filesystem/lib/common/filesystem';\nimport { open, OpenerService, OpenerOptions } from '@theia/core/lib/browser';\nimport { MessageService } from '@theia/core/lib/common/message-service';\n\n@injectable()\nexport class DiffService {\n\n    @inject(FileSystem) protected readonly fileSystem: FileSystem;\n    @inject(OpenerService) protected readonly openerService: OpenerService;\n    @inject(MessageService) protected readonly messageService: MessageService;\n\n    public async openDiffEditor(left: URI, right: URI, label?: string, options?: OpenerOptions): Promise<void> {\n        if (left.scheme === 'file' && right.scheme === 'file') {\n            const [leftExists, rightExists] = await Promise.all([\n                this.fileSystem.exists(left.toString()),\n                this.fileSystem.exists(right.toString())\n            ]);\n            if (leftExists && rightExists) {\n                const [leftStat, rightStat] = await Promise.all([\n                    this.fileSystem.getFileStat(left.toString()),\n                    this.fileSystem.getFileStat(right.toString()),\n                ]);\n                if (leftStat && rightStat) {\n                    if (!leftStat.isDirectory && !rightStat.isDirectory) {\n                        const uri = DiffUris.encode(left, right, label);\n                        await open(this.openerService, uri, options);\n                    } else {\n                        const details = (() => {\n                            if (leftStat.isDirectory && rightStat.isDirectory) {\n                                return 'Both resource were a directory.';\n                            } else {\n                                if (leftStat.isDirectory) {\n                                    return `'${left.path.base}' was a directory.`;\n                                } else {\n                                    return `'${right.path.base}' was a directory.`;\n                                }\n                            }\n                        });\n                        this.messageService.warn(`Directories cannot be compared. ${details()}`);\n                    }\n                }\n            }\n        } else {\n            const uri = DiffUris.encode(left, right, label);\n            await open(this.openerService, uri, options);\n        }\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2017 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nexport * from './workspace-commands';\nexport * from './workspace-service';\nexport * from './workspace-frontend-contribution';\nexport * from './workspace-frontend-module';\nexport * from './workspace-preferences';\n","/********************************************************************************\n * Copyright (C) 2018 Ericsson and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { injectable, inject } from 'inversify';\nimport { QuickOpenService, QuickOpenModel, QuickOpenItem, QuickOpenGroupItem, QuickOpenMode, LabelProvider } from '@theia/core/lib/browser';\nimport { WorkspaceService } from './workspace-service';\nimport { getTemporaryWorkspaceFileUri } from '../common';\nimport { WorkspacePreferences } from './workspace-preferences';\nimport URI from '@theia/core/lib/common/uri';\nimport { FileSystem, FileSystemUtils } from '@theia/filesystem/lib/common';\nimport * as moment from 'moment';\n\n@injectable()\nexport class QuickOpenWorkspace implements QuickOpenModel {\n\n    protected items: QuickOpenGroupItem[];\n    protected opened: boolean;\n\n    @inject(QuickOpenService) protected readonly quickOpenService: QuickOpenService;\n    @inject(WorkspaceService) protected readonly workspaceService: WorkspaceService;\n    @inject(FileSystem) protected readonly fileSystem: FileSystem;\n    @inject(LabelProvider) protected readonly labelProvider: LabelProvider;\n    @inject(WorkspacePreferences) protected preferences: WorkspacePreferences;\n\n    async open(workspaces: string[]): Promise<void> {\n        this.items = [];\n        const homeStat = await this.fileSystem.getCurrentUserHome();\n        const home = (homeStat) ? new URI(homeStat.uri).path.toString() : undefined;\n        let tempWorkspaceFile: URI | undefined;\n        if (home) {\n            tempWorkspaceFile = getTemporaryWorkspaceFileUri(new URI(home));\n        }\n        await this.preferences.ready;\n        if (!workspaces.length) {\n            this.items.push(new QuickOpenGroupItem({\n                label: 'No Recent Workspaces',\n                run: (mode: QuickOpenMode): boolean => false\n            }));\n        }\n        for (const workspace of workspaces) {\n            const uri = new URI(workspace);\n            const stat = await this.fileSystem.getFileStat(workspace);\n            if (!stat ||\n                !this.preferences['workspace.supportMultiRootWorkspace'] && !stat.isDirectory) {\n                continue; // skip the workspace files if multi root is not supported\n            }\n            if (tempWorkspaceFile && uri.toString() === tempWorkspaceFile.toString()) {\n                continue; // skip the temporary workspace files\n            }\n            const icon = this.labelProvider.getIcon(stat);\n            const iconClass = icon === '' ? undefined : icon + ' file-icon';\n            this.items.push(new QuickOpenGroupItem({\n                label: uri.path.base,\n                description: (home) ? FileSystemUtils.tildifyPath(uri.path.toString(), home) : uri.path.toString(),\n                groupLabel: `last modified ${moment(stat.lastModification).fromNow()}`,\n                iconClass,\n                run: (mode: QuickOpenMode): boolean => {\n                    if (mode !== QuickOpenMode.OPEN) {\n                        return false;\n                    }\n                    const current = this.workspaceService.workspace;\n                    const uriToOpen = new URI(workspace);\n                    if ((current && current.uri !== workspace) || !current) {\n                        this.workspaceService.open(uriToOpen);\n                    }\n                    return true;\n                },\n            }));\n        }\n\n        this.quickOpenService.open(this, {\n            placeholder: 'Type the name of the workspace you want to open',\n            fuzzyMatchLabel: true,\n            fuzzySort: false\n        });\n    }\n\n    onType(lookFor: string, acceptor: (items: QuickOpenItem[]) => void): void {\n        acceptor(this.items);\n    }\n\n    select(): void {\n        this.items = [];\n        this.opened = this.workspaceService.opened;\n        this.workspaceService.recentWorkspaces().then(workspaceRoots => {\n            if (workspaceRoots) {\n                this.open(workspaceRoots);\n            }\n        });\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2017 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { inject, injectable } from 'inversify';\nimport URI from '@theia/core/lib/common/uri';\nimport { SelectionService } from '@theia/core/lib/common/selection-service';\nimport { Command, CommandContribution, CommandRegistry } from '@theia/core/lib/common/command';\nimport { MenuContribution, MenuModelRegistry } from '@theia/core/lib/common/menu';\nimport { CommonMenus } from '@theia/core/lib/browser/common-frontend-contribution';\nimport { FileSystem, FileStat } from '@theia/filesystem/lib/common/filesystem';\nimport { FileDialogService } from '@theia/filesystem/lib/browser';\nimport { SingleTextInputDialog, ConfirmDialog } from '@theia/core/lib/browser/dialogs';\nimport { OpenerService, OpenHandler, open, FrontendApplication, LabelProvider } from '@theia/core/lib/browser';\nimport { UriCommandHandler, UriAwareCommandHandler } from '@theia/core/lib/common/uri-command-handler';\nimport { WorkspaceService } from './workspace-service';\nimport { MessageService } from '@theia/core/lib/common/message-service';\nimport { WorkspacePreferences } from './workspace-preferences';\nimport { WorkspaceDeleteHandler } from './workspace-delete-handler';\nimport { WorkspaceDuplicateHandler } from './workspace-duplicate-handler';\nimport { FileSystemUtils } from '@theia/filesystem/lib/common';\nimport { WorkspaceCompareHandler } from './workspace-compare-handler';\nimport { FileDownloadCommands } from '@theia/filesystem/lib/browser/download/file-download-command-contribution';\nimport { FileSystemCommands } from '@theia/filesystem/lib/browser/filesystem-frontend-contribution';\nimport { WorkspaceInputDialog } from './workspace-input-dialog';\n\nconst validFilename: (arg: string) => boolean = require('valid-filename');\n\nexport namespace WorkspaceCommands {\n\n    const WORKSPACE_CATEGORY = 'Workspace';\n    const FILE_CATEGORY = 'File';\n\n    // On Linux and Windows, both files and folders cannot be opened at the same time in electron.\n    // `OPEN_FILE` and `OPEN_FOLDER` must be available only on Linux and Windows in electron.\n    // `OPEN` must *not* be available on Windows and Linux in electron.\n    // VS Code does the same. See: https://github.com/eclipse-theia/theia/pull/3202#issuecomment-430585357\n    export const OPEN: Command & { dialogLabel: string } = {\n        id: 'workspace:open',\n        category: FILE_CATEGORY,\n        label: 'Open...',\n        dialogLabel: 'Open'\n    };\n    // No `label`. Otherwise, it shows up in the `Command Palette`.\n    export const OPEN_FILE: Command & { dialogLabel: string } = {\n        id: 'workspace:openFile',\n        category: FILE_CATEGORY,\n        dialogLabel: 'Open File'\n    };\n    export const OPEN_FOLDER: Command & { dialogLabel: string } = {\n        id: 'workspace:openFolder',\n        dialogLabel: 'Open Folder' // No `label`. Otherwise, it shows up in the `Command Palette`.\n    };\n    export const OPEN_WORKSPACE: Command & { dialogLabel: string } = {\n        id: 'workspace:openWorkspace',\n        category: FILE_CATEGORY,\n        label: 'Open Workspace...',\n        dialogLabel: 'Open Workspace'\n    };\n    export const OPEN_RECENT_WORKSPACE: Command = {\n        id: 'workspace:openRecent',\n        category: FILE_CATEGORY,\n        label: 'Open Recent Workspace...'\n    };\n    export const CLOSE: Command = {\n        id: 'workspace:close',\n        category: WORKSPACE_CATEGORY,\n        label: 'Close Workspace'\n    };\n    export const NEW_FILE: Command = {\n        id: 'file.newFile',\n        category: FILE_CATEGORY,\n        label: 'New File'\n    };\n    export const NEW_FOLDER: Command = {\n        id: 'file.newFolder',\n        category: FILE_CATEGORY,\n        label: 'New Folder'\n    };\n    export const FILE_OPEN_WITH = (opener: OpenHandler): Command => ({\n        id: `file.openWith.${opener.id}`\n    });\n    export const FILE_RENAME: Command = {\n        id: 'file.rename',\n        category: FILE_CATEGORY,\n        label: 'Rename'\n    };\n    export const FILE_DELETE: Command = {\n        id: 'file.delete',\n        category: FILE_CATEGORY,\n        label: 'Delete'\n    };\n    export const FILE_DUPLICATE: Command = {\n        id: 'file.duplicate',\n        category: FILE_CATEGORY,\n        label: 'Duplicate'\n    };\n    export const FILE_COMPARE: Command = {\n        id: 'file.compare',\n        category: FILE_CATEGORY,\n        label: 'Compare with Each Other'\n    };\n    export const ADD_FOLDER: Command = {\n        id: 'workspace:addFolder',\n        category: WORKSPACE_CATEGORY,\n        label: 'Add Folder to Workspace...'\n    };\n    export const REMOVE_FOLDER: Command = {\n        id: 'workspace:removeFolder',\n        category: WORKSPACE_CATEGORY,\n        label: 'Remove Folder from Workspace'\n    };\n    export const SAVE_WORKSPACE_AS: Command = {\n        id: 'workspace:saveAs',\n        category: WORKSPACE_CATEGORY,\n        label: 'Save Workspace As...'\n    };\n    export const SAVE_AS: Command = {\n        id: 'file.saveAs',\n        category: 'File',\n        label: 'Save As...',\n    };\n}\n\n@injectable()\nexport class FileMenuContribution implements MenuContribution {\n\n    registerMenus(registry: MenuModelRegistry): void {\n        registry.registerMenuAction(CommonMenus.FILE_NEW, {\n            commandId: WorkspaceCommands.NEW_FILE.id\n        });\n        registry.registerMenuAction(CommonMenus.FILE_NEW, {\n            commandId: WorkspaceCommands.NEW_FOLDER.id\n        });\n        const downloadUploadMenu = [...CommonMenus.FILE, '4_downloadupload'];\n        registry.registerMenuAction(downloadUploadMenu, {\n            commandId: FileSystemCommands.UPLOAD.id,\n            order: 'a'\n        });\n        registry.registerMenuAction(downloadUploadMenu, {\n            commandId: FileDownloadCommands.DOWNLOAD.id,\n            order: 'b'\n        });\n    }\n\n}\n\n@injectable()\nexport class EditMenuContribution implements MenuContribution {\n\n    registerMenus(registry: MenuModelRegistry): void {\n        registry.registerMenuAction(CommonMenus.EDIT_CLIPBOARD, {\n            commandId: FileDownloadCommands.COPY_DOWNLOAD_LINK.id,\n            order: '9999'\n        });\n    }\n\n}\n\n@injectable()\nexport class WorkspaceCommandContribution implements CommandContribution {\n\n    @inject(LabelProvider) protected readonly labelProvider: LabelProvider;\n    @inject(FileSystem) protected readonly fileSystem: FileSystem;\n    @inject(WorkspaceService) protected readonly workspaceService: WorkspaceService;\n    @inject(SelectionService) protected readonly selectionService: SelectionService;\n    @inject(OpenerService) protected readonly openerService: OpenerService;\n    @inject(FrontendApplication) protected readonly app: FrontendApplication;\n    @inject(MessageService) protected readonly messageService: MessageService;\n    @inject(WorkspacePreferences) protected readonly preferences: WorkspacePreferences;\n    @inject(FileDialogService) protected readonly fileDialogService: FileDialogService;\n    @inject(WorkspaceDeleteHandler) protected readonly deleteHandler: WorkspaceDeleteHandler;\n    @inject(WorkspaceDuplicateHandler) protected readonly duplicateHandler: WorkspaceDuplicateHandler;\n    @inject(WorkspaceCompareHandler) protected readonly compareHandler: WorkspaceCompareHandler;\n\n    registerCommands(registry: CommandRegistry): void {\n        this.openerService.getOpeners().then(openers => {\n            for (const opener of openers) {\n                const openWithCommand = WorkspaceCommands.FILE_OPEN_WITH(opener);\n                registry.registerCommand(openWithCommand, this.newUriAwareCommandHandler({\n                    execute: uri => opener.open(uri),\n                    isEnabled: uri => opener.canHandle(uri) > 0,\n                    isVisible: uri => opener.canHandle(uri) > 0 && this.areMultipleOpenHandlersPresent(openers, uri)\n                }));\n            }\n        });\n        registry.registerCommand(WorkspaceCommands.NEW_FILE, this.newWorkspaceRootUriAwareCommandHandler({\n            execute: uri => this.getDirectory(uri).then(parent => {\n                if (parent) {\n                    const parentUri = new URI(parent.uri);\n                    const { fileName, fileExtension } = this.getDefaultFileConfig();\n                    const vacantChildUri = FileSystemUtils.generateUniqueResourceURI(parentUri, parent, fileName, fileExtension);\n\n                    const dialog = new WorkspaceInputDialog({\n                        title: 'New File',\n                        parentUri: parentUri,\n                        initialValue: vacantChildUri.path.base,\n                        validate: name => this.validateFileName(name, parent, true)\n                    }, this.labelProvider);\n\n                    dialog.open().then(name => {\n                        if (name) {\n                            const fileUri = parentUri.resolve(name);\n                            this.fileSystem.createFile(fileUri.toString()).then(() => {\n                                open(this.openerService, fileUri);\n                            });\n                        }\n                    });\n                }\n            })\n        }));\n        registry.registerCommand(WorkspaceCommands.NEW_FOLDER, this.newWorkspaceRootUriAwareCommandHandler({\n            execute: uri => this.getDirectory(uri).then(parent => {\n                if (parent) {\n                    const parentUri = new URI(parent.uri);\n                    const vacantChildUri = FileSystemUtils.generateUniqueResourceURI(parentUri, parent, 'Untitled');\n                    const dialog = new WorkspaceInputDialog({\n                        title: 'New Folder',\n                        parentUri: parentUri,\n                        initialValue: vacantChildUri.path.base,\n                        validate: name => this.validateFileName(name, parent, true)\n                    }, this.labelProvider);\n                    dialog.open().then(name => {\n                        if (name) {\n                            this.fileSystem.createFolder(parentUri.resolve(name).toString());\n                        }\n                    });\n                }\n            })\n        }));\n        registry.registerCommand(WorkspaceCommands.FILE_RENAME, this.newMultiUriAwareCommandHandler({\n            isEnabled: uris => uris.some(uri => !this.isWorkspaceRoot(uri)) && uris.length === 1,\n            isVisible: uris => uris.some(uri => !this.isWorkspaceRoot(uri)) && uris.length === 1,\n            execute: uris => uris.forEach(uri => {\n                this.getParent(uri).then(async parent => {\n                    if (parent) {\n                        const initialValue = uri.path.base;\n                        const stat = await this.fileSystem.getFileStat(uri.toString());\n                        if (stat === undefined) {\n                            throw new Error(`Unexpected error occurred when renaming. File does not exist. URI: ${uri.toString(true)}.`);\n                        }\n                        const fileType = stat.isDirectory ? 'Directory' : 'File';\n                        const titleStr = `Rename ${fileType}`;\n                        const dialog = new SingleTextInputDialog({\n                            title: titleStr,\n                            initialValue,\n                            initialSelectionRange: {\n                                start: 0,\n                                end: uri.path.name.length\n                            },\n                            validate: (name, mode) => {\n                                if (initialValue === name && mode === 'preview') {\n                                    return false;\n                                }\n                                return this.validateFileName(name, parent, false);\n                            }\n                        });\n                        dialog.open().then(name => {\n                            if (name) {\n                                this.fileSystem.move(uri.toString(), uri.parent.resolve(name).toString(), { overwrite: true });\n                            }\n                        });\n                    }\n                });\n            })\n        }));\n        registry.registerCommand(WorkspaceCommands.FILE_DUPLICATE, this.newMultiUriAwareCommandHandler(this.duplicateHandler));\n        registry.registerCommand(WorkspaceCommands.FILE_DELETE, this.newMultiUriAwareCommandHandler(this.deleteHandler));\n        registry.registerCommand(WorkspaceCommands.FILE_COMPARE, this.newMultiUriAwareCommandHandler(this.compareHandler));\n        this.preferences.ready.then(() => {\n            registry.registerCommand(WorkspaceCommands.ADD_FOLDER, {\n                isEnabled: () => this.workspaceService.isMultiRootWorkspaceEnabled,\n                isVisible: () => this.workspaceService.isMultiRootWorkspaceEnabled,\n                execute: async () => {\n                    const uri = await this.fileDialogService.showOpenDialog({\n                        title: WorkspaceCommands.ADD_FOLDER.label!,\n                        canSelectFiles: false,\n                        canSelectFolders: true\n                    });\n                    if (!uri) {\n                        return;\n                    }\n                    const workspaceSavedBeforeAdding = this.workspaceService.saved;\n                    await this.addFolderToWorkspace(uri);\n                    if (!workspaceSavedBeforeAdding) {\n                        const saveCommand = registry.getCommand(WorkspaceCommands.SAVE_WORKSPACE_AS.id);\n                        if (saveCommand && await new ConfirmDialog({\n                            title: 'Folder added to Workspace',\n                            msg: 'A workspace with multiple roots was created. Do you want to save your workspace configuration as a file?',\n                            ok: 'Yes',\n                            cancel: 'No'\n                        }).open()) {\n                            registry.executeCommand(saveCommand.id);\n                        }\n                    }\n                }\n            });\n            registry.registerCommand(WorkspaceCommands.REMOVE_FOLDER, this.newMultiUriAwareCommandHandler({\n                execute: uris => this.removeFolderFromWorkspace(uris),\n                isEnabled: () => this.workspaceService.isMultiRootWorkspaceEnabled,\n                isVisible: uris => this.areWorkspaceRoots(uris) && this.workspaceService.saved\n            }));\n        });\n    }\n\n    protected newUriAwareCommandHandler(handler: UriCommandHandler<URI>): UriAwareCommandHandler<URI> {\n        return new UriAwareCommandHandler(this.selectionService, handler);\n    }\n\n    protected newMultiUriAwareCommandHandler(handler: UriCommandHandler<URI[]>): UriAwareCommandHandler<URI[]> {\n        return new UriAwareCommandHandler(this.selectionService, handler, { multi: true });\n    }\n\n    protected newWorkspaceRootUriAwareCommandHandler(handler: UriCommandHandler<URI>): WorkspaceRootUriAwareCommandHandler {\n        return new WorkspaceRootUriAwareCommandHandler(this.workspaceService, this.selectionService, handler);\n    }\n\n    /**\n     * Returns an error message if the file name is invalid. Otherwise, an empty string.\n     *\n     * @param name the simple file name of the file to validate.\n     * @param parent the parent directory's file stat.\n     * @param recursive allow file or folder creation using recursive path\n     */\n    protected async validateFileName(name: string, parent: FileStat, recursive: boolean = false): Promise<string> {\n        if (!name) {\n            return '';\n        }\n        // do not allow recursive rename\n        if (!recursive && !validFilename(name)) {\n            return 'Invalid file or folder name';\n        }\n        if (name.startsWith('/')) {\n            return 'Absolute paths or names that starts with / are not allowed';\n        } else if (name.startsWith(' ') || name.endsWith(' ')) {\n            return 'Names with leading or trailing whitespaces are not allowed';\n        }\n        // check and validate each sub-paths\n        if (name.split(/[\\\\/]/).some(file => !file || !validFilename(file) || /^\\s+$/.test(file))) {\n            return `The name \"${this.trimFileName(name)}\" is not a valid file or folder name.`;\n        }\n        const childUri = new URI(parent.uri).resolve(name).toString();\n        const exists = await this.fileSystem.exists(childUri);\n        if (exists) {\n            return `A file or folder \"${this.trimFileName(name)}\" already exists at this location.`;\n        }\n        return '';\n    }\n\n    protected trimFileName(name: string): string {\n        if (name && name.length > 30) {\n            return `${name.substr(0, 30)}...`;\n        }\n        return name;\n    }\n\n    protected async getDirectory(candidate: URI): Promise<FileStat | undefined> {\n        const stat = await this.fileSystem.getFileStat(candidate.toString());\n        if (stat && stat.isDirectory) {\n            return stat;\n        }\n        return this.getParent(candidate);\n    }\n\n    protected getParent(candidate: URI): Promise<FileStat | undefined> {\n        return this.fileSystem.getFileStat(candidate.parent.toString());\n    }\n\n    protected async addFolderToWorkspace(uri: URI | undefined): Promise<void> {\n        if (uri) {\n            const stat = await this.fileSystem.getFileStat(uri.toString());\n            if (stat && stat.isDirectory) {\n                await this.workspaceService.addRoot(uri);\n            }\n        }\n    }\n\n    protected areWorkspaceRoots(uris: URI[]): boolean {\n        return this.workspaceService.areWorkspaceRoots(uris);\n    }\n\n    protected isWorkspaceRoot(uri: URI): boolean {\n        const rootUris = new Set(this.workspaceService.tryGetRoots().map(root => root.uri));\n        return rootUris.has(uri.toString());\n    }\n\n    protected getDefaultFileConfig(): { fileName: string, fileExtension: string } {\n        return {\n            fileName: 'Untitled',\n            fileExtension: '.txt'\n        };\n    }\n\n    protected async removeFolderFromWorkspace(uris: URI[]): Promise<void> {\n        const roots = new Set(this.workspaceService.tryGetRoots().map(r => r.uri));\n        const toRemove = uris.filter(u => roots.has(u.toString()));\n        if (toRemove.length > 0) {\n            const messageContainer = document.createElement('div');\n            messageContainer.textContent = 'Remove the following folders from workspace? (note: nothing will be erased from disk)';\n            const list = document.createElement('ul');\n            list.style.listStyleType = 'none';\n            toRemove.forEach(u => {\n                const listItem = document.createElement('li');\n                listItem.textContent = u.displayName;\n                list.appendChild(listItem);\n            });\n            messageContainer.appendChild(list);\n            const dialog = new ConfirmDialog({\n                title: 'Remove Folder from Workspace',\n                msg: messageContainer\n            });\n            if (await dialog.open()) {\n                await this.workspaceService.removeRoots(toRemove);\n            }\n        }\n    }\n\n    protected areMultipleOpenHandlersPresent(openers: OpenHandler[], uri: URI): boolean {\n        let count = 0;\n        for (const opener of openers) {\n            if (opener.canHandle(uri) > 0) {\n                count++;\n            }\n            if (count > 1) {\n                return true;\n            }\n        }\n        return false;\n    }\n}\n\nexport class WorkspaceRootUriAwareCommandHandler extends UriAwareCommandHandler<URI> {\n\n    constructor(\n        protected readonly workspaceService: WorkspaceService,\n        protected readonly selectionService: SelectionService,\n        protected readonly handler: UriCommandHandler<URI>\n    ) {\n        super(selectionService, handler);\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    public isEnabled(...args: any[]): boolean {\n        return super.isEnabled(...args) && !!this.workspaceService.tryGetRoots().length;\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    public isVisible(...args: any[]): boolean {\n        return super.isVisible(...args) && !!this.workspaceService.tryGetRoots().length;\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    protected getUri(...args: any[]): URI | undefined {\n        const uri = super.getUri(...args);\n        // If the URI is available, return it immediately.\n        if (uri) {\n            return uri;\n        }\n        // Return the first root if available.\n        if (!!this.workspaceService.tryGetRoots().length) {\n            return new URI(this.workspaceService.tryGetRoots()[0].uri);\n        }\n    }\n\n}\n","/********************************************************************************\n * Copyright (C) 2019 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { inject, injectable } from 'inversify';\nimport URI from '@theia/core/lib/common/uri';\nimport { UriCommandHandler } from '@theia/core/lib/common/uri-command-handler';\nimport { DiffService } from './diff-service';\n\n@injectable()\nexport class WorkspaceCompareHandler implements UriCommandHandler<URI[]> {\n\n    @inject(DiffService) protected readonly diffService: DiffService;\n\n    /**\n     * Determine if the command is visible.\n     *\n     * @param uris URIs of selected resources.\n     * @returns `true` if the command is visible.\n     */\n    isVisible(uris: URI[]): boolean {\n        return uris.length === 2;\n    }\n\n    /**\n     * Determine if the command is enabled.\n     *\n     * @param uris URIs of selected resources.\n     * @returns `true` if the command is enabled.\n     */\n    isEnabled(uris: URI[]): boolean {\n        return uris.length === 2;\n    }\n\n    /**\n     * Execute the command.\n     *\n     * @param uris URIs of selected resources.\n     */\n    async execute(uris: URI[]): Promise<void> {\n        const [left, right] = uris;\n        await this.diffService.openDiffEditor(left, right);\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2017 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { injectable, inject } from 'inversify';\nimport URI from '@theia/core/lib/common/uri';\nimport { ConfirmDialog, ApplicationShell, SaveableWidget, NavigatableWidget } from '@theia/core/lib/browser';\nimport { FileSystem } from '@theia/filesystem/lib/common';\nimport { UriCommandHandler } from '@theia/core/lib/common/uri-command-handler';\nimport { WorkspaceService } from './workspace-service';\nimport { WorkspaceUtils } from './workspace-utils';\n\n@injectable()\nexport class WorkspaceDeleteHandler implements UriCommandHandler<URI[]> {\n\n    @inject(FileSystem)\n    protected readonly fileSystem: FileSystem;\n\n    @inject(ApplicationShell)\n    protected readonly shell: ApplicationShell;\n\n    @inject(WorkspaceUtils)\n    protected readonly workspaceUtils: WorkspaceUtils;\n\n    @inject(WorkspaceService)\n    protected readonly workspaceService: WorkspaceService;\n\n    /**\n     * Determine if the command is visible.\n     *\n     * @param uris URIs of selected resources.\n     * @returns `true` if the command is visible.\n     */\n    isVisible(uris: URI[]): boolean {\n        return !!uris.length && !this.workspaceUtils.containsRootDirectory(uris);\n    }\n\n    /**\n     * Determine if the command is enabled.\n     *\n     * @param uris URIs of selected resources.\n     * @returns `true` if the command is enabled.\n     */\n    isEnabled(uris: URI[]): boolean {\n        return !!uris.length && !this.workspaceUtils.containsRootDirectory(uris);\n    }\n\n    /**\n     * Execute the command.\n     *\n     * @param uris URIs of selected resources.\n     */\n    async execute(uris: URI[]): Promise<void> {\n        const distinctUris = URI.getDistinctParents(uris);\n        if (await this.confirm(distinctUris)) {\n            await Promise.all(distinctUris.map(uri => this.delete(uri)));\n        }\n    }\n\n    /**\n     * Display dialog to confirm deletion.\n     *\n     * @param uris URIs of selected resources.\n     */\n    protected confirm(uris: URI[]): Promise<boolean | undefined> {\n        return new ConfirmDialog({\n            title: `Delete File${uris.length === 1 ? '' : 's'}`,\n            msg: this.getConfirmMessage(uris)\n        }).open();\n    }\n\n    /**\n     * Get the dialog confirmation message for deletion.\n     *\n     * @param uris URIs of selected resources.\n     */\n    protected getConfirmMessage(uris: URI[]): string | HTMLElement {\n        const dirty = this.getDirty(uris);\n        if (dirty.length) {\n            if (dirty.length === 1) {\n                return `Do you really want to delete ${dirty[0].path.base} with unsaved changes?`;\n            }\n            return `Do you really want to delete ${dirty.length} files with unsaved changes?`;\n        }\n        if (uris.length === 1) {\n            return `Do you really want to delete ${uris[0].path.base}?`;\n        }\n        if (uris.length > 10) {\n            return `Do you really want to delete all the ${uris.length} selected files?`;\n        }\n        const messageContainer = document.createElement('div');\n        messageContainer.textContent = 'Do you really want to delete the following files?';\n        const list = document.createElement('ul');\n        list.style.listStyleType = 'none';\n        for (const uri of uris) {\n            const listItem = document.createElement('li');\n            listItem.textContent = uri.path.base;\n            list.appendChild(listItem);\n        }\n        messageContainer.appendChild(list);\n        return messageContainer;\n    }\n\n    /**\n     * Get which URI are presently dirty.\n     *\n     * @param uris URIs of selected resources.\n     * @returns An array of dirty URI.\n     */\n    protected getDirty(uris: URI[]): URI[] {\n        const dirty = new Map<string, URI>();\n        const widgets = NavigatableWidget.getAffected(SaveableWidget.getDirty(this.shell.widgets), uris);\n        for (const [resourceUri] of widgets) {\n            dirty.set(resourceUri.toString(), resourceUri);\n        }\n        return [...dirty.values()];\n    }\n\n    /**\n     * Perform deletion of a given URI.\n     *\n     * @param uris URIs of selected resources.\n     */\n    protected async delete(uri: URI): Promise<void> {\n        try {\n            this.closeWithoutSaving(uri);\n            await this.fileSystem.delete(uri.toString());\n        } catch (e) {\n            console.error(e);\n        }\n    }\n\n    /**\n     * Close widget without saving changes.\n     *\n     * @param uri URI of a selected resource.\n     */\n    protected async closeWithoutSaving(uri: URI): Promise<void> {\n        for (const [, widget] of NavigatableWidget.getAffected(this.shell.widgets, uri)) {\n            if (SaveableWidget.is(widget)) {\n                widget.closeWithoutSaving();\n            } else {\n                widget.close();\n            }\n        }\n    }\n\n}\n","/********************************************************************************\n * Copyright (C) 2018 Ericsson and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport URI from '@theia/core/lib/common/uri';\nimport { injectable, inject } from 'inversify';\nimport { WorkspaceUtils } from './workspace-utils';\nimport { WorkspaceService } from './workspace-service';\nimport { FileSystem } from '@theia/filesystem/lib/common/filesystem';\nimport { UriCommandHandler } from '@theia/core/lib/common/uri-command-handler';\nimport { FileSystemUtils } from '@theia/filesystem/lib/common/filesystem-utils';\n\n@injectable()\nexport class WorkspaceDuplicateHandler implements UriCommandHandler<URI[]> {\n\n    @inject(FileSystem)\n    protected readonly fileSystem: FileSystem;\n\n    @inject(WorkspaceUtils)\n    protected readonly workspaceUtils: WorkspaceUtils;\n\n    @inject(WorkspaceService)\n    protected readonly workspaceService: WorkspaceService;\n\n    /**\n     * Determine if the command is visible.\n     *\n     * @param uris URIs of selected resources.\n     * @returns `true` if the command is visible.\n     */\n    isVisible(uris: URI[]): boolean {\n        return !!uris.length && !this.workspaceUtils.containsRootDirectory(uris);\n    }\n\n    /**\n     * Determine if the command is enabled.\n     *\n     * @param uris URIs of selected resources.\n     * @returns `true` if the command is enabled.\n     */\n    isEnabled(uris: URI[]): boolean {\n        return !!uris.length && !this.workspaceUtils.containsRootDirectory(uris);\n    }\n\n    /**\n     * Execute the command.\n     *\n     * @param uris URIs of selected resources.\n     */\n    async execute(uris: URI[]): Promise<void> {\n        await Promise.all(uris.map(async uri => {\n            const parent = await this.fileSystem.getFileStat(uri.parent.toString());\n            if (parent) {\n                const parentUri = new URI(parent.uri);\n                const name = uri.path.name + '_copy';\n                const ext = uri.path.ext;\n                const target = FileSystemUtils.generateUniqueResourceURI(parentUri, parent, name, ext);\n                try {\n                    this.fileSystem.copy(uri.toString(), target.toString());\n                } catch (e) {\n                    console.error(e);\n                }\n            }\n        }));\n    }\n\n}\n","/********************************************************************************\n * Copyright (C) 2017 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { injectable, inject, postConstruct } from 'inversify';\nimport { CommandContribution, CommandRegistry, MenuContribution, MenuModelRegistry, SelectionService } from '@theia/core/lib/common';\nimport { isOSX, environment, OS } from '@theia/core';\nimport {\n    open, OpenerService, CommonMenus, StorageService, LabelProvider,\n    ConfirmDialog, KeybindingRegistry, KeybindingContribution, CommonCommands\n} from '@theia/core/lib/browser';\nimport { FileDialogService, OpenFileDialogProps, FileDialogTreeFilters } from '@theia/filesystem/lib/browser';\nimport { FileSystem } from '@theia/filesystem/lib/common';\nimport { ContextKeyService } from '@theia/core/lib/browser/context-key-service';\nimport { WorkspaceService } from './workspace-service';\nimport { THEIA_EXT, VSCODE_EXT } from '../common';\nimport { WorkspaceCommands } from './workspace-commands';\nimport { QuickOpenWorkspace } from './quick-open-workspace';\nimport { WorkspacePreferences } from './workspace-preferences';\nimport URI from '@theia/core/lib/common/uri';\nimport { UriAwareCommandHandler } from '@theia/core/lib/common/uri-command-handler';\n\n@injectable()\nexport class WorkspaceFrontendContribution implements CommandContribution, KeybindingContribution, MenuContribution {\n\n    @inject(FileSystem) protected readonly fileSystem: FileSystem;\n    @inject(OpenerService) protected readonly openerService: OpenerService;\n    @inject(WorkspaceService) protected readonly workspaceService: WorkspaceService;\n    @inject(StorageService) protected readonly workspaceStorage: StorageService;\n    @inject(LabelProvider) protected readonly labelProvider: LabelProvider;\n    @inject(QuickOpenWorkspace) protected readonly quickOpenWorkspace: QuickOpenWorkspace;\n    @inject(FileDialogService) protected readonly fileDialogService: FileDialogService;\n    @inject(WorkspacePreferences) protected preferences: WorkspacePreferences;\n    @inject(SelectionService) protected readonly selectionService: SelectionService;\n    @inject(CommandRegistry) protected readonly commandRegistry: CommandRegistry;\n\n    @inject(ContextKeyService)\n    protected readonly contextKeyService: ContextKeyService;\n\n    @postConstruct()\n    protected init(): void {\n        this.initWorkspaceContextKeys();\n    }\n\n    protected initWorkspaceContextKeys(): void {\n        const workspaceFolderCountKey = this.contextKeyService.createKey<number>('workspaceFolderCount', 0);\n        const updateWorkspaceFolderCountKey = () => workspaceFolderCountKey.set(this.workspaceService.tryGetRoots().length);\n        updateWorkspaceFolderCountKey();\n        this.updateStyles();\n        this.workspaceService.onWorkspaceChanged(() => {\n            updateWorkspaceFolderCountKey();\n            this.updateStyles();\n        });\n    }\n\n    protected updateStyles(): void {\n        document.body.classList.remove('theia-no-open-workspace');\n        if (!this.workspaceService.tryGetRoots().length) {\n            document.body.classList.add('theia-no-open-workspace');\n        }\n    }\n\n    registerCommands(commands: CommandRegistry): void {\n        // Not visible/enabled on Windows/Linux in electron.\n        commands.registerCommand(WorkspaceCommands.OPEN, {\n            isEnabled: () => isOSX || !this.isElectron(),\n            isVisible: () => isOSX || !this.isElectron(),\n            execute: () => this.doOpen()\n        });\n        // Visible/enabled only on Windows/Linux in electron.\n        commands.registerCommand(WorkspaceCommands.OPEN_FILE, {\n            isEnabled: () => true,\n            execute: () => this.doOpenFile()\n        });\n        // Visible/enabled only on Windows/Linux in electron.\n        commands.registerCommand(WorkspaceCommands.OPEN_FOLDER, {\n            isEnabled: () => true,\n            execute: () => this.doOpenFolder()\n        });\n        commands.registerCommand(WorkspaceCommands.OPEN_WORKSPACE, {\n            isEnabled: () => true,\n            execute: () => this.doOpenWorkspace()\n        });\n        commands.registerCommand(WorkspaceCommands.CLOSE, {\n            isEnabled: () => this.workspaceService.opened,\n            execute: () => this.closeWorkspace()\n        });\n        commands.registerCommand(WorkspaceCommands.OPEN_RECENT_WORKSPACE, {\n            execute: () => this.quickOpenWorkspace.select()\n        });\n        commands.registerCommand(WorkspaceCommands.SAVE_WORKSPACE_AS, {\n            isEnabled: () => this.workspaceService.isMultiRootWorkspaceEnabled,\n            execute: () => this.saveWorkspaceAs()\n        });\n        commands.registerCommand(WorkspaceCommands.SAVE_AS,\n            new UriAwareCommandHandler(this.selectionService, {\n                execute: (uri: URI) => this.saveAs(uri),\n            }));\n    }\n\n    registerMenus(menus: MenuModelRegistry): void {\n        if (isOSX || !this.isElectron()) {\n            menus.registerMenuAction(CommonMenus.FILE_OPEN, {\n                commandId: WorkspaceCommands.OPEN.id,\n                order: 'a00'\n            });\n        }\n        if (!isOSX && this.isElectron()) {\n            menus.registerMenuAction(CommonMenus.FILE_OPEN, {\n                commandId: WorkspaceCommands.OPEN_FILE.id,\n                label: `${WorkspaceCommands.OPEN_FILE.dialogLabel}...`,\n                order: 'a01'\n            });\n            menus.registerMenuAction(CommonMenus.FILE_OPEN, {\n                commandId: WorkspaceCommands.OPEN_FOLDER.id,\n                label: `${WorkspaceCommands.OPEN_FOLDER.dialogLabel}...`,\n                order: 'a02'\n            });\n        }\n        menus.registerMenuAction(CommonMenus.FILE_OPEN, {\n            commandId: WorkspaceCommands.OPEN_WORKSPACE.id,\n            order: 'a10'\n        });\n        menus.registerMenuAction(CommonMenus.FILE_OPEN, {\n            commandId: WorkspaceCommands.OPEN_RECENT_WORKSPACE.id,\n            order: 'a20'\n        });\n        menus.registerMenuAction(CommonMenus.FILE_OPEN, {\n            commandId: WorkspaceCommands.SAVE_WORKSPACE_AS.id,\n            order: 'a30'\n        });\n\n        menus.registerMenuAction(CommonMenus.FILE_CLOSE, {\n            commandId: WorkspaceCommands.CLOSE.id\n        });\n\n        menus.registerMenuAction(CommonMenus.FILE_SAVE, {\n            commandId: WorkspaceCommands.SAVE_AS.id,\n        });\n    }\n\n    registerKeybindings(keybindings: KeybindingRegistry): void {\n        keybindings.registerKeybinding({\n            command: WorkspaceCommands.NEW_FILE.id,\n            keybinding: this.isElectron() ? 'ctrlcmd+n' : 'alt+n',\n        });\n        keybindings.registerKeybinding({\n            command: isOSX || !this.isElectron() ? WorkspaceCommands.OPEN.id : WorkspaceCommands.OPEN_FILE.id,\n            keybinding: this.isElectron() ? 'ctrlcmd+o' : 'ctrlcmd+alt+o',\n        });\n        if (!isOSX && this.isElectron()) {\n            keybindings.registerKeybinding({\n                command: WorkspaceCommands.OPEN_FOLDER.id,\n                keybinding: 'ctrl+k ctrl+o',\n            });\n        }\n        keybindings.registerKeybinding({\n            command: WorkspaceCommands.OPEN_WORKSPACE.id,\n            keybinding: 'ctrlcmd+alt+w',\n        });\n        keybindings.registerKeybinding({\n            command: WorkspaceCommands.OPEN_RECENT_WORKSPACE.id,\n            keybinding: 'ctrlcmd+alt+r',\n        });\n        keybindings.registerKeybinding({\n            command: WorkspaceCommands.SAVE_AS.id,\n            keybinding: 'ctrlcmd+shift+s',\n        });\n    }\n\n    /**\n     * This is the generic `Open` method. Opens files and directories too. Resolves to the opened URI.\n     * Except when you are on either Windows or Linux `AND` running in electron. If so, it opens a file.\n     */\n    protected async doOpen(): Promise<URI | undefined> {\n        if (!isOSX && this.isElectron()) {\n            return this.doOpenFile();\n        }\n        const [rootStat] = await this.workspaceService.roots;\n        const destinationUri = await this.fileDialogService.showOpenDialog({\n            title: WorkspaceCommands.OPEN.dialogLabel,\n            canSelectFolders: true,\n            canSelectFiles: true\n        }, rootStat);\n        if (destinationUri && this.getCurrentWorkspaceUri().toString() !== destinationUri.toString()) {\n            const destination = await this.fileSystem.getFileStat(destinationUri.toString());\n            if (destination) {\n                if (destination.isDirectory) {\n                    this.workspaceService.open(destinationUri);\n                } else {\n                    await open(this.openerService, destinationUri);\n                }\n                return destinationUri;\n            }\n        }\n        return undefined;\n    }\n\n    /**\n     * Opens a file after prompting the `Open File` dialog. Resolves to `undefined`, if\n     *  - the workspace root is not set,\n     *  - the file to open does not exist, or\n     *  - it was not a file, but a directory.\n     *\n     * Otherwise, resolves to the URI of the file.\n     */\n    protected async doOpenFile(): Promise<URI | undefined> {\n        const props: OpenFileDialogProps = {\n            title: WorkspaceCommands.OPEN_FILE.dialogLabel,\n            canSelectFolders: false,\n            canSelectFiles: true\n        };\n        const [rootStat] = await this.workspaceService.roots;\n        const destinationFileUri = await this.fileDialogService.showOpenDialog(props, rootStat);\n        if (destinationFileUri) {\n            const destinationFile = await this.fileSystem.getFileStat(destinationFileUri.toString());\n            if (destinationFile && !destinationFile.isDirectory) {\n                await open(this.openerService, destinationFileUri);\n                return destinationFileUri;\n            }\n        }\n        return undefined;\n    }\n\n    /**\n     * Opens a folder after prompting the `Open Folder` dialog. Resolves to `undefined`, if\n     *  - the workspace root is not set,\n     *  - the folder to open does not exist, or\n     *  - it was not a directory, but a file resource.\n     *\n     * Otherwise, resolves to the URI of the folder.\n     */\n    protected async doOpenFolder(): Promise<URI | undefined> {\n        const props: OpenFileDialogProps = {\n            title: WorkspaceCommands.OPEN_FOLDER.dialogLabel,\n            canSelectFolders: true,\n            canSelectFiles: false\n        };\n        const [rootStat] = await this.workspaceService.roots;\n        const destinationFolderUri = await this.fileDialogService.showOpenDialog(props, rootStat);\n        if (destinationFolderUri &&\n            this.getCurrentWorkspaceUri().toString() !== destinationFolderUri.toString()) {\n            const destinationFolder = await this.fileSystem.getFileStat(destinationFolderUri.toString());\n            if (destinationFolder && destinationFolder.isDirectory) {\n                this.workspaceService.open(destinationFolderUri);\n                return destinationFolderUri;\n            }\n        }\n        return undefined;\n    }\n\n    /**\n     * Opens a workspace after raising the `Open Workspace` dialog. Resolves to the URI of the recently opened workspace,\n     * if it was successful. Otherwise, resolves to `undefined`.\n     *\n     * **Caveat**: this behaves differently on different platforms, the `workspace.supportMultiRootWorkspace` preference value **does** matter,\n     * and `electron`/`browser` version has impact too. See [here](https://github.com/eclipse-theia/theia/pull/3202#issuecomment-430884195) for more details.\n     *\n     * Legend:\n     *  - `workspace.supportMultiRootWorkspace` is `false`: => `N`\n     *  - `workspace.supportMultiRootWorkspace` is `true`: => `Y`\n     *  - Folders only: => `F`\n     *  - Workspace files only: => `W`\n     *  - Folders and workspace files: => `FW`\n     *\n     * -----\n     *\n     * |---------|-----------|-----------|------------|------------|\n     * |         | browser Y | browser N | electron Y | electron N |\n     * |---------|-----------|-----------|------------|------------|\n     * | Linux   |     FW    |     F     |     W      |     F      |\n     * | Windows |     FW    |     F     |     W      |     F      |\n     * | OS X    |     FW    |     F     |     FW     |     FW     |\n     * |---------|-----------|-----------|------------|------------|\n     *\n     */\n    protected async doOpenWorkspace(): Promise<URI | undefined> {\n        const props = await this.openWorkspaceOpenFileDialogProps();\n        const [rootStat] = await this.workspaceService.roots;\n        const workspaceFolderOrWorkspaceFileUri = await this.fileDialogService.showOpenDialog(props, rootStat);\n        if (workspaceFolderOrWorkspaceFileUri &&\n            this.getCurrentWorkspaceUri().toString() !== workspaceFolderOrWorkspaceFileUri.toString()) {\n            const destinationFolder = await this.fileSystem.getFileStat(workspaceFolderOrWorkspaceFileUri.toString());\n            if (destinationFolder) {\n                this.workspaceService.open(workspaceFolderOrWorkspaceFileUri);\n                return workspaceFolderOrWorkspaceFileUri;\n            }\n        }\n        return undefined;\n    }\n\n    protected async openWorkspaceOpenFileDialogProps(): Promise<OpenFileDialogProps> {\n        await this.preferences.ready;\n        const supportMultiRootWorkspace = this.preferences['workspace.supportMultiRootWorkspace'];\n        const type = OS.type();\n        const electron = this.isElectron();\n        return WorkspaceFrontendContribution.createOpenWorkspaceOpenFileDialogProps({\n            type,\n            electron,\n            supportMultiRootWorkspace\n        });\n    }\n\n    protected async closeWorkspace(): Promise<void> {\n        const dialog = new ConfirmDialog({\n            title: WorkspaceCommands.CLOSE.label!,\n            msg: 'Do you really want to close the workspace?'\n        });\n        if (await dialog.open()) {\n            await this.workspaceService.close();\n        }\n    }\n\n    protected async saveWorkspaceAs(): Promise<void> {\n        let exist: boolean = false;\n        let overwrite: boolean = false;\n        let selected: URI | undefined;\n        do {\n            selected = await this.fileDialogService.showSaveDialog({\n                title: WorkspaceCommands.SAVE_WORKSPACE_AS.label!,\n                filters: WorkspaceFrontendContribution.DEFAULT_FILE_FILTER\n            });\n            if (selected) {\n                const displayName = selected.displayName;\n                if (!displayName.endsWith(`.${THEIA_EXT}`) && !displayName.endsWith(`.${VSCODE_EXT}`)) {\n                    selected = selected.parent.resolve(`${displayName}.${THEIA_EXT}`);\n                }\n                exist = await this.fileSystem.exists(selected.toString());\n                if (exist) {\n                    overwrite = await this.confirmOverwrite(selected);\n                }\n            }\n        } while (selected && exist && !overwrite);\n\n        if (selected) {\n            this.workspaceService.save(selected);\n        }\n    }\n\n    /**\n     * Save source `URI` to target.\n     *\n     * @param uri the source `URI`.\n     */\n    protected async saveAs(uri: URI): Promise<void> {\n        let exist: boolean = false;\n        let overwrite: boolean = false;\n        let selected: URI | undefined;\n        const stat = await this.fileSystem.getFileStat(uri.toString());\n        do {\n            selected = await this.fileDialogService.showSaveDialog(\n                {\n                    title: WorkspaceCommands.SAVE_AS.label!,\n                    filters: {},\n                    inputValue: uri.path.base\n                }, stat);\n            if (selected) {\n                exist = await this.fileSystem.exists(selected.toString());\n                if (exist) {\n                    overwrite = await this.confirmOverwrite(selected);\n                }\n            }\n        } while (selected && exist && !overwrite);\n        if (selected) {\n            try {\n                await this.commandRegistry.executeCommand(CommonCommands.SAVE.id);\n                await this.fileSystem.copy(uri.toString(), selected.toString(), { overwrite });\n            } catch (e) {\n                console.warn(e);\n            }\n        }\n    }\n\n    private async confirmOverwrite(uri: URI): Promise<boolean> {\n        // Electron already handles the confirmation so do not prompt again.\n        if (this.isElectron()) {\n            return true;\n        }\n        // Prompt users for confirmation before overwriting.\n        const confirmed = await new ConfirmDialog({\n            title: 'Overwrite',\n            msg: `Do you really want to overwrite \"${uri.toString()}\"?`\n        }).open();\n        return !!confirmed;\n    }\n\n    private isElectron(): boolean {\n        return environment.electron.is();\n    }\n\n    /**\n     * Get the current workspace URI.\n     *\n     * @returns the current workspace URI.\n     */\n    private getCurrentWorkspaceUri(): URI {\n        return new URI(this.workspaceService.workspace && this.workspaceService.workspace.uri);\n    }\n\n}\n\nexport namespace WorkspaceFrontendContribution {\n\n    /**\n     * File filter for all Theia and VS Code workspace file types.\n     */\n    export const DEFAULT_FILE_FILTER: FileDialogTreeFilters = {\n        'Theia Workspace (*.theia-workspace)': [THEIA_EXT],\n        'VS Code Workspace (*.code-workspace)': [VSCODE_EXT]\n    };\n\n    /**\n     * Returns with an `OpenFileDialogProps` for opening the `Open Workspace` dialog.\n     */\n    export function createOpenWorkspaceOpenFileDialogProps(options: Readonly<{ type: OS.Type, electron: boolean, supportMultiRootWorkspace: boolean }>): OpenFileDialogProps {\n        const { electron, type, supportMultiRootWorkspace } = options;\n        const title = WorkspaceCommands.OPEN_WORKSPACE.dialogLabel;\n        // If browser\n        if (!electron) {\n            // and multi-root workspace is supported, it is always folder + workspace files.\n            if (supportMultiRootWorkspace) {\n                return {\n                    title,\n                    canSelectFiles: true,\n                    canSelectFolders: true,\n                    filters: DEFAULT_FILE_FILTER\n                };\n            } else {\n                // otherwise, it is always folders. No files at all.\n                return {\n                    title,\n                    canSelectFiles: false,\n                    canSelectFolders: true\n                };\n            }\n        }\n\n        // If electron\n        if (OS.Type.OSX === type) {\n            // `Finder` can select folders and files at the same time. We allow folders and workspace files.\n            return {\n                title,\n                canSelectFiles: true,\n                canSelectFolders: true,\n                filters: DEFAULT_FILE_FILTER\n            };\n        }\n\n        // In electron, only workspace files can be selected when the multi-root workspace feature is enabled.\n        if (supportMultiRootWorkspace) {\n            return {\n                title,\n                canSelectFiles: true,\n                canSelectFolders: false,\n                filters: DEFAULT_FILE_FILTER\n            };\n        }\n\n        // Otherwise, it is always a folder.\n        return {\n            title,\n            canSelectFiles: false,\n            canSelectFolders: true\n        };\n    }\n\n}\n","/********************************************************************************\n * Copyright (C) 2017 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { ContainerModule, interfaces } from 'inversify';\nimport { CommandContribution, MenuContribution } from '@theia/core/lib/common';\nimport { WebSocketConnectionProvider, FrontendApplicationContribution, KeybindingContribution } from '@theia/core/lib/browser';\nimport {\n    OpenFileDialogFactory,\n    SaveFileDialogFactory,\n    OpenFileDialogProps,\n    SaveFileDialogProps,\n    createOpenFileDialogContainer,\n    createSaveFileDialogContainer,\n    OpenFileDialog,\n    SaveFileDialog\n} from '@theia/filesystem/lib/browser';\nimport { StorageService } from '@theia/core/lib/browser/storage-service';\nimport { LabelProviderContribution } from '@theia/core/lib/browser/label-provider';\nimport { VariableContribution } from '@theia/variable-resolver/lib/browser';\nimport { WorkspaceServer, workspacePath } from '../common';\nimport { WorkspaceFrontendContribution } from './workspace-frontend-contribution';\nimport { WorkspaceService } from './workspace-service';\nimport { WorkspaceCommandContribution, FileMenuContribution, EditMenuContribution } from './workspace-commands';\nimport { WorkspaceVariableContribution } from './workspace-variable-contribution';\nimport { WorkspaceStorageService } from './workspace-storage-service';\nimport { WorkspaceUriLabelProviderContribution } from './workspace-uri-contribution';\nimport { bindWorkspacePreferences } from './workspace-preferences';\nimport { QuickOpenWorkspace } from './quick-open-workspace';\nimport { WorkspaceDeleteHandler } from './workspace-delete-handler';\nimport { WorkspaceDuplicateHandler } from './workspace-duplicate-handler';\nimport { WorkspaceUtils } from './workspace-utils';\nimport { WorkspaceCompareHandler } from './workspace-compare-handler';\nimport { DiffService } from './diff-service';\n\nexport default new ContainerModule((bind: interfaces.Bind, unbind: interfaces.Unbind, isBound: interfaces.IsBound, rebind: interfaces.Rebind) => {\n    bindWorkspacePreferences(bind);\n\n    bind(WorkspaceService).toSelf().inSingletonScope();\n    bind(FrontendApplicationContribution).toService(WorkspaceService);\n    bind(WorkspaceServer).toDynamicValue(ctx => {\n        const provider = ctx.container.get(WebSocketConnectionProvider);\n        return provider.createProxy<WorkspaceServer>(workspacePath);\n    }).inSingletonScope();\n\n    bind(WorkspaceFrontendContribution).toSelf().inSingletonScope();\n    for (const identifier of [CommandContribution, KeybindingContribution, MenuContribution]) {\n        bind(identifier).toService(WorkspaceFrontendContribution);\n    }\n\n    bind(OpenFileDialogFactory).toFactory(ctx =>\n        (props: OpenFileDialogProps) =>\n            createOpenFileDialogContainer(ctx.container, props).get(OpenFileDialog)\n    );\n\n    bind(SaveFileDialogFactory).toFactory(ctx =>\n        (props: SaveFileDialogProps) =>\n            createSaveFileDialogContainer(ctx.container, props).get(SaveFileDialog)\n    );\n\n    bind(WorkspaceCommandContribution).toSelf().inSingletonScope();\n    bind(CommandContribution).toService(WorkspaceCommandContribution);\n    bind(MenuContribution).to(FileMenuContribution).inSingletonScope();\n    bind(MenuContribution).to(EditMenuContribution).inSingletonScope();\n    bind(WorkspaceDeleteHandler).toSelf().inSingletonScope();\n    bind(WorkspaceDuplicateHandler).toSelf().inSingletonScope();\n    bind(WorkspaceCompareHandler).toSelf().inSingletonScope();\n    bind(DiffService).toSelf().inSingletonScope();\n\n    bind(WorkspaceStorageService).toSelf().inSingletonScope();\n    rebind(StorageService).toService(WorkspaceStorageService);\n\n    bind(LabelProviderContribution).to(WorkspaceUriLabelProviderContribution).inSingletonScope();\n    bind(WorkspaceVariableContribution).toSelf().inSingletonScope();\n    bind(VariableContribution).toService(WorkspaceVariableContribution);\n\n    bind(QuickOpenWorkspace).toSelf().inSingletonScope();\n\n    bind(WorkspaceUtils).toSelf().inSingletonScope();\n});\n","/********************************************************************************\n * Copyright (C) 2019 Ericsson and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { inject, injectable } from 'inversify';\nimport URI from '@theia/core/lib/common/uri';\nimport { SingleTextInputDialog, SingleTextInputDialogProps, LabelProvider } from '@theia/core/lib/browser';\n\n@injectable()\nexport class WorkspaceInputDialogProps extends SingleTextInputDialogProps {\n    /**\n     * The parent `URI` for the selection present in the explorer.\n     * Used to display the path in which the file/folder is created at.\n     */\n    parentUri: URI;\n}\n\nexport class WorkspaceInputDialog extends SingleTextInputDialog {\n\n    constructor(\n        @inject(WorkspaceInputDialogProps) protected readonly props: WorkspaceInputDialogProps,\n        @inject(LabelProvider) protected readonly labelProvider: LabelProvider,\n    ) {\n        super(props);\n        this.appendParentPath();\n    }\n\n    /**\n     * Append the human-readable parent `path` to the dialog.\n     * When possible, display the relative path, else display the full path (ex: workspace root).\n     */\n    protected appendParentPath(): void {\n        // Compute the label for the parent URI.\n        const label = this.labelProvider.getLongName(this.props.parentUri);\n        const element = document.createElement('div');\n        // Create the `folder` icon.\n        const icon = document.createElement('i');\n        icon.classList.add('fa', 'fa-folder');\n        icon.style.marginRight = '0.5em';\n        element.appendChild(icon);\n        element.appendChild(document.createTextNode(label));\n        // Add the path and icon div before the `inputField`.\n        this.contentNode.insertBefore(element, this.inputField);\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2018 Ericsson and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { interfaces } from 'inversify';\nimport {\n    createPreferenceProxy,\n    PreferenceProxy,\n    PreferenceService,\n    PreferenceSchema,\n    PreferenceContribution\n} from '@theia/core/lib/browser/preferences';\n\nexport const workspacePreferenceSchema: PreferenceSchema = {\n    type: 'object',\n    properties: {\n        'workspace.preserveWindow': {\n            description: 'Enable opening workspaces in current window.',\n            type: 'boolean',\n            default: false\n        },\n        'workspace.supportMultiRootWorkspace': {\n            description: 'Controls whether multi-root workspace support is enabled.',\n            type: 'boolean',\n            default: true\n        }\n    }\n};\n\nexport interface WorkspaceConfiguration {\n    'workspace.preserveWindow': boolean,\n    'workspace.supportMultiRootWorkspace': boolean\n}\n\nexport const WorkspacePreferences = Symbol('WorkspacePreferences');\nexport type WorkspacePreferences = PreferenceProxy<WorkspaceConfiguration>;\n\nexport function createWorkspacePreferences(preferences: PreferenceService): WorkspacePreferences {\n    return createPreferenceProxy(preferences, workspacePreferenceSchema);\n}\n\nexport function bindWorkspacePreferences(bind: interfaces.Bind): void {\n    bind(WorkspacePreferences).toDynamicValue(ctx => {\n        const preferences = ctx.container.get<PreferenceService>(PreferenceService);\n        return createWorkspacePreferences(preferences);\n    }).inSingletonScope();\n\n    bind(PreferenceContribution).toConstantValue({ schema: workspacePreferenceSchema });\n}\n","/********************************************************************************\n * Copyright (C) 2017 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { injectable, inject, postConstruct } from 'inversify';\nimport URI from '@theia/core/lib/common/uri';\nimport { FileSystem, FileStat } from '@theia/filesystem/lib/common';\nimport { FileSystemWatcher, FileChangeEvent } from '@theia/filesystem/lib/browser/filesystem-watcher';\nimport { WorkspaceServer, THEIA_EXT, VSCODE_EXT, getTemporaryWorkspaceFileUri } from '../common';\nimport { WindowService } from '@theia/core/lib/browser/window/window-service';\nimport {\n    FrontendApplicationContribution, PreferenceServiceImpl, PreferenceScope, PreferenceSchemaProvider\n} from '@theia/core/lib/browser';\nimport { Deferred } from '@theia/core/lib/common/promise-util';\nimport { ILogger, Disposable, DisposableCollection, Emitter, Event, MaybePromise } from '@theia/core';\nimport { WorkspacePreferences } from './workspace-preferences';\nimport * as jsoncparser from 'jsonc-parser';\nimport * as Ajv from 'ajv';\nimport { FrontendApplicationConfigProvider } from '@theia/core/lib/browser/frontend-application-config-provider';\n\n/**\n * The workspace service.\n */\n@injectable()\nexport class WorkspaceService implements FrontendApplicationContribution {\n\n    private _workspace: FileStat | undefined;\n\n    private _roots: FileStat[] = [];\n    private deferredRoots = new Deferred<FileStat[]>();\n\n    @inject(FileSystem)\n    protected readonly fileSystem: FileSystem;\n\n    @inject(FileSystemWatcher)\n    protected readonly watcher: FileSystemWatcher;\n\n    @inject(WorkspaceServer)\n    protected readonly server: WorkspaceServer;\n\n    @inject(WindowService)\n    protected readonly windowService: WindowService;\n\n    @inject(ILogger)\n    protected logger: ILogger;\n\n    @inject(WorkspacePreferences)\n    protected preferences: WorkspacePreferences;\n\n    @inject(PreferenceServiceImpl)\n    protected readonly preferenceImpl: PreferenceServiceImpl;\n\n    @inject(PreferenceSchemaProvider)\n    protected readonly schemaProvider: PreferenceSchemaProvider;\n\n    protected applicationName: string;\n\n    @postConstruct()\n    protected async init(): Promise<void> {\n        this.applicationName = FrontendApplicationConfigProvider.get().applicationName;\n        const wsUriString = await this.getDefaultWorkspaceUri();\n        const wsStat = await this.toFileStat(wsUriString);\n        await this.setWorkspace(wsStat);\n\n        this.watcher.onFilesChanged(event => {\n            if (this._workspace && FileChangeEvent.isAffected(event, new URI(this._workspace.uri))) {\n                this.updateWorkspace();\n            }\n        });\n        this.preferences.onPreferenceChanged(event => {\n            const multiRootPrefName = 'workspace.supportMultiRootWorkspace';\n            if (event.preferenceName === multiRootPrefName) {\n                this.updateWorkspace();\n            }\n        });\n    }\n\n    /**\n     * Resolves to the default workspace URI as string.\n     *\n     * The default implementation tries to extract the default workspace location\n     * from the `window.location.hash`, then falls-back to the most recently\n     * used workspace root from the server.\n     *\n     * It is not ensured that the resolved workspace URI is valid, it can point\n     * to a non-existing location.\n     */\n    protected getDefaultWorkspaceUri(): MaybePromise<string | undefined> {\n        // Prefer the workspace path specified as the URL fragment, if present.\n        if (window.location.hash.length > 1) {\n            // Remove the leading # and decode the URI.\n            const wpPath = decodeURI(window.location.hash.substring(1));\n            return new URI().withPath(wpPath).withScheme('file').toString();\n        } else {\n            // Else, ask the server for its suggested workspace (usually the one\n            // specified on the CLI, or the most recent).\n            return this.server.getMostRecentlyUsedWorkspace();\n        }\n    }\n\n    /**\n     * Get the path of the workspace to use initially.\n     * @deprecated use `WorkspaceService#getDefaultWorkspaceUri` instead.\n     */\n    protected getDefaultWorkspacePath(): MaybePromise<string | undefined> {\n        return this.getDefaultWorkspaceUri();\n    }\n\n    /**\n     * Set the URL fragment to the given workspace path.\n     */\n    protected setURLFragment(workspacePath: string): void {\n        window.location.hash = workspacePath;\n    }\n\n    get roots(): Promise<FileStat[]> {\n        return this.deferredRoots.promise;\n    }\n    tryGetRoots(): FileStat[] {\n        return this._roots;\n    }\n    get workspace(): FileStat | undefined {\n        return this._workspace;\n    }\n\n    protected readonly onWorkspaceChangeEmitter = new Emitter<FileStat[]>();\n    get onWorkspaceChanged(): Event<FileStat[]> {\n        return this.onWorkspaceChangeEmitter.event;\n    }\n\n    protected readonly onWorkspaceLocationChangedEmitter = new Emitter<FileStat | undefined>();\n    get onWorkspaceLocationChanged(): Event<FileStat | undefined> {\n        return this.onWorkspaceLocationChangedEmitter.event;\n    }\n\n    protected readonly toDisposeOnWorkspace = new DisposableCollection();\n    protected async setWorkspace(workspaceStat: FileStat | undefined): Promise<void> {\n        if (FileStat.equals(this._workspace, workspaceStat)) {\n            return;\n        }\n        this.toDisposeOnWorkspace.dispose();\n        this._workspace = workspaceStat;\n        if (this._workspace) {\n            const uri = new URI(this._workspace.uri);\n            this.toDisposeOnWorkspace.push(await this.watcher.watchFileChanges(uri));\n            this.setURLFragment(uri.path.toString());\n        } else {\n            this.setURLFragment('');\n        }\n        this.updateTitle();\n        await this.updateWorkspace();\n    }\n\n    protected async updateWorkspace(): Promise<void> {\n        if (this._workspace) {\n            this.toFileStat(this._workspace.uri).then(stat => this._workspace = stat);\n        }\n        await this.updateRoots();\n        this.watchRoots();\n    }\n\n    protected async updateRoots(): Promise<void> {\n        const newRoots = await this.computeRoots();\n        let rootsChanged = false;\n        if (newRoots.length !== this._roots.length || newRoots.length === 0) {\n            rootsChanged = true;\n        } else {\n            for (const newRoot of newRoots) {\n                if (!this._roots.some(r => r.uri === newRoot.uri)) {\n                    rootsChanged = true;\n                    break;\n                }\n            }\n        }\n        if (rootsChanged) {\n            this._roots = newRoots;\n            this.deferredRoots.resolve(this._roots); // in order to resolve first\n            this.deferredRoots = new Deferred<FileStat[]>();\n            this.deferredRoots.resolve(this._roots);\n            this.onWorkspaceChangeEmitter.fire(this._roots);\n        }\n    }\n\n    protected async computeRoots(): Promise<FileStat[]> {\n        const roots: FileStat[] = [];\n        if (this._workspace) {\n            if (this._workspace.isDirectory) {\n                return [this._workspace];\n            }\n\n            const workspaceData = await this.getWorkspaceDataFromFile();\n            if (workspaceData) {\n                for (const { path } of workspaceData.folders) {\n                    const valid = await this.toValidRoot(path);\n                    if (valid) {\n                        roots.push(valid);\n                    } else {\n                        roots.push({\n                            uri: path,\n                            lastModification: Date.now(),\n                            isDirectory: true\n                        });\n                    }\n                }\n            }\n        }\n        return roots;\n    }\n\n    protected async getWorkspaceDataFromFile(): Promise<WorkspaceData | undefined> {\n        if (this._workspace && await this.fileSystem.exists(this._workspace.uri)) {\n            if (this._workspace.isDirectory) {\n                return {\n                    folders: [{ path: this._workspace.uri }]\n                };\n            }\n            const { stat, content } = await this.fileSystem.resolveContent(this._workspace.uri);\n            const strippedContent = jsoncparser.stripComments(content);\n            const data = jsoncparser.parse(strippedContent);\n            if (data && WorkspaceData.is(data)) {\n                return WorkspaceData.transformToAbsolute(data, stat);\n            }\n            this.logger.error(`Unable to retrieve workspace data from the file: '${this._workspace.uri}'. Please check if the file is corrupted.`);\n        }\n    }\n\n    protected formatTitle(title?: string): string {\n        const name = this.applicationName;\n        return title ? `${title}  ${name}` : name;\n    }\n\n    protected updateTitle(): void {\n        let title: string | undefined;\n        if (this._workspace) {\n            const uri = new URI(this._workspace.uri);\n            const displayName = uri.displayName;\n            if (!this._workspace.isDirectory &&\n                (displayName.endsWith(`.${THEIA_EXT}`) || displayName.endsWith(`.${VSCODE_EXT}`))) {\n                title = displayName.slice(0, displayName.lastIndexOf('.'));\n            } else {\n                title = displayName;\n            }\n        }\n        document.title = this.formatTitle(title);\n    }\n\n    /**\n     * on unload, we set our workspace root as the last recently used on the backend.\n     */\n    onStop(): void {\n        this.server.setMostRecentlyUsedWorkspace(this._workspace ? this._workspace.uri : '');\n    }\n\n    async recentWorkspaces(): Promise<string[]> {\n        return this.server.getRecentWorkspaces();\n    }\n\n    /**\n     * Returns `true` if theia has an opened workspace or folder\n     * @returns {boolean}\n     */\n    get opened(): boolean {\n        return !!this._workspace;\n    }\n\n    /**\n     * Returns `true` if a multiple-root workspace is currently open.\n     * @returns {boolean}\n     */\n    get isMultiRootWorkspaceOpened(): boolean {\n        return !!this.workspace && !this.workspace.isDirectory;\n    }\n\n    /**\n     * Returns `true` if there is an opened workspace, and multi root workspace support is enabled.\n     * @returns {boolean}\n     */\n    get isMultiRootWorkspaceEnabled(): boolean {\n        return this.opened && this.preferences['workspace.supportMultiRootWorkspace'];\n    }\n\n    /**\n     * Opens directory, or recreates a workspace from the file that `uri` points to.\n     */\n    open(uri: URI, options?: WorkspaceInput): void {\n        this.doOpen(uri, options);\n    }\n\n    protected async doOpen(uri: URI, options?: WorkspaceInput): Promise<void> {\n        const rootUri = uri.toString();\n        const stat = await this.toFileStat(rootUri);\n        if (stat) {\n            // The same window has to be preserved too (instead of opening a new one), if the workspace root is not yet available and we are setting it for the first time.\n            // Option passed as parameter has the highest priority (for api developers), then the preference, then the default.\n            await this.roots;\n            const { preserveWindow } = {\n                preserveWindow: this.preferences['workspace.preserveWindow'] || !this.opened,\n                ...options\n            };\n            await this.server.setMostRecentlyUsedWorkspace(rootUri);\n            if (preserveWindow) {\n                this._workspace = stat;\n            }\n            this.openWindow(stat, { preserveWindow });\n            return;\n        }\n        throw new Error('Invalid workspace root URI. Expected an existing directory location.');\n    }\n\n    /**\n     * Adds a root folder to the workspace\n     * @param uri URI of the root folder being added\n     */\n    async addRoot(uri: URI): Promise<void> {\n        await this.spliceRoots(this._roots.length, 0, uri);\n    }\n\n    /**\n     * Removes root folder(s) from workspace.\n     */\n    async removeRoots(uris: URI[]): Promise<void> {\n        if (!this.opened) {\n            throw new Error('Folder cannot be removed as there is no active folder in the current workspace.');\n        }\n        if (this._workspace) {\n            const workspaceData = await this.getWorkspaceDataFromFile();\n            this._workspace = await this.writeWorkspaceFile(this._workspace,\n                WorkspaceData.buildWorkspaceData(\n                    this._roots.filter(root => uris.findIndex(u => u.toString() === root.uri) < 0),\n                    workspaceData!.settings\n                )\n            );\n        }\n    }\n\n    async spliceRoots(start: number, deleteCount?: number, ...rootsToAdd: URI[]): Promise<URI[]> {\n        if (!this._workspace) {\n            throw new Error('There is not active workspace');\n        }\n        const dedup = new Set<string>();\n        const roots = this._roots.map(root => (dedup.add(root.uri), root.uri));\n        const toAdd: string[] = [];\n        for (const root of rootsToAdd) {\n            const uri = root.toString();\n            if (!dedup.has(uri)) {\n                dedup.add(uri);\n                toAdd.push(uri);\n            }\n        }\n        const toRemove = roots.splice(start, deleteCount || 0, ...toAdd);\n        if (!toRemove.length && !toAdd.length) {\n            return [];\n        }\n        if (this._workspace.isDirectory) {\n            const untitledWorkspace = await this.getUntitledWorkspace();\n            if (untitledWorkspace) {\n                await this.save(untitledWorkspace);\n            }\n        }\n        const currentData = await this.getWorkspaceDataFromFile();\n        const newData = WorkspaceData.buildWorkspaceData(roots, currentData && currentData.settings);\n        await this.writeWorkspaceFile(this._workspace, newData);\n        return toRemove.map(root => new URI(root));\n    }\n\n    protected async getUntitledWorkspace(): Promise<URI | undefined> {\n        const home = await this.fileSystem.getCurrentUserHome();\n        return home && getTemporaryWorkspaceFileUri(new URI(home.uri));\n    }\n\n    private async writeWorkspaceFile(workspaceFile: FileStat | undefined, workspaceData: WorkspaceData): Promise<FileStat | undefined> {\n        if (workspaceFile) {\n            const data = JSON.stringify(WorkspaceData.transformToRelative(workspaceData, workspaceFile));\n            const edits = jsoncparser.format(data, undefined, { tabSize: 3, insertSpaces: true, eol: '' });\n            const result = jsoncparser.applyEdits(data, edits);\n            const stat = await this.fileSystem.setContent(workspaceFile, result);\n            return stat;\n        }\n    }\n\n    /**\n     * Clears current workspace root.\n     */\n    async close(): Promise<void> {\n        this._workspace = undefined;\n        this._roots.length = 0;\n\n        await this.server.setMostRecentlyUsedWorkspace('');\n        this.reloadWindow();\n    }\n\n    /**\n     * returns a FileStat if the argument URI points to an existing directory. Otherwise, `undefined`.\n     */\n    protected async toValidRoot(uri: URI | string | undefined): Promise<FileStat | undefined> {\n        const fileStat = await this.toFileStat(uri);\n        if (fileStat && fileStat.isDirectory) {\n            return fileStat;\n        }\n        return undefined;\n    }\n\n    /**\n     * returns a FileStat if the argument URI points to a file or directory. Otherwise, `undefined`.\n     */\n    protected async toFileStat(uri: URI | string | undefined): Promise<FileStat | undefined> {\n        if (!uri) {\n            return undefined;\n        }\n        let uriStr = uri.toString();\n        try {\n            if (uriStr.endsWith('/')) {\n                uriStr = uriStr.slice(0, -1);\n            }\n            const fileStat = await this.fileSystem.getFileStat(uriStr);\n            if (!fileStat) {\n                return undefined;\n            }\n            return fileStat;\n        } catch (error) {\n            return undefined;\n        }\n    }\n\n    protected openWindow(uri: FileStat, options?: WorkspaceInput): void {\n        const workspacePath = new URI(uri.uri).path.toString();\n\n        if (this.shouldPreserveWindow(options)) {\n            this.reloadWindow();\n        } else {\n            try {\n                this.openNewWindow(workspacePath);\n            } catch (error) {\n                // Fall back to reloading the current window in case the browser has blocked the new window\n                this._workspace = uri;\n                this.logger.error(error.toString()).then(() => this.reloadWindow());\n            }\n        }\n    }\n\n    protected reloadWindow(): void {\n        // Set the new workspace path as the URL fragment.\n        if (this._workspace !== undefined) {\n            this.setURLFragment(new URI(this._workspace.uri).path.toString());\n        } else {\n            this.setURLFragment('');\n        }\n\n        window.location.reload(true);\n    }\n\n    protected openNewWindow(workspacePath: string): void {\n        const url = new URL(window.location.href);\n        url.hash = workspacePath;\n        this.windowService.openNewWindow(url.toString());\n    }\n\n    protected shouldPreserveWindow(options?: WorkspaceInput): boolean {\n        return options !== undefined && !!options.preserveWindow;\n    }\n\n    /**\n     * Return true if one of the paths in paths array is present in the workspace\n     * NOTE: You should always explicitly use `/` as the separator between the path segments.\n     */\n    async containsSome(paths: string[]): Promise<boolean> {\n        await this.roots;\n        if (this.opened) {\n            for (const root of this._roots) {\n                const uri = new URI(root.uri);\n                for (const path of paths) {\n                    const fileUri = uri.resolve(path).toString();\n                    const exists = await this.fileSystem.exists(fileUri);\n                    if (exists) {\n                        return exists;\n                    }\n                }\n            }\n        }\n        return false;\n    }\n\n    get saved(): boolean {\n        return !!this._workspace && !this._workspace.isDirectory;\n    }\n\n    /**\n     * Save workspace data into a file\n     * @param uri URI or FileStat of the workspace file\n     */\n    async save(uri: URI | FileStat): Promise<void> {\n        const uriStr = uri instanceof URI ? uri.toString() : uri.uri;\n        if (!await this.fileSystem.exists(uriStr)) {\n            await this.fileSystem.createFile(uriStr);\n        }\n        const workspaceData: WorkspaceData = { folders: [], settings: {} };\n        if (!this.saved) {\n            for (const p of Object.keys(this.schemaProvider.getCombinedSchema().properties)) {\n                if (this.schemaProvider.isValidInScope(p, PreferenceScope.Folder)) {\n                    continue;\n                }\n                const preferences = this.preferenceImpl.inspect(p);\n                if (preferences && preferences.workspaceValue) {\n                    workspaceData.settings![p] = preferences.workspaceValue;\n                }\n            }\n        }\n        let stat = await this.toFileStat(uriStr);\n        Object.assign(workspaceData, await this.getWorkspaceDataFromFile());\n        stat = await this.writeWorkspaceFile(stat, WorkspaceData.buildWorkspaceData(this._roots, workspaceData ? workspaceData.settings : undefined));\n        await this.server.setMostRecentlyUsedWorkspace(uriStr);\n        await this.setWorkspace(stat);\n        this.onWorkspaceLocationChangedEmitter.fire(stat);\n    }\n\n    protected readonly rootWatchers = new Map<string, Disposable>();\n\n    protected async watchRoots(): Promise<void> {\n        const rootUris = new Set(this._roots.map(r => r.uri));\n        for (const [uri, watcher] of this.rootWatchers.entries()) {\n            if (!rootUris.has(uri)) {\n                watcher.dispose();\n            }\n        }\n        for (const root of this._roots) {\n            this.watchRoot(root);\n        }\n    }\n\n    protected async watchRoot(root: FileStat): Promise<void> {\n        const uriStr = root.uri;\n        if (this.rootWatchers.has(uriStr)) {\n            return;\n        }\n        const watcher = this.watcher.watchFileChanges(new URI(uriStr));\n        this.rootWatchers.set(uriStr, Disposable.create(() => {\n            watcher.then(disposable => disposable.dispose());\n            this.rootWatchers.delete(uriStr);\n        }));\n    }\n\n    /**\n     * Returns the workspace root uri that the given file belongs to.\n     * In case that the file is found in more than one workspace roots, returns the root that is closest to the file.\n     * If the file is not from the current workspace, returns `undefined`.\n     * @param uri URI of the file\n     */\n    getWorkspaceRootUri(uri: URI | undefined): URI | undefined {\n        if (!uri) {\n            const root = this.tryGetRoots()[0];\n            if (root) {\n                return new URI(root.uri);\n            }\n            return undefined;\n        }\n        const rootUris: URI[] = [];\n        for (const root of this.tryGetRoots()) {\n            const rootUri = new URI(root.uri);\n            if (rootUri && rootUri.isEqualOrParent(uri)) {\n                rootUris.push(rootUri);\n            }\n        }\n        return rootUris.sort((r1, r2) => r2.toString().length - r1.toString().length)[0];\n    }\n\n    areWorkspaceRoots(uris: URI[]): boolean {\n        if (!uris.length) {\n            return false;\n        }\n        const rootUris = new Set(this.tryGetRoots().map(root => root.uri));\n        return uris.every(uri => rootUris.has(uri.toString()));\n    }\n\n}\n\nexport interface WorkspaceInput {\n\n    /**\n     * Tests whether the same window should be used or a new one has to be opened after setting the workspace root. By default it is `false`.\n     */\n    preserveWindow?: boolean;\n\n}\n\nexport interface WorkspaceData {\n    folders: Array<{ path: string, name?: string }>;\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    settings?: { [id: string]: any };\n}\n\nexport namespace WorkspaceData {\n    const validateSchema = new Ajv().compile({\n        type: 'object',\n        properties: {\n            folders: {\n                description: 'Root folders in the workspace',\n                type: 'array',\n                items: {\n                    type: 'object',\n                    properties: {\n                        path: {\n                            type: 'string',\n                        }\n                    },\n                    required: ['path']\n                }\n            },\n            settings: {\n                description: 'Workspace preferences',\n                type: 'object'\n            }\n        },\n        required: ['folders']\n    });\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    export function is(data: any): data is WorkspaceData {\n        return !!validateSchema(data);\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    export function buildWorkspaceData(folders: string[] | FileStat[], settings: { [id: string]: any } | undefined): WorkspaceData {\n        let roots: string[] = [];\n        if (folders.length > 0) {\n            if (typeof folders[0] !== 'string') {\n                roots = (<FileStat[]>folders).map(folder => folder.uri);\n            } else {\n                roots = <string[]>folders;\n            }\n        }\n        const data: WorkspaceData = {\n            folders: roots.map(folder => ({ path: folder }))\n        };\n        if (settings) {\n            data.settings = settings;\n        }\n        return data;\n    }\n\n    export function transformToRelative(data: WorkspaceData, workspaceFile?: FileStat): WorkspaceData {\n        const folderUris: string[] = [];\n        const workspaceFileUri = new URI(workspaceFile ? workspaceFile.uri : '').withScheme('file');\n        for (const { path } of data.folders) {\n            const folderUri = new URI(path).withScheme('file');\n            const rel = workspaceFileUri.parent.relative(folderUri);\n            if (rel) {\n                folderUris.push(rel.toString());\n            } else {\n                folderUris.push(folderUri.toString());\n            }\n        }\n        return buildWorkspaceData(folderUris, data.settings);\n    }\n\n    export function transformToAbsolute(data: WorkspaceData, workspaceFile?: FileStat): WorkspaceData {\n        if (workspaceFile) {\n            const folders: string[] = [];\n            for (const folder of data.folders) {\n                const path = folder.path;\n                if (path.startsWith('file:///')) {\n                    folders.push(path);\n                } else {\n                    folders.push(new URI(workspaceFile.uri).withScheme('file').parent.resolve(path).toString());\n                }\n\n            }\n            return Object.assign(data, buildWorkspaceData(folders, data.settings));\n        }\n        return data;\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2017 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { inject, injectable, postConstruct } from 'inversify';\nimport { LocalStorageService } from '@theia/core/lib/browser/storage-service';\nimport { StorageService } from '@theia/core/lib/browser/storage-service';\nimport { WorkspaceService } from './workspace-service';\nimport { FileStat } from '@theia/filesystem/lib/common';\n\n/*\n * Prefixes any stored data with the current workspace path.\n */\n@injectable()\nexport class WorkspaceStorageService implements StorageService {\n\n    private prefix: string;\n    private initialized: Promise<void>;\n\n    @inject(LocalStorageService) protected storageService: StorageService;\n    @inject(WorkspaceService) protected workspaceService: WorkspaceService;\n\n    @postConstruct()\n    protected init(): void {\n        this.initialized = this.workspaceService.roots.then(() => {\n            this.updatePrefix();\n            this.workspaceService.onWorkspaceLocationChanged(() => this.updatePrefix());\n        });\n    }\n\n    async setData<T>(key: string, data: T): Promise<void> {\n        if (!this.prefix) {\n            await this.initialized;\n        }\n        const fullKey = this.prefixWorkspaceURI(key);\n        return this.storageService.setData(fullKey, data);\n    }\n\n    async getData<T>(key: string, defaultValue?: T): Promise<T | undefined> {\n        await this.initialized;\n        const fullKey = this.prefixWorkspaceURI(key);\n        return this.storageService.getData(fullKey, defaultValue);\n    }\n\n    protected prefixWorkspaceURI(originalKey: string): string {\n        return `${this.prefix}:${originalKey}`;\n    }\n\n    protected getPrefix(workspaceStat: FileStat | undefined): string {\n        return workspaceStat ? workspaceStat.uri : '_global_';\n    }\n\n    private updatePrefix(): void {\n        this.prefix = this.getPrefix(this.workspaceService.workspace);\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2017 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { DefaultUriLabelProviderContribution, URIIconReference } from '@theia/core/lib/browser/label-provider';\nimport URI from '@theia/core/lib/common/uri';\nimport { injectable, inject, postConstruct } from 'inversify';\nimport { FileStat } from '@theia/filesystem/lib/common';\nimport { WorkspaceVariableContribution } from './workspace-variable-contribution';\n\n@injectable()\nexport class WorkspaceUriLabelProviderContribution extends DefaultUriLabelProviderContribution {\n\n    @inject(WorkspaceVariableContribution)\n    protected readonly workspaceVariable: WorkspaceVariableContribution;\n\n    @postConstruct()\n    protected async init(): Promise<void> {\n        // no-op, backward compatibility\n    }\n\n    canHandle(element: object): number {\n        if ((element instanceof URI && element.scheme === 'file' || URIIconReference.is(element) || FileStat.is(element))) {\n            return 10;\n        }\n        return 0;\n    }\n\n    getIcon(element: URI | URIIconReference | FileStat): string {\n        return super.getIcon(this.asURIIconReference(element));\n    }\n\n    getName(element: URI | URIIconReference | FileStat): string | undefined {\n        return super.getName(this.asURIIconReference(element));\n    }\n\n    /**\n     * trims the workspace root from a file uri, if it is a child.\n     */\n    getLongName(element: URI | URIIconReference | FileStat): string | undefined {\n        const uri = this.getUri(element);\n        const relativePath = uri && this.workspaceVariable.getWorkspaceRelativePath(uri);\n        return relativePath || super.getLongName(this.asURIIconReference(element));\n    }\n\n    protected asURIIconReference(element: URI | URIIconReference | FileStat): URI | URIIconReference {\n        if (FileStat.is(element)) {\n            return URIIconReference.create(element.isDirectory ? 'folder' : 'file', new URI(element.uri));\n        }\n        return element;\n    }\n\n    protected getUri(element: URI | URIIconReference | FileStat): URI | undefined {\n        if (FileStat.is(element)) {\n            return new URI(element.uri);\n        }\n        return super.getUri(element);\n    }\n}\n","\n/********************************************************************************\n * Copyright (C) 2018 Ericsson and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport URI from '@theia/core/lib/common/uri';\nimport { inject, injectable } from 'inversify';\nimport { WorkspaceService } from './workspace-service';\n\n/**\n * Collection of workspace utility functions\n * @class\n */\n@injectable()\nexport class WorkspaceUtils {\n\n    @inject(WorkspaceService)\n    protected readonly workspaceService: WorkspaceService;\n\n    /**\n     * Determine if root directory exists\n     * for a given array of URIs\n     * @param uris\n     */\n    containsRootDirectory(uris: URI[]): boolean {\n        // obtain all roots URIs for a given workspace\n        const rootUris = this.workspaceService.tryGetRoots().map(root => new URI(root.uri));\n        // return true if at least a single URI is a root directory\n        return rootUris.some(rootUri => uris.some(uri => uri.isEqualOrParent(rootUri)));\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2018 Red Hat, Inc. and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport { injectable, inject, postConstruct } from 'inversify';\nimport URI from '@theia/core/lib/common/uri';\nimport { Path } from '@theia/core/lib/common/path';\nimport { FileSystem } from '@theia/filesystem/lib/common';\nimport { Disposable, DisposableCollection } from '@theia/core/lib/common/disposable';\nimport { ApplicationShell, NavigatableWidget } from '@theia/core/lib/browser';\nimport { VariableContribution, VariableRegistry, Variable } from '@theia/variable-resolver/lib/browser';\nimport { WorkspaceService } from './workspace-service';\n\n@injectable()\nexport class WorkspaceVariableContribution implements VariableContribution {\n\n    @inject(WorkspaceService)\n    protected readonly workspaceService: WorkspaceService;\n    @inject(ApplicationShell)\n    protected readonly shell: ApplicationShell;\n    @inject(FileSystem)\n    protected readonly fileSystem: FileSystem;\n\n    protected currentWidget: NavigatableWidget | undefined;\n\n    @postConstruct()\n    protected init(): void {\n        this.updateCurrentWidget();\n        this.shell.currentChanged.connect(() => this.updateCurrentWidget());\n    }\n    protected updateCurrentWidget(): void {\n        const { currentWidget } = this.shell;\n        if (NavigatableWidget.is(currentWidget)) {\n            this.setCurrentWidget(currentWidget);\n        }\n    }\n\n    protected readonly toDiposeOnUpdateCurrentWidget = new DisposableCollection();\n    protected setCurrentWidget(currentWidget: NavigatableWidget | undefined): void {\n        this.toDiposeOnUpdateCurrentWidget.dispose();\n        this.currentWidget = currentWidget;\n        if (currentWidget) {\n            const resetCurrentWidget = () => this.setCurrentWidget(undefined);\n            currentWidget.disposed.connect(resetCurrentWidget);\n            this.toDiposeOnUpdateCurrentWidget.push(Disposable.create(() =>\n                currentWidget.disposed.disconnect(resetCurrentWidget)\n            ));\n        }\n    }\n\n    registerVariables(variables: VariableRegistry): void {\n        this.registerWorkspaceRootVariables(variables);\n\n        variables.registerVariable({\n            name: 'file',\n            description: 'The path of the currently opened file',\n            resolve: () => {\n                const uri = this.getResourceUri();\n                return uri && this.fileSystem.getFsPath(uri.toString());\n            }\n        });\n        variables.registerVariable({\n            name: 'fileBasename',\n            description: 'The basename of the currently opened file',\n            resolve: () => {\n                const uri = this.getResourceUri();\n                return uri && uri.path.base;\n            }\n        });\n        variables.registerVariable({\n            name: 'fileBasenameNoExtension',\n            description: \"The currently opened file's name without extension\",\n            resolve: () => {\n                const uri = this.getResourceUri();\n                return uri && uri.path.name;\n            }\n        });\n        variables.registerVariable({\n            name: 'fileDirname',\n            description: \"The name of the currently opened file's directory\",\n            resolve: () => {\n                const uri = this.getResourceUri();\n                return uri && uri.path.dir.toString();\n            }\n        });\n        variables.registerVariable({\n            name: 'fileExtname',\n            description: 'The extension of the currently opened file',\n            resolve: () => {\n                const uri = this.getResourceUri();\n                return uri && uri.path.ext;\n            }\n        });\n    }\n\n    protected registerWorkspaceRootVariables(variables: VariableRegistry): void {\n        const scoped = (variable: Variable): Variable => ({\n            name: variable.name,\n            description: variable.description,\n            resolve: (context, workspaceRootName) => {\n                const workspaceRoot = workspaceRootName && this.workspaceService.tryGetRoots().find(r => new URI(r.uri).path.name === workspaceRootName);\n                return variable.resolve(workspaceRoot ? new URI(workspaceRoot.uri) : context);\n            }\n        });\n        variables.registerVariable(scoped({\n            name: 'workspaceRoot',\n            description: 'The path of the workspace root folder',\n            resolve: (context?: URI) => {\n                const uri = this.getWorkspaceRootUri(context);\n                return uri && this.fileSystem.getFsPath(uri.toString());\n            }\n        }));\n        variables.registerVariable(scoped({\n            name: 'workspaceFolder',\n            description: 'The path of the workspace root folder',\n            resolve: (context?: URI) => {\n                const uri = this.getWorkspaceRootUri(context);\n                return uri && this.fileSystem.getFsPath(uri.toString());\n            }\n        }));\n        variables.registerVariable(scoped({\n            name: 'workspaceRootFolderName',\n            description: 'The name of the workspace root folder',\n            resolve: (context?: URI) => {\n                const uri = this.getWorkspaceRootUri(context);\n                return uri && uri.displayName;\n            }\n        }));\n        variables.registerVariable(scoped({\n            name: 'workspaceFolderBasename',\n            description: 'The name of the workspace root folder',\n            resolve: (context?: URI) => {\n                const uri = this.getWorkspaceRootUri(context);\n                return uri && uri.displayName;\n            }\n        }));\n        variables.registerVariable(scoped({\n            name: 'cwd',\n            description: \"The task runner's current working directory on startup\",\n            resolve: (context?: URI) => {\n                const uri = this.getWorkspaceRootUri(context);\n                return (uri && this.fileSystem.getFsPath(uri.toString())) || '';\n            }\n        }));\n        variables.registerVariable(scoped({\n            name: 'relativeFile',\n            description: \"The currently opened file's path relative to the workspace root\",\n            resolve: (context?: URI) => {\n                const uri = this.getResourceUri();\n                return uri && this.getWorkspaceRelativePath(uri, context);\n            }\n        }));\n        variables.registerVariable(scoped({\n            name: 'relativeFileDirname',\n            description: \"The current opened file's dirname relative to ${workspaceFolder}\",\n            resolve: (context?: URI) => {\n                const uri = this.getResourceUri();\n                const relativePath = uri && this.getWorkspaceRelativePath(uri, context);\n                return relativePath && new Path(relativePath).dir.toString();\n            }\n        }));\n    }\n\n    getWorkspaceRootUri(uri: URI | undefined = this.getResourceUri()): URI | undefined {\n        return this.workspaceService.getWorkspaceRootUri(uri);\n    }\n\n    getResourceUri(): URI | undefined {\n        // TODO replace with ResourceContextKey.get?\n        return this.currentWidget && this.currentWidget.getResourceUri();\n    }\n\n    getWorkspaceRelativePath(uri: URI, context?: URI): string | undefined {\n        const workspaceRootUri = this.getWorkspaceRootUri(context || uri);\n        const path = workspaceRootUri && workspaceRootUri.path.relative(uri.path);\n        return path && path.toString();\n    }\n\n}\n","/********************************************************************************\n * Copyright (C) 2017 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nexport * from './workspace-protocol';\nexport * from './utils';\n","/********************************************************************************\n * Copyright (C) 2018 Ericsson and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nimport URI from '@theia/core/lib/common/uri';\n\nexport const THEIA_EXT = 'theia-workspace';\nexport const VSCODE_EXT = 'code-workspace';\n\nexport function getTemporaryWorkspaceFileUri(home: URI): URI {\n    return home.resolve('.theia').resolve(`Untitled.${THEIA_EXT}`).withScheme('file');\n}\n","/********************************************************************************\n * Copyright (C) 2017 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\nexport const workspacePath = '/services/workspace';\n\n/**\n * The JSON-RPC workspace interface.\n */\nexport const WorkspaceServer = Symbol('WorkspaceServer');\nexport interface WorkspaceServer {\n\n    /**\n     * Returns with a promise that resolves to the most recently used workspace folder URI as a string.\n     * Resolves to `undefined` if the workspace folder is not yet set.\n     */\n    getMostRecentlyUsedWorkspace(): Promise<string | undefined>;\n\n    /**\n     * Sets the desired string representation of the URI as the most recently used workspace folder.\n     */\n    setMostRecentlyUsedWorkspace(uri: string): Promise<void>;\n\n    /**\n     * Returns list of recently opened workspaces as an array.\n     */\n    getRecentWorkspaces(): Promise<string[]>\n}\n","/* --------------------------------------------------------------------------------------------\n * Copyright (c) 2018 TypeFox GmbH (http://www.typefox.io). All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\n'use strict';\n\nimport {\n    Message, MessageType as RPCMessageType,\n    RequestType, RequestType0, RequestHandler, RequestHandler0, GenericRequestHandler,\n    NotificationType, NotificationType0,\n    NotificationHandler, NotificationHandler0, GenericNotificationHandler,\n    Trace, Tracer, CancellationToken, MessageConnection\n} from 'vscode-jsonrpc';\n\nimport {\n    InitializeRequest, InitializeParams, InitializeResult,\n    ShutdownRequest, ExitNotification,\n    LogMessageNotification, LogMessageParams,\n    ShowMessageNotification, ShowMessageParams,\n    TelemetryEventNotification,\n    DidChangeConfigurationNotification, DidChangeConfigurationParams,\n    DidOpenTextDocumentNotification, DidOpenTextDocumentParams,\n    DidChangeTextDocumentNotification, DidChangeTextDocumentParams,\n    DidCloseTextDocumentNotification, DidCloseTextDocumentParams,\n    DidSaveTextDocumentNotification, DidSaveTextDocumentParams,\n    DidChangeWatchedFilesNotification, DidChangeWatchedFilesParams,\n    PublishDiagnosticsNotification, PublishDiagnosticsParams,\n} from 'vscode-languageserver-protocol/lib/main';\n\nimport * as Is from 'vscode-languageserver-protocol/lib/utils/is';\n\nimport { OutputChannel } from \"./services\";\n\nexport interface IConnection {\n\n    listen(): void;\n\n    sendRequest<R, E, RO>(type: RequestType0<R, E, RO>, token?: CancellationToken): Thenable<R>;\n    sendRequest<P, R, E, RO>(type: RequestType<P, R, E, RO>, params: P, token?: CancellationToken): Thenable<R>;\n    sendRequest<R>(method: string, token?: CancellationToken): Thenable<R>;\n    sendRequest<R>(method: string, param: any, token?: CancellationToken): Thenable<R>;\n    sendRequest<R>(type: string | RPCMessageType, ...params: any[]): Thenable<R>;\n\n    onRequest<R, E, RO>(type: RequestType0<R, E, RO>, handler: RequestHandler0<R, E>): void;\n    onRequest<P, R, E, RO>(type: RequestType<P, R, E, RO>, handler: RequestHandler<P, R, E>): void;\n    onRequest<R, E>(method: string, handler: GenericRequestHandler<R, E>): void;\n    onRequest<R, E>(method: string | RPCMessageType, handler: GenericRequestHandler<R, E>): void;\n\n    sendNotification<RO>(type: NotificationType0<RO>): void;\n    sendNotification<P, RO>(type: NotificationType<P, RO>, params?: P): void;\n    sendNotification(method: string): void;\n    sendNotification(method: string, params: any): void;\n    sendNotification(method: string | RPCMessageType, params?: any): void;\n\n    onNotification<RO>(type: NotificationType0<RO>, handler: NotificationHandler0): void;\n    onNotification<P, RO>(type: NotificationType<P, RO>, handler: NotificationHandler<P>): void;\n    onNotification(method: string, handler: GenericNotificationHandler): void;\n    onNotification(method: string | RPCMessageType, handler: GenericNotificationHandler): void;\n\n    trace(value: Trace, tracer: Tracer, sendNotification?: boolean): void;\n\n    initialize(params: InitializeParams): Thenable<InitializeResult>;\n    shutdown(): Thenable<void>;\n    exit(): void;\n\n    onLogMessage(handle: NotificationHandler<LogMessageParams>): void;\n    onShowMessage(handler: NotificationHandler<ShowMessageParams>): void;\n    onTelemetry(handler: NotificationHandler<any>): void;\n\n    didChangeConfiguration(params: DidChangeConfigurationParams): void;\n    didChangeWatchedFiles(params: DidChangeWatchedFilesParams): void;\n\n    didOpenTextDocument(params: DidOpenTextDocumentParams): void;\n    didChangeTextDocument(params: DidChangeTextDocumentParams): void;\n    didCloseTextDocument(params: DidCloseTextDocumentParams): void;\n    didSaveTextDocument(params: DidSaveTextDocumentParams): void;\n    onDiagnostics(handler: NotificationHandler<PublishDiagnosticsParams>): void;\n\n    dispose(): void;\n}\n\nexport interface ConnectionErrorHandler {\n    (error: Error, message: Message | undefined, count: number | undefined): void;\n}\nexport interface ConnectionCloseHandler {\n    (): void;\n}\nexport interface IConnectionProvider {\n    get(errorHandler: ConnectionErrorHandler, closeHandler: ConnectionCloseHandler, outputChannel: OutputChannel | undefined): Thenable<IConnection>;\n}\nexport function createConnection(connection: MessageConnection, errorHandler: ConnectionErrorHandler, closeHandler: ConnectionCloseHandler): IConnection {\n    connection.onError((data) => { errorHandler(data[0], data[1], data[2]) });\n    connection.onClose(closeHandler);\n    return {\n\n        listen: (): void => connection.listen(),\n\n        sendRequest: <R>(type: string | RPCMessageType, ...params: any[]): Thenable<R> => connection.sendRequest(Is.string(type) ? type : type.method, ...params),\n        onRequest: <R, E>(type: string | RPCMessageType, handler: GenericRequestHandler<R, E>): void => connection.onRequest(Is.string(type) ? type : type.method, handler),\n\n        sendNotification: (type: string | RPCMessageType, params?: any): void => connection.sendNotification(Is.string(type) ? type : type.method, params),\n        onNotification: (type: string | RPCMessageType, handler: GenericNotificationHandler): void => connection.onNotification(Is.string(type) ? type : type.method, handler),\n\n        trace: (value: Trace, tracer: Tracer, sendNotification: boolean = false): void => connection.trace(value, tracer, sendNotification),\n\n        initialize: (params: InitializeParams) => connection.sendRequest(InitializeRequest.type, params),\n        shutdown: () => connection.sendRequest(ShutdownRequest.type, undefined),\n        exit: () => connection.sendNotification(ExitNotification.type),\n\n        onLogMessage: (handler: NotificationHandler<LogMessageParams>) => connection.onNotification(LogMessageNotification.type, handler),\n        onShowMessage: (handler: NotificationHandler<ShowMessageParams>) => connection.onNotification(ShowMessageNotification.type, handler),\n        onTelemetry: (handler: NotificationHandler<any>) => connection.onNotification(TelemetryEventNotification.type, handler),\n\n        didChangeConfiguration: (params: DidChangeConfigurationParams) => connection.sendNotification(DidChangeConfigurationNotification.type, params),\n        didChangeWatchedFiles: (params: DidChangeWatchedFilesParams) => connection.sendNotification(DidChangeWatchedFilesNotification.type, params),\n\n        didOpenTextDocument: (params: DidOpenTextDocumentParams) => connection.sendNotification(DidOpenTextDocumentNotification.type, params),\n        didChangeTextDocument: (params: DidChangeTextDocumentParams) => connection.sendNotification(DidChangeTextDocumentNotification.type, params),\n        didCloseTextDocument: (params: DidCloseTextDocumentParams) => connection.sendNotification(DidCloseTextDocumentNotification.type, params),\n        didSaveTextDocument: (params: DidSaveTextDocumentParams) => connection.sendNotification(DidSaveTextDocumentNotification.type, params),\n\n        onDiagnostics: (handler: NotificationHandler<PublishDiagnosticsParams>) => connection.onNotification(PublishDiagnosticsNotification.type, handler),\n\n        dispose: () => connection.dispose()\n    };\n}","/* --------------------------------------------------------------------------------------------\n * Copyright (c) 2018 TypeFox GmbH (http://www.typefox.io). All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nimport { MessageActionItem, MessageType, Window, OutputChannel } from './services';\n\nexport class ConsoleWindow implements Window {\n    protected readonly channels = new Map<string, OutputChannel>();\n    showMessage<T extends MessageActionItem>(type: MessageType, message: string, ...actions: T[]): Thenable<T | undefined> {\n        if (type === MessageType.Error) {\n            console.error(message);\n        }\n        if (type === MessageType.Warning) {\n            console.warn(message);\n        }\n        if (type === MessageType.Info) {\n            console.info(message);\n        }\n        if (type === MessageType.Log) {\n            console.log(message);\n        }\n        return Promise.resolve(undefined);\n    }\n    createOutputChannel(name: string): OutputChannel {\n        const existing = this.channels.get(name);\n        if (existing) {\n            return existing;\n        }\n        const channel: OutputChannel = {\n            append(value: string): void {\n                console.log(name + ': ' + value);\n            },\n            appendLine(line: string): void {\n                console.log(name + ': ' + line);\n            },\n            show(): void {\n                // no-op\n            },\n            dispose(): void {\n                // no-op\n            }\n        }\n        this.channels.set(name, channel)\n        return channel;\n    }\n}","/* --------------------------------------------------------------------------------------------\n * Copyright (c) 2018 TypeFox GmbH (http://www.typefox.io). All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nimport { Disposable } from './services';\n\nexport {\n    Disposable\n}\n\nexport class DisposableCollection implements Disposable {\n    protected readonly disposables: Disposable[] = [];\n\n    dispose(): void {\n        while (this.disposables.length !== 0) {\n            this.disposables.pop()!.dispose();\n        }\n    }\n\n    push(disposable: Disposable): Disposable {\n        const disposables = this.disposables;\n        disposables.push(disposable);\n        return {\n            dispose(): void {\n                const index = disposables.indexOf(disposable);\n                if (index !== -1) {\n                    disposables.splice(index, 1);\n                }\n            }\n        }\n    }\n\n}","/* --------------------------------------------------------------------------------------------\n * Copyright (c) 2018 TypeFox GmbH (http://www.typefox.io). All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nexport * from './disposable';\nexport * from './services';\nexport * from './connection';\nexport * from './monaco-language-client';\nexport * from './monaco-commands';\nexport * from './console-window';\nexport * from './monaco-languages';\nexport * from './monaco-workspace';\nexport * from './monaco-services';\nexport * from './monaco-converter';\n","/* --------------------------------------------------------------------------------------------\n * Copyright (c) 2018 TypeFox GmbH (http://www.typefox.io). All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nimport { Commands, Disposable } from './services';\n\nexport class MonacoCommands implements Commands {\n\n    public constructor(protected readonly editor: monaco.editor.IStandaloneCodeEditor) { }\n\n    public registerCommand(command: string, callback: (...args: any[]) => any, thisArg?: any): Disposable {\n        return this.editor._commandService.addCommand({\n            id: command,\n            handler: (_accessor: any, ...args: any[]) => callback(...args)\n        });\n    }\n}\n","/* --------------------------------------------------------------------------------------------\n * Copyright (c) 2018 TypeFox GmbH (http://www.typefox.io). All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nimport * as ls from 'vscode-languageserver-protocol';\nimport * as Is from 'vscode-languageserver-protocol/lib/utils/is';\nimport {\n    CodeActionParams, CodeLensParams,\n    DocumentFormattingParams, DocumentOnTypeFormattingParams,\n    DocumentRangeFormattingParams, ReferenceParams,\n    RenameParams, TextDocumentPositionParams,\n    Position, TextDocumentIdentifier, CompletionItem, CompletionList,\n    CompletionParams, CompletionContext, CompletionTriggerKind,\n    InsertTextFormat, Range, Diagnostic, CompletionItemKind,\n    Hover, SignatureHelp, SignatureInformation, ParameterInformation,\n    Definition, Location, DocumentHighlight, DocumentHighlightKind,\n    SymbolInformation, DocumentSymbolParams, CodeActionContext, DiagnosticSeverity,\n    Command, CodeLens, FormattingOptions, TextEdit, WorkspaceEdit, DocumentLinkParams, DocumentLink,\n    MarkedString, MarkupContent, ColorInformation, ColorPresentation, FoldingRange, FoldingRangeKind,\n    DiagnosticRelatedInformation, MarkupKind, SymbolKind, DocumentSymbol, CodeAction\n} from './services';\nimport IReadOnlyModel = monaco.editor.IReadOnlyModel;\n\nexport type RecursivePartial<T> = {\n    [P in keyof T]?: RecursivePartial<T[P]>;\n};\n\nexport interface ProtocolDocumentLink extends monaco.languages.ILink {\n    data?: any;\n}\nexport namespace ProtocolDocumentLink {\n    export function is(item: any): item is ProtocolDocumentLink {\n        return !!item && 'data' in item;\n    }\n}\n\nexport interface ProtocolCodeLens extends monaco.languages.ICodeLensSymbol {\n    data?: any;\n}\nexport namespace ProtocolCodeLens {\n    export function is(item: any): item is ProtocolCodeLens {\n        return !!item && 'data' in item;\n    }\n}\n\nexport interface ProtocolCompletionItem extends monaco.languages.CompletionItem {\n    data?: any;\n    fromEdit?: boolean;\n    documentationFormat?: string;\n    originalItemKind?: CompletionItemKind;\n    deprecated?: boolean;\n}\nexport namespace ProtocolCompletionItem {\n    export function is(item: any): item is ProtocolCompletionItem {\n        return !!item && 'data' in item;\n    }\n}\n\nexport class MonacoToProtocolConverter {\n    asPosition(lineNumber: undefined | null, column: undefined | null): {};\n    asPosition(lineNumber: number, column: undefined | null): Pick<Position, 'line'>;\n    asPosition(lineNumber: undefined | null, column: number): Pick<Position, 'character'>;\n    asPosition(lineNumber: number, column: number): Position;\n    asPosition(lineNumber: number | undefined | null, column: number | undefined | null): Partial<Position>;\n    asPosition(lineNumber: number | undefined | null, column: number | undefined | null): Partial<Position> {\n        const line = lineNumber === undefined || lineNumber === null ? undefined : lineNumber - 1;\n        const character = column === undefined || column === null ? undefined : column - 1;\n        return {\n            line, character\n        };\n    }\n\n    asRange(range: null): null;\n    asRange(range: undefined): undefined;\n    asRange(range: monaco.IRange): Range;\n    asRange(range: monaco.IRange | undefined): Range | undefined;\n    asRange(range: monaco.IRange | null): Range | null;\n    asRange(range: Partial<monaco.IRange>): RecursivePartial<Range>;\n    asRange(range: Partial<monaco.IRange> | undefined): RecursivePartial<Range> | undefined;\n    asRange(range: Partial<monaco.IRange> | null): RecursivePartial<Range> | null;\n    asRange(range: Partial<monaco.IRange> | undefined | null): RecursivePartial<Range> | undefined | null {\n        if (range === undefined) {\n            return undefined;\n        }\n        if (range === null) {\n            return null;\n        }\n        const start = this.asPosition(range.startLineNumber, range.startColumn);\n        const end = this.asPosition(range.endLineNumber, range.endColumn);\n        return {\n            start, end\n        };\n    }\n\n    asTextDocumentIdentifier(model: IReadOnlyModel): TextDocumentIdentifier {\n        return {\n            uri: model.uri.toString()\n        }\n    }\n\n    asTextDocumentPositionParams(model: IReadOnlyModel, position: monaco.Position): TextDocumentPositionParams {\n        return {\n            textDocument: this.asTextDocumentIdentifier(model),\n            position: this.asPosition(position.lineNumber, position.column)\n        };\n    }\n\n    asCompletionParams(model: IReadOnlyModel, position: monaco.Position, context: monaco.languages.CompletionContext): CompletionParams {\n        return Object.assign(this.asTextDocumentPositionParams(model, position), {\n            context: this.asCompletionContext(context)\n        });\n    }\n\n    asCompletionContext(context: monaco.languages.CompletionContext): CompletionContext {\n        return {\n            triggerKind: this.asTriggerKind(context.triggerKind),\n            triggerCharacter: context.triggerCharacter\n        }\n    }\n\n    asTriggerKind(triggerKind: monaco.languages.CompletionTriggerKind): CompletionTriggerKind {\n        switch (triggerKind) {\n            case monaco.languages.CompletionTriggerKind.TriggerCharacter:\n                return CompletionTriggerKind.TriggerCharacter;\n            case monaco.languages.CompletionTriggerKind.TriggerForIncompleteCompletions:\n                return CompletionTriggerKind.TriggerForIncompleteCompletions;\n            default:\n                return CompletionTriggerKind.Invoked;\n        }\n    }\n\n    asCompletionItem(item: monaco.languages.CompletionItem): CompletionItem {\n        const result: CompletionItem = { label: item.label };\n        const protocolItem = ProtocolCompletionItem.is(item) ? item : undefined;\n        if (item.detail) { result.detail = item.detail; }\n        // We only send items back we created. So this can't be something else than\n        // a string right now.\n        if (item.documentation) {\n            if (!protocolItem || !protocolItem.documentationFormat) {\n                result.documentation = item.documentation as string;\n            } else {\n                result.documentation = this.asDocumentation(protocolItem.documentationFormat, item.documentation);\n            }\n        }\n        if (item.filterText) { result.filterText = item.filterText; }\n        this.fillPrimaryInsertText(result, item as ProtocolCompletionItem);\n        if (Is.number(item.kind)) {\n            result.kind = this.asCompletionItemKind(item.kind, protocolItem && protocolItem.originalItemKind);\n        }\n        if (item.sortText) { result.sortText = item.sortText; }\n        if (item.additionalTextEdits) { result.additionalTextEdits = this.asTextEdits(item.additionalTextEdits); }\n        if (item.command) { result.command = this.asCommand(item.command); }\n        if (item.commitCharacters) { result.commitCharacters = item.commitCharacters.slice(); }\n        if (item.command) { result.command = this.asCommand(item.command); }\n        // TODO if (item.preselect === true || item.preselect === false) { result.preselect = item.preselect; }\n        if (protocolItem) {\n            if (protocolItem.data !== undefined) {\n                result.data = protocolItem.data;\n            }\n            if (protocolItem.deprecated === true || protocolItem.deprecated === false) {\n                result.deprecated = protocolItem.deprecated;\n            }\n        }\n        return result;\n    }\n\n    protected asCompletionItemKind(value: monaco.languages.CompletionItemKind, original: CompletionItemKind | undefined): CompletionItemKind {\n        if (original !== undefined) {\n            return original;\n        }\n        switch (value) {\n            case monaco.languages.CompletionItemKind.Method: return CompletionItemKind.Method;\n            case monaco.languages.CompletionItemKind.Function: return CompletionItemKind.Function;\n            case monaco.languages.CompletionItemKind.Constructor: return CompletionItemKind.Constructor;\n            case monaco.languages.CompletionItemKind.Field: return CompletionItemKind.Field;\n            case monaco.languages.CompletionItemKind.Variable: return CompletionItemKind.Variable;\n            case monaco.languages.CompletionItemKind.Class: return CompletionItemKind.Class;\n            case monaco.languages.CompletionItemKind.Struct: return CompletionItemKind.Struct;\n            case monaco.languages.CompletionItemKind.Interface: return CompletionItemKind.Interface;\n            case monaco.languages.CompletionItemKind.Module: return CompletionItemKind.Module;\n            case monaco.languages.CompletionItemKind.Property: return CompletionItemKind.Property;\n            case monaco.languages.CompletionItemKind.Event: return CompletionItemKind.Event;\n            case monaco.languages.CompletionItemKind.Operator: return CompletionItemKind.Operator;\n            case monaco.languages.CompletionItemKind.Unit: return CompletionItemKind.Unit;\n            case monaco.languages.CompletionItemKind.Value: return CompletionItemKind.Value;\n            case monaco.languages.CompletionItemKind.Constant: return CompletionItemKind.Constant;\n            case monaco.languages.CompletionItemKind.Enum: return CompletionItemKind.Enum;\n            case monaco.languages.CompletionItemKind.EnumMember: return CompletionItemKind.EnumMember;\n            case monaco.languages.CompletionItemKind.Keyword: return CompletionItemKind.Keyword;\n            case monaco.languages.CompletionItemKind.Text: return CompletionItemKind.Text;\n            case monaco.languages.CompletionItemKind.Color: return CompletionItemKind.Color;\n            case monaco.languages.CompletionItemKind.File: return CompletionItemKind.File;\n            case monaco.languages.CompletionItemKind.Reference: return CompletionItemKind.Reference;\n            case monaco.languages.CompletionItemKind.Customcolor: return CompletionItemKind.Color;\n            case monaco.languages.CompletionItemKind.Folder: return CompletionItemKind.Folder;\n            case monaco.languages.CompletionItemKind.TypeParameter: return CompletionItemKind.TypeParameter;\n            case monaco.languages.CompletionItemKind.Snippet: return CompletionItemKind.Snippet;\n            default: return value + 1 as CompletionItemKind;\n        }\n    }\n\n    protected asDocumentation(format: string, documentation: string | monaco.IMarkdownString): string | MarkupContent {\n        switch (format) {\n            case MarkupKind.PlainText:\n                return { kind: format, value: documentation as string };\n            case MarkupKind.Markdown:\n                return { kind: format, value: (documentation as monaco.IMarkdownString).value };\n            default:\n                return `Unsupported Markup content received. Kind is: ${format}`;\n        }\n    }\n\n    protected fillPrimaryInsertText(target: CompletionItem, source: ProtocolCompletionItem): void {\n        let format: InsertTextFormat = InsertTextFormat.PlainText;\n        let text: string | undefined;\n        let range: Range | undefined;\n        if (source.insertTextRules !== undefined && (source.insertTextRules & monaco.languages.CompletionItemInsertTextRule.InsertAsSnippet) === 0) {\n            format = InsertTextFormat.Snippet;\n            text = source.insertText;\n        }\n        target.insertTextFormat = format;\n\n        text = source.insertText;\n        if (source.range) {\n            range = this.asRange(source.range);\n        }\n\n        target.insertTextFormat = format;\n        if (source.fromEdit && text && range) {\n            target.textEdit = { newText: text, range: range };\n        } else {\n            target.insertText = text;\n        }\n    }\n\n    asTextEdit(edit: monaco.editor.ISingleEditOperation): TextEdit {\n        const range = this.asRange(edit.range)!;\n        return {\n            range,\n            newText: edit.text || ''\n        }\n    }\n\n    asTextEdits(items: monaco.editor.ISingleEditOperation[]): TextEdit[];\n    asTextEdits(items: undefined | null): undefined;\n    asTextEdits(items: monaco.editor.ISingleEditOperation[] | undefined | null): TextEdit[] | undefined;\n    asTextEdits(items: monaco.editor.ISingleEditOperation[] | undefined | null): TextEdit[] | undefined {\n        if (!items) {\n            return undefined;\n        }\n        return items.map(item => this.asTextEdit(item));\n    }\n\n    asReferenceParams(model: IReadOnlyModel, position: monaco.Position, options: { includeDeclaration: boolean; }): ReferenceParams {\n        return {\n            textDocument: this.asTextDocumentIdentifier(model),\n            position: this.asPosition(position.lineNumber, position.column),\n            context: { includeDeclaration: options.includeDeclaration }\n        };\n    }\n\n    asDocumentSymbolParams(model: IReadOnlyModel): DocumentSymbolParams {\n        return {\n            textDocument: this.asTextDocumentIdentifier(model)\n        }\n    }\n\n    asCodeLensParams(model: IReadOnlyModel): CodeLensParams {\n        return {\n            textDocument: this.asTextDocumentIdentifier(model)\n        }\n    }\n\n    asDiagnosticSeverity(value: monaco.MarkerSeverity): DiagnosticSeverity | undefined {\n        switch (value) {\n            case monaco.MarkerSeverity.Error:\n                return DiagnosticSeverity.Error;\n            case monaco.MarkerSeverity.Warning:\n                return DiagnosticSeverity.Warning;\n            case monaco.MarkerSeverity.Info:\n                return DiagnosticSeverity.Information;\n            case monaco.MarkerSeverity.Hint:\n                return DiagnosticSeverity.Hint;\n        }\n        return undefined;\n    }\n\n    asDiagnostic(marker: monaco.editor.IMarkerData): Diagnostic {\n        const range = this.asRange(new monaco.Range(marker.startLineNumber, marker.startColumn, marker.endLineNumber, marker.endColumn))\n        const severity = this.asDiagnosticSeverity(marker.severity);\n        return Diagnostic.create(range, marker.message, severity, marker.code, marker.source);\n    }\n\n    asDiagnostics(markers: monaco.editor.IMarkerData[]): Diagnostic[] {\n        if (markers === void 0 || markers === null) {\n            return markers;\n        }\n        return markers.map(marker => this.asDiagnostic(marker));\n    }\n\n    asCodeActionContext(context: monaco.languages.CodeActionContext): CodeActionContext {\n        if (context === void 0 || context === null) {\n            return context;\n        }\n        const diagnostics = this.asDiagnostics(context.markers);\n        return CodeActionContext.create(diagnostics, Is.string(context.only) ? [context.only] : undefined);\n    }\n\n    asCodeActionParams(model: IReadOnlyModel, range: monaco.Range, context: monaco.languages.CodeActionContext): CodeActionParams {\n        return {\n            textDocument: this.asTextDocumentIdentifier(model),\n            range: this.asRange(range),\n            context: this.asCodeActionContext(context)\n        }\n    }\n\n    asCommand(item: monaco.languages.Command | undefined | null): Command | undefined {\n        if (item) {\n            let args = item.arguments || [];\n            return Command.create(item.title, item.id, ...args);\n        }\n        return undefined;\n    }\n\n    asCodeLens(item: monaco.languages.ICodeLensSymbol): CodeLens {\n        let result = CodeLens.create(this.asRange(item.range));\n        if (item.command) { result.command = this.asCommand(item.command); }\n        if (ProtocolCodeLens.is(item)) {\n            if (item.data) { result.data = item.data };\n        }\n        return result;\n    }\n\n    asFormattingOptions(options: monaco.languages.FormattingOptions): FormattingOptions {\n        return { tabSize: options.tabSize, insertSpaces: options.insertSpaces };\n    }\n\n    asDocumentFormattingParams(model: IReadOnlyModel, options: monaco.languages.FormattingOptions): DocumentFormattingParams {\n        return {\n            textDocument: this.asTextDocumentIdentifier(model),\n            options: this.asFormattingOptions(options)\n        }\n    }\n\n    asDocumentRangeFormattingParams(model: IReadOnlyModel, range: monaco.Range, options: monaco.languages.FormattingOptions): DocumentRangeFormattingParams {\n        return {\n            textDocument: this.asTextDocumentIdentifier(model),\n            range: this.asRange(range),\n            options: this.asFormattingOptions(options)\n        }\n    }\n\n    asDocumentOnTypeFormattingParams(model: IReadOnlyModel, position: monaco.IPosition, ch: string, options: monaco.languages.FormattingOptions): DocumentOnTypeFormattingParams {\n        return {\n            textDocument: this.asTextDocumentIdentifier(model),\n            position: this.asPosition(position.lineNumber, position.column),\n            ch,\n            options: this.asFormattingOptions(options)\n        }\n    }\n\n    asRenameParams(model: IReadOnlyModel, position: monaco.IPosition, newName: string): RenameParams {\n        return {\n            textDocument: this.asTextDocumentIdentifier(model),\n            position: this.asPosition(position.lineNumber, position.column),\n            newName\n        }\n    }\n\n    asDocumentLinkParams(model: IReadOnlyModel): DocumentLinkParams {\n        return {\n            textDocument: this.asTextDocumentIdentifier(model)\n        }\n    }\n\n    asDocumentLink(item: monaco.languages.ILink): DocumentLink {\n        let result = DocumentLink.create(this.asRange(item.range));\n        if (item.url) { result.target = typeof item.url === 'string' ? item.url : item.url.toString(); }\n        if (ProtocolDocumentLink.is(item) && item.data) {\n            result.data = item.data;\n        }\n        return result;\n    }\n}\n\nexport class ProtocolToMonacoConverter {\n\n    asResourceEdits(resource: monaco.Uri, edits: TextEdit[], modelVersionId?: number): monaco.languages.ResourceTextEdit {\n        return {\n            resource: resource,\n            edits: this.asTextEdits(edits),\n            modelVersionId\n        }\n    }\n\n    asWorkspaceEdit(item: WorkspaceEdit): monaco.languages.WorkspaceEdit;\n    asWorkspaceEdit(item: undefined | null): undefined;\n    asWorkspaceEdit(item: WorkspaceEdit | undefined | null): monaco.languages.WorkspaceEdit | undefined;\n    asWorkspaceEdit(item: WorkspaceEdit | undefined | null): monaco.languages.WorkspaceEdit | undefined {\n        if (!item) {\n            return undefined;\n        }\n        const edits: (monaco.languages.ResourceTextEdit | monaco.languages.ResourceFileEdit)[] = [];\n        if (item.documentChanges) {\n            item.documentChanges.forEach(change => {\n                if (ls.CreateFile.is(change)) {\n                    edits.push(<monaco.languages.ResourceFileEdit>{\n                        newUri: monaco.Uri.parse(change.uri),\n                        options: change.options\n                    });\n                } else if (ls.RenameFile.is(change)) {\n                    edits.push(<monaco.languages.ResourceFileEdit>{\n                        oldUri: monaco.Uri.parse(change.oldUri),\n                        newUri: monaco.Uri.parse(change.newUri),\n                        options: change.options\n                    });\n                } else if (ls.DeleteFile.is(change)) {\n                    edits.push(<monaco.languages.ResourceFileEdit>{\n                        oldUri: monaco.Uri.parse(change.uri),\n                        options: change.options\n                    });\n                } else if (ls.TextDocumentEdit.is(change)) {\n                    const resource = monaco.Uri.parse(change.textDocument.uri);\n                    const version = typeof change.textDocument.version === 'number' ? change.textDocument.version : undefined;\n                    edits.push(this.asResourceEdits(resource, change.edits, version));\n                } else {\n                    console.error(`Unknown workspace edit change received:\\n${JSON.stringify(change, undefined, 4)}`);\n                }\n            });\n        } else if (item.changes) {\n            for (const key of Object.keys(item.changes)) {\n                const resource = monaco.Uri.parse(key);\n                edits.push(this.asResourceEdits(resource, item.changes[key]));\n            }\n        }\n        return {\n            edits\n        };\n    }\n\n    asTextEdit(edit: TextEdit): monaco.languages.TextEdit;\n    asTextEdit(edit: undefined | null): undefined;\n    asTextEdit(edit: TextEdit | undefined | null): undefined;\n    asTextEdit(edit: TextEdit | undefined | null): monaco.languages.TextEdit | undefined {\n        if (!edit) {\n            return undefined;\n        }\n        const range = this.asRange(edit.range)!;\n        return {\n            range,\n            text: edit.newText\n        }\n    }\n\n    asTextEdits(items: TextEdit[]): monaco.languages.TextEdit[];\n    asTextEdits(items: undefined | null): undefined;\n    asTextEdits(items: TextEdit[] | undefined | null): monaco.languages.TextEdit[] | undefined;\n    asTextEdits(items: TextEdit[] | undefined | null): monaco.languages.TextEdit[] | undefined {\n        if (!items) {\n            return undefined;\n        }\n        return items.map(item => this.asTextEdit(item));\n    }\n\n    asCodeLens(item: CodeLens): monaco.languages.ICodeLensSymbol;\n    asCodeLens(item: undefined | null): undefined;\n    asCodeLens(item: CodeLens | undefined | null): monaco.languages.ICodeLensSymbol | undefined;\n    asCodeLens(item: CodeLens | undefined | null): monaco.languages.ICodeLensSymbol | undefined {\n        if (!item) {\n            return undefined;\n        }\n        const range = this.asRange(item.range);\n        let result = <ProtocolCodeLens>{ range };\n        if (item.command) { result.command = this.asCommand(item.command); }\n        if (item.data !== void 0 && item.data !== null) { result.data = item.data; }\n        return result;\n    }\n\n    asCodeLenses(items: CodeLens[]): monaco.languages.ICodeLensSymbol[];\n    asCodeLenses(items: undefined | null): undefined;\n    asCodeLenses(items: CodeLens[] | undefined | null): monaco.languages.ICodeLensSymbol[] | undefined;\n    asCodeLenses(items: CodeLens[] | undefined | null): monaco.languages.ICodeLensSymbol[] | undefined {\n        if (!items) {\n            return undefined;\n        }\n        return items.map((codeLens) => this.asCodeLens(codeLens));\n    }\n\n    asCodeActions(actions: (Command | CodeAction)[]): (monaco.languages.Command | monaco.languages.CodeAction)[] {\n        return actions.map(action => this.asCodeAction(action));\n    }\n\n    asCodeAction(item: Command | CodeAction): monaco.languages.Command | monaco.languages.CodeAction {\n        if (CodeAction.is(item)) {\n            return {\n                title: item.title,\n                command: this.asCommand(item.command),\n                edit: this.asWorkspaceEdit(item.edit),\n                diagnostics: this.asDiagnostics(item.diagnostics),\n                kind: item.kind\n            };\n        }\n        return {\n            command: {\n                id: item.command,\n                title: item.title,\n                arguments: item.arguments\n            },\n            title: item.title\n        };\n    }\n\n    asCommand(command: Command): monaco.languages.Command;\n    asCommand(command: undefined): undefined;\n    asCommand(command: Command | undefined): monaco.languages.Command | undefined;\n    asCommand(command: Command | undefined): monaco.languages.Command | undefined {\n        if (!command) {\n            return undefined;\n        }\n        return {\n            id: command.command,\n            title: command.title,\n            arguments: command.arguments\n        };\n    }\n\n    asDocumentSymbol(value: DocumentSymbol): monaco.languages.DocumentSymbol {\n        const children = value.children && value.children.map(c => this.asDocumentSymbol(c));\n        return {\n            name: value.name,\n            detail: value.detail || \"\",\n            kind: this.asSymbolKind(value.kind),\n            range: this.asRange(value.range),\n            selectionRange: this.asRange(value.selectionRange),\n            children\n        };\n    }\n\n    asDocumentSymbols(values: SymbolInformation[] | DocumentSymbol[]): monaco.languages.DocumentSymbol[] {\n        if (DocumentSymbol.is(values[0])) {\n            return (values as DocumentSymbol[]).map(s => this.asDocumentSymbol(s));\n        }\n        return this.asSymbolInformations(values as SymbolInformation[]);\n    }\n\n    asSymbolInformations(values: SymbolInformation[], uri?: monaco.Uri): monaco.languages.DocumentSymbol[];\n    asSymbolInformations(values: undefined | null, uri?: monaco.Uri): undefined;\n    asSymbolInformations(values: SymbolInformation[] | undefined | null, uri?: monaco.Uri): monaco.languages.DocumentSymbol[] | undefined;\n    asSymbolInformations(values: SymbolInformation[] | undefined | null, uri?: monaco.Uri): monaco.languages.DocumentSymbol[] | undefined {\n        if (!values) {\n            return undefined;\n        }\n        return values.map(information => this.asSymbolInformation(information, uri));\n    }\n\n    asSymbolInformation(item: SymbolInformation, uri?: monaco.Uri): monaco.languages.DocumentSymbol {\n        const location = this.asLocation(uri ? { ...item.location, uri: uri.toString() } : item.location);\n        return {\n            name: item.name,\n            detail: '',\n            containerName: item.containerName,\n            kind: this.asSymbolKind(item.kind),\n            range: location.range,\n            selectionRange: location.range\n        };\n    }\n\n    asSymbolKind(item: SymbolKind): monaco.languages.SymbolKind {\n        if (item <= SymbolKind.TypeParameter) {\n            // Symbol kind is one based in the protocol and zero based in code.\n            return item - 1;\n        }\n        return monaco.languages.SymbolKind.Property;\n    }\n\n    asDocumentHighlights(values: DocumentHighlight[]): monaco.languages.DocumentHighlight[];\n    asDocumentHighlights(values: undefined | null): undefined;\n    asDocumentHighlights(values: DocumentHighlight[] | undefined | null): monaco.languages.DocumentHighlight[] | undefined;\n    asDocumentHighlights(values: DocumentHighlight[] | undefined | null): monaco.languages.DocumentHighlight[] | undefined {\n        if (!values) {\n            return undefined;\n        }\n        return values.map(item => this.asDocumentHighlight(item));\n    }\n\n    asDocumentHighlight(item: DocumentHighlight): monaco.languages.DocumentHighlight {\n        const range = this.asRange(item.range)!;\n        const kind = Is.number(item.kind) ? this.asDocumentHighlightKind(item.kind) : undefined!;\n        return { range, kind };\n    }\n\n    asDocumentHighlightKind(item: number): monaco.languages.DocumentHighlightKind {\n        switch (item) {\n            case DocumentHighlightKind.Text:\n                return monaco.languages.DocumentHighlightKind.Text;\n            case DocumentHighlightKind.Read:\n                return monaco.languages.DocumentHighlightKind.Read;\n            case DocumentHighlightKind.Write:\n                return monaco.languages.DocumentHighlightKind.Write;\n        }\n        return monaco.languages.DocumentHighlightKind.Text;\n    }\n\n    asReferences(values: Location[]): monaco.languages.Location[];\n    asReferences(values: undefined | null): monaco.languages.Location[] | undefined;\n    asReferences(values: Location[] | undefined | null): monaco.languages.Location[] | undefined;\n    asReferences(values: Location[] | undefined | null): monaco.languages.Location[] | undefined {\n        if (!values) {\n            return undefined;\n        }\n        return values.map(location => this.asLocation(location));\n    }\n\n    asDefinitionResult(item: Definition): monaco.languages.Definition;\n    asDefinitionResult(item: undefined | null): undefined;\n    asDefinitionResult(item: Definition | undefined | null): monaco.languages.Definition | undefined;\n    asDefinitionResult(item: Definition | undefined | null): monaco.languages.Definition | undefined {\n        if (!item) {\n            return undefined;\n        }\n        if (Is.array(item)) {\n            return item.map((location) => this.asLocation(location));\n        } else {\n            return this.asLocation(item);\n        }\n    }\n\n    asLocation(item: Location): monaco.languages.Location;\n    asLocation(item: undefined | null): undefined;\n    asLocation(item: Location | undefined | null): monaco.languages.Location | undefined;\n    asLocation(item: Location | undefined | null): monaco.languages.Location | undefined {\n        if (!item) {\n            return undefined;\n        }\n        const uri = monaco.Uri.parse(item.uri);\n        const range = this.asRange(item.range)!;\n        return {\n            uri, range\n        }\n    }\n\n    asSignatureHelp(item: undefined | null): undefined;\n    asSignatureHelp(item: SignatureHelp): monaco.languages.SignatureHelp;\n    asSignatureHelp(item: SignatureHelp | undefined | null): monaco.languages.SignatureHelp | undefined;\n    asSignatureHelp(item: SignatureHelp | undefined | null): monaco.languages.SignatureHelp | undefined {\n        if (!item) {\n            return undefined;\n        }\n        let result = <monaco.languages.SignatureHelp>{};\n        if (Is.number(item.activeSignature)) {\n            result.activeSignature = item.activeSignature;\n        } else {\n            // activeSignature was optional in the past\n            result.activeSignature = 0;\n        }\n        if (Is.number(item.activeParameter)) {\n            result.activeParameter = item.activeParameter;\n        } else {\n            // activeParameter was optional in the past\n            result.activeParameter = 0;\n        }\n        if (item.signatures) {\n            result.signatures = this.asSignatureInformations(item.signatures);\n        } else {\n            result.signatures = [];\n        }\n        return result;\n    }\n\n    asSignatureInformations(items: SignatureInformation[]): monaco.languages.SignatureInformation[] {\n        return items.map(item => this.asSignatureInformation(item));\n    }\n\n    asSignatureInformation(item: SignatureInformation): monaco.languages.SignatureInformation {\n        let result = <monaco.languages.SignatureInformation>{ label: item.label };\n        if (item.documentation) { result.documentation = this.asDocumentation(item.documentation); }\n        if (item.parameters) {\n            result.parameters = this.asParameterInformations(item.parameters);\n        } else {\n            result.parameters = [];\n        }\n        return result;\n    }\n\n    asParameterInformations(item: ParameterInformation[]): monaco.languages.ParameterInformation[] {\n        return item.map(item => this.asParameterInformation(item));\n    }\n\n    asParameterInformation(item: ParameterInformation): monaco.languages.ParameterInformation {\n        let result = <monaco.languages.ParameterInformation>{ label: item.label };\n        if (item.documentation) { result.documentation = this.asDocumentation(item.documentation) };\n        return result;\n    }\n\n    asHover(hover: Hover): monaco.languages.Hover;\n    asHover(hover: undefined | null): undefined;\n    asHover(hover: Hover | undefined | null): monaco.languages.Hover | undefined;\n    asHover(hover: Hover | undefined | null): monaco.languages.Hover | undefined {\n        if (!hover) {\n            return undefined;\n        }\n        return {\n            contents: this.asHoverContent(hover.contents),\n            range: this.asRange(hover.range)\n        };\n    }\n\n    asHoverContent(contents: MarkedString | MarkedString[] | MarkupContent): monaco.IMarkdownString[] {\n        if (Array.isArray(contents)) {\n            return contents.map(content => this.asMarkdownString(content));\n        }\n        return [this.asMarkdownString(contents)];\n    }\n\n    asDocumentation(value: string | MarkupContent): string | monaco.IMarkdownString {\n        if (Is.string(value)) {\n            return value;\n        }\n        if (value.kind === MarkupKind.PlainText) {\n            return value.value;\n        }\n        return this.asMarkdownString(value);\n    }\n\n    asMarkdownString(content: MarkedString | MarkupContent): monaco.IMarkdownString {\n        if (MarkupContent.is(content)) {\n            return {\n                value: content.value\n            };\n        }\n        if (Is.string(content)) {\n            return { value: content };\n        }\n        const { language, value } = content;\n        return {\n            value: '```' + language + '\\n' + value + '\\n```'\n        };\n    }\n\n    asSeverity(severity?: number): monaco.MarkerSeverity {\n        if (severity === 1) {\n            return monaco.MarkerSeverity.Error;\n        }\n        if (severity === 2) {\n            return monaco.MarkerSeverity.Warning;\n        }\n        if (severity === 3) {\n            return monaco.MarkerSeverity.Info;\n        }\n        return monaco.MarkerSeverity.Hint;\n    }\n\n    asDiagnostics(diagnostics: undefined): undefined;\n    asDiagnostics(diagnostics: Diagnostic[]): monaco.editor.IMarkerData[];\n    asDiagnostics(diagnostics: Diagnostic[] | undefined): monaco.editor.IMarkerData[] | undefined;\n    asDiagnostics(diagnostics: Diagnostic[] | undefined): monaco.editor.IMarkerData[] | undefined {\n        if (!diagnostics) {\n            return undefined;\n        }\n        return diagnostics.map(diagnostic => this.asDiagnostic(diagnostic));\n    }\n\n    asDiagnostic(diagnostic: Diagnostic): monaco.editor.IMarkerData {\n        return {\n            code: typeof diagnostic.code === \"number\" ? diagnostic.code.toString() : diagnostic.code,\n            severity: this.asSeverity(diagnostic.severity),\n            message: diagnostic.message,\n            source: diagnostic.source,\n            startLineNumber: diagnostic.range.start.line + 1,\n            startColumn: diagnostic.range.start.character + 1,\n            endLineNumber: diagnostic.range.end.line + 1,\n            endColumn: diagnostic.range.end.character + 1,\n            relatedInformation: this.asRelatedInformations(diagnostic.relatedInformation)\n        }\n    }\n\n    asRelatedInformations(relatedInformation?: DiagnosticRelatedInformation[]): monaco.editor.IRelatedInformation[] | undefined {\n        if (!relatedInformation) {\n            return undefined;\n        }\n        return relatedInformation.map(item => this.asRelatedInformation(item));\n    }\n\n    asRelatedInformation(relatedInformation: DiagnosticRelatedInformation): monaco.editor.IRelatedInformation {\n        return {\n            resource: monaco.Uri.parse(relatedInformation.location.uri),\n            startLineNumber: relatedInformation.location.range.start.line + 1,\n            startColumn: relatedInformation.location.range.start.character + 1,\n            endLineNumber: relatedInformation.location.range.end.line + 1,\n            endColumn: relatedInformation.location.range.end.character + 1,\n            message: relatedInformation.message\n        }\n    }\n\n    asCompletionResult(result: CompletionItem[] | CompletionList | null | undefined, defaultRange: monaco.IRange): monaco.languages.CompletionList {\n        if (!result) {\n            return {\n                incomplete: false,\n                suggestions: []\n            }\n        }\n        if (Array.isArray(result)) {\n            const suggestions = result.map(item => this.asCompletionItem(item, defaultRange));\n            return {\n                incomplete: false,\n                suggestions\n            }\n        }\n        return {\n            incomplete: result.isIncomplete,\n            suggestions: result.items.map(item => this.asCompletionItem(item, defaultRange))\n        }\n    }\n\n    asCompletionItem(item: CompletionItem, defaultRange: monaco.IRange): ProtocolCompletionItem {\n        const result = <ProtocolCompletionItem>{ label: item.label };\n        if (item.detail) { result.detail = item.detail; }\n        if (item.documentation) {\n            result.documentation = this.asDocumentation(item.documentation);\n            result.documentationFormat = Is.string(item.documentation) ? undefined : item.documentation.kind;\n        };\n        if (item.filterText) { result.filterText = item.filterText; }\n        const insertText = this.asCompletionInsertText(item, defaultRange);\n        result.insertText = insertText.insertText;\n        result.range = insertText.range;\n        result.fromEdit = insertText.fromEdit;\n        if (insertText.isSnippet) {\n            result.insertTextRules = monaco.languages.CompletionItemInsertTextRule.InsertAsSnippet;\n        }\n        if (Is.number(item.kind)) {\n            let [itemKind, original] = this.asCompletionItemKind(item.kind);\n            result.kind = itemKind;\n            if (original) {\n                result.originalItemKind = original;\n            }\n        }\n        if (item.sortText) { result.sortText = item.sortText; }\n        if (item.additionalTextEdits) { result.additionalTextEdits = this.asTextEdits(item.additionalTextEdits); }\n        if (Is.stringArray(item.commitCharacters)) { result.commitCharacters = item.commitCharacters.slice(); }\n        if (item.command) { result.command = this.asCommand(item.command); }\n        if (item.deprecated === true || item.deprecated === false) { result.deprecated = item.deprecated; }\n        if (item.preselect === true || item.preselect === false) { result.preselect = item.preselect; }\n        if (item.data !== undefined) { result.data = item.data; }\n        if (item.deprecated === true || item.deprecated === false) {\n            result.deprecated = item.deprecated;\n        }\n        return result;\n    }\n\n    asCompletionItemKind(value: CompletionItemKind): [monaco.languages.CompletionItemKind, CompletionItemKind | undefined] {\n        if (CompletionItemKind.Text <= value && value <= CompletionItemKind.TypeParameter) {\n            switch (value) {\n                case CompletionItemKind.Text: return [monaco.languages.CompletionItemKind.Text, undefined];\n                case CompletionItemKind.Method: return [monaco.languages.CompletionItemKind.Method, undefined];\n                case CompletionItemKind.Function: return [monaco.languages.CompletionItemKind.Function, undefined];\n                case CompletionItemKind.Constructor: return [monaco.languages.CompletionItemKind.Constructor, undefined];\n                case CompletionItemKind.Field: return [monaco.languages.CompletionItemKind.Field, undefined];\n                case CompletionItemKind.Variable: return [monaco.languages.CompletionItemKind.Variable, undefined];\n                case CompletionItemKind.Class: return [monaco.languages.CompletionItemKind.Class, undefined];\n                case CompletionItemKind.Interface: return [monaco.languages.CompletionItemKind.Interface, undefined];\n                case CompletionItemKind.Module: return [monaco.languages.CompletionItemKind.Module, undefined];\n                case CompletionItemKind.Property: return [monaco.languages.CompletionItemKind.Property, undefined];\n                case CompletionItemKind.Unit: return [monaco.languages.CompletionItemKind.Unit, undefined];\n                case CompletionItemKind.Value: return [monaco.languages.CompletionItemKind.Value, undefined];\n                case CompletionItemKind.Enum: return [monaco.languages.CompletionItemKind.Enum, undefined];\n                case CompletionItemKind.Keyword: return [monaco.languages.CompletionItemKind.Keyword, undefined];\n                case CompletionItemKind.Snippet: return [monaco.languages.CompletionItemKind.Snippet, undefined];\n                case CompletionItemKind.Color: return [monaco.languages.CompletionItemKind.Color, undefined];\n                case CompletionItemKind.File: return [monaco.languages.CompletionItemKind.File, undefined];\n                case CompletionItemKind.Reference: return [monaco.languages.CompletionItemKind.Reference, undefined];\n                case CompletionItemKind.Folder: return [monaco.languages.CompletionItemKind.Folder, undefined];\n                case CompletionItemKind.EnumMember: return [monaco.languages.CompletionItemKind.EnumMember, undefined];\n                case CompletionItemKind.Constant: return [monaco.languages.CompletionItemKind.Constant, undefined];\n                case CompletionItemKind.Struct: return [monaco.languages.CompletionItemKind.Struct, undefined];\n                case CompletionItemKind.Event: return [monaco.languages.CompletionItemKind.Event, undefined];\n                case CompletionItemKind.Operator: return [monaco.languages.CompletionItemKind.Operator, undefined];\n                case CompletionItemKind.TypeParameter: return [monaco.languages.CompletionItemKind.TypeParameter, undefined];\n                default: return [value - 1, undefined];\n            }\n\n        };\n        return [CompletionItemKind.Text, value];\n    }\n\n    asCompletionInsertText(item: CompletionItem, defaultRange: monaco.IRange): { insertText: string, range: monaco.IRange, fromEdit: boolean, isSnippet: boolean } {\n        const isSnippet = item.insertTextFormat === InsertTextFormat.Snippet;\n        if (item.textEdit) {\n            const range = this.asRange(item.textEdit.range);\n            const value = item.textEdit.newText;\n            return { isSnippet, insertText: value, range, fromEdit: true, };\n        }\n        if (item.insertText) {\n            return { isSnippet, insertText: item.insertText, fromEdit: false, range: defaultRange };\n        }\n        return { insertText: item.label, range: defaultRange, fromEdit: false, isSnippet: false };\n    }\n\n    asDocumentLinks(documentLinks: DocumentLink[]): monaco.languages.ILinksList {\n        const links = documentLinks.map(link => this.asDocumentLink(link));\n        return { links };\n    }\n\n    asDocumentLink(documentLink: DocumentLink): ProtocolDocumentLink {\n        return {\n            range: this.asRange(documentLink.range),\n            url: documentLink.target,\n            data: documentLink.data\n        };\n    }\n\n    asRange(range: null): null;\n    asRange(range: undefined): undefined;\n    asRange(range: Range): monaco.Range;\n    asRange(range: Range | undefined): monaco.Range | undefined;\n    asRange(range: Range | null): monaco.Range | null;\n    asRange(range: RecursivePartial<Range>): Partial<monaco.IRange>;\n    asRange(range: RecursivePartial<Range> | undefined): monaco.Range | Partial<monaco.IRange> | undefined;\n    asRange(range: RecursivePartial<Range> | null): monaco.Range | Partial<monaco.IRange> | null;\n    asRange(range: RecursivePartial<Range> | undefined | null): monaco.Range | Partial<monaco.IRange> | undefined | null {\n        if (range === undefined) {\n            return undefined;\n        }\n        if (range === null) {\n            return null;\n        }\n        const start = this.asPosition(range.start);\n        const end = this.asPosition(range.end);\n        if (start instanceof monaco.Position && end instanceof monaco.Position) {\n            return new monaco.Range(start.lineNumber, start.column, end.lineNumber, end.column);\n        }\n        const startLineNumber = !start || start.lineNumber === undefined ? undefined : start.lineNumber;\n        const startColumn = !start || start.column === undefined ? undefined : start.column;\n        const endLineNumber = !end || end.lineNumber === undefined ? undefined : end.lineNumber;\n        const endColumn = !end || end.column === undefined ? undefined : end.column;\n        return { startLineNumber, startColumn, endLineNumber, endColumn };\n    }\n\n    asPosition(position: null): null;\n    asPosition(position: undefined): undefined;\n    asPosition(position: Position): monaco.Position;\n    asPosition(position: Position | undefined): monaco.Position | undefined;\n    asPosition(position: Position | null): monaco.Position | null;\n    asPosition(position: Partial<Position>): Partial<monaco.IPosition>;\n    asPosition(position: Partial<Position> | undefined): monaco.Position | Partial<monaco.IPosition> | undefined;\n    asPosition(position: Partial<Position> | null): monaco.Position | Partial<monaco.IPosition> | null;\n    asPosition(position: Partial<Position> | undefined | null): monaco.Position | Partial<monaco.IPosition> | undefined | null {\n        if (position === undefined) {\n            return undefined;\n        }\n        if (position === null) {\n            return null;\n        }\n        const { line, character } = position;\n        const lineNumber = line === undefined ? undefined : line + 1;\n        const column = character === undefined ? undefined : character + 1;\n        if (lineNumber !== undefined && column !== undefined) {\n            return new monaco.Position(lineNumber, column);\n        }\n        return { lineNumber, column };\n    }\n\n    asColorInformations(items: ColorInformation[]): monaco.languages.IColorInformation[] {\n        return items.map(item => this.asColorInformation(item));\n    }\n\n    asColorInformation(item: ColorInformation): monaco.languages.IColorInformation {\n        return {\n            range: this.asRange(item.range),\n            color: item.color\n        }\n    }\n\n    asColorPresentations(items: ColorPresentation[]): monaco.languages.IColorPresentation[] {\n        return items.map(item => this.asColorPresentation(item));\n    }\n\n    asColorPresentation(item: ColorPresentation): monaco.languages.IColorPresentation {\n        return {\n            label: item.label,\n            textEdit: this.asTextEdit(item.textEdit),\n            additionalTextEdits: this.asTextEdits(item.additionalTextEdits)\n        }\n    }\n\n    asFoldingRanges(items: undefined | null): undefined | null;\n    asFoldingRanges(items: FoldingRange[]): monaco.languages.FoldingRange[];\n    asFoldingRanges(items: FoldingRange[] | undefined | null): monaco.languages.FoldingRange[] | undefined | null {\n        if (!items) {\n            return items;\n        }\n        return items.map(item => this.asFoldingRange(item));\n    }\n\n    asFoldingRange(item: FoldingRange): monaco.languages.FoldingRange {\n        return {\n            start: item.startLine + 1,\n            end: item.endLine + 1,\n            kind: this.asFoldingRangeKind(item.kind)\n        };\n    }\n\n    asFoldingRangeKind(kind?: string): monaco.languages.FoldingRangeKind | undefined {\n        if (kind) {\n            switch (kind) {\n                case FoldingRangeKind.Comment:\n                    return monaco.languages.FoldingRangeKind.Comment;\n                case FoldingRangeKind.Imports:\n                    return monaco.languages.FoldingRangeKind.Imports;\n                case FoldingRangeKind.Region:\n                    return monaco.languages.FoldingRangeKind.Region;\n            };\n        }\n        return undefined;\n    }\n\n}\n","/* --------------------------------------------------------------------------------------------\n * Copyright (c) 2018 TypeFox GmbH (http://www.typefox.io). All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nimport { DiagnosticCollection, Diagnostic } from './services';\nimport { DisposableCollection, Disposable } from './disposable';\nimport { ProtocolToMonacoConverter } from './monaco-converter';\nimport IModel = monaco.editor.IModel;\nimport IMarkerData = monaco.editor.IMarkerData;\n\nexport class MonacoDiagnosticCollection implements DiagnosticCollection {\n\n    protected readonly diagnostics = new Map<string, MonacoModelDiagnostics | undefined>();\n    protected readonly toDispose = new DisposableCollection();\n\n    constructor(\n        protected readonly name: string,\n        protected readonly p2m: ProtocolToMonacoConverter) {\n    }\n\n    dispose() {\n        this.toDispose.dispose();\n    }\n\n    get(uri: string): Diagnostic[] {\n        const diagnostics = this.diagnostics.get(uri);\n        return !!diagnostics ? diagnostics.diagnostics : [];\n    }\n\n    set(uri: string, diagnostics: Diagnostic[]): void {\n        const existing = this.diagnostics.get(uri);\n        if (existing) {\n            existing.diagnostics = diagnostics;\n        } else {\n            const modelDiagnostics = new MonacoModelDiagnostics(uri, diagnostics, this.name, this.p2m);\n            this.diagnostics.set(uri, modelDiagnostics);\n            this.toDispose.push(Disposable.create(() => {\n                this.diagnostics.delete(uri);\n                modelDiagnostics.dispose();\n            }));\n        }\n    }\n\n}\n\nexport class MonacoModelDiagnostics implements Disposable {\n    readonly uri: monaco.Uri;\n    protected _markers: IMarkerData[] = [];\n    protected _diagnostics: Diagnostic[] = [];\n    constructor(\n        uri: string,\n        diagnostics: Diagnostic[],\n        readonly owner: string,\n        protected readonly p2m: ProtocolToMonacoConverter\n    ) {\n        this.uri = monaco.Uri.parse(uri);\n        this.diagnostics = diagnostics;\n        monaco.editor.onDidCreateModel(model => this.doUpdateModelMarkers(model));\n    }\n\n    set diagnostics(diagnostics: Diagnostic[]) {\n        this._diagnostics = diagnostics;\n        this._markers = this.p2m.asDiagnostics(diagnostics);\n        this.updateModelMarkers();\n    }\n\n    get diagnostics(): Diagnostic[] {\n        return this._diagnostics;\n    }\n\n    get markers(): ReadonlyArray<IMarkerData> {\n        return this._markers;\n    }\n\n    dispose(): void {\n        this._markers = [];\n        this.updateModelMarkers();\n    }\n\n    updateModelMarkers(): void {\n        const model = monaco.editor.getModel(this.uri);\n        this.doUpdateModelMarkers(model ? model : undefined);\n    }\n\n    protected doUpdateModelMarkers(model: IModel | undefined): void {\n        if (model && this.uri.toString() === model.uri.toString()) {\n            monaco.editor.setModelMarkers(model, this.owner, this._markers);\n        }\n    }\n}\n","/* --------------------------------------------------------------------------------------------\n * Copyright (c) 2018 TypeFox GmbH (http://www.typefox.io). All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nimport {\n    BaseLanguageClient, MessageTransports, LanguageClientOptions,\n    CompletionParams, WillSaveTextDocumentParams, StaticFeature, DynamicFeature\n} from \"vscode-languageclient/lib/client\";\nimport { TypeDefinitionFeature } from \"vscode-languageclient/lib/typeDefinition\";\nimport { ConfigurationFeature as PullConfigurationFeature } from \"vscode-languageclient/lib/configuration\";\nimport { ImplementationFeature } from \"vscode-languageclient/lib/implementation\";\nimport { ColorProviderFeature } from \"vscode-languageclient/lib/colorProvider\";\nimport { WorkspaceFoldersFeature } from \"vscode-languageclient/lib/workspaceFolders\";\nimport { FoldingRangeFeature } from \"vscode-languageclient/lib/foldingRange\";\nimport * as p2c from 'vscode-languageclient/lib/protocolConverter';\nimport * as c2p from 'vscode-languageclient/lib/codeConverter';\nimport { IConnectionProvider, IConnection } from './connection';\nimport { DeclarationFeature } from \"vscode-languageclient/lib/declaration\";\n\nexport * from 'vscode-languageclient/lib/client';\n\nexport class MonacoLanguageClient extends BaseLanguageClient {\n\n    static bypassConversion = (result: any) => result || undefined;\n\n    protected readonly connectionProvider: IConnectionProvider;\n\n    constructor({ id, name, clientOptions, connectionProvider }: MonacoLanguageClient.Options) {\n        super(id || name.toLowerCase(), name, clientOptions);\n        this.connectionProvider = connectionProvider;\n        (this as any).createConnection = this.doCreateConnection.bind(this);\n\n        // bypass LSP <=> VS Code conversion\n        const self: {\n            _p2c: p2c.Converter,\n            _c2p: c2p.Converter\n        } = this as any;\n        self._p2c = new Proxy(self._p2c, {\n            get: (target: any, prop: string) => {\n                if (prop === 'asUri') {\n                    return target[prop];\n                }\n                return MonacoLanguageClient.bypassConversion;\n            }\n        });\n        self._c2p = new Proxy(self._c2p, {\n            get: (target: c2p.Converter, prop: string) => {\n                if (prop === 'asUri') {\n                    return target[prop];\n                }\n                if (prop === 'asCompletionParams') {\n                    return (textDocument: any, position: any, context: any): CompletionParams => {\n                        return {\n                            textDocument: target.asTextDocumentIdentifier(textDocument),\n                            position,\n                            context\n                        }\n                    }\n                }\n                if (prop === 'asWillSaveTextDocumentParams') {\n                    return (event: any): WillSaveTextDocumentParams => {\n                        return {\n                            textDocument: target.asTextDocumentIdentifier(event.document),\n                            reason: event.reason\n                        }\n                    }\n                }\n                if (prop.endsWith('Params')) {\n                    return (target as any)[prop];\n                }\n                return MonacoLanguageClient.bypassConversion;\n            }\n        });\n    }\n\n    protected doCreateConnection(): Thenable<IConnection> {\n        const errorHandler = (this as any).handleConnectionError.bind(this);\n        const closeHandler = this.handleConnectionClosed.bind(this);\n        return this.connectionProvider.get(errorHandler, closeHandler, this.outputChannel);\n    }\n\n    protected createMessageTransports(encoding: string): Thenable<MessageTransports> {\n        throw new Error('Unsupported');\n    }\n\n    protected registerBuiltinFeatures(): void {\n        super.registerBuiltinFeatures();\n        this.registerFeature(new PullConfigurationFeature(this));\n        this.registerFeature(new TypeDefinitionFeature(this));\n        this.registerFeature(new ImplementationFeature(this));\n        this.registerFeature(new ColorProviderFeature(this));\n        this.registerFeature(new WorkspaceFoldersFeature(this));\n        const foldingRangeFeature = new FoldingRangeFeature(this);\n        foldingRangeFeature['asFoldingRanges'] = MonacoLanguageClient.bypassConversion;\n        this.registerFeature(foldingRangeFeature);\n        this.registerFeature(new DeclarationFeature(this));\n\n        const features = this['_features'] as ((StaticFeature | DynamicFeature<any>)[]);\n        for (const feature of features) {\n            if (feature instanceof ColorProviderFeature) {\n                feature['asColor'] = MonacoLanguageClient.bypassConversion;\n                feature['asColorInformations'] = MonacoLanguageClient.bypassConversion;\n                feature['asColorPresentations'] = MonacoLanguageClient.bypassConversion;\n            }\n        }\n    }\n\n}\nexport namespace MonacoLanguageClient {\n    export interface Options {\n        name: string;\n        id?: string;\n        clientOptions: LanguageClientOptions;\n        connectionProvider: IConnectionProvider;\n    }\n}\n","/* --------------------------------------------------------------------------------------------\n * Copyright (c) 2018 TypeFox GmbH (http://www.typefox.io). All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nimport globToRegExp = require('glob-to-regexp');\nimport {\n    Languages, DiagnosticCollection, CompletionItemProvider, DocumentIdentifier, HoverProvider,\n    SignatureHelpProvider, DefinitionProvider, ReferenceProvider, DocumentHighlightProvider,\n    DocumentSymbolProvider, CodeActionProvider, CodeLensProvider, DocumentFormattingEditProvider, DocumentRangeFormattingEditProvider,\n    OnTypeFormattingEditProvider, RenameProvider,\n    DocumentFilter, DocumentSelector, DocumentLinkProvider, ImplementationProvider, TypeDefinitionProvider, DocumentColorProvider,\n    FoldingRangeProvider\n} from \"./services\";\nimport { MonacoDiagnosticCollection } from './monaco-diagnostic-collection';\nimport { ProtocolToMonacoConverter, MonacoToProtocolConverter } from './monaco-converter';\nimport { DisposableCollection, Disposable } from './disposable';\n\nexport interface MonacoModelIdentifier {\n    uri: monaco.Uri;\n    languageId: string;\n}\n\nexport namespace MonacoModelIdentifier {\n    export function fromDocument(document: DocumentIdentifier): MonacoModelIdentifier {\n        return {\n            uri: monaco.Uri.parse(document.uri),\n            languageId: document.languageId\n        }\n    }\n    export function fromModel(model: monaco.editor.IReadOnlyModel): MonacoModelIdentifier {\n        return {\n            uri: model.uri,\n            languageId: model.getModeId()\n        }\n    }\n}\n\nexport function testGlob(pattern: string, value: string): boolean {\n    const regExp = globToRegExp(pattern, {\n        extended: true,\n        globstar: true\n    });\n    return regExp.test(value);\n}\n\nexport class MonacoLanguages implements Languages {\n\n    constructor(\n        protected readonly p2m: ProtocolToMonacoConverter,\n        protected readonly m2p: MonacoToProtocolConverter\n    ) { }\n\n    match(selector: DocumentSelector, document: DocumentIdentifier): boolean {\n        return this.matchModel(selector, MonacoModelIdentifier.fromDocument(document));\n    }\n\n    createDiagnosticCollection(name?: string): DiagnosticCollection {\n        return new MonacoDiagnosticCollection(name || 'default', this.p2m);\n    }\n\n    registerCompletionItemProvider(selector: DocumentSelector, provider: CompletionItemProvider, ...triggerCharacters: string[]): Disposable {\n        const completionProvider = this.createCompletionProvider(selector, provider, ...triggerCharacters);\n        const providers = new DisposableCollection();\n        for (const language of this.matchLanguage(selector)) {\n            providers.push(monaco.languages.registerCompletionItemProvider(language, completionProvider))\n        };\n        return providers;\n    }\n\n    protected createCompletionProvider(selector: DocumentSelector, provider: CompletionItemProvider, ...triggerCharacters: string[]): monaco.languages.CompletionItemProvider {\n        return {\n            triggerCharacters,\n            provideCompletionItems: async (model, position, context, token) => {\n                if (!this.matchModel(selector, MonacoModelIdentifier.fromModel(model))) {\n                    return undefined;\n                }\n                const wordUntil = model.getWordUntilPosition(position);\n                const defaultRange = new monaco.Range(position.lineNumber, wordUntil.startColumn, position.lineNumber, wordUntil.endColumn);\n                const params = this.m2p.asCompletionParams(model, position, context);\n                const result = await provider.provideCompletionItems(params, token);\n                return result && this.p2m.asCompletionResult(result, defaultRange);\n            },\n            resolveCompletionItem: provider.resolveCompletionItem ? async (model, position, item, token) => {\n                const protocolItem = this.m2p.asCompletionItem(item);\n                const resolvedItem = await provider.resolveCompletionItem!(protocolItem, token);\n                if (resolvedItem) {\n                    const resolvedCompletionItem = this.p2m.asCompletionItem(resolvedItem, item.range);\n                    Object.assign(item, resolvedCompletionItem);\n                }\n                return item;\n            } : undefined\n        };\n    }\n\n    registerHoverProvider(selector: DocumentSelector, provider: HoverProvider): Disposable {\n        const hoverProvider = this.createHoverProvider(selector, provider);\n        const providers = new DisposableCollection();\n        for (const language of this.matchLanguage(selector)) {\n            providers.push(monaco.languages.registerHoverProvider(language, hoverProvider));\n        }\n        return providers;\n    }\n\n    protected createHoverProvider(selector: DocumentSelector, provider: HoverProvider): monaco.languages.HoverProvider {\n        return {\n            provideHover: async (model, position, token) => {\n                if (!this.matchModel(selector, MonacoModelIdentifier.fromModel(model))) {\n                    return undefined;\n                }\n                const params = this.m2p.asTextDocumentPositionParams(model, position);\n                const hover = await provider.provideHover(params, token);\n                return hover && this.p2m.asHover(hover);\n            }\n        }\n    }\n\n    registerSignatureHelpProvider(selector: DocumentSelector, provider: SignatureHelpProvider, ...triggerCharacters: string[]): Disposable {\n        const signatureHelpProvider = this.createSignatureHelpProvider(selector, provider, ...triggerCharacters);\n        const providers = new DisposableCollection();\n        for (const language of this.matchLanguage(selector)) {\n            providers.push(monaco.languages.registerSignatureHelpProvider(language, signatureHelpProvider));\n        }\n        return providers;\n    }\n\n    protected createSignatureHelpProvider(selector: DocumentSelector, provider: SignatureHelpProvider, ...triggerCharacters: string[]): monaco.languages.SignatureHelpProvider {\n        const signatureHelpTriggerCharacters = [...(provider.triggerCharacters || triggerCharacters || [])];\n        // TODO support regrigger characters after Monaco udpate\n        return {\n            signatureHelpTriggerCharacters,\n            provideSignatureHelp: async (model, position, token) => {\n                if (!this.matchModel(selector, MonacoModelIdentifier.fromModel(model))) {\n                    return undefined;\n                }\n                const params = this.m2p.asTextDocumentPositionParams(model, position);\n                const signatureHelp = await provider.provideSignatureHelp(params, token, {\n                    // TODO pass context from monaco after Monaco udpate\n                    triggerKind: 1,\n                    isRetrigger: false\n                });\n                return signatureHelp && this.p2m.asSignatureHelp(signatureHelp);\n            }\n        }\n    }\n\n    registerDefinitionProvider(selector: DocumentSelector, provider: DefinitionProvider): Disposable {\n        const definitionProvider = this.createDefinitionProvider(selector, provider);\n        const providers = new DisposableCollection();\n        for (const language of this.matchLanguage(selector)) {\n            providers.push(monaco.languages.registerDefinitionProvider(language, definitionProvider));\n        }\n        return providers;\n    }\n\n    protected createDefinitionProvider(selector: DocumentSelector, provider: DefinitionProvider): monaco.languages.DefinitionProvider {\n        return {\n            provideDefinition: async (model, position, token) => {\n                if (!this.matchModel(selector, MonacoModelIdentifier.fromModel(model))) {\n                    return undefined;\n                }\n                const params = this.m2p.asTextDocumentPositionParams(model, position);\n                const result = await provider.provideDefinition(params, token);\n                return result && this.p2m.asDefinitionResult(result);\n            }\n        }\n    }\n\n    registerReferenceProvider(selector: DocumentSelector, provider: ReferenceProvider): Disposable {\n        const referenceProvider = this.createReferenceProvider(selector, provider);\n        const providers = new DisposableCollection();\n        for (const language of this.matchLanguage(selector)) {\n            providers.push(monaco.languages.registerReferenceProvider(language, referenceProvider));\n        }\n        return providers;\n    }\n\n    protected createReferenceProvider(selector: DocumentSelector, provider: ReferenceProvider): monaco.languages.ReferenceProvider {\n        return {\n            provideReferences: async (model, position, context, token) => {\n                if (!this.matchModel(selector, MonacoModelIdentifier.fromModel(model))) {\n                    return undefined;\n                }\n                const params = this.m2p.asReferenceParams(model, position, context);\n                const result = await provider.provideReferences(params, token);\n                return result && this.p2m.asReferences(result);\n            }\n        }\n    }\n\n    registerDocumentHighlightProvider(selector: DocumentSelector, provider: DocumentHighlightProvider): Disposable {\n        const documentHighlightProvider = this.createDocumentHighlightProvider(selector, provider);\n        const providers = new DisposableCollection();\n        for (const language of this.matchLanguage(selector)) {\n            providers.push(monaco.languages.registerDocumentHighlightProvider(language, documentHighlightProvider));\n        }\n        return providers;\n    }\n\n    protected createDocumentHighlightProvider(selector: DocumentSelector, provider: DocumentHighlightProvider): monaco.languages.DocumentHighlightProvider {\n        return {\n            provideDocumentHighlights: async (model, position, token) => {\n                if (!this.matchModel(selector, MonacoModelIdentifier.fromModel(model))) {\n                    return undefined;\n                }\n                const params = this.m2p.asTextDocumentPositionParams(model, position);\n                const result = await provider.provideDocumentHighlights(params, token);\n                return result && this.p2m.asDocumentHighlights(result);\n            }\n        }\n    }\n\n    registerDocumentSymbolProvider(selector: DocumentSelector, provider: DocumentSymbolProvider): Disposable {\n        const documentSymbolProvider = this.createDocumentSymbolProvider(selector, provider);\n        const providers = new DisposableCollection();\n        for (const language of this.matchLanguage(selector)) {\n            providers.push(monaco.languages.registerDocumentSymbolProvider(language, documentSymbolProvider));\n        }\n        return providers;\n    }\n\n    protected createDocumentSymbolProvider(selector: DocumentSelector, provider: DocumentSymbolProvider): monaco.languages.DocumentSymbolProvider {\n        return {\n            provideDocumentSymbols: async (model, token) => {\n                if (!this.matchModel(selector, MonacoModelIdentifier.fromModel(model))) {\n                    return undefined;\n                }\n                const params = this.m2p.asDocumentSymbolParams(model);\n                const result = await provider.provideDocumentSymbols(params, token);\n                return result && this.p2m.asDocumentSymbols(result);\n            }\n        }\n    }\n\n    registerCodeActionsProvider(selector: DocumentSelector, provider: CodeActionProvider): Disposable {\n        const codeActionProvider = this.createCodeActionProvider(selector, provider);\n        const providers = new DisposableCollection();\n        for (const language of this.matchLanguage(selector)) {\n            providers.push(monaco.languages.registerCodeActionProvider(language, codeActionProvider));\n        }\n        return providers;\n    }\n\n    protected createCodeActionProvider(selector: DocumentSelector, provider: CodeActionProvider): monaco.languages.CodeActionProvider {\n        return {\n            provideCodeActions: async (model, range, context, token) => {\n                if (!this.matchModel(selector, MonacoModelIdentifier.fromModel(model))) {\n                    // FIXME: get rid of `!` when https://github.com/microsoft/monaco-editor/issues/1560 is resolved\n                    return undefined!;\n                }\n                const params = this.m2p.asCodeActionParams(model, range, context);\n                const result = await provider.provideCodeActions(params, token);\n                // FIXME: get rid of `|| undefined!` when https://github.com/microsoft/monaco-editor/issues/1560 is resolved\n                return result && this.p2m.asCodeActions(result) || undefined!;\n            }\n        }\n    }\n\n    registerCodeLensProvider(selector: DocumentSelector, provider: CodeLensProvider): Disposable {\n        const codeLensProvider = this.createCodeLensProvider(selector, provider);\n        const providers = new DisposableCollection();\n        for (const language of this.matchLanguage(selector)) {\n            providers.push(monaco.languages.registerCodeLensProvider(language, codeLensProvider));\n        }\n        return providers;\n    }\n\n    protected createCodeLensProvider(selector: DocumentSelector, provider: CodeLensProvider): monaco.languages.CodeLensProvider {\n        return {\n            provideCodeLenses: async (model, token) => {\n                if (!this.matchModel(selector, MonacoModelIdentifier.fromModel(model))) {\n                    return undefined;\n                }\n                const params = this.m2p.asCodeLensParams(model);\n                const result = await provider.provideCodeLenses(params, token);\n                return result && this.p2m.asCodeLenses(result);\n            },\n            resolveCodeLens: provider.resolveCodeLens ? async (model, codeLens, token) => {\n                if (!this.matchModel(selector, MonacoModelIdentifier.fromModel(model))) {\n                    return codeLens;\n                }\n                const protocolCodeLens = this.m2p.asCodeLens(codeLens);\n                const result = await provider.resolveCodeLens!(protocolCodeLens, token);\n                if (result) {\n                    const resolvedCodeLens = this.p2m.asCodeLens(result);\n                    Object.assign(codeLens, resolvedCodeLens);\n                }\n                return codeLens;\n            } : ((_, codeLens) => codeLens)\n        }\n    }\n\n    registerDocumentFormattingEditProvider(selector: DocumentSelector, provider: DocumentFormattingEditProvider): Disposable {\n        const documentFormattingEditProvider = this.createDocumentFormattingEditProvider(selector, provider);\n        const providers = new DisposableCollection();\n        for (const language of this.matchLanguage(selector)) {\n            providers.push(monaco.languages.registerDocumentFormattingEditProvider(language, documentFormattingEditProvider));\n        }\n        return providers;\n    }\n\n    protected createDocumentFormattingEditProvider(selector: DocumentSelector, provider: DocumentFormattingEditProvider): monaco.languages.DocumentFormattingEditProvider {\n        return {\n            provideDocumentFormattingEdits: async (model, options, token) => {\n                if (!this.matchModel(selector, MonacoModelIdentifier.fromModel(model))) {\n                    return undefined;\n                }\n                const params = this.m2p.asDocumentFormattingParams(model, options);\n                const result = await provider.provideDocumentFormattingEdits(params, token);\n                return result && this.p2m.asTextEdits(result);\n            }\n        }\n    }\n\n    registerDocumentRangeFormattingEditProvider(selector: DocumentSelector, provider: DocumentRangeFormattingEditProvider): Disposable {\n        const documentRangeFormattingEditProvider = this.createDocumentRangeFormattingEditProvider(selector, provider);\n        const providers = new DisposableCollection();\n        for (const language of this.matchLanguage(selector)) {\n            providers.push(monaco.languages.registerDocumentRangeFormattingEditProvider(language, documentRangeFormattingEditProvider));\n        }\n        return providers;\n    }\n\n    createDocumentRangeFormattingEditProvider(selector: DocumentSelector, provider: DocumentRangeFormattingEditProvider): monaco.languages.DocumentRangeFormattingEditProvider {\n        return {\n            provideDocumentRangeFormattingEdits: async (model, range, options, token) => {\n                if (!this.matchModel(selector, MonacoModelIdentifier.fromModel(model))) {\n                    return undefined;\n                }\n                const params = this.m2p.asDocumentRangeFormattingParams(model, range, options);\n                const result = await provider.provideDocumentRangeFormattingEdits(params, token);\n                return result && this.p2m.asTextEdits(result);\n            }\n        }\n    }\n\n    registerOnTypeFormattingEditProvider(selector: DocumentSelector, provider: OnTypeFormattingEditProvider, firstTriggerCharacter: string, ...moreTriggerCharacter: string[]): Disposable {\n        const onTypeFormattingEditProvider = this.createOnTypeFormattingEditProvider(selector, provider, firstTriggerCharacter, ...moreTriggerCharacter);\n        const providers = new DisposableCollection();\n        for (const language of this.matchLanguage(selector)) {\n            providers.push(monaco.languages.registerOnTypeFormattingEditProvider(language, onTypeFormattingEditProvider));\n        }\n        return providers;\n    }\n\n    protected createOnTypeFormattingEditProvider(selector: DocumentSelector, provider: OnTypeFormattingEditProvider, firstTriggerCharacter: string, ...moreTriggerCharacter: string[]): monaco.languages.OnTypeFormattingEditProvider {\n        const autoFormatTriggerCharacters = [firstTriggerCharacter].concat(moreTriggerCharacter)\n        return {\n            autoFormatTriggerCharacters,\n            provideOnTypeFormattingEdits: async (model, position, ch, options, token) => {\n                if (!this.matchModel(selector, MonacoModelIdentifier.fromModel(model))) {\n                    return undefined;\n                }\n                const params = this.m2p.asDocumentOnTypeFormattingParams(model, position, ch, options);\n                const result = await provider.provideOnTypeFormattingEdits(params, token);\n                return result && this.p2m.asTextEdits(result);\n            }\n        }\n    }\n\n    registerRenameProvider(selector: DocumentSelector, provider: RenameProvider): Disposable {\n        const renameProvider = this.createRenameProvider(selector, provider);\n        const providers = new DisposableCollection();\n        for (const language of this.matchLanguage(selector)) {\n            providers.push(monaco.languages.registerRenameProvider(language, renameProvider));\n        }\n        return providers;\n    }\n\n    protected createRenameProvider(selector: DocumentSelector, provider: RenameProvider): monaco.languages.RenameProvider {\n        return {\n            provideRenameEdits: async (model, position, newName, token) => {\n                if (!this.matchModel(selector, MonacoModelIdentifier.fromModel(model))) {\n                    return undefined;\n                }\n                const params = this.m2p.asRenameParams(model, position, newName);\n                const result = await provider.provideRenameEdits(params, token);\n                return result && this.p2m.asWorkspaceEdit(result);\n            }\n        }\n    }\n\n    registerDocumentLinkProvider(selector: DocumentSelector, provider: DocumentLinkProvider): Disposable {\n        const linkProvider = this.createDocumentLinkProvider(selector, provider);\n        const providers = new DisposableCollection();\n        for (const language of this.matchLanguage(selector)) {\n            providers.push(monaco.languages.registerLinkProvider(language, linkProvider));\n        }\n        return providers;\n    }\n\n    protected createDocumentLinkProvider(selector: DocumentSelector, provider: DocumentLinkProvider): monaco.languages.LinkProvider {\n        return {\n            provideLinks: async (model, token) => {\n                if (!this.matchModel(selector, MonacoModelIdentifier.fromModel(model))) {\n                    return undefined;\n                }\n                const params = this.m2p.asDocumentLinkParams(model);\n                const result = await provider.provideDocumentLinks(params, token);\n                return result && this.p2m.asDocumentLinks(result);\n            },\n            resolveLink: async (link: monaco.languages.ILink, token) => {\n                // resolve the link if the provider supports it\n                // and the link doesn't have a url set\n                if (provider.resolveDocumentLink && (link.url === null || link.url === undefined)) {\n                    const documentLink = this.m2p.asDocumentLink(link);\n                    const result = await provider.resolveDocumentLink(documentLink, token);\n                    if (result) {\n                        const resolvedLink = this.p2m.asDocumentLink(result);\n                        Object.assign(link, resolvedLink);\n                    }\n                }\n                return link;\n            }\n        }\n    }\n\n    registerImplementationProvider(selector: DocumentSelector, provider: ImplementationProvider): Disposable {\n        const implementationProvider = this.createImplementationProvider(selector, provider);\n        const providers = new DisposableCollection();\n        for (const language of this.matchLanguage(selector)) {\n            providers.push(monaco.languages.registerImplementationProvider(language, implementationProvider));\n        }\n        return providers;\n    }\n\n    protected createImplementationProvider(selector: DocumentSelector, provider: ImplementationProvider): monaco.languages.ImplementationProvider {\n        return {\n            provideImplementation: async (model, position, token) => {\n                if (!this.matchModel(selector, MonacoModelIdentifier.fromModel(model))) {\n                    return undefined;\n                }\n                const params = this.m2p.asTextDocumentPositionParams(model, position);\n                const result = await provider.provideImplementation(params, token);\n                return result && this.p2m.asDefinitionResult(result);\n            }\n        }\n    }\n\n    registerTypeDefinitionProvider(selector: DocumentSelector, provider: TypeDefinitionProvider): Disposable {\n        const typeDefinitionProvider = this.createTypeDefinitionProvider(selector, provider);\n        const providers = new DisposableCollection();\n        for (const language of this.matchLanguage(selector)) {\n            providers.push(monaco.languages.registerTypeDefinitionProvider(language, typeDefinitionProvider));\n        }\n        return providers;\n    }\n\n    protected createTypeDefinitionProvider(selector: DocumentSelector, provider: TypeDefinitionProvider): monaco.languages.TypeDefinitionProvider {\n        return {\n            provideTypeDefinition: async (model, position, token) => {\n                if (!this.matchModel(selector, MonacoModelIdentifier.fromModel(model))) {\n                    return undefined;\n                }\n                const params = this.m2p.asTextDocumentPositionParams(model, position);\n                const result = await provider.provideTypeDefinition(params, token);\n                return result && this.p2m.asDefinitionResult(result);\n            }\n        }\n    }\n\n    registerColorProvider(selector: DocumentSelector, provider: DocumentColorProvider): Disposable {\n        const documentColorProvider = this.createDocumentColorProvider(selector, provider);\n        const providers = new DisposableCollection();\n        for (const language of this.matchLanguage(selector)) {\n            providers.push(monaco.languages.registerColorProvider(language, documentColorProvider));\n        }\n        return providers;\n    }\n\n    protected createDocumentColorProvider(selector: DocumentSelector, provider: DocumentColorProvider): monaco.languages.DocumentColorProvider {\n        return {\n            provideDocumentColors: async (model, token) => {\n                if (!this.matchModel(selector, MonacoModelIdentifier.fromModel(model))) {\n                    return undefined;\n                }\n                const textDocument = this.m2p.asTextDocumentIdentifier(model);\n                const result = await provider.provideDocumentColors({ textDocument }, token);\n                return result && this.p2m.asColorInformations(result);\n            },\n            provideColorPresentations: async (model, info, token) => {\n                if (!this.matchModel(selector, MonacoModelIdentifier.fromModel(model))) {\n                    return undefined;\n                }\n                const textDocument = this.m2p.asTextDocumentIdentifier(model);\n                const range = this.m2p.asRange(info.range);\n                const result = await provider.provideColorPresentations({\n                    textDocument,\n                    color: info.color,\n                    range\n                }, token);\n                return result && this.p2m.asColorPresentations(result);\n            }\n        }\n    }\n\n    registerFoldingRangeProvider(selector: DocumentSelector, provider: FoldingRangeProvider): Disposable {\n        const foldingRangeProvider = this.createFoldingRangeProvider(selector, provider);\n        const providers = new DisposableCollection();\n        for (const language of this.matchLanguage(selector)) {\n            providers.push(monaco.languages.registerFoldingRangeProvider(language, foldingRangeProvider));\n        }\n        return providers;\n    }\n\n    protected createFoldingRangeProvider(selector: DocumentSelector, provider: FoldingRangeProvider): monaco.languages.FoldingRangeProvider {\n        return {\n            provideFoldingRanges: async (model, context, token) => {\n                if (!this.matchModel(selector, MonacoModelIdentifier.fromModel(model))) {\n                    return undefined;\n                }\n                const textDocument = this.m2p.asTextDocumentIdentifier(model);\n                const result = await provider.provideFoldingRanges({\n                    textDocument\n                }, token);\n                return result && this.p2m.asFoldingRanges(result);\n            }\n        }\n    }\n\n    protected matchModel(selector: string | DocumentFilter | DocumentSelector, model: MonacoModelIdentifier): boolean {\n        if (Array.isArray(selector)) {\n            return selector.some(filter => this.matchModel(filter, model));\n        }\n        if (DocumentFilter.is(selector)) {\n            if (!!selector.language && selector.language !== model.languageId) {\n                return false;\n            }\n            if (!!selector.scheme && selector.scheme !== model.uri.scheme) {\n                return false;\n            }\n            if (!!selector.pattern && !testGlob(selector.pattern, model.uri.path)) {\n                return false;\n            }\n            return true;\n        }\n        return selector === model.languageId;\n    }\n\n    protected matchLanguage(selector: string | DocumentFilter | DocumentSelector): Set<string> {\n        const languages = new Set<string>();\n        if (Array.isArray(selector)) {\n            for (const filter of selector) {\n                languages.add(this.matchLanguageByFilter(filter));\n            }\n        } else {\n            languages.add(this.matchLanguageByFilter(selector));\n        }\n        return languages;\n    }\n\n    protected matchLanguageByFilter(selector: string | DocumentFilter): string {\n        if (DocumentFilter.is(selector)) {\n            if (!selector.language) {\n                return '*';\n            }\n            return selector.language;\n        }\n        return selector;\n    }\n\n}\n","/* --------------------------------------------------------------------------------------------\n * Copyright (c) 2018 TypeFox GmbH (http://www.typefox.io). All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nimport { MonacoToProtocolConverter, ProtocolToMonacoConverter } from \"./monaco-converter\";\nimport { MonacoCommands } from './monaco-commands';\nimport { MonacoLanguages } from \"./monaco-languages\";\nimport { MonacoWorkspace } from \"./monaco-workspace\";\nimport { ConsoleWindow } from \"./console-window\";\nimport { Services } from \"./services\";\n\nexport interface MonacoServices extends Services {\n    commands: MonacoCommands\n    languages: MonacoLanguages\n    workspace: MonacoWorkspace\n    window: ConsoleWindow\n}\nexport namespace MonacoServices {\n    export interface Options {\n        rootUri?: string\n    }\n    export type Provider = () => MonacoServices;\n    export function create(editor: monaco.editor.IStandaloneCodeEditor, options: Options = {}): MonacoServices {\n        const m2p = new MonacoToProtocolConverter();\n        const p2m = new ProtocolToMonacoConverter();\n        return {\n            commands: new MonacoCommands(editor),\n            languages: new MonacoLanguages(p2m, m2p),\n            workspace: new MonacoWorkspace(p2m, m2p, options.rootUri),\n            window: new ConsoleWindow()\n        }\n    }\n    export function install(editor: monaco.editor.IStandaloneCodeEditor, options: Options = {}): MonacoServices {\n        const services = create(editor, options);\n        Services.install(services);\n        return services;\n    }\n    export function get(): MonacoServices {\n        return Services.get() as MonacoServices;\n    }\n}","/* --------------------------------------------------------------------------------------------\n * Copyright (c) 2018 TypeFox GmbH (http://www.typefox.io). All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nimport { MonacoToProtocolConverter, ProtocolToMonacoConverter } from './monaco-converter';\nimport { Workspace, WorkspaceEdit, TextDocumentDidChangeEvent, TextDocument, Event, Emitter } from './services';\nimport IModel = monaco.editor.IModel;\nimport IIdentifiedSingleEditOperation = monaco.editor.IIdentifiedSingleEditOperation;\n\nexport class MonacoWorkspace implements Workspace {\n\n    protected readonly documents = new Map<string, TextDocument>();\n    protected readonly onDidOpenTextDocumentEmitter = new Emitter<TextDocument>();\n    protected readonly onDidCloseTextDocumentEmitter = new Emitter<TextDocument>();\n    protected readonly onDidChangeTextDocumentEmitter = new Emitter<TextDocumentDidChangeEvent>();\n\n    constructor(\n        protected readonly p2m: ProtocolToMonacoConverter,\n        protected readonly m2p: MonacoToProtocolConverter,\n        protected _rootUri: string | null = null) {\n        for (const model of monaco.editor.getModels()) {\n            this.addModel(model);\n        }\n        monaco.editor.onDidCreateModel(model => this.addModel(model));\n        monaco.editor.onWillDisposeModel(model => this.removeModel(model));\n    }\n\n    get rootUri() {\n        return this._rootUri;\n    }\n\n    protected removeModel(model: IModel): void {\n        const uri = model.uri.toString();\n        const document = this.documents.get(uri);\n        if (document) {\n            this.documents.delete(uri);\n            this.onDidCloseTextDocumentEmitter.fire(document);\n        }\n    }\n\n    protected addModel(model: IModel): void {\n        const uri = model.uri.toString();\n        const document = this.setModel(uri, model);\n        this.onDidOpenTextDocumentEmitter.fire(document)\n        model.onDidChangeContent(event =>\n            this.onDidChangeContent(uri, model, event)\n        );\n    }\n\n    protected onDidChangeContent(uri: string, model: IModel, event: monaco.editor.IModelContentChangedEvent) {\n        const textDocument = this.setModel(uri, model);\n        const contentChanges = [];\n        for (const change of event.changes) {\n            const range = this.m2p.asRange(change.range);\n            const rangeLength = change.rangeLength;\n            const text = change.text;\n            contentChanges.push({ range, rangeLength, text });\n        }\n        this.onDidChangeTextDocumentEmitter.fire({\n            textDocument,\n            contentChanges\n        });\n    }\n\n    protected setModel(uri: string, model: IModel): TextDocument {\n        const document = TextDocument.create(uri, model.getModeId(), model.getVersionId(), model.getValue());\n        this.documents.set(uri, document);\n        return document;\n    }\n\n    get textDocuments(): TextDocument[] {\n        return Array.from(this.documents.values());\n    }\n\n    get onDidOpenTextDocument(): Event<TextDocument> {\n        return this.onDidOpenTextDocumentEmitter.event;\n    }\n\n    get onDidCloseTextDocument(): Event<TextDocument> {\n        return this.onDidCloseTextDocumentEmitter.event;\n    }\n\n    get onDidChangeTextDocument(): Event<TextDocumentDidChangeEvent> {\n        return this.onDidChangeTextDocumentEmitter.event;\n    }\n\n    public applyEdit(workspaceEdit: WorkspaceEdit): Promise<boolean> {\n        const edit: monaco.languages.WorkspaceEdit = this.p2m.asWorkspaceEdit(workspaceEdit);\n\n        // Collect all referenced models\n        const models: { [uri: string]: monaco.editor.IModel } = edit.edits ? edit.edits.reduce(\n            (acc: { [uri: string]: monaco.editor.IModel }, currentEdit) => {\n                const textEdit = currentEdit as monaco.languages.ResourceTextEdit;\n                acc[textEdit.resource.toString()] = monaco.editor.getModel(textEdit.resource) as monaco.editor.ITextModel;\n                return acc;\n            }, {}\n        ) : {};\n\n        // If any of the models do not exist, refuse to apply the edit.\n        if (!Object.keys(models).map(uri => models[uri]).every(model => !!model)) {\n            return Promise.resolve(false);\n        }\n\n        // Group edits by resource so we can batch them when applying\n        const editsByResource: { [uri: string]: IIdentifiedSingleEditOperation[] } = edit.edits ? edit.edits.reduce(\n            (acc: { [uri: string]: IIdentifiedSingleEditOperation[] }, currentEdit) => {\n                const textEdit = currentEdit as monaco.languages.ResourceTextEdit;\n                const uri = textEdit.resource.toString();\n                if (!(uri in acc)) {\n                    acc[uri] = [];\n                }\n                const operations = textEdit.edits.map(edit => {\n                    return {\n                        range: monaco.Range.lift(edit.range as monaco.IRange),\n                        text: edit.text as string,\n                    }\n                });\n                acc[uri].push(...operations);\n                return acc;\n            }, {}\n        ) : {};\n\n        // Apply edits for each resource\n        Object.keys(editsByResource).forEach(uri => {\n            models[uri].pushEditOperations(\n                [],  // Do not try and preserve editor selections.\n                editsByResource[uri].map(resourceEdit => {\n                    return {\n                        identifier: { major: 1, minor: 0 },\n                        range: resourceEdit.range,\n                        text: resourceEdit.text,\n                        forceMoveMarkers: true,\n                    };\n                }),\n                () => [],  // Do not try and preserve editor selections.\n            );\n        });\n        return Promise.resolve(true);\n    }\n\n}\n","/* --------------------------------------------------------------------------------------------\n * Copyright (c) 2018 TypeFox GmbH (http://www.typefox.io). All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\n'use strict';\n\nimport {\n    DocumentSelector, MessageActionItem, MessageType,\n    TextDocumentPositionParams, ReferenceParams, CodeActionParams, CodeLensParams, DocumentFormattingParams,\n    DocumentRangeFormattingParams, DocumentOnTypeFormattingParams, RenameParams, DocumentLinkParams,\n    WorkspaceClientCapabilities, DidChangeTextDocumentParams, Diagnostic, TextDocument, CompletionItem, CompletionList,\n    Hover, SignatureHelp, Definition, Location, DocumentHighlight,\n    SymbolInformation, Command, CodeLens, TextEdit, WorkspaceEdit,\n    DocumentLink, TextDocumentSaveReason, DocumentSymbolParams,\n    WorkspaceSymbolParams, TextDocumentContentChangeEvent, CompletionParams,\n    ColorInformation, ColorPresentation, DocumentColorParams, ColorPresentationParams,\n    FoldingRange, FoldingRangeRequestParam, DocumentFilter, DocumentSymbol, CodeAction,\n    Declaration, SelectionRangeParams, SelectionRange\n} from 'vscode-languageserver-protocol';\n\nimport {\n    Disposable, CancellationToken, Event, Emitter\n} from 'vscode-jsonrpc';\n\nimport Uri from 'vscode-uri';\n\nexport {\n    Disposable, CancellationToken, Event, Emitter\n}\nexport * from 'vscode-languageserver-protocol/lib/main';\n\nexport interface Services {\n    languages: Languages;\n    workspace: Workspace;\n    commands?: Commands;\n    window?: Window;\n}\nexport namespace Services {\n    const global = window as any;\n    const symbol = Symbol('Services');\n    export type Provider = () => Services;\n    export const get: Provider = () => {\n        const services = global[symbol];\n        if (!services) {\n            throw new Error('Language Client services has not been installed');\n        }\n        return services;\n    }\n    export function install(services: Services): Disposable {\n        if (global[symbol]) {\n            console.error(new Error('Language Client services has been overridden'));\n        }\n        global[symbol] = services;\n\n        return Disposable.create(() => global[symbol] = undefined)\n    }\n}\n\nexport function isDocumentSelector(selector: any): selector is DocumentSelector {\n    if (!selector || !Array.isArray(selector)) {\n        return false;\n    }\n    return selector.every(value => typeof value === 'string' || DocumentFilter.is(value));\n}\n\nexport interface DiagnosticCollection extends Disposable {\n    set(uri: string, diagnostics: Diagnostic[]): void;\n}\n\nexport type ProviderResult<T> = T | undefined | null | PromiseLike<T | undefined | null>;\n\nexport interface CompletionItemProvider {\n    provideCompletionItems(params: CompletionParams, token: CancellationToken): ProviderResult<CompletionItem[] | CompletionList>;\n    resolveCompletionItem?(item: CompletionItem, token: CancellationToken): ProviderResult<CompletionItem>;\n}\n\nexport interface HoverProvider {\n    provideHover(params: TextDocumentPositionParams, token: CancellationToken): ProviderResult<Hover>;\n}\n\nexport enum SignatureHelpTriggerKind {\n    Invoke = 1,\n    TriggerCharacter = 2,\n    ContentChange = 3\n}\n\nexport interface SignatureHelpContext {\n    readonly triggerKind: SignatureHelpTriggerKind;\n    readonly triggerCharacter?: string;\n    readonly isRetrigger: boolean;\n    readonly activeSignatureHelp?: SignatureHelp;\n}\n\nexport interface SignatureHelpProvider {\n    readonly triggerCharacters?: ReadonlyArray<string>;\n    readonly retriggerCharacters?: ReadonlyArray<string>;\n    provideSignatureHelp(params: TextDocumentPositionParams, token: CancellationToken, context: SignatureHelpContext): ProviderResult<SignatureHelp>;\n}\n\nexport interface DefinitionProvider {\n    provideDefinition(params: TextDocumentPositionParams, token: CancellationToken): ProviderResult<Definition>;\n}\n\nexport interface ReferenceProvider {\n    provideReferences(params: ReferenceParams, token: CancellationToken): ProviderResult<Location[]>;\n}\n\nexport interface DocumentHighlightProvider {\n    provideDocumentHighlights(params: TextDocumentPositionParams, token: CancellationToken): ProviderResult<DocumentHighlight[]>;\n}\n\nexport interface DocumentSymbolProvider {\n    provideDocumentSymbols(params: DocumentSymbolParams, token: CancellationToken): ProviderResult<SymbolInformation[] | DocumentSymbol[]>;\n}\n\nexport interface WorkspaceSymbolProvider {\n    provideWorkspaceSymbols(params: WorkspaceSymbolParams, token: CancellationToken): ProviderResult<SymbolInformation[]>;\n}\n\nexport interface CodeActionProvider {\n    provideCodeActions(params: CodeActionParams, token: CancellationToken): ProviderResult<(Command | CodeAction)[]>;\n}\n\nexport interface CodeLensProvider {\n    provideCodeLenses(params: CodeLensParams, token: CancellationToken): ProviderResult<CodeLens[]>;\n    resolveCodeLens?(codeLens: CodeLens, token: CancellationToken): ProviderResult<CodeLens>;\n}\n\nexport interface DocumentFormattingEditProvider {\n    provideDocumentFormattingEdits(params: DocumentFormattingParams, token: CancellationToken): ProviderResult<TextEdit[]>;\n}\n\nexport interface DocumentRangeFormattingEditProvider {\n    provideDocumentRangeFormattingEdits(params: DocumentRangeFormattingParams, token: CancellationToken): ProviderResult<TextEdit[]>;\n}\n\nexport interface OnTypeFormattingEditProvider {\n    provideOnTypeFormattingEdits(params: DocumentOnTypeFormattingParams, token: CancellationToken): ProviderResult<TextEdit[]>;\n}\n\nexport interface RenameProvider {\n    provideRenameEdits(params: RenameParams, token: CancellationToken): ProviderResult<WorkspaceEdit>;\n}\n\nexport interface DocumentLinkProvider {\n    provideDocumentLinks(params: DocumentLinkParams, token: CancellationToken): ProviderResult<DocumentLink[]>;\n    resolveDocumentLink?(link: DocumentLink, token: CancellationToken): ProviderResult<DocumentLink>;\n}\n\nexport interface DocumentIdentifier {\n    uri: string;\n    languageId: string;\n}\nexport namespace DocumentIdentifier {\n    export function is(arg: any): arg is DocumentIdentifier {\n        return !!arg && ('uri' in arg) && ('languageId' in arg);\n    }\n}\n\nexport interface ImplementationProvider {\n    provideImplementation(params: TextDocumentPositionParams, token: CancellationToken): ProviderResult<Definition>;\n}\n\nexport interface TypeDefinitionProvider {\n    provideTypeDefinition(params: TextDocumentPositionParams, token: CancellationToken): ProviderResult<Definition>;\n}\n\nexport interface DeclarationProvider {\n    provideDeclaration(params: TextDocumentPositionParams, token: CancellationToken): ProviderResult<Declaration>;\n}\n\nexport interface DocumentColorProvider {\n    provideDocumentColors(params: DocumentColorParams, token: CancellationToken): ProviderResult<ColorInformation[]>;\n    provideColorPresentations(params: ColorPresentationParams, token: CancellationToken): ProviderResult<ColorPresentation[]>;\n}\n\nexport interface FoldingRangeProvider {\n    provideFoldingRanges(params: FoldingRangeRequestParam, token: CancellationToken): ProviderResult<FoldingRange[]>;\n}\n\nexport interface SelectionRangeProvider {\n    provideSelectionRanges(params: SelectionRangeParams, token: CancellationToken): ProviderResult<SelectionRange[]>;\n}\n\nexport interface Languages {\n    match(selector: DocumentSelector, document: DocumentIdentifier): boolean;\n    createDiagnosticCollection?(name?: string): DiagnosticCollection;\n    registerCompletionItemProvider?(selector: DocumentSelector, provider: CompletionItemProvider, ...triggerCharacters: string[]): Disposable;\n    registerHoverProvider?(selector: DocumentSelector, provider: HoverProvider): Disposable;\n    registerSignatureHelpProvider?(selector: DocumentSelector, provider: SignatureHelpProvider): Disposable;\n    registerDefinitionProvider?(selector: DocumentSelector, provider: DefinitionProvider): Disposable;\n    registerReferenceProvider?(selector: DocumentSelector, provider: ReferenceProvider): Disposable;\n    registerDocumentHighlightProvider?(selector: DocumentSelector, provider: DocumentHighlightProvider): Disposable;\n    registerDocumentSymbolProvider?(selector: DocumentSelector, provider: DocumentSymbolProvider): Disposable;\n    registerWorkspaceSymbolProvider?(provider: WorkspaceSymbolProvider): Disposable;\n    registerCodeActionsProvider?(selector: DocumentSelector, provider: CodeActionProvider): Disposable;\n    registerCodeLensProvider?(selector: DocumentSelector, provider: CodeLensProvider): Disposable;\n    registerDocumentFormattingEditProvider?(selector: DocumentSelector, provider: DocumentFormattingEditProvider): Disposable;\n    registerDocumentRangeFormattingEditProvider?(selector: DocumentSelector, provider: DocumentRangeFormattingEditProvider): Disposable;\n    registerOnTypeFormattingEditProvider?(selector: DocumentSelector, provider: OnTypeFormattingEditProvider, firstTriggerCharacter: string, ...moreTriggerCharacter: string[]): Disposable;\n    registerRenameProvider?(selector: DocumentSelector, provider: RenameProvider): Disposable;\n    registerDocumentLinkProvider?(selector: DocumentSelector, provider: DocumentLinkProvider): Disposable;\n    registerImplementationProvider?(selector: DocumentSelector, provider: ImplementationProvider): Disposable;\n    registerTypeDefinitionProvider?(selector: DocumentSelector, provider: TypeDefinitionProvider): Disposable;\n    registerDeclarationProvider?(selector: DocumentSelector, provider: DeclarationProvider): Disposable;\n    registerColorProvider?(selector: DocumentSelector, provider: DocumentColorProvider): Disposable;\n    registerFoldingRangeProvider?(selector: DocumentSelector, provider: FoldingRangeProvider): Disposable;\n    registerSelectionRangeProvider?(selector: DocumentSelector, provider: SelectionRangeProvider): Disposable;\n}\n\nexport interface TextDocumentDidChangeEvent {\n    readonly textDocument: TextDocument;\n    readonly contentChanges: TextDocumentContentChangeEvent[];\n}\n\nexport interface TextDocumentWillSaveEvent {\n    readonly textDocument: TextDocument;\n    readonly reason: TextDocumentSaveReason;\n    waitUntil?(PromiseLike: PromiseLike<TextEdit[]>): void;\n}\n\nexport enum ConfigurationTarget {\n    Global = 1,\n    Workspace = 2,\n    WorkspaceFolder = 3\n}\n\nexport interface WorkspaceConfiguration {\n    toJSON(): any;\n    get<T>(section: string): T | undefined;\n    get<T>(section: string, defaultValue: T): T;\n    has(section: string): boolean;\n    readonly [key: string]: any;\n}\n\nexport interface FileSystemWatcher extends Disposable {\n    readonly onDidCreate: Event<Uri>;\n    readonly onDidChange: Event<Uri>;\n    readonly onDidDelete: Event<Uri>;\n}\n\nexport interface ConfigurationChangeEvent {\n    affectsConfiguration(section: string): boolean;\n}\nexport interface Configurations {\n    getConfiguration(section?: string, resource?: string): WorkspaceConfiguration;\n    readonly onDidChangeConfiguration: Event<ConfigurationChangeEvent>;\n}\n\nexport interface Workspace {\n    readonly capabilities?: WorkspaceClientCapabilities;\n    readonly rootPath?: string | null;\n    readonly rootUri: string | null;\n    readonly workspaceFolders?: typeof import('vscode').workspace.workspaceFolders;\n    readonly onDidChangeWorkspaceFolders?: typeof import('vscode').workspace.onDidChangeWorkspaceFolders\n    readonly textDocuments: TextDocument[];\n    readonly onDidOpenTextDocument: Event<TextDocument>;\n    readonly onDidCloseTextDocument: Event<TextDocument>;\n    readonly onDidChangeTextDocument: Event<DidChangeTextDocumentParams>;\n    readonly configurations?: Configurations;\n    readonly onWillSaveTextDocument?: Event<TextDocumentWillSaveEvent>;\n    readonly onDidSaveTextDocument?: Event<TextDocument>;\n    applyEdit(changes: WorkspaceEdit): PromiseLike<boolean>;\n    createFileSystemWatcher?(globPattern: string, ignoreCreateEvents?: boolean, ignoreChangeEvents?: boolean, ignoreDeleteEvents?: boolean): FileSystemWatcher;\n}\n\nexport interface Commands {\n    registerCommand(command: string, callback: (...args: any[]) => any, thisArg?: any): Disposable;\n}\n\nexport interface OutputChannel extends Disposable {\n    append(value: string): void;\n    appendLine(line: string): void;\n    show(preserveFocus?: boolean): void;\n}\n\nexport interface Window {\n    showMessage<T extends MessageActionItem>(type: MessageType, message: string, ...actions: T[]): PromiseLike<T | undefined>;\n    createOutputChannel?(name: string): OutputChannel;\n    withProgress?: typeof import('vscode').window.withProgress\n}","var v1 = require('./v1');\nvar v4 = require('./v4');\n\nvar uuid = v4;\nuuid.v1 = v1;\nuuid.v4 = v4;\n\nmodule.exports = uuid;\n","/**\n * Convert array of 16 byte values to UUID string format of the form:\n * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n */\nvar byteToHex = [];\nfor (var i = 0; i < 256; ++i) {\n  byteToHex[i] = (i + 0x100).toString(16).substr(1);\n}\n\nfunction bytesToUuid(buf, offset) {\n  var i = offset || 0;\n  var bth = byteToHex;\n  // join used to fix memory issue caused by concatenation: https://bugs.chromium.org/p/v8/issues/detail?id=3175#c4\n  return ([\n    bth[buf[i++]], bth[buf[i++]],\n    bth[buf[i++]], bth[buf[i++]], '-',\n    bth[buf[i++]], bth[buf[i++]], '-',\n    bth[buf[i++]], bth[buf[i++]], '-',\n    bth[buf[i++]], bth[buf[i++]], '-',\n    bth[buf[i++]], bth[buf[i++]],\n    bth[buf[i++]], bth[buf[i++]],\n    bth[buf[i++]], bth[buf[i++]]\n  ]).join('');\n}\n\nmodule.exports = bytesToUuid;\n","// Unique ID creation requires a high quality random # generator.  In the\n// browser this is a little complicated due to unknown quality of Math.random()\n// and inconsistent support for the `crypto` API.  We do the best we can via\n// feature-detection\n\n// getRandomValues needs to be invoked in a context where \"this\" is a Crypto\n// implementation. Also, find the complete implementation of crypto on IE11.\nvar getRandomValues = (typeof(crypto) != 'undefined' && crypto.getRandomValues && crypto.getRandomValues.bind(crypto)) ||\n                      (typeof(msCrypto) != 'undefined' && typeof window.msCrypto.getRandomValues == 'function' && msCrypto.getRandomValues.bind(msCrypto));\n\nif (getRandomValues) {\n  // WHATWG crypto RNG - http://wiki.whatwg.org/wiki/Crypto\n  var rnds8 = new Uint8Array(16); // eslint-disable-line no-undef\n\n  module.exports = function whatwgRNG() {\n    getRandomValues(rnds8);\n    return rnds8;\n  };\n} else {\n  // Math.random()-based (RNG)\n  //\n  // If all else fails, use Math.random().  It's fast, but is of unspecified\n  // quality.\n  var rnds = new Array(16);\n\n  module.exports = function mathRNG() {\n    for (var i = 0, r; i < 16; i++) {\n      if ((i & 0x03) === 0) r = Math.random() * 0x100000000;\n      rnds[i] = r >>> ((i & 0x03) << 3) & 0xff;\n    }\n\n    return rnds;\n  };\n}\n","var rng = require('./lib/rng');\nvar bytesToUuid = require('./lib/bytesToUuid');\n\n// **`v1()` - Generate time-based UUID**\n//\n// Inspired by https://github.com/LiosK/UUID.js\n// and http://docs.python.org/library/uuid.html\n\nvar _nodeId;\nvar _clockseq;\n\n// Previous uuid creation time\nvar _lastMSecs = 0;\nvar _lastNSecs = 0;\n\n// See https://github.com/uuidjs/uuid for API details\nfunction v1(options, buf, offset) {\n  var i = buf && offset || 0;\n  var b = buf || [];\n\n  options = options || {};\n  var node = options.node || _nodeId;\n  var clockseq = options.clockseq !== undefined ? options.clockseq : _clockseq;\n\n  // node and clockseq need to be initialized to random values if they're not\n  // specified.  We do this lazily to minimize issues related to insufficient\n  // system entropy.  See #189\n  if (node == null || clockseq == null) {\n    var seedBytes = rng();\n    if (node == null) {\n      // Per 4.5, create and 48-bit node id, (47 random bits + multicast bit = 1)\n      node = _nodeId = [\n        seedBytes[0] | 0x01,\n        seedBytes[1], seedBytes[2], seedBytes[3], seedBytes[4], seedBytes[5]\n      ];\n    }\n    if (clockseq == null) {\n      // Per 4.2.2, randomize (14 bit) clockseq\n      clockseq = _clockseq = (seedBytes[6] << 8 | seedBytes[7]) & 0x3fff;\n    }\n  }\n\n  // UUID timestamps are 100 nano-second units since the Gregorian epoch,\n  // (1582-10-15 00:00).  JSNumbers aren't precise enough for this, so\n  // time is handled internally as 'msecs' (integer milliseconds) and 'nsecs'\n  // (100-nanoseconds offset from msecs) since unix epoch, 1970-01-01 00:00.\n  var msecs = options.msecs !== undefined ? options.msecs : new Date().getTime();\n\n  // Per 4.2.1.2, use count of uuid's generated during the current clock\n  // cycle to simulate higher resolution clock\n  var nsecs = options.nsecs !== undefined ? options.nsecs : _lastNSecs + 1;\n\n  // Time since last uuid creation (in msecs)\n  var dt = (msecs - _lastMSecs) + (nsecs - _lastNSecs)/10000;\n\n  // Per 4.2.1.2, Bump clockseq on clock regression\n  if (dt < 0 && options.clockseq === undefined) {\n    clockseq = clockseq + 1 & 0x3fff;\n  }\n\n  // Reset nsecs if clock regresses (new clockseq) or we've moved onto a new\n  // time interval\n  if ((dt < 0 || msecs > _lastMSecs) && options.nsecs === undefined) {\n    nsecs = 0;\n  }\n\n  // Per 4.2.1.2 Throw error if too many uuids are requested\n  if (nsecs >= 10000) {\n    throw new Error('uuid.v1(): Can\\'t create more than 10M uuids/sec');\n  }\n\n  _lastMSecs = msecs;\n  _lastNSecs = nsecs;\n  _clockseq = clockseq;\n\n  // Per 4.1.4 - Convert from unix epoch to Gregorian epoch\n  msecs += 12219292800000;\n\n  // `time_low`\n  var tl = ((msecs & 0xfffffff) * 10000 + nsecs) % 0x100000000;\n  b[i++] = tl >>> 24 & 0xff;\n  b[i++] = tl >>> 16 & 0xff;\n  b[i++] = tl >>> 8 & 0xff;\n  b[i++] = tl & 0xff;\n\n  // `time_mid`\n  var tmh = (msecs / 0x100000000 * 10000) & 0xfffffff;\n  b[i++] = tmh >>> 8 & 0xff;\n  b[i++] = tmh & 0xff;\n\n  // `time_high_and_version`\n  b[i++] = tmh >>> 24 & 0xf | 0x10; // include version\n  b[i++] = tmh >>> 16 & 0xff;\n\n  // `clock_seq_hi_and_reserved` (Per 4.2.2 - include variant)\n  b[i++] = clockseq >>> 8 | 0x80;\n\n  // `clock_seq_low`\n  b[i++] = clockseq & 0xff;\n\n  // `node`\n  for (var n = 0; n < 6; ++n) {\n    b[i + n] = node[n];\n  }\n\n  return buf ? buf : bytesToUuid(b);\n}\n\nmodule.exports = v1;\n","var rng = require('./lib/rng');\nvar bytesToUuid = require('./lib/bytesToUuid');\n\nfunction v4(options, buf, offset) {\n  var i = buf && offset || 0;\n\n  if (typeof(options) == 'string') {\n    buf = options === 'binary' ? new Array(16) : null;\n    options = null;\n  }\n  options = options || {};\n\n  var rnds = options.random || (options.rng || rng)();\n\n  // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n  rnds[6] = (rnds[6] & 0x0f) | 0x40;\n  rnds[8] = (rnds[8] & 0x3f) | 0x80;\n\n  // Copy bytes to buffer, if provided\n  if (buf) {\n    for (var ii = 0; ii < 16; ++ii) {\n      buf[i + ii] = rnds[ii];\n    }\n  }\n\n  return buf || bytesToUuid(rnds);\n}\n\nmodule.exports = v4;\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst events_1 = require(\"./events\");\r\nconst Is = require(\"./is\");\r\nvar CancellationToken;\r\n(function (CancellationToken) {\r\n    CancellationToken.None = Object.freeze({\r\n        isCancellationRequested: false,\r\n        onCancellationRequested: events_1.Event.None\r\n    });\r\n    CancellationToken.Cancelled = Object.freeze({\r\n        isCancellationRequested: true,\r\n        onCancellationRequested: events_1.Event.None\r\n    });\r\n    function is(value) {\r\n        let candidate = value;\r\n        return candidate && (candidate === CancellationToken.None\r\n            || candidate === CancellationToken.Cancelled\r\n            || (Is.boolean(candidate.isCancellationRequested) && !!candidate.onCancellationRequested));\r\n    }\r\n    CancellationToken.is = is;\r\n})(CancellationToken = exports.CancellationToken || (exports.CancellationToken = {}));\r\nconst shortcutEvent = Object.freeze(function (callback, context) {\r\n    let handle = setTimeout(callback.bind(context), 0);\r\n    return { dispose() { clearTimeout(handle); } };\r\n});\r\nclass MutableToken {\r\n    constructor() {\r\n        this._isCancelled = false;\r\n    }\r\n    cancel() {\r\n        if (!this._isCancelled) {\r\n            this._isCancelled = true;\r\n            if (this._emitter) {\r\n                this._emitter.fire(undefined);\r\n                this.dispose();\r\n            }\r\n        }\r\n    }\r\n    get isCancellationRequested() {\r\n        return this._isCancelled;\r\n    }\r\n    get onCancellationRequested() {\r\n        if (this._isCancelled) {\r\n            return shortcutEvent;\r\n        }\r\n        if (!this._emitter) {\r\n            this._emitter = new events_1.Emitter();\r\n        }\r\n        return this._emitter.event;\r\n    }\r\n    dispose() {\r\n        if (this._emitter) {\r\n            this._emitter.dispose();\r\n            this._emitter = undefined;\r\n        }\r\n    }\r\n}\r\nclass CancellationTokenSource {\r\n    get token() {\r\n        if (!this._token) {\r\n            // be lazy and create the token only when\r\n            // actually needed\r\n            this._token = new MutableToken();\r\n        }\r\n        return this._token;\r\n    }\r\n    cancel() {\r\n        if (!this._token) {\r\n            // save an object by returning the default\r\n            // cancelled token when cancellation happens\r\n            // before someone asks for the token\r\n            this._token = CancellationToken.Cancelled;\r\n        }\r\n        else {\r\n            this._token.cancel();\r\n        }\r\n    }\r\n    dispose() {\r\n        if (!this._token) {\r\n            // ensure to initialize with an empty token if we had none\r\n            this._token = CancellationToken.None;\r\n        }\r\n        else if (this._token instanceof MutableToken) {\r\n            // actually dispose\r\n            this._token.dispose();\r\n        }\r\n    }\r\n}\r\nexports.CancellationTokenSource = CancellationTokenSource;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar Disposable;\r\n(function (Disposable) {\r\n    function create(func) {\r\n        return {\r\n            dispose: func\r\n        };\r\n    }\r\n    Disposable.create = create;\r\n})(Disposable = exports.Disposable || (exports.Disposable = {}));\r\nvar Event;\r\n(function (Event) {\r\n    const _disposable = { dispose() { } };\r\n    Event.None = function () { return _disposable; };\r\n})(Event = exports.Event || (exports.Event = {}));\r\nclass CallbackList {\r\n    add(callback, context = null, bucket) {\r\n        if (!this._callbacks) {\r\n            this._callbacks = [];\r\n            this._contexts = [];\r\n        }\r\n        this._callbacks.push(callback);\r\n        this._contexts.push(context);\r\n        if (Array.isArray(bucket)) {\r\n            bucket.push({ dispose: () => this.remove(callback, context) });\r\n        }\r\n    }\r\n    remove(callback, context = null) {\r\n        if (!this._callbacks) {\r\n            return;\r\n        }\r\n        var foundCallbackWithDifferentContext = false;\r\n        for (var i = 0, len = this._callbacks.length; i < len; i++) {\r\n            if (this._callbacks[i] === callback) {\r\n                if (this._contexts[i] === context) {\r\n                    // callback & context match => remove it\r\n                    this._callbacks.splice(i, 1);\r\n                    this._contexts.splice(i, 1);\r\n                    return;\r\n                }\r\n                else {\r\n                    foundCallbackWithDifferentContext = true;\r\n                }\r\n            }\r\n        }\r\n        if (foundCallbackWithDifferentContext) {\r\n            throw new Error('When adding a listener with a context, you should remove it with the same context');\r\n        }\r\n    }\r\n    invoke(...args) {\r\n        if (!this._callbacks) {\r\n            return [];\r\n        }\r\n        var ret = [], callbacks = this._callbacks.slice(0), contexts = this._contexts.slice(0);\r\n        for (var i = 0, len = callbacks.length; i < len; i++) {\r\n            try {\r\n                ret.push(callbacks[i].apply(contexts[i], args));\r\n            }\r\n            catch (e) {\r\n                console.error(e);\r\n            }\r\n        }\r\n        return ret;\r\n    }\r\n    isEmpty() {\r\n        return !this._callbacks || this._callbacks.length === 0;\r\n    }\r\n    dispose() {\r\n        this._callbacks = undefined;\r\n        this._contexts = undefined;\r\n    }\r\n}\r\nclass Emitter {\r\n    constructor(_options) {\r\n        this._options = _options;\r\n    }\r\n    /**\r\n     * For the public to allow to subscribe\r\n     * to events from this Emitter\r\n     */\r\n    get event() {\r\n        if (!this._event) {\r\n            this._event = (listener, thisArgs, disposables) => {\r\n                if (!this._callbacks) {\r\n                    this._callbacks = new CallbackList();\r\n                }\r\n                if (this._options && this._options.onFirstListenerAdd && this._callbacks.isEmpty()) {\r\n                    this._options.onFirstListenerAdd(this);\r\n                }\r\n                this._callbacks.add(listener, thisArgs);\r\n                let result;\r\n                result = {\r\n                    dispose: () => {\r\n                        this._callbacks.remove(listener, thisArgs);\r\n                        result.dispose = Emitter._noop;\r\n                        if (this._options && this._options.onLastListenerRemove && this._callbacks.isEmpty()) {\r\n                            this._options.onLastListenerRemove(this);\r\n                        }\r\n                    }\r\n                };\r\n                if (Array.isArray(disposables)) {\r\n                    disposables.push(result);\r\n                }\r\n                return result;\r\n            };\r\n        }\r\n        return this._event;\r\n    }\r\n    /**\r\n     * To be kept private to fire an event to\r\n     * subscribers\r\n     */\r\n    fire(event) {\r\n        if (this._callbacks) {\r\n            this._callbacks.invoke.call(this._callbacks, event);\r\n        }\r\n    }\r\n    dispose() {\r\n        if (this._callbacks) {\r\n            this._callbacks.dispose();\r\n            this._callbacks = undefined;\r\n        }\r\n    }\r\n}\r\nEmitter._noop = function () { };\r\nexports.Emitter = Emitter;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nfunction boolean(value) {\r\n    return value === true || value === false;\r\n}\r\nexports.boolean = boolean;\r\nfunction string(value) {\r\n    return typeof value === 'string' || value instanceof String;\r\n}\r\nexports.string = string;\r\nfunction number(value) {\r\n    return typeof value === 'number' || value instanceof Number;\r\n}\r\nexports.number = number;\r\nfunction error(value) {\r\n    return value instanceof Error;\r\n}\r\nexports.error = error;\r\nfunction func(value) {\r\n    return typeof value === 'function';\r\n}\r\nexports.func = func;\r\nfunction array(value) {\r\n    return Array.isArray(value);\r\n}\r\nexports.array = array;\r\nfunction stringArray(value) {\r\n    return array(value) && value.every(elem => string(elem));\r\n}\r\nexports.stringArray = stringArray;\r\n","\"use strict\";\r\n/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar Touch;\r\n(function (Touch) {\r\n    Touch.None = 0;\r\n    Touch.First = 1;\r\n    Touch.Last = 2;\r\n})(Touch = exports.Touch || (exports.Touch = {}));\r\nclass LinkedMap {\r\n    constructor() {\r\n        this._map = new Map();\r\n        this._head = undefined;\r\n        this._tail = undefined;\r\n        this._size = 0;\r\n    }\r\n    clear() {\r\n        this._map.clear();\r\n        this._head = undefined;\r\n        this._tail = undefined;\r\n        this._size = 0;\r\n    }\r\n    isEmpty() {\r\n        return !this._head && !this._tail;\r\n    }\r\n    get size() {\r\n        return this._size;\r\n    }\r\n    has(key) {\r\n        return this._map.has(key);\r\n    }\r\n    get(key) {\r\n        const item = this._map.get(key);\r\n        if (!item) {\r\n            return undefined;\r\n        }\r\n        return item.value;\r\n    }\r\n    set(key, value, touch = Touch.None) {\r\n        let item = this._map.get(key);\r\n        if (item) {\r\n            item.value = value;\r\n            if (touch !== Touch.None) {\r\n                this.touch(item, touch);\r\n            }\r\n        }\r\n        else {\r\n            item = { key, value, next: undefined, previous: undefined };\r\n            switch (touch) {\r\n                case Touch.None:\r\n                    this.addItemLast(item);\r\n                    break;\r\n                case Touch.First:\r\n                    this.addItemFirst(item);\r\n                    break;\r\n                case Touch.Last:\r\n                    this.addItemLast(item);\r\n                    break;\r\n                default:\r\n                    this.addItemLast(item);\r\n                    break;\r\n            }\r\n            this._map.set(key, item);\r\n            this._size++;\r\n        }\r\n    }\r\n    delete(key) {\r\n        const item = this._map.get(key);\r\n        if (!item) {\r\n            return false;\r\n        }\r\n        this._map.delete(key);\r\n        this.removeItem(item);\r\n        this._size--;\r\n        return true;\r\n    }\r\n    shift() {\r\n        if (!this._head && !this._tail) {\r\n            return undefined;\r\n        }\r\n        if (!this._head || !this._tail) {\r\n            throw new Error('Invalid list');\r\n        }\r\n        const item = this._head;\r\n        this._map.delete(item.key);\r\n        this.removeItem(item);\r\n        this._size--;\r\n        return item.value;\r\n    }\r\n    forEach(callbackfn, thisArg) {\r\n        let current = this._head;\r\n        while (current) {\r\n            if (thisArg) {\r\n                callbackfn.bind(thisArg)(current.value, current.key, this);\r\n            }\r\n            else {\r\n                callbackfn(current.value, current.key, this);\r\n            }\r\n            current = current.next;\r\n        }\r\n    }\r\n    forEachReverse(callbackfn, thisArg) {\r\n        let current = this._tail;\r\n        while (current) {\r\n            if (thisArg) {\r\n                callbackfn.bind(thisArg)(current.value, current.key, this);\r\n            }\r\n            else {\r\n                callbackfn(current.value, current.key, this);\r\n            }\r\n            current = current.previous;\r\n        }\r\n    }\r\n    values() {\r\n        let result = [];\r\n        let current = this._head;\r\n        while (current) {\r\n            result.push(current.value);\r\n            current = current.next;\r\n        }\r\n        return result;\r\n    }\r\n    keys() {\r\n        let result = [];\r\n        let current = this._head;\r\n        while (current) {\r\n            result.push(current.key);\r\n            current = current.next;\r\n        }\r\n        return result;\r\n    }\r\n    /* JSON RPC run on es5 which has no Symbol.iterator\r\n    public keys(): IterableIterator<K> {\r\n        let current = this._head;\r\n        let iterator: IterableIterator<K> = {\r\n            [Symbol.iterator]() {\r\n                return iterator;\r\n            },\r\n            next():IteratorResult<K> {\r\n                if (current) {\r\n                    let result = { value: current.key, done: false };\r\n                    current = current.next;\r\n                    return result;\r\n                } else {\r\n                    return { value: undefined, done: true };\r\n                }\r\n            }\r\n        };\r\n        return iterator;\r\n    }\r\n\r\n    public values(): IterableIterator<V> {\r\n        let current = this._head;\r\n        let iterator: IterableIterator<V> = {\r\n            [Symbol.iterator]() {\r\n                return iterator;\r\n            },\r\n            next():IteratorResult<V> {\r\n                if (current) {\r\n                    let result = { value: current.value, done: false };\r\n                    current = current.next;\r\n                    return result;\r\n                } else {\r\n                    return { value: undefined, done: true };\r\n                }\r\n            }\r\n        };\r\n        return iterator;\r\n    }\r\n    */\r\n    addItemFirst(item) {\r\n        // First time Insert\r\n        if (!this._head && !this._tail) {\r\n            this._tail = item;\r\n        }\r\n        else if (!this._head) {\r\n            throw new Error('Invalid list');\r\n        }\r\n        else {\r\n            item.next = this._head;\r\n            this._head.previous = item;\r\n        }\r\n        this._head = item;\r\n    }\r\n    addItemLast(item) {\r\n        // First time Insert\r\n        if (!this._head && !this._tail) {\r\n            this._head = item;\r\n        }\r\n        else if (!this._tail) {\r\n            throw new Error('Invalid list');\r\n        }\r\n        else {\r\n            item.previous = this._tail;\r\n            this._tail.next = item;\r\n        }\r\n        this._tail = item;\r\n    }\r\n    removeItem(item) {\r\n        if (item === this._head && item === this._tail) {\r\n            this._head = undefined;\r\n            this._tail = undefined;\r\n        }\r\n        else if (item === this._head) {\r\n            this._head = item.next;\r\n        }\r\n        else if (item === this._tail) {\r\n            this._tail = item.previous;\r\n        }\r\n        else {\r\n            const next = item.next;\r\n            const previous = item.previous;\r\n            if (!next || !previous) {\r\n                throw new Error('Invalid list');\r\n            }\r\n            next.previous = previous;\r\n            previous.next = next;\r\n        }\r\n    }\r\n    touch(item, touch) {\r\n        if (!this._head || !this._tail) {\r\n            throw new Error('Invalid list');\r\n        }\r\n        if ((touch !== Touch.First && touch !== Touch.Last)) {\r\n            return;\r\n        }\r\n        if (touch === Touch.First) {\r\n            if (item === this._head) {\r\n                return;\r\n            }\r\n            const next = item.next;\r\n            const previous = item.previous;\r\n            // Unlink the item\r\n            if (item === this._tail) {\r\n                // previous must be defined since item was not head but is tail\r\n                // So there are more than on item in the map\r\n                previous.next = undefined;\r\n                this._tail = previous;\r\n            }\r\n            else {\r\n                // Both next and previous are not undefined since item was neither head nor tail.\r\n                next.previous = previous;\r\n                previous.next = next;\r\n            }\r\n            // Insert the node at head\r\n            item.previous = undefined;\r\n            item.next = this._head;\r\n            this._head.previous = item;\r\n            this._head = item;\r\n        }\r\n        else if (touch === Touch.Last) {\r\n            if (item === this._tail) {\r\n                return;\r\n            }\r\n            const next = item.next;\r\n            const previous = item.previous;\r\n            // Unlink the item.\r\n            if (item === this._head) {\r\n                // next must be defined since item was not tail but is head\r\n                // So there are more than on item in the map\r\n                next.previous = undefined;\r\n                this._head = next;\r\n            }\r\n            else {\r\n                // Both next and previous are not undefined since item was neither head nor tail.\r\n                next.previous = previous;\r\n                previous.next = next;\r\n            }\r\n            item.next = undefined;\r\n            item.previous = this._tail;\r\n            this._tail.next = item;\r\n            this._tail = item;\r\n        }\r\n    }\r\n}\r\nexports.LinkedMap = LinkedMap;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n/// <reference path=\"./thenable.ts\" />\r\n'use strict';\r\nfunction __export(m) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst Is = require(\"./is\");\r\nconst messages_1 = require(\"./messages\");\r\nexports.RequestType = messages_1.RequestType;\r\nexports.RequestType0 = messages_1.RequestType0;\r\nexports.RequestType1 = messages_1.RequestType1;\r\nexports.RequestType2 = messages_1.RequestType2;\r\nexports.RequestType3 = messages_1.RequestType3;\r\nexports.RequestType4 = messages_1.RequestType4;\r\nexports.RequestType5 = messages_1.RequestType5;\r\nexports.RequestType6 = messages_1.RequestType6;\r\nexports.RequestType7 = messages_1.RequestType7;\r\nexports.RequestType8 = messages_1.RequestType8;\r\nexports.RequestType9 = messages_1.RequestType9;\r\nexports.ResponseError = messages_1.ResponseError;\r\nexports.ErrorCodes = messages_1.ErrorCodes;\r\nexports.NotificationType = messages_1.NotificationType;\r\nexports.NotificationType0 = messages_1.NotificationType0;\r\nexports.NotificationType1 = messages_1.NotificationType1;\r\nexports.NotificationType2 = messages_1.NotificationType2;\r\nexports.NotificationType3 = messages_1.NotificationType3;\r\nexports.NotificationType4 = messages_1.NotificationType4;\r\nexports.NotificationType5 = messages_1.NotificationType5;\r\nexports.NotificationType6 = messages_1.NotificationType6;\r\nexports.NotificationType7 = messages_1.NotificationType7;\r\nexports.NotificationType8 = messages_1.NotificationType8;\r\nexports.NotificationType9 = messages_1.NotificationType9;\r\nconst messageReader_1 = require(\"./messageReader\");\r\nexports.MessageReader = messageReader_1.MessageReader;\r\nexports.StreamMessageReader = messageReader_1.StreamMessageReader;\r\nexports.IPCMessageReader = messageReader_1.IPCMessageReader;\r\nexports.SocketMessageReader = messageReader_1.SocketMessageReader;\r\nconst messageWriter_1 = require(\"./messageWriter\");\r\nexports.MessageWriter = messageWriter_1.MessageWriter;\r\nexports.StreamMessageWriter = messageWriter_1.StreamMessageWriter;\r\nexports.IPCMessageWriter = messageWriter_1.IPCMessageWriter;\r\nexports.SocketMessageWriter = messageWriter_1.SocketMessageWriter;\r\nconst events_1 = require(\"./events\");\r\nexports.Disposable = events_1.Disposable;\r\nexports.Event = events_1.Event;\r\nexports.Emitter = events_1.Emitter;\r\nconst cancellation_1 = require(\"./cancellation\");\r\nexports.CancellationTokenSource = cancellation_1.CancellationTokenSource;\r\nexports.CancellationToken = cancellation_1.CancellationToken;\r\nconst linkedMap_1 = require(\"./linkedMap\");\r\n__export(require(\"./pipeSupport\"));\r\n__export(require(\"./socketSupport\"));\r\nvar CancelNotification;\r\n(function (CancelNotification) {\r\n    CancelNotification.type = new messages_1.NotificationType('$/cancelRequest');\r\n})(CancelNotification || (CancelNotification = {}));\r\nvar ProgressNotification;\r\n(function (ProgressNotification) {\r\n    ProgressNotification.type = new messages_1.NotificationType('$/progress');\r\n})(ProgressNotification || (ProgressNotification = {}));\r\nclass ProgressType {\r\n    constructor() {\r\n        this._ = undefined;\r\n    }\r\n}\r\nexports.ProgressType = ProgressType;\r\nexports.NullLogger = Object.freeze({\r\n    error: () => { },\r\n    warn: () => { },\r\n    info: () => { },\r\n    log: () => { }\r\n});\r\nvar Trace;\r\n(function (Trace) {\r\n    Trace[Trace[\"Off\"] = 0] = \"Off\";\r\n    Trace[Trace[\"Messages\"] = 1] = \"Messages\";\r\n    Trace[Trace[\"Verbose\"] = 2] = \"Verbose\";\r\n})(Trace = exports.Trace || (exports.Trace = {}));\r\n(function (Trace) {\r\n    function fromString(value) {\r\n        value = value.toLowerCase();\r\n        switch (value) {\r\n            case 'off':\r\n                return Trace.Off;\r\n            case 'messages':\r\n                return Trace.Messages;\r\n            case 'verbose':\r\n                return Trace.Verbose;\r\n            default:\r\n                return Trace.Off;\r\n        }\r\n    }\r\n    Trace.fromString = fromString;\r\n    function toString(value) {\r\n        switch (value) {\r\n            case Trace.Off:\r\n                return 'off';\r\n            case Trace.Messages:\r\n                return 'messages';\r\n            case Trace.Verbose:\r\n                return 'verbose';\r\n            default:\r\n                return 'off';\r\n        }\r\n    }\r\n    Trace.toString = toString;\r\n})(Trace = exports.Trace || (exports.Trace = {}));\r\nvar TraceFormat;\r\n(function (TraceFormat) {\r\n    TraceFormat[\"Text\"] = \"text\";\r\n    TraceFormat[\"JSON\"] = \"json\";\r\n})(TraceFormat = exports.TraceFormat || (exports.TraceFormat = {}));\r\n(function (TraceFormat) {\r\n    function fromString(value) {\r\n        value = value.toLowerCase();\r\n        if (value === 'json') {\r\n            return TraceFormat.JSON;\r\n        }\r\n        else {\r\n            return TraceFormat.Text;\r\n        }\r\n    }\r\n    TraceFormat.fromString = fromString;\r\n})(TraceFormat = exports.TraceFormat || (exports.TraceFormat = {}));\r\nvar SetTraceNotification;\r\n(function (SetTraceNotification) {\r\n    SetTraceNotification.type = new messages_1.NotificationType('$/setTraceNotification');\r\n})(SetTraceNotification = exports.SetTraceNotification || (exports.SetTraceNotification = {}));\r\nvar LogTraceNotification;\r\n(function (LogTraceNotification) {\r\n    LogTraceNotification.type = new messages_1.NotificationType('$/logTraceNotification');\r\n})(LogTraceNotification = exports.LogTraceNotification || (exports.LogTraceNotification = {}));\r\nvar ConnectionErrors;\r\n(function (ConnectionErrors) {\r\n    /**\r\n     * The connection is closed.\r\n     */\r\n    ConnectionErrors[ConnectionErrors[\"Closed\"] = 1] = \"Closed\";\r\n    /**\r\n     * The connection got disposed.\r\n     */\r\n    ConnectionErrors[ConnectionErrors[\"Disposed\"] = 2] = \"Disposed\";\r\n    /**\r\n     * The connection is already in listening mode.\r\n     */\r\n    ConnectionErrors[ConnectionErrors[\"AlreadyListening\"] = 3] = \"AlreadyListening\";\r\n})(ConnectionErrors = exports.ConnectionErrors || (exports.ConnectionErrors = {}));\r\nclass ConnectionError extends Error {\r\n    constructor(code, message) {\r\n        super(message);\r\n        this.code = code;\r\n        Object.setPrototypeOf(this, ConnectionError.prototype);\r\n    }\r\n}\r\nexports.ConnectionError = ConnectionError;\r\nvar ConnectionStrategy;\r\n(function (ConnectionStrategy) {\r\n    function is(value) {\r\n        let candidate = value;\r\n        return candidate && Is.func(candidate.cancelUndispatched);\r\n    }\r\n    ConnectionStrategy.is = is;\r\n})(ConnectionStrategy = exports.ConnectionStrategy || (exports.ConnectionStrategy = {}));\r\nvar ConnectionState;\r\n(function (ConnectionState) {\r\n    ConnectionState[ConnectionState[\"New\"] = 1] = \"New\";\r\n    ConnectionState[ConnectionState[\"Listening\"] = 2] = \"Listening\";\r\n    ConnectionState[ConnectionState[\"Closed\"] = 3] = \"Closed\";\r\n    ConnectionState[ConnectionState[\"Disposed\"] = 4] = \"Disposed\";\r\n})(ConnectionState || (ConnectionState = {}));\r\nfunction _createMessageConnection(messageReader, messageWriter, logger, strategy) {\r\n    let sequenceNumber = 0;\r\n    let notificationSquenceNumber = 0;\r\n    let unknownResponseSquenceNumber = 0;\r\n    const version = '2.0';\r\n    let starRequestHandler = undefined;\r\n    let requestHandlers = Object.create(null);\r\n    let starNotificationHandler = undefined;\r\n    let notificationHandlers = Object.create(null);\r\n    let progressHandlers = new Map();\r\n    let timer;\r\n    let messageQueue = new linkedMap_1.LinkedMap();\r\n    let responsePromises = Object.create(null);\r\n    let requestTokens = Object.create(null);\r\n    let trace = Trace.Off;\r\n    let traceFormat = TraceFormat.Text;\r\n    let tracer;\r\n    let state = ConnectionState.New;\r\n    let errorEmitter = new events_1.Emitter();\r\n    let closeEmitter = new events_1.Emitter();\r\n    let unhandledNotificationEmitter = new events_1.Emitter();\r\n    let unhandledProgressEmitter = new events_1.Emitter();\r\n    let disposeEmitter = new events_1.Emitter();\r\n    function createRequestQueueKey(id) {\r\n        return 'req-' + id.toString();\r\n    }\r\n    function createResponseQueueKey(id) {\r\n        if (id === null) {\r\n            return 'res-unknown-' + (++unknownResponseSquenceNumber).toString();\r\n        }\r\n        else {\r\n            return 'res-' + id.toString();\r\n        }\r\n    }\r\n    function createNotificationQueueKey() {\r\n        return 'not-' + (++notificationSquenceNumber).toString();\r\n    }\r\n    function addMessageToQueue(queue, message) {\r\n        if (messages_1.isRequestMessage(message)) {\r\n            queue.set(createRequestQueueKey(message.id), message);\r\n        }\r\n        else if (messages_1.isResponseMessage(message)) {\r\n            queue.set(createResponseQueueKey(message.id), message);\r\n        }\r\n        else {\r\n            queue.set(createNotificationQueueKey(), message);\r\n        }\r\n    }\r\n    function cancelUndispatched(_message) {\r\n        return undefined;\r\n    }\r\n    function isListening() {\r\n        return state === ConnectionState.Listening;\r\n    }\r\n    function isClosed() {\r\n        return state === ConnectionState.Closed;\r\n    }\r\n    function isDisposed() {\r\n        return state === ConnectionState.Disposed;\r\n    }\r\n    function closeHandler() {\r\n        if (state === ConnectionState.New || state === ConnectionState.Listening) {\r\n            state = ConnectionState.Closed;\r\n            closeEmitter.fire(undefined);\r\n        }\r\n        // If the connection is disposed don't sent close events.\r\n    }\r\n    ;\r\n    function readErrorHandler(error) {\r\n        errorEmitter.fire([error, undefined, undefined]);\r\n    }\r\n    function writeErrorHandler(data) {\r\n        errorEmitter.fire(data);\r\n    }\r\n    messageReader.onClose(closeHandler);\r\n    messageReader.onError(readErrorHandler);\r\n    messageWriter.onClose(closeHandler);\r\n    messageWriter.onError(writeErrorHandler);\r\n    function triggerMessageQueue() {\r\n        if (timer || messageQueue.size === 0) {\r\n            return;\r\n        }\r\n        timer = setImmediate(() => {\r\n            timer = undefined;\r\n            processMessageQueue();\r\n        });\r\n    }\r\n    function processMessageQueue() {\r\n        if (messageQueue.size === 0) {\r\n            return;\r\n        }\r\n        let message = messageQueue.shift();\r\n        try {\r\n            if (messages_1.isRequestMessage(message)) {\r\n                handleRequest(message);\r\n            }\r\n            else if (messages_1.isNotificationMessage(message)) {\r\n                handleNotification(message);\r\n            }\r\n            else if (messages_1.isResponseMessage(message)) {\r\n                handleResponse(message);\r\n            }\r\n            else {\r\n                handleInvalidMessage(message);\r\n            }\r\n        }\r\n        finally {\r\n            triggerMessageQueue();\r\n        }\r\n    }\r\n    let callback = (message) => {\r\n        try {\r\n            // We have received a cancellation message. Check if the message is still in the queue\r\n            // and cancel it if allowed to do so.\r\n            if (messages_1.isNotificationMessage(message) && message.method === CancelNotification.type.method) {\r\n                let key = createRequestQueueKey(message.params.id);\r\n                let toCancel = messageQueue.get(key);\r\n                if (messages_1.isRequestMessage(toCancel)) {\r\n                    let response = strategy && strategy.cancelUndispatched ? strategy.cancelUndispatched(toCancel, cancelUndispatched) : cancelUndispatched(toCancel);\r\n                    if (response && (response.error !== void 0 || response.result !== void 0)) {\r\n                        messageQueue.delete(key);\r\n                        response.id = toCancel.id;\r\n                        traceSendingResponse(response, message.method, Date.now());\r\n                        messageWriter.write(response);\r\n                        return;\r\n                    }\r\n                }\r\n            }\r\n            addMessageToQueue(messageQueue, message);\r\n        }\r\n        finally {\r\n            triggerMessageQueue();\r\n        }\r\n    };\r\n    function handleRequest(requestMessage) {\r\n        if (isDisposed()) {\r\n            // we return here silently since we fired an event when the\r\n            // connection got disposed.\r\n            return;\r\n        }\r\n        function reply(resultOrError, method, startTime) {\r\n            let message = {\r\n                jsonrpc: version,\r\n                id: requestMessage.id\r\n            };\r\n            if (resultOrError instanceof messages_1.ResponseError) {\r\n                message.error = resultOrError.toJson();\r\n            }\r\n            else {\r\n                message.result = resultOrError === void 0 ? null : resultOrError;\r\n            }\r\n            traceSendingResponse(message, method, startTime);\r\n            messageWriter.write(message);\r\n        }\r\n        function replyError(error, method, startTime) {\r\n            let message = {\r\n                jsonrpc: version,\r\n                id: requestMessage.id,\r\n                error: error.toJson()\r\n            };\r\n            traceSendingResponse(message, method, startTime);\r\n            messageWriter.write(message);\r\n        }\r\n        function replySuccess(result, method, startTime) {\r\n            // The JSON RPC defines that a response must either have a result or an error\r\n            // So we can't treat undefined as a valid response result.\r\n            if (result === void 0) {\r\n                result = null;\r\n            }\r\n            let message = {\r\n                jsonrpc: version,\r\n                id: requestMessage.id,\r\n                result: result\r\n            };\r\n            traceSendingResponse(message, method, startTime);\r\n            messageWriter.write(message);\r\n        }\r\n        traceReceivedRequest(requestMessage);\r\n        let element = requestHandlers[requestMessage.method];\r\n        let type;\r\n        let requestHandler;\r\n        if (element) {\r\n            type = element.type;\r\n            requestHandler = element.handler;\r\n        }\r\n        let startTime = Date.now();\r\n        if (requestHandler || starRequestHandler) {\r\n            let cancellationSource = new cancellation_1.CancellationTokenSource();\r\n            let tokenKey = String(requestMessage.id);\r\n            requestTokens[tokenKey] = cancellationSource;\r\n            try {\r\n                let handlerResult;\r\n                if (requestMessage.params === void 0 || (type !== void 0 && type.numberOfParams === 0)) {\r\n                    handlerResult = requestHandler\r\n                        ? requestHandler(cancellationSource.token)\r\n                        : starRequestHandler(requestMessage.method, cancellationSource.token);\r\n                }\r\n                else if (Is.array(requestMessage.params) && (type === void 0 || type.numberOfParams > 1)) {\r\n                    handlerResult = requestHandler\r\n                        ? requestHandler(...requestMessage.params, cancellationSource.token)\r\n                        : starRequestHandler(requestMessage.method, ...requestMessage.params, cancellationSource.token);\r\n                }\r\n                else {\r\n                    handlerResult = requestHandler\r\n                        ? requestHandler(requestMessage.params, cancellationSource.token)\r\n                        : starRequestHandler(requestMessage.method, requestMessage.params, cancellationSource.token);\r\n                }\r\n                let promise = handlerResult;\r\n                if (!handlerResult) {\r\n                    delete requestTokens[tokenKey];\r\n                    replySuccess(handlerResult, requestMessage.method, startTime);\r\n                }\r\n                else if (promise.then) {\r\n                    promise.then((resultOrError) => {\r\n                        delete requestTokens[tokenKey];\r\n                        reply(resultOrError, requestMessage.method, startTime);\r\n                    }, error => {\r\n                        delete requestTokens[tokenKey];\r\n                        if (error instanceof messages_1.ResponseError) {\r\n                            replyError(error, requestMessage.method, startTime);\r\n                        }\r\n                        else if (error && Is.string(error.message)) {\r\n                            replyError(new messages_1.ResponseError(messages_1.ErrorCodes.InternalError, `Request ${requestMessage.method} failed with message: ${error.message}`), requestMessage.method, startTime);\r\n                        }\r\n                        else {\r\n                            replyError(new messages_1.ResponseError(messages_1.ErrorCodes.InternalError, `Request ${requestMessage.method} failed unexpectedly without providing any details.`), requestMessage.method, startTime);\r\n                        }\r\n                    });\r\n                }\r\n                else {\r\n                    delete requestTokens[tokenKey];\r\n                    reply(handlerResult, requestMessage.method, startTime);\r\n                }\r\n            }\r\n            catch (error) {\r\n                delete requestTokens[tokenKey];\r\n                if (error instanceof messages_1.ResponseError) {\r\n                    reply(error, requestMessage.method, startTime);\r\n                }\r\n                else if (error && Is.string(error.message)) {\r\n                    replyError(new messages_1.ResponseError(messages_1.ErrorCodes.InternalError, `Request ${requestMessage.method} failed with message: ${error.message}`), requestMessage.method, startTime);\r\n                }\r\n                else {\r\n                    replyError(new messages_1.ResponseError(messages_1.ErrorCodes.InternalError, `Request ${requestMessage.method} failed unexpectedly without providing any details.`), requestMessage.method, startTime);\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            replyError(new messages_1.ResponseError(messages_1.ErrorCodes.MethodNotFound, `Unhandled method ${requestMessage.method}`), requestMessage.method, startTime);\r\n        }\r\n    }\r\n    function handleResponse(responseMessage) {\r\n        if (isDisposed()) {\r\n            // See handle request.\r\n            return;\r\n        }\r\n        if (responseMessage.id === null) {\r\n            if (responseMessage.error) {\r\n                logger.error(`Received response message without id: Error is: \\n${JSON.stringify(responseMessage.error, undefined, 4)}`);\r\n            }\r\n            else {\r\n                logger.error(`Received response message without id. No further error information provided.`);\r\n            }\r\n        }\r\n        else {\r\n            let key = String(responseMessage.id);\r\n            let responsePromise = responsePromises[key];\r\n            traceReceivedResponse(responseMessage, responsePromise);\r\n            if (responsePromise) {\r\n                delete responsePromises[key];\r\n                try {\r\n                    if (responseMessage.error) {\r\n                        let error = responseMessage.error;\r\n                        responsePromise.reject(new messages_1.ResponseError(error.code, error.message, error.data));\r\n                    }\r\n                    else if (responseMessage.result !== void 0) {\r\n                        responsePromise.resolve(responseMessage.result);\r\n                    }\r\n                    else {\r\n                        throw new Error('Should never happen.');\r\n                    }\r\n                }\r\n                catch (error) {\r\n                    if (error.message) {\r\n                        logger.error(`Response handler '${responsePromise.method}' failed with message: ${error.message}`);\r\n                    }\r\n                    else {\r\n                        logger.error(`Response handler '${responsePromise.method}' failed unexpectedly.`);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n    function handleNotification(message) {\r\n        if (isDisposed()) {\r\n            // See handle request.\r\n            return;\r\n        }\r\n        let type = undefined;\r\n        let notificationHandler;\r\n        if (message.method === CancelNotification.type.method) {\r\n            notificationHandler = (params) => {\r\n                let id = params.id;\r\n                let source = requestTokens[String(id)];\r\n                if (source) {\r\n                    source.cancel();\r\n                }\r\n            };\r\n        }\r\n        else {\r\n            let element = notificationHandlers[message.method];\r\n            if (element) {\r\n                notificationHandler = element.handler;\r\n                type = element.type;\r\n            }\r\n        }\r\n        if (notificationHandler || starNotificationHandler) {\r\n            try {\r\n                traceReceivedNotification(message);\r\n                if (message.params === void 0 || (type !== void 0 && type.numberOfParams === 0)) {\r\n                    notificationHandler ? notificationHandler() : starNotificationHandler(message.method);\r\n                }\r\n                else if (Is.array(message.params) && (type === void 0 || type.numberOfParams > 1)) {\r\n                    notificationHandler ? notificationHandler(...message.params) : starNotificationHandler(message.method, ...message.params);\r\n                }\r\n                else {\r\n                    notificationHandler ? notificationHandler(message.params) : starNotificationHandler(message.method, message.params);\r\n                }\r\n            }\r\n            catch (error) {\r\n                if (error.message) {\r\n                    logger.error(`Notification handler '${message.method}' failed with message: ${error.message}`);\r\n                }\r\n                else {\r\n                    logger.error(`Notification handler '${message.method}' failed unexpectedly.`);\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            unhandledNotificationEmitter.fire(message);\r\n        }\r\n    }\r\n    function handleInvalidMessage(message) {\r\n        if (!message) {\r\n            logger.error('Received empty message.');\r\n            return;\r\n        }\r\n        logger.error(`Received message which is neither a response nor a notification message:\\n${JSON.stringify(message, null, 4)}`);\r\n        // Test whether we find an id to reject the promise\r\n        let responseMessage = message;\r\n        if (Is.string(responseMessage.id) || Is.number(responseMessage.id)) {\r\n            let key = String(responseMessage.id);\r\n            let responseHandler = responsePromises[key];\r\n            if (responseHandler) {\r\n                responseHandler.reject(new Error('The received response has neither a result nor an error property.'));\r\n            }\r\n        }\r\n    }\r\n    function traceSendingRequest(message) {\r\n        if (trace === Trace.Off || !tracer) {\r\n            return;\r\n        }\r\n        if (traceFormat === TraceFormat.Text) {\r\n            let data = undefined;\r\n            if (trace === Trace.Verbose && message.params) {\r\n                data = `Params: ${JSON.stringify(message.params, null, 4)}\\n\\n`;\r\n            }\r\n            tracer.log(`Sending request '${message.method} - (${message.id})'.`, data);\r\n        }\r\n        else {\r\n            logLSPMessage('send-request', message);\r\n        }\r\n    }\r\n    function traceSendingNotification(message) {\r\n        if (trace === Trace.Off || !tracer) {\r\n            return;\r\n        }\r\n        if (traceFormat === TraceFormat.Text) {\r\n            let data = undefined;\r\n            if (trace === Trace.Verbose) {\r\n                if (message.params) {\r\n                    data = `Params: ${JSON.stringify(message.params, null, 4)}\\n\\n`;\r\n                }\r\n                else {\r\n                    data = 'No parameters provided.\\n\\n';\r\n                }\r\n            }\r\n            tracer.log(`Sending notification '${message.method}'.`, data);\r\n        }\r\n        else {\r\n            logLSPMessage('send-notification', message);\r\n        }\r\n    }\r\n    function traceSendingResponse(message, method, startTime) {\r\n        if (trace === Trace.Off || !tracer) {\r\n            return;\r\n        }\r\n        if (traceFormat === TraceFormat.Text) {\r\n            let data = undefined;\r\n            if (trace === Trace.Verbose) {\r\n                if (message.error && message.error.data) {\r\n                    data = `Error data: ${JSON.stringify(message.error.data, null, 4)}\\n\\n`;\r\n                }\r\n                else {\r\n                    if (message.result) {\r\n                        data = `Result: ${JSON.stringify(message.result, null, 4)}\\n\\n`;\r\n                    }\r\n                    else if (message.error === void 0) {\r\n                        data = 'No result returned.\\n\\n';\r\n                    }\r\n                }\r\n            }\r\n            tracer.log(`Sending response '${method} - (${message.id})'. Processing request took ${Date.now() - startTime}ms`, data);\r\n        }\r\n        else {\r\n            logLSPMessage('send-response', message);\r\n        }\r\n    }\r\n    function traceReceivedRequest(message) {\r\n        if (trace === Trace.Off || !tracer) {\r\n            return;\r\n        }\r\n        if (traceFormat === TraceFormat.Text) {\r\n            let data = undefined;\r\n            if (trace === Trace.Verbose && message.params) {\r\n                data = `Params: ${JSON.stringify(message.params, null, 4)}\\n\\n`;\r\n            }\r\n            tracer.log(`Received request '${message.method} - (${message.id})'.`, data);\r\n        }\r\n        else {\r\n            logLSPMessage('receive-request', message);\r\n        }\r\n    }\r\n    function traceReceivedNotification(message) {\r\n        if (trace === Trace.Off || !tracer || message.method === LogTraceNotification.type.method) {\r\n            return;\r\n        }\r\n        if (traceFormat === TraceFormat.Text) {\r\n            let data = undefined;\r\n            if (trace === Trace.Verbose) {\r\n                if (message.params) {\r\n                    data = `Params: ${JSON.stringify(message.params, null, 4)}\\n\\n`;\r\n                }\r\n                else {\r\n                    data = 'No parameters provided.\\n\\n';\r\n                }\r\n            }\r\n            tracer.log(`Received notification '${message.method}'.`, data);\r\n        }\r\n        else {\r\n            logLSPMessage('receive-notification', message);\r\n        }\r\n    }\r\n    function traceReceivedResponse(message, responsePromise) {\r\n        if (trace === Trace.Off || !tracer) {\r\n            return;\r\n        }\r\n        if (traceFormat === TraceFormat.Text) {\r\n            let data = undefined;\r\n            if (trace === Trace.Verbose) {\r\n                if (message.error && message.error.data) {\r\n                    data = `Error data: ${JSON.stringify(message.error.data, null, 4)}\\n\\n`;\r\n                }\r\n                else {\r\n                    if (message.result) {\r\n                        data = `Result: ${JSON.stringify(message.result, null, 4)}\\n\\n`;\r\n                    }\r\n                    else if (message.error === void 0) {\r\n                        data = 'No result returned.\\n\\n';\r\n                    }\r\n                }\r\n            }\r\n            if (responsePromise) {\r\n                let error = message.error ? ` Request failed: ${message.error.message} (${message.error.code}).` : '';\r\n                tracer.log(`Received response '${responsePromise.method} - (${message.id})' in ${Date.now() - responsePromise.timerStart}ms.${error}`, data);\r\n            }\r\n            else {\r\n                tracer.log(`Received response ${message.id} without active response promise.`, data);\r\n            }\r\n        }\r\n        else {\r\n            logLSPMessage('receive-response', message);\r\n        }\r\n    }\r\n    function logLSPMessage(type, message) {\r\n        if (!tracer || trace === Trace.Off) {\r\n            return;\r\n        }\r\n        const lspMessage = {\r\n            isLSPMessage: true,\r\n            type,\r\n            message,\r\n            timestamp: Date.now()\r\n        };\r\n        tracer.log(lspMessage);\r\n    }\r\n    function throwIfClosedOrDisposed() {\r\n        if (isClosed()) {\r\n            throw new ConnectionError(ConnectionErrors.Closed, 'Connection is closed.');\r\n        }\r\n        if (isDisposed()) {\r\n            throw new ConnectionError(ConnectionErrors.Disposed, 'Connection is disposed.');\r\n        }\r\n    }\r\n    function throwIfListening() {\r\n        if (isListening()) {\r\n            throw new ConnectionError(ConnectionErrors.AlreadyListening, 'Connection is already listening');\r\n        }\r\n    }\r\n    function throwIfNotListening() {\r\n        if (!isListening()) {\r\n            throw new Error('Call listen() first.');\r\n        }\r\n    }\r\n    function undefinedToNull(param) {\r\n        if (param === void 0) {\r\n            return null;\r\n        }\r\n        else {\r\n            return param;\r\n        }\r\n    }\r\n    function computeMessageParams(type, params) {\r\n        let result;\r\n        let numberOfParams = type.numberOfParams;\r\n        switch (numberOfParams) {\r\n            case 0:\r\n                result = null;\r\n                break;\r\n            case 1:\r\n                result = undefinedToNull(params[0]);\r\n                break;\r\n            default:\r\n                result = [];\r\n                for (let i = 0; i < params.length && i < numberOfParams; i++) {\r\n                    result.push(undefinedToNull(params[i]));\r\n                }\r\n                if (params.length < numberOfParams) {\r\n                    for (let i = params.length; i < numberOfParams; i++) {\r\n                        result.push(null);\r\n                    }\r\n                }\r\n                break;\r\n        }\r\n        return result;\r\n    }\r\n    let connection = {\r\n        sendNotification: (type, ...params) => {\r\n            throwIfClosedOrDisposed();\r\n            let method;\r\n            let messageParams;\r\n            if (Is.string(type)) {\r\n                method = type;\r\n                switch (params.length) {\r\n                    case 0:\r\n                        messageParams = null;\r\n                        break;\r\n                    case 1:\r\n                        messageParams = params[0];\r\n                        break;\r\n                    default:\r\n                        messageParams = params;\r\n                        break;\r\n                }\r\n            }\r\n            else {\r\n                method = type.method;\r\n                messageParams = computeMessageParams(type, params);\r\n            }\r\n            let notificationMessage = {\r\n                jsonrpc: version,\r\n                method: method,\r\n                params: messageParams\r\n            };\r\n            traceSendingNotification(notificationMessage);\r\n            messageWriter.write(notificationMessage);\r\n        },\r\n        onNotification: (type, handler) => {\r\n            throwIfClosedOrDisposed();\r\n            if (Is.func(type)) {\r\n                starNotificationHandler = type;\r\n            }\r\n            else if (handler) {\r\n                if (Is.string(type)) {\r\n                    notificationHandlers[type] = { type: undefined, handler };\r\n                }\r\n                else {\r\n                    notificationHandlers[type.method] = { type, handler };\r\n                }\r\n            }\r\n        },\r\n        onProgress: (_type, token, handler) => {\r\n            if (progressHandlers.has(token)) {\r\n                throw new Error(`Progress handler for token ${token} already registered`);\r\n            }\r\n            progressHandlers.set(token, handler);\r\n            return {\r\n                dispose: () => {\r\n                    progressHandlers.delete(token);\r\n                }\r\n            };\r\n        },\r\n        sendProgress: (_type, token, value) => {\r\n            connection.sendNotification(ProgressNotification.type, { token, value });\r\n        },\r\n        onUnhandledProgress: unhandledProgressEmitter.event,\r\n        sendRequest: (type, ...params) => {\r\n            throwIfClosedOrDisposed();\r\n            throwIfNotListening();\r\n            let method;\r\n            let messageParams;\r\n            let token = undefined;\r\n            if (Is.string(type)) {\r\n                method = type;\r\n                switch (params.length) {\r\n                    case 0:\r\n                        messageParams = null;\r\n                        break;\r\n                    case 1:\r\n                        // The cancellation token is optional so it can also be undefined.\r\n                        if (cancellation_1.CancellationToken.is(params[0])) {\r\n                            messageParams = null;\r\n                            token = params[0];\r\n                        }\r\n                        else {\r\n                            messageParams = undefinedToNull(params[0]);\r\n                        }\r\n                        break;\r\n                    default:\r\n                        const last = params.length - 1;\r\n                        if (cancellation_1.CancellationToken.is(params[last])) {\r\n                            token = params[last];\r\n                            if (params.length === 2) {\r\n                                messageParams = undefinedToNull(params[0]);\r\n                            }\r\n                            else {\r\n                                messageParams = params.slice(0, last).map(value => undefinedToNull(value));\r\n                            }\r\n                        }\r\n                        else {\r\n                            messageParams = params.map(value => undefinedToNull(value));\r\n                        }\r\n                        break;\r\n                }\r\n            }\r\n            else {\r\n                method = type.method;\r\n                messageParams = computeMessageParams(type, params);\r\n                let numberOfParams = type.numberOfParams;\r\n                token = cancellation_1.CancellationToken.is(params[numberOfParams]) ? params[numberOfParams] : undefined;\r\n            }\r\n            let id = sequenceNumber++;\r\n            let result = new Promise((resolve, reject) => {\r\n                let requestMessage = {\r\n                    jsonrpc: version,\r\n                    id: id,\r\n                    method: method,\r\n                    params: messageParams\r\n                };\r\n                let responsePromise = { method: method, timerStart: Date.now(), resolve, reject };\r\n                traceSendingRequest(requestMessage);\r\n                try {\r\n                    messageWriter.write(requestMessage);\r\n                }\r\n                catch (e) {\r\n                    // Writing the message failed. So we need to reject the promise.\r\n                    responsePromise.reject(new messages_1.ResponseError(messages_1.ErrorCodes.MessageWriteError, e.message ? e.message : 'Unknown reason'));\r\n                    responsePromise = null;\r\n                }\r\n                if (responsePromise) {\r\n                    responsePromises[String(id)] = responsePromise;\r\n                }\r\n            });\r\n            if (token) {\r\n                token.onCancellationRequested(() => {\r\n                    connection.sendNotification(CancelNotification.type, { id });\r\n                });\r\n            }\r\n            return result;\r\n        },\r\n        onRequest: (type, handler) => {\r\n            throwIfClosedOrDisposed();\r\n            if (Is.func(type)) {\r\n                starRequestHandler = type;\r\n            }\r\n            else if (handler) {\r\n                if (Is.string(type)) {\r\n                    requestHandlers[type] = { type: undefined, handler };\r\n                }\r\n                else {\r\n                    requestHandlers[type.method] = { type, handler };\r\n                }\r\n            }\r\n        },\r\n        trace: (_value, _tracer, sendNotificationOrTraceOptions) => {\r\n            let _sendNotification = false;\r\n            let _traceFormat = TraceFormat.Text;\r\n            if (sendNotificationOrTraceOptions !== void 0) {\r\n                if (Is.boolean(sendNotificationOrTraceOptions)) {\r\n                    _sendNotification = sendNotificationOrTraceOptions;\r\n                }\r\n                else {\r\n                    _sendNotification = sendNotificationOrTraceOptions.sendNotification || false;\r\n                    _traceFormat = sendNotificationOrTraceOptions.traceFormat || TraceFormat.Text;\r\n                }\r\n            }\r\n            trace = _value;\r\n            traceFormat = _traceFormat;\r\n            if (trace === Trace.Off) {\r\n                tracer = undefined;\r\n            }\r\n            else {\r\n                tracer = _tracer;\r\n            }\r\n            if (_sendNotification && !isClosed() && !isDisposed()) {\r\n                connection.sendNotification(SetTraceNotification.type, { value: Trace.toString(_value) });\r\n            }\r\n        },\r\n        onError: errorEmitter.event,\r\n        onClose: closeEmitter.event,\r\n        onUnhandledNotification: unhandledNotificationEmitter.event,\r\n        onDispose: disposeEmitter.event,\r\n        dispose: () => {\r\n            if (isDisposed()) {\r\n                return;\r\n            }\r\n            state = ConnectionState.Disposed;\r\n            disposeEmitter.fire(undefined);\r\n            let error = new Error('Connection got disposed.');\r\n            Object.keys(responsePromises).forEach((key) => {\r\n                responsePromises[key].reject(error);\r\n            });\r\n            responsePromises = Object.create(null);\r\n            requestTokens = Object.create(null);\r\n            messageQueue = new linkedMap_1.LinkedMap();\r\n            // Test for backwards compatibility\r\n            if (Is.func(messageWriter.dispose)) {\r\n                messageWriter.dispose();\r\n            }\r\n            if (Is.func(messageReader.dispose)) {\r\n                messageReader.dispose();\r\n            }\r\n        },\r\n        listen: () => {\r\n            throwIfClosedOrDisposed();\r\n            throwIfListening();\r\n            state = ConnectionState.Listening;\r\n            messageReader.listen(callback);\r\n        },\r\n        inspect: () => {\r\n            console.log(\"inspect\");\r\n        }\r\n    };\r\n    connection.onNotification(LogTraceNotification.type, (params) => {\r\n        if (trace === Trace.Off || !tracer) {\r\n            return;\r\n        }\r\n        tracer.log(params.message, trace === Trace.Verbose ? params.verbose : undefined);\r\n    });\r\n    connection.onNotification(ProgressNotification.type, (params) => {\r\n        const handler = progressHandlers.get(params.token);\r\n        if (handler) {\r\n            handler(params.value);\r\n        }\r\n        else {\r\n            unhandledProgressEmitter.fire(params);\r\n        }\r\n    });\r\n    return connection;\r\n}\r\nfunction isMessageReader(value) {\r\n    return value.listen !== void 0 && value.read === void 0;\r\n}\r\nfunction isMessageWriter(value) {\r\n    return value.write !== void 0 && value.end === void 0;\r\n}\r\nfunction createMessageConnection(input, output, logger, strategy) {\r\n    if (!logger) {\r\n        logger = exports.NullLogger;\r\n    }\r\n    let reader = isMessageReader(input) ? input : new messageReader_1.StreamMessageReader(input);\r\n    let writer = isMessageWriter(output) ? output : new messageWriter_1.StreamMessageWriter(output);\r\n    return _createMessageConnection(reader, writer, logger, strategy);\r\n}\r\nexports.createMessageConnection = createMessageConnection;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst events_1 = require(\"./events\");\r\nconst Is = require(\"./is\");\r\nlet DefaultSize = 8192;\r\nlet CR = Buffer.from('\\r', 'ascii')[0];\r\nlet LF = Buffer.from('\\n', 'ascii')[0];\r\nlet CRLF = '\\r\\n';\r\nclass MessageBuffer {\r\n    constructor(encoding = 'utf8') {\r\n        this.encoding = encoding;\r\n        this.index = 0;\r\n        this.buffer = Buffer.allocUnsafe(DefaultSize);\r\n    }\r\n    append(chunk) {\r\n        var toAppend = chunk;\r\n        if (typeof (chunk) === 'string') {\r\n            var str = chunk;\r\n            var bufferLen = Buffer.byteLength(str, this.encoding);\r\n            toAppend = Buffer.allocUnsafe(bufferLen);\r\n            toAppend.write(str, 0, bufferLen, this.encoding);\r\n        }\r\n        if (this.buffer.length - this.index >= toAppend.length) {\r\n            toAppend.copy(this.buffer, this.index, 0, toAppend.length);\r\n        }\r\n        else {\r\n            var newSize = (Math.ceil((this.index + toAppend.length) / DefaultSize) + 1) * DefaultSize;\r\n            if (this.index === 0) {\r\n                this.buffer = Buffer.allocUnsafe(newSize);\r\n                toAppend.copy(this.buffer, 0, 0, toAppend.length);\r\n            }\r\n            else {\r\n                this.buffer = Buffer.concat([this.buffer.slice(0, this.index), toAppend], newSize);\r\n            }\r\n        }\r\n        this.index += toAppend.length;\r\n    }\r\n    tryReadHeaders() {\r\n        let result = undefined;\r\n        let current = 0;\r\n        while (current + 3 < this.index && (this.buffer[current] !== CR || this.buffer[current + 1] !== LF || this.buffer[current + 2] !== CR || this.buffer[current + 3] !== LF)) {\r\n            current++;\r\n        }\r\n        // No header / body separator found (e.g CRLFCRLF)\r\n        if (current + 3 >= this.index) {\r\n            return result;\r\n        }\r\n        result = Object.create(null);\r\n        let headers = this.buffer.toString('ascii', 0, current).split(CRLF);\r\n        headers.forEach((header) => {\r\n            let index = header.indexOf(':');\r\n            if (index === -1) {\r\n                throw new Error('Message header must separate key and value using :');\r\n            }\r\n            let key = header.substr(0, index);\r\n            let value = header.substr(index + 1).trim();\r\n            result[key] = value;\r\n        });\r\n        let nextStart = current + 4;\r\n        this.buffer = this.buffer.slice(nextStart);\r\n        this.index = this.index - nextStart;\r\n        return result;\r\n    }\r\n    tryReadContent(length) {\r\n        if (this.index < length) {\r\n            return null;\r\n        }\r\n        let result = this.buffer.toString(this.encoding, 0, length);\r\n        let nextStart = length;\r\n        this.buffer.copy(this.buffer, 0, nextStart);\r\n        this.index = this.index - nextStart;\r\n        return result;\r\n    }\r\n    get numberOfBytes() {\r\n        return this.index;\r\n    }\r\n}\r\nvar MessageReader;\r\n(function (MessageReader) {\r\n    function is(value) {\r\n        let candidate = value;\r\n        return candidate && Is.func(candidate.listen) && Is.func(candidate.dispose) &&\r\n            Is.func(candidate.onError) && Is.func(candidate.onClose) && Is.func(candidate.onPartialMessage);\r\n    }\r\n    MessageReader.is = is;\r\n})(MessageReader = exports.MessageReader || (exports.MessageReader = {}));\r\nclass AbstractMessageReader {\r\n    constructor() {\r\n        this.errorEmitter = new events_1.Emitter();\r\n        this.closeEmitter = new events_1.Emitter();\r\n        this.partialMessageEmitter = new events_1.Emitter();\r\n    }\r\n    dispose() {\r\n        this.errorEmitter.dispose();\r\n        this.closeEmitter.dispose();\r\n    }\r\n    get onError() {\r\n        return this.errorEmitter.event;\r\n    }\r\n    fireError(error) {\r\n        this.errorEmitter.fire(this.asError(error));\r\n    }\r\n    get onClose() {\r\n        return this.closeEmitter.event;\r\n    }\r\n    fireClose() {\r\n        this.closeEmitter.fire(undefined);\r\n    }\r\n    get onPartialMessage() {\r\n        return this.partialMessageEmitter.event;\r\n    }\r\n    firePartialMessage(info) {\r\n        this.partialMessageEmitter.fire(info);\r\n    }\r\n    asError(error) {\r\n        if (error instanceof Error) {\r\n            return error;\r\n        }\r\n        else {\r\n            return new Error(`Reader received error. Reason: ${Is.string(error.message) ? error.message : 'unknown'}`);\r\n        }\r\n    }\r\n}\r\nexports.AbstractMessageReader = AbstractMessageReader;\r\nclass StreamMessageReader extends AbstractMessageReader {\r\n    constructor(readable, encoding = 'utf8') {\r\n        super();\r\n        this.readable = readable;\r\n        this.buffer = new MessageBuffer(encoding);\r\n        this._partialMessageTimeout = 10000;\r\n    }\r\n    set partialMessageTimeout(timeout) {\r\n        this._partialMessageTimeout = timeout;\r\n    }\r\n    get partialMessageTimeout() {\r\n        return this._partialMessageTimeout;\r\n    }\r\n    listen(callback) {\r\n        this.nextMessageLength = -1;\r\n        this.messageToken = 0;\r\n        this.partialMessageTimer = undefined;\r\n        this.callback = callback;\r\n        this.readable.on('data', (data) => {\r\n            this.onData(data);\r\n        });\r\n        this.readable.on('error', (error) => this.fireError(error));\r\n        this.readable.on('close', () => this.fireClose());\r\n    }\r\n    onData(data) {\r\n        this.buffer.append(data);\r\n        while (true) {\r\n            if (this.nextMessageLength === -1) {\r\n                let headers = this.buffer.tryReadHeaders();\r\n                if (!headers) {\r\n                    return;\r\n                }\r\n                let contentLength = headers['Content-Length'];\r\n                if (!contentLength) {\r\n                    throw new Error('Header must provide a Content-Length property.');\r\n                }\r\n                let length = parseInt(contentLength);\r\n                if (isNaN(length)) {\r\n                    throw new Error('Content-Length value must be a number.');\r\n                }\r\n                this.nextMessageLength = length;\r\n                // Take the encoding form the header. For compatibility\r\n                // treat both utf-8 and utf8 as node utf8\r\n            }\r\n            var msg = this.buffer.tryReadContent(this.nextMessageLength);\r\n            if (msg === null) {\r\n                /** We haven't received the full message yet. */\r\n                this.setPartialMessageTimer();\r\n                return;\r\n            }\r\n            this.clearPartialMessageTimer();\r\n            this.nextMessageLength = -1;\r\n            this.messageToken++;\r\n            var json = JSON.parse(msg);\r\n            this.callback(json);\r\n        }\r\n    }\r\n    clearPartialMessageTimer() {\r\n        if (this.partialMessageTimer) {\r\n            clearTimeout(this.partialMessageTimer);\r\n            this.partialMessageTimer = undefined;\r\n        }\r\n    }\r\n    setPartialMessageTimer() {\r\n        this.clearPartialMessageTimer();\r\n        if (this._partialMessageTimeout <= 0) {\r\n            return;\r\n        }\r\n        this.partialMessageTimer = setTimeout((token, timeout) => {\r\n            this.partialMessageTimer = undefined;\r\n            if (token === this.messageToken) {\r\n                this.firePartialMessage({ messageToken: token, waitingTime: timeout });\r\n                this.setPartialMessageTimer();\r\n            }\r\n        }, this._partialMessageTimeout, this.messageToken, this._partialMessageTimeout);\r\n    }\r\n}\r\nexports.StreamMessageReader = StreamMessageReader;\r\nclass IPCMessageReader extends AbstractMessageReader {\r\n    constructor(process) {\r\n        super();\r\n        this.process = process;\r\n        let eventEmitter = this.process;\r\n        eventEmitter.on('error', (error) => this.fireError(error));\r\n        eventEmitter.on('close', () => this.fireClose());\r\n    }\r\n    listen(callback) {\r\n        this.process.on('message', callback);\r\n    }\r\n}\r\nexports.IPCMessageReader = IPCMessageReader;\r\nclass SocketMessageReader extends StreamMessageReader {\r\n    constructor(socket, encoding = 'utf-8') {\r\n        super(socket, encoding);\r\n    }\r\n}\r\nexports.SocketMessageReader = SocketMessageReader;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst events_1 = require(\"./events\");\r\nconst Is = require(\"./is\");\r\nlet ContentLength = 'Content-Length: ';\r\nlet CRLF = '\\r\\n';\r\nvar MessageWriter;\r\n(function (MessageWriter) {\r\n    function is(value) {\r\n        let candidate = value;\r\n        return candidate && Is.func(candidate.dispose) && Is.func(candidate.onClose) &&\r\n            Is.func(candidate.onError) && Is.func(candidate.write);\r\n    }\r\n    MessageWriter.is = is;\r\n})(MessageWriter = exports.MessageWriter || (exports.MessageWriter = {}));\r\nclass AbstractMessageWriter {\r\n    constructor() {\r\n        this.errorEmitter = new events_1.Emitter();\r\n        this.closeEmitter = new events_1.Emitter();\r\n    }\r\n    dispose() {\r\n        this.errorEmitter.dispose();\r\n        this.closeEmitter.dispose();\r\n    }\r\n    get onError() {\r\n        return this.errorEmitter.event;\r\n    }\r\n    fireError(error, message, count) {\r\n        this.errorEmitter.fire([this.asError(error), message, count]);\r\n    }\r\n    get onClose() {\r\n        return this.closeEmitter.event;\r\n    }\r\n    fireClose() {\r\n        this.closeEmitter.fire(undefined);\r\n    }\r\n    asError(error) {\r\n        if (error instanceof Error) {\r\n            return error;\r\n        }\r\n        else {\r\n            return new Error(`Writer received error. Reason: ${Is.string(error.message) ? error.message : 'unknown'}`);\r\n        }\r\n    }\r\n}\r\nexports.AbstractMessageWriter = AbstractMessageWriter;\r\nclass StreamMessageWriter extends AbstractMessageWriter {\r\n    constructor(writable, encoding = 'utf8') {\r\n        super();\r\n        this.writable = writable;\r\n        this.encoding = encoding;\r\n        this.errorCount = 0;\r\n        this.writable.on('error', (error) => this.fireError(error));\r\n        this.writable.on('close', () => this.fireClose());\r\n    }\r\n    write(msg) {\r\n        let json = JSON.stringify(msg);\r\n        let contentLength = Buffer.byteLength(json, this.encoding);\r\n        let headers = [\r\n            ContentLength, contentLength.toString(), CRLF,\r\n            CRLF\r\n        ];\r\n        try {\r\n            // Header must be written in ASCII encoding\r\n            this.writable.write(headers.join(''), 'ascii');\r\n            // Now write the content. This can be written in any encoding\r\n            this.writable.write(json, this.encoding);\r\n            this.errorCount = 0;\r\n        }\r\n        catch (error) {\r\n            this.errorCount++;\r\n            this.fireError(error, msg, this.errorCount);\r\n        }\r\n    }\r\n}\r\nexports.StreamMessageWriter = StreamMessageWriter;\r\nclass IPCMessageWriter extends AbstractMessageWriter {\r\n    constructor(process) {\r\n        super();\r\n        this.process = process;\r\n        this.errorCount = 0;\r\n        this.queue = [];\r\n        this.sending = false;\r\n        let eventEmitter = this.process;\r\n        eventEmitter.on('error', (error) => this.fireError(error));\r\n        eventEmitter.on('close', () => this.fireClose);\r\n    }\r\n    write(msg) {\r\n        if (!this.sending && this.queue.length === 0) {\r\n            // See https://github.com/nodejs/node/issues/7657\r\n            this.doWriteMessage(msg);\r\n        }\r\n        else {\r\n            this.queue.push(msg);\r\n        }\r\n    }\r\n    doWriteMessage(msg) {\r\n        try {\r\n            if (this.process.send) {\r\n                this.sending = true;\r\n                this.process.send(msg, undefined, undefined, (error) => {\r\n                    this.sending = false;\r\n                    if (error) {\r\n                        this.errorCount++;\r\n                        this.fireError(error, msg, this.errorCount);\r\n                    }\r\n                    else {\r\n                        this.errorCount = 0;\r\n                    }\r\n                    if (this.queue.length > 0) {\r\n                        this.doWriteMessage(this.queue.shift());\r\n                    }\r\n                });\r\n            }\r\n        }\r\n        catch (error) {\r\n            this.errorCount++;\r\n            this.fireError(error, msg, this.errorCount);\r\n        }\r\n    }\r\n}\r\nexports.IPCMessageWriter = IPCMessageWriter;\r\nclass SocketMessageWriter extends AbstractMessageWriter {\r\n    constructor(socket, encoding = 'utf8') {\r\n        super();\r\n        this.socket = socket;\r\n        this.queue = [];\r\n        this.sending = false;\r\n        this.encoding = encoding;\r\n        this.errorCount = 0;\r\n        this.socket.on('error', (error) => this.fireError(error));\r\n        this.socket.on('close', () => this.fireClose());\r\n    }\r\n    dispose() {\r\n        super.dispose();\r\n        this.socket.destroy();\r\n    }\r\n    write(msg) {\r\n        if (!this.sending && this.queue.length === 0) {\r\n            // See https://github.com/nodejs/node/issues/7657\r\n            this.doWriteMessage(msg);\r\n        }\r\n        else {\r\n            this.queue.push(msg);\r\n        }\r\n    }\r\n    doWriteMessage(msg) {\r\n        let json = JSON.stringify(msg);\r\n        let contentLength = Buffer.byteLength(json, this.encoding);\r\n        let headers = [\r\n            ContentLength, contentLength.toString(), CRLF,\r\n            CRLF\r\n        ];\r\n        try {\r\n            // Header must be written in ASCII encoding\r\n            this.sending = true;\r\n            this.socket.write(headers.join(''), 'ascii', (error) => {\r\n                if (error) {\r\n                    this.handleError(error, msg);\r\n                }\r\n                try {\r\n                    // Now write the content. This can be written in any encoding\r\n                    this.socket.write(json, this.encoding, (error) => {\r\n                        this.sending = false;\r\n                        if (error) {\r\n                            this.handleError(error, msg);\r\n                        }\r\n                        else {\r\n                            this.errorCount = 0;\r\n                        }\r\n                        if (this.queue.length > 0) {\r\n                            this.doWriteMessage(this.queue.shift());\r\n                        }\r\n                    });\r\n                }\r\n                catch (error) {\r\n                    this.handleError(error, msg);\r\n                }\r\n            });\r\n        }\r\n        catch (error) {\r\n            this.handleError(error, msg);\r\n        }\r\n    }\r\n    handleError(error, msg) {\r\n        this.errorCount++;\r\n        this.fireError(error, msg, this.errorCount);\r\n    }\r\n}\r\nexports.SocketMessageWriter = SocketMessageWriter;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst is = require(\"./is\");\r\n/**\r\n * Predefined error codes.\r\n */\r\nvar ErrorCodes;\r\n(function (ErrorCodes) {\r\n    // Defined by JSON RPC\r\n    ErrorCodes.ParseError = -32700;\r\n    ErrorCodes.InvalidRequest = -32600;\r\n    ErrorCodes.MethodNotFound = -32601;\r\n    ErrorCodes.InvalidParams = -32602;\r\n    ErrorCodes.InternalError = -32603;\r\n    ErrorCodes.serverErrorStart = -32099;\r\n    ErrorCodes.serverErrorEnd = -32000;\r\n    ErrorCodes.ServerNotInitialized = -32002;\r\n    ErrorCodes.UnknownErrorCode = -32001;\r\n    // Defined by the protocol.\r\n    ErrorCodes.RequestCancelled = -32800;\r\n    ErrorCodes.ContentModified = -32801;\r\n    // Defined by VSCode library.\r\n    ErrorCodes.MessageWriteError = 1;\r\n    ErrorCodes.MessageReadError = 2;\r\n})(ErrorCodes = exports.ErrorCodes || (exports.ErrorCodes = {}));\r\n/**\r\n * An error object return in a response in case a request\r\n * has failed.\r\n */\r\nclass ResponseError extends Error {\r\n    constructor(code, message, data) {\r\n        super(message);\r\n        this.code = is.number(code) ? code : ErrorCodes.UnknownErrorCode;\r\n        this.data = data;\r\n        Object.setPrototypeOf(this, ResponseError.prototype);\r\n    }\r\n    toJson() {\r\n        return {\r\n            code: this.code,\r\n            message: this.message,\r\n            data: this.data,\r\n        };\r\n    }\r\n}\r\nexports.ResponseError = ResponseError;\r\n/**\r\n * An abstract implementation of a MessageType.\r\n */\r\nclass AbstractMessageType {\r\n    constructor(_method, _numberOfParams) {\r\n        this._method = _method;\r\n        this._numberOfParams = _numberOfParams;\r\n    }\r\n    get method() {\r\n        return this._method;\r\n    }\r\n    get numberOfParams() {\r\n        return this._numberOfParams;\r\n    }\r\n}\r\nexports.AbstractMessageType = AbstractMessageType;\r\n/**\r\n * Classes to type request response pairs\r\n */\r\nclass RequestType0 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 0);\r\n        this._ = undefined;\r\n    }\r\n}\r\nexports.RequestType0 = RequestType0;\r\nclass RequestType extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 1);\r\n        this._ = undefined;\r\n    }\r\n}\r\nexports.RequestType = RequestType;\r\nclass RequestType1 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 1);\r\n        this._ = undefined;\r\n    }\r\n}\r\nexports.RequestType1 = RequestType1;\r\nclass RequestType2 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 2);\r\n        this._ = undefined;\r\n    }\r\n}\r\nexports.RequestType2 = RequestType2;\r\nclass RequestType3 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 3);\r\n        this._ = undefined;\r\n    }\r\n}\r\nexports.RequestType3 = RequestType3;\r\nclass RequestType4 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 4);\r\n        this._ = undefined;\r\n    }\r\n}\r\nexports.RequestType4 = RequestType4;\r\nclass RequestType5 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 5);\r\n        this._ = undefined;\r\n    }\r\n}\r\nexports.RequestType5 = RequestType5;\r\nclass RequestType6 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 6);\r\n        this._ = undefined;\r\n    }\r\n}\r\nexports.RequestType6 = RequestType6;\r\nclass RequestType7 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 7);\r\n        this._ = undefined;\r\n    }\r\n}\r\nexports.RequestType7 = RequestType7;\r\nclass RequestType8 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 8);\r\n        this._ = undefined;\r\n    }\r\n}\r\nexports.RequestType8 = RequestType8;\r\nclass RequestType9 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 9);\r\n        this._ = undefined;\r\n    }\r\n}\r\nexports.RequestType9 = RequestType9;\r\nclass NotificationType extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 1);\r\n        this._ = undefined;\r\n    }\r\n}\r\nexports.NotificationType = NotificationType;\r\nclass NotificationType0 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 0);\r\n        this._ = undefined;\r\n    }\r\n}\r\nexports.NotificationType0 = NotificationType0;\r\nclass NotificationType1 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 1);\r\n        this._ = undefined;\r\n    }\r\n}\r\nexports.NotificationType1 = NotificationType1;\r\nclass NotificationType2 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 2);\r\n        this._ = undefined;\r\n    }\r\n}\r\nexports.NotificationType2 = NotificationType2;\r\nclass NotificationType3 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 3);\r\n        this._ = undefined;\r\n    }\r\n}\r\nexports.NotificationType3 = NotificationType3;\r\nclass NotificationType4 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 4);\r\n        this._ = undefined;\r\n    }\r\n}\r\nexports.NotificationType4 = NotificationType4;\r\nclass NotificationType5 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 5);\r\n        this._ = undefined;\r\n    }\r\n}\r\nexports.NotificationType5 = NotificationType5;\r\nclass NotificationType6 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 6);\r\n        this._ = undefined;\r\n    }\r\n}\r\nexports.NotificationType6 = NotificationType6;\r\nclass NotificationType7 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 7);\r\n        this._ = undefined;\r\n    }\r\n}\r\nexports.NotificationType7 = NotificationType7;\r\nclass NotificationType8 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 8);\r\n        this._ = undefined;\r\n    }\r\n}\r\nexports.NotificationType8 = NotificationType8;\r\nclass NotificationType9 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 9);\r\n        this._ = undefined;\r\n    }\r\n}\r\nexports.NotificationType9 = NotificationType9;\r\n/**\r\n * Tests if the given message is a request message\r\n */\r\nfunction isRequestMessage(message) {\r\n    let candidate = message;\r\n    return candidate && is.string(candidate.method) && (is.string(candidate.id) || is.number(candidate.id));\r\n}\r\nexports.isRequestMessage = isRequestMessage;\r\n/**\r\n * Tests if the given message is a notification message\r\n */\r\nfunction isNotificationMessage(message) {\r\n    let candidate = message;\r\n    return candidate && is.string(candidate.method) && message.id === void 0;\r\n}\r\nexports.isNotificationMessage = isNotificationMessage;\r\n/**\r\n * Tests if the given message is a response message\r\n */\r\nfunction isResponseMessage(message) {\r\n    let candidate = message;\r\n    return candidate && (candidate.result !== void 0 || !!candidate.error) && (is.string(candidate.id) || is.number(candidate.id) || candidate.id === null);\r\n}\r\nexports.isResponseMessage = isResponseMessage;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst path_1 = require(\"path\");\r\nconst os_1 = require(\"os\");\r\nconst crypto_1 = require(\"crypto\");\r\nconst net_1 = require(\"net\");\r\nconst messageReader_1 = require(\"./messageReader\");\r\nconst messageWriter_1 = require(\"./messageWriter\");\r\nfunction generateRandomPipeName() {\r\n    const randomSuffix = crypto_1.randomBytes(21).toString('hex');\r\n    if (process.platform === 'win32') {\r\n        return `\\\\\\\\.\\\\pipe\\\\vscode-jsonrpc-${randomSuffix}-sock`;\r\n    }\r\n    else {\r\n        // Mac/Unix: use socket file\r\n        return path_1.join(os_1.tmpdir(), `vscode-${randomSuffix}.sock`);\r\n    }\r\n}\r\nexports.generateRandomPipeName = generateRandomPipeName;\r\nfunction createClientPipeTransport(pipeName, encoding = 'utf-8') {\r\n    let connectResolve;\r\n    let connected = new Promise((resolve, _reject) => {\r\n        connectResolve = resolve;\r\n    });\r\n    return new Promise((resolve, reject) => {\r\n        let server = net_1.createServer((socket) => {\r\n            server.close();\r\n            connectResolve([\r\n                new messageReader_1.SocketMessageReader(socket, encoding),\r\n                new messageWriter_1.SocketMessageWriter(socket, encoding)\r\n            ]);\r\n        });\r\n        server.on('error', reject);\r\n        server.listen(pipeName, () => {\r\n            server.removeListener('error', reject);\r\n            resolve({\r\n                onConnected: () => { return connected; }\r\n            });\r\n        });\r\n    });\r\n}\r\nexports.createClientPipeTransport = createClientPipeTransport;\r\nfunction createServerPipeTransport(pipeName, encoding = 'utf-8') {\r\n    const socket = net_1.createConnection(pipeName);\r\n    return [\r\n        new messageReader_1.SocketMessageReader(socket, encoding),\r\n        new messageWriter_1.SocketMessageWriter(socket, encoding)\r\n    ];\r\n}\r\nexports.createServerPipeTransport = createServerPipeTransport;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst net_1 = require(\"net\");\r\nconst messageReader_1 = require(\"./messageReader\");\r\nconst messageWriter_1 = require(\"./messageWriter\");\r\nfunction createClientSocketTransport(port, encoding = 'utf-8') {\r\n    let connectResolve;\r\n    let connected = new Promise((resolve, _reject) => {\r\n        connectResolve = resolve;\r\n    });\r\n    return new Promise((resolve, reject) => {\r\n        let server = net_1.createServer((socket) => {\r\n            server.close();\r\n            connectResolve([\r\n                new messageReader_1.SocketMessageReader(socket, encoding),\r\n                new messageWriter_1.SocketMessageWriter(socket, encoding)\r\n            ]);\r\n        });\r\n        server.on('error', reject);\r\n        server.listen(port, '127.0.0.1', () => {\r\n            server.removeListener('error', reject);\r\n            resolve({\r\n                onConnected: () => { return connected; }\r\n            });\r\n        });\r\n    });\r\n}\r\nexports.createClientSocketTransport = createClientSocketTransport;\r\nfunction createServerSocketTransport(port, encoding = 'utf-8') {\r\n    const socket = net_1.createConnection(port, '127.0.0.1');\r\n    return [\r\n        new messageReader_1.SocketMessageReader(socket, encoding),\r\n        new messageWriter_1.SocketMessageWriter(socket, encoding)\r\n    ];\r\n}\r\nexports.createServerSocketTransport = createServerSocketTransport;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nfunction __export(m) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst vscode_1 = require(\"vscode\");\r\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\r\nconst c2p = require(\"./codeConverter\");\r\nconst p2c = require(\"./protocolConverter\");\r\nconst Is = require(\"./utils/is\");\r\nconst async_1 = require(\"./utils/async\");\r\nconst UUID = require(\"./utils/uuid\");\r\nconst progressPart_1 = require(\"./progressPart\");\r\n__export(require(\"vscode-languageserver-protocol\"));\r\nclass ConsoleLogger {\r\n    error(message) {\r\n        console.error(message);\r\n    }\r\n    warn(message) {\r\n        console.warn(message);\r\n    }\r\n    info(message) {\r\n        console.info(message);\r\n    }\r\n    log(message) {\r\n        console.log(message);\r\n    }\r\n}\r\nfunction createConnection(input, output, errorHandler, closeHandler) {\r\n    let logger = new ConsoleLogger();\r\n    let connection = vscode_languageserver_protocol_1.createProtocolConnection(input, output, logger);\r\n    connection.onError((data) => { errorHandler(data[0], data[1], data[2]); });\r\n    connection.onClose(closeHandler);\r\n    let result = {\r\n        listen: () => connection.listen(),\r\n        sendRequest: (type, ...params) => connection.sendRequest(Is.string(type) ? type : type.method, ...params),\r\n        onRequest: (type, handler) => connection.onRequest(Is.string(type) ? type : type.method, handler),\r\n        sendNotification: (type, params) => connection.sendNotification(Is.string(type) ? type : type.method, params),\r\n        onNotification: (type, handler) => connection.onNotification(Is.string(type) ? type : type.method, handler),\r\n        onProgress: connection.onProgress,\r\n        sendProgress: connection.sendProgress,\r\n        trace: (value, tracer, sendNotificationOrTraceOptions) => {\r\n            const defaultTraceOptions = {\r\n                sendNotification: false,\r\n                traceFormat: vscode_languageserver_protocol_1.TraceFormat.Text\r\n            };\r\n            if (sendNotificationOrTraceOptions === void 0) {\r\n                connection.trace(value, tracer, defaultTraceOptions);\r\n            }\r\n            else if (Is.boolean(sendNotificationOrTraceOptions)) {\r\n                connection.trace(value, tracer, sendNotificationOrTraceOptions);\r\n            }\r\n            else {\r\n                connection.trace(value, tracer, sendNotificationOrTraceOptions);\r\n            }\r\n        },\r\n        initialize: (params) => connection.sendRequest(vscode_languageserver_protocol_1.InitializeRequest.type, params),\r\n        shutdown: () => connection.sendRequest(vscode_languageserver_protocol_1.ShutdownRequest.type, undefined),\r\n        exit: () => connection.sendNotification(vscode_languageserver_protocol_1.ExitNotification.type),\r\n        onLogMessage: (handler) => connection.onNotification(vscode_languageserver_protocol_1.LogMessageNotification.type, handler),\r\n        onShowMessage: (handler) => connection.onNotification(vscode_languageserver_protocol_1.ShowMessageNotification.type, handler),\r\n        onTelemetry: (handler) => connection.onNotification(vscode_languageserver_protocol_1.TelemetryEventNotification.type, handler),\r\n        didChangeConfiguration: (params) => connection.sendNotification(vscode_languageserver_protocol_1.DidChangeConfigurationNotification.type, params),\r\n        didChangeWatchedFiles: (params) => connection.sendNotification(vscode_languageserver_protocol_1.DidChangeWatchedFilesNotification.type, params),\r\n        didOpenTextDocument: (params) => connection.sendNotification(vscode_languageserver_protocol_1.DidOpenTextDocumentNotification.type, params),\r\n        didChangeTextDocument: (params) => connection.sendNotification(vscode_languageserver_protocol_1.DidChangeTextDocumentNotification.type, params),\r\n        didCloseTextDocument: (params) => connection.sendNotification(vscode_languageserver_protocol_1.DidCloseTextDocumentNotification.type, params),\r\n        didSaveTextDocument: (params) => connection.sendNotification(vscode_languageserver_protocol_1.DidSaveTextDocumentNotification.type, params),\r\n        onDiagnostics: (handler) => connection.onNotification(vscode_languageserver_protocol_1.PublishDiagnosticsNotification.type, handler),\r\n        dispose: () => connection.dispose()\r\n    };\r\n    return result;\r\n}\r\n/**\r\n * An action to be performed when the connection is producing errors.\r\n */\r\nvar ErrorAction;\r\n(function (ErrorAction) {\r\n    /**\r\n     * Continue running the server.\r\n     */\r\n    ErrorAction[ErrorAction[\"Continue\"] = 1] = \"Continue\";\r\n    /**\r\n     * Shutdown the server.\r\n     */\r\n    ErrorAction[ErrorAction[\"Shutdown\"] = 2] = \"Shutdown\";\r\n})(ErrorAction = exports.ErrorAction || (exports.ErrorAction = {}));\r\n/**\r\n * An action to be performed when the connection to a server got closed.\r\n */\r\nvar CloseAction;\r\n(function (CloseAction) {\r\n    /**\r\n     * Don't restart the server. The connection stays closed.\r\n     */\r\n    CloseAction[CloseAction[\"DoNotRestart\"] = 1] = \"DoNotRestart\";\r\n    /**\r\n     * Restart the server.\r\n     */\r\n    CloseAction[CloseAction[\"Restart\"] = 2] = \"Restart\";\r\n})(CloseAction = exports.CloseAction || (exports.CloseAction = {}));\r\nclass DefaultErrorHandler {\r\n    constructor(name) {\r\n        this.name = name;\r\n        this.restarts = [];\r\n    }\r\n    error(_error, _message, count) {\r\n        if (count && count <= 3) {\r\n            return ErrorAction.Continue;\r\n        }\r\n        return ErrorAction.Shutdown;\r\n    }\r\n    closed() {\r\n        this.restarts.push(Date.now());\r\n        if (this.restarts.length < 5) {\r\n            return CloseAction.Restart;\r\n        }\r\n        else {\r\n            let diff = this.restarts[this.restarts.length - 1] - this.restarts[0];\r\n            if (diff <= 3 * 60 * 1000) {\r\n                vscode_1.window.showErrorMessage(`The ${this.name} server crashed 5 times in the last 3 minutes. The server will not be restarted.`);\r\n                return CloseAction.DoNotRestart;\r\n            }\r\n            else {\r\n                this.restarts.shift();\r\n                return CloseAction.Restart;\r\n            }\r\n        }\r\n    }\r\n}\r\nvar RevealOutputChannelOn;\r\n(function (RevealOutputChannelOn) {\r\n    RevealOutputChannelOn[RevealOutputChannelOn[\"Info\"] = 1] = \"Info\";\r\n    RevealOutputChannelOn[RevealOutputChannelOn[\"Warn\"] = 2] = \"Warn\";\r\n    RevealOutputChannelOn[RevealOutputChannelOn[\"Error\"] = 3] = \"Error\";\r\n    RevealOutputChannelOn[RevealOutputChannelOn[\"Never\"] = 4] = \"Never\";\r\n})(RevealOutputChannelOn = exports.RevealOutputChannelOn || (exports.RevealOutputChannelOn = {}));\r\nvar State;\r\n(function (State) {\r\n    State[State[\"Stopped\"] = 1] = \"Stopped\";\r\n    State[State[\"Starting\"] = 3] = \"Starting\";\r\n    State[State[\"Running\"] = 2] = \"Running\";\r\n})(State = exports.State || (exports.State = {}));\r\nvar ClientState;\r\n(function (ClientState) {\r\n    ClientState[ClientState[\"Initial\"] = 0] = \"Initial\";\r\n    ClientState[ClientState[\"Starting\"] = 1] = \"Starting\";\r\n    ClientState[ClientState[\"StartFailed\"] = 2] = \"StartFailed\";\r\n    ClientState[ClientState[\"Running\"] = 3] = \"Running\";\r\n    ClientState[ClientState[\"Stopping\"] = 4] = \"Stopping\";\r\n    ClientState[ClientState[\"Stopped\"] = 5] = \"Stopped\";\r\n})(ClientState || (ClientState = {}));\r\nconst SupportedSymbolKinds = [\r\n    vscode_languageserver_protocol_1.SymbolKind.File,\r\n    vscode_languageserver_protocol_1.SymbolKind.Module,\r\n    vscode_languageserver_protocol_1.SymbolKind.Namespace,\r\n    vscode_languageserver_protocol_1.SymbolKind.Package,\r\n    vscode_languageserver_protocol_1.SymbolKind.Class,\r\n    vscode_languageserver_protocol_1.SymbolKind.Method,\r\n    vscode_languageserver_protocol_1.SymbolKind.Property,\r\n    vscode_languageserver_protocol_1.SymbolKind.Field,\r\n    vscode_languageserver_protocol_1.SymbolKind.Constructor,\r\n    vscode_languageserver_protocol_1.SymbolKind.Enum,\r\n    vscode_languageserver_protocol_1.SymbolKind.Interface,\r\n    vscode_languageserver_protocol_1.SymbolKind.Function,\r\n    vscode_languageserver_protocol_1.SymbolKind.Variable,\r\n    vscode_languageserver_protocol_1.SymbolKind.Constant,\r\n    vscode_languageserver_protocol_1.SymbolKind.String,\r\n    vscode_languageserver_protocol_1.SymbolKind.Number,\r\n    vscode_languageserver_protocol_1.SymbolKind.Boolean,\r\n    vscode_languageserver_protocol_1.SymbolKind.Array,\r\n    vscode_languageserver_protocol_1.SymbolKind.Object,\r\n    vscode_languageserver_protocol_1.SymbolKind.Key,\r\n    vscode_languageserver_protocol_1.SymbolKind.Null,\r\n    vscode_languageserver_protocol_1.SymbolKind.EnumMember,\r\n    vscode_languageserver_protocol_1.SymbolKind.Struct,\r\n    vscode_languageserver_protocol_1.SymbolKind.Event,\r\n    vscode_languageserver_protocol_1.SymbolKind.Operator,\r\n    vscode_languageserver_protocol_1.SymbolKind.TypeParameter\r\n];\r\nconst SupportedCompletionItemKinds = [\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Text,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Method,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Function,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Constructor,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Field,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Variable,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Class,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Interface,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Module,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Property,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Unit,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Value,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Enum,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Keyword,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Snippet,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Color,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.File,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Reference,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Folder,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.EnumMember,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Constant,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Struct,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Event,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.Operator,\r\n    vscode_languageserver_protocol_1.CompletionItemKind.TypeParameter\r\n];\r\nfunction ensure(target, key) {\r\n    if (target[key] === void 0) {\r\n        target[key] = {};\r\n    }\r\n    return target[key];\r\n}\r\nvar DynamicFeature;\r\n(function (DynamicFeature) {\r\n    function is(value) {\r\n        let candidate = value;\r\n        return candidate && Is.func(candidate.register) && Is.func(candidate.unregister) && Is.func(candidate.dispose) && candidate.messages !== void 0;\r\n    }\r\n    DynamicFeature.is = is;\r\n})(DynamicFeature || (DynamicFeature = {}));\r\nclass DocumentNotifiactions {\r\n    constructor(_client, _event, _type, _middleware, _createParams, _selectorFilter) {\r\n        this._client = _client;\r\n        this._event = _event;\r\n        this._type = _type;\r\n        this._middleware = _middleware;\r\n        this._createParams = _createParams;\r\n        this._selectorFilter = _selectorFilter;\r\n        this._selectors = new Map();\r\n    }\r\n    static textDocumentFilter(selectors, textDocument) {\r\n        for (const selector of selectors) {\r\n            if (vscode_1.languages.match(selector, textDocument)) {\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n    register(_message, data) {\r\n        if (!data.registerOptions.documentSelector) {\r\n            return;\r\n        }\r\n        if (!this._listener) {\r\n            this._listener = this._event(this.callback, this);\r\n        }\r\n        this._selectors.set(data.id, data.registerOptions.documentSelector);\r\n    }\r\n    callback(data) {\r\n        if (!this._selectorFilter || this._selectorFilter(this._selectors.values(), data)) {\r\n            if (this._middleware) {\r\n                this._middleware(data, (data) => this._client.sendNotification(this._type, this._createParams(data)));\r\n            }\r\n            else {\r\n                this._client.sendNotification(this._type, this._createParams(data));\r\n            }\r\n            this.notificationSent(data);\r\n        }\r\n    }\r\n    notificationSent(_data) {\r\n    }\r\n    unregister(id) {\r\n        this._selectors.delete(id);\r\n        if (this._selectors.size === 0 && this._listener) {\r\n            this._listener.dispose();\r\n            this._listener = undefined;\r\n        }\r\n    }\r\n    dispose() {\r\n        this._selectors.clear();\r\n        if (this._listener) {\r\n            this._listener.dispose();\r\n            this._listener = undefined;\r\n        }\r\n    }\r\n}\r\nclass DidOpenTextDocumentFeature extends DocumentNotifiactions {\r\n    constructor(client, _syncedDocuments) {\r\n        super(client, vscode_1.workspace.onDidOpenTextDocument, vscode_languageserver_protocol_1.DidOpenTextDocumentNotification.type, client.clientOptions.middleware.didOpen, (textDocument) => client.code2ProtocolConverter.asOpenTextDocumentParams(textDocument), DocumentNotifiactions.textDocumentFilter);\r\n        this._syncedDocuments = _syncedDocuments;\r\n    }\r\n    get messages() {\r\n        return vscode_languageserver_protocol_1.DidOpenTextDocumentNotification.type;\r\n    }\r\n    fillClientCapabilities(capabilities) {\r\n        ensure(ensure(capabilities, 'textDocument'), 'synchronization').dynamicRegistration = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        let textDocumentSyncOptions = capabilities.resolvedTextDocumentSync;\r\n        if (documentSelector && textDocumentSyncOptions && textDocumentSyncOptions.openClose) {\r\n            this.register(this.messages, { id: UUID.generateUuid(), registerOptions: { documentSelector: documentSelector } });\r\n        }\r\n    }\r\n    register(message, data) {\r\n        super.register(message, data);\r\n        if (!data.registerOptions.documentSelector) {\r\n            return;\r\n        }\r\n        let documentSelector = data.registerOptions.documentSelector;\r\n        vscode_1.workspace.textDocuments.forEach((textDocument) => {\r\n            let uri = textDocument.uri.toString();\r\n            if (this._syncedDocuments.has(uri)) {\r\n                return;\r\n            }\r\n            if (vscode_1.languages.match(documentSelector, textDocument)) {\r\n                let middleware = this._client.clientOptions.middleware;\r\n                let didOpen = (textDocument) => {\r\n                    this._client.sendNotification(this._type, this._createParams(textDocument));\r\n                };\r\n                if (middleware.didOpen) {\r\n                    middleware.didOpen(textDocument, didOpen);\r\n                }\r\n                else {\r\n                    didOpen(textDocument);\r\n                }\r\n                this._syncedDocuments.set(uri, textDocument);\r\n            }\r\n        });\r\n    }\r\n    notificationSent(textDocument) {\r\n        super.notificationSent(textDocument);\r\n        this._syncedDocuments.set(textDocument.uri.toString(), textDocument);\r\n    }\r\n}\r\nclass DidCloseTextDocumentFeature extends DocumentNotifiactions {\r\n    constructor(client, _syncedDocuments) {\r\n        super(client, vscode_1.workspace.onDidCloseTextDocument, vscode_languageserver_protocol_1.DidCloseTextDocumentNotification.type, client.clientOptions.middleware.didClose, (textDocument) => client.code2ProtocolConverter.asCloseTextDocumentParams(textDocument), DocumentNotifiactions.textDocumentFilter);\r\n        this._syncedDocuments = _syncedDocuments;\r\n    }\r\n    get messages() {\r\n        return vscode_languageserver_protocol_1.DidCloseTextDocumentNotification.type;\r\n    }\r\n    fillClientCapabilities(capabilities) {\r\n        ensure(ensure(capabilities, 'textDocument'), 'synchronization').dynamicRegistration = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        let textDocumentSyncOptions = capabilities.resolvedTextDocumentSync;\r\n        if (documentSelector && textDocumentSyncOptions && textDocumentSyncOptions.openClose) {\r\n            this.register(this.messages, { id: UUID.generateUuid(), registerOptions: { documentSelector: documentSelector } });\r\n        }\r\n    }\r\n    notificationSent(textDocument) {\r\n        super.notificationSent(textDocument);\r\n        this._syncedDocuments.delete(textDocument.uri.toString());\r\n    }\r\n    unregister(id) {\r\n        let selector = this._selectors.get(id);\r\n        // The super call removed the selector from the map\r\n        // of selectors.\r\n        super.unregister(id);\r\n        let selectors = this._selectors.values();\r\n        this._syncedDocuments.forEach((textDocument) => {\r\n            if (vscode_1.languages.match(selector, textDocument) && !this._selectorFilter(selectors, textDocument)) {\r\n                let middleware = this._client.clientOptions.middleware;\r\n                let didClose = (textDocument) => {\r\n                    this._client.sendNotification(this._type, this._createParams(textDocument));\r\n                };\r\n                this._syncedDocuments.delete(textDocument.uri.toString());\r\n                if (middleware.didClose) {\r\n                    middleware.didClose(textDocument, didClose);\r\n                }\r\n                else {\r\n                    didClose(textDocument);\r\n                }\r\n            }\r\n        });\r\n    }\r\n}\r\nclass DidChangeTextDocumentFeature {\r\n    constructor(_client) {\r\n        this._client = _client;\r\n        this._changeData = new Map();\r\n        this._forcingDelivery = false;\r\n    }\r\n    get messages() {\r\n        return vscode_languageserver_protocol_1.DidChangeTextDocumentNotification.type;\r\n    }\r\n    fillClientCapabilities(capabilities) {\r\n        ensure(ensure(capabilities, 'textDocument'), 'synchronization').dynamicRegistration = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        let textDocumentSyncOptions = capabilities.resolvedTextDocumentSync;\r\n        if (documentSelector && textDocumentSyncOptions && textDocumentSyncOptions.change !== void 0 && textDocumentSyncOptions.change !== vscode_languageserver_protocol_1.TextDocumentSyncKind.None) {\r\n            this.register(this.messages, {\r\n                id: UUID.generateUuid(),\r\n                registerOptions: Object.assign({}, { documentSelector: documentSelector }, { syncKind: textDocumentSyncOptions.change })\r\n            });\r\n        }\r\n    }\r\n    register(_message, data) {\r\n        if (!data.registerOptions.documentSelector) {\r\n            return;\r\n        }\r\n        if (!this._listener) {\r\n            this._listener = vscode_1.workspace.onDidChangeTextDocument(this.callback, this);\r\n        }\r\n        this._changeData.set(data.id, {\r\n            documentSelector: data.registerOptions.documentSelector,\r\n            syncKind: data.registerOptions.syncKind\r\n        });\r\n    }\r\n    callback(event) {\r\n        // Text document changes are send for dirty changes as well. We don't\r\n        // have dirty / undirty events in the LSP so we ignore content changes\r\n        // with length zero.\r\n        if (event.contentChanges.length === 0) {\r\n            return;\r\n        }\r\n        for (const changeData of this._changeData.values()) {\r\n            if (vscode_1.languages.match(changeData.documentSelector, event.document)) {\r\n                let middleware = this._client.clientOptions.middleware;\r\n                if (changeData.syncKind === vscode_languageserver_protocol_1.TextDocumentSyncKind.Incremental) {\r\n                    let params = this._client.code2ProtocolConverter.asChangeTextDocumentParams(event);\r\n                    if (middleware.didChange) {\r\n                        middleware.didChange(event, () => this._client.sendNotification(vscode_languageserver_protocol_1.DidChangeTextDocumentNotification.type, params));\r\n                    }\r\n                    else {\r\n                        this._client.sendNotification(vscode_languageserver_protocol_1.DidChangeTextDocumentNotification.type, params);\r\n                    }\r\n                }\r\n                else if (changeData.syncKind === vscode_languageserver_protocol_1.TextDocumentSyncKind.Full) {\r\n                    let didChange = (event) => {\r\n                        if (this._changeDelayer) {\r\n                            if (this._changeDelayer.uri !== event.document.uri.toString()) {\r\n                                // Use this force delivery to track boolean state. Otherwise we might call two times.\r\n                                this.forceDelivery();\r\n                                this._changeDelayer.uri = event.document.uri.toString();\r\n                            }\r\n                            this._changeDelayer.delayer.trigger(() => {\r\n                                this._client.sendNotification(vscode_languageserver_protocol_1.DidChangeTextDocumentNotification.type, this._client.code2ProtocolConverter.asChangeTextDocumentParams(event.document));\r\n                            });\r\n                        }\r\n                        else {\r\n                            this._changeDelayer = {\r\n                                uri: event.document.uri.toString(),\r\n                                delayer: new async_1.Delayer(200)\r\n                            };\r\n                            this._changeDelayer.delayer.trigger(() => {\r\n                                this._client.sendNotification(vscode_languageserver_protocol_1.DidChangeTextDocumentNotification.type, this._client.code2ProtocolConverter.asChangeTextDocumentParams(event.document));\r\n                            }, -1);\r\n                        }\r\n                    };\r\n                    if (middleware.didChange) {\r\n                        middleware.didChange(event, didChange);\r\n                    }\r\n                    else {\r\n                        didChange(event);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n    unregister(id) {\r\n        this._changeData.delete(id);\r\n        if (this._changeData.size === 0 && this._listener) {\r\n            this._listener.dispose();\r\n            this._listener = undefined;\r\n        }\r\n    }\r\n    dispose() {\r\n        this._changeDelayer = undefined;\r\n        this._forcingDelivery = false;\r\n        this._changeData.clear();\r\n        if (this._listener) {\r\n            this._listener.dispose();\r\n            this._listener = undefined;\r\n        }\r\n    }\r\n    forceDelivery() {\r\n        if (this._forcingDelivery || !this._changeDelayer) {\r\n            return;\r\n        }\r\n        try {\r\n            this._forcingDelivery = true;\r\n            this._changeDelayer.delayer.forceDelivery();\r\n        }\r\n        finally {\r\n            this._forcingDelivery = false;\r\n        }\r\n    }\r\n}\r\nclass WillSaveFeature extends DocumentNotifiactions {\r\n    constructor(client) {\r\n        super(client, vscode_1.workspace.onWillSaveTextDocument, vscode_languageserver_protocol_1.WillSaveTextDocumentNotification.type, client.clientOptions.middleware.willSave, (willSaveEvent) => client.code2ProtocolConverter.asWillSaveTextDocumentParams(willSaveEvent), (selectors, willSaveEvent) => DocumentNotifiactions.textDocumentFilter(selectors, willSaveEvent.document));\r\n    }\r\n    get messages() {\r\n        return vscode_languageserver_protocol_1.WillSaveTextDocumentNotification.type;\r\n    }\r\n    fillClientCapabilities(capabilities) {\r\n        let value = ensure(ensure(capabilities, 'textDocument'), 'synchronization');\r\n        value.willSave = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        let textDocumentSyncOptions = capabilities.resolvedTextDocumentSync;\r\n        if (documentSelector && textDocumentSyncOptions && textDocumentSyncOptions.willSave) {\r\n            this.register(this.messages, {\r\n                id: UUID.generateUuid(),\r\n                registerOptions: { documentSelector: documentSelector }\r\n            });\r\n        }\r\n    }\r\n}\r\nclass WillSaveWaitUntilFeature {\r\n    constructor(_client) {\r\n        this._client = _client;\r\n        this._selectors = new Map();\r\n    }\r\n    get messages() {\r\n        return vscode_languageserver_protocol_1.WillSaveTextDocumentWaitUntilRequest.type;\r\n    }\r\n    fillClientCapabilities(capabilities) {\r\n        let value = ensure(ensure(capabilities, 'textDocument'), 'synchronization');\r\n        value.willSaveWaitUntil = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        let textDocumentSyncOptions = capabilities.resolvedTextDocumentSync;\r\n        if (documentSelector && textDocumentSyncOptions && textDocumentSyncOptions.willSaveWaitUntil) {\r\n            this.register(this.messages, {\r\n                id: UUID.generateUuid(),\r\n                registerOptions: { documentSelector: documentSelector }\r\n            });\r\n        }\r\n    }\r\n    register(_message, data) {\r\n        if (!data.registerOptions.documentSelector) {\r\n            return;\r\n        }\r\n        if (!this._listener) {\r\n            this._listener = vscode_1.workspace.onWillSaveTextDocument(this.callback, this);\r\n        }\r\n        this._selectors.set(data.id, data.registerOptions.documentSelector);\r\n    }\r\n    callback(event) {\r\n        if (DocumentNotifiactions.textDocumentFilter(this._selectors.values(), event.document)) {\r\n            let middleware = this._client.clientOptions.middleware;\r\n            let willSaveWaitUntil = (event) => {\r\n                return this._client.sendRequest(vscode_languageserver_protocol_1.WillSaveTextDocumentWaitUntilRequest.type, this._client.code2ProtocolConverter.asWillSaveTextDocumentParams(event)).then((edits) => {\r\n                    let vEdits = this._client.protocol2CodeConverter.asTextEdits(edits);\r\n                    return vEdits === void 0 ? [] : vEdits;\r\n                });\r\n            };\r\n            event.waitUntil(middleware.willSaveWaitUntil\r\n                ? middleware.willSaveWaitUntil(event, willSaveWaitUntil)\r\n                : willSaveWaitUntil(event));\r\n        }\r\n    }\r\n    unregister(id) {\r\n        this._selectors.delete(id);\r\n        if (this._selectors.size === 0 && this._listener) {\r\n            this._listener.dispose();\r\n            this._listener = undefined;\r\n        }\r\n    }\r\n    dispose() {\r\n        this._selectors.clear();\r\n        if (this._listener) {\r\n            this._listener.dispose();\r\n            this._listener = undefined;\r\n        }\r\n    }\r\n}\r\nclass DidSaveTextDocumentFeature extends DocumentNotifiactions {\r\n    constructor(client) {\r\n        super(client, vscode_1.workspace.onDidSaveTextDocument, vscode_languageserver_protocol_1.DidSaveTextDocumentNotification.type, client.clientOptions.middleware.didSave, (textDocument) => client.code2ProtocolConverter.asSaveTextDocumentParams(textDocument, this._includeText), DocumentNotifiactions.textDocumentFilter);\r\n    }\r\n    get messages() {\r\n        return vscode_languageserver_protocol_1.DidSaveTextDocumentNotification.type;\r\n    }\r\n    fillClientCapabilities(capabilities) {\r\n        ensure(ensure(capabilities, 'textDocument'), 'synchronization').didSave = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        let textDocumentSyncOptions = capabilities.resolvedTextDocumentSync;\r\n        if (documentSelector && textDocumentSyncOptions && textDocumentSyncOptions.save) {\r\n            this.register(this.messages, {\r\n                id: UUID.generateUuid(),\r\n                registerOptions: Object.assign({}, { documentSelector: documentSelector }, { includeText: !!textDocumentSyncOptions.save.includeText })\r\n            });\r\n        }\r\n    }\r\n    register(method, data) {\r\n        this._includeText = !!data.registerOptions.includeText;\r\n        super.register(method, data);\r\n    }\r\n}\r\nclass FileSystemWatcherFeature {\r\n    constructor(_client, _notifyFileEvent) {\r\n        this._client = _client;\r\n        this._notifyFileEvent = _notifyFileEvent;\r\n        this._watchers = new Map();\r\n    }\r\n    get messages() {\r\n        return vscode_languageserver_protocol_1.DidChangeWatchedFilesNotification.type;\r\n    }\r\n    fillClientCapabilities(capabilities) {\r\n        ensure(ensure(capabilities, 'workspace'), 'didChangeWatchedFiles').dynamicRegistration = true;\r\n    }\r\n    initialize(_capabilities, _documentSelector) {\r\n    }\r\n    register(_method, data) {\r\n        if (!Array.isArray(data.registerOptions.watchers)) {\r\n            return;\r\n        }\r\n        let disposeables = [];\r\n        for (let watcher of data.registerOptions.watchers) {\r\n            if (!Is.string(watcher.globPattern)) {\r\n                continue;\r\n            }\r\n            let watchCreate = true, watchChange = true, watchDelete = true;\r\n            if (watcher.kind !== void 0 && watcher.kind !== null) {\r\n                watchCreate = (watcher.kind & vscode_languageserver_protocol_1.WatchKind.Create) !== 0;\r\n                watchChange = (watcher.kind & vscode_languageserver_protocol_1.WatchKind.Change) != 0;\r\n                watchDelete = (watcher.kind & vscode_languageserver_protocol_1.WatchKind.Delete) != 0;\r\n            }\r\n            let fileSystemWatcher = vscode_1.workspace.createFileSystemWatcher(watcher.globPattern, !watchCreate, !watchChange, !watchDelete);\r\n            this.hookListeners(fileSystemWatcher, watchCreate, watchChange, watchDelete);\r\n            disposeables.push(fileSystemWatcher);\r\n        }\r\n        this._watchers.set(data.id, disposeables);\r\n    }\r\n    registerRaw(id, fileSystemWatchers) {\r\n        let disposeables = [];\r\n        for (let fileSystemWatcher of fileSystemWatchers) {\r\n            this.hookListeners(fileSystemWatcher, true, true, true, disposeables);\r\n        }\r\n        this._watchers.set(id, disposeables);\r\n    }\r\n    hookListeners(fileSystemWatcher, watchCreate, watchChange, watchDelete, listeners) {\r\n        if (watchCreate) {\r\n            fileSystemWatcher.onDidCreate((resource) => this._notifyFileEvent({\r\n                uri: this._client.code2ProtocolConverter.asUri(resource),\r\n                type: vscode_languageserver_protocol_1.FileChangeType.Created\r\n            }), null, listeners);\r\n        }\r\n        if (watchChange) {\r\n            fileSystemWatcher.onDidChange((resource) => this._notifyFileEvent({\r\n                uri: this._client.code2ProtocolConverter.asUri(resource),\r\n                type: vscode_languageserver_protocol_1.FileChangeType.Changed\r\n            }), null, listeners);\r\n        }\r\n        if (watchDelete) {\r\n            fileSystemWatcher.onDidDelete((resource) => this._notifyFileEvent({\r\n                uri: this._client.code2ProtocolConverter.asUri(resource),\r\n                type: vscode_languageserver_protocol_1.FileChangeType.Deleted\r\n            }), null, listeners);\r\n        }\r\n    }\r\n    unregister(id) {\r\n        let disposeables = this._watchers.get(id);\r\n        if (disposeables) {\r\n            for (let disposable of disposeables) {\r\n                disposable.dispose();\r\n            }\r\n        }\r\n    }\r\n    dispose() {\r\n        this._watchers.forEach((disposeables) => {\r\n            for (let disposable of disposeables) {\r\n                disposable.dispose();\r\n            }\r\n        });\r\n        this._watchers.clear();\r\n    }\r\n}\r\nclass TextDocumentFeature {\r\n    constructor(_client, _message) {\r\n        this._client = _client;\r\n        this._message = _message;\r\n        this._providers = new Map();\r\n    }\r\n    get messages() {\r\n        return this._message;\r\n    }\r\n    register(message, data) {\r\n        if (message.method !== this.messages.method) {\r\n            throw new Error(`Register called on wrong feature. Requested ${message.method} but reached feature ${this.messages.method}`);\r\n        }\r\n        if (!data.registerOptions.documentSelector) {\r\n            return;\r\n        }\r\n        let provider = this.registerLanguageProvider(data.registerOptions);\r\n        if (provider) {\r\n            this._providers.set(data.id, provider);\r\n        }\r\n    }\r\n    unregister(id) {\r\n        let provider = this._providers.get(id);\r\n        if (provider) {\r\n            provider.dispose();\r\n        }\r\n    }\r\n    dispose() {\r\n        this._providers.forEach((value) => {\r\n            value.dispose();\r\n        });\r\n        this._providers.clear();\r\n    }\r\n    getRegistration(documentSelector, capability) {\r\n        if (!capability) {\r\n            return [undefined, undefined];\r\n        }\r\n        else if (vscode_languageserver_protocol_1.TextDocumentRegistrationOptions.is(capability)) {\r\n            const id = vscode_languageserver_protocol_1.StaticRegistrationOptions.hasId(capability) ? capability.id : UUID.generateUuid();\r\n            const selector = capability.documentSelector || documentSelector;\r\n            if (selector) {\r\n                return [id, Object.assign({}, capability, { documentSelector: selector })];\r\n            }\r\n        }\r\n        else if (Is.boolean(capability) && capability === true || vscode_languageserver_protocol_1.WorkDoneProgressOptions.is(capability)) {\r\n            if (!documentSelector) {\r\n                return [undefined, undefined];\r\n            }\r\n            let options = (Is.boolean(capability) && capability === true ? { documentSelector } : Object.assign({}, capability, { documentSelector }));\r\n            return [UUID.generateUuid(), options];\r\n        }\r\n        return [undefined, undefined];\r\n    }\r\n    getRegistrationOptions(documentSelector, capability) {\r\n        if (!documentSelector || !capability) {\r\n            return undefined;\r\n        }\r\n        return (Is.boolean(capability) && capability === true ? { documentSelector } : Object.assign({}, capability, { documentSelector }));\r\n    }\r\n}\r\nexports.TextDocumentFeature = TextDocumentFeature;\r\nclass WorkspaceFeature {\r\n    constructor(_client, _message) {\r\n        this._client = _client;\r\n        this._message = _message;\r\n        this._providers = new Map();\r\n    }\r\n    get messages() {\r\n        return this._message;\r\n    }\r\n    register(message, data) {\r\n        if (message.method !== this.messages.method) {\r\n            throw new Error(`Register called on wron feature. Requested ${message.method} but reached feature ${this.messages.method}`);\r\n        }\r\n        let provider = this.registerLanguageProvider(data.registerOptions);\r\n        if (provider) {\r\n            this._providers.set(data.id, provider);\r\n        }\r\n    }\r\n    unregister(id) {\r\n        let provider = this._providers.get(id);\r\n        if (provider) {\r\n            provider.dispose();\r\n        }\r\n    }\r\n    dispose() {\r\n        this._providers.forEach((value) => {\r\n            value.dispose();\r\n        });\r\n        this._providers.clear();\r\n    }\r\n}\r\nclass CompletionItemFeature extends TextDocumentFeature {\r\n    constructor(client) {\r\n        super(client, vscode_languageserver_protocol_1.CompletionRequest.type);\r\n    }\r\n    fillClientCapabilities(capabilites) {\r\n        let completion = ensure(ensure(capabilites, 'textDocument'), 'completion');\r\n        completion.dynamicRegistration = true;\r\n        completion.contextSupport = true;\r\n        completion.completionItem = {\r\n            snippetSupport: true,\r\n            commitCharactersSupport: true,\r\n            documentationFormat: [vscode_languageserver_protocol_1.MarkupKind.Markdown, vscode_languageserver_protocol_1.MarkupKind.PlainText],\r\n            deprecatedSupport: true,\r\n            preselectSupport: true\r\n        };\r\n        completion.completionItemKind = { valueSet: SupportedCompletionItemKinds };\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        const options = this.getRegistrationOptions(documentSelector, capabilities.completionProvider);\r\n        if (!options) {\r\n            return;\r\n        }\r\n        this.register(this.messages, {\r\n            id: UUID.generateUuid(),\r\n            registerOptions: options\r\n        });\r\n    }\r\n    registerLanguageProvider(options) {\r\n        let triggerCharacters = options.triggerCharacters || [];\r\n        let client = this._client;\r\n        let provideCompletionItems = (document, position, context, token) => {\r\n            return client.sendRequest(vscode_languageserver_protocol_1.CompletionRequest.type, client.code2ProtocolConverter.asCompletionParams(document, position, context), token).then(client.protocol2CodeConverter.asCompletionResult, (error) => {\r\n                client.logFailedRequest(vscode_languageserver_protocol_1.CompletionRequest.type, error);\r\n                return Promise.resolve([]);\r\n            });\r\n        };\r\n        let resolveCompletionItem = (item, token) => {\r\n            return client.sendRequest(vscode_languageserver_protocol_1.CompletionResolveRequest.type, client.code2ProtocolConverter.asCompletionItem(item), token).then(client.protocol2CodeConverter.asCompletionItem, (error) => {\r\n                client.logFailedRequest(vscode_languageserver_protocol_1.CompletionResolveRequest.type, error);\r\n                return Promise.resolve(item);\r\n            });\r\n        };\r\n        let middleware = this._client.clientOptions.middleware;\r\n        return vscode_1.languages.registerCompletionItemProvider(options.documentSelector, {\r\n            provideCompletionItems: (document, position, token, context) => {\r\n                return middleware.provideCompletionItem\r\n                    ? middleware.provideCompletionItem(document, position, context, token, provideCompletionItems)\r\n                    : provideCompletionItems(document, position, context, token);\r\n            },\r\n            resolveCompletionItem: options.resolveProvider\r\n                ? (item, token) => {\r\n                    return middleware.resolveCompletionItem\r\n                        ? middleware.resolveCompletionItem(item, token, resolveCompletionItem)\r\n                        : resolveCompletionItem(item, token);\r\n                }\r\n                : undefined\r\n        }, ...triggerCharacters);\r\n    }\r\n}\r\nclass HoverFeature extends TextDocumentFeature {\r\n    constructor(client) {\r\n        super(client, vscode_languageserver_protocol_1.HoverRequest.type);\r\n    }\r\n    fillClientCapabilities(capabilites) {\r\n        const hoverCapability = (ensure(ensure(capabilites, 'textDocument'), 'hover'));\r\n        hoverCapability.dynamicRegistration = true;\r\n        hoverCapability.contentFormat = [vscode_languageserver_protocol_1.MarkupKind.Markdown, vscode_languageserver_protocol_1.MarkupKind.PlainText];\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        const options = this.getRegistrationOptions(documentSelector, capabilities.hoverProvider);\r\n        if (!options) {\r\n            return;\r\n        }\r\n        this.register(this.messages, {\r\n            id: UUID.generateUuid(),\r\n            registerOptions: options\r\n        });\r\n    }\r\n    registerLanguageProvider(options) {\r\n        let client = this._client;\r\n        let provideHover = (document, position, token) => {\r\n            return client.sendRequest(vscode_languageserver_protocol_1.HoverRequest.type, client.code2ProtocolConverter.asTextDocumentPositionParams(document, position), token).then(client.protocol2CodeConverter.asHover, (error) => {\r\n                client.logFailedRequest(vscode_languageserver_protocol_1.HoverRequest.type, error);\r\n                return Promise.resolve(null);\r\n            });\r\n        };\r\n        let middleware = client.clientOptions.middleware;\r\n        return vscode_1.languages.registerHoverProvider(options.documentSelector, {\r\n            provideHover: (document, position, token) => {\r\n                return middleware.provideHover\r\n                    ? middleware.provideHover(document, position, token, provideHover)\r\n                    : provideHover(document, position, token);\r\n            }\r\n        });\r\n    }\r\n}\r\nclass SignatureHelpFeature extends TextDocumentFeature {\r\n    constructor(client) {\r\n        super(client, vscode_languageserver_protocol_1.SignatureHelpRequest.type);\r\n    }\r\n    fillClientCapabilities(capabilites) {\r\n        let config = ensure(ensure(capabilites, 'textDocument'), 'signatureHelp');\r\n        config.dynamicRegistration = true;\r\n        config.signatureInformation = { documentationFormat: [vscode_languageserver_protocol_1.MarkupKind.Markdown, vscode_languageserver_protocol_1.MarkupKind.PlainText] };\r\n        config.signatureInformation.parameterInformation = { labelOffsetSupport: true };\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        const options = this.getRegistrationOptions(documentSelector, capabilities.signatureHelpProvider);\r\n        if (!options) {\r\n            return;\r\n        }\r\n        this.register(this.messages, {\r\n            id: UUID.generateUuid(),\r\n            registerOptions: options\r\n        });\r\n    }\r\n    registerLanguageProvider(options) {\r\n        let client = this._client;\r\n        let providerSignatureHelp = (document, position, token) => {\r\n            return client.sendRequest(vscode_languageserver_protocol_1.SignatureHelpRequest.type, client.code2ProtocolConverter.asTextDocumentPositionParams(document, position), token).then(client.protocol2CodeConverter.asSignatureHelp, (error) => {\r\n                client.logFailedRequest(vscode_languageserver_protocol_1.SignatureHelpRequest.type, error);\r\n                return Promise.resolve(null);\r\n            });\r\n        };\r\n        let middleware = client.clientOptions.middleware;\r\n        let triggerCharacters = options.triggerCharacters || [];\r\n        return vscode_1.languages.registerSignatureHelpProvider(options.documentSelector, {\r\n            provideSignatureHelp: (document, position, token) => {\r\n                return middleware.provideSignatureHelp\r\n                    ? middleware.provideSignatureHelp(document, position, token, providerSignatureHelp)\r\n                    : providerSignatureHelp(document, position, token);\r\n            }\r\n        }, ...triggerCharacters);\r\n    }\r\n}\r\nclass DefinitionFeature extends TextDocumentFeature {\r\n    constructor(client) {\r\n        super(client, vscode_languageserver_protocol_1.DefinitionRequest.type);\r\n    }\r\n    fillClientCapabilities(capabilites) {\r\n        let definitionSupport = ensure(ensure(capabilites, 'textDocument'), 'definition');\r\n        definitionSupport.dynamicRegistration = true;\r\n        definitionSupport.linkSupport = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        const options = this.getRegistrationOptions(documentSelector, capabilities.definitionProvider);\r\n        if (!options) {\r\n            return;\r\n        }\r\n        this.register(this.messages, { id: UUID.generateUuid(), registerOptions: options });\r\n    }\r\n    registerLanguageProvider(options) {\r\n        let client = this._client;\r\n        let provideDefinition = (document, position, token) => {\r\n            return client.sendRequest(vscode_languageserver_protocol_1.DefinitionRequest.type, client.code2ProtocolConverter.asTextDocumentPositionParams(document, position), token).then(client.protocol2CodeConverter.asDefinitionResult, (error) => {\r\n                client.logFailedRequest(vscode_languageserver_protocol_1.DefinitionRequest.type, error);\r\n                return Promise.resolve(null);\r\n            });\r\n        };\r\n        let middleware = client.clientOptions.middleware;\r\n        return vscode_1.languages.registerDefinitionProvider(options.documentSelector, {\r\n            provideDefinition: (document, position, token) => {\r\n                return middleware.provideDefinition\r\n                    ? middleware.provideDefinition(document, position, token, provideDefinition)\r\n                    : provideDefinition(document, position, token);\r\n            }\r\n        });\r\n    }\r\n}\r\nclass ReferencesFeature extends TextDocumentFeature {\r\n    constructor(client) {\r\n        super(client, vscode_languageserver_protocol_1.ReferencesRequest.type);\r\n    }\r\n    fillClientCapabilities(capabilites) {\r\n        ensure(ensure(capabilites, 'textDocument'), 'references').dynamicRegistration = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        const options = this.getRegistrationOptions(documentSelector, capabilities.referencesProvider);\r\n        if (!options) {\r\n            return;\r\n        }\r\n        this.register(this.messages, { id: UUID.generateUuid(), registerOptions: options });\r\n    }\r\n    registerLanguageProvider(options) {\r\n        let client = this._client;\r\n        let providerReferences = (document, position, options, token) => {\r\n            return client.sendRequest(vscode_languageserver_protocol_1.ReferencesRequest.type, client.code2ProtocolConverter.asReferenceParams(document, position, options), token).then(client.protocol2CodeConverter.asReferences, (error) => {\r\n                client.logFailedRequest(vscode_languageserver_protocol_1.ReferencesRequest.type, error);\r\n                return Promise.resolve([]);\r\n            });\r\n        };\r\n        let middleware = client.clientOptions.middleware;\r\n        return vscode_1.languages.registerReferenceProvider(options.documentSelector, {\r\n            provideReferences: (document, position, options, token) => {\r\n                return middleware.provideReferences\r\n                    ? middleware.provideReferences(document, position, options, token, providerReferences)\r\n                    : providerReferences(document, position, options, token);\r\n            }\r\n        });\r\n    }\r\n}\r\nclass DocumentHighlightFeature extends TextDocumentFeature {\r\n    constructor(client) {\r\n        super(client, vscode_languageserver_protocol_1.DocumentHighlightRequest.type);\r\n    }\r\n    fillClientCapabilities(capabilites) {\r\n        ensure(ensure(capabilites, 'textDocument'), 'documentHighlight').dynamicRegistration = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        const options = this.getRegistrationOptions(documentSelector, capabilities.documentHighlightProvider);\r\n        if (!options) {\r\n            return;\r\n        }\r\n        this.register(this.messages, { id: UUID.generateUuid(), registerOptions: options });\r\n    }\r\n    registerLanguageProvider(options) {\r\n        let client = this._client;\r\n        let provideDocumentHighlights = (document, position, token) => {\r\n            return client.sendRequest(vscode_languageserver_protocol_1.DocumentHighlightRequest.type, client.code2ProtocolConverter.asTextDocumentPositionParams(document, position), token).then(client.protocol2CodeConverter.asDocumentHighlights, (error) => {\r\n                client.logFailedRequest(vscode_languageserver_protocol_1.DocumentHighlightRequest.type, error);\r\n                return Promise.resolve([]);\r\n            });\r\n        };\r\n        let middleware = client.clientOptions.middleware;\r\n        return vscode_1.languages.registerDocumentHighlightProvider(options.documentSelector, {\r\n            provideDocumentHighlights: (document, position, token) => {\r\n                return middleware.provideDocumentHighlights\r\n                    ? middleware.provideDocumentHighlights(document, position, token, provideDocumentHighlights)\r\n                    : provideDocumentHighlights(document, position, token);\r\n            }\r\n        });\r\n    }\r\n}\r\nclass DocumentSymbolFeature extends TextDocumentFeature {\r\n    constructor(client) {\r\n        super(client, vscode_languageserver_protocol_1.DocumentSymbolRequest.type);\r\n    }\r\n    fillClientCapabilities(capabilites) {\r\n        let symbolCapabilities = ensure(ensure(capabilites, 'textDocument'), 'documentSymbol');\r\n        symbolCapabilities.dynamicRegistration = true;\r\n        symbolCapabilities.symbolKind = {\r\n            valueSet: SupportedSymbolKinds\r\n        };\r\n        symbolCapabilities.hierarchicalDocumentSymbolSupport = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        const options = this.getRegistrationOptions(documentSelector, capabilities.documentSymbolProvider);\r\n        if (!options) {\r\n            return;\r\n        }\r\n        this.register(this.messages, { id: UUID.generateUuid(), registerOptions: options });\r\n    }\r\n    registerLanguageProvider(options) {\r\n        let client = this._client;\r\n        let provideDocumentSymbols = (document, token) => {\r\n            return client.sendRequest(vscode_languageserver_protocol_1.DocumentSymbolRequest.type, client.code2ProtocolConverter.asDocumentSymbolParams(document), token).then((data) => {\r\n                if (data === null) {\r\n                    return undefined;\r\n                }\r\n                if (data.length === 0) {\r\n                    return [];\r\n                }\r\n                else {\r\n                    let element = data[0];\r\n                    if (vscode_languageserver_protocol_1.DocumentSymbol.is(element)) {\r\n                        return client.protocol2CodeConverter.asDocumentSymbols(data);\r\n                    }\r\n                    else {\r\n                        return client.protocol2CodeConverter.asSymbolInformations(data);\r\n                    }\r\n                }\r\n            }, (error) => {\r\n                client.logFailedRequest(vscode_languageserver_protocol_1.DocumentSymbolRequest.type, error);\r\n                return Promise.resolve([]);\r\n            });\r\n        };\r\n        let middleware = client.clientOptions.middleware;\r\n        return vscode_1.languages.registerDocumentSymbolProvider(options.documentSelector, {\r\n            provideDocumentSymbols: (document, token) => {\r\n                return middleware.provideDocumentSymbols\r\n                    ? middleware.provideDocumentSymbols(document, token, provideDocumentSymbols)\r\n                    : provideDocumentSymbols(document, token);\r\n            }\r\n        });\r\n    }\r\n}\r\nclass WorkspaceSymbolFeature extends WorkspaceFeature {\r\n    constructor(client) {\r\n        super(client, vscode_languageserver_protocol_1.WorkspaceSymbolRequest.type);\r\n    }\r\n    fillClientCapabilities(capabilites) {\r\n        let symbolCapabilities = ensure(ensure(capabilites, 'workspace'), 'symbol');\r\n        symbolCapabilities.dynamicRegistration = true;\r\n        symbolCapabilities.symbolKind = {\r\n            valueSet: SupportedSymbolKinds\r\n        };\r\n    }\r\n    initialize(capabilities) {\r\n        if (!capabilities.workspaceSymbolProvider) {\r\n            return;\r\n        }\r\n        this.register(this.messages, {\r\n            id: UUID.generateUuid(),\r\n            registerOptions: capabilities.workspaceSymbolProvider === true ? { workDoneProgress: false } : capabilities.workspaceSymbolProvider\r\n        });\r\n    }\r\n    registerLanguageProvider(_options) {\r\n        let client = this._client;\r\n        let provideWorkspaceSymbols = (query, token) => {\r\n            return client.sendRequest(vscode_languageserver_protocol_1.WorkspaceSymbolRequest.type, { query }, token).then(client.protocol2CodeConverter.asSymbolInformations, (error) => {\r\n                client.logFailedRequest(vscode_languageserver_protocol_1.WorkspaceSymbolRequest.type, error);\r\n                return Promise.resolve([]);\r\n            });\r\n        };\r\n        let middleware = client.clientOptions.middleware;\r\n        return vscode_1.languages.registerWorkspaceSymbolProvider({\r\n            provideWorkspaceSymbols: (query, token) => {\r\n                return middleware.provideWorkspaceSymbols\r\n                    ? middleware.provideWorkspaceSymbols(query, token, provideWorkspaceSymbols)\r\n                    : provideWorkspaceSymbols(query, token);\r\n            }\r\n        });\r\n    }\r\n}\r\nclass CodeActionFeature extends TextDocumentFeature {\r\n    constructor(client) {\r\n        super(client, vscode_languageserver_protocol_1.CodeActionRequest.type);\r\n    }\r\n    fillClientCapabilities(capabilites) {\r\n        const cap = ensure(ensure(capabilites, 'textDocument'), 'codeAction');\r\n        cap.dynamicRegistration = true;\r\n        cap.codeActionLiteralSupport = {\r\n            codeActionKind: {\r\n                valueSet: [\r\n                    vscode_languageserver_protocol_1.CodeActionKind.Empty,\r\n                    vscode_languageserver_protocol_1.CodeActionKind.QuickFix,\r\n                    vscode_languageserver_protocol_1.CodeActionKind.Refactor,\r\n                    vscode_languageserver_protocol_1.CodeActionKind.RefactorExtract,\r\n                    vscode_languageserver_protocol_1.CodeActionKind.RefactorInline,\r\n                    vscode_languageserver_protocol_1.CodeActionKind.RefactorRewrite,\r\n                    vscode_languageserver_protocol_1.CodeActionKind.Source,\r\n                    vscode_languageserver_protocol_1.CodeActionKind.SourceOrganizeImports\r\n                ]\r\n            }\r\n        };\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        const options = this.getRegistrationOptions(documentSelector, capabilities.codeActionProvider);\r\n        if (!options) {\r\n            return;\r\n        }\r\n        this.register(this.messages, { id: UUID.generateUuid(), registerOptions: options });\r\n    }\r\n    registerLanguageProvider(options) {\r\n        let client = this._client;\r\n        let provideCodeActions = (document, range, context, token) => {\r\n            let params = {\r\n                textDocument: client.code2ProtocolConverter.asTextDocumentIdentifier(document),\r\n                range: client.code2ProtocolConverter.asRange(range),\r\n                context: client.code2ProtocolConverter.asCodeActionContext(context)\r\n            };\r\n            return client.sendRequest(vscode_languageserver_protocol_1.CodeActionRequest.type, params, token).then((values) => {\r\n                if (values === null) {\r\n                    return undefined;\r\n                }\r\n                let result = [];\r\n                for (let item of values) {\r\n                    if (vscode_languageserver_protocol_1.Command.is(item)) {\r\n                        result.push(client.protocol2CodeConverter.asCommand(item));\r\n                    }\r\n                    else {\r\n                        result.push(client.protocol2CodeConverter.asCodeAction(item));\r\n                    }\r\n                    ;\r\n                }\r\n                return result;\r\n            }, (error) => {\r\n                client.logFailedRequest(vscode_languageserver_protocol_1.CodeActionRequest.type, error);\r\n                return Promise.resolve([]);\r\n            });\r\n        };\r\n        let middleware = client.clientOptions.middleware;\r\n        return vscode_1.languages.registerCodeActionsProvider(options.documentSelector, {\r\n            provideCodeActions: (document, range, context, token) => {\r\n                return middleware.provideCodeActions\r\n                    ? middleware.provideCodeActions(document, range, context, token, provideCodeActions)\r\n                    : provideCodeActions(document, range, context, token);\r\n            }\r\n        }, options.codeActionKinds\r\n            ? { providedCodeActionKinds: client.protocol2CodeConverter.asCodeActionKinds(options.codeActionKinds) }\r\n            : undefined);\r\n    }\r\n}\r\nclass CodeLensFeature extends TextDocumentFeature {\r\n    constructor(client) {\r\n        super(client, vscode_languageserver_protocol_1.CodeLensRequest.type);\r\n    }\r\n    fillClientCapabilities(capabilites) {\r\n        ensure(ensure(capabilites, 'textDocument'), 'codeLens').dynamicRegistration = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        const options = this.getRegistrationOptions(documentSelector, capabilities.codeLensProvider);\r\n        if (!options) {\r\n            return;\r\n        }\r\n        this.register(this.messages, { id: UUID.generateUuid(), registerOptions: options });\r\n    }\r\n    registerLanguageProvider(options) {\r\n        let client = this._client;\r\n        let provideCodeLenses = (document, token) => {\r\n            return client.sendRequest(vscode_languageserver_protocol_1.CodeLensRequest.type, client.code2ProtocolConverter.asCodeLensParams(document), token).then(client.protocol2CodeConverter.asCodeLenses, (error) => {\r\n                client.logFailedRequest(vscode_languageserver_protocol_1.CodeLensRequest.type, error);\r\n                return Promise.resolve([]);\r\n            });\r\n        };\r\n        let resolveCodeLens = (codeLens, token) => {\r\n            return client.sendRequest(vscode_languageserver_protocol_1.CodeLensResolveRequest.type, client.code2ProtocolConverter.asCodeLens(codeLens), token).then(client.protocol2CodeConverter.asCodeLens, (error) => {\r\n                client.logFailedRequest(vscode_languageserver_protocol_1.CodeLensResolveRequest.type, error);\r\n                return codeLens;\r\n            });\r\n        };\r\n        let middleware = client.clientOptions.middleware;\r\n        return vscode_1.languages.registerCodeLensProvider(options.documentSelector, {\r\n            provideCodeLenses: (document, token) => {\r\n                return middleware.provideCodeLenses\r\n                    ? middleware.provideCodeLenses(document, token, provideCodeLenses)\r\n                    : provideCodeLenses(document, token);\r\n            },\r\n            resolveCodeLens: (options.resolveProvider)\r\n                ? (codeLens, token) => {\r\n                    return middleware.resolveCodeLens\r\n                        ? middleware.resolveCodeLens(codeLens, token, resolveCodeLens)\r\n                        : resolveCodeLens(codeLens, token);\r\n                }\r\n                : undefined\r\n        });\r\n    }\r\n}\r\nclass DocumentFormattingFeature extends TextDocumentFeature {\r\n    constructor(client) {\r\n        super(client, vscode_languageserver_protocol_1.DocumentFormattingRequest.type);\r\n    }\r\n    fillClientCapabilities(capabilites) {\r\n        ensure(ensure(capabilites, 'textDocument'), 'formatting').dynamicRegistration = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        const options = this.getRegistrationOptions(documentSelector, capabilities.documentFormattingProvider);\r\n        if (!options) {\r\n            return;\r\n        }\r\n        this.register(this.messages, { id: UUID.generateUuid(), registerOptions: options });\r\n    }\r\n    registerLanguageProvider(options) {\r\n        let client = this._client;\r\n        let provideDocumentFormattingEdits = (document, options, token) => {\r\n            let params = {\r\n                textDocument: client.code2ProtocolConverter.asTextDocumentIdentifier(document),\r\n                options: client.code2ProtocolConverter.asFormattingOptions(options)\r\n            };\r\n            return client.sendRequest(vscode_languageserver_protocol_1.DocumentFormattingRequest.type, params, token).then(client.protocol2CodeConverter.asTextEdits, (error) => {\r\n                client.logFailedRequest(vscode_languageserver_protocol_1.DocumentFormattingRequest.type, error);\r\n                return Promise.resolve([]);\r\n            });\r\n        };\r\n        let middleware = client.clientOptions.middleware;\r\n        return vscode_1.languages.registerDocumentFormattingEditProvider(options.documentSelector, {\r\n            provideDocumentFormattingEdits: (document, options, token) => {\r\n                return middleware.provideDocumentFormattingEdits\r\n                    ? middleware.provideDocumentFormattingEdits(document, options, token, provideDocumentFormattingEdits)\r\n                    : provideDocumentFormattingEdits(document, options, token);\r\n            }\r\n        });\r\n    }\r\n}\r\nclass DocumentRangeFormattingFeature extends TextDocumentFeature {\r\n    constructor(client) {\r\n        super(client, vscode_languageserver_protocol_1.DocumentRangeFormattingRequest.type);\r\n    }\r\n    fillClientCapabilities(capabilites) {\r\n        ensure(ensure(capabilites, 'textDocument'), 'rangeFormatting').dynamicRegistration = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        const options = this.getRegistrationOptions(documentSelector, capabilities.documentRangeFormattingProvider);\r\n        if (!options) {\r\n            return;\r\n        }\r\n        this.register(this.messages, { id: UUID.generateUuid(), registerOptions: options });\r\n    }\r\n    registerLanguageProvider(options) {\r\n        let client = this._client;\r\n        let provideDocumentRangeFormattingEdits = (document, range, options, token) => {\r\n            let params = {\r\n                textDocument: client.code2ProtocolConverter.asTextDocumentIdentifier(document),\r\n                range: client.code2ProtocolConverter.asRange(range),\r\n                options: client.code2ProtocolConverter.asFormattingOptions(options)\r\n            };\r\n            return client.sendRequest(vscode_languageserver_protocol_1.DocumentRangeFormattingRequest.type, params, token).then(client.protocol2CodeConverter.asTextEdits, (error) => {\r\n                client.logFailedRequest(vscode_languageserver_protocol_1.DocumentRangeFormattingRequest.type, error);\r\n                return Promise.resolve([]);\r\n            });\r\n        };\r\n        let middleware = client.clientOptions.middleware;\r\n        return vscode_1.languages.registerDocumentRangeFormattingEditProvider(options.documentSelector, {\r\n            provideDocumentRangeFormattingEdits: (document, range, options, token) => {\r\n                return middleware.provideDocumentRangeFormattingEdits\r\n                    ? middleware.provideDocumentRangeFormattingEdits(document, range, options, token, provideDocumentRangeFormattingEdits)\r\n                    : provideDocumentRangeFormattingEdits(document, range, options, token);\r\n            }\r\n        });\r\n    }\r\n}\r\nclass DocumentOnTypeFormattingFeature extends TextDocumentFeature {\r\n    constructor(client) {\r\n        super(client, vscode_languageserver_protocol_1.DocumentOnTypeFormattingRequest.type);\r\n    }\r\n    fillClientCapabilities(capabilites) {\r\n        ensure(ensure(capabilites, 'textDocument'), 'onTypeFormatting').dynamicRegistration = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        const options = this.getRegistrationOptions(documentSelector, capabilities.documentOnTypeFormattingProvider);\r\n        if (!options) {\r\n            return;\r\n        }\r\n        this.register(this.messages, { id: UUID.generateUuid(), registerOptions: options });\r\n    }\r\n    registerLanguageProvider(options) {\r\n        let client = this._client;\r\n        let moreTriggerCharacter = options.moreTriggerCharacter || [];\r\n        let provideOnTypeFormattingEdits = (document, position, ch, options, token) => {\r\n            let params = {\r\n                textDocument: client.code2ProtocolConverter.asTextDocumentIdentifier(document),\r\n                position: client.code2ProtocolConverter.asPosition(position),\r\n                ch: ch,\r\n                options: client.code2ProtocolConverter.asFormattingOptions(options)\r\n            };\r\n            return client.sendRequest(vscode_languageserver_protocol_1.DocumentOnTypeFormattingRequest.type, params, token).then(client.protocol2CodeConverter.asTextEdits, (error) => {\r\n                client.logFailedRequest(vscode_languageserver_protocol_1.DocumentOnTypeFormattingRequest.type, error);\r\n                return Promise.resolve([]);\r\n            });\r\n        };\r\n        let middleware = client.clientOptions.middleware;\r\n        return vscode_1.languages.registerOnTypeFormattingEditProvider(options.documentSelector, {\r\n            provideOnTypeFormattingEdits: (document, position, ch, options, token) => {\r\n                return middleware.provideOnTypeFormattingEdits\r\n                    ? middleware.provideOnTypeFormattingEdits(document, position, ch, options, token, provideOnTypeFormattingEdits)\r\n                    : provideOnTypeFormattingEdits(document, position, ch, options, token);\r\n            }\r\n        }, options.firstTriggerCharacter, ...moreTriggerCharacter);\r\n    }\r\n}\r\nclass RenameFeature extends TextDocumentFeature {\r\n    constructor(client) {\r\n        super(client, vscode_languageserver_protocol_1.RenameRequest.type);\r\n    }\r\n    fillClientCapabilities(capabilites) {\r\n        let rename = ensure(ensure(capabilites, 'textDocument'), 'rename');\r\n        rename.dynamicRegistration = true;\r\n        rename.prepareSupport = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        const options = this.getRegistrationOptions(documentSelector, capabilities.renameProvider);\r\n        if (!options) {\r\n            return;\r\n        }\r\n        if (Is.boolean(capabilities.renameProvider)) {\r\n            options.prepareProvider = false;\r\n        }\r\n        this.register(this.messages, { id: UUID.generateUuid(), registerOptions: options });\r\n    }\r\n    registerLanguageProvider(options) {\r\n        let client = this._client;\r\n        let provideRenameEdits = (document, position, newName, token) => {\r\n            let params = {\r\n                textDocument: client.code2ProtocolConverter.asTextDocumentIdentifier(document),\r\n                position: client.code2ProtocolConverter.asPosition(position),\r\n                newName: newName\r\n            };\r\n            return client.sendRequest(vscode_languageserver_protocol_1.RenameRequest.type, params, token).then(client.protocol2CodeConverter.asWorkspaceEdit, (error) => {\r\n                client.logFailedRequest(vscode_languageserver_protocol_1.RenameRequest.type, error);\r\n                return Promise.reject(new Error(error.message));\r\n            });\r\n        };\r\n        let prepareRename = (document, position, token) => {\r\n            let params = {\r\n                textDocument: client.code2ProtocolConverter.asTextDocumentIdentifier(document),\r\n                position: client.code2ProtocolConverter.asPosition(position),\r\n            };\r\n            return client.sendRequest(vscode_languageserver_protocol_1.PrepareRenameRequest.type, params, token).then((result) => {\r\n                if (vscode_languageserver_protocol_1.Range.is(result)) {\r\n                    return client.protocol2CodeConverter.asRange(result);\r\n                }\r\n                else if (result && vscode_languageserver_protocol_1.Range.is(result.range)) {\r\n                    return {\r\n                        range: client.protocol2CodeConverter.asRange(result.range),\r\n                        placeholder: result.placeholder\r\n                    };\r\n                }\r\n                // To cancel the rename vscode API expects a rejected promise.\r\n                return Promise.reject(new Error(`The element can't be renamed.`));\r\n            }, (error) => {\r\n                client.logFailedRequest(vscode_languageserver_protocol_1.PrepareRenameRequest.type, error);\r\n                return Promise.reject(new Error(error.message));\r\n            });\r\n        };\r\n        let middleware = client.clientOptions.middleware;\r\n        return vscode_1.languages.registerRenameProvider(options.documentSelector, {\r\n            provideRenameEdits: (document, position, newName, token) => {\r\n                return middleware.provideRenameEdits\r\n                    ? middleware.provideRenameEdits(document, position, newName, token, provideRenameEdits)\r\n                    : provideRenameEdits(document, position, newName, token);\r\n            },\r\n            prepareRename: options.prepareProvider\r\n                ? (document, position, token) => {\r\n                    return middleware.prepareRename\r\n                        ? middleware.prepareRename(document, position, token, prepareRename)\r\n                        : prepareRename(document, position, token);\r\n                }\r\n                : undefined\r\n        });\r\n    }\r\n}\r\nclass DocumentLinkFeature extends TextDocumentFeature {\r\n    constructor(client) {\r\n        super(client, vscode_languageserver_protocol_1.DocumentLinkRequest.type);\r\n    }\r\n    fillClientCapabilities(capabilites) {\r\n        ensure(ensure(capabilites, 'textDocument'), 'documentLink').dynamicRegistration = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        const options = this.getRegistrationOptions(documentSelector, capabilities.documentLinkProvider);\r\n        if (!options) {\r\n            return;\r\n        }\r\n        this.register(this.messages, { id: UUID.generateUuid(), registerOptions: options });\r\n    }\r\n    registerLanguageProvider(options) {\r\n        let client = this._client;\r\n        let provideDocumentLinks = (document, token) => {\r\n            return client.sendRequest(vscode_languageserver_protocol_1.DocumentLinkRequest.type, client.code2ProtocolConverter.asDocumentLinkParams(document), token).then(client.protocol2CodeConverter.asDocumentLinks, (error) => {\r\n                client.logFailedRequest(vscode_languageserver_protocol_1.DocumentLinkRequest.type, error);\r\n                Promise.resolve(new Error(error.message));\r\n            });\r\n        };\r\n        let resolveDocumentLink = (link, token) => {\r\n            return client.sendRequest(vscode_languageserver_protocol_1.DocumentLinkResolveRequest.type, client.code2ProtocolConverter.asDocumentLink(link), token).then(client.protocol2CodeConverter.asDocumentLink, (error) => {\r\n                client.logFailedRequest(vscode_languageserver_protocol_1.DocumentLinkResolveRequest.type, error);\r\n                Promise.resolve(new Error(error.message));\r\n            });\r\n        };\r\n        let middleware = client.clientOptions.middleware;\r\n        return vscode_1.languages.registerDocumentLinkProvider(options.documentSelector, {\r\n            provideDocumentLinks: (document, token) => {\r\n                return middleware.provideDocumentLinks\r\n                    ? middleware.provideDocumentLinks(document, token, provideDocumentLinks)\r\n                    : provideDocumentLinks(document, token);\r\n            },\r\n            resolveDocumentLink: options.resolveProvider\r\n                ? (link, token) => {\r\n                    return middleware.resolveDocumentLink\r\n                        ? middleware.resolveDocumentLink(link, token, resolveDocumentLink)\r\n                        : resolveDocumentLink(link, token);\r\n                }\r\n                : undefined\r\n        });\r\n    }\r\n}\r\nclass ConfigurationFeature {\r\n    constructor(_client) {\r\n        this._client = _client;\r\n        this._listeners = new Map();\r\n    }\r\n    get messages() {\r\n        return vscode_languageserver_protocol_1.DidChangeConfigurationNotification.type;\r\n    }\r\n    fillClientCapabilities(capabilities) {\r\n        ensure(ensure(capabilities, 'workspace'), 'didChangeConfiguration').dynamicRegistration = true;\r\n    }\r\n    initialize() {\r\n        let section = this._client.clientOptions.synchronize.configurationSection;\r\n        if (section !== void 0) {\r\n            this.register(this.messages, {\r\n                id: UUID.generateUuid(),\r\n                registerOptions: {\r\n                    section: section\r\n                }\r\n            });\r\n        }\r\n    }\r\n    register(_message, data) {\r\n        let disposable = vscode_1.workspace.onDidChangeConfiguration((event) => {\r\n            this.onDidChangeConfiguration(data.registerOptions.section, event);\r\n        });\r\n        this._listeners.set(data.id, disposable);\r\n        if (data.registerOptions.section !== void 0) {\r\n            this.onDidChangeConfiguration(data.registerOptions.section, undefined);\r\n        }\r\n    }\r\n    unregister(id) {\r\n        let disposable = this._listeners.get(id);\r\n        if (disposable) {\r\n            this._listeners.delete(id);\r\n            disposable.dispose();\r\n        }\r\n    }\r\n    dispose() {\r\n        for (let disposable of this._listeners.values()) {\r\n            disposable.dispose();\r\n        }\r\n        this._listeners.clear();\r\n    }\r\n    onDidChangeConfiguration(configurationSection, event) {\r\n        let sections;\r\n        if (Is.string(configurationSection)) {\r\n            sections = [configurationSection];\r\n        }\r\n        else {\r\n            sections = configurationSection;\r\n        }\r\n        if (sections !== void 0 && event !== void 0) {\r\n            let affected = sections.some((section) => event.affectsConfiguration(section));\r\n            if (!affected) {\r\n                return;\r\n            }\r\n        }\r\n        let didChangeConfiguration = (sections) => {\r\n            if (sections === void 0) {\r\n                this._client.sendNotification(vscode_languageserver_protocol_1.DidChangeConfigurationNotification.type, { settings: null });\r\n                return;\r\n            }\r\n            this._client.sendNotification(vscode_languageserver_protocol_1.DidChangeConfigurationNotification.type, { settings: this.extractSettingsInformation(sections) });\r\n        };\r\n        let middleware = this.getMiddleware();\r\n        middleware\r\n            ? middleware(sections, didChangeConfiguration)\r\n            : didChangeConfiguration(sections);\r\n    }\r\n    extractSettingsInformation(keys) {\r\n        function ensurePath(config, path) {\r\n            let current = config;\r\n            for (let i = 0; i < path.length - 1; i++) {\r\n                let obj = current[path[i]];\r\n                if (!obj) {\r\n                    obj = Object.create(null);\r\n                    current[path[i]] = obj;\r\n                }\r\n                current = obj;\r\n            }\r\n            return current;\r\n        }\r\n        let resource = this._client.clientOptions.workspaceFolder\r\n            ? this._client.clientOptions.workspaceFolder.uri\r\n            : undefined;\r\n        let result = Object.create(null);\r\n        for (let i = 0; i < keys.length; i++) {\r\n            let key = keys[i];\r\n            let index = key.indexOf('.');\r\n            let config = null;\r\n            if (index >= 0) {\r\n                config = vscode_1.workspace.getConfiguration(key.substr(0, index), resource).get(key.substr(index + 1));\r\n            }\r\n            else {\r\n                config = vscode_1.workspace.getConfiguration(key, resource);\r\n            }\r\n            if (config) {\r\n                let path = keys[i].split('.');\r\n                ensurePath(result, path)[path[path.length - 1]] = config;\r\n            }\r\n        }\r\n        return result;\r\n    }\r\n    getMiddleware() {\r\n        let middleware = this._client.clientOptions.middleware;\r\n        if (middleware.workspace && middleware.workspace.didChangeConfiguration) {\r\n            return middleware.workspace.didChangeConfiguration;\r\n        }\r\n        else {\r\n            return undefined;\r\n        }\r\n    }\r\n}\r\nclass ExecuteCommandFeature {\r\n    constructor(_client) {\r\n        this._client = _client;\r\n        this._commands = new Map();\r\n    }\r\n    get messages() {\r\n        return vscode_languageserver_protocol_1.ExecuteCommandRequest.type;\r\n    }\r\n    fillClientCapabilities(capabilities) {\r\n        ensure(ensure(capabilities, 'workspace'), 'executeCommand').dynamicRegistration = true;\r\n    }\r\n    initialize(capabilities) {\r\n        if (!capabilities.executeCommandProvider) {\r\n            return;\r\n        }\r\n        this.register(this.messages, {\r\n            id: UUID.generateUuid(),\r\n            registerOptions: Object.assign({}, capabilities.executeCommandProvider)\r\n        });\r\n    }\r\n    register(_message, data) {\r\n        let client = this._client;\r\n        if (data.registerOptions.commands) {\r\n            let disposeables = [];\r\n            for (const command of data.registerOptions.commands) {\r\n                disposeables.push(vscode_1.commands.registerCommand(command, (...args) => {\r\n                    let params = {\r\n                        command,\r\n                        arguments: args\r\n                    };\r\n                    return client.sendRequest(vscode_languageserver_protocol_1.ExecuteCommandRequest.type, params).then(undefined, (error) => {\r\n                        client.logFailedRequest(vscode_languageserver_protocol_1.ExecuteCommandRequest.type, error);\r\n                    });\r\n                }));\r\n            }\r\n            this._commands.set(data.id, disposeables);\r\n        }\r\n    }\r\n    unregister(id) {\r\n        let disposeables = this._commands.get(id);\r\n        if (disposeables) {\r\n            disposeables.forEach(disposable => disposable.dispose());\r\n        }\r\n    }\r\n    dispose() {\r\n        this._commands.forEach((value) => {\r\n            value.forEach(disposable => disposable.dispose());\r\n        });\r\n        this._commands.clear();\r\n    }\r\n}\r\nvar MessageTransports;\r\n(function (MessageTransports) {\r\n    function is(value) {\r\n        let candidate = value;\r\n        return candidate && vscode_languageserver_protocol_1.MessageReader.is(value.reader) && vscode_languageserver_protocol_1.MessageWriter.is(value.writer);\r\n    }\r\n    MessageTransports.is = is;\r\n})(MessageTransports = exports.MessageTransports || (exports.MessageTransports = {}));\r\nclass OnReady {\r\n    constructor(_resolve, _reject) {\r\n        this._resolve = _resolve;\r\n        this._reject = _reject;\r\n        this._used = false;\r\n    }\r\n    get isUsed() {\r\n        return this._used;\r\n    }\r\n    resolve() {\r\n        this._used = true;\r\n        this._resolve();\r\n    }\r\n    reject(error) {\r\n        this._used = true;\r\n        this._reject(error);\r\n    }\r\n}\r\nclass BaseLanguageClient {\r\n    constructor(id, name, clientOptions) {\r\n        this._traceFormat = vscode_languageserver_protocol_1.TraceFormat.Text;\r\n        this._features = [];\r\n        this._method2Message = new Map();\r\n        this._dynamicFeatures = new Map();\r\n        this._id = id;\r\n        this._name = name;\r\n        clientOptions = clientOptions || {};\r\n        this._clientOptions = {\r\n            documentSelector: clientOptions.documentSelector || [],\r\n            synchronize: clientOptions.synchronize || {},\r\n            diagnosticCollectionName: clientOptions.diagnosticCollectionName,\r\n            outputChannelName: clientOptions.outputChannelName || this._name,\r\n            revealOutputChannelOn: clientOptions.revealOutputChannelOn || RevealOutputChannelOn.Error,\r\n            stdioEncoding: clientOptions.stdioEncoding || 'utf8',\r\n            initializationOptions: clientOptions.initializationOptions,\r\n            initializationFailedHandler: clientOptions.initializationFailedHandler,\r\n            progressOnInitialization: !!clientOptions.progressOnInitialization,\r\n            errorHandler: clientOptions.errorHandler || new DefaultErrorHandler(this._name),\r\n            middleware: clientOptions.middleware || {},\r\n            uriConverters: clientOptions.uriConverters,\r\n            workspaceFolder: clientOptions.workspaceFolder\r\n        };\r\n        this._clientOptions.synchronize = this._clientOptions.synchronize || {};\r\n        this.state = ClientState.Initial;\r\n        this._connectionPromise = undefined;\r\n        this._resolvedConnection = undefined;\r\n        this._initializeResult = undefined;\r\n        if (clientOptions.outputChannel) {\r\n            this._outputChannel = clientOptions.outputChannel;\r\n            this._disposeOutputChannel = false;\r\n        }\r\n        else {\r\n            this._outputChannel = undefined;\r\n            this._disposeOutputChannel = true;\r\n        }\r\n        this._traceOutputChannel = clientOptions.traceOutputChannel;\r\n        this._listeners = undefined;\r\n        this._providers = undefined;\r\n        this._diagnostics = undefined;\r\n        this._fileEvents = [];\r\n        this._fileEventDelayer = new async_1.Delayer(250);\r\n        this._onReady = new Promise((resolve, reject) => {\r\n            this._onReadyCallbacks = new OnReady(resolve, reject);\r\n        });\r\n        this._onStop = undefined;\r\n        this._telemetryEmitter = new vscode_languageserver_protocol_1.Emitter();\r\n        this._stateChangeEmitter = new vscode_languageserver_protocol_1.Emitter();\r\n        this._tracer = {\r\n            log: (messageOrDataObject, data) => {\r\n                if (Is.string(messageOrDataObject)) {\r\n                    this.logTrace(messageOrDataObject, data);\r\n                }\r\n                else {\r\n                    this.logObjectTrace(messageOrDataObject);\r\n                }\r\n            },\r\n        };\r\n        this._c2p = c2p.createConverter(clientOptions.uriConverters ? clientOptions.uriConverters.code2Protocol : undefined);\r\n        this._p2c = p2c.createConverter(clientOptions.uriConverters ? clientOptions.uriConverters.protocol2Code : undefined);\r\n        this._syncedDocuments = new Map();\r\n        this.registerBuiltinFeatures();\r\n    }\r\n    get state() {\r\n        return this._state;\r\n    }\r\n    set state(value) {\r\n        let oldState = this.getPublicState();\r\n        this._state = value;\r\n        let newState = this.getPublicState();\r\n        if (newState !== oldState) {\r\n            this._stateChangeEmitter.fire({ oldState, newState });\r\n        }\r\n    }\r\n    getPublicState() {\r\n        if (this.state === ClientState.Running) {\r\n            return State.Running;\r\n        }\r\n        else if (this.state === ClientState.Starting) {\r\n            return State.Starting;\r\n        }\r\n        else {\r\n            return State.Stopped;\r\n        }\r\n    }\r\n    get initializeResult() {\r\n        return this._initializeResult;\r\n    }\r\n    sendRequest(type, ...params) {\r\n        if (!this.isConnectionActive()) {\r\n            throw new Error('Language client is not ready yet');\r\n        }\r\n        this.forceDocumentSync();\r\n        try {\r\n            return this._resolvedConnection.sendRequest(type, ...params);\r\n        }\r\n        catch (error) {\r\n            this.error(`Sending request ${Is.string(type) ? type : type.method} failed.`, error);\r\n            throw error;\r\n        }\r\n    }\r\n    onRequest(type, handler) {\r\n        if (!this.isConnectionActive()) {\r\n            throw new Error('Language client is not ready yet');\r\n        }\r\n        try {\r\n            this._resolvedConnection.onRequest(type, handler);\r\n        }\r\n        catch (error) {\r\n            this.error(`Registering request handler ${Is.string(type) ? type : type.method} failed.`, error);\r\n            throw error;\r\n        }\r\n    }\r\n    sendNotification(type, params) {\r\n        if (!this.isConnectionActive()) {\r\n            throw new Error('Language client is not ready yet');\r\n        }\r\n        this.forceDocumentSync();\r\n        try {\r\n            this._resolvedConnection.sendNotification(type, params);\r\n        }\r\n        catch (error) {\r\n            this.error(`Sending notification ${Is.string(type) ? type : type.method} failed.`, error);\r\n            throw error;\r\n        }\r\n    }\r\n    onNotification(type, handler) {\r\n        if (!this.isConnectionActive()) {\r\n            throw new Error('Language client is not ready yet');\r\n        }\r\n        try {\r\n            this._resolvedConnection.onNotification(type, handler);\r\n        }\r\n        catch (error) {\r\n            this.error(`Registering notification handler ${Is.string(type) ? type : type.method} failed.`, error);\r\n            throw error;\r\n        }\r\n    }\r\n    onProgress(type, token, handler) {\r\n        if (!this.isConnectionActive()) {\r\n            throw new Error('Language client is not ready yet');\r\n        }\r\n        try {\r\n            return this._resolvedConnection.onProgress(type, token, handler);\r\n        }\r\n        catch (error) {\r\n            this.error(`Registering progress handler for token ${token} failed.`, error);\r\n            throw error;\r\n        }\r\n    }\r\n    sendProgress(type, token, value) {\r\n        if (!this.isConnectionActive()) {\r\n            throw new Error('Language client is not ready yet');\r\n        }\r\n        this.forceDocumentSync();\r\n        try {\r\n            this._resolvedConnection.sendProgress(type, token, value);\r\n        }\r\n        catch (error) {\r\n            this.error(`Sending progress for token ${token} failed.`, error);\r\n            throw error;\r\n        }\r\n    }\r\n    get clientOptions() {\r\n        return this._clientOptions;\r\n    }\r\n    get protocol2CodeConverter() {\r\n        return this._p2c;\r\n    }\r\n    get code2ProtocolConverter() {\r\n        return this._c2p;\r\n    }\r\n    get onTelemetry() {\r\n        return this._telemetryEmitter.event;\r\n    }\r\n    get onDidChangeState() {\r\n        return this._stateChangeEmitter.event;\r\n    }\r\n    get outputChannel() {\r\n        if (!this._outputChannel) {\r\n            this._outputChannel = vscode_1.window.createOutputChannel(this._clientOptions.outputChannelName ? this._clientOptions.outputChannelName : this._name);\r\n        }\r\n        return this._outputChannel;\r\n    }\r\n    get traceOutputChannel() {\r\n        if (this._traceOutputChannel) {\r\n            return this._traceOutputChannel;\r\n        }\r\n        return this.outputChannel;\r\n    }\r\n    get diagnostics() {\r\n        return this._diagnostics;\r\n    }\r\n    createDefaultErrorHandler() {\r\n        return new DefaultErrorHandler(this._name);\r\n    }\r\n    set trace(value) {\r\n        this._trace = value;\r\n        this.onReady().then(() => {\r\n            this.resolveConnection().then((connection) => {\r\n                connection.trace(this._trace, this._tracer, {\r\n                    sendNotification: false,\r\n                    traceFormat: this._traceFormat\r\n                });\r\n            });\r\n        }, () => {\r\n        });\r\n    }\r\n    data2String(data) {\r\n        if (data instanceof vscode_languageserver_protocol_1.ResponseError) {\r\n            const responseError = data;\r\n            return `  Message: ${responseError.message}\\n  Code: ${responseError.code} ${responseError.data ? '\\n' + responseError.data.toString() : ''}`;\r\n        }\r\n        if (data instanceof Error) {\r\n            if (Is.string(data.stack)) {\r\n                return data.stack;\r\n            }\r\n            return data.message;\r\n        }\r\n        if (Is.string(data)) {\r\n            return data;\r\n        }\r\n        return data.toString();\r\n    }\r\n    info(message, data) {\r\n        this.outputChannel.appendLine(`[Info  - ${(new Date().toLocaleTimeString())}] ${message}`);\r\n        if (data) {\r\n            this.outputChannel.appendLine(this.data2String(data));\r\n        }\r\n        if (this._clientOptions.revealOutputChannelOn <= RevealOutputChannelOn.Info) {\r\n            this.showNotificationMessage();\r\n        }\r\n    }\r\n    warn(message, data) {\r\n        this.outputChannel.appendLine(`[Warn  - ${(new Date().toLocaleTimeString())}] ${message}`);\r\n        if (data) {\r\n            this.outputChannel.appendLine(this.data2String(data));\r\n        }\r\n        if (this._clientOptions.revealOutputChannelOn <= RevealOutputChannelOn.Warn) {\r\n            this.showNotificationMessage();\r\n        }\r\n    }\r\n    error(message, data) {\r\n        this.outputChannel.appendLine(`[Error - ${(new Date().toLocaleTimeString())}] ${message}`);\r\n        if (data) {\r\n            this.outputChannel.appendLine(this.data2String(data));\r\n        }\r\n        if (this._clientOptions.revealOutputChannelOn <= RevealOutputChannelOn.Error) {\r\n            this.showNotificationMessage();\r\n        }\r\n    }\r\n    showNotificationMessage() {\r\n        vscode_1.window.showInformationMessage('A request has failed. See the output for more information.', 'Go to output').then(() => {\r\n            this.outputChannel.show(true);\r\n        });\r\n    }\r\n    logTrace(message, data) {\r\n        this.traceOutputChannel.appendLine(`[Trace - ${(new Date().toLocaleTimeString())}] ${message}`);\r\n        if (data) {\r\n            this.traceOutputChannel.appendLine(this.data2String(data));\r\n        }\r\n    }\r\n    logObjectTrace(data) {\r\n        if (data.isLSPMessage && data.type) {\r\n            this.traceOutputChannel.append(`[LSP   - ${(new Date().toLocaleTimeString())}] `);\r\n        }\r\n        else {\r\n            this.traceOutputChannel.append(`[Trace - ${(new Date().toLocaleTimeString())}] `);\r\n        }\r\n        if (data) {\r\n            this.traceOutputChannel.appendLine(`${JSON.stringify(data)}`);\r\n        }\r\n    }\r\n    needsStart() {\r\n        return this.state === ClientState.Initial || this.state === ClientState.Stopping || this.state === ClientState.Stopped;\r\n    }\r\n    needsStop() {\r\n        return this.state === ClientState.Starting || this.state === ClientState.Running;\r\n    }\r\n    onReady() {\r\n        return this._onReady;\r\n    }\r\n    isConnectionActive() {\r\n        return this.state === ClientState.Running && !!this._resolvedConnection;\r\n    }\r\n    start() {\r\n        if (this._onReadyCallbacks.isUsed) {\r\n            this._onReady = new Promise((resolve, reject) => {\r\n                this._onReadyCallbacks = new OnReady(resolve, reject);\r\n            });\r\n        }\r\n        this._listeners = [];\r\n        this._providers = [];\r\n        // If we restart then the diagnostics collection is reused.\r\n        if (!this._diagnostics) {\r\n            this._diagnostics = this._clientOptions.diagnosticCollectionName\r\n                ? vscode_1.languages.createDiagnosticCollection(this._clientOptions.diagnosticCollectionName)\r\n                : vscode_1.languages.createDiagnosticCollection();\r\n        }\r\n        this.state = ClientState.Starting;\r\n        this.resolveConnection().then((connection) => {\r\n            connection.onLogMessage((message) => {\r\n                switch (message.type) {\r\n                    case vscode_languageserver_protocol_1.MessageType.Error:\r\n                        this.error(message.message);\r\n                        break;\r\n                    case vscode_languageserver_protocol_1.MessageType.Warning:\r\n                        this.warn(message.message);\r\n                        break;\r\n                    case vscode_languageserver_protocol_1.MessageType.Info:\r\n                        this.info(message.message);\r\n                        break;\r\n                    default:\r\n                        this.outputChannel.appendLine(message.message);\r\n                }\r\n            });\r\n            connection.onShowMessage((message) => {\r\n                switch (message.type) {\r\n                    case vscode_languageserver_protocol_1.MessageType.Error:\r\n                        vscode_1.window.showErrorMessage(message.message);\r\n                        break;\r\n                    case vscode_languageserver_protocol_1.MessageType.Warning:\r\n                        vscode_1.window.showWarningMessage(message.message);\r\n                        break;\r\n                    case vscode_languageserver_protocol_1.MessageType.Info:\r\n                        vscode_1.window.showInformationMessage(message.message);\r\n                        break;\r\n                    default:\r\n                        vscode_1.window.showInformationMessage(message.message);\r\n                }\r\n            });\r\n            connection.onRequest(vscode_languageserver_protocol_1.ShowMessageRequest.type, (params) => {\r\n                let messageFunc;\r\n                switch (params.type) {\r\n                    case vscode_languageserver_protocol_1.MessageType.Error:\r\n                        messageFunc = vscode_1.window.showErrorMessage;\r\n                        break;\r\n                    case vscode_languageserver_protocol_1.MessageType.Warning:\r\n                        messageFunc = vscode_1.window.showWarningMessage;\r\n                        break;\r\n                    case vscode_languageserver_protocol_1.MessageType.Info:\r\n                        messageFunc = vscode_1.window.showInformationMessage;\r\n                        break;\r\n                    default:\r\n                        messageFunc = vscode_1.window.showInformationMessage;\r\n                }\r\n                let actions = params.actions || [];\r\n                return messageFunc(params.message, ...actions);\r\n            });\r\n            connection.onTelemetry((data) => {\r\n                this._telemetryEmitter.fire(data);\r\n            });\r\n            connection.listen();\r\n            // Error is handled in the initialize call.\r\n            return this.initialize(connection);\r\n        }).then(undefined, (error) => {\r\n            this.state = ClientState.StartFailed;\r\n            this._onReadyCallbacks.reject(error);\r\n            this.error('Starting client failed', error);\r\n            vscode_1.window.showErrorMessage(`Couldn't start client ${this._name}`);\r\n        });\r\n        return new vscode_1.Disposable(() => {\r\n            if (this.needsStop()) {\r\n                this.stop();\r\n            }\r\n        });\r\n    }\r\n    resolveConnection() {\r\n        if (!this._connectionPromise) {\r\n            this._connectionPromise = this.createConnection();\r\n        }\r\n        return this._connectionPromise;\r\n    }\r\n    initialize(connection) {\r\n        this.refreshTrace(connection, false);\r\n        let initOption = this._clientOptions.initializationOptions;\r\n        let rootPath = this._clientOptions.workspaceFolder\r\n            ? this._clientOptions.workspaceFolder.uri.fsPath\r\n            : this._clientGetRootPath();\r\n        let initParams = {\r\n            processId: process.pid,\r\n            rootPath: rootPath ? rootPath : null,\r\n            rootUri: rootPath ? this._c2p.asUri(vscode_1.Uri.file(rootPath)) : null,\r\n            capabilities: this.computeClientCapabilities(),\r\n            initializationOptions: Is.func(initOption) ? initOption() : initOption,\r\n            trace: vscode_languageserver_protocol_1.Trace.toString(this._trace),\r\n            workspaceFolders: null\r\n        };\r\n        this.fillInitializeParams(initParams);\r\n        if (this._clientOptions.progressOnInitialization) {\r\n            const token = UUID.generateUuid();\r\n            const part = new progressPart_1.ProgressPart(connection, token);\r\n            initParams.workDoneToken = token;\r\n            return this.doInitialize(connection, initParams).then((result) => {\r\n                part.done();\r\n                return result;\r\n            }, (error) => {\r\n                part.cancel();\r\n                throw error;\r\n            });\r\n        }\r\n        else {\r\n            return this.doInitialize(connection, initParams);\r\n        }\r\n    }\r\n    doInitialize(connection, initParams) {\r\n        return connection.initialize(initParams).then((result) => {\r\n            this._resolvedConnection = connection;\r\n            this._initializeResult = result;\r\n            this.state = ClientState.Running;\r\n            let textDocumentSyncOptions = undefined;\r\n            if (Is.number(result.capabilities.textDocumentSync)) {\r\n                if (result.capabilities.textDocumentSync === vscode_languageserver_protocol_1.TextDocumentSyncKind.None) {\r\n                    textDocumentSyncOptions = {\r\n                        openClose: false,\r\n                        change: vscode_languageserver_protocol_1.TextDocumentSyncKind.None,\r\n                        save: undefined\r\n                    };\r\n                }\r\n                else {\r\n                    textDocumentSyncOptions = {\r\n                        openClose: true,\r\n                        change: result.capabilities.textDocumentSync,\r\n                        save: {\r\n                            includeText: false\r\n                        }\r\n                    };\r\n                }\r\n            }\r\n            else if (result.capabilities.textDocumentSync !== void 0 && result.capabilities.textDocumentSync !== null) {\r\n                textDocumentSyncOptions = result.capabilities.textDocumentSync;\r\n            }\r\n            this._capabilities = Object.assign({}, result.capabilities, { resolvedTextDocumentSync: textDocumentSyncOptions });\r\n            connection.onDiagnostics(params => this.handleDiagnostics(params));\r\n            connection.onRequest(vscode_languageserver_protocol_1.RegistrationRequest.type, params => this.handleRegistrationRequest(params));\r\n            // See https://github.com/Microsoft/vscode-languageserver-node/issues/199\r\n            connection.onRequest('client/registerFeature', params => this.handleRegistrationRequest(params));\r\n            connection.onRequest(vscode_languageserver_protocol_1.UnregistrationRequest.type, params => this.handleUnregistrationRequest(params));\r\n            // See https://github.com/Microsoft/vscode-languageserver-node/issues/199\r\n            connection.onRequest('client/unregisterFeature', params => this.handleUnregistrationRequest(params));\r\n            connection.onRequest(vscode_languageserver_protocol_1.ApplyWorkspaceEditRequest.type, params => this.handleApplyWorkspaceEdit(params));\r\n            connection.sendNotification(vscode_languageserver_protocol_1.InitializedNotification.type, {});\r\n            this.hookFileEvents(connection);\r\n            this.hookConfigurationChanged(connection);\r\n            this.initializeFeatures(connection);\r\n            this._onReadyCallbacks.resolve();\r\n            return result;\r\n        }).then(undefined, (error) => {\r\n            if (this._clientOptions.initializationFailedHandler) {\r\n                if (this._clientOptions.initializationFailedHandler(error)) {\r\n                    this.initialize(connection);\r\n                }\r\n                else {\r\n                    this.stop();\r\n                    this._onReadyCallbacks.reject(error);\r\n                }\r\n            }\r\n            else if (error instanceof vscode_languageserver_protocol_1.ResponseError && error.data && error.data.retry) {\r\n                vscode_1.window.showErrorMessage(error.message, { title: 'Retry', id: \"retry\" }).then(item => {\r\n                    if (item && item.id === 'retry') {\r\n                        this.initialize(connection);\r\n                    }\r\n                    else {\r\n                        this.stop();\r\n                        this._onReadyCallbacks.reject(error);\r\n                    }\r\n                });\r\n            }\r\n            else {\r\n                if (error && error.message) {\r\n                    vscode_1.window.showErrorMessage(error.message);\r\n                }\r\n                this.error('Server initialization failed.', error);\r\n                this.stop();\r\n                this._onReadyCallbacks.reject(error);\r\n            }\r\n        });\r\n    }\r\n    _clientGetRootPath() {\r\n        let folders = vscode_1.workspace.workspaceFolders;\r\n        if (!folders || folders.length === 0) {\r\n            return undefined;\r\n        }\r\n        let folder = folders[0];\r\n        if (folder.uri.scheme === 'file') {\r\n            return folder.uri.fsPath;\r\n        }\r\n        return undefined;\r\n    }\r\n    stop() {\r\n        this._initializeResult = undefined;\r\n        if (!this._connectionPromise) {\r\n            this.state = ClientState.Stopped;\r\n            return Promise.resolve();\r\n        }\r\n        if (this.state === ClientState.Stopping && this._onStop) {\r\n            return this._onStop;\r\n        }\r\n        this.state = ClientState.Stopping;\r\n        this.cleanUp(false);\r\n        // unhook listeners\r\n        return this._onStop = this.resolveConnection().then(connection => {\r\n            return connection.shutdown().then(() => {\r\n                connection.exit();\r\n                connection.dispose();\r\n                this.state = ClientState.Stopped;\r\n                this.cleanUpChannel();\r\n                this._onStop = undefined;\r\n                this._connectionPromise = undefined;\r\n                this._resolvedConnection = undefined;\r\n            });\r\n        });\r\n    }\r\n    cleanUp(channel = true, diagnostics = true) {\r\n        if (this._listeners) {\r\n            this._listeners.forEach(listener => listener.dispose());\r\n            this._listeners = undefined;\r\n        }\r\n        if (this._providers) {\r\n            this._providers.forEach(provider => provider.dispose());\r\n            this._providers = undefined;\r\n        }\r\n        if (this._syncedDocuments) {\r\n            this._syncedDocuments.clear();\r\n        }\r\n        for (let handler of this._dynamicFeatures.values()) {\r\n            handler.dispose();\r\n        }\r\n        if (channel) {\r\n            this.cleanUpChannel();\r\n        }\r\n        if (diagnostics && this._diagnostics) {\r\n            this._diagnostics.dispose();\r\n            this._diagnostics = undefined;\r\n        }\r\n    }\r\n    cleanUpChannel() {\r\n        if (this._outputChannel && this._disposeOutputChannel) {\r\n            this._outputChannel.dispose();\r\n            this._outputChannel = undefined;\r\n        }\r\n    }\r\n    notifyFileEvent(event) {\r\n        this._fileEvents.push(event);\r\n        this._fileEventDelayer.trigger(() => {\r\n            this.onReady().then(() => {\r\n                this.resolveConnection().then(connection => {\r\n                    if (this.isConnectionActive()) {\r\n                        this.forceDocumentSync();\r\n                        connection.didChangeWatchedFiles({ changes: this._fileEvents });\r\n                    }\r\n                    this._fileEvents = [];\r\n                });\r\n            }, (error) => {\r\n                this.error(`Notify file events failed.`, error);\r\n            });\r\n        });\r\n    }\r\n    forceDocumentSync() {\r\n        this._dynamicFeatures.get(vscode_languageserver_protocol_1.DidChangeTextDocumentNotification.type.method).forceDelivery();\r\n    }\r\n    handleDiagnostics(params) {\r\n        if (!this._diagnostics) {\r\n            return;\r\n        }\r\n        let uri = this._p2c.asUri(params.uri);\r\n        let diagnostics = this._p2c.asDiagnostics(params.diagnostics);\r\n        let middleware = this.clientOptions.middleware.handleDiagnostics;\r\n        if (middleware) {\r\n            middleware(uri, diagnostics, (uri, diagnostics) => this.setDiagnostics(uri, diagnostics));\r\n        }\r\n        else {\r\n            this.setDiagnostics(uri, diagnostics);\r\n        }\r\n    }\r\n    setDiagnostics(uri, diagnostics) {\r\n        if (!this._diagnostics) {\r\n            return;\r\n        }\r\n        this._diagnostics.set(uri, diagnostics);\r\n    }\r\n    createConnection() {\r\n        let errorHandler = (error, message, count) => {\r\n            this.handleConnectionError(error, message, count);\r\n        };\r\n        let closeHandler = () => {\r\n            this.handleConnectionClosed();\r\n        };\r\n        return this.createMessageTransports(this._clientOptions.stdioEncoding || 'utf8').then((transports) => {\r\n            return createConnection(transports.reader, transports.writer, errorHandler, closeHandler);\r\n        });\r\n    }\r\n    handleConnectionClosed() {\r\n        // Check whether this is a normal shutdown in progress or the client stopped normally.\r\n        if (this.state === ClientState.Stopping || this.state === ClientState.Stopped) {\r\n            return;\r\n        }\r\n        try {\r\n            if (this._resolvedConnection) {\r\n                this._resolvedConnection.dispose();\r\n            }\r\n        }\r\n        catch (error) {\r\n            // Disposing a connection could fail if error cases.\r\n        }\r\n        let action = CloseAction.DoNotRestart;\r\n        try {\r\n            action = this._clientOptions.errorHandler.closed();\r\n        }\r\n        catch (error) {\r\n            // Ignore errors coming from the error handler.\r\n        }\r\n        this._connectionPromise = undefined;\r\n        this._resolvedConnection = undefined;\r\n        if (action === CloseAction.DoNotRestart) {\r\n            this.error('Connection to server got closed. Server will not be restarted.');\r\n            this.state = ClientState.Stopped;\r\n            this.cleanUp(false, true);\r\n        }\r\n        else if (action === CloseAction.Restart) {\r\n            this.info('Connection to server got closed. Server will restart.');\r\n            this.cleanUp(false, false);\r\n            this.state = ClientState.Initial;\r\n            this.start();\r\n        }\r\n    }\r\n    handleConnectionError(error, message, count) {\r\n        let action = this._clientOptions.errorHandler.error(error, message, count);\r\n        if (action === ErrorAction.Shutdown) {\r\n            this.error('Connection to server is erroring. Shutting down server.');\r\n            this.stop();\r\n        }\r\n    }\r\n    hookConfigurationChanged(connection) {\r\n        vscode_1.workspace.onDidChangeConfiguration(() => {\r\n            this.refreshTrace(connection, true);\r\n        });\r\n    }\r\n    refreshTrace(connection, sendNotification = false) {\r\n        let config = vscode_1.workspace.getConfiguration(this._id);\r\n        let trace = vscode_languageserver_protocol_1.Trace.Off;\r\n        let traceFormat = vscode_languageserver_protocol_1.TraceFormat.Text;\r\n        if (config) {\r\n            const traceConfig = config.get('trace.server', 'off');\r\n            if (typeof traceConfig === 'string') {\r\n                trace = vscode_languageserver_protocol_1.Trace.fromString(traceConfig);\r\n            }\r\n            else {\r\n                trace = vscode_languageserver_protocol_1.Trace.fromString(config.get('trace.server.verbosity', 'off'));\r\n                traceFormat = vscode_languageserver_protocol_1.TraceFormat.fromString(config.get('trace.server.format', 'text'));\r\n            }\r\n        }\r\n        this._trace = trace;\r\n        this._traceFormat = traceFormat;\r\n        connection.trace(this._trace, this._tracer, {\r\n            sendNotification,\r\n            traceFormat: this._traceFormat\r\n        });\r\n    }\r\n    hookFileEvents(_connection) {\r\n        let fileEvents = this._clientOptions.synchronize.fileEvents;\r\n        if (!fileEvents) {\r\n            return;\r\n        }\r\n        let watchers;\r\n        if (Is.array(fileEvents)) {\r\n            watchers = fileEvents;\r\n        }\r\n        else {\r\n            watchers = [fileEvents];\r\n        }\r\n        if (!watchers) {\r\n            return;\r\n        }\r\n        this._dynamicFeatures.get(vscode_languageserver_protocol_1.DidChangeWatchedFilesNotification.type.method).registerRaw(UUID.generateUuid(), watchers);\r\n    }\r\n    registerFeatures(features) {\r\n        for (let feature of features) {\r\n            this.registerFeature(feature);\r\n        }\r\n    }\r\n    registerFeature(feature) {\r\n        this._features.push(feature);\r\n        if (DynamicFeature.is(feature)) {\r\n            let messages = feature.messages;\r\n            if (Array.isArray(messages)) {\r\n                for (let message of messages) {\r\n                    this._method2Message.set(message.method, message);\r\n                    this._dynamicFeatures.set(message.method, feature);\r\n                }\r\n            }\r\n            else {\r\n                this._method2Message.set(messages.method, messages);\r\n                this._dynamicFeatures.set(messages.method, feature);\r\n            }\r\n        }\r\n    }\r\n    registerBuiltinFeatures() {\r\n        this.registerFeature(new ConfigurationFeature(this));\r\n        this.registerFeature(new DidOpenTextDocumentFeature(this, this._syncedDocuments));\r\n        this.registerFeature(new DidChangeTextDocumentFeature(this));\r\n        this.registerFeature(new WillSaveFeature(this));\r\n        this.registerFeature(new WillSaveWaitUntilFeature(this));\r\n        this.registerFeature(new DidSaveTextDocumentFeature(this));\r\n        this.registerFeature(new DidCloseTextDocumentFeature(this, this._syncedDocuments));\r\n        this.registerFeature(new FileSystemWatcherFeature(this, (event) => this.notifyFileEvent(event)));\r\n        this.registerFeature(new CompletionItemFeature(this));\r\n        this.registerFeature(new HoverFeature(this));\r\n        this.registerFeature(new SignatureHelpFeature(this));\r\n        this.registerFeature(new DefinitionFeature(this));\r\n        this.registerFeature(new ReferencesFeature(this));\r\n        this.registerFeature(new DocumentHighlightFeature(this));\r\n        this.registerFeature(new DocumentSymbolFeature(this));\r\n        this.registerFeature(new WorkspaceSymbolFeature(this));\r\n        this.registerFeature(new CodeActionFeature(this));\r\n        this.registerFeature(new CodeLensFeature(this));\r\n        this.registerFeature(new DocumentFormattingFeature(this));\r\n        this.registerFeature(new DocumentRangeFormattingFeature(this));\r\n        this.registerFeature(new DocumentOnTypeFormattingFeature(this));\r\n        this.registerFeature(new RenameFeature(this));\r\n        this.registerFeature(new DocumentLinkFeature(this));\r\n        this.registerFeature(new ExecuteCommandFeature(this));\r\n    }\r\n    fillInitializeParams(params) {\r\n        for (let feature of this._features) {\r\n            if (Is.func(feature.fillInitializeParams)) {\r\n                feature.fillInitializeParams(params);\r\n            }\r\n        }\r\n    }\r\n    computeClientCapabilities() {\r\n        let result = {};\r\n        ensure(result, 'workspace').applyEdit = true;\r\n        let workspaceEdit = ensure(ensure(result, 'workspace'), 'workspaceEdit');\r\n        workspaceEdit.documentChanges = true;\r\n        workspaceEdit.resourceOperations = [vscode_languageserver_protocol_1.ResourceOperationKind.Create, vscode_languageserver_protocol_1.ResourceOperationKind.Rename, vscode_languageserver_protocol_1.ResourceOperationKind.Delete];\r\n        workspaceEdit.failureHandling = vscode_languageserver_protocol_1.FailureHandlingKind.TextOnlyTransactional;\r\n        let diagnostics = ensure(ensure(result, 'textDocument'), 'publishDiagnostics');\r\n        diagnostics.relatedInformation = true;\r\n        diagnostics.tagSupport = true;\r\n        for (let feature of this._features) {\r\n            feature.fillClientCapabilities(result);\r\n        }\r\n        return result;\r\n    }\r\n    initializeFeatures(_connection) {\r\n        let documentSelector = this._clientOptions.documentSelector;\r\n        for (let feature of this._features) {\r\n            feature.initialize(this._capabilities, documentSelector);\r\n        }\r\n    }\r\n    handleRegistrationRequest(params) {\r\n        return new Promise((resolve, reject) => {\r\n            for (let registration of params.registrations) {\r\n                const feature = this._dynamicFeatures.get(registration.method);\r\n                if (!feature) {\r\n                    reject(new Error(`No feature implementation for ${registration.method} found. Registration failed.`));\r\n                    return;\r\n                }\r\n                const options = registration.registerOptions || {};\r\n                options.documentSelector = options.documentSelector || this._clientOptions.documentSelector;\r\n                const data = {\r\n                    id: registration.id,\r\n                    registerOptions: options\r\n                };\r\n                feature.register(this._method2Message.get(registration.method), data);\r\n            }\r\n            resolve();\r\n        });\r\n    }\r\n    handleUnregistrationRequest(params) {\r\n        return new Promise((resolve, reject) => {\r\n            for (let unregistration of params.unregisterations) {\r\n                const feature = this._dynamicFeatures.get(unregistration.method);\r\n                if (!feature) {\r\n                    reject(new Error(`No feature implementation for ${unregistration.method} found. Unregistration failed.`));\r\n                    return;\r\n                }\r\n                feature.unregister(unregistration.id);\r\n            }\r\n            ;\r\n            resolve();\r\n        });\r\n    }\r\n    handleApplyWorkspaceEdit(params) {\r\n        // This is some sort of workaround since the version check should be done by VS Code in the Workspace.applyEdit.\r\n        // However doing it here adds some safety since the server can lag more behind then an extension.\r\n        let workspaceEdit = params.edit;\r\n        let openTextDocuments = new Map();\r\n        vscode_1.workspace.textDocuments.forEach((document) => openTextDocuments.set(document.uri.toString(), document));\r\n        let versionMismatch = false;\r\n        if (workspaceEdit.documentChanges) {\r\n            for (const change of workspaceEdit.documentChanges) {\r\n                if (vscode_languageserver_protocol_1.TextDocumentEdit.is(change) && change.textDocument.version && change.textDocument.version >= 0) {\r\n                    let textDocument = openTextDocuments.get(change.textDocument.uri);\r\n                    if (textDocument && textDocument.version !== change.textDocument.version) {\r\n                        versionMismatch = true;\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        if (versionMismatch) {\r\n            return Promise.resolve({ applied: false });\r\n        }\r\n        return vscode_1.workspace.applyEdit(this._p2c.asWorkspaceEdit(params.edit)).then((value) => { return { applied: value }; });\r\n    }\r\n    ;\r\n    logFailedRequest(type, error) {\r\n        // If we get a request cancel don't log anything.\r\n        if (error instanceof vscode_languageserver_protocol_1.ResponseError && error.code === vscode_languageserver_protocol_1.ErrorCodes.RequestCancelled) {\r\n            return;\r\n        }\r\n        this.error(`Request ${type.method} failed.`, error);\r\n    }\r\n}\r\nexports.BaseLanguageClient = BaseLanguageClient;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst code = require(\"vscode\");\r\nconst proto = require(\"vscode-languageserver-protocol\");\r\nconst Is = require(\"./utils/is\");\r\nconst protocolCompletionItem_1 = require(\"./protocolCompletionItem\");\r\nconst protocolCodeLens_1 = require(\"./protocolCodeLens\");\r\nconst protocolDocumentLink_1 = require(\"./protocolDocumentLink\");\r\nfunction createConverter(uriConverter) {\r\n    const nullConverter = (value) => value.toString();\r\n    const _uriConverter = uriConverter || nullConverter;\r\n    function asUri(value) {\r\n        return _uriConverter(value);\r\n    }\r\n    function asTextDocumentIdentifier(textDocument) {\r\n        return {\r\n            uri: _uriConverter(textDocument.uri)\r\n        };\r\n    }\r\n    function asVersionedTextDocumentIdentifier(textDocument) {\r\n        return {\r\n            uri: _uriConverter(textDocument.uri),\r\n            version: textDocument.version\r\n        };\r\n    }\r\n    function asOpenTextDocumentParams(textDocument) {\r\n        return {\r\n            textDocument: {\r\n                uri: _uriConverter(textDocument.uri),\r\n                languageId: textDocument.languageId,\r\n                version: textDocument.version,\r\n                text: textDocument.getText()\r\n            }\r\n        };\r\n    }\r\n    function isTextDocumentChangeEvent(value) {\r\n        let candidate = value;\r\n        return !!candidate.document && !!candidate.contentChanges;\r\n    }\r\n    function isTextDocument(value) {\r\n        let candidate = value;\r\n        return !!candidate.uri && !!candidate.version;\r\n    }\r\n    function asChangeTextDocumentParams(arg) {\r\n        if (isTextDocument(arg)) {\r\n            let result = {\r\n                textDocument: {\r\n                    uri: _uriConverter(arg.uri),\r\n                    version: arg.version\r\n                },\r\n                contentChanges: [{ text: arg.getText() }]\r\n            };\r\n            return result;\r\n        }\r\n        else if (isTextDocumentChangeEvent(arg)) {\r\n            let document = arg.document;\r\n            let result = {\r\n                textDocument: {\r\n                    uri: _uriConverter(document.uri),\r\n                    version: document.version\r\n                },\r\n                contentChanges: arg.contentChanges.map((change) => {\r\n                    let range = change.range;\r\n                    return {\r\n                        range: {\r\n                            start: { line: range.start.line, character: range.start.character },\r\n                            end: { line: range.end.line, character: range.end.character }\r\n                        },\r\n                        rangeLength: change.rangeLength,\r\n                        text: change.text\r\n                    };\r\n                })\r\n            };\r\n            return result;\r\n        }\r\n        else {\r\n            throw Error('Unsupported text document change parameter');\r\n        }\r\n    }\r\n    function asCloseTextDocumentParams(textDocument) {\r\n        return {\r\n            textDocument: asTextDocumentIdentifier(textDocument)\r\n        };\r\n    }\r\n    function asSaveTextDocumentParams(textDocument, includeContent = false) {\r\n        let result = {\r\n            textDocument: asVersionedTextDocumentIdentifier(textDocument)\r\n        };\r\n        if (includeContent) {\r\n            result.text = textDocument.getText();\r\n        }\r\n        return result;\r\n    }\r\n    function asTextDocumentSaveReason(reason) {\r\n        switch (reason) {\r\n            case code.TextDocumentSaveReason.Manual:\r\n                return proto.TextDocumentSaveReason.Manual;\r\n            case code.TextDocumentSaveReason.AfterDelay:\r\n                return proto.TextDocumentSaveReason.AfterDelay;\r\n            case code.TextDocumentSaveReason.FocusOut:\r\n                return proto.TextDocumentSaveReason.FocusOut;\r\n        }\r\n        return proto.TextDocumentSaveReason.Manual;\r\n    }\r\n    function asWillSaveTextDocumentParams(event) {\r\n        return {\r\n            textDocument: asTextDocumentIdentifier(event.document),\r\n            reason: asTextDocumentSaveReason(event.reason)\r\n        };\r\n    }\r\n    function asTextDocumentPositionParams(textDocument, position) {\r\n        return {\r\n            textDocument: asTextDocumentIdentifier(textDocument),\r\n            position: asWorkerPosition(position)\r\n        };\r\n    }\r\n    function asTriggerKind(triggerKind) {\r\n        switch (triggerKind) {\r\n            case code.CompletionTriggerKind.TriggerCharacter:\r\n                return proto.CompletionTriggerKind.TriggerCharacter;\r\n            case code.CompletionTriggerKind.TriggerForIncompleteCompletions:\r\n                return proto.CompletionTriggerKind.TriggerForIncompleteCompletions;\r\n            default:\r\n                return proto.CompletionTriggerKind.Invoked;\r\n        }\r\n    }\r\n    function asCompletionParams(textDocument, position, context) {\r\n        return {\r\n            textDocument: asTextDocumentIdentifier(textDocument),\r\n            position: asWorkerPosition(position),\r\n            context: {\r\n                triggerKind: asTriggerKind(context.triggerKind),\r\n                triggerCharacter: context.triggerCharacter\r\n            }\r\n        };\r\n    }\r\n    function asWorkerPosition(position) {\r\n        return { line: position.line, character: position.character };\r\n    }\r\n    function asPosition(value) {\r\n        if (value === void 0) {\r\n            return undefined;\r\n        }\r\n        else if (value === null) {\r\n            return null;\r\n        }\r\n        return { line: value.line, character: value.character };\r\n    }\r\n    function asPositions(value) {\r\n        let result = [];\r\n        for (let elem of value) {\r\n            result.push(asPosition(elem));\r\n        }\r\n        return result;\r\n    }\r\n    function asRange(value) {\r\n        if (value === void 0 || value === null) {\r\n            return value;\r\n        }\r\n        return { start: asPosition(value.start), end: asPosition(value.end) };\r\n    }\r\n    function asDiagnosticSeverity(value) {\r\n        switch (value) {\r\n            case code.DiagnosticSeverity.Error:\r\n                return proto.DiagnosticSeverity.Error;\r\n            case code.DiagnosticSeverity.Warning:\r\n                return proto.DiagnosticSeverity.Warning;\r\n            case code.DiagnosticSeverity.Information:\r\n                return proto.DiagnosticSeverity.Information;\r\n            case code.DiagnosticSeverity.Hint:\r\n                return proto.DiagnosticSeverity.Hint;\r\n        }\r\n    }\r\n    function asDiagnosticTags(tags) {\r\n        if (!tags) {\r\n            return undefined;\r\n        }\r\n        let result = [];\r\n        for (let tag of tags) {\r\n            let converted = asDiagnosticTag(tag);\r\n            if (converted !== undefined) {\r\n                result.push(converted);\r\n            }\r\n        }\r\n        return result.length > 0 ? result : undefined;\r\n    }\r\n    function asDiagnosticTag(tag) {\r\n        switch (tag) {\r\n            case code.DiagnosticTag.Unnecessary:\r\n                return proto.DiagnosticTag.Unnecessary;\r\n            case code.DiagnosticTag.Deprecated:\r\n                return proto.DiagnosticTag.Deprecated;\r\n            default:\r\n                return undefined;\r\n        }\r\n    }\r\n    function asDiagnostic(item) {\r\n        let result = proto.Diagnostic.create(asRange(item.range), item.message);\r\n        if (Is.number(item.severity)) {\r\n            result.severity = asDiagnosticSeverity(item.severity);\r\n        }\r\n        if (Is.number(item.code) || Is.string(item.code)) {\r\n            result.code = item.code;\r\n        }\r\n        if (Array.isArray(item.tags)) {\r\n            result.tags = asDiagnosticTags(item.tags);\r\n        }\r\n        ;\r\n        if (item.source) {\r\n            result.source = item.source;\r\n        }\r\n        return result;\r\n    }\r\n    function asDiagnostics(items) {\r\n        if (items === void 0 || items === null) {\r\n            return items;\r\n        }\r\n        return items.map(asDiagnostic);\r\n    }\r\n    function asDocumentation(format, documentation) {\r\n        switch (format) {\r\n            case '$string':\r\n                return documentation;\r\n            case proto.MarkupKind.PlainText:\r\n                return { kind: format, value: documentation };\r\n            case proto.MarkupKind.Markdown:\r\n                return { kind: format, value: documentation.value };\r\n            default:\r\n                return `Unsupported Markup content received. Kind is: ${format}`;\r\n        }\r\n    }\r\n    function asCompletionItemKind(value, original) {\r\n        if (original !== void 0) {\r\n            return original;\r\n        }\r\n        return value + 1;\r\n    }\r\n    function asCompletionItem(item) {\r\n        let result = { label: item.label };\r\n        let protocolItem = item instanceof protocolCompletionItem_1.default ? item : undefined;\r\n        if (item.detail) {\r\n            result.detail = item.detail;\r\n        }\r\n        // We only send items back we created. So this can't be something else than\r\n        // a string right now.\r\n        if (item.documentation) {\r\n            if (!protocolItem || protocolItem.documentationFormat === '$string') {\r\n                result.documentation = item.documentation;\r\n            }\r\n            else {\r\n                result.documentation = asDocumentation(protocolItem.documentationFormat, item.documentation);\r\n            }\r\n        }\r\n        if (item.filterText) {\r\n            result.filterText = item.filterText;\r\n        }\r\n        fillPrimaryInsertText(result, item);\r\n        if (Is.number(item.kind)) {\r\n            result.kind = asCompletionItemKind(item.kind, protocolItem && protocolItem.originalItemKind);\r\n        }\r\n        if (item.sortText) {\r\n            result.sortText = item.sortText;\r\n        }\r\n        if (item.additionalTextEdits) {\r\n            result.additionalTextEdits = asTextEdits(item.additionalTextEdits);\r\n        }\r\n        if (item.commitCharacters) {\r\n            result.commitCharacters = item.commitCharacters.slice();\r\n        }\r\n        if (item.command) {\r\n            result.command = asCommand(item.command);\r\n        }\r\n        if (item.preselect === true || item.preselect === false) {\r\n            result.preselect = item.preselect;\r\n        }\r\n        if (protocolItem) {\r\n            if (protocolItem.data !== void 0) {\r\n                result.data = protocolItem.data;\r\n            }\r\n            if (protocolItem.deprecated === true || protocolItem.deprecated === false) {\r\n                result.deprecated = protocolItem.deprecated;\r\n            }\r\n        }\r\n        return result;\r\n    }\r\n    function fillPrimaryInsertText(target, source) {\r\n        let format = proto.InsertTextFormat.PlainText;\r\n        let text;\r\n        let range = undefined;\r\n        if (source.textEdit) {\r\n            text = source.textEdit.newText;\r\n            range = asRange(source.textEdit.range);\r\n        }\r\n        else if (source.insertText instanceof code.SnippetString) {\r\n            format = proto.InsertTextFormat.Snippet;\r\n            text = source.insertText.value;\r\n        }\r\n        else {\r\n            text = source.insertText;\r\n        }\r\n        if (source.range) {\r\n            range = asRange(source.range);\r\n        }\r\n        target.insertTextFormat = format;\r\n        if (source.fromEdit && text && range) {\r\n            target.textEdit = { newText: text, range: range };\r\n        }\r\n        else {\r\n            target.insertText = text;\r\n        }\r\n    }\r\n    function asTextEdit(edit) {\r\n        return { range: asRange(edit.range), newText: edit.newText };\r\n    }\r\n    function asTextEdits(edits) {\r\n        if (edits === void 0 || edits === null) {\r\n            return edits;\r\n        }\r\n        return edits.map(asTextEdit);\r\n    }\r\n    function asReferenceParams(textDocument, position, options) {\r\n        return {\r\n            textDocument: asTextDocumentIdentifier(textDocument),\r\n            position: asWorkerPosition(position),\r\n            context: { includeDeclaration: options.includeDeclaration }\r\n        };\r\n    }\r\n    function asCodeActionContext(context) {\r\n        if (context === void 0 || context === null) {\r\n            return context;\r\n        }\r\n        let only;\r\n        if (context.only && Is.string(context.only.value)) {\r\n            only = [context.only.value];\r\n        }\r\n        return proto.CodeActionContext.create(asDiagnostics(context.diagnostics), only);\r\n    }\r\n    function asCommand(item) {\r\n        let result = proto.Command.create(item.title, item.command);\r\n        if (item.arguments) {\r\n            result.arguments = item.arguments;\r\n        }\r\n        return result;\r\n    }\r\n    function asCodeLens(item) {\r\n        let result = proto.CodeLens.create(asRange(item.range));\r\n        if (item.command) {\r\n            result.command = asCommand(item.command);\r\n        }\r\n        if (item instanceof protocolCodeLens_1.default) {\r\n            if (item.data) {\r\n                result.data = item.data;\r\n            }\r\n            ;\r\n        }\r\n        return result;\r\n    }\r\n    function asFormattingOptions(item) {\r\n        return { tabSize: item.tabSize, insertSpaces: item.insertSpaces };\r\n    }\r\n    function asDocumentSymbolParams(textDocument) {\r\n        return {\r\n            textDocument: asTextDocumentIdentifier(textDocument)\r\n        };\r\n    }\r\n    function asCodeLensParams(textDocument) {\r\n        return {\r\n            textDocument: asTextDocumentIdentifier(textDocument)\r\n        };\r\n    }\r\n    function asDocumentLink(item) {\r\n        let result = proto.DocumentLink.create(asRange(item.range));\r\n        if (item.target) {\r\n            result.target = asUri(item.target);\r\n        }\r\n        let protocolItem = item instanceof protocolDocumentLink_1.default ? item : undefined;\r\n        if (protocolItem && protocolItem.data) {\r\n            result.data = protocolItem.data;\r\n        }\r\n        return result;\r\n    }\r\n    function asDocumentLinkParams(textDocument) {\r\n        return {\r\n            textDocument: asTextDocumentIdentifier(textDocument)\r\n        };\r\n    }\r\n    return {\r\n        asUri,\r\n        asTextDocumentIdentifier,\r\n        asVersionedTextDocumentIdentifier,\r\n        asOpenTextDocumentParams,\r\n        asChangeTextDocumentParams,\r\n        asCloseTextDocumentParams,\r\n        asSaveTextDocumentParams,\r\n        asWillSaveTextDocumentParams,\r\n        asTextDocumentPositionParams,\r\n        asCompletionParams,\r\n        asWorkerPosition,\r\n        asRange,\r\n        asPosition,\r\n        asPositions,\r\n        asDiagnosticSeverity,\r\n        asDiagnosticTag,\r\n        asDiagnostic,\r\n        asDiagnostics,\r\n        asCompletionItem,\r\n        asTextEdit,\r\n        asReferenceParams,\r\n        asCodeActionContext,\r\n        asCommand,\r\n        asCodeLens,\r\n        asFormattingOptions,\r\n        asDocumentSymbolParams,\r\n        asCodeLensParams,\r\n        asDocumentLink,\r\n        asDocumentLinkParams\r\n    };\r\n}\r\nexports.createConverter = createConverter;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst vscode_1 = require(\"vscode\");\r\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\r\nconst client_1 = require(\"./client\");\r\nfunction ensure(target, key) {\r\n    if (target[key] === void 0) {\r\n        target[key] = {};\r\n    }\r\n    return target[key];\r\n}\r\nclass ColorProviderFeature extends client_1.TextDocumentFeature {\r\n    constructor(client) {\r\n        super(client, vscode_languageserver_protocol_1.DocumentColorRequest.type);\r\n    }\r\n    fillClientCapabilities(capabilites) {\r\n        ensure(ensure(capabilites, 'textDocument'), 'colorProvider').dynamicRegistration = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        let [id, options] = this.getRegistration(documentSelector, capabilities.colorProvider);\r\n        if (!id || !options) {\r\n            return;\r\n        }\r\n        this.register(this.messages, { id: id, registerOptions: options });\r\n    }\r\n    registerLanguageProvider(options) {\r\n        let client = this._client;\r\n        let provideColorPresentations = (color, context, token) => {\r\n            const requestParams = {\r\n                color,\r\n                textDocument: client.code2ProtocolConverter.asTextDocumentIdentifier(context.document),\r\n                range: client.code2ProtocolConverter.asRange(context.range)\r\n            };\r\n            return client.sendRequest(vscode_languageserver_protocol_1.ColorPresentationRequest.type, requestParams, token).then(this.asColorPresentations.bind(this), (error) => {\r\n                client.logFailedRequest(vscode_languageserver_protocol_1.ColorPresentationRequest.type, error);\r\n                return Promise.resolve(null);\r\n            });\r\n        };\r\n        let provideDocumentColors = (document, token) => {\r\n            const requestParams = {\r\n                textDocument: client.code2ProtocolConverter.asTextDocumentIdentifier(document)\r\n            };\r\n            return client.sendRequest(vscode_languageserver_protocol_1.DocumentColorRequest.type, requestParams, token).then(this.asColorInformations.bind(this), (error) => {\r\n                client.logFailedRequest(vscode_languageserver_protocol_1.ColorPresentationRequest.type, error);\r\n                return Promise.resolve(null);\r\n            });\r\n        };\r\n        let middleware = client.clientOptions.middleware;\r\n        return vscode_1.languages.registerColorProvider(options.documentSelector, {\r\n            provideColorPresentations: (color, context, token) => {\r\n                return middleware.provideColorPresentations\r\n                    ? middleware.provideColorPresentations(color, context, token, provideColorPresentations)\r\n                    : provideColorPresentations(color, context, token);\r\n            },\r\n            provideDocumentColors: (document, token) => {\r\n                return middleware.provideDocumentColors\r\n                    ? middleware.provideDocumentColors(document, token, provideDocumentColors)\r\n                    : provideDocumentColors(document, token);\r\n            }\r\n        });\r\n    }\r\n    asColor(color) {\r\n        return new vscode_1.Color(color.red, color.green, color.blue, color.alpha);\r\n    }\r\n    asColorInformations(colorInformation) {\r\n        if (Array.isArray(colorInformation)) {\r\n            return colorInformation.map(ci => {\r\n                return new vscode_1.ColorInformation(this._client.protocol2CodeConverter.asRange(ci.range), this.asColor(ci.color));\r\n            });\r\n        }\r\n        return [];\r\n    }\r\n    asColorPresentations(colorPresentations) {\r\n        if (Array.isArray(colorPresentations)) {\r\n            return colorPresentations.map(cp => {\r\n                let presentation = new vscode_1.ColorPresentation(cp.label);\r\n                presentation.additionalTextEdits = this._client.protocol2CodeConverter.asTextEdits(cp.additionalTextEdits);\r\n                presentation.textEdit = this._client.protocol2CodeConverter.asTextEdit(cp.textEdit);\r\n                return presentation;\r\n            });\r\n        }\r\n        return [];\r\n    }\r\n}\r\nexports.ColorProviderFeature = ColorProviderFeature;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst vscode_1 = require(\"vscode\");\r\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\r\nclass ConfigurationFeature {\r\n    constructor(_client) {\r\n        this._client = _client;\r\n    }\r\n    fillClientCapabilities(capabilities) {\r\n        capabilities.workspace = capabilities.workspace || {};\r\n        capabilities.workspace.configuration = true;\r\n    }\r\n    initialize() {\r\n        let client = this._client;\r\n        client.onRequest(vscode_languageserver_protocol_1.ConfigurationRequest.type, (params, token) => {\r\n            let configuration = (params) => {\r\n                let result = [];\r\n                for (let item of params.items) {\r\n                    let resource = item.scopeUri !== void 0 && item.scopeUri !== null ? this._client.protocol2CodeConverter.asUri(item.scopeUri) : undefined;\r\n                    result.push(this.getConfiguration(resource, item.section !== null ? item.section : undefined));\r\n                }\r\n                return result;\r\n            };\r\n            let middleware = client.clientOptions.middleware.workspace;\r\n            return middleware && middleware.configuration\r\n                ? middleware.configuration(params, token, configuration)\r\n                : configuration(params, token);\r\n        });\r\n    }\r\n    getConfiguration(resource, section) {\r\n        let result = null;\r\n        if (section) {\r\n            let index = section.lastIndexOf('.');\r\n            if (index === -1) {\r\n                result = vscode_1.workspace.getConfiguration(undefined, resource).get(section);\r\n            }\r\n            else {\r\n                let config = vscode_1.workspace.getConfiguration(section.substr(0, index), resource);\r\n                if (config) {\r\n                    result = config.get(section.substr(index + 1));\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            let config = vscode_1.workspace.getConfiguration(undefined, resource);\r\n            result = {};\r\n            for (let key of Object.keys(config)) {\r\n                if (config.has(key)) {\r\n                    result[key] = config.get(key);\r\n                }\r\n            }\r\n        }\r\n        if (!result) {\r\n            return null;\r\n        }\r\n        return result;\r\n    }\r\n}\r\nexports.ConfigurationFeature = ConfigurationFeature;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst vscode_1 = require(\"vscode\");\r\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\r\nconst client_1 = require(\"./client\");\r\nfunction ensure(target, key) {\r\n    if (target[key] === void 0) {\r\n        target[key] = {};\r\n    }\r\n    return target[key];\r\n}\r\nclass DeclarationFeature extends client_1.TextDocumentFeature {\r\n    constructor(client) {\r\n        super(client, vscode_languageserver_protocol_1.DeclarationRequest.type);\r\n    }\r\n    fillClientCapabilities(capabilites) {\r\n        let declarationSupport = ensure(ensure(capabilites, 'textDocument'), 'declaration');\r\n        declarationSupport.dynamicRegistration = true;\r\n        declarationSupport.linkSupport = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        let [id, options] = this.getRegistration(documentSelector, capabilities.declarationProvider);\r\n        if (!id || !options) {\r\n            return;\r\n        }\r\n        this.register(this.messages, { id: id, registerOptions: options });\r\n    }\r\n    registerLanguageProvider(options) {\r\n        let client = this._client;\r\n        let provideDeclaration = (document, position, token) => {\r\n            return client.sendRequest(vscode_languageserver_protocol_1.DeclarationRequest.type, client.code2ProtocolConverter.asTextDocumentPositionParams(document, position), token).then(client.protocol2CodeConverter.asDeclarationResult, (error) => {\r\n                client.logFailedRequest(vscode_languageserver_protocol_1.DeclarationRequest.type, error);\r\n                return Promise.resolve(null);\r\n            });\r\n        };\r\n        let middleware = client.clientOptions.middleware;\r\n        return vscode_1.languages.registerDeclarationProvider(options.documentSelector, {\r\n            provideDeclaration: (document, position, token) => {\r\n                return middleware.provideDeclaration\r\n                    ? middleware.provideDeclaration(document, position, token, provideDeclaration)\r\n                    : provideDeclaration(document, position, token);\r\n            }\r\n        });\r\n    }\r\n}\r\nexports.DeclarationFeature = DeclarationFeature;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst vscode_1 = require(\"vscode\");\r\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\r\nconst client_1 = require(\"./client\");\r\nfunction ensure(target, key) {\r\n    if (target[key] === void 0) {\r\n        target[key] = {};\r\n    }\r\n    return target[key];\r\n}\r\nclass FoldingRangeFeature extends client_1.TextDocumentFeature {\r\n    constructor(client) {\r\n        super(client, vscode_languageserver_protocol_1.FoldingRangeRequest.type);\r\n    }\r\n    fillClientCapabilities(capabilites) {\r\n        let capability = ensure(ensure(capabilites, 'textDocument'), 'foldingRange');\r\n        capability.dynamicRegistration = true;\r\n        capability.rangeLimit = 5000;\r\n        capability.lineFoldingOnly = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        let [id, options] = this.getRegistration(documentSelector, capabilities.foldingRangeProvider);\r\n        if (!id || !options) {\r\n            return;\r\n        }\r\n        this.register(this.messages, { id: id, registerOptions: options });\r\n    }\r\n    registerLanguageProvider(options) {\r\n        let client = this._client;\r\n        let provideFoldingRanges = (document, _, token) => {\r\n            const requestParams = {\r\n                textDocument: client.code2ProtocolConverter.asTextDocumentIdentifier(document)\r\n            };\r\n            return client.sendRequest(vscode_languageserver_protocol_1.FoldingRangeRequest.type, requestParams, token).then(this.asFoldingRanges.bind(this), (error) => {\r\n                client.logFailedRequest(vscode_languageserver_protocol_1.FoldingRangeRequest.type, error);\r\n                return Promise.resolve(null);\r\n            });\r\n        };\r\n        let middleware = client.clientOptions.middleware;\r\n        return vscode_1.languages.registerFoldingRangeProvider(options.documentSelector, {\r\n            provideFoldingRanges(document, context, token) {\r\n                return middleware.provideFoldingRanges\r\n                    ? middleware.provideFoldingRanges(document, context, token, provideFoldingRanges)\r\n                    : provideFoldingRanges(document, context, token);\r\n            }\r\n        });\r\n    }\r\n    asFoldingRangeKind(kind) {\r\n        if (kind) {\r\n            switch (kind) {\r\n                case vscode_languageserver_protocol_1.FoldingRangeKind.Comment:\r\n                    return vscode_1.FoldingRangeKind.Comment;\r\n                case vscode_languageserver_protocol_1.FoldingRangeKind.Imports:\r\n                    return vscode_1.FoldingRangeKind.Imports;\r\n                case vscode_languageserver_protocol_1.FoldingRangeKind.Region:\r\n                    return vscode_1.FoldingRangeKind.Region;\r\n            }\r\n        }\r\n        return void 0;\r\n    }\r\n    asFoldingRanges(foldingRanges) {\r\n        if (Array.isArray(foldingRanges)) {\r\n            return foldingRanges.map(r => {\r\n                return new vscode_1.FoldingRange(r.startLine, r.endLine, this.asFoldingRangeKind(r.kind));\r\n            });\r\n        }\r\n        return [];\r\n    }\r\n}\r\nexports.FoldingRangeFeature = FoldingRangeFeature;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst vscode_1 = require(\"vscode\");\r\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\r\nconst client_1 = require(\"./client\");\r\nfunction ensure(target, key) {\r\n    if (target[key] === void 0) {\r\n        target[key] = {};\r\n    }\r\n    return target[key];\r\n}\r\nclass ImplementationFeature extends client_1.TextDocumentFeature {\r\n    constructor(client) {\r\n        super(client, vscode_languageserver_protocol_1.ImplementationRequest.type);\r\n    }\r\n    fillClientCapabilities(capabilites) {\r\n        let implementationSupport = ensure(ensure(capabilites, 'textDocument'), 'implementation');\r\n        implementationSupport.dynamicRegistration = true;\r\n        implementationSupport.linkSupport = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        let [id, options] = this.getRegistration(documentSelector, capabilities.implementationProvider);\r\n        if (!id || !options) {\r\n            return;\r\n        }\r\n        this.register(this.messages, { id: id, registerOptions: options });\r\n    }\r\n    registerLanguageProvider(options) {\r\n        let client = this._client;\r\n        let provideImplementation = (document, position, token) => {\r\n            return client.sendRequest(vscode_languageserver_protocol_1.ImplementationRequest.type, client.code2ProtocolConverter.asTextDocumentPositionParams(document, position), token).then(client.protocol2CodeConverter.asDefinitionResult, (error) => {\r\n                client.logFailedRequest(vscode_languageserver_protocol_1.ImplementationRequest.type, error);\r\n                return Promise.resolve(null);\r\n            });\r\n        };\r\n        let middleware = client.clientOptions.middleware;\r\n        return vscode_1.languages.registerImplementationProvider(options.documentSelector, {\r\n            provideImplementation: (document, position, token) => {\r\n                return middleware.provideImplementation\r\n                    ? middleware.provideImplementation(document, position, token, provideImplementation)\r\n                    : provideImplementation(document, position, token);\r\n            }\r\n        });\r\n    }\r\n}\r\nexports.ImplementationFeature = ImplementationFeature;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst vscode_1 = require(\"vscode\");\r\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\r\nconst Is = require(\"./utils/is\");\r\nclass ProgressPart {\r\n    constructor(_client, _token) {\r\n        this._client = _client;\r\n        this._token = _token;\r\n        this._reported = 0;\r\n        this._disposable = this._client.onProgress(vscode_languageserver_protocol_1.Proposed.WorkDoneProgress.type, this._token, (value) => {\r\n            switch (value.kind) {\r\n                case 'begin':\r\n                    this.begin(value);\r\n                    break;\r\n                case 'report':\r\n                    this.report(value);\r\n                    break;\r\n                case 'done':\r\n                    this.done();\r\n                    break;\r\n            }\r\n        });\r\n    }\r\n    begin(params) {\r\n        let location = params.cancellable ? vscode_1.ProgressLocation.Notification : vscode_1.ProgressLocation.Window;\r\n        vscode_1.window.withProgress({ location, cancellable: params.cancellable, title: params.title }, (progress, cancellationToken) => __awaiter(this, void 0, void 0, function* () {\r\n            this._progress = progress;\r\n            this._infinite = params.percentage === undefined;\r\n            this._cancellationToken = cancellationToken;\r\n            this._cancellationToken.onCancellationRequested(() => {\r\n                this._client.sendNotification(vscode_languageserver_protocol_1.Proposed.WorkDoneProgressCancelNotification.type, { token: this._token });\r\n            });\r\n            this.report(params);\r\n            return new Promise((resolve, reject) => {\r\n                this._resolve = resolve;\r\n                this._reject = reject;\r\n            });\r\n        }));\r\n    }\r\n    report(params) {\r\n        if (this._infinite && Is.string(params.message)) {\r\n            this._progress.report({ message: params.message });\r\n        }\r\n        else if (Is.number(params.percentage)) {\r\n            let percentage = Math.max(0, Math.min(params.percentage, 100));\r\n            let delta = Math.max(0, percentage - this._reported);\r\n            this._progress.report({ message: params.message, increment: delta });\r\n            this._reported += delta;\r\n        }\r\n    }\r\n    cancel() {\r\n        if (this._disposable) {\r\n            this._disposable.dispose();\r\n            this._disposable = undefined;\r\n        }\r\n        if (this._reject) {\r\n            this._reject();\r\n            this._resolve = undefined;\r\n            this._reject = undefined;\r\n        }\r\n    }\r\n    done() {\r\n        if (this._disposable) {\r\n            this._disposable.dispose();\r\n            this._disposable = undefined;\r\n        }\r\n        if (this._resolve) {\r\n            this._resolve();\r\n            this._resolve = undefined;\r\n            this._reject = undefined;\r\n        }\r\n    }\r\n}\r\nexports.ProgressPart = ProgressPart;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst code = require(\"vscode\");\r\nclass ProtocolCodeLens extends code.CodeLens {\r\n    constructor(range) {\r\n        super(range);\r\n    }\r\n}\r\nexports.default = ProtocolCodeLens;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst code = require(\"vscode\");\r\nclass ProtocolCompletionItem extends code.CompletionItem {\r\n    constructor(label) {\r\n        super(label);\r\n    }\r\n}\r\nexports.default = ProtocolCompletionItem;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst code = require(\"vscode\");\r\nconst ls = require(\"vscode-languageserver-protocol\");\r\nconst Is = require(\"./utils/is\");\r\nconst protocolCompletionItem_1 = require(\"./protocolCompletionItem\");\r\nconst protocolCodeLens_1 = require(\"./protocolCodeLens\");\r\nconst protocolDocumentLink_1 = require(\"./protocolDocumentLink\");\r\nvar CodeBlock;\r\n(function (CodeBlock) {\r\n    function is(value) {\r\n        let candidate = value;\r\n        return candidate && Is.string(candidate.language) && Is.string(candidate.value);\r\n    }\r\n    CodeBlock.is = is;\r\n})(CodeBlock || (CodeBlock = {}));\r\nfunction createConverter(uriConverter) {\r\n    const nullConverter = (value) => code.Uri.parse(value);\r\n    const _uriConverter = uriConverter || nullConverter;\r\n    function asUri(value) {\r\n        return _uriConverter(value);\r\n    }\r\n    function asDiagnostics(diagnostics) {\r\n        return diagnostics.map(asDiagnostic);\r\n    }\r\n    function asDiagnostic(diagnostic) {\r\n        let result = new code.Diagnostic(asRange(diagnostic.range), diagnostic.message, asDiagnosticSeverity(diagnostic.severity));\r\n        if (Is.number(diagnostic.code) || Is.string(diagnostic.code)) {\r\n            result.code = diagnostic.code;\r\n        }\r\n        if (diagnostic.source) {\r\n            result.source = diagnostic.source;\r\n        }\r\n        if (diagnostic.relatedInformation) {\r\n            result.relatedInformation = asRelatedInformation(diagnostic.relatedInformation);\r\n        }\r\n        if (Array.isArray(diagnostic.tags)) {\r\n            result.tags = asDiagnosticTags(diagnostic.tags);\r\n        }\r\n        return result;\r\n    }\r\n    function asRelatedInformation(relatedInformation) {\r\n        return relatedInformation.map(asDiagnosticRelatedInformation);\r\n    }\r\n    function asDiagnosticRelatedInformation(information) {\r\n        return new code.DiagnosticRelatedInformation(asLocation(information.location), information.message);\r\n    }\r\n    function asDiagnosticTags(tags) {\r\n        if (!tags) {\r\n            return undefined;\r\n        }\r\n        let result = [];\r\n        for (let tag of tags) {\r\n            let converted = asDiagnosticTag(tag);\r\n            if (converted !== undefined) {\r\n                result.push(converted);\r\n            }\r\n        }\r\n        return result.length > 0 ? result : undefined;\r\n    }\r\n    function asDiagnosticTag(tag) {\r\n        switch (tag) {\r\n            case ls.DiagnosticTag.Unnecessary:\r\n                return code.DiagnosticTag.Unnecessary;\r\n            case ls.DiagnosticTag.Deprecated:\r\n                return code.DiagnosticTag.Deprecated;\r\n            default:\r\n                return undefined;\r\n        }\r\n    }\r\n    function asPosition(value) {\r\n        if (!value) {\r\n            return undefined;\r\n        }\r\n        return new code.Position(value.line, value.character);\r\n    }\r\n    function asRange(value) {\r\n        if (!value) {\r\n            return undefined;\r\n        }\r\n        return new code.Range(asPosition(value.start), asPosition(value.end));\r\n    }\r\n    function asDiagnosticSeverity(value) {\r\n        if (value === void 0 || value === null) {\r\n            return code.DiagnosticSeverity.Error;\r\n        }\r\n        switch (value) {\r\n            case ls.DiagnosticSeverity.Error:\r\n                return code.DiagnosticSeverity.Error;\r\n            case ls.DiagnosticSeverity.Warning:\r\n                return code.DiagnosticSeverity.Warning;\r\n            case ls.DiagnosticSeverity.Information:\r\n                return code.DiagnosticSeverity.Information;\r\n            case ls.DiagnosticSeverity.Hint:\r\n                return code.DiagnosticSeverity.Hint;\r\n        }\r\n        return code.DiagnosticSeverity.Error;\r\n    }\r\n    function asHoverContent(value) {\r\n        if (Is.string(value)) {\r\n            return new code.MarkdownString(value);\r\n        }\r\n        else if (CodeBlock.is(value)) {\r\n            let result = new code.MarkdownString();\r\n            return result.appendCodeblock(value.value, value.language);\r\n        }\r\n        else if (Array.isArray(value)) {\r\n            let result = [];\r\n            for (let element of value) {\r\n                let item = new code.MarkdownString();\r\n                if (CodeBlock.is(element)) {\r\n                    item.appendCodeblock(element.value, element.language);\r\n                }\r\n                else {\r\n                    item.appendMarkdown(element);\r\n                }\r\n                result.push(item);\r\n            }\r\n            return result;\r\n        }\r\n        else {\r\n            let result;\r\n            switch (value.kind) {\r\n                case ls.MarkupKind.Markdown:\r\n                    return new code.MarkdownString(value.value);\r\n                case ls.MarkupKind.PlainText:\r\n                    result = new code.MarkdownString();\r\n                    result.appendText(value.value);\r\n                    return result;\r\n                default:\r\n                    result = new code.MarkdownString();\r\n                    result.appendText(`Unsupported Markup content received. Kind is: ${value.kind}`);\r\n                    return result;\r\n            }\r\n        }\r\n    }\r\n    function asDocumentation(value) {\r\n        if (Is.string(value)) {\r\n            return value;\r\n        }\r\n        else {\r\n            switch (value.kind) {\r\n                case ls.MarkupKind.Markdown:\r\n                    return new code.MarkdownString(value.value);\r\n                case ls.MarkupKind.PlainText:\r\n                    return value.value;\r\n                default:\r\n                    return `Unsupported Markup content received. Kind is: ${value.kind}`;\r\n            }\r\n        }\r\n    }\r\n    function asHover(hover) {\r\n        if (!hover) {\r\n            return undefined;\r\n        }\r\n        return new code.Hover(asHoverContent(hover.contents), asRange(hover.range));\r\n    }\r\n    function asCompletionResult(result) {\r\n        if (!result) {\r\n            return undefined;\r\n        }\r\n        if (Array.isArray(result)) {\r\n            let items = result;\r\n            return items.map(asCompletionItem);\r\n        }\r\n        let list = result;\r\n        return new code.CompletionList(list.items.map(asCompletionItem), list.isIncomplete);\r\n    }\r\n    function asCompletionItemKind(value) {\r\n        // Protocol item kind is 1 based, codes item kind is zero based.\r\n        if (ls.CompletionItemKind.Text <= value && value <= ls.CompletionItemKind.TypeParameter) {\r\n            return [value - 1, undefined];\r\n        }\r\n        ;\r\n        return [code.CompletionItemKind.Text, value];\r\n    }\r\n    function asCompletionItem(item) {\r\n        let result = new protocolCompletionItem_1.default(item.label);\r\n        if (item.detail) {\r\n            result.detail = item.detail;\r\n        }\r\n        if (item.documentation) {\r\n            result.documentation = asDocumentation(item.documentation);\r\n            result.documentationFormat = Is.string(item.documentation) ? '$string' : item.documentation.kind;\r\n        }\r\n        ;\r\n        if (item.filterText) {\r\n            result.filterText = item.filterText;\r\n        }\r\n        let insertText = asCompletionInsertText(item);\r\n        if (insertText) {\r\n            result.insertText = insertText.text;\r\n            result.range = insertText.range;\r\n            result.fromEdit = insertText.fromEdit;\r\n        }\r\n        if (Is.number(item.kind)) {\r\n            let [itemKind, original] = asCompletionItemKind(item.kind);\r\n            result.kind = itemKind;\r\n            if (original) {\r\n                result.originalItemKind = original;\r\n            }\r\n        }\r\n        if (item.sortText) {\r\n            result.sortText = item.sortText;\r\n        }\r\n        if (item.additionalTextEdits) {\r\n            result.additionalTextEdits = asTextEdits(item.additionalTextEdits);\r\n        }\r\n        if (Is.stringArray(item.commitCharacters)) {\r\n            result.commitCharacters = item.commitCharacters.slice();\r\n        }\r\n        if (item.command) {\r\n            result.command = asCommand(item.command);\r\n        }\r\n        if (item.deprecated === true || item.deprecated === false) {\r\n            result.deprecated = item.deprecated;\r\n        }\r\n        if (item.preselect === true || item.preselect === false) {\r\n            result.preselect = item.preselect;\r\n        }\r\n        if (item.data !== void 0) {\r\n            result.data = item.data;\r\n        }\r\n        return result;\r\n    }\r\n    function asCompletionInsertText(item) {\r\n        if (item.textEdit) {\r\n            if (item.insertTextFormat === ls.InsertTextFormat.Snippet) {\r\n                return { text: new code.SnippetString(item.textEdit.newText), range: asRange(item.textEdit.range), fromEdit: true };\r\n            }\r\n            else {\r\n                return { text: item.textEdit.newText, range: asRange(item.textEdit.range), fromEdit: true };\r\n            }\r\n        }\r\n        else if (item.insertText) {\r\n            if (item.insertTextFormat === ls.InsertTextFormat.Snippet) {\r\n                return { text: new code.SnippetString(item.insertText), fromEdit: false };\r\n            }\r\n            else {\r\n                return { text: item.insertText, fromEdit: false };\r\n            }\r\n        }\r\n        else {\r\n            return undefined;\r\n        }\r\n    }\r\n    function asTextEdit(edit) {\r\n        if (!edit) {\r\n            return undefined;\r\n        }\r\n        return new code.TextEdit(asRange(edit.range), edit.newText);\r\n    }\r\n    function asTextEdits(items) {\r\n        if (!items) {\r\n            return undefined;\r\n        }\r\n        return items.map(asTextEdit);\r\n    }\r\n    function asSignatureHelp(item) {\r\n        if (!item) {\r\n            return undefined;\r\n        }\r\n        let result = new code.SignatureHelp();\r\n        if (Is.number(item.activeSignature)) {\r\n            result.activeSignature = item.activeSignature;\r\n        }\r\n        else {\r\n            // activeSignature was optional in the past\r\n            result.activeSignature = 0;\r\n        }\r\n        if (Is.number(item.activeParameter)) {\r\n            result.activeParameter = item.activeParameter;\r\n        }\r\n        else {\r\n            // activeParameter was optional in the past\r\n            result.activeParameter = 0;\r\n        }\r\n        if (item.signatures) {\r\n            result.signatures = asSignatureInformations(item.signatures);\r\n        }\r\n        return result;\r\n    }\r\n    function asSignatureInformations(items) {\r\n        return items.map(asSignatureInformation);\r\n    }\r\n    function asSignatureInformation(item) {\r\n        let result = new code.SignatureInformation(item.label);\r\n        if (item.documentation) {\r\n            result.documentation = asDocumentation(item.documentation);\r\n        }\r\n        if (item.parameters) {\r\n            result.parameters = asParameterInformations(item.parameters);\r\n        }\r\n        return result;\r\n    }\r\n    function asParameterInformations(item) {\r\n        return item.map(asParameterInformation);\r\n    }\r\n    function asParameterInformation(item) {\r\n        let result = new code.ParameterInformation(item.label);\r\n        if (item.documentation) {\r\n            result.documentation = asDocumentation(item.documentation);\r\n        }\r\n        ;\r\n        return result;\r\n    }\r\n    function asLocation(item) {\r\n        if (!item) {\r\n            return undefined;\r\n        }\r\n        return new code.Location(_uriConverter(item.uri), asRange(item.range));\r\n    }\r\n    function asDeclarationResult(item) {\r\n        if (!item) {\r\n            return undefined;\r\n        }\r\n        return asLocationResult(item);\r\n    }\r\n    function asDefinitionResult(item) {\r\n        if (!item) {\r\n            return undefined;\r\n        }\r\n        return asLocationResult(item);\r\n    }\r\n    function asLocationLink(item) {\r\n        if (!item) {\r\n            return undefined;\r\n        }\r\n        let result = {\r\n            targetUri: _uriConverter(item.targetUri),\r\n            targetRange: asRange(item.targetSelectionRange),\r\n            originSelectionRange: asRange(item.originSelectionRange),\r\n            targetSelectionRange: asRange(item.targetSelectionRange)\r\n        };\r\n        if (!result.targetSelectionRange) {\r\n            throw new Error(`targetSelectionRange must not be undefined or null`);\r\n        }\r\n        return result;\r\n    }\r\n    function asLocationResult(item) {\r\n        if (!item) {\r\n            return undefined;\r\n        }\r\n        if (Is.array(item)) {\r\n            if (item.length === 0) {\r\n                return [];\r\n            }\r\n            else if (ls.LocationLink.is(item[0])) {\r\n                let links = item;\r\n                return links.map((link) => asLocationLink(link));\r\n            }\r\n            else {\r\n                let locations = item;\r\n                return locations.map((location) => asLocation(location));\r\n            }\r\n        }\r\n        else if (ls.LocationLink.is(item)) {\r\n            return [asLocationLink(item)];\r\n        }\r\n        else {\r\n            return asLocation(item);\r\n        }\r\n    }\r\n    function asReferences(values) {\r\n        if (!values) {\r\n            return undefined;\r\n        }\r\n        return values.map(location => asLocation(location));\r\n    }\r\n    function asDocumentHighlights(values) {\r\n        if (!values) {\r\n            return undefined;\r\n        }\r\n        return values.map(asDocumentHighlight);\r\n    }\r\n    function asDocumentHighlight(item) {\r\n        let result = new code.DocumentHighlight(asRange(item.range));\r\n        if (Is.number(item.kind)) {\r\n            result.kind = asDocumentHighlightKind(item.kind);\r\n        }\r\n        return result;\r\n    }\r\n    function asDocumentHighlightKind(item) {\r\n        switch (item) {\r\n            case ls.DocumentHighlightKind.Text:\r\n                return code.DocumentHighlightKind.Text;\r\n            case ls.DocumentHighlightKind.Read:\r\n                return code.DocumentHighlightKind.Read;\r\n            case ls.DocumentHighlightKind.Write:\r\n                return code.DocumentHighlightKind.Write;\r\n        }\r\n        return code.DocumentHighlightKind.Text;\r\n    }\r\n    function asSymbolInformations(values, uri) {\r\n        if (!values) {\r\n            return undefined;\r\n        }\r\n        return values.map(information => asSymbolInformation(information, uri));\r\n    }\r\n    function asSymbolKind(item) {\r\n        if (item <= ls.SymbolKind.TypeParameter) {\r\n            // Symbol kind is one based in the protocol and zero based in code.\r\n            return item - 1;\r\n        }\r\n        return code.SymbolKind.Property;\r\n    }\r\n    function asSymbolInformation(item, uri) {\r\n        // Symbol kind is one based in the protocol and zero based in code.\r\n        let result = new code.SymbolInformation(item.name, asSymbolKind(item.kind), asRange(item.location.range), item.location.uri ? _uriConverter(item.location.uri) : uri);\r\n        if (item.containerName) {\r\n            result.containerName = item.containerName;\r\n        }\r\n        return result;\r\n    }\r\n    function asDocumentSymbols(values) {\r\n        if (values === void 0 || values === null) {\r\n            return undefined;\r\n        }\r\n        return values.map(asDocumentSymbol);\r\n    }\r\n    function asDocumentSymbol(value) {\r\n        let result = new code.DocumentSymbol(value.name, value.detail || '', asSymbolKind(value.kind), asRange(value.range), asRange(value.selectionRange));\r\n        if (value.children !== void 0 && value.children.length > 0) {\r\n            let children = [];\r\n            for (let child of value.children) {\r\n                children.push(asDocumentSymbol(child));\r\n            }\r\n            result.children = children;\r\n        }\r\n        return result;\r\n    }\r\n    function asCommand(item) {\r\n        let result = { title: item.title, command: item.command };\r\n        if (item.arguments) {\r\n            result.arguments = item.arguments;\r\n        }\r\n        return result;\r\n    }\r\n    function asCommands(items) {\r\n        if (!items) {\r\n            return undefined;\r\n        }\r\n        return items.map(asCommand);\r\n    }\r\n    const kindMapping = new Map();\r\n    kindMapping.set(ls.CodeActionKind.Empty, code.CodeActionKind.Empty);\r\n    kindMapping.set(ls.CodeActionKind.QuickFix, code.CodeActionKind.QuickFix);\r\n    kindMapping.set(ls.CodeActionKind.Refactor, code.CodeActionKind.Refactor);\r\n    kindMapping.set(ls.CodeActionKind.RefactorExtract, code.CodeActionKind.RefactorExtract);\r\n    kindMapping.set(ls.CodeActionKind.RefactorInline, code.CodeActionKind.RefactorInline);\r\n    kindMapping.set(ls.CodeActionKind.RefactorRewrite, code.CodeActionKind.RefactorRewrite);\r\n    kindMapping.set(ls.CodeActionKind.Source, code.CodeActionKind.Source);\r\n    kindMapping.set(ls.CodeActionKind.SourceOrganizeImports, code.CodeActionKind.SourceOrganizeImports);\r\n    function asCodeActionKind(item) {\r\n        if (item === void 0 || item === null) {\r\n            return undefined;\r\n        }\r\n        let result = kindMapping.get(item);\r\n        if (result) {\r\n            return result;\r\n        }\r\n        let parts = item.split('.');\r\n        result = code.CodeActionKind.Empty;\r\n        for (let part of parts) {\r\n            result = result.append(part);\r\n        }\r\n        return result;\r\n    }\r\n    function asCodeActionKinds(items) {\r\n        if (items === void 0 || items === null) {\r\n            return undefined;\r\n        }\r\n        return items.map(kind => asCodeActionKind(kind));\r\n    }\r\n    function asCodeAction(item) {\r\n        if (item === void 0 || item === null) {\r\n            return undefined;\r\n        }\r\n        let result = new code.CodeAction(item.title);\r\n        if (item.kind !== void 0) {\r\n            result.kind = asCodeActionKind(item.kind);\r\n        }\r\n        if (item.diagnostics) {\r\n            result.diagnostics = asDiagnostics(item.diagnostics);\r\n        }\r\n        if (item.edit) {\r\n            result.edit = asWorkspaceEdit(item.edit);\r\n        }\r\n        if (item.command) {\r\n            result.command = asCommand(item.command);\r\n        }\r\n        return result;\r\n    }\r\n    function asCodeLens(item) {\r\n        if (!item) {\r\n            return undefined;\r\n        }\r\n        let result = new protocolCodeLens_1.default(asRange(item.range));\r\n        if (item.command) {\r\n            result.command = asCommand(item.command);\r\n        }\r\n        if (item.data !== void 0 && item.data !== null) {\r\n            result.data = item.data;\r\n        }\r\n        return result;\r\n    }\r\n    function asCodeLenses(items) {\r\n        if (!items) {\r\n            return undefined;\r\n        }\r\n        return items.map((codeLens) => asCodeLens(codeLens));\r\n    }\r\n    function asWorkspaceEdit(item) {\r\n        if (!item) {\r\n            return undefined;\r\n        }\r\n        let result = new code.WorkspaceEdit();\r\n        if (item.documentChanges) {\r\n            item.documentChanges.forEach(change => {\r\n                if (ls.CreateFile.is(change)) {\r\n                    result.createFile(_uriConverter(change.uri), change.options);\r\n                }\r\n                else if (ls.RenameFile.is(change)) {\r\n                    result.renameFile(_uriConverter(change.oldUri), _uriConverter(change.newUri), change.options);\r\n                }\r\n                else if (ls.DeleteFile.is(change)) {\r\n                    result.deleteFile(_uriConverter(change.uri), change.options);\r\n                }\r\n                else if (ls.TextDocumentEdit.is(change)) {\r\n                    result.set(_uriConverter(change.textDocument.uri), asTextEdits(change.edits));\r\n                }\r\n                else {\r\n                    console.error(`Unknown workspace edit change received:\\n${JSON.stringify(change, undefined, 4)}`);\r\n                }\r\n            });\r\n        }\r\n        else if (item.changes) {\r\n            Object.keys(item.changes).forEach(key => {\r\n                result.set(_uriConverter(key), asTextEdits(item.changes[key]));\r\n            });\r\n        }\r\n        return result;\r\n    }\r\n    function asDocumentLink(item) {\r\n        let range = asRange(item.range);\r\n        let target = item.target ? asUri(item.target) : undefined;\r\n        // target must be optional in DocumentLink\r\n        let link = new protocolDocumentLink_1.default(range, target);\r\n        if (item.data !== void 0 && item.data !== null) {\r\n            link.data = item.data;\r\n        }\r\n        return link;\r\n    }\r\n    function asDocumentLinks(items) {\r\n        if (!items) {\r\n            return undefined;\r\n        }\r\n        return items.map(asDocumentLink);\r\n    }\r\n    function asColor(color) {\r\n        return new code.Color(color.red, color.green, color.blue, color.alpha);\r\n    }\r\n    function asColorInformation(ci) {\r\n        return new code.ColorInformation(asRange(ci.range), asColor(ci.color));\r\n    }\r\n    function asColorInformations(colorInformation) {\r\n        if (Array.isArray(colorInformation)) {\r\n            return colorInformation.map(asColorInformation);\r\n        }\r\n        return undefined;\r\n    }\r\n    function asColorPresentation(cp) {\r\n        let presentation = new code.ColorPresentation(cp.label);\r\n        presentation.additionalTextEdits = asTextEdits(cp.additionalTextEdits);\r\n        if (cp.textEdit) {\r\n            presentation.textEdit = asTextEdit(cp.textEdit);\r\n        }\r\n        return presentation;\r\n    }\r\n    function asColorPresentations(colorPresentations) {\r\n        if (Array.isArray(colorPresentations)) {\r\n            return colorPresentations.map(asColorPresentation);\r\n        }\r\n        return undefined;\r\n    }\r\n    function asFoldingRangeKind(kind) {\r\n        if (kind) {\r\n            switch (kind) {\r\n                case ls.FoldingRangeKind.Comment:\r\n                    return code.FoldingRangeKind.Comment;\r\n                case ls.FoldingRangeKind.Imports:\r\n                    return code.FoldingRangeKind.Imports;\r\n                case ls.FoldingRangeKind.Region:\r\n                    return code.FoldingRangeKind.Region;\r\n            }\r\n        }\r\n        return void 0;\r\n    }\r\n    function asFoldingRange(r) {\r\n        return new code.FoldingRange(r.startLine, r.endLine, asFoldingRangeKind(r.kind));\r\n    }\r\n    function asFoldingRanges(foldingRanges) {\r\n        if (Array.isArray(foldingRanges)) {\r\n            return foldingRanges.map(asFoldingRange);\r\n        }\r\n        return void 0;\r\n    }\r\n    function asSelectionRange(selectionRange) {\r\n        return new code.SelectionRange(asRange(selectionRange.range), selectionRange.parent ? asSelectionRange(selectionRange.parent) : undefined);\r\n    }\r\n    function asSelectionRanges(selectionRanges) {\r\n        if (!Array.isArray(selectionRanges)) {\r\n            return [];\r\n        }\r\n        let result = [];\r\n        for (let range of selectionRanges) {\r\n            result.push(asSelectionRange(range));\r\n        }\r\n        return result;\r\n    }\r\n    return {\r\n        asUri,\r\n        asDiagnostics,\r\n        asDiagnostic,\r\n        asRange,\r\n        asPosition,\r\n        asDiagnosticSeverity,\r\n        asDiagnosticTag,\r\n        asHover,\r\n        asCompletionResult,\r\n        asCompletionItem,\r\n        asTextEdit,\r\n        asTextEdits,\r\n        asSignatureHelp,\r\n        asSignatureInformations,\r\n        asSignatureInformation,\r\n        asParameterInformations,\r\n        asParameterInformation,\r\n        asDeclarationResult,\r\n        asDefinitionResult,\r\n        asLocation,\r\n        asReferences,\r\n        asDocumentHighlights,\r\n        asDocumentHighlight,\r\n        asDocumentHighlightKind,\r\n        asSymbolKind,\r\n        asSymbolInformations,\r\n        asSymbolInformation,\r\n        asDocumentSymbols,\r\n        asDocumentSymbol,\r\n        asCommand,\r\n        asCommands,\r\n        asCodeAction,\r\n        asCodeActionKind,\r\n        asCodeActionKinds,\r\n        asCodeLens,\r\n        asCodeLenses,\r\n        asWorkspaceEdit,\r\n        asDocumentLink,\r\n        asDocumentLinks,\r\n        asFoldingRangeKind,\r\n        asFoldingRange,\r\n        asFoldingRanges,\r\n        asColor,\r\n        asColorInformation,\r\n        asColorInformations,\r\n        asColorPresentation,\r\n        asColorPresentations,\r\n        asSelectionRange,\r\n        asSelectionRanges\r\n    };\r\n}\r\nexports.createConverter = createConverter;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst code = require(\"vscode\");\r\nclass ProtocolDocumentLink extends code.DocumentLink {\r\n    constructor(range, target) {\r\n        super(range, target);\r\n    }\r\n}\r\nexports.default = ProtocolDocumentLink;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst vscode_1 = require(\"vscode\");\r\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\r\nconst client_1 = require(\"./client\");\r\nfunction ensure(target, key) {\r\n    if (target[key] === void 0) {\r\n        target[key] = {};\r\n    }\r\n    return target[key];\r\n}\r\nclass TypeDefinitionFeature extends client_1.TextDocumentFeature {\r\n    constructor(client) {\r\n        super(client, vscode_languageserver_protocol_1.TypeDefinitionRequest.type);\r\n    }\r\n    fillClientCapabilities(capabilites) {\r\n        ensure(ensure(capabilites, 'textDocument'), 'typeDefinition').dynamicRegistration = true;\r\n        let typeDefinitionSupport = ensure(ensure(capabilites, 'textDocument'), 'typeDefinition');\r\n        typeDefinitionSupport.dynamicRegistration = true;\r\n        typeDefinitionSupport.linkSupport = true;\r\n    }\r\n    initialize(capabilities, documentSelector) {\r\n        let [id, options] = this.getRegistration(documentSelector, capabilities.typeDefinitionProvider);\r\n        if (!id || !options) {\r\n            return;\r\n        }\r\n        this.register(this.messages, { id: id, registerOptions: options });\r\n    }\r\n    registerLanguageProvider(options) {\r\n        let client = this._client;\r\n        let provideTypeDefinition = (document, position, token) => {\r\n            return client.sendRequest(vscode_languageserver_protocol_1.TypeDefinitionRequest.type, client.code2ProtocolConverter.asTextDocumentPositionParams(document, position), token).then(client.protocol2CodeConverter.asDefinitionResult, (error) => {\r\n                client.logFailedRequest(vscode_languageserver_protocol_1.TypeDefinitionRequest.type, error);\r\n                return Promise.resolve(null);\r\n            });\r\n        };\r\n        let middleware = client.clientOptions.middleware;\r\n        return vscode_1.languages.registerTypeDefinitionProvider(options.documentSelector, {\r\n            provideTypeDefinition: (document, position, token) => {\r\n                return middleware.provideTypeDefinition\r\n                    ? middleware.provideTypeDefinition(document, position, token, provideTypeDefinition)\r\n                    : provideTypeDefinition(document, position, token);\r\n            }\r\n        });\r\n    }\r\n}\r\nexports.TypeDefinitionFeature = TypeDefinitionFeature;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nclass Delayer {\r\n    constructor(defaultDelay) {\r\n        this.defaultDelay = defaultDelay;\r\n        this.timeout = undefined;\r\n        this.completionPromise = undefined;\r\n        this.onSuccess = undefined;\r\n        this.task = undefined;\r\n    }\r\n    trigger(task, delay = this.defaultDelay) {\r\n        this.task = task;\r\n        if (delay >= 0) {\r\n            this.cancelTimeout();\r\n        }\r\n        if (!this.completionPromise) {\r\n            this.completionPromise = new Promise((resolve) => {\r\n                this.onSuccess = resolve;\r\n            }).then(() => {\r\n                this.completionPromise = undefined;\r\n                this.onSuccess = undefined;\r\n                var result = this.task();\r\n                this.task = undefined;\r\n                return result;\r\n            });\r\n        }\r\n        if (delay >= 0 || this.timeout === void 0) {\r\n            this.timeout = setTimeout(() => {\r\n                this.timeout = undefined;\r\n                this.onSuccess(undefined);\r\n            }, delay >= 0 ? delay : this.defaultDelay);\r\n        }\r\n        return this.completionPromise;\r\n    }\r\n    forceDelivery() {\r\n        if (!this.completionPromise) {\r\n            return undefined;\r\n        }\r\n        this.cancelTimeout();\r\n        let result = this.task();\r\n        this.completionPromise = undefined;\r\n        this.onSuccess = undefined;\r\n        this.task = undefined;\r\n        return result;\r\n    }\r\n    isTriggered() {\r\n        return this.timeout !== void 0;\r\n    }\r\n    cancel() {\r\n        this.cancelTimeout();\r\n        this.completionPromise = undefined;\r\n    }\r\n    cancelTimeout() {\r\n        if (this.timeout !== void 0) {\r\n            clearTimeout(this.timeout);\r\n            this.timeout = undefined;\r\n        }\r\n    }\r\n}\r\nexports.Delayer = Delayer;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nfunction boolean(value) {\r\n    return value === true || value === false;\r\n}\r\nexports.boolean = boolean;\r\nfunction string(value) {\r\n    return typeof value === 'string' || value instanceof String;\r\n}\r\nexports.string = string;\r\nfunction number(value) {\r\n    return typeof value === 'number' || value instanceof Number;\r\n}\r\nexports.number = number;\r\nfunction error(value) {\r\n    return value instanceof Error;\r\n}\r\nexports.error = error;\r\nfunction func(value) {\r\n    return typeof value === 'function';\r\n}\r\nexports.func = func;\r\nfunction array(value) {\r\n    return Array.isArray(value);\r\n}\r\nexports.array = array;\r\nfunction stringArray(value) {\r\n    return array(value) && value.every(elem => string(elem));\r\n}\r\nexports.stringArray = stringArray;\r\nfunction typedArray(value, check) {\r\n    return Array.isArray(value) && value.every(check);\r\n}\r\nexports.typedArray = typedArray;\r\nfunction thenable(value) {\r\n    return value && func(value.then);\r\n}\r\nexports.thenable = thenable;\r\n","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nclass ValueUUID {\r\n    constructor(_value) {\r\n        this._value = _value;\r\n        // empty\r\n    }\r\n    asHex() {\r\n        return this._value;\r\n    }\r\n    equals(other) {\r\n        return this.asHex() === other.asHex();\r\n    }\r\n}\r\nclass V4UUID extends ValueUUID {\r\n    constructor() {\r\n        super([\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            '-',\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            '-',\r\n            '4',\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            '-',\r\n            V4UUID._oneOf(V4UUID._timeHighBits),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            '-',\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n            V4UUID._randomHex(),\r\n        ].join(''));\r\n    }\r\n    static _oneOf(array) {\r\n        return array[Math.floor(array.length * Math.random())];\r\n    }\r\n    static _randomHex() {\r\n        return V4UUID._oneOf(V4UUID._chars);\r\n    }\r\n}\r\nV4UUID._chars = ['0', '1', '2', '3', '4', '5', '6', '6', '7', '8', '9', 'a', 'b', 'c', 'd', 'e', 'f'];\r\nV4UUID._timeHighBits = ['8', '9', 'a', 'b'];\r\n/**\r\n * An empty UUID that contains only zeros.\r\n */\r\nexports.empty = new ValueUUID('00000000-0000-0000-0000-000000000000');\r\nfunction v4() {\r\n    return new V4UUID();\r\n}\r\nexports.v4 = v4;\r\nconst _UUIDPattern = /^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;\r\nfunction isUUID(value) {\r\n    return _UUIDPattern.test(value);\r\n}\r\nexports.isUUID = isUUID;\r\n/**\r\n * Parses a UUID that is of the format xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx.\r\n * @param value A uuid string.\r\n */\r\nfunction parse(value) {\r\n    if (!isUUID(value)) {\r\n        throw new Error('invalid uuid');\r\n    }\r\n    return new ValueUUID(value);\r\n}\r\nexports.parse = parse;\r\nfunction generateUuid() {\r\n    return v4().asHex();\r\n}\r\nexports.generateUuid = generateUuid;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst UUID = require(\"./utils/uuid\");\r\nconst vscode_1 = require(\"vscode\");\r\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\r\nfunction access(target, key) {\r\n    if (target === void 0) {\r\n        return undefined;\r\n    }\r\n    return target[key];\r\n}\r\nclass WorkspaceFoldersFeature {\r\n    constructor(_client) {\r\n        this._client = _client;\r\n        this._listeners = new Map();\r\n    }\r\n    get messages() {\r\n        return vscode_languageserver_protocol_1.DidChangeWorkspaceFoldersNotification.type;\r\n    }\r\n    fillInitializeParams(params) {\r\n        let folders = vscode_1.workspace.workspaceFolders;\r\n        if (folders === void 0) {\r\n            params.workspaceFolders = null;\r\n        }\r\n        else {\r\n            params.workspaceFolders = folders.map(folder => this.asProtocol(folder));\r\n        }\r\n    }\r\n    fillClientCapabilities(capabilities) {\r\n        capabilities.workspace = capabilities.workspace || {};\r\n        capabilities.workspace.workspaceFolders = true;\r\n    }\r\n    initialize(capabilities) {\r\n        let client = this._client;\r\n        client.onRequest(vscode_languageserver_protocol_1.WorkspaceFoldersRequest.type, (token) => {\r\n            let workspaceFolders = () => {\r\n                let folders = vscode_1.workspace.workspaceFolders;\r\n                if (folders === void 0) {\r\n                    return null;\r\n                }\r\n                let result = folders.map((folder) => {\r\n                    return this.asProtocol(folder);\r\n                });\r\n                return result;\r\n            };\r\n            let middleware = client.clientOptions.middleware.workspace;\r\n            return middleware && middleware.workspaceFolders\r\n                ? middleware.workspaceFolders(token, workspaceFolders)\r\n                : workspaceFolders(token);\r\n        });\r\n        let value = access(access(access(capabilities, 'workspace'), 'workspaceFolders'), 'changeNotifications');\r\n        let id;\r\n        if (typeof value === 'string') {\r\n            id = value;\r\n        }\r\n        else if (value === true) {\r\n            id = UUID.generateUuid();\r\n        }\r\n        if (id) {\r\n            this.register(this.messages, {\r\n                id: id,\r\n                registerOptions: undefined\r\n            });\r\n        }\r\n    }\r\n    register(_message, data) {\r\n        let id = data.id;\r\n        let client = this._client;\r\n        let disposable = vscode_1.workspace.onDidChangeWorkspaceFolders((event) => {\r\n            let didChangeWorkspaceFolders = (event) => {\r\n                let params = {\r\n                    event: {\r\n                        added: event.added.map(folder => this.asProtocol(folder)),\r\n                        removed: event.removed.map(folder => this.asProtocol(folder))\r\n                    }\r\n                };\r\n                this._client.sendNotification(vscode_languageserver_protocol_1.DidChangeWorkspaceFoldersNotification.type, params);\r\n            };\r\n            let middleware = client.clientOptions.middleware.workspace;\r\n            middleware && middleware.didChangeWorkspaceFolders\r\n                ? middleware.didChangeWorkspaceFolders(event, didChangeWorkspaceFolders)\r\n                : didChangeWorkspaceFolders(event);\r\n        });\r\n        this._listeners.set(id, disposable);\r\n    }\r\n    unregister(id) {\r\n        let disposable = this._listeners.get(id);\r\n        if (disposable === void 0) {\r\n            return;\r\n        }\r\n        this._listeners.delete(id);\r\n        disposable.dispose();\r\n    }\r\n    dispose() {\r\n        for (let disposable of this._listeners.values()) {\r\n            disposable.dispose();\r\n        }\r\n        this._listeners.clear();\r\n    }\r\n    asProtocol(workspaceFolder) {\r\n        if (workspaceFolder === void 0) {\r\n            return null;\r\n        }\r\n        return { uri: this._client.code2ProtocolConverter.asUri(workspaceFolder.uri), name: workspaceFolder.name };\r\n    }\r\n}\r\nexports.WorkspaceFoldersFeature = WorkspaceFoldersFeature;\r\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n'use strict';\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar isWindows;\nif (typeof process === 'object') {\n    isWindows = process.platform === 'win32';\n}\nelse if (typeof navigator === 'object') {\n    var userAgent = navigator.userAgent;\n    isWindows = userAgent.indexOf('Windows') >= 0;\n}\n//#endregion\nvar _schemePattern = /^\\w[\\w\\d+.-]*$/;\nvar _singleSlashStart = /^\\//;\nvar _doubleSlashStart = /^\\/\\//;\nvar _throwOnMissingSchema = true;\n/**\n * @internal\n */\nexport function setUriThrowOnMissingScheme(value) {\n    var old = _throwOnMissingSchema;\n    _throwOnMissingSchema = value;\n    return old;\n}\nfunction _validateUri(ret, _strict) {\n    // scheme, must be set\n    if (!ret.scheme) {\n        if (_strict || _throwOnMissingSchema) {\n            throw new Error(\"[UriError]: Scheme is missing: {scheme: \\\"\\\", authority: \\\"\" + ret.authority + \"\\\", path: \\\"\" + ret.path + \"\\\", query: \\\"\" + ret.query + \"\\\", fragment: \\\"\" + ret.fragment + \"\\\"}\");\n            // } else {\n            // \tconsole.warn(`[UriError]: Scheme is missing: {scheme: \"\", authority: \"${ret.authority}\", path: \"${ret.path}\", query: \"${ret.query}\", fragment: \"${ret.fragment}\"}`);\n        }\n    }\n    // scheme, https://tools.ietf.org/html/rfc3986#section-3.1\n    // ALPHA *( ALPHA / DIGIT / \"+\" / \"-\" / \".\" )\n    if (ret.scheme && !_schemePattern.test(ret.scheme)) {\n        throw new Error('[UriError]: Scheme contains illegal characters.');\n    }\n    // path, http://tools.ietf.org/html/rfc3986#section-3.3\n    // If a URI contains an authority component, then the path component\n    // must either be empty or begin with a slash (\"/\") character.  If a URI\n    // does not contain an authority component, then the path cannot begin\n    // with two slash characters (\"//\").\n    if (ret.path) {\n        if (ret.authority) {\n            if (!_singleSlashStart.test(ret.path)) {\n                throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash (\"/\") character');\n            }\n        }\n        else {\n            if (_doubleSlashStart.test(ret.path)) {\n                throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters (\"//\")');\n            }\n        }\n    }\n}\n// for a while we allowed uris *without* schemes and this is the migration\n// for them, e.g. an uri without scheme and without strict-mode warns and falls\n// back to the file-scheme. that should cause the least carnage and still be a\n// clear warning\nfunction _schemeFix(scheme, _strict) {\n    if (_strict || _throwOnMissingSchema) {\n        return scheme || _empty;\n    }\n    if (!scheme) {\n        // console.trace('BAD uri lacks scheme, falling back to file-scheme.');\n        scheme = 'file';\n    }\n    return scheme;\n}\n// implements a bit of https://tools.ietf.org/html/rfc3986#section-5\nfunction _referenceResolution(scheme, path) {\n    // the slash-character is our 'default base' as we don't\n    // support constructing URIs relative to other URIs. This\n    // also means that we alter and potentially break paths.\n    // see https://tools.ietf.org/html/rfc3986#section-5.1.4\n    switch (scheme) {\n        case 'https':\n        case 'http':\n        case 'file':\n            if (!path) {\n                path = _slash;\n            }\n            else if (path[0] !== _slash) {\n                path = _slash + path;\n            }\n            break;\n    }\n    return path;\n}\nvar _empty = '';\nvar _slash = '/';\nvar _regexp = /^(([^:/?#]+?):)?(\\/\\/([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?/;\n/**\n * Uniform Resource Identifier (URI) http://tools.ietf.org/html/rfc3986.\n * This class is a simple parser which creates the basic component parts\n * (http://tools.ietf.org/html/rfc3986#section-3) with minimal validation\n * and encoding.\n *\n *       foo://example.com:8042/over/there?name=ferret#nose\n *       \\_/   \\______________/\\_________/ \\_________/ \\__/\n *        |           |            |            |        |\n *     scheme     authority       path        query   fragment\n *        |   _____________________|__\n *       / \\ /                        \\\n *       urn:example:animal:ferret:nose\n */\nvar URI = (function () {\n    /**\n     * @internal\n     */\n    function URI(schemeOrData, authority, path, query, fragment, _strict) {\n        if (_strict === void 0) { _strict = false; }\n        if (typeof schemeOrData === 'object') {\n            this.scheme = schemeOrData.scheme || _empty;\n            this.authority = schemeOrData.authority || _empty;\n            this.path = schemeOrData.path || _empty;\n            this.query = schemeOrData.query || _empty;\n            this.fragment = schemeOrData.fragment || _empty;\n            // no validation because it's this URI\n            // that creates uri components.\n            // _validateUri(this);\n        }\n        else {\n            this.scheme = _schemeFix(schemeOrData, _strict);\n            this.authority = authority || _empty;\n            this.path = _referenceResolution(this.scheme, path || _empty);\n            this.query = query || _empty;\n            this.fragment = fragment || _empty;\n            _validateUri(this, _strict);\n        }\n    }\n    URI.isUri = function (thing) {\n        if (thing instanceof URI) {\n            return true;\n        }\n        if (!thing) {\n            return false;\n        }\n        return typeof thing.authority === 'string'\n            && typeof thing.fragment === 'string'\n            && typeof thing.path === 'string'\n            && typeof thing.query === 'string'\n            && typeof thing.scheme === 'string'\n            && typeof thing.fsPath === 'function'\n            && typeof thing.with === 'function'\n            && typeof thing.toString === 'function';\n    };\n    Object.defineProperty(URI.prototype, \"fsPath\", {\n        // ---- filesystem path -----------------------\n        /**\n         * Returns a string representing the corresponding file system path of this URI.\n         * Will handle UNC paths, normalizes windows drive letters to lower-case, and uses the\n         * platform specific path separator.\n         *\n         * * Will *not* validate the path for invalid characters and semantics.\n         * * Will *not* look at the scheme of this URI.\n         * * The result shall *not* be used for display purposes but for accessing a file on disk.\n         *\n         *\n         * The *difference* to `URI#path` is the use of the platform specific separator and the handling\n         * of UNC paths. See the below sample of a file-uri with an authority (UNC path).\n         *\n         * ```ts\n            const u = URI.parse('file://server/c$/folder/file.txt')\n            u.authority === 'server'\n            u.path === '/shares/c$/file.txt'\n            u.fsPath === '\\\\server\\c$\\folder\\file.txt'\n        ```\n         *\n         * Using `URI#path` to read a file (using fs-apis) would not be enough because parts of the path,\n         * namely the server name, would be missing. Therefore `URI#fsPath` exists - it's sugar to ease working\n         * with URIs that represent files on disk (`file` scheme).\n         */\n        get: function () {\n            // if (this.scheme !== 'file') {\n            // \tconsole.warn(`[UriError] calling fsPath with scheme ${this.scheme}`);\n            // }\n            return _makeFsPath(this);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    // ---- modify to new -------------------------\n    URI.prototype.with = function (change) {\n        if (!change) {\n            return this;\n        }\n        var scheme = change.scheme, authority = change.authority, path = change.path, query = change.query, fragment = change.fragment;\n        if (scheme === undefined) {\n            scheme = this.scheme;\n        }\n        else if (scheme === null) {\n            scheme = _empty;\n        }\n        if (authority === undefined) {\n            authority = this.authority;\n        }\n        else if (authority === null) {\n            authority = _empty;\n        }\n        if (path === undefined) {\n            path = this.path;\n        }\n        else if (path === null) {\n            path = _empty;\n        }\n        if (query === undefined) {\n            query = this.query;\n        }\n        else if (query === null) {\n            query = _empty;\n        }\n        if (fragment === undefined) {\n            fragment = this.fragment;\n        }\n        else if (fragment === null) {\n            fragment = _empty;\n        }\n        if (scheme === this.scheme\n            && authority === this.authority\n            && path === this.path\n            && query === this.query\n            && fragment === this.fragment) {\n            return this;\n        }\n        return new _URI(scheme, authority, path, query, fragment);\n    };\n    // ---- parse & validate ------------------------\n    /**\n     * Creates a new URI from a string, e.g. `http://www.msft.com/some/path`,\n     * `file:///usr/home`, or `scheme:with/path`.\n     *\n     * @param value A string which represents an URI (see `URI#toString`).\n     */\n    URI.parse = function (value, _strict) {\n        if (_strict === void 0) { _strict = false; }\n        var match = _regexp.exec(value);\n        if (!match) {\n            return new _URI(_empty, _empty, _empty, _empty, _empty);\n        }\n        return new _URI(match[2] || _empty, decodeURIComponent(match[4] || _empty), decodeURIComponent(match[5] || _empty), decodeURIComponent(match[7] || _empty), decodeURIComponent(match[9] || _empty), _strict);\n    };\n    /**\n     * Creates a new URI from a file system path, e.g. `c:\\my\\files`,\n     * `/usr/home`, or `\\\\server\\share\\some\\path`.\n     *\n     * The *difference* between `URI#parse` and `URI#file` is that the latter treats the argument\n     * as path, not as stringified-uri. E.g. `URI.file(path)` is **not the same as**\n     * `URI.parse('file://' + path)` because the path might contain characters that are\n     * interpreted (# and ?). See the following sample:\n     * ```ts\n    const good = URI.file('/coding/c#/project1');\n    good.scheme === 'file';\n    good.path === '/coding/c#/project1';\n    good.fragment === '';\n    const bad = URI.parse('file://' + '/coding/c#/project1');\n    bad.scheme === 'file';\n    bad.path === '/coding/c'; // path is now broken\n    bad.fragment === '/project1';\n    ```\n     *\n     * @param path A file system path (see `URI#fsPath`)\n     */\n    URI.file = function (path) {\n        var authority = _empty;\n        // normalize to fwd-slashes on windows,\n        // on other systems bwd-slashes are valid\n        // filename character, eg /f\\oo/ba\\r.txt\n        if (isWindows) {\n            path = path.replace(/\\\\/g, _slash);\n        }\n        // check for authority as used in UNC shares\n        // or use the path as given\n        if (path[0] === _slash && path[1] === _slash) {\n            var idx = path.indexOf(_slash, 2);\n            if (idx === -1) {\n                authority = path.substring(2);\n                path = _slash;\n            }\n            else {\n                authority = path.substring(2, idx);\n                path = path.substring(idx) || _slash;\n            }\n        }\n        return new _URI('file', authority, path, _empty, _empty);\n    };\n    URI.from = function (components) {\n        return new _URI(components.scheme, components.authority, components.path, components.query, components.fragment);\n    };\n    // ---- printing/externalize ---------------------------\n    /**\n     * Creates a string representation for this URI. It's guaranteed that calling\n     * `URI.parse` with the result of this function creates an URI which is equal\n     * to this URI.\n     *\n     * * The result shall *not* be used for display purposes but for externalization or transport.\n     * * The result will be encoded using the percentage encoding and encoding happens mostly\n     * ignore the scheme-specific encoding rules.\n     *\n     * @param skipEncoding Do not encode the result, default is `false`\n     */\n    URI.prototype.toString = function (skipEncoding) {\n        if (skipEncoding === void 0) { skipEncoding = false; }\n        return _asFormatted(this, skipEncoding);\n    };\n    URI.prototype.toJSON = function () {\n        return this;\n    };\n    URI.revive = function (data) {\n        if (!data) {\n            return data;\n        }\n        else if (data instanceof URI) {\n            return data;\n        }\n        else {\n            var result = new _URI(data);\n            result._formatted = data.external;\n            result._fsPath = data._sep === _pathSepMarker ? data.fsPath : null;\n            return result;\n        }\n    };\n    return URI;\n}());\nexport default URI;\nvar _pathSepMarker = isWindows ? 1 : undefined;\n// tslint:disable-next-line:class-name\nvar _URI = (function (_super) {\n    __extends(_URI, _super);\n    function _URI() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this._formatted = null;\n        _this._fsPath = null;\n        return _this;\n    }\n    Object.defineProperty(_URI.prototype, \"fsPath\", {\n        get: function () {\n            if (!this._fsPath) {\n                this._fsPath = _makeFsPath(this);\n            }\n            return this._fsPath;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    _URI.prototype.toString = function (skipEncoding) {\n        if (skipEncoding === void 0) { skipEncoding = false; }\n        if (!skipEncoding) {\n            if (!this._formatted) {\n                this._formatted = _asFormatted(this, false);\n            }\n            return this._formatted;\n        }\n        else {\n            // we don't cache that\n            return _asFormatted(this, true);\n        }\n    };\n    _URI.prototype.toJSON = function () {\n        var res = {\n            $mid: 1\n        };\n        // cached state\n        if (this._fsPath) {\n            res.fsPath = this._fsPath;\n            res._sep = _pathSepMarker;\n        }\n        if (this._formatted) {\n            res.external = this._formatted;\n        }\n        // uri components\n        if (this.path) {\n            res.path = this.path;\n        }\n        if (this.scheme) {\n            res.scheme = this.scheme;\n        }\n        if (this.authority) {\n            res.authority = this.authority;\n        }\n        if (this.query) {\n            res.query = this.query;\n        }\n        if (this.fragment) {\n            res.fragment = this.fragment;\n        }\n        return res;\n    };\n    return _URI;\n}(URI));\n// reserved characters: https://tools.ietf.org/html/rfc3986#section-2.2\nvar encodeTable = (_a = {},\n    _a[58 /* Colon */] = '%3A',\n    _a[47 /* Slash */] = '%2F',\n    _a[63 /* QuestionMark */] = '%3F',\n    _a[35 /* Hash */] = '%23',\n    _a[91 /* OpenSquareBracket */] = '%5B',\n    _a[93 /* CloseSquareBracket */] = '%5D',\n    _a[64 /* AtSign */] = '%40',\n    _a[33 /* ExclamationMark */] = '%21',\n    _a[36 /* DollarSign */] = '%24',\n    _a[38 /* Ampersand */] = '%26',\n    _a[39 /* SingleQuote */] = '%27',\n    _a[40 /* OpenParen */] = '%28',\n    _a[41 /* CloseParen */] = '%29',\n    _a[42 /* Asterisk */] = '%2A',\n    _a[43 /* Plus */] = '%2B',\n    _a[44 /* Comma */] = '%2C',\n    _a[59 /* Semicolon */] = '%3B',\n    _a[61 /* Equals */] = '%3D',\n    _a[32 /* Space */] = '%20',\n    _a);\nfunction encodeURIComponentFast(uriComponent, allowSlash) {\n    var res = undefined;\n    var nativeEncodePos = -1;\n    for (var pos = 0; pos < uriComponent.length; pos++) {\n        var code = uriComponent.charCodeAt(pos);\n        // unreserved characters: https://tools.ietf.org/html/rfc3986#section-2.3\n        if ((code >= 97 /* a */ && code <= 122 /* z */)\n            || (code >= 65 /* A */ && code <= 90 /* Z */)\n            || (code >= 48 /* Digit0 */ && code <= 57 /* Digit9 */)\n            || code === 45 /* Dash */\n            || code === 46 /* Period */\n            || code === 95 /* Underline */\n            || code === 126 /* Tilde */\n            || (allowSlash && code === 47 /* Slash */)) {\n            // check if we are delaying native encode\n            if (nativeEncodePos !== -1) {\n                res += encodeURIComponent(uriComponent.substring(nativeEncodePos, pos));\n                nativeEncodePos = -1;\n            }\n            // check if we write into a new string (by default we try to return the param)\n            if (res !== undefined) {\n                res += uriComponent.charAt(pos);\n            }\n        }\n        else {\n            // encoding needed, we need to allocate a new string\n            if (res === undefined) {\n                res = uriComponent.substr(0, pos);\n            }\n            // check with default table first\n            var escaped = encodeTable[code];\n            if (escaped !== undefined) {\n                // check if we are delaying native encode\n                if (nativeEncodePos !== -1) {\n                    res += encodeURIComponent(uriComponent.substring(nativeEncodePos, pos));\n                    nativeEncodePos = -1;\n                }\n                // append escaped variant to result\n                res += escaped;\n            }\n            else if (nativeEncodePos === -1) {\n                // use native encode only when needed\n                nativeEncodePos = pos;\n            }\n        }\n    }\n    if (nativeEncodePos !== -1) {\n        res += encodeURIComponent(uriComponent.substring(nativeEncodePos));\n    }\n    return res !== undefined ? res : uriComponent;\n}\nfunction encodeURIComponentMinimal(path) {\n    var res = undefined;\n    for (var pos = 0; pos < path.length; pos++) {\n        var code = path.charCodeAt(pos);\n        if (code === 35 /* Hash */ || code === 63 /* QuestionMark */) {\n            if (res === undefined) {\n                res = path.substr(0, pos);\n            }\n            res += encodeTable[code];\n        }\n        else {\n            if (res !== undefined) {\n                res += path[pos];\n            }\n        }\n    }\n    return res !== undefined ? res : path;\n}\n/**\n * Compute `fsPath` for the given uri\n */\nfunction _makeFsPath(uri) {\n    var value;\n    if (uri.authority && uri.path.length > 1 && uri.scheme === 'file') {\n        // unc path: file://shares/c$/far/boo\n        value = \"//\" + uri.authority + uri.path;\n    }\n    else if (uri.path.charCodeAt(0) === 47 /* Slash */\n        && (uri.path.charCodeAt(1) >= 65 /* A */ && uri.path.charCodeAt(1) <= 90 /* Z */ || uri.path.charCodeAt(1) >= 97 /* a */ && uri.path.charCodeAt(1) <= 122 /* z */)\n        && uri.path.charCodeAt(2) === 58 /* Colon */) {\n        // windows drive letter: file:///c:/far/boo\n        value = uri.path[1].toLowerCase() + uri.path.substr(2);\n    }\n    else {\n        // other path\n        value = uri.path;\n    }\n    if (isWindows) {\n        value = value.replace(/\\//g, '\\\\');\n    }\n    return value;\n}\n/**\n * Create the external version of a uri\n */\nfunction _asFormatted(uri, skipEncoding) {\n    var encoder = !skipEncoding\n        ? encodeURIComponentFast\n        : encodeURIComponentMinimal;\n    var res = '';\n    var scheme = uri.scheme, authority = uri.authority, path = uri.path, query = uri.query, fragment = uri.fragment;\n    if (scheme) {\n        res += scheme;\n        res += ':';\n    }\n    if (authority || scheme === 'file') {\n        res += _slash;\n        res += _slash;\n    }\n    if (authority) {\n        var idx = authority.indexOf('@');\n        if (idx !== -1) {\n            // <user>@<auth>\n            var userinfo = authority.substr(0, idx);\n            authority = authority.substr(idx + 1);\n            idx = userinfo.indexOf(':');\n            if (idx === -1) {\n                res += encoder(userinfo, false);\n            }\n            else {\n                // <user>:<pass>@<auth>\n                res += encoder(userinfo.substr(0, idx), false);\n                res += ':';\n                res += encoder(userinfo.substr(idx + 1), false);\n            }\n            res += '@';\n        }\n        authority = authority.toLowerCase();\n        idx = authority.indexOf(':');\n        if (idx === -1) {\n            res += encoder(authority, false);\n        }\n        else {\n            // <auth>:<port>\n            res += encoder(authority.substr(0, idx), false);\n            res += authority.substr(idx);\n        }\n    }\n    if (path) {\n        // lower-case windows drive letters in /C:/fff or C:/fff\n        if (path.length >= 3 && path.charCodeAt(0) === 47 /* Slash */ && path.charCodeAt(2) === 58 /* Colon */) {\n            var code = path.charCodeAt(1);\n            if (code >= 65 /* A */ && code <= 90 /* Z */) {\n                path = \"/\" + String.fromCharCode(code + 32) + \":\" + path.substr(3); // \"/c:\".length === 3\n            }\n        }\n        else if (path.length >= 2 && path.charCodeAt(1) === 58 /* Colon */) {\n            var code = path.charCodeAt(0);\n            if (code >= 65 /* A */ && code <= 90 /* Z */) {\n                path = String.fromCharCode(code + 32) + \":\" + path.substr(2); // \"/c:\".length === 3\n            }\n        }\n        // encode the rest of the path\n        res += encoder(path, true);\n    }\n    if (query) {\n        res += '?';\n        res += encoder(query, false);\n    }\n    if (fragment) {\n        res += '#';\n        res += !skipEncoding ? encodeURIComponentFast(fragment, false) : fragment;\n    }\n    return res;\n}\nvar _a;\n","/* --------------------------------------------------------------------------------------------\n * Copyright (c) 2018 TypeFox GmbH (http://www.typefox.io). All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nimport { MessageConnection, Logger } from 'vscode-jsonrpc';\nimport { createWebSocketConnection, IWebSocket } from './socket';\nimport { ConsoleLogger } from './logger';\n\nexport function listen(options: {\n    webSocket: WebSocket;\n    logger?: Logger;\n    onConnection: (connection: MessageConnection) => void;\n}) {\n    const { webSocket, onConnection } = options;\n    const logger = options.logger || new ConsoleLogger();\n    webSocket.onopen = () => {\n        const socket = toSocket(webSocket);\n        const connection = createWebSocketConnection(socket, logger);\n        onConnection(connection);\n    };\n}\n\nexport function toSocket(webSocket: WebSocket): IWebSocket {\n    return {\n        send: content => webSocket.send(content),\n        onMessage: cb => webSocket.onmessage = event => cb(event.data),\n        onError: cb => webSocket.onerror = event => {\n            if ('message' in event) {\n                cb((event as any).message)\n            }\n        },\n        onClose: cb => webSocket.onclose = event => cb(event.code, event.reason),\n        dispose: () => webSocket.close()\n    }\n}","/* --------------------------------------------------------------------------------------------\n * Copyright (c) 2018 TypeFox GmbH (http://www.typefox.io). All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nimport { Disposable } from 'vscode-jsonrpc/lib/events';\n\nexport {\n    Disposable\n}\n\nexport class DisposableCollection implements Disposable {\n    protected readonly disposables: Disposable[] = [];\n\n    dispose(): void {\n        while (this.disposables.length !== 0) {\n            this.disposables.pop()!.dispose();\n        }\n    }\n\n    push(disposable: Disposable): Disposable {\n        const disposables = this.disposables;\n        disposables.push(disposable);\n        return {\n            dispose(): void {\n                const index = disposables.indexOf(disposable);\n                if (index !== -1) {\n                    disposables.splice(index, 1);\n                }\n            }\n        }\n    }\n\n}","/* --------------------------------------------------------------------------------------------\n * Copyright (c) 2018 TypeFox GmbH (http://www.typefox.io). All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nexport * from 'vscode-jsonrpc';\nexport * from 'vscode-jsonrpc/lib/messages';\nexport * from './disposable';\nexport * from './socket';\nexport * from './logger';\nexport * from './connection';","/* --------------------------------------------------------------------------------------------\n * Copyright (c) 2018 TypeFox GmbH (http://www.typefox.io). All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nimport { Logger } from \"vscode-jsonrpc\";\n\nexport class ConsoleLogger implements Logger {\n    public error(message: string): void {\n        console.error(message);\n    }\n\n    public warn(message: string): void {\n        console.warn(message);\n    }\n\n    public info(message: string): void {\n        console.info(message);\n    }\n\n    public log(message: string): void {\n        console.log(message);\n    }\n\n    public debug(message: string): void {\n        console.debug(message);\n    }\n}\n","/* --------------------------------------------------------------------------------------------\n * Copyright (c) 2018 TypeFox GmbH (http://www.typefox.io). All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nimport { MessageConnection, createMessageConnection, Logger } from \"vscode-jsonrpc\";\nimport { IWebSocket } from \"./socket\";\nimport { WebSocketMessageReader } from \"./reader\";\nimport { WebSocketMessageWriter } from \"./writer\";\n\nexport function createWebSocketConnection(socket: IWebSocket, logger: Logger): MessageConnection {\n    const messageReader = new WebSocketMessageReader(socket);\n    const messageWriter = new WebSocketMessageWriter(socket);\n    const connection = createMessageConnection(messageReader, messageWriter, logger);\n    connection.onClose(() => connection.dispose());\n    return connection;\n}\n","/* --------------------------------------------------------------------------------------------\n * Copyright (c) 2018 TypeFox GmbH (http://www.typefox.io). All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nexport * from './socket';\nexport * from './reader';\nexport * from './writer';\nexport * from './connection';\n","/* --------------------------------------------------------------------------------------------\n * Copyright (c) 2018 TypeFox GmbH (http://www.typefox.io). All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\n\nimport { DataCallback, AbstractMessageReader } from \"vscode-jsonrpc/lib/messageReader\";\nimport { IWebSocket } from \"./socket\";\n\nexport class WebSocketMessageReader extends AbstractMessageReader {\n\n    protected state: 'initial' | 'listening' | 'closed' = 'initial';\n    protected callback: DataCallback | undefined;\n    protected readonly events: { message?: any, error?: any }[] = [];\n\n    constructor(protected readonly socket: IWebSocket) {\n        super();\n        this.socket.onMessage(message =>\n            this.readMessage(message)\n        );\n        this.socket.onError(error =>\n            this.fireError(error)\n        );\n        this.socket.onClose((code, reason) => {\n            if (code !== 1000) {\n                const error: Error = {\n                    name: '' + code,\n                    message: `Error during socket reconnect: code = ${code}, reason = ${reason}`\n                };\n                this.fireError(error);\n            }\n            this.fireClose();\n        });\n    }\n\n    listen(callback: DataCallback): void {\n        if (this.state === 'initial') {\n            this.state = 'listening';\n            this.callback = callback;\n            while (this.events.length !== 0) {\n                const event = this.events.pop()!;\n                if (event.message) {\n                    this.readMessage(event.message);\n                } else if (event.error) {\n                    this.fireError(event.error);\n                } else {\n                    this.fireClose();\n                }\n            }\n        }\n    }\n\n    protected readMessage(message: any): void {\n        if (this.state === 'initial') {\n            this.events.splice(0, 0, { message });\n        } else if (this.state === 'listening') {\n            const data = JSON.parse(message);\n            this.callback!(data);\n        }\n    }\n\n    protected fireError(error: any): void {\n        if (this.state === 'initial') {\n            this.events.splice(0, 0, { error });\n        } else if (this.state === 'listening') {\n            super.fireError(error);\n        }\n    }\n\n    protected fireClose(): void {\n        if (this.state === 'initial') {\n            this.events.splice(0, 0, {});\n        } else if (this.state === 'listening') {\n            super.fireClose();\n        }\n        this.state = 'closed';\n    }\n\n}\n","/* --------------------------------------------------------------------------------------------\n * Copyright (c) 2018 TypeFox GmbH (http://www.typefox.io). All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\n\nimport { Message } from \"vscode-jsonrpc/lib/messages\";\nimport { AbstractMessageWriter } from \"vscode-jsonrpc/lib/messageWriter\";\nimport { IWebSocket } from \"./socket\";\n\nexport class WebSocketMessageWriter extends AbstractMessageWriter {\n\n    protected errorCount = 0;\n\n    constructor(protected readonly socket: IWebSocket) {\n        super();\n    }\n\n    write(msg: Message): void {\n        try {\n            const content = JSON.stringify(msg);\n            this.socket.send(content);\n        } catch (e) {\n            this.errorCount++;\n            this.fireError(e, msg, this.errorCount);\n        }\n    }\n\n}\n","/*\n * base64-arraybuffer\n * https://github.com/niklasvh/base64-arraybuffer\n *\n * Copyright (c) 2012 Niklas von Hertzen\n * Licensed under the MIT license.\n */\n(function(){\n  \"use strict\";\n\n  var chars = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\";\n\n  // Use a lookup table to find the index.\n  var lookup = new Uint8Array(256);\n  for (var i = 0; i < chars.length; i++) {\n    lookup[chars.charCodeAt(i)] = i;\n  }\n\n  exports.encode = function(arraybuffer) {\n    var bytes = new Uint8Array(arraybuffer),\n    i, len = bytes.length, base64 = \"\";\n\n    for (i = 0; i < len; i+=3) {\n      base64 += chars[bytes[i] >> 2];\n      base64 += chars[((bytes[i] & 3) << 4) | (bytes[i + 1] >> 4)];\n      base64 += chars[((bytes[i + 1] & 15) << 2) | (bytes[i + 2] >> 6)];\n      base64 += chars[bytes[i + 2] & 63];\n    }\n\n    if ((len % 3) === 2) {\n      base64 = base64.substring(0, base64.length - 1) + \"=\";\n    } else if (len % 3 === 1) {\n      base64 = base64.substring(0, base64.length - 2) + \"==\";\n    }\n\n    return base64;\n  };\n\n  exports.decode =  function(base64) {\n    var bufferLength = base64.length * 0.75,\n    len = base64.length, i, p = 0,\n    encoded1, encoded2, encoded3, encoded4;\n\n    if (base64[base64.length - 1] === \"=\") {\n      bufferLength--;\n      if (base64[base64.length - 2] === \"=\") {\n        bufferLength--;\n      }\n    }\n\n    var arraybuffer = new ArrayBuffer(bufferLength),\n    bytes = new Uint8Array(arraybuffer);\n\n    for (i = 0; i < len; i+=4) {\n      encoded1 = lookup[base64.charCodeAt(i)];\n      encoded2 = lookup[base64.charCodeAt(i+1)];\n      encoded3 = lookup[base64.charCodeAt(i+2)];\n      encoded4 = lookup[base64.charCodeAt(i+3)];\n\n      bytes[p++] = (encoded1 << 2) | (encoded2 >> 4);\n      bytes[p++] = ((encoded2 & 15) << 4) | (encoded3 >> 2);\n      bytes[p++] = ((encoded3 & 3) << 6) | (encoded4 & 63);\n    }\n\n    return arraybuffer;\n  };\n})();\n","exports = module.exports = require(\"../../../../../../../../css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \"/********************************************************************************\\n * Copyright (C) 2018 TypeFox and others.\\n *\\n * This program and the accompanying materials are made available under the\\n * terms of the Eclipse Public License v. 2.0 which is available at\\n * http://www.eclipse.org/legal/epl-2.0.\\n *\\n * This Source Code may also be made available under the following Secondary\\n * Licenses when the conditions for such availability set forth in the Eclipse\\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\\n * with the GNU Classpath Exception which is available at\\n * https://www.gnu.org/software/classpath/license.html.\\n *\\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\\n ********************************************************************************/\\n\\n.theia-CallHierarchyTree {\\n    font-size: var(--theia-ui-font-size1);\\n}\\n\\n.theia-CallHierarchyTree .theia-TreeNode {\\n    width: 100%;\\n}\\n\\n.theia-CallHierarchyTree .theia-ExpansionToggle {\\n    min-width: 9px;\\n    padding-right: 4px;\\n}\\n\\n.theia-CallHierarchyTree .definitionNode {\\n    display: flex;\\n}\\n\\n.theia-CallHierarchyTree .definitionNode {\\n    width: calc(100% - 32px);\\n}\\n\\n.theia-CallHierarchyTree .definitionNode div {\\n    margin-right: 5px;\\n}\\n\\n.theia-CallHierarchyTree .definitionNode .symbol {\\n    padding-right: 4px;\\n}\\n\\n.theia-CallHierarchyTree .definitionNode .referenceCount {\\n    color: var(--theia-badge-background);\\n}\\n\\n.theia-CallHierarchyTree .definitionNode .container {\\n    color: var(--theia-descriptionForeground);\\n}\\n\\n.call-hierarchy-tab-icon::before {\\n    content: \\\"\\\\F0AB\\\"\\n}\\n\\n.theia-CallHierarchyTree .definitionNode-content {\\n    white-space: nowrap;\\n    overflow: hidden;\\n    text-overflow: ellipsis;\\n}\\n\", \"\"]);\n\n// exports\n","var escape = require(\"../../../../../../../../css-loader/lib/url/escape.js\");\nexports = module.exports = require(\"../../../../../../../../css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \"/*\\nThe following CSS variables define the main public API for styling Theia.\\nThese variables should be used by all extensions wherever possible. In other\\nwords, extensions should not define custom colors, sizes, etc. unless\\nabsolutely necessary. This enables users to adapt the visual theme of Theia\\nby changing these variables.\\n\\nMany variables appear in ordered sequences (0,1,2,...). For most of these\\nsequences, colors go from dark to bright for dark themes, and from bright to\\ndark for bright themes. A few sequences are used to create contrast against\\nthe others, e.g. font and accent colors, and thus their brightness goes the\\nother way around.\\n\\nThroughout Theia, we are mostly following principles from Google's Material\\nDesign when selecting colors. We are not, however, following all of MD as it\\nis not optimized for dense, information rich UIs.\\n*/\\n\\n\\n:root {\\n\\n  /* Borders */\\n\\n  --theia-border-width: 1px;\\n  --theia-panel-border-width: 2px;\\n\\n\\n  /* UI fonts\\n    ---------------------------------------------------\\n     The UI font CSS variables are used for the typography all of the Theia\\n     user interface elements that are not directly user-generated content.\\n  */\\n\\n  --theia-ui-font-scale-factor: 1.2;\\n  --theia-ui-font-size0: calc(var(--theia-ui-font-size1) / var(--theia-ui-font-scale-factor));\\n  --theia-ui-font-size1: 13px; /* Base font size */\\n  --theia-ui-font-size2: calc(var(--theia-ui-font-size1) * var(--theia-ui-font-scale-factor));\\n  --theia-ui-font-size3: calc(var(--theia-ui-font-size2) * var(--theia-ui-font-scale-factor));\\n  --theia-ui-icon-font-size: 14px; /* Ensures px perfect FontAwesome icons */\\n  --theia-ui-font-family: \\\"Helvetica Neue\\\", Helvetica, Arial, sans-serif;\\n\\n  /* Content fonts\\n     Content font variables are used for typography of user-generated content.\\n  */\\n\\n  --theia-content-font-size: 13px;\\n  --theia-content-line-height: 22px;\\n\\n  --theia-code-font-size: 13px;\\n  --theia-code-line-height: 17px;\\n  --theia-code-padding: 5px;\\n  --theia-code-font-family: Menlo, Monaco, Consolas, \\\"Droid Sans Mono\\\", \\\"Courier New\\\", monospace, \\\"Droid Sans Fallback\\\";\\n  --theia-terminal-font-family: monospace;\\n  --theia-ui-padding: 6px;\\n\\n  /* Icons */\\n  --theia-icon-close: url(\" + escape(require(\"../icons/close-bright.svg\")) + \");\\n  --theia-sprite-y-offset: 0px;\\n  --theia-icon-circle: url(\" + escape(require(\"../icons/circle-bright.svg\")) + \");\\n  --theia-preloader: url(\" + escape(require(\"../icons/spinner.gif\")) + \");\\n  --theia-icon-case-sensitive: url(\" + escape(require(\"../icons/case-sensitive.svg\")) + \");\\n  --theia-icon-regex: url(\" + escape(require(\"../icons/regex.svg\")) + \");\\n  --theia-icon-whole-word: url(\" + escape(require(\"../icons/whole-word.svg\")) + \");\\n  --theia-icon-refresh: url(\" + escape(require(\"../icons/Refresh.svg\")) + \");\\n  --theia-icon-expand: url(\" + escape(require(\"../icons/expand.svg\")) + \");\\n  --theia-icon-close-all: url(\" + escape(require(\"../icons/close-all-bright.svg\")) + \");\\n  --theia-icon-collapse: url(\" + escape(require(\"../icons/collapse.svg\")) + \");\\n  --theia-icon-collapse-all: url(\" + escape(require(\"../icons/CollapseAll.svg\")) + \");\\n  --theia-icon-remove-all: url(\" + escape(require(\"../icons/remove-all.svg\")) + \");\\n  --theia-icon-add: url(\" + escape(require(\"../icons/add.svg\")) + \");\\n  --theia-icon-clear: url(\" + escape(require(\"../icons/clear-search-results.svg\")) + \");\\n  --theia-icon-replace: url(\" + escape(require(\"../icons/replace.svg\")) + \");\\n  --theia-icon-replace-all: url(\" + escape(require(\"../icons/replace-all.svg\")) + \");\\n  --theia-icon-open-file: url(\" + escape(require(\"../icons/open-file-bright.svg\")) + \");\\n  --theia-icon-open-change: url(\" + escape(require(\"../icons/open-change-bright.svg\")) + \");\\n  --theia-icon-preview: url(\" + escape(require(\"../icons/preview-bright.svg\")) + \");\\n  --theia-icon-open-json: url(\" + escape(require(\"../icons/edit-json.svg\")) + \");\\n  --theia-icon-size: 16px;\\n\\n  /* Scrollbars */\\n  --theia-scrollbar-width: 10px;\\n  --theia-scrollbar-rail-width: 10px;\\n\\n  /* Statusbar */\\n  --theia-statusBar-font-size: 12px;\\n \\n  /* Opacity for disabled mod  */\\n  --theia-mod-disabled-opacity: 0.4;\\n}\\n\", \"\"]);\n\n// exports\n","var escape = require(\"../../../../../../../../css-loader/lib/url/escape.js\");\nexports = module.exports = require(\"../../../../../../../../css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \"/*\\nThe following CSS variables define the main public API for styling Theia.\\nThese variables should be used by all extensions wherever possible. In other\\nwords, extensions should not define custom colors, sizes, etc. unless\\nabsolutely necessary. This enables users to adapt the visual theme of Theia\\nby changing these variables.\\n\\nMany variables appear in ordered sequences (0,1,2,...). For most of these\\nsequences, colors go from dark to bright for dark themes, and from bright to\\ndark for bright themes. A few sequences are used to create contrast against\\nthe others, e.g. font and accent colors, and thus their brightness goes the\\nother way around.\\n\\nThroughout Theia, we are mostly following principles from Google's Material\\nDesign when selecting colors. We are not, however, following all of MD as it\\nis not optimized for dense, information rich UIs.\\n*/\\n\\n\\n:root {\\n\\n  /* Borders: Width and color (dark to bright) */\\n\\n  --theia-border-width: 1px;\\n  --theia-panel-border-width: 2px;\\n\\n\\n  /* UI fonts: Family, size and color (bright to dark)\\n    ---------------------------------------------------\\n     The UI font CSS variables are used for the typography all of the Theia\\n     user interface elements that are not directly user-generated content.\\n  */\\n\\n  --theia-ui-font-scale-factor: 1.2;\\n  --theia-ui-font-size0: calc(var(--theia-ui-font-size1) / var(--theia-ui-font-scale-factor));\\n  --theia-ui-font-size1: 13px; /* Base font size */\\n  --theia-ui-font-size2: calc(var(--theia-ui-font-size1) * var(--theia-ui-font-scale-factor));\\n  --theia-ui-font-size3: calc(var(--theia-ui-font-size2) * var(--theia-ui-font-scale-factor));\\n  --theia-ui-icon-font-size: 14px; /* Ensures px perfect FontAwesome icons */\\n  --theia-ui-font-family: \\\"Helvetica Neue\\\", Helvetica, Arial, sans-serif;\\n\\n  /* Content fonts: Family, size and color (bright to dark)\\n     Content font variables are used for typography of user-generated content.\\n  */\\n\\n  --theia-content-font-size: 13px;\\n  --theia-content-line-height: 22px;\\n\\n  --theia-code-font-size: 13px;\\n  --theia-code-line-height: 17px;\\n  --theia-code-padding: 5px;\\n  --theia-code-font-family: Menlo, Monaco, Consolas, \\\"Droid Sans Mono\\\", \\\"Courier New\\\", monospace, \\\"Droid Sans Fallback\\\";\\n  --theia-terminal-font-family: monospace;\\n  --theia-ui-padding: 6px;\\n\\n  /* Icons */\\n  --theia-icon-close: url(\" + escape(require(\"../icons/close-dark.svg\")) + \");\\n  --theia-sprite-y-offset: -20px;\\n  --theia-icon-circle: url(\" + escape(require(\"../icons/circle-dark.svg\")) + \");\\n  --theia-preloader: url(\" + escape(require(\"../icons/spinner.gif\")) + \");\\n  --theia-icon-case-sensitive: url(\" + escape(require(\"../icons/case-sensitive-dark.svg\")) + \");\\n  --theia-icon-regex: url(\" + escape(require(\"../icons/regex-dark.svg\")) + \");\\n  --theia-icon-whole-word: url(\" + escape(require(\"../icons/whole-word-dark.svg\")) + \");\\n  --theia-icon-refresh: url(\" + escape(require(\"../icons/Refresh_inverse.svg\")) + \");\\n  --theia-icon-expand: url(\" + escape(require(\"../icons/expand.svg\")) + \");\\n  --theia-icon-close-all: url(\" + escape(require(\"../icons/close-all-dark.svg\")) + \");\\n  --theia-icon-collapse: url(\" + escape(require(\"../icons/collapse.svg\")) + \");\\n  --theia-icon-collapse-all: url(\" + escape(require(\"../icons/CollapseAll_inverse.svg\")) + \");\\n  --theia-icon-remove-all: url(\" + escape(require(\"../icons/remove-all-inverse.svg\")) + \");\\n  --theia-icon-add: url(\" + escape(require(\"../icons/add-inverse.svg\")) + \");\\n  --theia-icon-clear: url(\" + escape(require(\"../icons/clear-search-results-dark.svg\")) + \");\\n  --theia-icon-replace: url(\" + escape(require(\"../icons/replace-inverse.svg\")) + \");\\n  --theia-icon-replace-all: url(\" + escape(require(\"../icons/replace-all-inverse.svg\")) + \");\\n  --theia-icon-open-file: url(\" + escape(require(\"../icons/open-file-dark.svg\")) + \");\\n  --theia-icon-open-change: url(\" + escape(require(\"../icons/open-change-dark.svg\")) + \");\\n  --theia-icon-preview: url(\" + escape(require(\"../icons/preview-dark.svg\")) + \");\\n  --theia-icon-open-json: url(\" + escape(require(\"../icons/edit-json-dark.svg\")) + \");\\n  --theia-icon-size: 16px;\\n\\n  /* Scrollbars */\\n  --theia-scrollbar-width: 10px;\\n  --theia-scrollbar-rail-width: 10px;\\n\\n  /* Statusbar */\\n  --theia-statusBar-font-size: 12px;\\n\\n  /* Opacity for disabled mod  */\\n  --theia-mod-disabled-opacity: 0.4;\\n}\\n\", \"\"]);\n\n// exports\n","exports = module.exports = require(\"../../../../../../../../css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \"/********************************************************************************\\n * Copyright (C) 2018 TypeFox and others.\\n *\\n * This program and the accompanying materials are made available under the\\n * terms of the Eclipse Public License v. 2.0 which is available at\\n * http://www.eclipse.org/legal/epl-2.0.\\n *\\n * This Source Code may also be made available under the following Secondary\\n * Licenses when the conditions for such availability set forth in the Eclipse\\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\\n * with the GNU Classpath Exception which is available at\\n * https://www.gnu.org/software/classpath/license.html.\\n *\\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\\n ********************************************************************************/\\n\\n #outputView {\\n\\tfont-size: var(--theia-ui-font-size1);\\n}\\n\\n#outputView #outputContents {\\n    overflow: auto;\\n    height: inherit;\\n    padding: 6px;\\n    box-sizing: border-box;\\n}\\n\\n.theia-side-panel #outputView #outputContents {\\n    margin-left: 14px;\\n}\\n\\n#outputView #outputChannelList {\\n    line-height: var(--theia-content-line-height);\\n    font-size: var(--theia-ui-font-size1);\\n    \\n    -webkit-appearance: none;\\n    -moz-appearance: none;\\n    background-position: calc(100% - 6px) 8px, calc(100% - 2px) 8px, 100% 0;\\n    background-size: 4px 5px;\\n    background-repeat: no-repeat;\\n    padding-left: 3px;\\n    padding-right: 15px;\\n}\\n\\n#outputView #outputClear {\\n    background-image: var(--theia-icon-clear);\\n    background-position: center;\\n    background-repeat: no-repeat;\\n    display: inline-block;\\n    width: 21px;\\n    opacity: var(--theia-mod-disabled-opacity);;\\n}\\n\\n#outputView #outputClear.enabled {\\n    opacity: 0.7;\\n    cursor: pointer;\\n}\\n\\n#outputView #outputClear.enabled:hover {\\n    opacity: 1;\\n}\\n\\n.output-tab-icon::before {\\n    content: \\\"\\\\F024\\\"\\n}\\n\", \"\"]);\n\n// exports\n",null],"sourceRoot":""}